<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>ESIG Prep Guide - Redirection</title>
    <script>
      // Redirection intelligente pour pages existantes et inexistantes
      (function() {
        // La base de l'application
        var baseUrl = 'https://abdouldiouf2.github.io/Esig-prep-guide';
        var currentPath = location.pathname;

        // Liste des routes valides dans l'application
        // Ajoutez toutes vos routes valides ici
        var validRoutes = [
          '/',
          '/login',
          '/register',
          '/dashboard',
          '/profile',
          '/faq',
          '/reset-password',
          '/resource-library',
          '/terms',
          '/not-found',
          '/admin/dashboard'
          // autres routes...
        ];

        // Nettoyer le chemin pour l'analyse
        var pathToCheck = currentPath.replace('/Esig-prep-guide', '');
        if (pathToCheck === '') pathToCheck = '/';
        
        // Détecter et corriger les boucles de redirection
        if (currentPath.match(/\/Esig-prep-guide\/Esig-prep-guide/)) {
          console.log('Boucle détectée, redirection vers la racine');
          location.replace(baseUrl);
          return;
        }

        // Vérifier si c'est une route valide
        var isValidRoute = validRoutes.some(function(route) {
          return pathToCheck === route || pathToCheck.startsWith(route + '/');
        });

        if (isValidRoute) {
          // Si c'est une route valide, préserver la route
          var cleanPath = currentPath.replace(/\/Esig-prep-guide\/Esig-prep-guide\//g, '/Esig-prep-guide/');
          console.log('Route valide, préservation: ' + cleanPath);
          if (cleanPath !== currentPath) {
            location.replace(baseUrl + pathToCheck);
          }
        } else {
          // Si c'est une route invalide, rediriger vers NotFound
          console.log('Route invalide, redirection vers NotFound');
          location.replace(baseUrl + '/not-found');
        }
      })();
    </script>
  </head>
  <body>
    <h1>Redirection en cours...</h1>
    <p>Si la redirection ne fonctionne pas, <a href="https://abdouldiouf2.github.io/Esig-prep-guide/">retournez à la page d'accueil</a>.</p>
  </body>
</html>
