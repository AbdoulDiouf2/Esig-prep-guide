var vE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var $5=vE((J5,z1)=>{function xE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gv={exports:{}},kc={},yv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ca=Symbol.for("react.element"),wE=Symbol.for("react.portal"),bE=Symbol.for("react.fragment"),EE=Symbol.for("react.strict_mode"),NE=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),SE=Symbol.for("react.forward_ref"),AE=Symbol.for("react.suspense"),jE=Symbol.for("react.memo"),kE=Symbol.for("react.lazy"),yg=Symbol.iterator;function CE(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xv=Object.assign,_v={};function Ei(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||vv}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wv(){}wv.prototype=Ei.prototype;function mf(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||vv}var pf=mf.prototype=new wv;pf.constructor=mf;xv(pf,Ei.prototype);pf.isPureReactComponent=!0;var vg=Array.isArray,bv=Object.prototype.hasOwnProperty,gf={current:null},Ev={key:!0,ref:!0,__self:!0,__source:!0};function Nv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)bv.call(e,r)&&!Ev.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ca,type:t,key:i,ref:a,props:s,_owner:gf.current}}function PE(t,e){return{$$typeof:ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ca}function RE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xg=/\/+/g;function qu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RE(""+t.key):e.toString(36)}function hl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ca:case wE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+qu(a,0):r,vg(s)?(n="",t!=null&&(n=t.replace(xg,"$&/")+"/"),hl(s,e,n,"",function(d){return d})):s!=null&&(yf(s)&&(s=PE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(xg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",vg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+qu(i,c);a+=hl(i,e,n,u,s)}else if(u=CE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+qu(i,c++),a+=hl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function qa(t,e,n){if(t==null)return t;var r=[],s=0;return hl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},fl={transition:null},LE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:fl,ReactCurrentOwner:gf};function Tv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:qa,forEach:function(t,e,n){qa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qa(t,function(){e++}),e},toArray:function(t){return qa(t,function(e){return e})||[]},only:function(t){if(!yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ei;re.Fragment=bE;re.Profiler=NE;re.PureComponent=mf;re.StrictMode=EE;re.Suspense=AE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE;re.act=Tv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)bv.call(e,u)&&!Ev.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ca,type:t.type,key:s,ref:i,props:r,_owner:a}};re.createContext=function(t){return t={$$typeof:IE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TE,_context:t},t.Consumer=t};re.createElement=Nv;re.createFactory=function(t){var e=Nv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:SE,render:t}};re.isValidElement=yf;re.lazy=function(t){return{$$typeof:kE,_payload:{_status:-1,_result:t},_init:DE}};re.memo=function(t,e){return{$$typeof:jE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};re.unstable_act=Tv;re.useCallback=function(t,e){return _t.current.useCallback(t,e)};re.useContext=function(t){return _t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};re.useEffect=function(t,e){return _t.current.useEffect(t,e)};re.useId=function(){return _t.current.useId()};re.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return _t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};re.useRef=function(t){return _t.current.useRef(t)};re.useState=function(t){return _t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return _t.current.useTransition()};re.version="18.3.1";yv.exports=re;var C=yv.exports;const Cc=_E(C),ME=xE({__proto__:null,default:Cc},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE=C,OE=Symbol.for("react.element"),FE=Symbol.for("react.fragment"),UE=Object.prototype.hasOwnProperty,qE=VE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zE={key:!0,ref:!0,__self:!0,__source:!0};function Iv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)UE.call(e,r)&&!zE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OE,type:t,key:i,ref:a,props:s,_owner:qE.current}}kc.Fragment=FE;kc.jsx=Iv;kc.jsxs=Iv;gv.exports=kc;var o=gv.exports,Sv={exports:{}},Ft={},Av={exports:{}},jv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,W){var J=$.length;$.push(W);e:for(;0<J;){var ue=J-1>>>1,me=$[ue];if(0<s(me,W))$[ue]=W,$[J]=me,J=ue;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var W=$[0],J=$.pop();if(J!==W){$[0]=J;e:for(var ue=0,me=$.length,Te=me>>>1;ue<Te;){var qt=2*(ue+1)-1,zt=$[qt],Xt=qt+1,Ct=$[Xt];if(0>s(zt,J))Xt<me&&0>s(Ct,zt)?($[ue]=Ct,$[Xt]=J,ue=Xt):($[ue]=zt,$[qt]=J,ue=qt);else if(Xt<me&&0>s(Ct,J))$[ue]=Ct,$[Xt]=J,ue=Xt;else break e}}return W}function s($,W){var J=$.sortIndex-W.sortIndex;return J!==0?J:$.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,g=null,p=3,w=!1,I=!1,k=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=$)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function M($){if(k=!1,N($),!I)if(n(u)!==null)I=!0,Et(D);else{var W=n(d);W!==null&&tt(M,W.startTime-$)}}function D($,W){I=!1,k&&(k=!1,b(y),y=-1),w=!0;var J=p;try{for(N(W),g=n(u);g!==null&&(!(g.expirationTime>W)||$&&!j());){var ue=g.callback;if(typeof ue=="function"){g.callback=null,p=g.priorityLevel;var me=ue(g.expirationTime<=W);W=t.unstable_now(),typeof me=="function"?g.callback=me:g===n(u)&&r(u),N(W)}else r(u);g=n(u)}if(g!==null)var Te=!0;else{var qt=n(d);qt!==null&&tt(M,qt.startTime-W),Te=!1}return Te}finally{g=null,p=J,w=!1}}var O=!1,S=null,y=-1,_=5,v=-1;function j(){return!(t.unstable_now()-v<_)}function R(){if(S!==null){var $=t.unstable_now();v=$;var W=!0;try{W=S(!0,$)}finally{W?A():(O=!1,S=null)}}else O=!1}var A;if(typeof E=="function")A=function(){E(R)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,Oe=ce.port2;ce.port1.onmessage=R,A=function(){Oe.postMessage(null)}}else A=function(){P(R,0)};function Et($){S=$,O||(O=!0,A())}function tt($,W){y=P(function(){$(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Et(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var J=p;p=W;try{return $()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,W){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=p;p=$;try{return W()}finally{p=J}},t.unstable_scheduleCallback=function($,W,J){var ue=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,$={id:f++,callback:W,priorityLevel:$,startTime:J,expirationTime:me,sortIndex:-1},J>ue?($.sortIndex=J,e(d,$),n(u)===null&&$===n(d)&&(k?(b(y),y=-1):k=!0,tt(M,J-ue))):($.sortIndex=me,e(u,$),I||w||(I=!0,Et(D))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var W=p;return function(){var J=p;p=W;try{return $.apply(this,arguments)}finally{p=J}}}})(jv);Av.exports=jv;var BE=Av.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=C,Ot=BE;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kv=new Set,Co={};function ws(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(Co[t]=e,t=0;t<e.length;t++)kv.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ud=Object.prototype.hasOwnProperty,GE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_g={},wg={};function HE(t){return Ud.call(wg,t)?!0:Ud.call(_g,t)?!1:GE.test(t)?wg[t]=!0:(_g[t]=!0,!1)}function WE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QE(t,e,n,r){if(e===null||typeof e>"u"||WE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QE(e,n,s,r)&&(n=null),r||s===null?HE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,za=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Fs=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),qd=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Pv=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),zd=Symbol.for("react.suspense"),Bd=Symbol.for("react.suspense_list"),Ef=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Rv=Symbol.for("react.offscreen"),bg=Symbol.iterator;function Qi(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,zu;function ro(t){if(zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zu=e&&e[1]||""}return`
`+zu+t}var Bu=!1;function $u(t,e){if(!t||Bu)return"";Bu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Bu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function KE(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=$u(t.type,!1),t;case 11:return t=$u(t.type.render,!1),t;case 1:return t=$u(t.type,!0),t;default:return""}}function $d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fs:return"Fragment";case Os:return"Portal";case qd:return"Profiler";case wf:return"StrictMode";case zd:return"Suspense";case Bd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pv:return(t.displayName||"Context")+".Consumer";case Cv:return(t._context.displayName||"Context")+".Provider";case bf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ef:return e=t.displayName||null,e!==null?e:$d(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return $d(t(e))}catch{}}return null}function YE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $d(e);case 8:return e===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JE(t){var e=Dv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ba(t){t._valueTracker||(t._valueTracker=JE(t))}function Lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mv(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function Hd(t,e){Mv(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wd(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ng(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wd(t,e,n){(e!=="number"||Ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var so=Array.isArray;function Js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Qd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(so(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Vv(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ov(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ov(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,Fv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XE=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){XE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),po[e]=po[t]})});function Uv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||po.hasOwnProperty(t)&&po[t]?(""+e).trim():e+"px"}function qv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Uv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ZE=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yd(t,e){if(e){if(ZE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Jd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xd=null;function Nf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zd=null,Xs=null,Zs=null;function Sg(t){if(t=ha(t)){if(typeof Zd!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Mc(e),Zd(t.stateNode,t.type,e))}}function zv(t){Xs?Zs?Zs.push(t):Zs=[t]:Xs=t}function Bv(){if(Xs){var t=Xs,e=Zs;if(Zs=Xs=null,Sg(t),e)for(t=0;t<e.length;t++)Sg(e[t])}}function $v(t,e){return t(e)}function Gv(){}var Gu=!1;function Hv(t,e,n){if(Gu)return t(e,n);Gu=!0;try{return $v(t,e,n)}finally{Gu=!1,(Xs!==null||Zs!==null)&&(Gv(),Bv())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=Mc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var eh=!1;if($n)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){eh=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{eh=!1}function e2(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var go=!1,Vl=null,Ol=!1,th=null,t2={onError:function(t){go=!0,Vl=t}};function n2(t,e,n,r,s,i,a,c,u){go=!1,Vl=null,e2.apply(t2,arguments)}function r2(t,e,n,r,s,i,a,c,u){if(n2.apply(this,arguments),go){if(go){var d=Vl;go=!1,Vl=null}else throw Error(q(198));Ol||(Ol=!0,th=d)}}function bs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(bs(t)!==t)throw Error(q(188))}function s2(t){var e=t.alternate;if(!e){if(e=bs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ag(s),t;if(i===r)return Ag(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function Qv(t){return t=s2(t),t!==null?Kv(t):null}function Kv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kv(t);if(e!==null)return e;t=t.sibling}return null}var Yv=Ot.unstable_scheduleCallback,jg=Ot.unstable_cancelCallback,i2=Ot.unstable_shouldYield,o2=Ot.unstable_requestPaint,Re=Ot.unstable_now,a2=Ot.unstable_getCurrentPriorityLevel,Tf=Ot.unstable_ImmediatePriority,Jv=Ot.unstable_UserBlockingPriority,Fl=Ot.unstable_NormalPriority,l2=Ot.unstable_LowPriority,Xv=Ot.unstable_IdlePriority,Pc=null,wn=null;function c2(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Pc,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:h2,u2=Math.log,d2=Math.LN2;function h2(t){return t>>>=0,t===0?32:31-(u2(t)/d2|0)|0}var Ga=64,Ha=4194304;function io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=io(c):(i&=a,i!==0&&(r=io(i)))}else a=n&~s,a!==0?r=io(a):i!==0&&(r=io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function f2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-an(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=f2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function nh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zv(){var t=Ga;return Ga<<=1,!(Ga&4194240)&&(Ga=64),t}function Hu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function p2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function If(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function ex(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tx,Sf,nx,rx,sx,rh=!1,Wa=[],vr=null,xr=null,_r=null,Do=new Map,Lo=new Map,cr=[],g2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lo.delete(e.pointerId)}}function Yi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ha(e),e!==null&&Sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function y2(t,e,n,r,s){switch(e){case"focusin":return vr=Yi(vr,t,e,n,r,s),!0;case"dragenter":return xr=Yi(xr,t,e,n,r,s),!0;case"mouseover":return _r=Yi(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Do.set(i,Yi(Do.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Lo.set(i,Yi(Lo.get(i)||null,t,e,n,r,s)),!0}return!1}function ix(t){var e=Xr(t.target);if(e!==null){var n=bs(e);if(n!==null){if(e=n.tag,e===13){if(e=Wv(n),e!==null){t.blockedOn=e,sx(t.priority,function(){nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xd=r,n.target.dispatchEvent(r),Xd=null}else return e=ha(n),e!==null&&Sf(e),t.blockedOn=n,!1;e.shift()}return!0}function Cg(t,e,n){ml(t)&&n.delete(e)}function v2(){rh=!1,vr!==null&&ml(vr)&&(vr=null),xr!==null&&ml(xr)&&(xr=null),_r!==null&&ml(_r)&&(_r=null),Do.forEach(Cg),Lo.forEach(Cg)}function Ji(t,e){t.blockedOn===e&&(t.blockedOn=null,rh||(rh=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,v2)))}function Mo(t){function e(s){return Ji(s,t)}if(0<Wa.length){Ji(Wa[0],t);for(var n=1;n<Wa.length;n++){var r=Wa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&Ji(vr,t),xr!==null&&Ji(xr,t),_r!==null&&Ji(_r,t),Do.forEach(e),Lo.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)ix(n),n.blockedOn===null&&cr.shift()}var ei=Xn.ReactCurrentBatchConfig,ql=!0;function x2(t,e,n,r){var s=pe,i=ei.transition;ei.transition=null;try{pe=1,Af(t,e,n,r)}finally{pe=s,ei.transition=i}}function _2(t,e,n,r){var s=pe,i=ei.transition;ei.transition=null;try{pe=4,Af(t,e,n,r)}finally{pe=s,ei.transition=i}}function Af(t,e,n,r){if(ql){var s=sh(t,e,n,r);if(s===null)nd(t,e,r,zl,n),kg(t,r);else if(y2(s,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<g2.indexOf(t)){for(;s!==null;){var i=ha(s);if(i!==null&&tx(i),i=sh(t,e,n,r),i===null&&nd(t,e,r,zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else nd(t,e,r,null,n)}}var zl=null;function sh(t,e,n,r){if(zl=null,t=Nf(r),t=Xr(t),t!==null)if(e=bs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zl=t,null}function ox(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a2()){case Tf:return 1;case Jv:return 4;case Fl:case l2:return 16;case Xv:return 536870912;default:return 16}default:return 16}}var mr=null,jf=null,pl=null;function ax(){if(pl)return pl;var t,e=jf,n=e.length,r,s="value"in mr?mr.value:mr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return pl=s.slice(t,1<r?1-r:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qa(){return!0}function Pg(){return!1}function Ut(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qa:Pg,this.isPropagationStopped=Pg,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kf=Ut(Ni),da=Ae({},Ni,{view:0,detail:0}),w2=Ut(da),Wu,Qu,Xi,Rc=Ae({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xi&&(Xi&&t.type==="mousemove"?(Wu=t.screenX-Xi.screenX,Qu=t.screenY-Xi.screenY):Qu=Wu=0,Xi=t),Wu)},movementY:function(t){return"movementY"in t?t.movementY:Qu}}),Rg=Ut(Rc),b2=Ae({},Rc,{dataTransfer:0}),E2=Ut(b2),N2=Ae({},da,{relatedTarget:0}),Ku=Ut(N2),T2=Ae({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),I2=Ut(T2),S2=Ae({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A2=Ut(S2),j2=Ae({},Ni,{data:0}),Dg=Ut(j2),k2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P2[t])?!!e[t]:!1}function Cf(){return R2}var D2=Ae({},da,{key:function(t){if(t.key){var e=k2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cf,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L2=Ut(D2),M2=Ae({},Rc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=Ut(M2),V2=Ae({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cf}),O2=Ut(V2),F2=Ae({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),U2=Ut(F2),q2=Ae({},Rc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z2=Ut(q2),B2=[9,13,27,32],Pf=$n&&"CompositionEvent"in window,yo=null;$n&&"documentMode"in document&&(yo=document.documentMode);var $2=$n&&"TextEvent"in window&&!yo,lx=$n&&(!Pf||yo&&8<yo&&11>=yo),Mg=" ",Vg=!1;function cx(t,e){switch(t){case"keyup":return B2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ux(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Us=!1;function G2(t,e){switch(t){case"compositionend":return ux(e);case"keypress":return e.which!==32?null:(Vg=!0,Mg);case"textInput":return t=e.data,t===Mg&&Vg?null:t;default:return null}}function H2(t,e){if(Us)return t==="compositionend"||!Pf&&cx(t,e)?(t=ax(),pl=jf=mr=null,Us=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lx&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Og(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function dx(t,e,n,r){zv(r),e=Bl(e,"onChange"),0<e.length&&(n=new kf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vo=null,Vo=null;function Q2(t){bx(t,0)}function Dc(t){var e=Bs(t);if(Lv(e))return t}function K2(t,e){if(t==="change")return e}var hx=!1;if($n){var Yu;if($n){var Ju="oninput"in document;if(!Ju){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Ju=typeof Fg.oninput=="function"}Yu=Ju}else Yu=!1;hx=Yu&&(!document.documentMode||9<document.documentMode)}function Ug(){vo&&(vo.detachEvent("onpropertychange",fx),Vo=vo=null)}function fx(t){if(t.propertyName==="value"&&Dc(Vo)){var e=[];dx(e,Vo,t,Nf(t)),Hv(Q2,e)}}function Y2(t,e,n){t==="focusin"?(Ug(),vo=e,Vo=n,vo.attachEvent("onpropertychange",fx)):t==="focusout"&&Ug()}function J2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dc(Vo)}function X2(t,e){if(t==="click")return Dc(e)}function Z2(t,e){if(t==="input"||t==="change")return Dc(e)}function eN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:eN;function Oo(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ud.call(e,s)||!un(t[s],e[s]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,e){var n=qg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qg(n)}}function mx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function px(){for(var t=window,e=Ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ml(t.document)}return e}function Rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tN(t){var e=px(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mx(n.ownerDocument.documentElement,n)){if(r!==null&&Rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zg(n,i);var a=zg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nN=$n&&"documentMode"in document&&11>=document.documentMode,qs=null,ih=null,xo=null,oh=!1;function Bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oh||qs==null||qs!==Ml(r)||(r=qs,"selectionStart"in r&&Rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xo&&Oo(xo,r)||(xo=r,r=Bl(ih,"onSelect"),0<r.length&&(e=new kf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qs)))}function Ka(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zs={animationend:Ka("Animation","AnimationEnd"),animationiteration:Ka("Animation","AnimationIteration"),animationstart:Ka("Animation","AnimationStart"),transitionend:Ka("Transition","TransitionEnd")},Xu={},gx={};$n&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Lc(t){if(Xu[t])return Xu[t];if(!zs[t])return t;var e=zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gx)return Xu[t]=e[n];return t}var yx=Lc("animationend"),vx=Lc("animationiteration"),xx=Lc("animationstart"),_x=Lc("transitionend"),wx=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){wx.set(t,e),ws(e,[t])}for(var Zu=0;Zu<$g.length;Zu++){var ed=$g[Zu],rN=ed.toLowerCase(),sN=ed[0].toUpperCase()+ed.slice(1);Lr(rN,"on"+sN)}Lr(yx,"onAnimationEnd");Lr(vx,"onAnimationIteration");Lr(xx,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(_x,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iN=new Set("cancel close invalid load scroll toggle".split(" ").concat(oo));function Gg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,r2(r,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Gg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Gg(s,c,d),i=u}}}if(Ol)throw t=th,Ol=!1,th=null,t}function _e(t,e){var n=e[dh];n===void 0&&(n=e[dh]=new Set);var r=t+"__bubble";n.has(r)||(Ex(e,t,2,!1),n.add(r))}function td(t,e,n){var r=0;e&&(r|=4),Ex(n,t,r,e)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[Ya]){t[Ya]=!0,kv.forEach(function(n){n!=="selectionchange"&&(iN.has(n)||td(n,!1,t),td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ya]||(e[Ya]=!0,td("selectionchange",!1,e))}}function Ex(t,e,n,r){switch(ox(e)){case 1:var s=x2;break;case 4:s=_2;break;default:s=Af}n=s.bind(null,e,n,t),s=void 0,!eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function nd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Xr(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Hv(function(){var d=i,f=Nf(n),g=[];e:{var p=wx.get(t);if(p!==void 0){var w=kf,I=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":w=L2;break;case"focusin":I="focus",w=Ku;break;case"focusout":I="blur",w=Ku;break;case"beforeblur":case"afterblur":w=Ku;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=E2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=O2;break;case yx:case vx:case xx:w=I2;break;case _x:w=U2;break;case"scroll":w=w2;break;case"wheel":w=z2;break;case"copy":case"cut":case"paste":w=A2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Lg}var k=(e&4)!==0,P=!k&&t==="scroll",b=k?p!==null?p+"Capture":null:p;k=[];for(var E=d,N;E!==null;){N=E;var M=N.stateNode;if(N.tag===5&&M!==null&&(N=M,b!==null&&(M=Ro(E,b),M!=null&&k.push(Uo(E,M,N)))),P)break;E=E.return}0<k.length&&(p=new w(p,I,null,n,f),g.push({event:p,listeners:k}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==Xd&&(I=n.relatedTarget||n.fromElement)&&(Xr(I)||I[Gn]))break e;if((w||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,w?(I=n.relatedTarget||n.toElement,w=d,I=I?Xr(I):null,I!==null&&(P=bs(I),I!==P||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=d),w!==I)){if(k=Rg,M="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=Lg,M="onPointerLeave",b="onPointerEnter",E="pointer"),P=w==null?p:Bs(w),N=I==null?p:Bs(I),p=new k(M,E+"leave",w,n,f),p.target=P,p.relatedTarget=N,M=null,Xr(f)===d&&(k=new k(b,E+"enter",I,n,f),k.target=N,k.relatedTarget=P,M=k),P=M,w&&I)t:{for(k=w,b=I,E=0,N=k;N;N=Ds(N))E++;for(N=0,M=b;M;M=Ds(M))N++;for(;0<E-N;)k=Ds(k),E--;for(;0<N-E;)b=Ds(b),N--;for(;E--;){if(k===b||b!==null&&k===b.alternate)break t;k=Ds(k),b=Ds(b)}k=null}else k=null;w!==null&&Hg(g,p,w,k,!1),I!==null&&P!==null&&Hg(g,P,I,k,!0)}}e:{if(p=d?Bs(d):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var D=K2;else if(Og(p))if(hx)D=Z2;else{D=J2;var O=Y2}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=X2);if(D&&(D=D(t,d))){dx(g,D,n,f);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Wd(p,"number",p.value)}switch(O=d?Bs(d):window,t){case"focusin":(Og(O)||O.contentEditable==="true")&&(qs=O,ih=d,xo=null);break;case"focusout":xo=ih=qs=null;break;case"mousedown":oh=!0;break;case"contextmenu":case"mouseup":case"dragend":oh=!1,Bg(g,n,f);break;case"selectionchange":if(nN)break;case"keydown":case"keyup":Bg(g,n,f)}var S;if(Pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Us?cx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(lx&&n.locale!=="ko"&&(Us||y!=="onCompositionStart"?y==="onCompositionEnd"&&Us&&(S=ax()):(mr=f,jf="value"in mr?mr.value:mr.textContent,Us=!0)),O=Bl(d,y),0<O.length&&(y=new Dg(y,t,null,n,f),g.push({event:y,listeners:O}),S?y.data=S:(S=ux(n),S!==null&&(y.data=S)))),(S=$2?G2(t,n):H2(t,n))&&(d=Bl(d,"onBeforeInput"),0<d.length&&(f=new Dg("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=S))}bx(g,e)})}function Uo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(t,n),i!=null&&r.unshift(Uo(t,i,s)),i=Ro(t,e),i!=null&&r.push(Uo(t,i,s))),t=t.return}return r}function Ds(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Ro(n,i),u!=null&&a.unshift(Uo(n,u,c))):s||(u=Ro(n,i),u!=null&&a.push(Uo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var oN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function Wg(t){return(typeof t=="string"?t:""+t).replace(oN,`
`).replace(aN,"")}function Ja(t,e,n){if(e=Wg(e),Wg(t)!==e&&n)throw Error(q(425))}function $l(){}var ah=null,lh=null;function ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,lN=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,cN=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(uN)}:uh;function uN(t){setTimeout(function(){throw t})}function rd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Mo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Mo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),_n="__reactFiber$"+Ti,qo="__reactProps$"+Ti,Gn="__reactContainer$"+Ti,dh="__reactEvents$"+Ti,dN="__reactListeners$"+Ti,hN="__reactHandles$"+Ti;function Xr(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[_n])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function ha(t){return t=t[_n]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Mc(t){return t[qo]||null}var hh=[],$s=-1;function Mr(t){return{current:t}}function be(t){0>$s||(t.current=hh[$s],hh[$s]=null,$s--)}function ve(t,e){$s++,hh[$s]=t.current,t.current=e}var Cr={},ht=Mr(Cr),St=Mr(!1),as=Cr;function ui(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function Gl(){be(St),be(ht)}function Yg(t,e,n){if(ht.current!==Cr)throw Error(q(168));ve(ht,e),ve(St,n)}function Nx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,YE(t)||"Unknown",s));return Ae({},n,r)}function Hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,as=ht.current,ve(ht,t),ve(St,St.current),!0}function Jg(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Nx(t,e,as),r.__reactInternalMemoizedMergedChildContext=t,be(St),be(ht),ve(ht,t)):be(St),ve(St,n)}var Cn=null,Vc=!1,sd=!1;function Tx(t){Cn===null?Cn=[t]:Cn.push(t)}function fN(t){Vc=!0,Tx(t)}function Vr(){if(!sd&&Cn!==null){sd=!0;var t=0,e=pe;try{var n=Cn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Vc=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),Yv(Tf,Vr),s}finally{pe=e,sd=!1}}return null}var Gs=[],Hs=0,Wl=null,Ql=0,Bt=[],$t=0,ls=null,Ln=1,Mn="";function Kr(t,e){Gs[Hs++]=Ql,Gs[Hs++]=Wl,Wl=t,Ql=e}function Ix(t,e,n){Bt[$t++]=Ln,Bt[$t++]=Mn,Bt[$t++]=ls,ls=t;var r=Ln;t=Mn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ln=1<<32-an(e)+s|n<<s|r,Mn=i+t}else Ln=1<<i|n<<s|r,Mn=t}function Df(t){t.return!==null&&(Kr(t,1),Ix(t,1,0))}function Lf(t){for(;t===Wl;)Wl=Gs[--Hs],Gs[Hs]=null,Ql=Gs[--Hs],Gs[Hs]=null;for(;t===ls;)ls=Bt[--$t],Bt[$t]=null,Mn=Bt[--$t],Bt[$t]=null,Ln=Bt[--$t],Bt[$t]=null}var Mt=null,Dt=null,Ee=!1,sn=null;function Sx(t,e){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ls!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Dt=null,!0):!1;default:return!1}}function fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mh(t){if(Ee){var e=Dt;if(e){var n=e;if(!Xg(t,e)){if(fh(t))throw Error(q(418));e=wr(n.nextSibling);var r=Mt;e&&Xg(t,e)?Sx(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Mt=t)}}else{if(fh(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ee=!1,Mt=t}}}function Zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Xa(t){if(t!==Mt)return!1;if(!Ee)return Zg(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ch(t.type,t.memoizedProps)),e&&(e=Dt)){if(fh(t))throw Ax(),Error(q(418));for(;e;)Sx(t,e),e=wr(e.nextSibling)}if(Zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Mt?wr(t.stateNode.nextSibling):null;return!0}function Ax(){for(var t=Dt;t;)t=wr(t.nextSibling)}function di(){Dt=Mt=null,Ee=!1}function Mf(t){sn===null?sn=[t]:sn.push(t)}var mN=Xn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e0(t){var e=t._init;return e(t._payload)}function jx(t){function e(b,E){if(t){var N=b.deletions;N===null?(b.deletions=[E],b.flags|=16):N.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function s(b,E){return b=Tr(b,E),b.index=0,b.sibling=null,b}function i(b,E,N){return b.index=N,t?(N=b.alternate,N!==null?(N=N.index,N<E?(b.flags|=2,E):N):(b.flags|=2,E)):(b.flags|=1048576,E)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,E,N,M){return E===null||E.tag!==6?(E=dd(N,b.mode,M),E.return=b,E):(E=s(E,N),E.return=b,E)}function u(b,E,N,M){var D=N.type;return D===Fs?f(b,E,N.props.children,M,N.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&e0(D)===E.type)?(M=s(E,N.props),M.ref=Zi(b,E,N),M.return=b,M):(M=El(N.type,N.key,N.props,null,b.mode,M),M.ref=Zi(b,E,N),M.return=b,M)}function d(b,E,N,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=hd(N,b.mode,M),E.return=b,E):(E=s(E,N.children||[]),E.return=b,E)}function f(b,E,N,M,D){return E===null||E.tag!==7?(E=is(N,b.mode,M,D),E.return=b,E):(E=s(E,N),E.return=b,E)}function g(b,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=dd(""+E,b.mode,N),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case za:return N=El(E.type,E.key,E.props,null,b.mode,N),N.ref=Zi(b,null,E),N.return=b,N;case Os:return E=hd(E,b.mode,N),E.return=b,E;case ar:var M=E._init;return g(b,M(E._payload),N)}if(so(E)||Qi(E))return E=is(E,b.mode,N,null),E.return=b,E;Za(b,E)}return null}function p(b,E,N,M){var D=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return D!==null?null:c(b,E,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case za:return N.key===D?u(b,E,N,M):null;case Os:return N.key===D?d(b,E,N,M):null;case ar:return D=N._init,p(b,E,D(N._payload),M)}if(so(N)||Qi(N))return D!==null?null:f(b,E,N,M,null);Za(b,N)}return null}function w(b,E,N,M,D){if(typeof M=="string"&&M!==""||typeof M=="number")return b=b.get(N)||null,c(E,b,""+M,D);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case za:return b=b.get(M.key===null?N:M.key)||null,u(E,b,M,D);case Os:return b=b.get(M.key===null?N:M.key)||null,d(E,b,M,D);case ar:var O=M._init;return w(b,E,N,O(M._payload),D)}if(so(M)||Qi(M))return b=b.get(N)||null,f(E,b,M,D,null);Za(E,M)}return null}function I(b,E,N,M){for(var D=null,O=null,S=E,y=E=0,_=null;S!==null&&y<N.length;y++){S.index>y?(_=S,S=null):_=S.sibling;var v=p(b,S,N[y],M);if(v===null){S===null&&(S=_);break}t&&S&&v.alternate===null&&e(b,S),E=i(v,E,y),O===null?D=v:O.sibling=v,O=v,S=_}if(y===N.length)return n(b,S),Ee&&Kr(b,y),D;if(S===null){for(;y<N.length;y++)S=g(b,N[y],M),S!==null&&(E=i(S,E,y),O===null?D=S:O.sibling=S,O=S);return Ee&&Kr(b,y),D}for(S=r(b,S);y<N.length;y++)_=w(S,b,y,N[y],M),_!==null&&(t&&_.alternate!==null&&S.delete(_.key===null?y:_.key),E=i(_,E,y),O===null?D=_:O.sibling=_,O=_);return t&&S.forEach(function(j){return e(b,j)}),Ee&&Kr(b,y),D}function k(b,E,N,M){var D=Qi(N);if(typeof D!="function")throw Error(q(150));if(N=D.call(N),N==null)throw Error(q(151));for(var O=D=null,S=E,y=E=0,_=null,v=N.next();S!==null&&!v.done;y++,v=N.next()){S.index>y?(_=S,S=null):_=S.sibling;var j=p(b,S,v.value,M);if(j===null){S===null&&(S=_);break}t&&S&&j.alternate===null&&e(b,S),E=i(j,E,y),O===null?D=j:O.sibling=j,O=j,S=_}if(v.done)return n(b,S),Ee&&Kr(b,y),D;if(S===null){for(;!v.done;y++,v=N.next())v=g(b,v.value,M),v!==null&&(E=i(v,E,y),O===null?D=v:O.sibling=v,O=v);return Ee&&Kr(b,y),D}for(S=r(b,S);!v.done;y++,v=N.next())v=w(S,b,y,v.value,M),v!==null&&(t&&v.alternate!==null&&S.delete(v.key===null?y:v.key),E=i(v,E,y),O===null?D=v:O.sibling=v,O=v);return t&&S.forEach(function(R){return e(b,R)}),Ee&&Kr(b,y),D}function P(b,E,N,M){if(typeof N=="object"&&N!==null&&N.type===Fs&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case za:e:{for(var D=N.key,O=E;O!==null;){if(O.key===D){if(D=N.type,D===Fs){if(O.tag===7){n(b,O.sibling),E=s(O,N.props.children),E.return=b,b=E;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&e0(D)===O.type){n(b,O.sibling),E=s(O,N.props),E.ref=Zi(b,O,N),E.return=b,b=E;break e}n(b,O);break}else e(b,O);O=O.sibling}N.type===Fs?(E=is(N.props.children,b.mode,M,N.key),E.return=b,b=E):(M=El(N.type,N.key,N.props,null,b.mode,M),M.ref=Zi(b,E,N),M.return=b,b=M)}return a(b);case Os:e:{for(O=N.key;E!==null;){if(E.key===O)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){n(b,E.sibling),E=s(E,N.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else e(b,E);E=E.sibling}E=hd(N,b.mode,M),E.return=b,b=E}return a(b);case ar:return O=N._init,P(b,E,O(N._payload),M)}if(so(N))return I(b,E,N,M);if(Qi(N))return k(b,E,N,M);Za(b,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(n(b,E.sibling),E=s(E,N),E.return=b,b=E):(n(b,E),E=dd(N,b.mode,M),E.return=b,b=E),a(b)):n(b,E)}return P}var hi=jx(!0),kx=jx(!1),Kl=Mr(null),Yl=null,Ws=null,Vf=null;function Of(){Vf=Ws=Yl=null}function Ff(t){var e=Kl.current;be(Kl),t._currentValue=e}function ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ti(t,e){Yl=t,Vf=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(Vf!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(Yl===null)throw Error(q(308));Ws=t,Yl.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var Zr=null;function Uf(t){Zr===null?Zr=[t]:Zr.push(t)}function Cx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Px(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}function t0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jl(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,f=d=u=null,c=i;do{var p=c.lane,w=c.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,k=c;switch(p=e,w=n,k.tag){case 1:if(I=k.payload,typeof I=="function"){g=I.call(w,g,p);break e}g=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=k.payload,p=typeof I=="function"?I.call(w,g,p):I,p==null)break e;g=Ae({},g,p);break e;case 2:lr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else w={eventTime:w,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=g):f=f.next=w,a|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=a,t.lanes=a,t.memoizedState=g}}function n0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var fa={},bn=Mr(fa),zo=Mr(fa),Bo=Mr(fa);function es(t){if(t===fa)throw Error(q(174));return t}function zf(t,e){switch(ve(Bo,e),ve(zo,t),ve(bn,fa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kd(e,t)}be(bn),ve(bn,e)}function fi(){be(bn),be(zo),be(Bo)}function Rx(t){es(Bo.current);var e=es(bn.current),n=Kd(e,t.type);e!==n&&(ve(zo,t),ve(bn,n))}function Bf(t){zo.current===t&&(be(bn),be(zo))}var Ie=Mr(0);function Xl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var id=[];function $f(){for(var t=0;t<id.length;t++)id[t]._workInProgressVersionPrimary=null;id.length=0}var vl=Xn.ReactCurrentDispatcher,od=Xn.ReactCurrentBatchConfig,cs=0,Se=null,Ue=null,Ge=null,Zl=!1,_o=!1,$o=0,pN=0;function it(){throw Error(q(321))}function Gf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function Hf(t,e,n,r,s,i){if(cs=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?xN:_N,t=n(r,s),_o){i=0;do{if(_o=!1,$o=0,25<=i)throw Error(q(301));i+=1,Ge=Ue=null,e.updateQueue=null,vl.current=wN,t=n(r,s)}while(_o)}if(vl.current=ec,e=Ue!==null&&Ue.next!==null,cs=0,Ge=Ue=Se=null,Zl=!1,e)throw Error(q(300));return t}function Wf(){var t=$o!==0;return $o=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Yt(){if(Ue===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Ge===null?Se.memoizedState:Ge.next;if(e!==null)Ge=e,Ue=t;else{if(t===null)throw Error(q(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Go(t,e){return typeof e=="function"?e(t):e}function ad(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((cs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=g,a=r):u=u.next=g,Se.lanes|=f,us|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,un(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ld(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);un(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Dx(){}function Lx(t,e){var n=Se,r=Yt(),s=e(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,Qf(Ox.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Ho(9,Vx.bind(null,n,r,s,e),void 0,null),He===null)throw Error(q(349));cs&30||Mx(n,e,s)}return s}function Mx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vx(t,e,n,r){e.value=n,e.getSnapshot=r,Fx(e)&&Ux(t)}function Ox(t,e,n){return n(function(){Fx(e)&&Ux(t)})}function Fx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function Ux(t){var e=Hn(t,1);e!==null&&ln(e,t,1,-1)}function r0(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Go,lastRenderedState:t},e.queue=t,t=t.dispatch=vN.bind(null,Se,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qx(){return Yt().memoizedState}function xl(t,e,n,r){var s=vn();Se.flags|=t,s.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function Oc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var a=Ue.memoizedState;if(i=a.destroy,r!==null&&Gf(r,a.deps)){s.memoizedState=Ho(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Ho(1|e,n,i,r)}function s0(t,e){return xl(8390656,8,t,e)}function Qf(t,e){return Oc(2048,8,t,e)}function zx(t,e){return Oc(4,2,t,e)}function Bx(t,e){return Oc(4,4,t,e)}function $x(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Gx(t,e,n){return n=n!=null?n.concat([t]):null,Oc(4,4,$x.bind(null,e,t),n)}function Kf(){}function Hx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Gf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qx(t,e,n){return cs&21?(un(n,e)||(n=Zv(),Se.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function gN(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=od.transition;od.transition={};try{t(!1),e()}finally{pe=n,od.transition=r}}function Kx(){return Yt().memoizedState}function yN(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yx(t))Jx(e,n);else if(n=Cx(t,e,n,r),n!==null){var s=vt();ln(n,t,r,s),Xx(n,e,r)}}function vN(t,e,n){var r=Nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yx(t))Jx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,un(c,a)){var u=e.interleaved;u===null?(s.next=s,Uf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Cx(t,e,s,r),n!==null&&(s=vt(),ln(n,t,r,s),Xx(n,e,r))}}function Yx(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Jx(t,e){_o=Zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,If(t,n)}}var ec={readContext:Kt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},xN={readContext:Kt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:s0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xl(4194308,4,$x.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return xl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yN.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:r0,useDebugValue:Kf,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=r0(!1),e=t[0];return t=gN.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=vn();if(Ee){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),He===null)throw Error(q(349));cs&30||Mx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,s0(Ox.bind(null,r,i,t),[t]),r.flags|=2048,Ho(9,Vx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=He.identifierPrefix;if(Ee){var n=Mn,r=Ln;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_N={readContext:Kt,useCallback:Hx,useContext:Kt,useEffect:Qf,useImperativeHandle:Gx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Wx,useReducer:ad,useRef:qx,useState:function(){return ad(Go)},useDebugValue:Kf,useDeferredValue:function(t){var e=Yt();return Qx(e,Ue.memoizedState,t)},useTransition:function(){var t=ad(Go)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Dx,useSyncExternalStore:Lx,useId:Kx,unstable_isNewReconciler:!1},wN={readContext:Kt,useCallback:Hx,useContext:Kt,useEffect:Qf,useImperativeHandle:Gx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Wx,useReducer:ld,useRef:qx,useState:function(){return ld(Go)},useDebugValue:Kf,useDeferredValue:function(t){var e=Yt();return Ue===null?e.memoizedState=t:Qx(e,Ue.memoizedState,t)},useTransition:function(){var t=ld(Go)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Dx,useSyncExternalStore:Lx,useId:Kx,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fc={isMounted:function(t){return(t=t._reactInternals)?bs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Nr(t),i=qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Nr(t),i=qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Nr(t),s=qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(ln(e,t,r,n),yl(e,t,r))}};function i0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function Zx(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=Kt(i):(s=At(e)?as:ht.current,r=e.contextTypes,i=(r=r!=null)?ui(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function o0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fc.enqueueReplaceState(e,e.state,null)}function yh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kt(i):(i=At(e)?as:ht.current,s.context=ui(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Fc.enqueueReplaceState(s,s.state,null),Jl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mi(t,e){try{var n="",r=e;do n+=KE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bN=typeof WeakMap=="function"?WeakMap:Map;function e_(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nc||(nc=!0,Ah=r),vh(t,e)},n}function t_(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){vh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vh(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function a0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MN.bind(null,t,e,n),e.then(t,t))}function l0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function c0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var EN=Xn.ReactCurrentOwner,It=!1;function gt(t,e,n,r){e.child=t===null?kx(e,null,n,r):hi(e,t.child,n,r)}function u0(t,e,n,r,s){n=n.render;var i=e.ref;return ti(e,s),r=Hf(t,e,n,r,i,s),n=Wf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&n&&Df(e),e.flags|=1,gt(t,e,r,s),e.child)}function d0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,n_(t,e,i,r,s)):(t=El(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function n_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return xh(t,e,n,r,s)}function r_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ks,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Ks,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(Ks,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(Ks,Rt),Rt|=r;return gt(t,e,s,n),e.child}function s_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xh(t,e,n,r,s){var i=At(n)?as:ht.current;return i=ui(e,i),ti(e,s),n=Hf(t,e,n,r,i,s),r=Wf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&r&&Df(e),e.flags|=1,gt(t,e,n,s),e.child)}function h0(t,e,n,r,s){if(At(n)){var i=!0;Hl(e)}else i=!1;if(ti(e,s),e.stateNode===null)_l(t,e),Zx(e,n,r),yh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Kt(d):(d=At(n)?as:ht.current,d=ui(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&o0(e,a,r,d),lr=!1;var p=e.memoizedState;a.state=p,Jl(e,r,a,s),u=e.memoizedState,c!==r||p!==u||St.current||lr?(typeof f=="function"&&(gh(e,n,f,r),u=e.memoizedState),(c=lr||i0(e,n,c,r,p,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Px(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:nn(e.type,c),a.props=d,g=e.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Kt(u):(u=At(n)?as:ht.current,u=ui(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==g||p!==u)&&o0(e,a,r,u),lr=!1,p=e.memoizedState,a.state=p,Jl(e,r,a,s);var I=e.memoizedState;c!==g||p!==I||St.current||lr?(typeof w=="function"&&(gh(e,n,w,r),I=e.memoizedState),(d=lr||i0(e,n,d,r,p,I,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,I,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,I,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),a.props=r,a.state=I,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return _h(t,e,n,r,i,s)}function _h(t,e,n,r,s,i){s_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Jg(e,n,!1),Wn(t,e,i);r=e.stateNode,EN.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=hi(e,t.child,null,i),e.child=hi(e,null,c,i)):gt(t,e,c,i),e.memoizedState=r.state,s&&Jg(e,n,!0),e.child}function i_(t){var e=t.stateNode;e.pendingContext?Yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yg(t,e.context,!1),zf(t,e.containerInfo)}function f0(t,e,n,r,s){return di(),Mf(s),e.flags|=256,gt(t,e,n,r),e.child}var wh={dehydrated:null,treeContext:null,retryLane:0};function bh(t){return{baseLanes:t,cachePool:null,transitions:null}}function o_(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Ie,s&1),t===null)return mh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=zc(a,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bh(n),e.memoizedState=wh,t):Yf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return NN(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Tr(c,i):(i=is(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?bh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=wh,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=zc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&Mf(r),hi(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NN(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=cd(Error(q(422))),el(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=zc({mode:"visible",children:r.children},s,0,null),i=is(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&hi(e,t.child,null,a),e.child.memoizedState=bh(a),e.memoizedState=wh,i);if(!(e.mode&1))return el(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(q(419)),r=cd(i,r,void 0),el(t,e,a,r)}if(c=(a&t.childLanes)!==0,It||c){if(r=He,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),ln(r,t,s,-1))}return nm(),r=cd(Error(q(421))),el(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=VN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=wr(s.nextSibling),Mt=e,Ee=!0,sn=null,t!==null&&(Bt[$t++]=Ln,Bt[$t++]=Mn,Bt[$t++]=ls,Ln=t.id,Mn=t.overflow,ls=e),e=Yf(e,r.children),e.flags|=4096,e)}function m0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ph(t.return,e,n)}function ud(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function a_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&m0(t,n,e);else if(t.tag===19)m0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ud(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ud(e,!0,n,null,i);break;case"together":ud(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TN(t,e,n){switch(e.tag){case 3:i_(e),di();break;case 5:Rx(e);break;case 1:At(e.type)&&Hl(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Kl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?o_(t,e,n):(ve(Ie,Ie.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);ve(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,r_(t,e,n)}return Wn(t,e,n)}var l_,Eh,c_,u_;l_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Eh=function(){};c_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,es(bn.current);var i=null;switch(n){case"input":s=Gd(t,s),r=Gd(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Qd(t,s),r=Qd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$l)}Yd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Co.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&_e("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};u_=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IN(t,e,n){var r=e.pendingProps;switch(Lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return At(e.type)&&Gl(),ot(e),null;case 3:return r=e.stateNode,fi(),be(St),be(ht),$f(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Ch(sn),sn=null))),Eh(t,e),ot(e),null;case 5:Bf(e);var s=es(Bo.current);if(n=e.type,t!==null&&e.stateNode!=null)c_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ot(e),null}if(t=es(bn.current),Xa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[qo]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<oo.length;s++)_e(oo[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Eg(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Tg(r,i),_e("invalid",r)}Yd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ja(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ja(r.textContent,c,t),s=["children",""+c]):Co.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ba(r),Ng(r,i,!0);break;case"textarea":Ba(r),Ig(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ov(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_n]=e,t[qo]=r,l_(t,e,!1,!1),e.stateNode=t;e:{switch(a=Jd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<oo.length;s++)_e(oo[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Eg(t,r),s=Gd(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Tg(t,r),s=Qd(t,r),_e("invalid",t);break;default:s=r}Yd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?qv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Po(t,u):typeof u=="number"&&Po(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?u!=null&&i==="onScroll"&&_e("scroll",t):u!=null&&_f(t,i,u,a))}switch(n){case"input":Ba(t),Ng(t,r,!1);break;case"textarea":Ba(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Js(t,!!r.multiple,i,!1):r.defaultValue!=null&&Js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)u_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=es(Bo.current),es(bn.current),Xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return ot(e),null;case 13:if(be(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Dt!==null&&e.mode&1&&!(e.flags&128))Ax(),di(),e.flags|=98560,i=!1;else if(i=Xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[_n]=e}else di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(Ch(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?qe===0&&(qe=3):nm())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return fi(),Eh(t,e),t===null&&Fo(e.stateNode.containerInfo),ot(e),null;case 10:return Ff(e.type._context),ot(e),null;case 17:return At(e.type)&&Gl(),ot(e),null;case 19:if(be(Ie),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)eo(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Xl(t),a!==null){for(e.flags|=128,eo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>pi&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ee)return ot(e),null}else 2*Re()-i.renderingStartTime>pi&&n!==1073741824&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Ie.current,ve(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function SN(t,e){switch(Lf(e),e.tag){case 1:return At(e.type)&&Gl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fi(),be(St),be(ht),$f(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(be(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Ie),null;case 4:return fi(),null;case 10:return Ff(e.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var tl=!1,ut=!1,AN=typeof WeakSet=="function"?WeakSet:Set,H=null;function Qs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Nh(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var p0=!1;function jN(t,e){if(ah=ql,t=px(),Rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,g=t,p=null;t:for(;;){for(var w;g!==n||s!==0&&g.nodeType!==3||(c=a+s),g!==i||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(w=g.firstChild)!==null;)p=g,g=w;for(;;){if(g===t)break t;if(p===n&&++d===s&&(c=a),p===i&&++f===r&&(u=a),(w=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(lh={focusedElem:t,selectionRange:n},ql=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var k=I.memoizedProps,P=I.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?k:nn(e.type,k),P);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(M){Ce(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return I=p0,p0=!1,I}function wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Nh(e,n,i)}s=s.next}while(s!==r)}}function Uc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Th(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d_(t){var e=t.alternate;e!==null&&(t.alternate=null,d_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[qo],delete e[dh],delete e[dN],delete e[hN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h_(t){return t.tag===5||t.tag===3||t.tag===4}function g0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$l));else if(r!==4&&(t=t.child,t!==null))for(Ih(t,e,n),t=t.sibling;t!==null;)Ih(t,e,n),t=t.sibling}function Sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sh(t,e,n),t=t.sibling;t!==null;)Sh(t,e,n),t=t.sibling}var Qe=null,rn=!1;function ir(t,e,n){for(n=n.child;n!==null;)f_(t,e,n),n=n.sibling}function f_(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Pc,n)}catch{}switch(n.tag){case 5:ut||Qs(n,e);case 6:var r=Qe,s=rn;Qe=null,ir(t,e,n),Qe=r,rn=s,Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?rd(t.parentNode,n):t.nodeType===1&&rd(t,n),Mo(t)):rd(Qe,n.stateNode));break;case 4:r=Qe,s=rn,Qe=n.stateNode.containerInfo,rn=!0,ir(t,e,n),Qe=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Nh(n,e,a),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!ut&&(Qs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,e,c)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,ir(t,e,n),ut=r):ir(t,e,n);break;default:ir(t,e,n)}}function y0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AN),e.forEach(function(r){var s=ON.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Qe=c.stateNode,rn=!1;break e;case 3:Qe=c.stateNode.containerInfo,rn=!0;break e;case 4:Qe=c.stateNode.containerInfo,rn=!0;break e}c=c.return}if(Qe===null)throw Error(q(160));f_(i,a,s),Qe=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m_(e,t),e=e.sibling}function m_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),yn(t),r&4){try{wo(3,t,t.return),Uc(3,t)}catch(k){Ce(t,t.return,k)}try{wo(5,t,t.return)}catch(k){Ce(t,t.return,k)}}break;case 1:tn(e,t),yn(t),r&512&&n!==null&&Qs(n,n.return);break;case 5:if(tn(e,t),yn(t),r&512&&n!==null&&Qs(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(k){Ce(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Mv(s,i),Jd(c,a);var d=Jd(c,i);for(a=0;a<u.length;a+=2){var f=u[a],g=u[a+1];f==="style"?qv(s,g):f==="dangerouslySetInnerHTML"?Fv(s,g):f==="children"?Po(s,g):_f(s,f,g,d)}switch(c){case"input":Hd(s,i);break;case"textarea":Vv(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Js(s,!!i.multiple,w,!1):p!==!!i.multiple&&(i.defaultValue!=null?Js(s,!!i.multiple,i.defaultValue,!0):Js(s,!!i.multiple,i.multiple?[]:"",!1))}s[qo]=i}catch(k){Ce(t,t.return,k)}}break;case 6:if(tn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Ce(t,t.return,k)}}break;case 3:if(tn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Mo(e.containerInfo)}catch(k){Ce(t,t.return,k)}break;case 4:tn(e,t),yn(t);break;case 13:tn(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zf=Re())),r&4&&y0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,tn(e,t),ut=d):tn(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(g=H=f;H!==null;){switch(p=H,w=p.child,p.tag){case 0:case 11:case 14:case 15:wo(4,p,p.return);break;case 1:Qs(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(k){Ce(r,n,k)}}break;case 5:Qs(p,p.return);break;case 22:if(p.memoizedState!==null){x0(g);continue}}w!==null?(w.return=p,H=w):x0(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Uv("display",a))}catch(k){Ce(t,t.return,k)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(k){Ce(t,t.return,k)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:tn(e,t),yn(t),r&4&&y0(t);break;case 21:break;default:tn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=g0(t);Sh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=g0(t);Ih(t,c,a);break;default:throw Error(q(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kN(t,e,n){H=t,p_(t)}function p_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||tl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ut;c=tl;var d=ut;if(tl=a,(ut=u)&&!d)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?_0(s):u!==null?(u.return=a,H=u):_0(s);for(;i!==null;)H=i,p_(i),i=i.sibling;H=s,tl=c,ut=d}v0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):v0(t)}}function v0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Uc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&n0(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Mo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ut||e.flags&512&&Th(e)}catch(p){Ce(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function x0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function _0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uc(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Th(e)}catch(u){Ce(e,i,u)}break;case 5:var a=e.return;try{Th(e)}catch(u){Ce(e,a,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){H=null;break}var c=e.sibling;if(c!==null){c.return=e.return,H=c;break}H=e.return}}var CN=Math.ceil,tc=Xn.ReactCurrentDispatcher,Jf=Xn.ReactCurrentOwner,Ht=Xn.ReactCurrentBatchConfig,le=0,He=null,Me=null,Je=0,Rt=0,Ks=Mr(0),qe=0,Wo=null,us=0,qc=0,Xf=0,bo=null,Nt=null,Zf=0,pi=1/0,kn=null,nc=!1,Ah=null,Er=null,nl=!1,pr=null,rc=0,Eo=0,jh=null,wl=-1,bl=0;function vt(){return le&6?Re():wl!==-1?wl:wl=Re()}function Nr(t){return t.mode&1?le&2&&Je!==0?Je&-Je:mN.transition!==null?(bl===0&&(bl=Zv()),bl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:ox(t.type)),t):1}function ln(t,e,n,r){if(50<Eo)throw Eo=0,jh=null,Error(q(185));ua(t,n,r),(!(le&2)||t!==He)&&(t===He&&(!(le&2)&&(qc|=n),qe===4&&ur(t,Je)),jt(t,r),n===1&&le===0&&!(e.mode&1)&&(pi=Re()+500,Vc&&Vr()))}function jt(t,e){var n=t.callbackNode;m2(t,e);var r=Ul(t,t===He?Je:0);if(r===0)n!==null&&jg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jg(n),e===1)t.tag===0?fN(w0.bind(null,t)):Tx(w0.bind(null,t)),cN(function(){!(le&6)&&Vr()}),n=null;else{switch(ex(r)){case 1:n=Tf;break;case 4:n=Jv;break;case 16:n=Fl;break;case 536870912:n=Xv;break;default:n=Fl}n=E_(n,g_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g_(t,e){if(wl=-1,bl=0,le&6)throw Error(q(327));var n=t.callbackNode;if(ni()&&t.callbackNode!==n)return null;var r=Ul(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sc(t,r);else{e=r;var s=le;le|=2;var i=v_();(He!==t||Je!==e)&&(kn=null,pi=Re()+500,ss(t,e));do try{DN();break}catch(c){y_(t,c)}while(!0);Of(),tc.current=i,le=s,Me!==null?e=0:(He=null,Je=0,e=qe)}if(e!==0){if(e===2&&(s=nh(t),s!==0&&(r=s,e=kh(t,s))),e===1)throw n=Wo,ss(t,0),ur(t,r),jt(t,Re()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!PN(s)&&(e=sc(t,r),e===2&&(i=nh(t),i!==0&&(r=i,e=kh(t,i))),e===1))throw n=Wo,ss(t,0),ur(t,r),jt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Yr(t,Nt,kn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Zf+500-Re(),10<e)){if(Ul(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uh(Yr.bind(null,t,Nt,kn),e);break}Yr(t,Nt,kn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-an(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CN(r/1960))-r,10<r){t.timeoutHandle=uh(Yr.bind(null,t,Nt,kn),r);break}Yr(t,Nt,kn);break;case 5:Yr(t,Nt,kn);break;default:throw Error(q(329))}}}return jt(t,Re()),t.callbackNode===n?g_.bind(null,t):null}function kh(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=sc(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Ch(e)),t}function Ch(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function PN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Xf,e&=~qc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function w0(t){if(le&6)throw Error(q(327));ni();var e=Ul(t,0);if(!(e&1))return jt(t,Re()),null;var n=sc(t,e);if(t.tag!==0&&n===2){var r=nh(t);r!==0&&(e=r,n=kh(t,r))}if(n===1)throw n=Wo,ss(t,0),ur(t,e),jt(t,Re()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,Nt,kn),jt(t,Re()),null}function em(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(pi=Re()+500,Vc&&Vr())}}function ds(t){pr!==null&&pr.tag===0&&!(le&6)&&ni();var e=le;le|=1;var n=Ht.transition,r=pe;try{if(Ht.transition=null,pe=1,t)return t()}finally{pe=r,Ht.transition=n,le=e,!(le&6)&&Vr()}}function tm(){Rt=Ks.current,be(Ks)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lN(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gl();break;case 3:fi(),be(St),be(ht),$f();break;case 5:Bf(r);break;case 4:fi();break;case 13:be(Ie);break;case 19:be(Ie);break;case 10:Ff(r.type._context);break;case 22:case 23:tm()}n=n.return}if(He=t,Me=t=Tr(t.current,null),Je=Rt=e,qe=0,Wo=null,Xf=qc=us=0,Nt=bo=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Zr=null}return t}function y_(t,e){do{var n=Me;try{if(Of(),vl.current=ec,Zl){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zl=!1}if(cs=0,Ge=Ue=Se=null,_o=!1,$o=0,Jf.current=null,n===null||n.return===null){qe=1,Wo=e,Me=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Je,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=l0(a);if(w!==null){w.flags&=-257,c0(w,a,c,i,e),w.mode&1&&a0(i,d,e),e=w,u=d;var I=e.updateQueue;if(I===null){var k=new Set;k.add(u),e.updateQueue=k}else I.add(u);break e}else{if(!(e&1)){a0(i,d,e),nm();break e}u=Error(q(426))}}else if(Ee&&c.mode&1){var P=l0(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),c0(P,a,c,i,e),Mf(mi(u,c));break e}}i=u=mi(u,c),qe!==4&&(qe=2),bo===null?bo=[i]:bo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=e_(i,u,e);t0(i,b);break e;case 1:c=u;var E=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Er===null||!Er.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=t_(i,c,e);t0(i,M);break e}}i=i.return}while(i!==null)}__(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function v_(){var t=tc.current;return tc.current=ec,t===null?ec:t}function nm(){(qe===0||qe===3||qe===2)&&(qe=4),He===null||!(us&268435455)&&!(qc&268435455)||ur(He,Je)}function sc(t,e){var n=le;le|=2;var r=v_();(He!==t||Je!==e)&&(kn=null,ss(t,e));do try{RN();break}catch(s){y_(t,s)}while(!0);if(Of(),le=n,tc.current=r,Me!==null)throw Error(q(261));return He=null,Je=0,qe}function RN(){for(;Me!==null;)x_(Me)}function DN(){for(;Me!==null&&!i2();)x_(Me)}function x_(t){var e=b_(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?__(t):Me=e,Jf.current=null}function __(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SN(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Me=null;return}}else if(n=IN(n,e,Rt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);qe===0&&(qe=5)}function Yr(t,e,n){var r=pe,s=Ht.transition;try{Ht.transition=null,pe=1,LN(t,e,n,r)}finally{Ht.transition=s,pe=r}return null}function LN(t,e,n,r){do ni();while(pr!==null);if(le&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p2(t,i),t===He&&(Me=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,E_(Fl,function(){return ni(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var a=pe;pe=1;var c=le;le|=4,Jf.current=null,jN(t,n),m_(n,t),tN(lh),ql=!!ah,lh=ah=null,t.current=n,kN(n),o2(),le=c,pe=a,Ht.transition=i}else t.current=n;if(nl&&(nl=!1,pr=t,rc=s),i=t.pendingLanes,i===0&&(Er=null),c2(n.stateNode),jt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nc)throw nc=!1,t=Ah,Ah=null,t;return rc&1&&t.tag!==0&&ni(),i=t.pendingLanes,i&1?t===jh?Eo++:(Eo=0,jh=t):Eo=0,Vr(),null}function ni(){if(pr!==null){var t=ex(rc),e=Ht.transition,n=pe;try{if(Ht.transition=null,pe=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,rc=0,le&6)throw Error(q(331));var s=le;for(le|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:wo(8,f,i)}var g=f.child;if(g!==null)g.return=f,H=g;else for(;H!==null;){f=H;var p=f.sibling,w=f.return;if(d_(f),f===d){H=null;break}if(p!==null){p.return=w,H=p;break}H=w}}}var I=i.alternate;if(I!==null){var k=I.child;if(k!==null){I.child=null;do{var P=k.sibling;k.sibling=null,k=P}while(k!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wo(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,H=b;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){a=H;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,H=N;else e:for(a=E;H!==null;){if(c=H,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Uc(9,c)}}catch(D){Ce(c,c.return,D)}if(c===a){H=null;break e}var M=c.sibling;if(M!==null){M.return=c.return,H=M;break e}H=c.return}}if(le=s,Vr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Pc,t)}catch{}r=!0}return r}finally{pe=n,Ht.transition=e}}return!1}function b0(t,e,n){e=mi(n,e),e=e_(t,e,1),t=br(t,e,1),e=vt(),t!==null&&(ua(t,1,e),jt(t,e))}function Ce(t,e,n){if(t.tag===3)b0(t,t,n);else for(;e!==null;){if(e.tag===3){b0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=mi(n,t),t=t_(e,t,1),e=br(e,t,1),t=vt(),e!==null&&(ua(e,1,t),jt(e,t));break}}e=e.return}}function MN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(qe===4||qe===3&&(Je&130023424)===Je&&500>Re()-Zf?ss(t,0):Xf|=n),jt(t,e)}function w_(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=vt();t=Hn(t,e),t!==null&&(ua(t,e,n),jt(t,n))}function VN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w_(t,n)}function ON(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),w_(t,n)}var b_;b_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,TN(t,e,n);It=!!(t.flags&131072)}else It=!1,Ee&&e.flags&1048576&&Ix(e,Ql,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var s=ui(e,ht.current);ti(e,n),s=Hf(null,e,r,t,s,n);var i=Wf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(i=!0,Hl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qf(e),s.updater=Fc,e.stateNode=s,s._reactInternals=e,yh(e,r,t,n),e=_h(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&Df(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UN(r),t=nn(r,t),s){case 0:e=xh(null,e,r,t,n);break e;case 1:e=h0(null,e,r,t,n);break e;case 11:e=u0(null,e,r,t,n);break e;case 14:e=d0(null,e,r,nn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),xh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),h0(t,e,r,s,n);case 3:e:{if(i_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Px(t,e),Jl(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mi(Error(q(423)),e),e=f0(t,e,r,n,s);break e}else if(r!==s){s=mi(Error(q(424)),e),e=f0(t,e,r,n,s);break e}else for(Dt=wr(e.stateNode.containerInfo.firstChild),Mt=e,Ee=!0,sn=null,n=kx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(di(),r===s){e=Wn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return Rx(e),t===null&&mh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ch(r,s)?a=null:i!==null&&ch(r,i)&&(e.flags|=32),s_(t,e),gt(t,e,a,n),e.child;case 6:return t===null&&mh(e),null;case 13:return o_(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),u0(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ve(Kl,r._currentValue),r._currentValue=a,i!==null)if(un(i.value,a)){if(i.children===s.children&&!St.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ph(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(q(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),ph(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ti(e,n),s=Kt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),d0(t,e,r,s,n);case 15:return n_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),_l(t,e),e.tag=1,At(r)?(t=!0,Hl(e)):t=!1,ti(e,n),Zx(e,r,s),yh(e,r,s,n),_h(null,e,r,!0,t,n);case 19:return a_(t,e,n);case 22:return r_(t,e,n)}throw Error(q(156,e.tag))};function E_(t,e){return Yv(t,e)}function FN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(t,e,n,r){return new FN(t,e,n,r)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UN(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bf)return 11;if(t===Ef)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Gt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")rm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Fs:return is(n.children,s,i,e);case wf:a=8,s|=8;break;case qd:return t=Gt(12,n,e,s|2),t.elementType=qd,t.lanes=i,t;case zd:return t=Gt(13,n,e,s),t.elementType=zd,t.lanes=i,t;case Bd:return t=Gt(19,n,e,s),t.elementType=Bd,t.lanes=i,t;case Rv:return zc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Cv:a=10;break e;case Pv:a=9;break e;case bf:a=11;break e;case Ef:a=14;break e;case ar:a=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Gt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=Gt(7,t,r,e),t.lanes=n,t}function zc(t,e,n,r){return t=Gt(22,t,r,e),t.elementType=Rv,t.lanes=n,t.stateNode={isHidden:!1},t}function dd(t,e,n){return t=Gt(6,t,null,e),t.lanes=n,t}function hd(t,e,n){return e=Gt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,r,s,i,a,c,u){return t=new qN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Gt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(i),t}function zN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function N_(t){if(!t)return Cr;t=t._reactInternals;e:{if(bs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(At(n))return Nx(t,n,e)}return e}function T_(t,e,n,r,s,i,a,c,u){return t=sm(n,r,!0,t,s,i,a,c,u),t.context=N_(null),n=t.current,r=vt(),s=Nr(n),i=qn(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,ua(t,s,r),jt(t,r),t}function Bc(t,e,n,r){var s=e.current,i=vt(),a=Nr(s);return n=N_(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,a),t!==null&&(ln(t,s,a,i),yl(t,s,a)),a}function ic(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){E0(t,e),(t=t.alternate)&&E0(t,e)}function BN(){return null}var I_=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}$c.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Bc(t,e,null,null)};$c.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ds(function(){Bc(null,t,null,null)}),e[Gn]=null}};function $c(t){this._internalRoot=t}$c.prototype.unstable_scheduleHydration=function(t){if(t){var e=rx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&ix(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N0(){}function $N(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ic(a);i.call(d)}}var a=T_(e,r,t,0,null,!1,!1,"",N0);return t._reactRootContainer=a,t[Gn]=a.current,Fo(t.nodeType===8?t.parentNode:t),ds(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=ic(u);c.call(d)}}var u=sm(t,0,!1,null,null,!1,!1,"",N0);return t._reactRootContainer=u,t[Gn]=u.current,Fo(t.nodeType===8?t.parentNode:t),ds(function(){Bc(e,u,n,r)}),u}function Hc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=ic(a);c.call(u)}}Bc(e,a,t,s)}else a=$N(n,e,t,s,r);return ic(a)}tx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=io(e.pendingLanes);n!==0&&(If(e,n|1),jt(e,Re()),!(le&6)&&(pi=Re()+500,Vr()))}break;case 13:ds(function(){var r=Hn(t,1);if(r!==null){var s=vt();ln(r,t,1,s)}}),im(t,1)}};Sf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=vt();ln(e,t,134217728,n)}im(t,134217728)}};nx=function(t){if(t.tag===13){var e=Nr(t),n=Hn(t,e);if(n!==null){var r=vt();ln(n,t,e,r)}im(t,e)}};rx=function(){return pe};sx=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Zd=function(t,e,n){switch(e){case"input":if(Hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Mc(r);if(!s)throw Error(q(90));Lv(r),Hd(r,s)}}}break;case"textarea":Vv(t,n);break;case"select":e=n.value,e!=null&&Js(t,!!n.multiple,e,!1)}};$v=em;Gv=ds;var GN={usingClientEntryPoint:!1,Events:[ha,Bs,Mc,zv,Bv,em]},to={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HN={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qv(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||BN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Pc=rl.inject(HN),wn=rl}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GN;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(q(200));return zN(t,e,null,n)};Ft.createRoot=function(t,e){if(!am(t))throw Error(q(299));var n=!1,r="",s=I_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,Fo(t.nodeType===8?t.parentNode:t),new om(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=Qv(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return ds(t)};Ft.hydrate=function(t,e,n){if(!Gc(e))throw Error(q(200));return Hc(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!am(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=I_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=T_(e,null,t,1,n??null,s,!1,i,a),t[Gn]=e.current,Fo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new $c(e)};Ft.render=function(t,e,n){if(!Gc(e))throw Error(q(200));return Hc(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!Gc(t))throw Error(q(40));return t._reactRootContainer?(ds(function(){Hc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Ft.unstable_batchedUpdates=em;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gc(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Hc(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function S_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S_)}catch(t){console.error(t)}}S_(),Sv.exports=Ft;var WN=Sv.exports,A_,T0=WN;A_=T0.createRoot,T0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qo(){return Qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qo.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const I0="popstate";function QN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Ph("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:oc(s)}return YN(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function j_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KN(){return Math.random().toString(36).substr(2,8)}function S0(t,e){return{usr:t.state,key:t.key,idx:e}}function Ph(t,e,n,r){return n===void 0&&(n=null),Qo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ii(e):e,{state:n,key:e&&e.key||r||KN()})}function oc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ii(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=gr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(Qo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function g(){c=gr.Pop;let P=f(),b=P==null?null:P-d;d=P,u&&u({action:c,location:k.location,delta:b})}function p(P,b){c=gr.Push;let E=Ph(k.location,P,b);d=f()+1;let N=S0(E,d),M=k.createHref(E);try{a.pushState(N,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(M)}i&&u&&u({action:c,location:k.location,delta:1})}function w(P,b){c=gr.Replace;let E=Ph(k.location,P,b);d=f();let N=S0(E,d),M=k.createHref(E);a.replaceState(N,"",M),i&&u&&u({action:c,location:k.location,delta:0})}function I(P){let b=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof P=="string"?P:oc(P);return E=E.replace(/ $/,"%20"),De(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let k={get action(){return c},get location(){return t(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(I0,g),u=P,()=>{s.removeEventListener(I0,g),u=null}},createHref(P){return e(s,P)},createURL:I,encodeLocation(P){let b=I(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:w,go(P){return a.go(P)}};return k}var A0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(A0||(A0={}));function JN(t,e,n){return n===void 0&&(n="/"),XN(t,e,n,!1)}function XN(t,e,n,r){let s=typeof e=="string"?Ii(e):e,i=lm(s.pathname||"/",n);if(i==null)return null;let a=k_(t);ZN(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=uT(i);c=lT(a[u],d,r)}return c}function k_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ir([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),k_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:oT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of C_(i.path))s(i,a,u)}),e}function C_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=C_(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function ZN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eT=/^:[\w-]+$/,tT=3,nT=2,rT=1,sT=10,iT=-2,j0=t=>t==="*";function oT(t,e){let n=t.split("/"),r=n.length;return n.some(j0)&&(r+=iT),e&&(r+=nT),n.filter(s=>!j0(s)).reduce((s,i)=>s+(eT.test(i)?tT:i===""?rT:sT),r)}function aT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function lT(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=k0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),p=u.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=k0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!g)return null;Object.assign(s,g.params),a.push({params:s,pathname:Ir([i,g.pathname]),pathnameBase:mT(Ir([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=Ir([i,g.pathnameBase]))}return a}function k0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:p,isOptional:w}=f;if(p==="*"){let k=c[g]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const I=c[g];return w&&!I?d[p]=void 0:d[p]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function cT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),j_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return j_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ii(t):t;return{pathname:n?n.startsWith("/")?n:hT(n,e):e,search:pT(r),hash:gT(s)}}function hT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function fd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cm(t,e){let n=fT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function um(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ii(t):(s=Qo({},t),De(!s.pathname||!s.pathname.includes("?"),fd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),fd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),fd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let g=e.length-1;if(!r&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),g-=1;s.pathname=p.join("/")}c=g>=0?e[g]:"/"}let u=dT(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),mT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const P_=["post","put","patch","delete"];new Set(P_);const vT=["get",...P_];new Set(vT);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}const dm=C.createContext(null),xT=C.createContext(null),Or=C.createContext(null),Wc=C.createContext(null),Zn=C.createContext({outlet:null,matches:[],isDataRoute:!1}),R_=C.createContext(null);function _T(t,e){let{relative:n}=e===void 0?{}:e;Si()||De(!1);let{basename:r,navigator:s}=C.useContext(Or),{hash:i,pathname:a,search:c}=L_(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Ir([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Si(){return C.useContext(Wc)!=null}function Es(){return Si()||De(!1),C.useContext(Wc).location}function D_(t){C.useContext(Or).static||C.useLayoutEffect(t)}function mn(){let{isDataRoute:t}=C.useContext(Zn);return t?DT():wT()}function wT(){Si()||De(!1);let t=C.useContext(dm),{basename:e,future:n,navigator:r}=C.useContext(Or),{matches:s}=C.useContext(Zn),{pathname:i}=Es(),a=JSON.stringify(cm(s,n.v7_relativeSplatPath)),c=C.useRef(!1);return D_(()=>{c.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let g=um(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Ir([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,a,i,t])}function bT(){let{matches:t}=C.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function L_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Or),{matches:s}=C.useContext(Zn),{pathname:i}=Es(),a=JSON.stringify(cm(s,r.v7_relativeSplatPath));return C.useMemo(()=>um(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function ET(t,e){return NT(t,e)}function NT(t,e,n,r){Si()||De(!1);let{navigator:s,static:i}=C.useContext(Or),{matches:a}=C.useContext(Zn),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=Es(),g;if(e){var p;let b=typeof e=="string"?Ii(e):e;d==="/"||(p=b.pathname)!=null&&p.startsWith(d)||De(!1),g=b}else g=f;let w=g.pathname||"/",I=w;if(d!=="/"){let b=d.replace(/^\//,"").split("/");I="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let k=!i&&n&&n.matches&&n.matches.length>0?n.matches:JN(t,{pathname:I}),P=jT(k&&k.map(b=>Object.assign({},b,{params:Object.assign({},u,b.params),pathname:Ir([d,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Ir([d,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&P?C.createElement(Wc.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:gr.Pop}},P):P}function TT(){let t=RT(),e=yT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const IT=C.createElement(TT,null);class ST extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Zn.Provider,{value:this.props.routeContext},C.createElement(R_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AT(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(dm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Zn.Provider,{value:e},r)}function jT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);f>=0||De(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let g=a[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:p,errors:w}=n,I=g.route.loader&&p[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||I){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,g,p)=>{let w,I=!1,k=null,P=null;n&&(w=c&&g.route.id?c[g.route.id]:void 0,k=g.route.errorElement||IT,u&&(d<0&&p===0?(I=!0,P=null):d===p&&(I=!0,P=g.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,p+1)),E=()=>{let N;return w?N=k:I?N=P:g.route.Component?N=C.createElement(g.route.Component,null):g.route.element?N=g.route.element:N=f,C.createElement(AT,{match:g,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:N})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?C.createElement(ST,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}var M_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M_||{}),ac=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ac||{});function kT(t){let e=C.useContext(dm);return e||De(!1),e}function CT(t){let e=C.useContext(xT);return e||De(!1),e}function PT(t){let e=C.useContext(Zn);return e||De(!1),e}function V_(t){let e=PT(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function RT(){var t;let e=C.useContext(R_),n=CT(ac.UseRouteError),r=V_(ac.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DT(){let{router:t}=kT(M_.UseNavigateStable),e=V_(ac.UseNavigateStable),n=C.useRef(!1);return D_(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ko({fromRouteId:e},i)))},[t,e])}function LT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Rh(t){let{to:e,replace:n,state:r,relative:s}=t;Si()||De(!1);let{future:i,static:a}=C.useContext(Or),{matches:c}=C.useContext(Zn),{pathname:u}=Es(),d=mn(),f=um(e,cm(c,i.v7_relativeSplatPath),u,s==="path"),g=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function Be(t){De(!1)}function MT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gr.Pop,navigator:i,static:a=!1,future:c}=t;Si()&&De(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:i,static:a,future:Ko({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Ii(r));let{pathname:f="/",search:g="",hash:p="",state:w=null,key:I="default"}=r,k=C.useMemo(()=>{let P=lm(f,u);return P==null?null:{location:{pathname:P,search:g,hash:p,state:w,key:I},navigationType:s}},[u,f,g,p,w,I,s]);return k==null?null:C.createElement(Or.Provider,{value:d},C.createElement(Wc.Provider,{children:n,value:k}))}function VT(t){let{children:e,location:n}=t;return ET(Dh(e),n)}new Promise(()=>{});function Dh(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Dh(r.props.children,i));return}r.type!==Be&&De(!1),!r.props.index||!r.props.children||De(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Dh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lh(){return Lh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lh.apply(this,arguments)}function OT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function FT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UT(t,e){return t.button===0&&(!e||e==="_self")&&!FT(t)}function Mh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function qT(t,e){let n=Mh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const zT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BT="6";try{window.__reactRouterVersion=BT}catch{}const $T="startTransition",C0=ME[$T];function GT(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=QN({window:s,v5Compat:!0}));let a=i.current,[c,u]=C.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=C.useCallback(g=>{d&&C0?C0(()=>u(g)):u(g)},[u,d]);return C.useLayoutEffect(()=>a.listen(f),[a,f]),C.useEffect(()=>LT(r),[r]),C.createElement(MT,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const HT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:g}=e,p=OT(e,zT),{basename:w}=C.useContext(Or),I,k=!1;if(typeof d=="string"&&WT.test(d)&&(I=d,HT))try{let N=new URL(window.location.href),M=d.startsWith("//")?new URL(N.protocol+d):new URL(d),D=lm(M.pathname,w);M.origin===N.origin&&D!=null?d=D+M.search+M.hash:k=!0}catch{}let P=_T(d,{relative:s}),b=QT(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:g});function E(N){r&&r(N),N.defaultPrevented||b(N)}return C.createElement("a",Lh({},p,{href:I||P,onClick:k||i?r:E,ref:n,target:u}))});var P0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P0||(P0={}));var R0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R0||(R0={}));function QT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=mn(),d=Es(),f=L_(t,{relative:a});return C.useCallback(g=>{if(UT(g,n)){g.preventDefault();let p=r!==void 0?r:oc(d)===oc(f);u(t,{replace:p,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function O_(t){let e=C.useRef(Mh(t)),n=C.useRef(!1),r=Es(),s=C.useMemo(()=>qT(r.search,n.current?null:e.current),[r.search]),i=mn(),a=C.useCallback((c,u)=>{const d=Mh(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var D0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},U_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,g=(i&3)<<4|c>>4;let p=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(p=64)),r.push(n[f],n[g],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||g==null)throw new YT;const p=i<<2|c>>4;if(r.push(p),d!==64){const w=c<<4&240|d>>2;if(r.push(w),g!==64){const I=d<<6&192|g;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JT=function(t){const e=F_(t);return U_.encodeByteArray(e,!0)},lc=function(t){return JT(t).replace(/\./g,"")},q_=function(t){try{return U_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=()=>XT().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof D0>"u")return;const t=D0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q_(t[1]);return e&&JSON.parse(e)},Qc=()=>{try{return ZT()||eI()||tI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z_=t=>{var e,n;return(n=(e=Qc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nI=t=>{const e=z_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B_=()=>{var t;return(t=Qc())===null||t===void 0?void 0:t.config},$_=t=>{var e;return(e=Qc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lc(JSON.stringify(n)),lc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function oI(){var t;const e=(t=Qc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lI(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fm(){try{return typeof indexedDB=="object"}catch{return!1}}function mm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function G_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="FirebaseError";class pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uI,Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ns.prototype.create)}}class Ns{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?dI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new pn(s,c,r)}}function dI(t,e){return t.replace(hI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hI=/\{\$([^}]+)}/g;function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(L0(i)&&L0(a)){if(!Yo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function L0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ao(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function lo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mI(t,e){const n=new pI(t,e);return n.subscribe.bind(n)}class pI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=md),s.error===void 0&&(s.error=md),s.complete===void 0&&(s.complete=md);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function md(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1e3,vI=2,xI=4*60*60*1e3,_I=.5;function M0(t,e=yI,n=vI){const r=e*Math.pow(n,t),s=Math.round(_I*r*(Math.random()-.5)*2);return Math.min(xI,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class dn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EI(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bI(t){return t===Jr?void 0:t}function EI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const TI={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},II=ie.INFO,SI={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},AI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kc{constructor(e){this.name=e,this._logLevel=II,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const jI=(t,e)=>e.some(n=>t instanceof n);let V0,O0;function kI(){return V0||(V0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CI(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const H_=new WeakMap,Vh=new WeakMap,W_=new WeakMap,pd=new WeakMap,pm=new WeakMap;function PI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Sr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&H_.set(n,t)}).catch(()=>{}),pm.set(e,t),e}function RI(t){if(Vh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Vh.set(t,e)}let Oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||W_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DI(t){Oh=t(Oh)}function LI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gd(this),e,...n);return W_.set(r,e.sort?e.sort():[e]),Sr(r)}:CI().includes(t)?function(...e){return t.apply(gd(this),e),Sr(H_.get(this))}:function(...e){return Sr(t.apply(gd(this),e))}}function MI(t){return typeof t=="function"?LI(t):(t instanceof IDBTransaction&&RI(t),jI(t,kI())?new Proxy(t,Oh):t)}function Sr(t){if(t instanceof IDBRequest)return PI(t);if(pd.has(t))return pd.get(t);const e=MI(t);return e!==t&&(pd.set(t,e),pm.set(e,t)),e}const gd=t=>pm.get(t);function Q_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Sr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Sr(a.result),u.oldVersion,u.newVersion,Sr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const VI=["get","getKey","getAll","getAllKeys","count"],OI=["put","add","delete","clear"],yd=new Map;function F0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yd.get(e))return yd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=OI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VI.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return yd.set(e,i),i}DI(t=>({...t,get:(e,n,r)=>F0(e,n)||t.get(e,n,r),has:(e,n)=>!!F0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fh="@firebase/app",U0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new Kc("@firebase/app"),qI="@firebase/app-compat",zI="@firebase/analytics-compat",BI="@firebase/analytics",$I="@firebase/app-check-compat",GI="@firebase/app-check",HI="@firebase/auth",WI="@firebase/auth-compat",QI="@firebase/database",KI="@firebase/database-compat",YI="@firebase/functions",JI="@firebase/functions-compat",XI="@firebase/installations",ZI="@firebase/installations-compat",eS="@firebase/messaging",tS="@firebase/messaging-compat",nS="@firebase/performance",rS="@firebase/performance-compat",sS="@firebase/remote-config",iS="@firebase/remote-config-compat",oS="@firebase/storage",aS="@firebase/storage-compat",lS="@firebase/firestore",cS="@firebase/vertexai-preview",uS="@firebase/firestore-compat",dS="firebase",hS="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="[DEFAULT]",fS={[Fh]:"fire-core",[qI]:"fire-core-compat",[BI]:"fire-analytics",[zI]:"fire-analytics-compat",[GI]:"fire-app-check",[$I]:"fire-app-check-compat",[HI]:"fire-auth",[WI]:"fire-auth-compat",[QI]:"fire-rtdb",[KI]:"fire-rtdb-compat",[YI]:"fire-fn",[JI]:"fire-fn-compat",[XI]:"fire-iid",[ZI]:"fire-iid-compat",[eS]:"fire-fcm",[tS]:"fire-fcm-compat",[nS]:"fire-perf",[rS]:"fire-perf-compat",[sS]:"fire-rc",[iS]:"fire-rc-compat",[oS]:"fire-gcs",[aS]:"fire-gcs-compat",[lS]:"fire-fst",[uS]:"fire-fst-compat",[cS]:"fire-vertex","fire-js":"fire-js",[dS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,mS=new Map,qh=new Map;function q0(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function In(t){const e=t.name;if(qh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;qh.set(e,t);for(const n of cc.values())q0(n,t);for(const n of mS.values())q0(n,t);return!0}function Ts(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Ns("app","Firebase",pS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=hS;function K_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Uh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=B_()),!n)throw Ar.create("no-options");const i=cc.get(s);if(i){if(Yo(n,i.options)&&Yo(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const a=new NI(s);for(const u of qh.values())a.addComponent(u);const c=new gS(n,r,a);return cc.set(s,c),c}function gm(t=Uh){const e=cc.get(t);if(!e&&t===Uh&&B_())return K_();if(!e)throw Ar.create("no-app",{appName:t});return e}function Wt(t,e,n){var r;let s=(r=fS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(c.join(" "));return}In(new dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firebase-heartbeat-database",vS=1,Jo="firebase-heartbeat-store";let vd=null;function Y_(){return vd||(vd=Q_(yS,vS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Jo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),vd}async function xS(t){try{const n=(await Y_()).transaction(Jo),r=await n.objectStore(Jo).get(J_(t));return await n.done,r}catch(e){if(e instanceof pn)Qn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function z0(t,e){try{const r=(await Y_()).transaction(Jo,"readwrite");await r.objectStore(Jo).put(e,J_(t)),await r.done}catch(n){if(n instanceof pn)Qn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function J_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1024,wS=30*24*60*60*1e3;class bS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=B0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=wS}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Qn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B0(),{heartbeatsToSend:r,unsentEntries:s}=ES(this._heartbeatsCache.heartbeats),i=lc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function B0(){return new Date().toISOString().substring(0,10)}function ES(t,e=_S){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),$0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fm()?mm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return z0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return z0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $0(t){return lc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t){In(new dn("platform-logger",e=>new FI(e),"PRIVATE")),In(new dn("heartbeat",e=>new bS(e),"PRIVATE")),Wt(Fh,U0,t),Wt(Fh,U0,"esm2017"),Wt("fire-js","")}TS("");function ym(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function X_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IS=X_,Z_=new Ns("auth","Firebase",X_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Kc("@firebase/auth");function SS(t,...e){uc.logLevel<=ie.WARN&&uc.warn(`Auth (${Ai}): ${t}`,...e)}function Nl(t,...e){uc.logLevel<=ie.ERROR&&uc.error(`Auth (${Ai}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw xm(t,...e)}function cn(t,...e){return xm(t,...e)}function vm(t,e,n){const r=Object.assign(Object.assign({},IS()),{[e]:n});return new Ns("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return vm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),vm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Z_.create(t,...e)}function X(t,e,...n){if(!t)throw xm(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nl(e),new Error(e)}function Kn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jS(){return G0()==="http:"||G0()==="https:"}function G0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jS()||hm()||"connection"in navigator)?navigator.onLine:!0}function CS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=iI()||aI()}get(){return kS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new pa(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gn(t,e,n,r,s={}){return tw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=ma(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),ew.fetch()(nw(t,t.config.apiHost,n,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function tw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PS),e);try{const s=new LS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw sl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw sl(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vm(t,f,d);Jt(t,f)}}catch(s){if(s instanceof pn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function ga(t,e,n,r,s={}){const i=await gn(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_m(t.config,s):`${t.config.apiScheme}://${s}`}function DS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),RS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cn(t,e,r);return s.customData._tokenResponse=n,s}function H0(t){return t!==void 0&&t.enterprise!==void 0}class MS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function VS(t,e){return gn(t,"GET","/v2/recaptchaConfig",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OS(t,e){return gn(t,"POST","/v1/accounts:delete",e)}async function rw(t,e){return gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=wm(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:No(xd(s.auth_time)),issuedAtTime:No(xd(s.iat)),expirationTime:No(xd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xd(t){return Number(t)*1e3}function wm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=q_(n);return s?JSON.parse(s):(Nl("Failed to decode base64 JWT payload"),null)}catch(s){return Nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function W0(t){const e=wm(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pn&&US(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function US({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=No(this.lastLoginAt),this.creationTime=No(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await hs(t,rw(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sw(i.providerUserInfo):[],c=BS(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Bh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function zS(t){const e=Ne(t);await dc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sw(t){return t.map(e=>{var{providerId:n}=e,r=ym(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e){const n=await tw(t,{},async()=>{const r=ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=nw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ew.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GS(t,e){return gn(t,"POST","/v2/accounts:revokeToken",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=W0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await $S(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new ri;return r&&(X(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ri,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class On{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ym(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hs(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FS(this,e)}reload(){return zS(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new On(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await dc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await hs(this,OS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:N,emailVerified:M,isAnonymous:D,providerData:O,stsTokenManager:S}=n;X(N&&S,e,"internal-error");const y=ri.fromJSON(this.name,S);X(typeof N=="string",e,"internal-error"),or(g,e.name),or(p,e.name),X(typeof M=="boolean",e,"internal-error"),X(typeof D=="boolean",e,"internal-error"),or(w,e.name),or(I,e.name),or(k,e.name),or(P,e.name),or(b,e.name),or(E,e.name);const _=new On({uid:N,auth:e,email:p,emailVerified:M,displayName:g,isAnonymous:D,photoURL:I,phoneNumber:w,tenantId:k,stsTokenManager:y,createdAt:b,lastLoginAt:E});return O&&Array.isArray(O)&&(_.providerData=O.map(v=>Object.assign({},v))),P&&(_._redirectEventId=P),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new ri;s.updateFromServerResponse(n);const i=new On({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await dc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new ri;c.updateFromIdToken(r);const u=new On({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Bh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Map;function Fn(t){Kn(t instanceof Function,"Expected a class definition");let e=Q0.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Q0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iw.type="NONE";const K0=iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t,e,n){return`firebase:${t}:${e}:${n}`}class si{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Tl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Tl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?On._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new si(Fn(K0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fn(K0);const a=Tl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const g=On._fromJSON(e,f);d!==i&&(c=g),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new si(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new si(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(uw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ow(t=ft()){return/firefox\//i.test(t)}function aw(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(t=ft()){return/crios\//i.test(t)}function cw(t=ft()){return/iemobile/i.test(t)}function uw(t=ft()){return/android/i.test(t)}function dw(t=ft()){return/blackberry/i.test(t)}function hw(t=ft()){return/webos/i.test(t)}function bm(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HS(t=ft()){var e;return bm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WS(){return lI()&&document.documentMode===10}function fw(t=ft()){return bm(t)||uw(t)||hw(t)||dw(t)||/windows phone/i.test(t)||cw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e=[]){let n;switch(t){case"Browser":n=Y0(ft());break;case"Worker":n=`${Y0(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ai}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e={}){return gn(t,"GET","/v2/passwordPolicy",er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=6;class JS{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:YS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J0(this),this.idTokenSubscription=new J0(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await si.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rw(this,{idToken:e}),r=await On._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(on(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await dc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(zn(this));const n=e?Ne(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KS(this),n=new JS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ns("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await si.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tr(t){return Ne(t)}class J0{constructor(e){this.auth=e,this.observer=null,this.addObserver=mI(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZS(t){Yc=t}function pw(t){return Yc.loadJS(t)}function eA(){return Yc.recaptchaEnterpriseScript}function tA(){return Yc.gapiScript}function nA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const rA="recaptcha-enterprise",sA="NO_RECAPTCHA";class iA{constructor(e){this.type=rA,this.auth=tr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{VS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new MS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;H0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(sA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&H0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=eA();u.length!==0&&(u+=c),pw(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function X0(t,e,n,r=!1){const s=new iA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function hc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await X0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await X0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e){const n=Ts(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Yo(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function aA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lA(t,e,n){const r=tr(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=gw(e),{host:a,port:c}=cA(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),uA()}function gw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cA(t){const e=gw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Z0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Z0(a)}}}function Z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}async function dA(t,e){return gn(t,"POST","/v1/accounts:update",e)}async function hA(t,e){return gn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return ga(t,"POST","/v1/accounts:signInWithPassword",er(t,e))}async function yw(t,e){return gn(t,"POST","/v1/accounts:sendOobCode",er(t,e))}async function mA(t,e){return yw(t,e)}async function pA(t,e){return yw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e){return ga(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}async function yA(t,e){return ga(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Xo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Xo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hc(e,n,"signInWithPassword",fA);case"emailLink":return gA(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hc(e,r,"signUpPassword",hA);case"emailLink":return yA(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ii(t,e){return ga(t,"POST","/v1/accounts:signInWithIdp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="http://localhost";class fs extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ym(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new fs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ii(e,n)}buildRequest(){const e={requestUri:vA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ma(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _A(t){const e=ao(lo(t)).link,n=e?ao(lo(e)).deep_link_id:null,r=ao(lo(t)).deep_link_id;return(r?ao(lo(r)).link:null)||r||n||e||t}class Nm{constructor(e){var n,r,s,i,a,c;const u=ao(lo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,g=xA((s=u.mode)!==null&&s!==void 0?s:null);X(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=_A(e);try{return new Nm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this.providerId=Is.PROVIDER_ID}static credential(e,n){return Xo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nm.parseLink(n);return X(r,"argument-error"),Xo._fromEmailAndCode(e,r.code,r.tenantId)}}Is.PROVIDER_ID="password";Is.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Is.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Tm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ya{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fs._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rn.credential(n,r)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ya{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends ya{constructor(){super("twitter.com")}static credential(e,n){return fs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e){return ga(t,"POST","/v1/accounts:signUp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await On._fromIdTokenResponse(e,r,s),a=ey(r);return new ms({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ey(r);return new ms({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ey(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends pn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fc(e,n,r,s)}}function vw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(t,i,e,r):i})}async function bA(t,e,n=!1){const r=await hs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ms._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await hs(t,vw(r,s,e,t),n);X(i.idToken,r,"internal-error");const a=wm(i.idToken);X(a,r,"internal-error");const{sub:c}=a;return X(t.uid===c,r,"user-mismatch"),ms._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(t,e,n=!1){if(on(t.app))return Promise.reject(zn(t));const r="signIn",s=await vw(t,r,e),i=await ms._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function EA(t,e){return _w(tr(t),e)}async function NA(t,e){return xw(Ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(t){const e=tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $h(t,e,n){const r=tr(t);await hc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pA)}async function bw(t,e,n){if(on(t.app))return Promise.reject(zn(t));const r=tr(t),a=await hc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&ww(t),u}),c=await ms._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Gh(t,e,n){return on(t.app)?Promise.reject(zn(t)):EA(Ne(t),Is.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ww(t),r})}async function ty(t,e){const n=Ne(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await mA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e){return gn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await hs(r,TA(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function IA(t,e){return SA(Ne(t),null,e)}async function SA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const a=await hs(t,dA(r,i));await t._updateTokensIfNecessary(a,!0)}function AA(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function jA(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function kA(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function CA(t){return Ne(t).signOut()}const mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1e3,RA=10;class Tw extends Nw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);WS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tw.type="LOCAL";const DA=Tw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw extends Nw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Iw.type="SESSION";const Sw=Iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await LA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Im("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(p.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function VA(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function OA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UA(){return Aw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="firebaseLocalStorageDb",qA=1,pc="firebaseLocalStorage",kw="fbase_key";class va{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Xc(t,e){return t.transaction([pc],e?"readwrite":"readonly").objectStore(pc)}function zA(){const t=indexedDB.deleteDatabase(jw);return new va(t).toPromise()}function Hh(){const t=indexedDB.open(jw,qA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pc,{keyPath:kw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pc)?e(r):(r.close(),await zA(),e(await Hh()))})})}async function ny(t,e,n){const r=Xc(t,!0).put({[kw]:e,value:n});return new va(r).toPromise()}async function BA(t,e){const n=Xc(t,!1).get(e),r=await new va(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=Xc(t,!0).delete(e);return new va(n).toPromise()}const $A=800,GA=3;class Cw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Aw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jc._getInstance(UA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OA(),!this.activeServiceWorker)return;this.sender=new MA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hh();return await ny(e,mc,"1"),await ry(e,mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ny(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Xc(s,!1).getAll();return new va(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cw.type="LOCAL";const HA=Cw;new pa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){return e?Fn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WA(t){return _w(t.auth,new Sm(t),t.bypassAuthState)}function QA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),xw(n,new Sm(t),t.bypassAuthState)}async function KA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),bA(n,new Sm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WA;case"linkViaPopup":case"linkViaRedirect":return KA;case"reauthViaPopup":case"reauthViaRedirect":return QA;default:Jt(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new pa(2e3,1e4);async function JA(t,e,n){if(on(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const r=tr(t);AS(t,e,Tm);const s=Pw(r,n);return new ts(r,"signInViaPopup",e,s).executeNotNull()}class ts extends Rw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ts.currentPopupAction&&ts.currentPopupAction.cancel(),ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YA.get())};e()}}ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="pendingRedirect",Il=new Map;class ZA extends Rw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Il.get(this.auth._key());if(!e){try{const r=await ej(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Il.set(this.auth._key(),e)}return this.bypassAuthState||Il.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ej(t,e){const n=rj(e),r=nj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tj(t,e){Il.set(t._key(),e)}function nj(t){return Fn(t._redirectPersistence)}function rj(t){return Tl(XA,t.config.apiKey,t.name)}async function sj(t,e,n=!1){if(on(t.app))return Promise.reject(zn(t));const r=tr(t),s=Pw(r,e),a=await new ZA(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=10*60*1e3;class oj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ij&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e={}){return gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uj=/^https?/;async function dj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lj(t);for(const n of e)try{if(hj(n))return}catch{}Jt(t,"unauthorized-domain")}function hj(t){const e=zh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!uj.test(n))return!1;if(cj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new pa(3e4,6e4);function iy(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mj(t){return new Promise((e,n)=>{var r,s,i;function a(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),n(cn(t,"network-request-failed"))},timeout:fj.get()})}if(!((s=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=En().gapi)===null||i===void 0)&&i.load)a();else{const c=nA("iframefcb");return En()[c]=()=>{gapi.load?a():n(cn(t,"network-request-failed"))},pw(`${tA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Sl=null,e})}let Sl=null;function pj(t){return Sl=Sl||mj(t),Sl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new pa(5e3,15e3),yj="__/auth/iframe",vj="emulator/auth/iframe",xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wj(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_m(e,vj):`https://${t.config.authDomain}/${yj}`,r={apiKey:e.apiKey,appName:t.name,v:Ai},s=_j.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ma(r).slice(1)}`}async function bj(t){const e=await pj(t),n=En().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:wj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=cn(t,"network-request-failed"),c=En().setTimeout(()=>{i(a)},gj.get());function u(){En().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nj=500,Tj=600,Ij="_blank",Sj="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Aj(t,e,n,r=Nj,s=Tj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Ej),{width:r.toString(),height:s.toString(),top:i,left:a}),d=ft().toLowerCase();n&&(c=lw(d)?Ij:n),ow(d)&&(e=e||Sj,u.scrollbars="yes");const f=Object.entries(u).reduce((p,[w,I])=>`${p}${w}=${I},`,"");if(HS(d)&&c!=="_self")return jj(e||"",c),new oy(null);const g=window.open(e||"",c,f);X(g,t,"popup-blocked");try{g.focus()}catch{}return new oy(g)}function jj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="__/auth/handler",Cj="emulator/auth/handler",Pj=encodeURIComponent("fac");async function ay(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ai,eventId:s};if(e instanceof Tm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))a[f]=g}if(e instanceof ya){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${Pj}=${encodeURIComponent(u)}`:"";return`${Rj(t)}?${ma(c).slice(1)}${d}`}function Rj({config:t}){return t.emulator?_m(t,Cj):`https://${t.authDomain}/${kj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="webStorageSupport";class Dj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sw,this._completeRedirectFn=sj,this._overrideRedirectResult=tj}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await ay(e,n,r,zh(),s);return Aj(e,a,Im())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ay(e,n,r,zh(),s);return VA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bj(e),r=new oj(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(_d,{type:_d},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[_d];a!==void 0&&n(!!a),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fw()||aw()||bm()}}const Lj=Dj;var ly="@firebase/auth",cy="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Oj(t){In(new dn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mw(t)},d=new XS(r,s,i,u);return aA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),In(new dn("auth-internal",e=>{const n=tr(e.getProvider("auth").getImmediate());return(r=>new Mj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(ly,cy,Vj(t)),Wt(ly,cy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=5*60,Uj=$_("authIdTokenMaxAge")||Fj;let uy=null;const qj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Uj)return;const s=n==null?void 0:n.token;uy!==s&&(uy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zj(t=gm()){const e=Ts(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oA(t,{popupRedirectResolver:Lj,persistence:[HA,DA,Sw]}),r=$_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=qj(i.toString());jA(n,a,()=>a(n.currentUser)),AA(n,c=>a(c))}}const s=z_("auth");return s&&lA(n,`http://${s}`),n}function Bj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Oj("Browser");var $j="firebase",Gj="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt($j,Gj,"app");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,Lw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,y){function _(){}_.prototype=y.prototype,S.D=y.prototype,S.prototype=new _,S.prototype.constructor=S,S.C=function(v,j,R){for(var A=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)A[ce-2]=arguments[ce];return y.prototype[j].apply(v,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,y,_){_||(_=0);var v=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)v[j]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(j=0;16>j;++j)v[j]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=S.g[0],_=S.g[1],j=S.g[2];var R=S.g[3],A=y+(R^_&(j^R))+v[0]+3614090360&4294967295;y=_+(A<<7&4294967295|A>>>25),A=R+(j^y&(_^j))+v[1]+3905402710&4294967295,R=y+(A<<12&4294967295|A>>>20),A=j+(_^R&(y^_))+v[2]+606105819&4294967295,j=R+(A<<17&4294967295|A>>>15),A=_+(y^j&(R^y))+v[3]+3250441966&4294967295,_=j+(A<<22&4294967295|A>>>10),A=y+(R^_&(j^R))+v[4]+4118548399&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(j^y&(_^j))+v[5]+1200080426&4294967295,R=y+(A<<12&4294967295|A>>>20),A=j+(_^R&(y^_))+v[6]+2821735955&4294967295,j=R+(A<<17&4294967295|A>>>15),A=_+(y^j&(R^y))+v[7]+4249261313&4294967295,_=j+(A<<22&4294967295|A>>>10),A=y+(R^_&(j^R))+v[8]+1770035416&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(j^y&(_^j))+v[9]+2336552879&4294967295,R=y+(A<<12&4294967295|A>>>20),A=j+(_^R&(y^_))+v[10]+4294925233&4294967295,j=R+(A<<17&4294967295|A>>>15),A=_+(y^j&(R^y))+v[11]+2304563134&4294967295,_=j+(A<<22&4294967295|A>>>10),A=y+(R^_&(j^R))+v[12]+1804603682&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(j^y&(_^j))+v[13]+4254626195&4294967295,R=y+(A<<12&4294967295|A>>>20),A=j+(_^R&(y^_))+v[14]+2792965006&4294967295,j=R+(A<<17&4294967295|A>>>15),A=_+(y^j&(R^y))+v[15]+1236535329&4294967295,_=j+(A<<22&4294967295|A>>>10),A=y+(j^R&(_^j))+v[1]+4129170786&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^j&(y^_))+v[6]+3225465664&4294967295,R=y+(A<<9&4294967295|A>>>23),A=j+(y^_&(R^y))+v[11]+643717713&4294967295,j=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(j^R))+v[0]+3921069994&4294967295,_=j+(A<<20&4294967295|A>>>12),A=y+(j^R&(_^j))+v[5]+3593408605&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^j&(y^_))+v[10]+38016083&4294967295,R=y+(A<<9&4294967295|A>>>23),A=j+(y^_&(R^y))+v[15]+3634488961&4294967295,j=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(j^R))+v[4]+3889429448&4294967295,_=j+(A<<20&4294967295|A>>>12),A=y+(j^R&(_^j))+v[9]+568446438&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^j&(y^_))+v[14]+3275163606&4294967295,R=y+(A<<9&4294967295|A>>>23),A=j+(y^_&(R^y))+v[3]+4107603335&4294967295,j=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(j^R))+v[8]+1163531501&4294967295,_=j+(A<<20&4294967295|A>>>12),A=y+(j^R&(_^j))+v[13]+2850285829&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^j&(y^_))+v[2]+4243563512&4294967295,R=y+(A<<9&4294967295|A>>>23),A=j+(y^_&(R^y))+v[7]+1735328473&4294967295,j=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(j^R))+v[12]+2368359562&4294967295,_=j+(A<<20&4294967295|A>>>12),A=y+(_^j^R)+v[5]+4294588738&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^j)+v[8]+2272392833&4294967295,R=y+(A<<11&4294967295|A>>>21),A=j+(R^y^_)+v[11]+1839030562&4294967295,j=R+(A<<16&4294967295|A>>>16),A=_+(j^R^y)+v[14]+4259657740&4294967295,_=j+(A<<23&4294967295|A>>>9),A=y+(_^j^R)+v[1]+2763975236&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^j)+v[4]+1272893353&4294967295,R=y+(A<<11&4294967295|A>>>21),A=j+(R^y^_)+v[7]+4139469664&4294967295,j=R+(A<<16&4294967295|A>>>16),A=_+(j^R^y)+v[10]+3200236656&4294967295,_=j+(A<<23&4294967295|A>>>9),A=y+(_^j^R)+v[13]+681279174&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^j)+v[0]+3936430074&4294967295,R=y+(A<<11&4294967295|A>>>21),A=j+(R^y^_)+v[3]+3572445317&4294967295,j=R+(A<<16&4294967295|A>>>16),A=_+(j^R^y)+v[6]+76029189&4294967295,_=j+(A<<23&4294967295|A>>>9),A=y+(_^j^R)+v[9]+3654602809&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^j)+v[12]+3873151461&4294967295,R=y+(A<<11&4294967295|A>>>21),A=j+(R^y^_)+v[15]+530742520&4294967295,j=R+(A<<16&4294967295|A>>>16),A=_+(j^R^y)+v[2]+3299628645&4294967295,_=j+(A<<23&4294967295|A>>>9),A=y+(j^(_|~R))+v[0]+4096336452&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~j))+v[7]+1126891415&4294967295,R=y+(A<<10&4294967295|A>>>22),A=j+(y^(R|~_))+v[14]+2878612391&4294967295,j=R+(A<<15&4294967295|A>>>17),A=_+(R^(j|~y))+v[5]+4237533241&4294967295,_=j+(A<<21&4294967295|A>>>11),A=y+(j^(_|~R))+v[12]+1700485571&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~j))+v[3]+2399980690&4294967295,R=y+(A<<10&4294967295|A>>>22),A=j+(y^(R|~_))+v[10]+4293915773&4294967295,j=R+(A<<15&4294967295|A>>>17),A=_+(R^(j|~y))+v[1]+2240044497&4294967295,_=j+(A<<21&4294967295|A>>>11),A=y+(j^(_|~R))+v[8]+1873313359&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~j))+v[15]+4264355552&4294967295,R=y+(A<<10&4294967295|A>>>22),A=j+(y^(R|~_))+v[6]+2734768916&4294967295,j=R+(A<<15&4294967295|A>>>17),A=_+(R^(j|~y))+v[13]+1309151649&4294967295,_=j+(A<<21&4294967295|A>>>11),A=y+(j^(_|~R))+v[4]+4149444226&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~j))+v[11]+3174756917&4294967295,R=y+(A<<10&4294967295|A>>>22),A=j+(y^(R|~_))+v[2]+718787259&4294967295,j=R+(A<<15&4294967295|A>>>17),A=_+(R^(j|~y))+v[9]+3951481745&4294967295,S.g[0]=S.g[0]+y&4294967295,S.g[1]=S.g[1]+(j+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+j&4294967295,S.g[3]=S.g[3]+R&4294967295}r.prototype.u=function(S,y){y===void 0&&(y=S.length);for(var _=y-this.blockSize,v=this.B,j=this.h,R=0;R<y;){if(j==0)for(;R<=_;)s(this,S,R),R+=this.blockSize;if(typeof S=="string"){for(;R<y;)if(v[j++]=S.charCodeAt(R++),j==this.blockSize){s(this,v),j=0;break}}else for(;R<y;)if(v[j++]=S[R++],j==this.blockSize){s(this,v),j=0;break}}this.h=j,this.o+=y},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var y=1;y<S.length-8;++y)S[y]=0;var _=8*this.o;for(y=S.length-8;y<S.length;++y)S[y]=_&255,_/=256;for(this.u(S),S=Array(16),y=_=0;4>y;++y)for(var v=0;32>v;v+=8)S[_++]=this.g[y]>>>v&255;return S};function i(S,y){var _=c;return Object.prototype.hasOwnProperty.call(_,S)?_[S]:_[S]=y(S)}function a(S,y){this.h=y;for(var _=[],v=!0,j=S.length-1;0<=j;j--){var R=S[j]|0;v&&R==y||(_[j]=R,v=!1)}this.g=_}var c={};function u(S){return-128<=S&&128>S?i(S,function(y){return new a([y|0],0>y?-1:0)}):new a([S|0],0>S?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return g;if(0>S)return P(d(-S));for(var y=[],_=1,v=0;S>=_;v++)y[v]=S/_|0,_*=4294967296;return new a(y,0)}function f(S,y){if(S.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(S.charAt(0)=="-")return P(f(S.substring(1),y));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(y,8)),v=g,j=0;j<S.length;j+=8){var R=Math.min(8,S.length-j),A=parseInt(S.substring(j,j+R),y);8>R?(R=d(Math.pow(y,R)),v=v.j(R).add(d(A))):(v=v.j(_),v=v.add(d(A)))}return v}var g=u(0),p=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-P(this).m();for(var S=0,y=1,_=0;_<this.g.length;_++){var v=this.i(_);S+=(0<=v?v:4294967296+v)*y,y*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(k(this))return"-"+P(this).toString(S);for(var y=d(Math.pow(S,6)),_=this,v="";;){var j=M(_,y).g;_=b(_,j.j(y));var R=((0<_.g.length?_.g[0]:_.h)>>>0).toString(S);if(_=j,I(_))return R+v;for(;6>R.length;)R="0"+R;v=R+v}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(var y=0;y<S.g.length;y++)if(S.g[y]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=b(this,S),k(S)?-1:I(S)?0:1};function P(S){for(var y=S.g.length,_=[],v=0;v<y;v++)_[v]=~S.g[v];return new a(_,~S.h).add(p)}t.abs=function(){return k(this)?P(this):this},t.add=function(S){for(var y=Math.max(this.g.length,S.g.length),_=[],v=0,j=0;j<=y;j++){var R=v+(this.i(j)&65535)+(S.i(j)&65535),A=(R>>>16)+(this.i(j)>>>16)+(S.i(j)>>>16);v=A>>>16,R&=65535,A&=65535,_[j]=A<<16|R}return new a(_,_[_.length-1]&-2147483648?-1:0)};function b(S,y){return S.add(P(y))}t.j=function(S){if(I(this)||I(S))return g;if(k(this))return k(S)?P(this).j(P(S)):P(P(this).j(S));if(k(S))return P(this.j(P(S)));if(0>this.l(w)&&0>S.l(w))return d(this.m()*S.m());for(var y=this.g.length+S.g.length,_=[],v=0;v<2*y;v++)_[v]=0;for(v=0;v<this.g.length;v++)for(var j=0;j<S.g.length;j++){var R=this.i(v)>>>16,A=this.i(v)&65535,ce=S.i(j)>>>16,Oe=S.i(j)&65535;_[2*v+2*j]+=A*Oe,E(_,2*v+2*j),_[2*v+2*j+1]+=R*Oe,E(_,2*v+2*j+1),_[2*v+2*j+1]+=A*ce,E(_,2*v+2*j+1),_[2*v+2*j+2]+=R*ce,E(_,2*v+2*j+2)}for(v=0;v<y;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=y;v<2*y;v++)_[v]=0;return new a(_,0)};function E(S,y){for(;(S[y]&65535)!=S[y];)S[y+1]+=S[y]>>>16,S[y]&=65535,y++}function N(S,y){this.g=S,this.h=y}function M(S,y){if(I(y))throw Error("division by zero");if(I(S))return new N(g,g);if(k(S))return y=M(P(S),y),new N(P(y.g),P(y.h));if(k(y))return y=M(S,P(y)),new N(P(y.g),y.h);if(30<S.g.length){if(k(S)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var _=p,v=y;0>=v.l(S);)_=D(_),v=D(v);var j=O(_,1),R=O(v,1);for(v=O(v,2),_=O(_,2);!I(v);){var A=R.add(v);0>=A.l(S)&&(j=j.add(_),R=A),v=O(v,1),_=O(_,1)}return y=b(S,j.j(y)),new N(j,y)}for(j=g;0<=S.l(y);){for(_=Math.max(1,Math.floor(S.m()/y.m())),v=Math.ceil(Math.log(_)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),R=d(_),A=R.j(y);k(A)||0<A.l(S);)_-=v,R=d(_),A=R.j(y);I(R)&&(R=p),j=j.add(R),S=b(S,A)}return new N(j,S)}t.A=function(S){return M(this,S).h},t.and=function(S){for(var y=Math.max(this.g.length,S.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)&S.i(v);return new a(_,this.h&S.h)},t.or=function(S){for(var y=Math.max(this.g.length,S.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)|S.i(v);return new a(_,this.h|S.h)},t.xor=function(S){for(var y=Math.max(this.g.length,S.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)^S.i(v);return new a(_,this.h^S.h)};function D(S){for(var y=S.g.length+1,_=[],v=0;v<y;v++)_[v]=S.i(v)<<1|S.i(v-1)>>>31;return new a(_,S.h)}function O(S,y){var _=y>>5;y%=32;for(var v=S.g.length-_,j=[],R=0;R<v;R++)j[R]=0<y?S.i(R+_)>>>y|S.i(R+_+1)<<32-y:S.i(R+_);return new a(j,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lw=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,os=a}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Vw,co,Ow,Al,Wh,Fw,Uw,qw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,m){return l==Array.prototype||l==Object.prototype||(l[h]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var h=0;h<l.length;++h){var m=l[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var m=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var L=l[x];if(!(L in m))break e;m=m[L]}l=l[l.length-1],x=m[l],h=h(x),h!=x&&h!=null&&e(m,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var m=0,x=!1,L={next:function(){if(!x&&m<l.length){var V=m++;return{value:h(V,l[V]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,m){return l.call.apply(l.bind,arguments)}function g(l,h,m){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function p(l,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,p.apply(null,arguments)}function w(l,h){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function I(l,h){function m(){}m.prototype=h.prototype,l.aa=h.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(x,L,V){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return h.prototype[L].apply(x,B)}}function k(l){const h=l.length;if(0<h){const m=Array(h);for(let x=0;x<h;x++)m[x]=l[x];return m}return[]}function P(l,h){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(u(x)){const L=l.length||0,V=x.length||0;l.length=L+V;for(let B=0;B<V;B++)l[L+B]=x[B]}else l.push(x)}}class b{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function N(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var D=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function O(l,h,m){for(const x in l)h.call(m,l[x],x,l)}function S(l,h){for(const m in l)h.call(void 0,l[m],m,l)}function y(l){const h={};for(const m in l)h[m]=l[m];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(l,h){let m,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(m in x)l[m]=x[m];for(let V=0;V<_.length;V++)m=_[V],Object.prototype.hasOwnProperty.call(x,m)&&(l[m]=x[m])}}function j(l){var h=1;l=l.split(":");const m=[];for(;0<h&&l.length;)m.push(l.shift()),h--;return l.length&&m.push(l.join(":")),m}function R(l){c.setTimeout(()=>{throw l},0)}function A(){var l=W;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ce{constructor(){this.h=this.g=null}add(h,m){const x=Oe.get();x.set(h,m),this.h?this.h.next=x:this.g=x,this.h=x}}var Oe=new b(()=>new Et,l=>l.reset());class Et{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,$=!1,W=new ce,J=()=>{const l=c.Promise.resolve(void 0);tt=()=>{l.then(ue)}};var ue=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(m){R(m)}var h=Oe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};c.addEventListener("test",m,h),c.removeEventListener("test",m,h)}catch{}return l}();function zt(l,h){if(Te.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{M(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else m=="mouseover"?h=l.fromElement:m=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Xt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&zt.aa.h.call(this)}}I(zt,Te);var Xt={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ct="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function z(l,h,m,x,L){this.listener=l,this.proxy=null,this.src=h,this.type=m,this.capture=!!x,this.ha=L,this.key=++Zt,this.da=this.fa=!1}function fe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function qr(l){this.src=l,this.g={},this.h=0}qr.prototype.add=function(l,h,m,x,L){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var B=xu(l,h,x,L);return-1<B?(h=l[B],m||(h.fa=!1)):(h=new z(h,this.src,V,!!x,L),h.fa=m,l.push(h)),h};function zr(l,h){var m=h.type;if(m in l.g){var x=l.g[m],L=Array.prototype.indexOf.call(x,h,void 0),V;(V=0<=L)&&Array.prototype.splice.call(x,L,1),V&&(fe(h),l.g[m].length==0&&(delete l.g[m],l.h--))}}function xu(l,h,m,x){for(var L=0;L<l.length;++L){var V=l[L];if(!V.da&&V.listener==h&&V.capture==!!m&&V.ha==x)return L}return-1}var _u="closure_lm_"+(1e6*Math.random()|0),wu={};function vp(l,h,m,x,L){if(Array.isArray(h)){for(var V=0;V<h.length;V++)vp(l,h[V],m,x,L);return null}return m=wp(m),l&&l[Ct]?l.K(h,m,d(x)?!!x.capture:!!x,L):B1(l,h,m,!1,x,L)}function B1(l,h,m,x,L,V){if(!h)throw Error("Invalid event type");var B=d(L)?!!L.capture:!!L,ge=Eu(l);if(ge||(l[_u]=ge=new qr(l)),m=ge.add(h,m,x,B,V),m.proxy)return m;if(x=$1(),m.proxy=x,x.src=l,x.listener=m,l.addEventListener)qt||(L=B),L===void 0&&(L=!1),l.addEventListener(h.toString(),x,L);else if(l.attachEvent)l.attachEvent(_p(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function $1(){function l(m){return h.call(l.src,l.listener,m)}const h=G1;return l}function xp(l,h,m,x,L){if(Array.isArray(h))for(var V=0;V<h.length;V++)xp(l,h[V],m,x,L);else x=d(x)?!!x.capture:!!x,m=wp(m),l&&l[Ct]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],m=xu(V,m,x,L),-1<m&&(fe(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=Eu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=xu(h,m,x,L)),(m=-1<l?h[l]:null)&&bu(m))}function bu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Ct])zr(h.i,l);else{var m=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(m,x,l.capture):h.detachEvent?h.detachEvent(_p(m),x):h.addListener&&h.removeListener&&h.removeListener(x),(m=Eu(h))?(zr(m,l),m.h==0&&(m.src=null,h[_u]=null)):fe(l)}}}function _p(l){return l in wu?wu[l]:wu[l]="on"+l}function G1(l,h){if(l.da)l=!0;else{h=new zt(h,this);var m=l.listener,x=l.ha||l.src;l.fa&&bu(l),l=m.call(x,h)}return l}function Eu(l){return l=l[_u],l instanceof qr?l:null}var Nu="__closure_events_fn_"+(1e9*Math.random()>>>0);function wp(l){return typeof l=="function"?l:(l[Nu]||(l[Nu]=function(h){return l.handleEvent(h)}),l[Nu])}function nt(){me.call(this),this.i=new qr(this),this.M=this,this.F=null}I(nt,me),nt.prototype[Ct]=!0,nt.prototype.removeEventListener=function(l,h,m,x){xp(this,l,h,m,x)};function mt(l,h){var m,x=l.F;if(x)for(m=[];x;x=x.F)m.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new Te(h,l);else if(h instanceof Te)h.target=h.target||l;else{var L=h;h=new Te(x,l),v(h,L)}if(L=!0,m)for(var V=m.length-1;0<=V;V--){var B=h.g=m[V];L=Ia(B,x,!0,h)&&L}if(B=h.g=l,L=Ia(B,x,!0,h)&&L,L=Ia(B,x,!1,h)&&L,m)for(V=0;V<m.length;V++)B=h.g=m[V],L=Ia(B,x,!1,h)&&L}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var m=l.g[h],x=0;x<m.length;x++)fe(m[x]);delete l.g[h],l.h--}}this.F=null},nt.prototype.K=function(l,h,m,x){return this.i.add(String(l),h,!1,m,x)},nt.prototype.L=function(l,h,m,x){return this.i.add(String(l),h,!0,m,x)};function Ia(l,h,m,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,V=0;V<h.length;++V){var B=h[V];if(B&&!B.da&&B.capture==m){var ge=B.listener,We=B.ha||B.src;B.fa&&zr(l.i,B),L=ge.call(We,x)!==!1&&L}}return L&&!x.defaultPrevented}function bp(l,h,m){if(typeof l=="function")m&&(l=p(l,m));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Ep(l){l.g=bp(()=>{l.g=null,l.i&&(l.i=!1,Ep(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class H1 extends me{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ep(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Di(l){me.call(this),this.h=l,this.g={}}I(Di,me);var Np=[];function Tp(l){O(l.g,function(h,m){this.g.hasOwnProperty(m)&&bu(h)},l),l.g={}}Di.prototype.N=function(){Di.aa.N.call(this),Tp(this)},Di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tu=c.JSON.stringify,W1=c.JSON.parse,Q1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Iu(){}Iu.prototype.h=null;function Ip(l){return l.h||(l.h=l.i())}function Sp(){}var Li={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Su(){Te.call(this,"d")}I(Su,Te);function Au(){Te.call(this,"c")}I(Au,Te);var Br={},Ap=null;function Sa(){return Ap=Ap||new nt}Br.La="serverreachability";function jp(l){Te.call(this,Br.La,l)}I(jp,Te);function Mi(l){const h=Sa();mt(h,new jp(h))}Br.STAT_EVENT="statevent";function kp(l,h){Te.call(this,Br.STAT_EVENT,l),this.stat=h}I(kp,Te);function pt(l){const h=Sa();mt(h,new kp(h,l))}Br.Ma="timingevent";function Cp(l,h){Te.call(this,Br.Ma,l),this.size=h}I(Cp,Te);function Vi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Oi(){this.g=!0}Oi.prototype.xa=function(){this.g=!1};function K1(l,h,m,x,L,V){l.info(function(){if(l.g)if(V)for(var B="",ge=V.split("&"),We=0;We<ge.length;We++){var de=ge[We].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");B=2<=st.length&&st[1]=="type"?B+(rt+"="+de+"&"):B+(rt+"=redacted&")}}else B=null;else B=V;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+h+`
`+m+`
`+B})}function Y1(l,h,m,x,L,V,B){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+h+`
`+m+`
`+V+" "+B})}function ks(l,h,m,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+X1(l,m)+(x?" "+x:"")})}function J1(l,h){l.info(function(){return"TIMEOUT: "+h})}Oi.prototype.info=function(){};function X1(l,h){if(!l.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var x=m[l];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Tu(m)}catch{return h}}var Aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ju;function ja(){}I(ja,Iu),ja.prototype.g=function(){return new XMLHttpRequest},ja.prototype.i=function(){return{}},ju=new ja;function nr(l,h,m,x){this.j=l,this.i=h,this.l=m,this.R=x||1,this.U=new Di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}var Dp={},ku={};function Cu(l,h,m){l.L=1,l.v=Ra(An(h)),l.m=m,l.P=!0,Lp(l,null)}function Lp(l,h){l.F=Date.now(),ka(l),l.A=An(l.v);var m=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Kp(m.i,"t",x),l.C=0,m=l.j.J,l.h=new Rp,l.g=fg(l.j,m?h:null,!l.m),0<l.O&&(l.M=new H1(p(l.Y,l,l.g),l.O)),h=l.U,m=l.g,x=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Np[0]=L.toString()),L=Np);for(var V=0;V<L.length;V++){var B=vp(m,L[V],x||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Mi(),K1(l.i,l.u,l.A,l.l,l.R,l.m)}nr.prototype.ca=function(l){l=l.target;const h=this.M;h&&jn(l)==3?h.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const st=jn(this.g);var h=this.g.Ba();const Rs=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||ng(this.g)))){this.J||st!=4||h==7||(h==8||0>=Rs?Mi(3):Mi(2)),Pu(this);var m=this.g.Z();this.X=m;t:if(Mp(this)){var x=ng(this.g);l="";var L=x.length,V=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Fi(this);var B="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(V&&h==L-1)});x.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,Y1(this.i,this.u,this.A,this.l,this.R,st,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,We=this.g;if((ge=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ge)){var de=ge;break t}}de=null}if(m=de)ks(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ru(this,m);else{this.o=!1,this.s=3,pt(12),$r(this),Fi(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<B.length;)if(en=Z1(this,B),en==ku){st==4&&(this.s=4,pt(14),m=!1),ks(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Dp){this.s=4,pt(15),ks(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else ks(this.i,this.l,en,null),Ru(this,en);if(Mp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,pt(16),m=!1),this.o=this.o&&m,!m)ks(this.i,this.l,B,"[Invalid Chunked Response]"),$r(this),Fi(this);else if(0<B.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Fu(rt),rt.M=!0,pt(11))}}else ks(this.i,this.l,B,null),Ru(this,B);st==4&&$r(this),this.o&&!this.J&&(st==4?cg(this.j,this):(this.o=!1,ka(this)))}else gE(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),$r(this),Fi(this)}}}catch{}finally{}};function Mp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Z1(l,h){var m=l.C,x=h.indexOf(`
`,m);return x==-1?ku:(m=Number(h.substring(m,x)),isNaN(m)?Dp:(x+=1,x+m>h.length?ku:(h=h.slice(x,x+m),l.C=x+m,h)))}nr.prototype.cancel=function(){this.J=!0,$r(this)};function ka(l){l.S=Date.now()+l.I,Vp(l,l.I)}function Vp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Vi(p(l.ba,l),h)}function Pu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(J1(this.i,this.A),this.L!=2&&(Mi(),pt(17)),$r(this),this.s=2,Fi(this)):Vp(this,this.S-l)};function Fi(l){l.j.G==0||l.J||cg(l.j,l)}function $r(l){Pu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Tp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ru(l,h){try{var m=l.j;if(m.G!=0&&(m.g==l||Du(m.h,l))){if(!l.K&&Du(m.h,l)&&m.G==3){try{var x=m.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)Oa(m),Ma(m);else break e;Ou(m),pt(18)}}else m.za=L[1],0<m.za-m.T&&37500>L[2]&&m.F&&m.v==0&&!m.C&&(m.C=Vi(p(m.Za,m),6e3));if(1>=Up(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Hr(m,11)}else if((l.K||m.g==l)&&Oa(m),!E(h))for(L=m.Da.g.parse(h),h=0;h<L.length;h++){let de=L[h];if(m.T=de[0],de=de[1],m.G==2)if(de[0]=="c"){m.K=de[1],m.ia=de[2];const rt=de[3];rt!=null&&(m.la=rt,m.j.info("VER="+m.la));const st=de[4];st!=null&&(m.Aa=st,m.j.info("SVER="+m.Aa));const Rs=de[5];Rs!=null&&typeof Rs=="number"&&0<Rs&&(x=1.5*Rs,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const en=l.g;if(en){const Ua=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var V=x.h;V.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Lu(V,V.h),V.h=null))}if(x.D){const Uu=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Uu&&(x.ya=Uu,xe(x.I,x.D,Uu))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var B=l;if(x.qa=hg(x,x.J?x.ia:null,x.W),B.K){qp(x.h,B);var ge=B,We=x.L;We&&(ge.I=We),ge.B&&(Pu(ge),ka(ge)),x.g=B}else ag(x);0<m.i.length&&Va(m)}else de[0]!="stop"&&de[0]!="close"||Hr(m,7);else m.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Hr(m,7):Vu(m):de[0]!="noop"&&m.l&&m.l.ta(de),m.v=0)}}Mi(4)}catch{}}var eE=class{constructor(l,h){this.g=l,this.map=h}};function Op(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Up(l){return l.h?1:l.g?l.g.size:0}function Du(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Lu(l,h){l.g?l.g.add(h):l.h=h}function qp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Op.prototype.cancel=function(){if(this.i=zp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const m of l.g.values())h=h.concat(m.D);return h}return k(l.i)}function tE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],m=l.length,x=0;x<m;x++)h.push(l[x]);return h}h=[],m=0;for(x in l)h[m++]=l[x];return h}function nE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var m=0;m<l;m++)h.push(m);return h}h=[],m=0;for(const x in l)h[m++]=x;return h}}}function Bp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var m=nE(l),x=tE(l),L=x.length,V=0;V<L;V++)h.call(void 0,x[V],m&&m[V],l)}var $p=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rE(l,h){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var x=l[m].indexOf("="),L=null;if(0<=x){var V=l[m].substring(0,x);L=l[m].substring(x+1)}else V=l[m];h(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Gr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Gr){this.h=l.h,Ca(this,l.j),this.o=l.o,this.g=l.g,Pa(this,l.s),this.l=l.l;var h=l.i,m=new zi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Gp(this,m),this.m=l.m}else l&&(h=String(l).match($p))?(this.h=!1,Ca(this,h[1]||"",!0),this.o=Ui(h[2]||""),this.g=Ui(h[3]||"",!0),Pa(this,h[4]),this.l=Ui(h[5]||"",!0),Gp(this,h[6]||"",!0),this.m=Ui(h[7]||"")):(this.h=!1,this.i=new zi(null,this.h))}Gr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(qi(h,Hp,!0),":");var m=this.g;return(m||h=="file")&&(l.push("//"),(h=this.o)&&l.push(qi(h,Hp,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(qi(m,m.charAt(0)=="/"?oE:iE,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",qi(m,lE)),l.join("")};function An(l){return new Gr(l)}function Ca(l,h,m){l.j=m?Ui(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Pa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Gp(l,h,m){h instanceof zi?(l.i=h,cE(l.i,l.h)):(m||(h=qi(h,aE)),l.i=new zi(h,l.h))}function xe(l,h,m){l.i.set(h,m)}function Ra(l){return xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ui(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qi(l,h,m){return typeof l=="string"?(l=encodeURI(l).replace(h,sE),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Hp=/[#\/\?@]/g,iE=/[#\?:]/g,oE=/[#\?]/g,aE=/[#\?@]/g,lE=/#/g;function zi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&rE(l.i,function(h,m){l.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=zi.prototype,t.add=function(l,h){rr(this),this.i=null,l=Cs(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(h),this.h+=1,this};function Wp(l,h){rr(l),h=Cs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Qp(l,h){return rr(l),h=Cs(l,h),l.g.has(h)}t.forEach=function(l,h){rr(this),this.g.forEach(function(m,x){m.forEach(function(L){l.call(h,L,x,this)},this)},this)},t.na=function(){rr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let x=0;x<h.length;x++){const L=l[x];for(let V=0;V<L.length;V++)m.push(h[x])}return m},t.V=function(l){rr(this);let h=[];if(typeof l=="string")Qp(this,l)&&(h=h.concat(this.g.get(Cs(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)h=h.concat(l[m])}return h},t.set=function(l,h){return rr(this),this.i=null,l=Cs(this,l),Qp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Kp(l,h,m){Wp(l,h),0<m.length&&(l.i=null,l.g.set(Cs(l,h),k(m)),l.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var x=h[m];const V=encodeURIComponent(String(x)),B=this.V(x);for(x=0;x<B.length;x++){var L=V;B[x]!==""&&(L+="="+encodeURIComponent(String(B[x]))),l.push(L)}}return this.i=l.join("&")};function Cs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function cE(l,h){h&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(m,x){var L=x.toLowerCase();x!=L&&(Wp(this,x),Kp(this,L,m))},l)),l.j=h}function uE(l,h){const m=new Oi;if(c.Image){const x=new Image;x.onload=w(sr,m,"TestLoadImage: loaded",!0,h,x),x.onerror=w(sr,m,"TestLoadImage: error",!1,h,x),x.onabort=w(sr,m,"TestLoadImage: abort",!1,h,x),x.ontimeout=w(sr,m,"TestLoadImage: timeout",!1,h,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function dE(l,h){const m=new Oi,x=new AbortController,L=setTimeout(()=>{x.abort(),sr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(V=>{clearTimeout(L),V.ok?sr(m,"TestPingServer: ok",!0,h):sr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),sr(m,"TestPingServer: error",!1,h)})}function sr(l,h,m,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(m)}catch{}}function hE(){this.g=new Q1}function fE(l,h,m){const x=m||"";try{Bp(l,function(L,V){let B=L;d(L)&&(B=Tu(L)),h.push(x+V+"="+encodeURIComponent(B))})}catch(L){throw h.push(x+"type="+encodeURIComponent("_badmap")),L}}function Bi(l){this.l=l.Ub||null,this.j=l.eb||!1}I(Bi,Iu),Bi.prototype.g=function(){return new Da(this.l,this.j)},Bi.prototype.i=function(l){return function(){return l}}({});function Da(l,h){nt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Da,nt),t=Da.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Gi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Gi(this)),this.g&&(this.readyState=3,Gi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Yp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Yp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?$i(this):Gi(this),this.readyState==3&&Yp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,$i(this))},t.Qa=function(l){this.g&&(this.response=l,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Gi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=h.next();return l.join(`\r
`)};function Gi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Jp(l){let h="";return O(l,function(m,x){h+=x,h+=":",h+=m,h+=`\r
`}),h}function Mu(l,h,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=Jp(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):xe(l,h,m))}function ke(l){nt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ke,nt);var mE=/^https?$/i,pE=["POST","PUT"];t=ke.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ju.g(),this.v=this.o?Ip(this.o):Ip(ju),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Xp(this,V);return}if(l=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)m.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const V of x.keys())m.set(V,x.get(V));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(pE,h,void 0))||x||L||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,B]of m)this.g.setRequestHeader(V,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tg(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Xp(this,V)}};function Xp(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Zp(l),La(l)}function Zp(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mt(this,"complete"),mt(this,"abort"),La(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),La(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eg(this):this.bb())},t.bb=function(){eg(this)};function eg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)bp(l.Ea,0,l);else if(mt(l,"readystatechange"),jn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var x;if(x=B===0){var L=String(l.D).match($p)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),x=!mE.test(L?L.toLowerCase():"")}m=x}if(m)mt(l,"complete"),mt(l,"success");else{l.m=6;try{var V=2<jn(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Zp(l)}}finally{La(l)}}}}function La(l,h){if(l.g){tg(l);const m=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||mt(l,"ready");try{m.onreadystatechange=x}catch{}}}function tg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),W1(h)}};function ng(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function gE(l){const h={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(E(l[x]))continue;var m=j(l[x]);const L=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const V=h[L]||[];h[L]=V,V.push(m)}S(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(l,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||h}function rg(l){this.Aa=0,this.i=[],this.j=new Oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hi("baseRetryDelayMs",5e3,l),this.cb=Hi("retryDelaySeedMs",1e4,l),this.Wa=Hi("forwardChannelMaxRetries",2,l),this.wa=Hi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Op(l&&l.concurrentRequestLimit),this.Da=new hE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rg.prototype,t.la=8,t.G=1,t.connect=function(l,h,m,x){pt(0),this.W=l,this.H=h||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=hg(this,null,this.W),Va(this)};function Vu(l){if(sg(l),l.G==3){var h=l.U++,m=An(l.I);if(xe(m,"SID",l.K),xe(m,"RID",h),xe(m,"TYPE","terminate"),Wi(l,m),h=new nr(l,l.j,h),h.L=2,h.v=Ra(An(m)),m=!1,c.navigator&&c.navigator.sendBeacon)try{m=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&c.Image&&(new Image().src=h.v,m=!0),m||(h.g=fg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ka(h)}dg(l)}function Ma(l){l.g&&(Fu(l),l.g.cancel(),l.g=null)}function sg(l){Ma(l),l.u&&(c.clearTimeout(l.u),l.u=null),Oa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Va(l){if(!Fp(l.h)&&!l.s){l.s=!0;var h=l.Ga;tt||J(),$||(tt(),$=!0),W.add(h,l),l.B=0}}function yE(l,h){return Up(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Vi(p(l.Ga,l,h),ug(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new nr(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),v(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=og(this,L,h),m=An(this.I),xe(m,"RID",l),xe(m,"CVER",22),this.D&&xe(m,"X-HTTP-Session-Id",this.D),Wi(this,m),V&&(this.O?h="headers="+encodeURIComponent(String(Jp(V)))+"&"+h:this.m&&Mu(m,this.m,V)),Lu(this.h,L),this.Ua&&xe(m,"TYPE","init"),this.P?(xe(m,"$req",h),xe(m,"SID","null"),L.T=!0,Cu(L,m,null)):Cu(L,m,h),this.G=2}}else this.G==3&&(l?ig(this,l):this.i.length==0||Fp(this.h)||ig(this))};function ig(l,h){var m;h?m=h.l:m=l.U++;const x=An(l.I);xe(x,"SID",l.K),xe(x,"RID",m),xe(x,"AID",l.T),Wi(l,x),l.m&&l.o&&Mu(x,l.m,l.o),m=new nr(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),h&&(l.i=h.D.concat(l.i)),h=og(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Lu(l.h,m),Cu(m,x,h)}function Wi(l,h){l.H&&O(l.H,function(m,x){xe(h,x,m)}),l.l&&Bp({},function(m,x){xe(h,x,m)})}function og(l,h,m){m=Math.min(l.i.length,m);var x=l.l?p(l.l.Na,l.l,l):null;e:{var L=l.i;let V=-1;for(;;){const B=["count="+m];V==-1?0<m?(V=L[0].g,B.push("ofs="+V)):V=0:B.push("ofs="+V);let ge=!0;for(let We=0;We<m;We++){let de=L[We].g;const rt=L[We].map;if(de-=V,0>de)V=Math.max(0,L[We].g-100),ge=!1;else try{fE(rt,B,"req"+de+"_")}catch{x&&x(rt)}}if(ge){x=B.join("&");break e}}}return l=l.i.splice(0,m),h.D=l,x}function ag(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;tt||J(),$||(tt(),$=!0),W.add(h,l),l.v=0}}function Ou(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Vi(p(l.Fa,l),ug(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Vi(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Ma(this),lg(this))};function Fu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function lg(l){l.g=new nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=An(l.qa);xe(h,"RID","rpc"),xe(h,"SID",l.K),xe(h,"AID",l.T),xe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&xe(h,"TO",l.ja),xe(h,"TYPE","xmlhttp"),Wi(l,h),l.m&&l.o&&Mu(h,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Ra(An(h)),m.m=null,m.P=!0,Lp(m,l)}t.Za=function(){this.C!=null&&(this.C=null,Ma(this),Ou(this),pt(19))};function Oa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function cg(l,h){var m=null;if(l.g==h){Oa(l),Fu(l),l.g=null;var x=2}else if(Du(l.h,h))m=h.D,qp(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;x=Sa(),mt(x,new Cp(x,m)),Va(l)}else ag(l);else if(L=h.s,L==3||L==0&&0<h.X||!(x==1&&yE(l,h)||x==2&&Ou(l)))switch(m&&0<m.length&&(h=l.h,h.i=h.i.concat(m)),L){case 1:Hr(l,5);break;case 4:Hr(l,10);break;case 3:Hr(l,6);break;default:Hr(l,2)}}}function ug(l,h){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*h}function Hr(l,h){if(l.j.info("Error code "+h),h==2){var m=p(l.fb,l),x=l.Xa;const L=!x;x=new Gr(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ca(x,"https"),Ra(x),L?uE(x.toString(),m):dE(x.toString(),m)}else pt(2);l.G=0,l.l&&l.l.sa(h),dg(l),sg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function dg(l){if(l.G=0,l.ka=[],l.l){const h=zp(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function hg(l,h,m){var x=m instanceof Gr?An(m):new Gr(m);if(x.g!="")h&&(x.g=h+"."+x.g),Pa(x,x.s);else{var L=c.location;x=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var V=new Gr(null);x&&Ca(V,x),h&&(V.g=h),L&&Pa(V,L),m&&(V.l=m),x=V}return m=l.D,h=l.ya,m&&h&&xe(x,m,h),xe(x,"VER",l.la),Wi(l,x),x}function fg(l,h,m){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ke(new Bi({eb:m})):new ke(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mg(){}t=mg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){nt.call(this),this.g=new rg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ps(this)}I(Pt,nt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Vu(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=Tu(l),l=m);h.i.push(new eE(h.Ya++,l)),h.G==3&&Va(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Vu(this.g),delete this.g,Pt.aa.N.call(this)};function pg(l){Su.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const m in h){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(pg,Su);function gg(){Au.call(this),this.status=1}I(gg,Au);function Ps(l){this.g=l}I(Ps,mg),Ps.prototype.ua=function(){mt(this.g,"a")},Ps.prototype.ta=function(l){mt(this.g,new pg(l))},Ps.prototype.sa=function(l){mt(this.g,new gg)},Ps.prototype.ra=function(){mt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,qw=function(){return new Fa},Uw=function(){return Sa()},Fw=Br,Wh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,Al=Aa,Pp.COMPLETE="complete",Ow=Pp,Sp.EventType=Li,Li.OPEN="a",Li.CLOSE="b",Li.ERROR="c",Li.MESSAGE="d",nt.prototype.listen=nt.prototype.K,co=Sp,Vw=Bi,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Mw=ke}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const hy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ji="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Kc("@firebase/firestore");function no(){return ps.logLevel}function Q(t,...e){if(ps.logLevel<=ie.DEBUG){const n=e.map(Am);ps.debug(`Firestore (${ji}): ${t}`,...n)}}function Yn(t,...e){if(ps.logLevel<=ie.ERROR){const n=e.map(Am);ps.error(`Firestore (${ji}): ${t}`,...n)}}function gi(t,...e){if(ps.logLevel<=ie.WARN){const n=e.map(Am);ps.warn(`Firestore (${ji}): ${t}`,...n)}}function Am(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${ji}) INTERNAL ASSERTION FAILED: `+t;throw Yn(e),new Error(e)}function ye(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class Wj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Qj{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new lt(e)}}class Kj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Kj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new Jj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Zj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function yi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new ze(0,0))}static max(){return new te(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Zo{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Zo{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(we.fromString(e))}static fromName(e){return new K(we.fromString(e).popFirst(5))}static empty(){return new K(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new we(e.slice()))}}function tk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Pr(s,K.empty(),e)}function nk(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(te.min(),K.empty(),-1)}static max(){return new Pr(te.max(),K.empty(),-1)}}function rk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ik{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==sk)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ok(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _a(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jm.oe=-1;function Zc(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function ak(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $w(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new my(this.data.getIterator())}getIteratorFrom(e){return new my(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class my{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new Xe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Gw("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const lk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=lk.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cm(t){const e=t.mapValue.fields.__previous_value__;return km(e)?Cm(e):e}function ea(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class ta{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ta("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?km(t)?4:dk(t)?9007199254740991:uk(t)?10:11:ee()}function Sn(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ea(t).isEqual(ea(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rr(s.timestampValue),c=Rr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gs(s.bytesValue).isEqual(gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pe(s.doubleValue),c=Pe(i.doubleValue);return a===c?gc(a)===gc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return yi(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(fy(a)!==fy(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Sn(a[u],c[u])))return!1;return!0}(t,e);default:return ee()}}function na(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function vi(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Pe(i.integerValue||i.doubleValue),u=Pe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return py(t.timestampValue,e.timestampValue);case 4:return py(ea(t),ea(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,a){const c=gs(i),u=gs(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=he(c[d],u[d]);if(f!==0)return f}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=he(Pe(i.latitude),Pe(a.latitude));return c!==0?c:he(Pe(i.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const g=i.fields||{},p=a.fields||{},w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,I=(u=p.value)===null||u===void 0?void 0:u.arrayValue,k=he(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:gy(w,I)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===al.mapValue&&a===al.mapValue)return 0;if(i===al.mapValue)return 1;if(a===al.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let g=0;g<u.length&&g<f.length;++g){const p=he(u[g],f[g]);if(p!==0)return p;const w=vi(c[u[g]],d[f[g]]);if(w!==0)return w}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function py(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Rr(t),r=Rr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function gy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=vi(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function xi(t){return Qh(t)}function Qh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Qh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Qh(n.fields[a])}`;return s+"}"}(t.mapValue):ee()}function yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kh(t){return!!t&&"integerValue"in t}function Pm(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function xy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jl(t){return!!t&&"mapValue"in t}function uk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=To(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];jl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tt(To(this.value))}}function Hw(t){const e=[];return Ss(t.fields,(n,r)=>{const s=new Ye([n]);if(jl(r)){const i=Hw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new dt(e,0,te.min(),te.min(),te.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,te.min(),te.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,te.min(),te.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=vi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function hk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ww=class{};class Ve extends Ww{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mk(e,n,r):n==="array-contains"?new yk(e,r):n==="in"?new vk(e,r):n==="not-in"?new xk(e,r):n==="array-contains-any"?new _k(e,r):new Ve(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pk(e,r):new gk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vi(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(vi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends Ww{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hn(e,n)}matches(e){return Qw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qw(t){return t.op==="and"}function Kw(t){return fk(t)&&Qw(t)}function fk(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Yh(t){if(t instanceof Ve)return t.field.canonicalString()+t.op.toString()+xi(t.value);if(Kw(t))return t.filters.map(e=>Yh(e)).join(",");{const e=t.filters.map(n=>Yh(n)).join(",");return`${t.op}(${e})`}}function Yw(t,e){return t instanceof Ve?function(r,s){return s instanceof Ve&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&Yw(a,s.filters[c]),!0):!1}(t,e):void ee()}function Jw(t){return t instanceof Ve?function(n){return`${n.field.canonicalString()} ${n.op} ${xi(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"}(t):"Filter"}class mk extends Ve{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class pk extends Ve{constructor(e,n){super(e,"in",n),this.keys=Xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gk extends Ve{constructor(e,n){super(e,"not-in",n),this.keys=Xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class yk extends Ve{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pm(n)&&na(n.arrayValue,this.value)}}class vk extends Ve{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&na(this.value.arrayValue,n)}}class xk extends Ve{constructor(e,n){super(e,"not-in",n)}matches(e){if(na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!na(this.value.arrayValue,n)}}class _k extends Ve{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>na(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function by(t,e=null,n=[],r=[],s=null,i=null,a=null){return new wk(t,e,n,r,s,i,a)}function Rm(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Yh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Zc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xi(r)).join(",")),e.ue=n}return e.ue}function Dm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function Jh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bk(t,e,n,r,s,i,a,c){return new ki(t,e,n,r,s,i,a,c)}function Lm(t){return new ki(t)}function Ey(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zw(t){return t.collectionGroup!==null}function Io(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Xe(Ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ra(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new ra(Ye.keyField(),r))}return e.ce}function Nn(t){const e=ne(t);return e.le||(e.le=Ek(e,Io(t))),e.le}function Ek(t,e){if(t.limitType==="F")return by(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ra(s.field,i)});const n=t.endAt?new yc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yc(t.startAt.position,t.startAt.inclusive):null;return by(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Xh(t,e){const n=t.filters.concat([e]);return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vc(t,e,n){return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function eu(t,e){return Dm(Nn(t),Nn(e))&&t.limitType===e.limitType}function eb(t){return`${Rm(Nn(t))}|lt:${t.limitType}`}function Ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jw(s)).join(", ")}]`),Zc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xi(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Io(r),s)||r.endAt&&!function(a,c,u){const d=_y(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Io(r),s))}(t,e)}function Nk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tb(t){return(e,n)=>{let r=!1;for(const s of Io(t)){const i=Tk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Tk(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?vi(u,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new je(K.comparator);function Jn(){return Ik}const nb=new je(K.comparator);function uo(...t){let e=nb;for(const n of t)e=e.insert(n.key,n);return e}function rb(t){let e=nb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ns(){return So()}function sb(){return So()}function So(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sk=new je(K.comparator),Ak=new Xe(K.comparator);function se(...t){let e=Ak;for(const n of t)e=e.add(n);return e}const jk=new Xe(he);function kk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function ib(t){return{integerValue:""+t}}function Ck(t,e){return ak(e)?ib(e):Mm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(){this._=void 0}}function Pk(t,e,n){return t instanceof sa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&km(i)&&(i=Cm(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof ia?ab(t,e):t instanceof oa?lb(t,e):function(s,i){const a=ob(s,i),c=Ny(a)+Ny(s.Pe);return Kh(a)&&Kh(s.Pe)?ib(c):Mm(s.serializer,c)}(t,e)}function Rk(t,e,n){return t instanceof ia?ab(t,e):t instanceof oa?lb(t,e):n}function ob(t,e){return t instanceof xc?function(r){return Kh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sa extends nu{}class ia extends nu{constructor(e){super(),this.elements=e}}function ab(t,e){const n=cb(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class oa extends nu{constructor(e){super(),this.elements=e}}function lb(t,e){let n=cb(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class xc extends nu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ny(t){return Pe(t.integerValue||t.doubleValue)}function cb(t){return Pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.field=e,this.transform=n}}function Lk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ia&&s instanceof ia||r instanceof oa&&s instanceof oa?yi(r.elements,s.elements,Sn):r instanceof xc&&s instanceof xc?Sn(r.Pe,s.Pe):r instanceof sa&&s instanceof sa}(t.transform,e.transform)}class Mk{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ru{}function ub(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vm(t.key,Qt.none()):new wa(t.key,t.data,Qt.none());{const n=t.data,r=Tt.empty();let s=new Xe(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Fr(t.key,r,new Lt(s.toArray()),Qt.none())}}function Vk(t,e,n){t instanceof wa?function(s,i,a){const c=s.value.clone(),u=Iy(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,i,a){if(!kl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Iy(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(db(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Ao(t,e,n,r){return t instanceof wa?function(i,a,c,u){if(!kl(i.precondition,a))return c;const d=i.value.clone(),f=Sy(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(i,a,c,u){if(!kl(i.precondition,a))return c;const d=Sy(i.fieldTransforms,u,a),f=a.data;return f.setAll(db(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,c){return kl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Ok(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ob(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function Ty(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&yi(r,s,(i,a)=>Lk(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wa extends ru{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends ru{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function db(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Iy(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Rk(a,c,n[s]))}return r}function Sy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Pk(i,a,e))}return r}class Vm extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fk extends ru{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Vk(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ao(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ao(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sb();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=ub(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&yi(this.mutations,e.mutations,(n,r)=>Ty(n,r))&&yi(this.baseMutations,e.baseMutations,(n,r)=>Ty(n,r))}}class Om{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return Sk}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Om(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,oe;function Bk(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function hb(t){if(t===void 0)return Yn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Le.OK:return F.OK;case Le.CANCELLED:return F.CANCELLED;case Le.UNKNOWN:return F.UNKNOWN;case Le.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Le.INTERNAL:return F.INTERNAL;case Le.UNAVAILABLE:return F.UNAVAILABLE;case Le.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Le.NOT_FOUND:return F.NOT_FOUND;case Le.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Le.ABORTED:return F.ABORTED;case Le.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Le.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(oe=Le||(Le={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new os([4294967295,4294967295],0);function Ay(t){const e=$k().encode(t),n=new Lw;return n.update(e),new Uint8Array(n.digest())}function jy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new os([n,r],0),new os([s,i],0)]}class Fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ho(`Invalid padding: ${n}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ho(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=os.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(os.fromNumber(r)));return s.compare(Gk)===1&&(s=new os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ay(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Fm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Ay(e),[r,s]=jy(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new su(te.min(),s,new je(he),Jn(),se())}}class ba{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ba(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class fb{constructor(e,n){this.targetId=e,this.me=n}}class mb{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ky{constructor(){this.fe=0,this.ge=Py(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new ba(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Py()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jn(),this.qe=Cy(),this.Qe=new je(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Jh(i))if(r===0){const a=new K(i.path);this.Ue(n,a,dt.newNoDocument(a,te.min()))}else ye(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=gs(r).toUint8Array()}catch(u){if(u instanceof Gw)return gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Fm(a,s,i)}catch(u){return gi(u instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&Jh(c.target)){const u=new K(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,dt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new su(e,n,this.Qe,this.ke,r);return this.ke=Jn(),this.qe=Cy(),this.Qe=new je(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ky,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cy(){return new je(K.comparator)}function Py(){return new je(K.comparator)}const Wk={asc:"ASCENDING",desc:"DESCENDING"},Qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Yk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Zh(t,e){return t.useProto3Json||Zc(e)?e:{value:e}}function _c(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jk(t,e){return _c(t,e.toTimestamp())}function Tn(t){return ye(!!t),te.fromTimestamp(function(n){const r=Rr(n);return new ze(r.seconds,r.nanos)}(t))}function Um(t,e){return ef(t,e).canonicalString()}function ef(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gb(t){const e=we.fromString(t);return ye(wb(e)),e}function tf(t,e){return Um(t.databaseId,e.path)}function wd(t,e){const n=gb(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(vb(n))}function yb(t,e){return Um(t.databaseId,e)}function Xk(t){const e=gb(t);return e.length===4?we.emptyPath():vb(e)}function nf(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vb(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ry(t,e,n){return{name:tf(t,e),fields:n.value.mapValue.fields}}function Zk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?F.UNKNOWN:hb(d.code);return new G(f,d.message||"")}(a);n=new mb(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wd(t,r.document.name),i=Tn(r.document.updateTime),a=r.document.createTime?Tn(r.document.createTime):te.min(),c=new Tt({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Cl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wd(t,r.document),i=r.readTime?Tn(r.readTime):te.min(),a=dt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Cl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wd(t,r.document),i=r.removedTargetIds||[];n=new Cl([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new zk(s,i),c=r.targetId;n=new fb(c,a)}}return n}function eC(t,e){let n;if(e instanceof wa)n={update:Ry(t,e.key,e.value)};else if(e instanceof Vm)n={delete:tf(t,e.key)};else if(e instanceof Fr)n={update:Ry(t,e.key,e.data),updateMask:cC(e.fieldMask)};else{if(!(e instanceof Fk))return ee();n={verify:tf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof sa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ia)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof oa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof xc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Jk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function tC(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Tn(s.updateTime):Tn(i);return a.isEqual(te.min())&&(a=Tn(i)),new Mk(a,s.transformResults||[])}(n,e))):[]}function nC(t,e){return{documents:[yb(t,e.path)]}}function rC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=yb(t,s);const i=function(d){if(d.length!==0)return _b(hn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:Ms(p.field),direction:oC(p.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Zh(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function sC(t){let e=Xk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const p=xb(g);return p instanceof hn&&Kw(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(p=>function(I){return new ra(Vs(I.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(g){let p;return p=typeof g=="object"?g.value:g,Zc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(g){const p=!!g.before,w=g.values||[];return new yc(w,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,w=g.values||[];return new yc(w,p)}(n.endAt)),bk(e,s,a,i,c,"F",u,d)}function iC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vs(n.unaryFilter.field);return Ve.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vs(n.unaryFilter.field);return Ve.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vs(n.unaryFilter.field);return Ve.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vs(n.unaryFilter.field);return Ve.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Ve.create(Vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>xb(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function oC(t){return Wk[t]}function aC(t){return Qk[t]}function lC(t){return Kk[t]}function Ms(t){return{fieldPath:t.canonicalString()}}function Vs(t){return Ye.fromServerFormat(t.fieldPath)}function _b(t){return t instanceof Ve?function(n){if(n.op==="=="){if(xy(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xy(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ms(n.field),op:aC(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(s=>_b(s));return r.length===1?r[0]:{compositeFilter:{op:lC(n.op),filters:r}}}(t):ee()}function cC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,i=te.min(),a=te.min(),c=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.ct=e}}function dC(t){const e=sC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.un=new fC}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Pr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class fC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _i(0)}static kn(){return new _i(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ao(r.mutation,s,Lt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=uo();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ns();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Jn();const a=So(),c=function(){return So()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Fr)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Ao(f.mutation,d,f.mutation.getFieldMask(),ze.now())):a.set(d.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var g;return c.set(d,new pC(f,(g=a.get(d))!==null&&g!==void 0?g:null))}),c))}recalculateAndSaveOverlays(e,n){const r=So();let s=new je((a,c)=>a-c),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Lt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const g=(s.get(c.batchId)||se()).add(u);s=s.insert(c.batchId,g)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,g=sb();f.forEach(p=>{if(!i.has(p)){const w=ub(n.get(p),r.get(p));w!==null&&g.set(p,w),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ns());let c=-1,u=i;return a.next(d=>U.forEach(d,(f,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,se())).next(f=>({batchId:c,changes:rb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=uo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=uo();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(g,p){return new ki(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,p)=>{a=a.insert(g,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,dt.newInvalidDocument(f)))});let c=uo();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Ao(f.mutation,d,Lt.empty(),ze.now()),tu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:dC(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.overlays=new je(K.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ns();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ns(),i=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ns(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new qk(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Tr=new Xe($e.Er),this.dr=new Xe($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new we([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new we([])),r=new $e(n,e),s=new $e(n,e+1);let i=se();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe($e.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Uk(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new $e(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(he);return n.forEach(s=>{const i=new $e(s,0),a=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const a=new $e(new K(i),0);let c=new Xe(he);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.Mr=e,this.docs=function(){return new je(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jn();const a=n.path,c=new K(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||rk(nk(f),r)<=0||(s.has(f.key)||tu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bC(this)}getSize(e){return U.resolve(this.size)}}class bC extends mC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.persistence=e,this.Nr=new Ci(n=>Rm(n),Dm),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qm,this.targetCount=0,this.kr=_i.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new _i(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jm(0),this.Kr=!1,this.Kr=!0,this.$r=new xC,this.referenceDelegate=e(this),this.Ur=new EC(this),this.indexManager=new hC,this.remoteDocumentCache=function(s){return new wC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uC(n),this.Gr=new yC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _C(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new TC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TC extends ik{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.Jr=new qm,this.Yr=null}static Zr(e){return new zm(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cI()?8:ok(ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new IC;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(no()<=ie.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(no()<=ie.DEBUG&&Q("QueryEngine","Query:",Ls(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(no()<=ie.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):U.resolve())}Yi(e,n){if(Ey(n))return U.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vc(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=se(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,vc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Ey(n)||s.isEqual(te.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?U.resolve(null):(no()<=ie.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ls(n)),this.rs(e,a,n,tk(s,-1)).next(c=>c))})}ts(e,n){let r=new Xe(tb(e));return n.forEach((s,i)=>{tu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return no()<=ie.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(he),this._s=new Ci(i=>Rm(i),Dm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jC(t,e,n,r){return new AC(t,e,n,r)}async function bb(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=se();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function kC(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const g=d.batch,p=g.keys();let w=U.resolve();return p.forEach(I=>{w=w.next(()=>f.getEntry(u,I)).next(k=>{const P=d.docVersions.get(I);ye(P!==null),k.version.compareTo(P)<0&&(g.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Eb(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CC(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,g)=>{const p=s.get(g);if(!p)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let w=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(et.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(g,w),function(k,P,b){return k.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,w,f)&&c.push(n.Ur.updateTargetData(i,w))});let u=Jn(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(PC(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function PC(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function RC(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DC(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function rf(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!_a(a))throw a;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Dy(t,e,n){const r=ne(t);let s=te.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const g=ne(u),p=g._s.get(f);return p!==void 0?U.resolve(g.os.get(p)):g.Ur.getTargetData(d,f)}(r,a,Nn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:se())).next(c=>(LC(r,Nk(e),c),{documents:c,Ts:i})))}function LC(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ly{constructor(){this.activeTargetIds=kk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MC{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function bd(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class UC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=bd(),u=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(Q("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw gi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ji}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=OC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=bd();return new Promise((a,c)=>{const u=new Mw;u.setWithCredentials(!0),u.listenOnce(Ow.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Al.NO_ERROR:const f=u.getResponseJson();Q(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Al.TIMEOUT:Q(at,`RPC '${e}' ${i} timed out`),c(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:const g=u.getStatus();if(Q(at,`RPC '${e}' ${i} failed with status:`,g,"response text:",u.getResponseText()),g>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const I=function(P){const b=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(b)>=0?b:F.UNKNOWN}(w.status);c(new G(I,w.message))}else c(new G(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{Q(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Q(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=bd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qw(),c=Uw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new Vw({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(at,`Creating RPC '${e}' stream ${s}: ${f}`,u);const g=a.createWebChannel(f,u);let p=!1,w=!1;const I=new FC({Io:P=>{w?Q(at,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(Q(at,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),Q(at,`RPC '${e}' stream ${s} sending:`,P),g.send(P))},To:()=>g.close()}),k=(P,b,E)=>{P.listen(b,N=>{try{E(N)}catch(M){setTimeout(()=>{throw M},0)}})};return k(g,co.EventType.OPEN,()=>{w||(Q(at,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),k(g,co.EventType.CLOSE,()=>{w||(w=!0,Q(at,`RPC '${e}' stream ${s} transport closed`),I.So())}),k(g,co.EventType.ERROR,P=>{w||(w=!0,gi(at,`RPC '${e}' stream ${s} transport errored:`,P),I.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),k(g,co.EventType.MESSAGE,P=>{var b;if(!w){const E=P.data[0];ye(!!E);const N=E,M=N.error||((b=N[0])===null||b===void 0?void 0:b.error);if(M){Q(at,`RPC '${e}' stream ${s} received error:`,M);const D=M.status;let O=function(_){const v=Le[_];if(v!==void 0)return hb(v)}(D),S=M.message;O===void 0&&(O=F.INTERNAL,S="Unknown error status: "+D+" with message "+M.message),w=!0,I.So(new G(O,S)),g.close()}else Q(at,`RPC '${e}' stream ${s} received:`,E),I.bo(E)}}),k(c,Fw.STAT_EVENT,P=>{P.stat===Wh.PROXY?Q(at,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Wh.NOPROXY&&Q(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function Ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return new Yk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qC extends Tb{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Zk(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Tn(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=nf(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Jh(u)?{documents:nC(i,u)}:{query:rC(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=pb(i,a.resumeToken);const d=Zh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(te.min())>0){c.readTime=_c(i,a.snapshotVersion.toTimestamp());const d=Zh(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=iC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=nf(this.serializer),n.removeTarget=e,this.a_(n)}}class zC extends Tb{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tC(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,ef(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,ef(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $C{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yn(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{As(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ne(u);d.L_.add(4),await Ea(d),d.q_.set("Unknown"),d.L_.delete(4),await ou(d)}(this))})}),this.q_=new $C(r,s)}}async function ou(t){if(As(t))for(const e of t.B_)await e(!0)}async function Ea(t){for(const e of t.B_)await e(!1)}function Ib(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Wm(n)?Hm(n):Pi(n).r_()&&Gm(n,e))}function $m(t,e){const n=ne(t),r=Pi(n);n.N_.delete(e),r.r_()&&Sb(n,e),n.N_.size===0&&(r.r_()?r.o_():As(n)&&n.q_.set("Unknown"))}function Gm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pi(t).A_(e)}function Sb(t,e){t.Q_.xe(e),Pi(t).R_(e)}function Hm(t){t.Q_=new Hk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pi(t).start(),t.q_.v_()}function Wm(t){return As(t)&&!Pi(t).n_()&&t.N_.size>0}function As(t){return ne(t).L_.size===0}function Ab(t){t.Q_=void 0}async function HC(t){t.q_.set("Online")}async function WC(t){t.N_.forEach((e,n)=>{Gm(t,e)})}async function QC(t,e){Ab(t),Wm(t)?(t.q_.M_(e),Hm(t)):t.q_.set("Unknown")}async function KC(t,e,n){if(t.q_.set("Online"),e instanceof mb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wc(t,r)}else if(e instanceof Cl?t.Q_.Ke(e):e instanceof fb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await Eb(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),Sb(i,u);const g=new yr(f.target,u,d,f.sequenceNumber);Gm(i,g)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await wc(t,r)}}async function wc(t,e,n){if(!_a(e))throw e;t.L_.add(1),await Ea(t),t.q_.set("Offline"),n||(n=()=>Eb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ou(t)})}function jb(t,e){return e().catch(n=>wc(t,n,e))}async function au(t){const e=ne(t),n=Dr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YC(e);)try{const s=await RC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,JC(e,s)}catch(s){await wc(e,s)}kb(e)&&Cb(e)}function YC(t){return As(t)&&t.O_.length<10}function JC(t,e){t.O_.push(e);const n=Dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kb(t){return As(t)&&!Dr(t).n_()&&t.O_.length>0}function Cb(t){Dr(t).start()}async function XC(t){Dr(t).p_()}async function ZC(t){const e=Dr(t);for(const n of t.O_)e.m_(n.mutations)}async function eP(t,e,n){const r=t.O_.shift(),s=Om.from(r,e,n);await jb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await au(t)}async function tP(t,e){e&&Dr(t).V_&&await async function(r,s){if(function(a){return Bk(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();Dr(r).s_(),await jb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await au(r)}}(t,e),kb(t)&&Cb(t)}async function Vy(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=As(n);n.L_.add(3),await Ea(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ou(n)}async function nP(t,e){const n=ne(t);e?(n.L_.delete(2),await ou(n)):e||(n.L_.add(2),await Ea(n),n.q_.set("Unknown"))}function Pi(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new qC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:HC.bind(null,t),Ro:WC.bind(null,t),mo:QC.bind(null,t),d_:KC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Wm(t)?Hm(t):t.q_.set("Unknown")):(await t.K_.stop(),Ab(t))})),t.K_}function Dr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new zC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XC.bind(null,t),mo:tP.bind(null,t),f_:ZC.bind(null,t),g_:eP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await au(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Qm(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),_a(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=uo(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new oi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.W_=new je(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wi{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new wi(e,n,oi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sP{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=Fy(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function Fy(){return new Ci(t=>eb(t),eu)}async function Pb(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new rP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Km(a,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Ym(n)}async function Rb(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iP(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Ym(n)}function oP(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Ym(t){t.Y_.forEach(e=>{e.next()})}var sf,Uy;(Uy=sf||(sf={})).ea="default",Uy.Cache="cache";class Db{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e){this.key=e}}class Mb{constructor(e){this.key=e}}class aP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=tb(e),this.Ra=new oi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Oy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const p=s.get(f),w=tu(this.query,g)?g:null,I=!!p&&this.mutatedKeys.has(p.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;p&&w?p.data.isEqual(w.data)?I!==k&&(r.track({type:3,doc:w}),P=!0):this.ga(p,w)||(r.track({type:2,doc:w}),P=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!p&&w?(r.track({type:0,doc:w}),P=!0):p&&!w&&(r.track({type:1,doc:p}),P=!0,(u||d)&&(c=!0)),P&&(w?(a=a.add(w),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,g)=>function(w,I){const k=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return k(w)-k(I)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new wi(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Mb(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Lb(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cP{constructor(e){this.key=e,this.va=!1}}class uP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ci(c=>eb(c),eu),this.Ma=new Map,this.xa=new Set,this.Oa=new je(K.comparator),this.Na=new Map,this.La=new qm,this.Ba={},this.ka=new Map,this.qa=_i.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dP(t,e,n=!0){const r=zb(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Vb(r,e,n,!0),s}async function hP(t,e){const n=zb(t);await Vb(n,e,!0,!1)}async function Vb(t,e,n,r){const s=await DC(t.localStore,Nn(e)),i=s.targetId,a=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let c;return r&&(c=await fP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Ib(t.remoteStore,s),c}async function fP(t,e,n,r,s){t.Ka=(g,p,w)=>async function(k,P,b,E){let N=P.view.ma(b);N.ns&&(N=await Dy(k.localStore,P.query,!1).then(({documents:S})=>P.view.ma(S,N)));const M=E&&E.targetChanges.get(P.targetId),D=E&&E.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(N,k.isPrimaryClient,M,D);return zy(k,P.targetId,O.wa),O.snapshot}(t,g,p,w);const i=await Dy(t.localStore,e,!0),a=new aP(e,i.Ts),c=a.ma(i.documents),u=ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);zy(t,n,d.wa);const f=new lP(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function mP(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!eu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$m(r.remoteStore,s.targetId),of(r,s.targetId)}).catch(xa)):(of(r,s.targetId),await rf(r.localStore,s.targetId,!0))}async function pP(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$m(n.remoteStore,r.targetId))}async function gP(t,e,n){const r=EP(t);try{const s=await function(a,c){const u=ne(a),d=ze.now(),f=c.reduce((w,I)=>w.add(I.key),se());let g,p;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=Jn(),k=se();return u.cs.getEntries(w,f).next(P=>{I=P,I.forEach((b,E)=>{E.isValidDocument()||(k=k.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,I)).next(P=>{g=P;const b=[];for(const E of c){const N=Ok(E,g.get(E.key).overlayedDocument);N!=null&&b.push(new Fr(E.key,N,Hw(N.value.mapValue),Qt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,b,c)}).next(P=>{p=P;const b=P.applyToLocalDocumentSet(g,k);return u.documentOverlayCache.saveOverlays(w,P.batchId,b)})}).then(()=>({batchId:p.batchId,changes:rb(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new je(he)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Na(r,s.changes),await au(r.remoteStore)}catch(s){const i=Km(s,"Failed to persist write");n.reject(i)}}async function Ob(t,e){const n=ne(t);try{const r=await CC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ye(a.va):s.removedDocuments.size>0&&(ye(a.va),a.va=!1))}),await Na(n,r,e)}catch(r){await xa(r)}}function qy(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ne(a);u.onlineState=c;let d=!1;u.queries.forEach((f,g)=>{for(const p of g.j_)p.Z_(c)&&(d=!0)}),d&&Ym(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yP(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new je(K.comparator);a=a.insert(i,dt.newNoDocument(i,te.min()));const c=se().add(i),u=new su(te.min(),new Map,new je(he),a,c);await Ob(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Jm(r)}else await rf(r.localStore,e,!1).then(()=>of(r,e,n)).catch(xa)}async function vP(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await kC(n.localStore,e);Ub(n,r,null),Fb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Na(n,s)}catch(s){await xa(s)}}async function xP(t,e,n){const r=ne(t);try{const s=await function(a,c){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(g=>(ye(g!==null),f=g.keys(),u.mutationQueue.removeMutationBatch(d,g))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Ub(r,e,n),Fb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Na(r,s)}catch(s){await xa(s)}}function Fb(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ub(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function of(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||qb(t,r)})}function qb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&($m(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Jm(t))}function zy(t,e,n){for(const r of n)r instanceof Lb?(t.La.addReference(r.key,e),_P(t,r)):r instanceof Mb?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||qb(t,r.key)):ee()}function _P(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Jm(t))}function Jm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(we.fromString(e)),r=t.qa.next();t.Na.set(r,new cP(n)),t.Oa=t.Oa.insert(n,r),Ib(t.remoteStore,new yr(Nn(Lm(n.path)),r,"TargetPurposeLimboResolution",jm.oe))}}async function Na(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,g?"current":"not-current")}if(d){s.push(d);const g=Bm.Wi(u.targetId,d);i.push(g)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,p=>U.forEach(p.$i,w=>f.persistence.referenceDelegate.addReference(g,p.targetId,w)).next(()=>U.forEach(p.Ui,w=>f.persistence.referenceDelegate.removeReference(g,p.targetId,w)))))}catch(g){if(!_a(g))throw g;Q("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const w=f.os.get(p),I=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(I);f.os=f.os.insert(p,k)}}}(r.localStore,i))}async function wP(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await bb(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Na(n,r.hs)}}function bP(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function zb(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yP.bind(null,e),e.Ca.d_=iP.bind(null,e.eventManager),e.Ca.$a=oP.bind(null,e.eventManager),e}function EP(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class By{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=iu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return jC(this.persistence,new SC,e.initialUser,this.serializer)}createPersistence(e){return new NC(zm.Zr,this.serializer)}createSharedClientState(e){return new MC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wP.bind(null,this.syncEngine),await nP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sP}()}createDatastore(e){const n=iu(e.databaseInfo.databaseId),r=function(i){return new UC(i)}(e.databaseInfo);return function(i,a,c,u){return new BC(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new GC(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>qy(this.syncEngine,n,0),function(){return My.D()?new My:new VC}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const g=new uP(s,i,a,c,u,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ea(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Q("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Q("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Nd(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SP(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Vy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Vy(e.remoteStore,s)),t._onlineComponents=e}function IP(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function SP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Nd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!IP(n))throw n;gi("Error using user provided cache. Falling back to memory cache: "+n),await Nd(t,new By)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Nd(t,new By);return t._offlineComponents}async function $b(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await $y(t,new NP))),t._onlineComponents}function AP(t){return $b(t).then(e=>e.syncEngine)}async function Gb(t){const e=await $b(t),n=e.eventManager;return n.onListen=dP.bind(null,e.syncEngine),n.onUnlisten=mP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pP.bind(null,e.syncEngine),n}function jP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new Bb({next:p=>{a.enqueueAndForget(()=>Rb(i,g));const w=p.docs.has(c);!w&&p.fromCache?d.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&u&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new Db(Lm(c.path),f,{includeMetadataChanges:!0,_a:!0});return Pb(i,g)}(await Gb(t),t.asyncQueue,e,n,r)),r.promise}function kP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new Bb({next:p=>{a.enqueueAndForget(()=>Rb(i,g)),p.fromCache&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new Db(c,f,{includeMetadataChanges:!0,_a:!0});return Pb(i,g)}(await Gb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CP(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hy(t){if(!K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wy(t){if(K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=lu(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function PP(t,e){if(e<=0)throw new G(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hj;switch(r.type){case"firstParty":return new Yj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Gy.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Gy.delete(n),r.terminate())}(this),Promise.resolve()}}function RP(t,e,n,r={}){var s;const i=(t=fn(t,cu))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=lt.MOCK_USER;else{c=sI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(d)}t._authCredentials=new Wj(new zw(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class jr extends Ur{constructor(e,n,r){super(e,n,Lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new K(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=Ne(t),Wb("collection","path",e),t instanceof cu){const r=we.fromString(e,...n);return Wy(r),new jr(t,null,r)}{if(!(t instanceof xt||t instanceof jr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Wy(r),new jr(t.firestore,null,r)}}function yt(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=Bw.newId()),Wb("doc","path",e),t instanceof cu){const r=we.fromString(e,...n);return Hy(r),new xt(t,null,new K(r))}{if(!(t instanceof xt||t instanceof jr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Hy(r),new xt(t.firestore,t instanceof jr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Nb(this,"async_queue_retry"),this.Eu=()=>{const n=Ed();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Ed();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Bn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!_a(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Yn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Qm.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&ee()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class js extends cu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new DP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Qb(this),this._firestoreClient.terminate()}}function LP(t,e){const n=typeof t=="object"?t:gm(),r=typeof t=="string"?t:"(default)",s=Ts(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nI("firestore");i&&RP(s,...i)}return s}function Xm(t){return t._firestoreClient||Qb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Qb(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new ck(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Hb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new TP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bi(et.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bi(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=/^__.*__$/;class VP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new wa(e,this.data,n,this.fieldTransforms)}}class Kb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Yb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class tp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new tp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return bc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Yb(this.wu)&&MP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class OP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||iu(e)}Nu(e,n,r,s=!1){return new tp({wu:e,methodName:n,Ou:r,path:Ye.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hu(t){const e=t._freezeSettings(),n=iu(t._databaseId);return new OP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Jb(t,e,n,r,s,i={}){const a=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);rp("Data must be an object, but it was:",a,r);const c=Xb(r,a);let u,d;if(i.merge)u=new Lt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const p=af(e,g,n);if(!a.contains(p))throw new G(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);e1(f,p)||f.push(p)}u=new Lt(f),d=a.fieldTransforms.filter(g=>u.covers(g.field))}else u=null,d=a.fieldTransforms;return new VP(new Tt(c),u,d)}class fu extends du{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fu}}class np extends du{_toFieldTransform(e){return new Dk(e.path,new sa)}isEqual(e){return e instanceof np}}function FP(t,e,n,r){const s=t.Nu(1,e,n);rp("Data must be an object, but it was:",s,r);const i=[],a=Tt.empty();Ss(r,(u,d)=>{const f=sp(e,u,n);d=Ne(d);const g=s.Cu(f);if(d instanceof fu)i.push(f);else{const p=Ta(d,g);p!=null&&(i.push(f),a.set(f,p))}});const c=new Lt(i);return new Kb(a,c,s.fieldTransforms)}function UP(t,e,n,r,s,i){const a=t.Nu(1,e,n),c=[af(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)c.push(af(e,i[p])),u.push(i[p+1]);const d=[],f=Tt.empty();for(let p=c.length-1;p>=0;--p)if(!e1(d,c[p])){const w=c[p];let I=u[p];I=Ne(I);const k=a.Cu(w);if(I instanceof fu)d.push(w);else{const P=Ta(I,k);P!=null&&(d.push(w),f.set(w,P))}}const g=new Lt(d);return new Kb(f,g,a.fieldTransforms)}function qP(t,e,n,r=!1){return Ta(n,t.Nu(r?4:3,e))}function Ta(t,e){if(Zb(t=Ne(t)))return rp("Unsupported field value:",e,t),Xb(t,e);if(t instanceof du)return function(r,s){if(!Yb(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Ta(c,s.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ck(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:_c(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_c(s.serializer,i)}}if(r instanceof Zm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bi)return{bytesValue:pb(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Um(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ep)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Mm(c.serializer,u)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${lu(r)}`)}(t,e)}function Xb(t,e){const n={};return $w(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(r,s)=>{const i=Ta(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Zb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Zm||t instanceof bi||t instanceof xt||t instanceof du||t instanceof ep)}function rp(t,e,n){if(!Zb(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=lu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function af(t,e,n){if((e=Ne(e))instanceof uu)return e._internalPath;if(typeof e=="string")return sp(t,e);throw bc("Field path arguments must be of type string or ",t,!1,void 0,n)}const zP=new RegExp("[~\\*/\\[\\]]");function sp(t,e,n){if(e.search(zP)>=0)throw bc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uu(...e.split("."))._internalPath}catch{throw bc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function e1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BP extends t1{data(){return super.data()}}function mu(t,e){return typeof e=="string"?sp(t,e):e instanceof uu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ip{}class op extends ip{}function fo(t,e,...n){let r=[];e instanceof ip&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof ap).length,c=i.filter(u=>u instanceof pu).length;if(a>1||a>0&&c>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class pu extends op{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pu(e,n,r)}_apply(e){const n=this._parse(e);return r1(e._query,n),new Ur(e.firestore,e.converter,Xh(e._query,n))}_parse(e){const n=hu(e.firestore);return function(i,a,c,u,d,f,g){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Yy(g,f);const w=[];for(const I of g)w.push(Ky(u,i,I));p={arrayValue:{values:w}}}else p=Ky(u,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Yy(g,f),p=qP(c,a,g,f==="in"||f==="not-in");return Ve.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GP(t,e,n){const r=e,s=mu("where",t);return pu._create(s,r,n)}class ap extends ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ap(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)r1(a,u),a=Xh(a,u)}(e._query,n),new Ur(e.firestore,e.converter,Xh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lp extends op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ra(i,a)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ki(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function n1(t,e="asc"){const n=e,r=mu("orderBy",t);return lp._create(r,n)}class cp extends op{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new cp(e,n,r)}_apply(e){return new Ur(e.firestore,e.converter,vc(e._query,this._limit,this._limitType))}}function lf(t){return PP("limit",t),cp._create("limit",t,"F")}function Ky(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!K.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yy(t,new K(r))}if(n instanceof xt)return yy(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lu(n)}.`)}function Yy(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function r1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HP{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Pe(a.doubleValue));return new ep(i)}convertGeoPoint(e){return new Zm(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ea(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);ye(wb(r));const s=new ta(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class i1 extends t1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pl extends i1{data(e={}){return super.data(e)}}class WP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new mo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pl(this._firestore,this._userDataWriter,r.key,r,new mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new mo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Pl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new mo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:QP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){t=fn(t,xt);const e=fn(t.firestore,js);return jP(Xm(e),t._key).then(n=>KP(e,t,n))}class o1 extends HP{constructor(e){super(),this.firestore=e}convertBytes(e){return new bi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function xn(t){t=fn(t,Ur);const e=fn(t.firestore,js),n=Xm(e),r=new o1(e);return $P(t._query),kP(n,t._query).then(s=>new WP(e,r,t,s))}function Jy(t,e,n){t=fn(t,xt);const r=fn(t.firestore,js),s=s1(t.converter,e);return gu(r,[Jb(hu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function ai(t,e,n,...r){t=fn(t,xt);const s=fn(t.firestore,js),i=hu(s);let a;return a=typeof(e=Ne(e))=="string"||e instanceof uu?UP(i,"updateDoc",t._key,e,n,r):FP(i,"updateDoc",t._key,e),gu(s,[a.toMutation(t._key,Qt.exists(!0))])}function Rl(t){return gu(fn(t.firestore,js),[new Vm(t._key,Qt.none())])}function Dn(t,e){const n=fn(t.firestore,js),r=yt(t),s=s1(t.converter,e);return gu(n,[Jb(hu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function gu(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>gP(await AP(r),s,i)),i.promise}(Xm(t),e)}function KP(t,e,n){const r=n.docs.get(e._key),s=new o1(t);return new i1(t,s,e._key,r,new mo(n.hasPendingWrites,n.fromCache),e.converter)}function Td(){return new np("serverTimestamp")}(function(e,n=!0){(function(s){ji=s})(Ai),In(new dn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new js(new Qj(r.getProvider("auth-internal")),new Xj(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Wt(hy,"4.7.0",e),Wt(hy,"4.7.0","esm2017")})();const a1="@firebase/installations",dp="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=1e4,c1=`w:${dp}`,u1="FIS_v2",YP="https://firebaseinstallations.googleapis.com/v1",JP=60*60*1e3,XP="installations",ZP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vs=new Ns(XP,ZP,eR);function d1(t){return t instanceof pn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1({projectId:t}){return`${YP}/projects/${t}/installations`}function f1(t){return{token:t.token,requestStatus:2,expiresIn:nR(t.expiresIn),creationTime:Date.now()}}async function m1(t,e){const r=(await e.json()).error;return vs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function p1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function tR(t,{refreshToken:e}){const n=p1(t);return n.append("Authorization",rR(e)),n}async function g1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nR(t){return Number(t.replace("s","000"))}function rR(t){return`${u1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=h1(t),s=p1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:u1,appId:t.appId,sdkVersion:c1},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await g1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:f1(d.authToken)}}else throw await m1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^[cdef][\w-]{21}$/,cf="";function aR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lR(t);return oR.test(n)?n:cf}catch{return cf}}function lR(t){return iR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Map;function x1(t,e){const n=yu(t);_1(n,e),cR(n,e)}function _1(t,e){const n=v1.get(t);if(n)for(const r of n)r(e)}function cR(t,e){const n=uR();n&&n.postMessage({key:t,fid:e}),dR()}let rs=null;function uR(){return!rs&&"BroadcastChannel"in self&&(rs=new BroadcastChannel("[Firebase] FID Change"),rs.onmessage=t=>{_1(t.data.key,t.data.fid)}),rs}function dR(){v1.size===0&&rs&&(rs.close(),rs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebase-installations-database",fR=1,xs="firebase-installations-store";let Id=null;function hp(){return Id||(Id=Q_(hR,fR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xs)}}})),Id}async function Ec(t,e){const n=yu(t),s=(await hp()).transaction(xs,"readwrite"),i=s.objectStore(xs),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&x1(t,e.fid),e}async function w1(t){const e=yu(t),r=(await hp()).transaction(xs,"readwrite");await r.objectStore(xs).delete(e),await r.done}async function vu(t,e){const n=yu(t),s=(await hp()).transaction(xs,"readwrite"),i=s.objectStore(xs),a=await i.get(n),c=e(a);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&x1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(t){let e;const n=await vu(t.appConfig,r=>{const s=mR(r),i=pR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===cf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mR(t){const e=t||{fid:aR(),registrationStatus:0};return b1(e)}function pR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=gR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yR(t)}:{installationEntry:e}}async function gR(t,e){try{const n=await sR(t,e);return Ec(t.appConfig,n)}catch(n){throw d1(n)&&n.customData.serverCode===409?await w1(t.appConfig):await Ec(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function yR(t){let e=await Xy(t.appConfig);for(;e.registrationStatus===1;)await y1(100),e=await Xy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await fp(t);return r||n}return e}function Xy(t){return vu(t,e=>{if(!e)throw vs.create("installation-not-found");return b1(e)})}function b1(t){return vR(t)?{fid:t.fid,registrationStatus:0}:t}function vR(t){return t.registrationStatus===1&&t.registrationTime+l1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR({appConfig:t,heartbeatServiceProvider:e},n){const r=_R(t,n),s=tR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:c1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await g1(()=>fetch(r,c));if(u.ok){const d=await u.json();return f1(d)}else throw await m1("Generate Auth Token",u)}function _R(t,{fid:e}){return`${h1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(t,e=!1){let n;const r=await vu(t.appConfig,i=>{if(!E1(i))throw vs.create("not-registered");const a=i.authToken;if(!e&&ER(a))return i;if(a.requestStatus===1)return n=wR(t,e),i;{if(!navigator.onLine)throw vs.create("app-offline");const c=TR(i);return n=bR(t,c),c}});return n?await n:r.authToken}async function wR(t,e){let n=await Zy(t.appConfig);for(;n.authToken.requestStatus===1;)await y1(100),n=await Zy(t.appConfig);const r=n.authToken;return r.requestStatus===0?mp(t,e):r}function Zy(t){return vu(t,e=>{if(!E1(e))throw vs.create("not-registered");const n=e.authToken;return IR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function bR(t,e){try{const n=await xR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ec(t.appConfig,r),n}catch(n){if(d1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await w1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ec(t.appConfig,r)}throw n}}function E1(t){return t!==void 0&&t.registrationStatus===2}function ER(t){return t.requestStatus===2&&!NR(t)}function NR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JP}function TR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function IR(t){return t.requestStatus===1&&t.requestTime+l1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t){const e=t,{installationEntry:n,registrationPromise:r}=await fp(e);return r?r.catch(console.error):mp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e=!1){const n=t;return await jR(n),(await mp(n,e)).token}async function jR(t){const{registrationPromise:e}=await fp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){if(!t||!t.options)throw Sd("App Configuration");if(!t.name)throw Sd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Sd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Sd(t){return vs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="installations",CR="installations-internal",PR=t=>{const e=t.getProvider("app").getImmediate(),n=kR(e),r=Ts(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},RR=t=>{const e=t.getProvider("app").getImmediate(),n=Ts(e,N1).getImmediate();return{getId:()=>SR(n),getToken:s=>AR(n,s)}};function DR(){In(new dn(N1,PR,"PUBLIC")),In(new dn(CR,RR,"PRIVATE"))}DR();Wt(a1,dp);Wt(a1,dp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="analytics",LR="firebase_id",MR="origin",VR=60*1e3,OR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=new Kc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vt=new Ns("analytics","Analytics",FR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){if(!t.startsWith(pp)){const e=Vt.create("invalid-gtag-resource",{gtagURL:t});return kt.warn(e.message),""}return t}function T1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function qR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zR(t,e){const n=qR("firebase-js-sdk-policy",{createScriptURL:UR}),r=document.createElement("script"),s=`${pp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function BR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function $R(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await T1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){kt.error(c)}t("config",s,i)}async function GR(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await T1(n);for(const u of a){const d=c.find(g=>g.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){kt.error(i)}}function HR(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[c,u]=a;await GR(t,e,n,c,u)}else if(i==="config"){const[c,u]=a;await $R(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=a;t("consent",c,u)}else if(i==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(i==="set"){const[c]=a;t("set",c)}else t(i,...a)}catch(c){kt.error(c)}}return s}function WR(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=HR(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(pp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=30,YR=1e3;class JR{constructor(e={},n=YR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const I1=new JR;function XR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZR(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:XR(r)},i=OR.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Vt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function e4(t,e=I1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Vt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Vt.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new r4;return setTimeout(async()=>{c.abort()},VR),S1({appId:r,apiKey:s,measurementId:i},a,c,e)}async function S1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=I1){var i;const{appId:a,measurementId:c}=t;try{await t4(r,e)}catch(u){if(c)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await ZR(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!n4(d)){if(s.deleteThrottleMetadata(a),c)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?M0(n,s.intervalMillis,KR):M0(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,g),kt.debug(`Calling attemptFetch again in ${f} millis`),S1(t,g,r,s)}}function t4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Vt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function n4(t){if(!(t instanceof pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class r4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function s4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(){if(fm())try{await mm()}catch(t){return kt.warn(Vt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return kt.warn(Vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function o4(t,e,n,r,s,i,a){var c;const u=e4(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>kt.error(w)),e.push(u);const d=i4().then(w=>{if(w)return r.getId()}),[f,g]=await Promise.all([u,d]);QR(i)||zR(i,f.measurementId),s("js",new Date);const p=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return p[MR]="firebase",p.update=!0,g!=null&&(p[LR]=g),s("config",f.measurementId,p),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.app=e}_delete(){return delete jo[this.app.options.appId],Promise.resolve()}}let jo={},ev=[];const tv={};let Ad="dataLayer",l4="gtag",nv,A1,rv=!1;function c4(){const t=[];if(hm()&&t.push("This is a browser extension environment."),G_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Vt.create("invalid-analytics-context",{errorInfo:e});kt.warn(n.message)}}function u4(t,e,n){c4();const r=t.options.appId;if(!r)throw Vt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vt.create("no-api-key");if(jo[r]!=null)throw Vt.create("already-exists",{id:r});if(!rv){BR(Ad);const{wrappedGtag:i,gtagCore:a}=WR(jo,ev,tv,Ad,l4);A1=i,nv=a,rv=!0}return jo[r]=o4(t,ev,tv,e,nv,Ad,n),new a4(t)}function d4(t=gm()){t=Ne(t);const e=Ts(t,Nc);return e.isInitialized()?e.getImmediate():h4(t)}function h4(t,e={}){const n=Ts(t,Nc);if(n.isInitialized()){const s=n.getImmediate();if(Yo(e,n.getOptions()))return s;throw Vt.create("already-initialized")}return n.initialize({options:e})}async function f4(){if(hm()||!G_()||!fm())return!1;try{return await mm()}catch{return!1}}function m4(t,e,n,r){t=Ne(t),s4(A1,jo[t.app.options.appId],e,n,r).catch(s=>kt.error(s))}const sv="@firebase/analytics",iv="0.10.7";function p4(){In(new dn(Nc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return u4(r,s,n)},"PUBLIC")),In(new dn("analytics-internal",t,"PRIVATE")),Wt(sv,iv),Wt(sv,iv,"esm2017");function t(e){try{const n=e.getProvider(Nc).getImmediate();return{logEvent:(r,s,i)=>m4(n,r,s,i)}}catch(n){throw Vt.create("interop-component-reg-failed",{reason:n})}}}p4();const g4={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},gp=K_(g4),ae=LP(gp),ct=zj(gp);typeof window<"u"&&f4().then(t=>{t&&d4(gp)});const j1=C.createContext(void 0),bt=()=>{const t=C.useContext(j1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},jd=async t=>{var r,s;if(!t)return null;const n=(await up(yt(ae,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},y4=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{const p=kA(ct,async w=>{if(w){const I=await jd(w);n(I)}else n(null);s(!1)});return()=>p()},[]);const g={currentUser:e,loading:r,register:async(p,w,I)=>{try{const k=await bw(ct,p,w),{user:P}=k;await Ew(P,{displayName:I}),await ty(P);const b={uid:P.uid,email:P.email,displayName:I,emailVerified:P.emailVerified,isAdmin:!1,createdAt:Td(),updatedAt:Td()};await Jy(yt(ae,"users",P.uid),b);const E=await jd(P);return n(E),P}catch(k){throw console.error("Erreur lors de l'inscription:",k),k}},login:async(p,w)=>{try{const I=await Gh(ct,p,w),k=await jd(I.user);return n(k),k}catch(I){throw console.error("Erreur de connexion:",I),I}},loginWithGoogle:async()=>{const p=new Rn;let w=null;try{w=(await JA(ct,p)).user,console.log("[Google] Utilisateur connecté:",w);const k=yt(ae,"users",w.uid),P=await up(k);console.log("[Google] Document utilisateur existe:",P.exists()),P.exists()||(await Jy(k,{uid:w.uid,email:w.email,displayName:w.displayName,emailVerified:w.emailVerified,isAdmin:!1,createdAt:Td(),photoURL:w.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const b={uid:w.uid,email:w.email||"",displayName:w.displayName||"",emailVerified:w.emailVerified,isAdmin:P.exists()?P.data().isAdmin:!1,createdAt:w.metadata.creationTime?new Date(w.metadata.creationTime):void 0,photoURL:w.photoURL??void 0};return console.log("[Google] AppUser retourné:",b),b}catch(I){throw console.error("[Google] Erreur dans loginWithGoogle:",I,w),I}},logout:async()=>{try{await CA(ct),n(null)}catch(p){throw console.error("Erreur lors de la déconnexion:",p),p}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(ct.currentUser)try{await ty(ct.currentUser)}catch(p){throw console.error("Erreur lors de l'envoi de l'email de vérification:",p),p}}};return o.jsx(j1.Provider,{value:g,children:t})},k1=C.createContext(void 0),Ri=()=>{const t=C.useContext(k1);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},v4=({children:t})=>{const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState([]),[c,u]=C.useState(!0);C.useEffect(()=>{(async()=>{u(!0);const _=await xn(Fe(ae,"guideSections"));s(_.docs.map(R=>({id:R.id,...R.data()})));const v=await xn(Fe(ae,"resources"));n(v.docs.map(R=>({id:R.id,...R.data()})));const j=await xn(Fe(ae,"faq"));a(j.docs.map(R=>({id:R.id,...R.data()}))),u(!1)})()},[]);const d=async()=>{const y=await xn(Fe(ae,"guideSections"));s(y.docs.map(j=>({id:j.id,...j.data()})));const _=await xn(Fe(ae,"resources"));n(_.docs.map(j=>({id:j.id,...j.data()})));const v=await xn(Fe(ae,"faq"));a(v.docs.map(j=>({id:j.id,...j.data()})))},S={resources:e,guideSections:r,faqItems:i,addResource:async y=>{await Dn(Fe(ae,"resources"),y),await d()},updateResource:async(y,_)=>{await ai(yt(ae,"resources",y),_),await d()},deleteResource:async y=>{await Rl(yt(ae,"resources",y)),await d()},addGuideSection:async y=>{await Dn(Fe(ae,"guideSections"),y),await d()},updateGuideSection:async(y,_)=>{await ai(yt(ae,"guideSections",y),_),await d()},deleteGuideSection:async y=>{await Rl(yt(ae,"guideSections",y)),await d()},addFAQItem:async y=>{await Dn(Fe(ae,"faq"),y),await d()},updateFAQItem:async(y,_)=>{await ai(yt(ae,"faq",y),_),await d()},deleteFAQItem:async y=>{await Rl(yt(ae,"faq",y)),await d()},getResourcesByPhase:y=>e.filter(_=>_.phase===y),getGuideSectionsByPhase:y=>r.filter(_=>_.phase===y).sort((_,v)=>_.order-v.order),getFAQItemsByPhase:y=>i.filter(_=>_.phase===y),searchResources:y=>{const _=y.toLowerCase();return e.filter(v=>v.title.toLowerCase().includes(_)||v.description.toLowerCase().includes(_)||v.category.toLowerCase().includes(_))}};return c?o.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):o.jsx(k1.Provider,{value:S,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},f)=>C.createElement("svg",{ref:f,...x4,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${_4(t)}`,c].join(" "),...d},[...e.map(([g,p])=>C.createElement(g,p)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=Z("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=Z("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=Z("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=Z("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=Z("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=Z("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=Z("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Z("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=Z("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Z("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=Z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tc=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yp=Z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Z("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=Z("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Z("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$4=()=>{var g,p;const{currentUser:t,logout:e,isAdmin:n}=bt(),[r,s]=C.useState(!1),[i,a]=C.useState(!1),[c,u]=C.useState(!1),d=Es();C.useEffect(()=>{const w=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),C.useEffect(()=>{s(!1),a(!1)},[d]);const f=async()=>{try{await e()}catch(w){console.error("Logout failed",w)}};return o.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:o.jsxs("div",{className:"container mx-auto px-4 py-3",children:[o.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[o.jsx(Y,{to:"/",className:"flex items-center",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),o.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(Y,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(Y,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(Y,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),o.jsx("div",{className:"hidden md:flex items-center",children:t?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>a(!i),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),o.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),o.jsx(li,{className:"w-4 h-4"})]}),i&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[o.jsxs(Y,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(df,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Profil"})]}),n()&&o.jsxs(Y,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(R1,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Administration"})]}),o.jsxs("button",{onClick:f,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(uv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]})]}):o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Y,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),o.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?o.jsx(M1,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):o.jsx(O4,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),r&&o.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:o.jsx("div",{className:"flex flex-col space-y-4",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(((g=t.displayName)==null?void 0:g.charAt(0))||((p=t.email)==null?void 0:p.charAt(0))||"U").toUpperCase()})}),o.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),o.jsxs(Y,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(df,{className:"w-4 h-4 mr-2"}),"Profil"]}),o.jsx(Y,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(Y,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(Y,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(Y,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),o.jsxs("button",{onClick:f,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(uv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]}):o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsx(Y,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},G4=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"bg-blue-900 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"col-span-1 md:col-span-1",children:[o.jsxs(Y,{to:"/",className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),o.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Y,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),o.jsx("li",{children:o.jsx(Y,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(M4,{className:"w-4 h-4 mr-2"}),o.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),o.jsxs("div",{className:"flex space-x-4 mt-4",children:[o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(L4,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(C4,{className:"w-5 h-5"})})]})]})]}),o.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),o.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",o.jsx(P4,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]})})},cl=({children:t})=>{const{currentUser:e,loading:n}=bt();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Rh,{to:"/login"})},Wr=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=bt();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?o.jsx(o.Fragment,{children:t}):o.jsx(Rh,{to:"/dashboard"}):o.jsx(Rh,{to:"/login"})},H4=()=>{const{currentUser:t}=bt();return o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[o.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS à l'ESIGELEC"}),o.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),o.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsxs(Y,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",o.jsx(ov,{className:"ml-2 w-5 h-5"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",o.jsx(ov,{className:"ml-2 w-5 h-5"})]}),o.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),o.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:o.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(B4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),o.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(N4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),o.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(V4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),o.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Sc,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),o.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),o.jsxs("div",{className:"flex flex-col space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),o.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Préparation dossier Campus France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Candidature ESIGELEC"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),o.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Demande de visa étudiant"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Recherche de logement"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),o.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Transport vers la France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),o.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),o.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),o.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsx(Y,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),o.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},W4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(!1),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,g]=C.useState(!1),p=mn(),{login:w,loginWithGoogle:I}=bt();Cc.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const k=async b=>{b.preventDefault();try{c(""),d(!0),await w(t,n),p("/dashboard")}catch(E){c("Identifiants invalides. Veuillez réessayer."),console.error(E)}finally{d(!1)}},P=async()=>{c(""),g(!0);try{await I(),p("/dashboard")}catch(b){let E="Erreur lors de la connexion avec Google.";b&&typeof b=="object"&&"message"in b&&(E+=`
${b.message}`),c(E),console.error(b)}finally{g(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(Y,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:a})})})}),o.jsxs("button",{type:"button",onClick:P,disabled:f,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${f?"opacity-70 cursor-not-allowed":""}`,children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),f?"Connexion Google...":"Se connecter avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:k,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:b=>e(b.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:b=>r(b.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>i(b=>!b),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":s?"Masquer le mot de passe":"Afficher le mot de passe",children:s?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),o.jsx("div",{className:"text-sm",children:o.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},Q4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,g]=C.useState(!1),[p,w]=C.useState(""),[I,k]=C.useState(!1),P=mn(),{register:b,loginWithGoogle:E}=bt(),N=async()=>{try{await E(),P("/dashboard")}catch{w("Erreur lors de l'inscription avec Google"),console.error()}},M=async D=>{if(D.preventDefault(),s!==a)return w("Les mots de passe ne correspondent pas");try{w(""),k(!0),await b(n,s,t),P("/dashboard")}catch{w("Erreur lors de la création du compte"),console.error()}finally{k(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(Y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[p&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:p})})})}),o.jsxs("button",{type:"button",onClick:N,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:M,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:D=>i(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:D=>c(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>g(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":f?"Masquer le mot de passe":"Afficher le mot de passe",children:f?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",o.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:I,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${I?"opacity-70 cursor-not-allowed":""}`,children:I?"Création en cours...":"Créer un compte"})})]})]})})]})},K4=()=>{const{currentUser:t}=bt(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=Ri(),[i,a]=C.useState("post-cps"),[c,u]=C.useState([]),d=p=>{c.includes(p)?u(c.filter(w=>w!==p)):u([...c,p])},f=r?r(i):[],g=p=>{const w=r?r(p):[];if(!w||w.length===0)return 0;const I=w.filter(k=>c.includes(k.id));return Math.round(I.length/w.length*100)};return!n||!s||!e?o.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:o.jsxs("div",{className:"flex flex-wrap",children:[o.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),o.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),o.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsxs("div",{className:"border-b border-gray-200 p-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[i==="post-cps"&&"Après votre CPS",i==="during-process"&&"Pendant vos démarches administratives",i==="pre-arrival"&&"Avant votre arrivée en France"]}),o.jsxs("p",{className:"text-gray-600",children:[i==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",i==="during-process"&&"Les démarches à effectuer pour préparer votre départ",i==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),o.jsx("div",{className:"divide-y divide-gray-200",children:f&&f.length>0?f.map(p=>o.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:o.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[o.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:o.jsx("button",{onClick:()=>d(p.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(p.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:o.jsx(C1,{className:"w-5 h-5"})})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p.title}),o.jsx("p",{className:"text-gray-600 mb-4",children:p.content}),Array.isArray(p.resources)&&p.resources.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),o.jsx("div",{className:"space-y-2",children:p.resources.map(w=>{const I=n.find(k=>k.id===w);return I?o.jsxs("a",{href:I.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),I.title]},I.id):null})})]})]})]})},p.id)):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("post-cps"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("post-cps")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("during-process"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("during-process")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("pre-arrival"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("pre-arrival")}%`}})})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),o.jsx(Y,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(p=>o.jsxs("a",{href:p.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:o.jsx(Un,{className:"w-5 h-5 text-blue-700"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:p.title}),o.jsx("p",{className:"text-xs text-gray-500",children:p.phase})]})]},p.id))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),o.jsx(Y,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(p=>o.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:p.question}),o.jsx("p",{className:"text-xs text-gray-700",children:p.answer&&p.answer.length>100?`${p.answer.substring(0,100)}...`:p.answer})]},p.id))})]})]})]})})]})},Y4=()=>{const{resources:t}=Ri(),[e,n]=C.useState(""),[r,s]=C.useState("all"),[i,a]=C.useState("all"),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[g,p]=C.useState(null),[w,I]=C.useState(!1),k=[...new Set(t.map(D=>D.category))],P=D=>{if(D.includes("dropbox.com")){let O=D.replace("www.dropbox.com","dl.dropboxusercontent.com");return O.includes("?dl=0")?O=O.replace("?dl=0","?raw=1"):O.includes("?")?O+="&raw=1":O+="?raw=1",O}return D},b=D=>`https://docs.google.com/viewer?url=${encodeURIComponent(D)}&embedded=true`,E=D=>{D.preventDefault()},N=t.filter(D=>r!=="all"&&D.phase!==r||i!=="all"&&D.category!==i?!1:e?D.title.toLowerCase().includes(e.toLowerCase())||D.description.toLowerCase().includes(e.toLowerCase()):!0),M=D=>{switch(D){case"pdf":return o.jsx(k4,{className:"w-6 h-6 text-red-500"});case"image":return o.jsx(D4,{className:"w-6 h-6 text-green-500"});case"video":return o.jsx(z4,{className:"w-6 h-6 text-purple-500"});case"archive":return o.jsx(b4,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return o.jsx(Un,{className:"w-6 h-6 text-blue-500"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx("div",{className:"p-6",children:o.jsx("form",{onSubmit:E,children:o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Tc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:D=>n(D.target.value)})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(lv,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),o.jsx(li,{className:"h-4 w-4"})]}),c&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("all"),u(!1)},children:"Toutes les phases"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("post-cps"),u(!1)},children:"Post-CPS"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("during-process"),u(!1)},children:"Pendant les démarches"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>f(!d),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(lv,{className:"mr-2 h-4 w-4"}),i==="all"?"Toutes les catégories":i]}),o.jsx(li,{className:"h-4 w-4"})]}),d&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),f(!1)},children:"Toutes les catégories"}),k.map(D=>o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(D),f(!1)},children:D},D))]})})]})]})]})})})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.length>0?N.map(D=>o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{p(D),I(!0)},children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:M(D.fileType)}),o.jsx("div",{className:"ml-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title})})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.phase==="post-cps"?"Post-CPS":D.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.fileType==="pdf"?"bg-red-100 text-red-800":D.fileType==="doc"||D.fileType==="docx"||D.fileType==="txt"?"bg-blue-100 text-blue-800":D.fileType==="xls"||D.fileType==="xlsx"?"bg-green-100 text-green-800":D.fileType==="ppt"||D.fileType==="pptx"?"bg-orange-100 text-orange-800":D.fileType==="image"?"bg-purple-100 text-purple-800":D.fileType==="video"?"bg-pink-100 text-pink-800":D.fileType==="audio"?"bg-indigo-100 text-indigo-800":D.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:D.fileType.toUpperCase()})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[o.jsxs("span",{children:["Mis à jour le ",D.updatedDate]}),o.jsxs("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:O=>O.stopPropagation(),children:[o.jsx(av,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:"Télécharger"})]})]})]})},D.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:o.jsx(Tc,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),o.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),w&&g&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g.title}),o.jsx("p",{className:"text-sm text-gray-500",children:g.category})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(S4,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),o.jsxs("a",{href:g.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(av,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),o.jsxs("button",{onClick:()=>I(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(M1,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),o.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:g.fileType==="pdf"?o.jsxs("div",{className:"flex flex-col items-center h-full",children:[o.jsx("div",{className:"h-full w-full",children:o.jsx("object",{data:P(g.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:o.jsx("iframe",{src:b(g.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${g.title} (Google Viewer)`,allowFullScreen:!0})})}),o.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",o.jsx("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"télécharger"}),"ou l'",o.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(g.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):g.fileType==="image"?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("img",{src:P(g.fileUrl),alt:g.title,className:"max-w-full max-h-full object-contain rounded-md"})}):o.jsx("iframe",{src:P(g.fileUrl),className:"w-full h-full border-0 rounded-md",title:g.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},J4=()=>{const{faqItems:t,addFAQItem:e}=Ri(),{currentUser:n}=bt(),[r,s]=C.useState(""),[i,a]=C.useState("all"),[c,u]=C.useState(null),[d,f]=C.useState(!1),[g,p]=C.useState(!1),[w,I]=C.useState(!1),[k,P]=C.useState(""),[b,E]=C.useState("post-cps"),[N,M]=C.useState(""),[D,O,S]=t.reduce((v,j)=>(n&&(j.userId===n.uid||j.userEmail===n.email)&&(j.isAnswered?v[0].push(j):v[1].push(j)),j.isApproved&&j.isAnswered&&(i==="all"||j.phase===i)&&(!r||j.question.toLowerCase().includes(r.toLowerCase())||j.answer.toLowerCase().includes(r.toLowerCase())||j.category.toLowerCase().includes(r.toLowerCase()))&&v[2].push(j),v),[[],[],[]]),y=v=>{u(c===v?null:v)},_=v=>{v.preventDefault(),k.trim()&&(e({question:k,answer:"Cette question est en attente de réponse par notre équipe.",category:N||"général",phase:b,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:n==null?void 0:n.uid,userEmail:n==null?void 0:n.email}),P(""),M(""),p(!0),setTimeout(()=>{p(!1),f(!1)},5e3))};return C.useEffect(()=>{d||p(!1)},[d]),o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Tc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:v=>s(v.target.value)})]})}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("select",{value:i,onChange:v=>a(v.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:w,children:[o.jsx("option",{value:"all",children:"Toutes les phases"}),o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]}),n&&o.jsx("button",{type:"button",onClick:()=>I(!w),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:w?"Toutes les questions":"Mes questions"}),o.jsxs("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(ko,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[o.jsx(Ys,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),o.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),o.jsx("form",{onSubmit:_,className:"space-y-7",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),o.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:k,onChange:v=>P(v.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:v=>E(v.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:N,onChange:v=>M(v.target.value)})]})]}),g?o.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(C1,{className:"h-5 w-5 text-green-500 mr-2"}),o.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),o.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):o.jsxs("div",{className:"flex justify-end",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),o.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),w?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:D.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:D.length>0?D.map(v=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(Ys,{className:"h-4 w-4 text-green-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?o.jsx(kd,{className:"h-5 w-5 text-gray-500"}):o.jsx(li,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:v.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:O.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:O.length>0?O.map(v=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:o.jsx(Ys,{className:"h-4 w-4 text-yellow-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category}),o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",v.createdDate]})]})]})]}),c===v.id?o.jsx(kd,{className:"h-5 w-5 text-gray-500"}):o.jsx(li,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&o.jsx("div",{className:"mt-4 ml-11",children:o.jsx("p",{className:"text-gray-700 italic",children:v.answer})})]},v.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),o.jsx("div",{className:"divide-y divide-gray-200",children:S.length>0?S.map(v=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx(Ys,{className:"h-4 w-4 text-blue-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,w&&!v.isApproved&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?o.jsx(kd,{className:"h-5 w-5 text-gray-500"}):o.jsx(li,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:v.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})};function X4(t=20){const[e,n]=C.useState([]),[r,s]=C.useState(!0);return C.useEffect(()=>{(async()=>{s(!0);try{const a=fo(Fe(ae,"adminActivityLog"),n1("date","desc"),lf(t)),c=await xn(a);n(c.docs.map(u=>({id:u.id,...u.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function Z4(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),i=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${i}`}const e5=()=>{const{currentUser:t}=bt(),{resources:e,guideSections:n,faqItems:r}=Ri(),{recentActivity:s,loading:i}=X4();return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),o.jsxs(Y,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[o.jsx(P1,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[o.jsxs(Y,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Pd,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),o.jsxs(Y,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Un,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),o.jsxs(Y,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Sc,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),o.jsxs(Y,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(T4,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Un,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Pd,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Ys,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>a.isAnswered).length>0?r.filter(a=>a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),a.isApproved?o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&o.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(a=>!a.isAnswered).length})]}),Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>0?r.filter(a=>!a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"}),a.userEmail&&o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",a.userEmail]})]})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs(Y,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Pd,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer le contenu"})]}),o.jsxs(Y,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les ressources"})]}),o.jsxs(Y,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Ys,{className:"h-5 w-5"})}),o.jsx("span",{children:"Modérer la FAQ"})]}),o.jsxs(Y,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Sc,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[o.jsxs(Y,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ko,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une section de guide"})]}),o.jsxs(Y,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ko,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une ressource"})]}),o.jsxs(Y,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ko,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),o.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:i?o.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?o.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):s.map(a=>{var c;return o.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:Z4(a)}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleString()}),typeof((c=a.details)==null?void 0:c.title)=="string"&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",a.details.title]})]})]})},a.id)})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="post-cps").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="during-process").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Pn({type:t,target:e,targetId:n,user:r,details:s}){await Dn(Fe(ae,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const t5=()=>{const[t]=O_(),e=mn(),{currentUser:n}=bt(),{guideSections:r,addGuideSection:s,updateGuideSection:i,deleteGuideSection:a,resources:c,faqItems:u,addFAQItem:d,updateFAQItem:f,deleteFAQItem:g}=Ri(),p=t.get("new")==="section",w=t.get("new")==="faq",I=p?null:t.get("edit")&&r.some(z=>z.id===t.get("edit"))?t.get("edit"):null,k=w?null:t.get("edit")&&u.some(z=>z.id===t.get("edit"))?t.get("edit"):null,[P,b]=C.useState(""),[E,N]=C.useState("post-cps"),[M,D]=C.useState(""),[O,S]=C.useState(1),[y,_]=C.useState([]),[v,j]=C.useState(""),[R,A]=C.useState(""),[ce,Oe]=C.useState(""),[Et,tt]=C.useState("post-cps"),[$,W]=C.useState(!0),[J,ue]=C.useState(!1);C.useEffect(()=>{if(I){const z=r.find(fe=>fe.id===I);z&&(b(z.title),N(z.phase),D(z.content),S(z.order),_(Array.isArray(z.resources)?z.resources:[]))}else if(p){b(""),N("post-cps"),D("");const z=r.filter(fe=>fe.phase==="post-cps");S(z.length>0?Math.max(...z.map(fe=>fe.order))+1:1),_([])}if(k){const z=u.find(fe=>fe.id===k);z&&(j(z.question),A(z.answer),Oe(z.category||""),tt(z.phase),W(!!z.isApproved),ue(!!z.isAnswered))}else w&&(j(""),A(""),Oe(""),tt("post-cps"),W(!0),ue(!1))},[I,p,r,k,w,u]);const me=()=>{A(""),ue(!1)},Te=z=>{const fe=z.trim()!==""&&z!=="Cette question est en attente de réponse par notre équipe.";ue(fe)},qt=z=>{if(z.preventDefault(),w||k)if(k){const fe=R.trim()!==""&&R!=="Cette question est en attente de réponse par notre équipe.";ue(fe),f(k,{question:v,answer:R,category:ce,phase:Et,isApproved:$,isAnswered:fe}),Pn({type:"Modification",target:"FAQ",targetId:k,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else{const fe=R.trim()!==""&&R!=="Cette question est en attente de réponse par notre équipe.";ue(fe),d({question:v,answer:R,category:ce,phase:Et,isApproved:$,isAnswered:fe,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Pn({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else I?(i(I,{title:P,phase:E,content:M,order:O,resources:y}),Pn({type:"Modification",target:"Section",targetId:I,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}})):(s({title:P,phase:E,content:M,order:O,resources:y}),Pn({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}}));e("/admin")},zt=()=>{I&&window.confirm("Êtes-vous sûr de vouloir supprimer cette section ?")?(a(I),Pn({type:"Suppression",target:"Section",targetId:I,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}}),e("/admin")):k&&window.confirm("Êtes-vous sûr de vouloir supprimer cette FAQ ?")&&(g(k),Pn({type:"Suppression",target:"FAQ",targetId:k,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}}),e("/admin"))},Xt=z=>{y.includes(z)?_(y.filter(fe=>fe!==z)):_([...y,z])},Ct=c.filter(z=>z.phase===E),Zt={"post-cps":r.filter(z=>z.phase==="post-cps").sort((z,fe)=>z.order-fe.order),"during-process":r.filter(z=>z.phase==="during-process").sort((z,fe)=>z.order-fe.order),"pre-arrival":r.filter(z=>z.phase==="pre-arrival").sort((z,fe)=>z.order-fe.order)};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:p?"Ajouter une nouvelle section":w?"Ajouter une question FAQ":k?"Modifier la FAQ":I?"Modifier la section":"Édition"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(_s,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:w||k?o.jsx("form",{onSubmit:qt,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),o.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:v,onChange:z=>j(z.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),k&&o.jsx("button",{type:"button",onClick:me,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),o.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:R,onChange:z=>{A(z.target.value),Te(z.target.value)},required:!0}),o.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${J?"bg-green-500":"bg-yellow-500"} mr-2`}),o.jsx("span",{className:"text-gray-600",children:J?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:ce,onChange:z=>Oe(z.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Et,onChange:z=>tt(z.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:$,onChange:z=>W(z.target.checked)}),o.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:k&&o.jsxs("button",{type:"button",onClick:zt,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[o.jsx(Ic,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(uf,{className:"mr-2 h-4 w-4"}),w?"Ajouter":"Enregistrer"]})]})]})]})}):o.jsx("form",{onSubmit:qt,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:z=>b(z.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:z=>{const fe=z.target.value;N(fe);const qr=r.filter(zr=>zr.phase===fe);S(qr.length>0?Math.max(...qr.map(zr=>zr.order))+1:1),_([])},required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),o.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:O,onChange:z=>S(parseInt(z.target.value)),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),o.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:M,onChange:z=>D(z.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(Ct)&&Ct.length>0?o.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:Ct.map(z=>o.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",id:`resource-${z.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(z.id),onChange:()=>Xt(z.id)}),o.jsx("label",{htmlFor:`resource-${z.id}`,className:"ml-3 block text-sm text-gray-700",children:z.title})]},z.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:I&&o.jsxs("button",{type:"button",onClick:zt,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[o.jsx(Ic,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(uf,{className:"mr-2 h-4 w-4"}),p?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),o.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ko,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Zt["post-cps"])&&Zt["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:Zt["post-cps"].map(z=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),o.jsx("span",{className:"flex-grow",children:z.title}),o.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Zt["during-process"])&&Zt["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:Zt["during-process"].map(z=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),o.jsx("span",{className:"flex-grow",children:z.title}),o.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Zt["pre-arrival"])&&Zt["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:Zt["pre-arrival"].map(z=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),o.jsx("span",{className:"flex-grow",children:z.title}),o.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]})]})]})})]})})]})};var n5="rpc",r5="upload",s5="download",Rd="app",Dd="user",Ld="team",i5="noauth",o5="cookie",Ac="dropboxapi.com",dv="dropbox.com",hf={api:"api",notify:"bolt",content:"api-content"},T={};T.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};T.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};T.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};T.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};T.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};T.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};T.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};T.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};T.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};T.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};T.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};T.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};T.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};T.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};T.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};T.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};T.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};T.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};T.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};T.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};T.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};T.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};T.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};T.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};T.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};T.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};T.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};T.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};T.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};T.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};T.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};T.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};T.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};T.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};T.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};T.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};T.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};T.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};T.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};T.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};T.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};T.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};T.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};T.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};T.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};T.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};T.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};T.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};T.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};T.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};T.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};T.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};T.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};T.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};T.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};T.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};T.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};T.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};T.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};T.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};T.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};T.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};T.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};T.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};T.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};T.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};T.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};T.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};T.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};T.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};T.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};T.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};T.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};T.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};T.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};T.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};T.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};T.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};T.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};T.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};T.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};T.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};T.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};T.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};T.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};T.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};T.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};T.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};T.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};T.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};T.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};T.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};T.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};T.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};T.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};T.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};T.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};T.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};T.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};T.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};T.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};T.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};T.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};T.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};T.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};T.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};T.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};T.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};T.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};T.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};T.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};T.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};T.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};T.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};T.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};T.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};T.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};T.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};T.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};T.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};T.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};T.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};T.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};T.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};T.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};T.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};T.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};T.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};T.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};T.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};T.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};T.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};T.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};T.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};T.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};T.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};T.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};T.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};T.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};T.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};T.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};T.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};T.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};T.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};T.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};T.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};T.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};T.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};T.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};T.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};T.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};T.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};T.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};T.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};T.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};T.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};T.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};T.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};T.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};T.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};T.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};T.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};T.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};T.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};T.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};T.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};T.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};T.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};T.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};T.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};T.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};T.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};T.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};T.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};T.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};T.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};T.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};T.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};T.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};T.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};T.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};T.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};T.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};T.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};T.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};T.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};T.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};T.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};T.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};T.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};T.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};T.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};T.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};T.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};T.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};T.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};T.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};T.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};T.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};T.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};T.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};T.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};T.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};T.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};T.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};T.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};T.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};T.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};T.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};T.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};T.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};T.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};T.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function a5(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var Md=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ac,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==Ac&&hf[e]!==void 0&&(e=hf[e],r="-"),"https://".concat(e).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},l5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dv;return e!==dv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},hv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ac,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==Ac&&(r=hf[r],n="-"),"https://".concat(r).concat(n).concat(e,"/oauth2/token")};function fv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,a5)}function c5(t){return new Date(Date.now()+t*1e3)}function mv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof z1>"u"||typeof window<"u"}function Vd(){return typeof window<"u"}function Od(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function ul(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function Dl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dl=function(n){return typeof n}:Dl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dl(t)}function u5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&aa(t,e)}function h5(t){var e=V1();return function(){var r=la(t),s;if(e){var i=la(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return f5(this,s)}}function f5(t,e){return e&&(Dl(e)==="object"||typeof e=="function")?e:m5(t)}function m5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ff(t){var e=typeof Map=="function"?new Map:void 0;return ff=function(r){if(r===null||!p5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return Ll(r,arguments,la(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),aa(s,r)},ff(t)}function Ll(t,e,n){return V1()?Ll=Reflect.construct:Ll=function(s,i,a){var c=[null];c.push.apply(c,i);var u=Function.bind.apply(s,c),d=new u;return a&&aa(d,a.prototype),d},Ll.apply(null,arguments)}function V1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p5(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function aa(t,e){return aa=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},aa(t,e)}function la(t){return la=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},la(t)}var g5=function(t){d5(n,t);var e=h5(n);function n(r,s,i){var a;return u5(this,n),a=e.call(this,"Response failed with a ".concat(r," code")),a.name="DropboxResponseError",a.status=r,a.headers=s,a.error=i,a}return n}(ff(Error));function y5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var O1=function t(e,n,r){y5(this,t),this.status=e,this.headers=n,this.result=r};function F1(t){return t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}throw new g5(t.status,t.headers,n)})}function jc(t){return t.ok?t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}return new O1(t.status,t.headers,n)}):F1(t)}function v5(t){return t.ok?new Promise(function(e){mv()?t.blob().then(function(n){return e(n)}):t.buffer().then(function(n){return e(n)})}).then(function(e){var n=JSON.parse(t.headers.get("dropbox-api-result"));return mv()?n.fileBlob=e:n.fileBinary=e,new O1(t.status,t.headers,n)}):F1(t)}function x5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w5(t,e,n){return e&&_5(t.prototype,e),t}var dl,Qr,Fd,b5=300*1e3,pv=128,E5=["legacy","offline","online"],N5=["code","token"],T5=["none","user","team"],I5=function(){function t(e){x5(this,t),e=e||{},Vd()?(dl=window.fetch.bind(window),Qr=window.crypto||window.msCrypto):Od()?(dl=self.fetch.bind(self),Qr=self.crypto):(dl=require("node-fetch"),Qr=require("crypto")),typeof TextEncoder>"u"?Fd=require("util").TextEncoder:Fd=TextEncoder,this.fetch=e.fetch||dl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return w5(t,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new Fd,s=r.encode(this.codeVerifier),i;if(Vd()||Od())return Qr.subtle.digest("SHA-256",s).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));i=ul(u).substr(0,128),n.codeChallenge=i});var a=Qr.createHash("sha256").update(s).digest();return i=ul(a),this.codeChallenge=i,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(Vd()||Od()){var r=new Uint8Array(pv),s=Qr.getRandomValues(r),i=btoa(s);n=ul(i).substr(0,128)}else{var a=Qr.randomBytes(pv);n=ul(a).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var s=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,f=this.getClientId(),g=l5(this.domain);if(!f)throw new Error("A client id is required. You can set the client id using .setClientId().");if(i!=="code"&&!n)throw new Error("A redirect uri is required.");if(!N5.includes(i))throw new Error("Authorization type must be code or token");if(a&&!E5.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!T5.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var p;return i==="code"?p="".concat(g,"?response_type=code&client_id=").concat(f):p="".concat(g,"?response_type=token&client_id=").concat(f),n&&(p+="&redirect_uri=".concat(n)),r&&(p+="&state=".concat(r)),a&&(p+="&token_access_type=".concat(a)),c&&(p+="&scope=".concat(c.join(" "))),u!=="none"&&(p+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return p+="&code_challenge_method=S256",p+="&code_challenge=".concat(s.codeChallenge),p}):Promise.resolve(p)}},{key:"getAccessTokenFromCode",value:function(n,r){var s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=hv(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(r),a+="&client_id=".concat(s),i)a+="&client_secret=".concat(i);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}n&&(a+="&redirect_uri=".concat(n));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return jc(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+b5)>=this.getAccessTokenExpiresAt(),s=!this.getAccessToken();return(r||s)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var a=hv(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:s,refresh_token:this.getRefreshToken()};i&&(u.client_secret=i),r&&(u.scope=r.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(s),i&&(a+="&client_secret=".concat(i)),r&&(a+="&scope=".concat(r.join(" ")));return this.fetch(a,c).then(function(d){return jc(d)}).then(function(d){n.setAccessToken(d.result.access_token),n.setAccessTokenExpiresAt(c5(d.result.expires_in))})}}]),t}();function S5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j5(t,e,n){return e&&A5(t.prototype,e),t}var k5=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,C5=function(){function t(e){S5(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new I5(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,T)}return j5(t,[{key:"request",value:function(n,r,s,i,a){switch(a){case n5:return this.rpcRequest(n,r,s,i);case s5:return this.downloadRequest(n,r,s,i);case r5:return this.uploadRequest(n,r,s,i);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Md(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return jc(c)})}},{key:"downloadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":fv(r)}};return a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Md(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return v5(c)})}},{key:"uploadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=r.contents;delete r.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":fv(r)}};return a.setAuthHeaders(s,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(Md(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return jc(c)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var s=n.replace(" ","").split(",");s.includes(Dd)&&this.auth.getAccessToken()?n=Dd:s.includes(Ld)&&this.auth.getAccessToken()?n=Ld:s.includes(Rd)&&(n=Rd)}switch(n){case Rd:if(this.auth.clientId&&this.auth.clientSecret){var i=k5("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(i)}break;case Ld:case Dd:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case i5:case o5:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var s=Object.keys(this.customHeaders);s.forEach(function(i){n.headers[i]=r.customHeaders[i]})}}}]),t}();const P5="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function U1({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:n=!1}){const[r,s]=C.useState(null),[i,a]=C.useState(!1),[c,u]=C.useState(null),d=g=>{g.target.files&&g.target.files.length>0&&s(g.target.files[0])},f=async()=>{if(!r)return;a(!0);const g=new C5({accessToken:P5});let p=!1,w="";try{const I=await g.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});p=!0,w=I.result.path_display||I.result.path_lower||"/"+r.name,console.log("Upload réussi!",I);try{const P=(await g.sharingCreateSharedLinkWithSettings({path:w})).result.url.replace("?dl=0","?raw=1");u(P),t&&t(P)}catch(k){console.error("Erreur lors de la création du lien partageable:",k),alert("Le fichier a été uploadé avec succès, mais la création du lien a échoué.")}}catch(I){console.error("Erreur lors de l'upload:",I),I instanceof Error?alert(`Erreur lors de l'upload : ${I.message}
Type: ${I.constructor.name}`):alert(`Erreur lors de l'upload : ${String(I)}`)}if(a(!1),p)return alert(`Fichier "${r.name}" uploadé avec succès sur Dropbox!`)};return o.jsxs("div",{className:n?"flex items-center":"space-y-3",children:[o.jsx("div",{className:n?"flex-grow mr-2":"mb-2",children:o.jsx("input",{type:"file",onChange:d,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),o.jsx("button",{onClick:f,disabled:!r||i,className:`${n?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:i?"Envoi...":e}),c&&!n&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})})]})}const R5=()=>{const[t]=O_(),e=mn(),{currentUser:n}=bt(),{resources:r,addResource:s,updateResource:i,deleteResource:a}=Ri(),c=t.get("new")==="resource",u=t.get("edit"),[d,f]=C.useState(""),[g,p]=C.useState(""),[w,I]=C.useState("post-cps"),[k,P]=C.useState(""),[b,E]=C.useState(""),[N,M]=C.useState("pdf"),D=[...new Set(r.map(v=>v.category))];C.useEffect(()=>{if(u){const v=r.find(j=>j.id===u);v&&(f(v.title),p(v.description),I(v.phase),P(v.category),E(v.fileUrl),M(v.fileType))}else c&&(f(""),p(""),I("post-cps"),P(""),E(""),M("pdf"))},[u,c,r]);const O=v=>{v.preventDefault(),u?(i(u,{title:d,description:g,phase:w,category:k,fileUrl:b,fileType:N}),Pn({type:"Modification",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:g,phase:w,category:k,fileUrl:b,fileType:N,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Pn({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},S=()=>{u&&window.confirm("Êtes-vous sûr de vouloir supprimer cette ressource ?")&&(a(u),Pn({type:"Suppression",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},y={"post-cps":r.filter(v=>v.phase==="post-cps"),"during-process":r.filter(v=>v.phase==="during-process"),"pre-arrival":r.filter(v=>v.phase==="pre-arrival")},_=v=>{switch(v){case"pdf":case"doc":return o.jsx(Un,{className:"w-5 h-5"});case"image":return o.jsx(A4,{className:"w-5 h-5"});case"link":return o.jsx(cv,{className:"w-5 h-5"});default:return o.jsx(j4,{className:"w-5 h-5"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(_s,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsx("form",{onSubmit:O,className:"space-y-7",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:v=>f(v.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:g,onChange:v=>p(v.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:w,onChange:v=>I(v.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:k,onChange:v=>P(v.target.value),required:!0}),o.jsx("datalist",{id:"categories",children:D.map((v,j)=>o.jsx("option",{value:v},j))})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),o.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:N,onChange:v=>M(v.target.value),required:!0,children:[o.jsxs("optgroup",{label:"Documents",children:[o.jsx("option",{value:"pdf",children:"PDF"}),o.jsx("option",{value:"doc",children:"Word (.doc)"}),o.jsx("option",{value:"docx",children:"Word (.docx)"}),o.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),o.jsxs("optgroup",{label:"Tableurs",children:[o.jsx("option",{value:"xls",children:"Excel (.xls)"}),o.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),o.jsxs("optgroup",{label:"Présentations",children:[o.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),o.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),o.jsxs("optgroup",{label:"Médias",children:[o.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),o.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),o.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),o.jsxs("optgroup",{label:"Autres",children:[o.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),o.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:N==="link"?"URL du lien":"URL du fichier"}),N!=="link"&&o.jsxs("div",{className:"mt-3 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50/30",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(q4,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),o.jsx(U1,{onSuccess:v=>E(v),buttonText:"Uploader le fichier vers Dropbox"})]}),o.jsx("div",{className:"flex items-center",children:o.jsx("input",{type:"url",id:"fileUrl",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:v=>E(v.target.value),placeholder:N==="link"?"https://example.com":"https://dropbox.com/s/...",required:!0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:N==="link"?"Entrez l'URL complète du site web externe.":"URL générée automatiquement après upload ou entrez manuellement une URL Dropbox/Google Drive."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:u&&o.jsxs("button",{type:"button",onClick:S,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[o.jsx(Ic,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(uf,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),o.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(cv,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(y["post-cps"])&&y["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:y["post-cps"].map(v=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===v.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:v.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(y["during-process"])&&y["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:y["during-process"].map(v=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===v.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:v.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(y["pre-arrival"])&&y["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:y["pre-arrival"].map(v=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===v.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:v.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})})]})},q1=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[i,a]=C.useState(""),c=u=>{u.preventDefault(),n(i)};return Cc.useEffect(()=>{t||a("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),o.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:i,onChange:u=>a(u.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||i==="",children:"Valider"})]})]})}):null},D5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState([]),[f,g]=C.useState(!0),[p,w]=C.useState(null),{currentUser:I}=bt(),k=mn(),P=async()=>{g(!0),w(null);try{const N=await xn(Fe(ae,"users")),M=[];N.forEach(D=>{M.push(D.data())}),d(M)}catch{w("Erreur lors du chargement des utilisateurs.")}finally{g(!1)}};C.useEffect(()=>{P()},[]);const b=async(N,M)=>{e(!0),c({uid:N,isAdmin:M}),i(null)},E=async N=>{if(!a)return;if(r(!0),i(null),N!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}const M=u.find(D=>D.uid===a.uid);if(M!=null&&M.isSuperAdmin&&M.uid!==(I==null?void 0:I.uid)){i("Impossible de modifier le rôle d'un admin principal."),r(!1);return}try{await ai(yt(ae,"users",a.uid),{isAdmin:!a.isAdmin}),d(D=>D.map(O=>O.uid===a.uid?{...O,isAdmin:!a.isAdmin}:O)),e(!1),c(null)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{r(!1)}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>k("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(_s,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:f?o.jsx("div",{children:"Chargement..."}):p?o.jsx("div",{className:"text-red-600",children:p}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Nom"}),o.jsx("th",{className:"px-4 py-2",children:"Email"}),o.jsx("th",{className:"px-4 py-2",children:"Admin"}),o.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(N=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>k(`/admin/users/${N.uid}`),children:[N.photoURL?o.jsx("img",{src:N.photoURL,alt:N.displayName||N.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):o.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:o.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),N.displayName||N.email,N.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),N.uid===(I==null?void 0:I.uid)&&o.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),o.jsx("td",{className:"px-4 py-2",children:N.email}),o.jsxs("td",{className:"px-4 py-2",children:[N.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(yp,{className:"w-4 h-4 mr-1"})," Admin"]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),N.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),o.jsxs("td",{className:"px-4 py-2",children:[N.uid!==(I==null?void 0:I.uid)&&!N.isSuperAdmin&&o.jsx("button",{onClick:()=>b(N.uid,N.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${N.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:N.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(D1,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(L1,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),N.uid!==(I==null?void 0:I.uid)&&N.isSuperAdmin&&o.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},N.uid))})]})})}),o.jsx(q1,{open:t,onClose:()=>{e(!1),c(null),i(null)},onSubmit:E,loading:n,error:s})]})},L5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),{uid:a}=bT(),c=mn(),{currentUser:u}=bt(),[d,f]=C.useState(null),[g,p]=C.useState(!0),[w,I]=C.useState(null),[k,P]=C.useState(!1);C.useEffect(()=>{a&&(async()=>{p(!0),I(null);try{const S=yt(ae,"users",a),y=await up(S);y.exists()?f(y.data()):I("Utilisateur introuvable.")}catch{I("Erreur lors du chargement du profil utilisateur.")}finally{p(!1)}})()},[a]);const b=async()=>{e(!0),i(null)},E=async O=>{if(d){if(r(!0),i(null),O!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}P(!0);try{await ai(yt(ae,"users",d.uid),{isAdmin:!d.isAdmin}),f({...d,isAdmin:!d.isAdmin}),e(!1)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{P(!1),r(!1)}}},N=async()=>{if(d){if(d.uid===(u==null?void 0:u.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}if(window.confirm("Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.")){P(!0);try{await Rl(yt(ae,"users",d.uid)),c("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{P(!1)}}}},M=O=>{d&&f({...d,[O.target.name]:O.target.value})},D=async()=>{if(d){P(!0);try{await ai(yt(ae,"users",d.uid),{displayName:d.displayName,photoURL:d.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{P(!1)}}};return g?o.jsx("div",{className:"p-8",children:"Chargement..."}):w?o.jsx("div",{className:"p-8 text-red-600",children:w}):d?o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>c("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(_s,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[o.jsx("div",{className:"relative mb-6",children:d.photoURL?o.jsx("img",{src:d.photoURL,alt:d.displayName||d.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:o.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),o.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(d==null?void 0:d.displayName)||"",onChange:M,disabled:k||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(u==null?void 0:u.uid)}),(d==null?void 0:d.isSuperAdmin)&&o.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),o.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(d==null?void 0:d.photoURL)||"",onChange:M,disabled:k}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",d.email]}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",d.emailVerified?"Oui":"Non"]}),o.jsxs("div",{className:"mb-6 w-full text-center",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",d.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[o.jsx(yp,{className:"w-5 h-5 mr-1"})," Admin"]}):o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[d.uid!==(u==null?void 0:u.uid)&&o.jsx("button",{onClick:b,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${d.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:k||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(u==null?void 0:u.uid),children:d.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(D1,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(L1,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),d.uid!==(u==null?void 0:u.uid)&&o.jsxs("button",{onClick:N,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:k||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(u==null?void 0:u.uid),children:[o.jsx(Ic,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),o.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:D,disabled:k||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(u==null?void 0:u.uid),title:d!=null&&d.isSuperAdmin&&(d==null?void 0:d.uid)!==(u==null?void 0:u.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),o.jsx(q1,{open:t,onClose:()=>{e(!1),i(null)},onSubmit:E,loading:n,error:s})]}):null},M5=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(""),[a,c]=C.useState("all"),[u,d]=C.useState("all"),[f,g]=C.useState("all"),[p,w]=C.useState(!1),[I,k]=C.useState(null),[P,b]=C.useState(!0),E=20,N=y=>{const _=new Date(y);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(_)},M=()=>{const y=new Date;let _=null;switch(f){case"today":_=new Date(y.setHours(0,0,0,0));break;case"week":_=new Date,_.setDate(y.getDate()-7);break;case"month":_=new Date,_.setMonth(y.getMonth()-1);break;default:_=null}return _},D=async(y=!0)=>{try{y?(r(!0),k(null)):w(!0);let _=fo(Fe(ae,"adminActivityLog"),n1("date","desc"));const v=M();v&&(_=fo(_,GP("date",">=",v.toISOString()))),_=fo(_,lf(E));const j=await xn(_);b(j.docs.length===E),j.docs.length>0?k(j.docs[j.docs.length-1]):(k(null),b(!1));let A=j.docs.map(ce=>({id:ce.id,...ce.data()}));if(a!=="all"&&(A=A.filter(ce=>ce.type===a)),u!=="all"&&(A=A.filter(ce=>ce.target===u)),s){const ce=s.toLowerCase();A=A.filter(Oe=>{var Et;return((Et=Oe.user)==null?void 0:Et.toLowerCase().includes(ce))||Oe.target.toLowerCase().includes(ce)||Oe.type.toLowerCase().includes(ce)||Oe.details&&JSON.stringify(Oe.details).toLowerCase().includes(ce)})}e(y?A:ce=>[...ce,...A])}catch(_){console.error("Error fetching activities:",_)}finally{r(!1),w(!1)}};C.useEffect(()=>{D()},[]),C.useEffect(()=>{D()},[a,u,f]);const O=y=>{let _="bg-blue-100 text-blue-800";switch(y.toLowerCase()){case"ajout":_="bg-green-100 text-green-800";break;case"suppression":_="bg-red-100 text-red-800";break;case"modification":_="bg-yellow-100 text-yellow-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_}`,children:y})},S=y=>{let _="bg-gray-100 text-gray-800";switch(y.toLowerCase()){case"ressource":_="bg-purple-100 text-purple-800";break;case"section":_="bg-indigo-100 text-indigo-800";break;case"faq":_="bg-blue-100 text-blue-800";break;case"utilisateur":_="bg-pink-100 text-pink-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_}`,children:y})};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Y,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:o.jsx(_s,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),o.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(Tc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:s,onChange:y=>i(y.target.value)})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:y=>c(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les actions"}),o.jsx("option",{value:"Ajout",children:"Ajout"}),o.jsx("option",{value:"Modification",children:"Modification"}),o.jsx("option",{value:"Suppression",children:"Suppression"})]})}),o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:y=>d(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les cibles"}),o.jsx("option",{value:"Ressource",children:"Ressources"}),o.jsx("option",{value:"Section",children:"Sections"}),o.jsx("option",{value:"FAQ",children:"FAQ"}),o.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:y=>g(y.target.value),children:[o.jsx("option",{value:"all",children:"Toute période"}),o.jsx("option",{value:"today",children:"Aujourd'hui"}),o.jsx("option",{value:"week",children:"7 derniers jours"}),o.jsx("option",{value:"month",children:"30 derniers jours"})]})}),o.jsx("button",{onClick:()=>D(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o.jsx(U4,{className:"h-5 w-5"})})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),n?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):o.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>o.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[o.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[O(y.type),o.jsx("span",{className:"mx-2",children:"•"}),S(y.target)]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(I4,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:N(y.date)})]})]}),o.jsx("div",{className:"flex items-start",children:y.user&&o.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[o.jsx(df,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.user})]})}),y.details&&o.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[o.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),o.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(y.details).map(([_,v])=>o.jsxs("div",{className:"flex",children:[o.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[_,":"]}),o.jsx("dd",{className:"text-gray-900",children:typeof v=="object"?JSON.stringify(v):String(v)})]},_))})]}),y.targetId&&o.jsxs("div",{className:"mt-1 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",y.targetId]})]},y.id))}),P&&!n&&o.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:o.jsx("button",{onClick:()=>D(!1),disabled:p,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:p?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},V5=()=>{const t=mn(),{currentUser:e}=bt();return o.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(_s,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&o.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:o.jsxs("p",{className:"text-blue-800",children:[o.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),o.jsx("li",{children:o.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),o.jsx("li",{children:o.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),o.jsx("li",{children:o.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),o.jsx("li",{children:o.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"5. Gestion des utilisateurs"})}),o.jsx("li",{children:o.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"6. Journal d'activité"})}),o.jsx("li",{children:o.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"7. Conseils et bonnes pratiques"})})]})]}),o.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(F4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),o.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),o.jsx("li",{children:"Nombre de sections du guide"}),o.jsx("li",{children:"Nombre de questions FAQ"}),o.jsx("li",{children:"Nombre de ressources disponibles"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),o.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),o.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(E4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),o.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),o.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),o.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),o.jsx("li",{children:"Modifiez les informations dans le formulaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),o.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),o.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),o.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),o.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),o.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(P1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"La gestion des FAQ vous permet de répondre aux questions fréquemment posées par les utilisateurs. Les questions peuvent être soumises par les utilisateurs ou créées directement par les administrateurs."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Création et édition de questions/réponses"}),o.jsx("li",{children:"Approbation des questions soumises par les utilisateurs"}),o.jsx("li",{children:"Catégorisation des questions par thème"}),o.jsx("li",{children:"Organisation des FAQ par phase du processus d'immigration"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Traitement des questions utilisateurs:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Les questions soumises apparaissent dans la liste avec un statut "En attente de réponse"'}),o.jsx("li",{children:"Pour répondre, sélectionnez la question dans la liste"}),o.jsx("li",{children:"Rédigez votre réponse dans le champ prévu"}),o.jsx("li",{children:"Assignez une catégorie appropriée"}),o.jsx("li",{children:'Cochez "Approuvé" si la question doit être visible publiquement'}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour publier votre réponse'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création manuelle de FAQ:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Vous pouvez également créer des questions manuellement en cliquant sur "Ajouter une FAQ" et en remplissant tous les champs du formulaire. Cela est utile pour anticiper les questions courantes que les utilisateurs pourraient avoir.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Répondez de manière claire et concise"}),o.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),o.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),o.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),o.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),o.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Un,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire de ressources vous permet d'ajouter des documents, liens et autres contenus utiles que les utilisateurs pourront consulter. Ces ressources peuvent être associées à des sections spécifiques du guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types de ressources supportés:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Documents (PDF, Word, Excel, PowerPoint)"}),o.jsx("li",{children:"Images"}),o.jsx("li",{children:"Liens vers des sites web externes"}),o.jsx("li",{children:"Fichiers audio et vidéo"}),o.jsx("li",{children:"Archives ZIP"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Ajout d'une ressource:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur "Ajouter une ressource"'}),o.jsx("li",{children:"Remplissez les champs du formulaire (titre, description, catégorie, phase)"}),o.jsx("li",{children:"Sélectionnez le type de ressource"}),o.jsx("li",{children:"Téléchargez le fichier via Dropbox ou indiquez l'URL pour un lien"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour ajouter la ressource'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation des ressources:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Les ressources sont organisées par phase du processus d'immigration (Post-CPS, Pendant les démarches, Pré-arrivée) et par catégorie. Cela facilite leur découverte par les utilisateurs."}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," Assurez-vous que tous les fichiers téléchargés sont exempts de virus et respectent les droits d'auteur. Privilégiez les documents officiels ou les ressources libres de droits."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Conseils pour la gestion des ressources:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres descriptifs pour faciliter la recherche"}),o.jsx("li",{children:"Incluez la date de publication/mise à jour dans la description"}),o.jsx("li",{children:"Vérifiez régulièrement que les liens externes fonctionnent toujours"}),o.jsx("li",{children:"Mettez à jour ou supprimez les ressources obsolètes"}),o.jsx("li",{children:"Utilisez des catégories cohérentes pour faciliter la navigation"})]})]})]}),o.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Sc,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestion des utilisateurs"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),o.jsx("li",{children:"Consultation des profils utilisateurs"}),o.jsx("li",{children:"Attribution/retrait des droits d'administration"}),o.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),o.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),o.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),o.jsx("li",{children:"Confirmez l'action"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),o.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),o.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),o.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),o.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),o.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(w4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Journal d'activité"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Connexions et inscriptions"}),o.jsx("li",{children:"Création, modification et suppression de contenu"}),o.jsx("li",{children:"Ajout et modification de ressources"}),o.jsx("li",{children:"Gestion des FAQ"}),o.jsx("li",{children:"Modifications des droits utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Type d'activité"}),o.jsx("li",{children:"Utilisateur (email)"}),o.jsx("li",{children:"Période (date de début et date de fin)"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Suivre les modifications apportées au contenu"}),o.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),o.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),o.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),o.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),o.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),o.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),o.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(R1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),o.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),o.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),o.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),o.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),o.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),o.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),o.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),o.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),o.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),o.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),o.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(_s,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},O5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(null),[s,i]=C.useState(!0),[a,c]=C.useState(""),[u,d]=C.useState("test1234"),f=async()=>{try{(await xn(Fe(ae,"test"))).empty?(await Dn(Fe(ae,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(p){const w=p;console.error("Erreur Firestore:",w),e(`Erreur Firestore: ${w.message}`)}},g=async()=>{try{const p=await bw(ct,a,u);r(p.user),await Gh(ct,a,u),e(w=>w+`
Authentification réussie!`)}catch(p){const w=p;if(w.code==="auth/email-already-in-use"){const I=await Gh(ct,a,u);r(I.user),e(k=>k+`
Connexion réussie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",p),e(I=>I+`
Erreur d'authentification: ${w.message}`)}};return C.useEffect(()=>{const p=ct.onAuthStateChanged(w=>{r(w),w&&c(w.email||""),i(!1)});return()=>p()},[]),s?o.jsx("div",{className:"p-4",children:"Chargement..."}):o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),o.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connecté"]}),o.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),o.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),o.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Dn(Fe(ae,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Dn(Fe(ae,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Dn(Fe(ae,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Dn(Fe(ae,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(p){e("Erreur lors de l'initialisation : "+p.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Email:"}),o.jsx("input",{type:"email",value:a,onChange:p=>c(p.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),o.jsx("input",{type:"password",value:u,onChange:p=>d(p.target.value),className:"border p-2 w-full max-w-md"})]}),o.jsx("button",{onClick:g,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:n?"Se connecter":"Créer un compte"})]}),o.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),o.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Upload Dropbox"}),o.jsx(U1,{})]})]})},F5=()=>o.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:o.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),o.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),o.jsxs(Y,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[o.jsx(R4,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),U5=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:i})=>{const[a,c]=C.useState(""),u=d=>{d.preventDefault(),n(a)};return Cc.useEffect(()=>{t||c("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:i||"Confirmez avec votre mot de passe"}),o.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||a==="",children:"Valider"})]})]})}):null},q5=()=>{var tt,$;const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState(null),[f,g]=C.useState(""),{currentUser:p}=bt(),[w,I]=C.useState((p==null?void 0:p.displayName)||""),[k,P]=C.useState((p==null?void 0:p.photoURL)||""),[b]=C.useState((p==null?void 0:p.email)||""),[E,N]=C.useState(""),[M,D]=C.useState(!1),[O,S]=C.useState(null),[y,_]=C.useState(null),[v,j]=C.useState(null);if(!p)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:o.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const R=ct.currentUser,A=R==null?void 0:R.providerData.some(W=>W.providerId==="password"),ce=async W=>{if(W.preventDefault(),S(null),_(null),!A){j("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:w,photoURL:k}),c("profile"),e(!0)},Oe=async W=>{if(W.preventDefault(),S(null),_(null),!A){j("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}g(E),c("password"),e(!0)},Et=async W=>{const J=ct.currentUser;if(!J)return;r(!0),i(null);const ue=Is.credential(J.email||"",W);try{await NA(J,ue),a==="profile"&&u?(await Ew(J,{displayName:u.displayName,photoURL:u.photoURL}),I(u.displayName),P(u.photoURL),_("Profil mis à jour !")):a==="password"&&f&&(await IA(J,f),N(""),_("Mot de passe mis à jour !")),e(!1),c(null),d(null),g("")}catch{i("Mot de passe incorrect.")}finally{r(!1),D(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[o.jsxs("div",{className:"relative mb-5",children:[k?o.jsx("img",{src:k,alt:w||b,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((tt=w==null?void 0:w.charAt(0))==null?void 0:tt.toUpperCase())||(($=b==null?void 0:b.charAt(0))==null?void 0:$.toUpperCase())}),(p==null?void 0:p.emailVerified)&&o.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(p==null?void 0:p.isAdmin)&&o.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[o.jsx(yp,{className:"w-4 h-4"})," Admin"]})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:w||b}),o.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:b}),o.jsxs("form",{onSubmit:ce,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:W=>I(W.target.value),placeholder:"Nom affiché",disabled:M})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:k,onChange:W=>P(W.target.value),placeholder:"URL de la photo",disabled:M})]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:M,children:"Sauvegarder le profil"})]}),o.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),A?o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:Oe,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),o.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:E,onChange:W=>N(W.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:M}),o.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:M||E.length<6,children:"Mettre à jour le mot de passe"})]}),o.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{S(null),_(null);try{await $h(ct,b),_("Un email de réinitialisation a été envoyé à votre adresse.")}catch{S("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):o.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),o.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{S(null),_(null);try{await $h(ct,b),_("Un email de réinitialisation a été envoyé à votre adresse.")}catch{S("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(O||y)&&o.jsx("div",{className:`mt-6 text-center text-sm font-medium ${O?"text-red-600":"text-green-600"}`,children:O||y}),v&&o.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:v}),o.jsx(U5,{open:t,onClose:()=>{e(!1),i(null),c(null)},onSubmit:Et,loading:n,error:s,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},z5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(!1),u=mn(),d=async f=>{f.preventDefault(),i(""),r(""),c(!0);try{await $h(ct,t),r("Un email de réinitialisation a été envoyé.")}catch{i("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&o.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),o.jsxs("form",{className:"space-y-6",onSubmit:d,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})};function B5(){return o.jsx(y4,{children:o.jsx(v4,{children:o.jsx(GT,{basename:"/Esig-prep-guide",children:o.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[o.jsx($4,{}),o.jsx("main",{className:"flex-grow",children:o.jsxs(VT,{children:[o.jsx(Be,{path:"/",element:o.jsx(H4,{})}),o.jsx(Be,{path:"/login",element:o.jsx(W4,{})}),o.jsx(Be,{path:"/register",element:o.jsx(Q4,{})}),o.jsx(Be,{path:"/reset-password",element:o.jsx(z5,{})}),o.jsx(Be,{path:"/test-firebase",element:o.jsx(O5,{})}),o.jsx(Be,{path:"/dashboard",element:o.jsx(cl,{children:o.jsx(K4,{})})}),o.jsx(Be,{path:"/resources",element:o.jsx(cl,{children:o.jsx(Y4,{})})}),o.jsx(Be,{path:"/faq",element:o.jsx(cl,{children:o.jsx(J4,{})})}),o.jsx(Be,{path:"/profile",element:o.jsx(cl,{children:o.jsx(q5,{})})}),o.jsx(Be,{path:"/admin",element:o.jsx(Wr,{children:o.jsx(e5,{})})}),o.jsx(Be,{path:"/admin/content",element:o.jsx(Wr,{children:o.jsx(t5,{})})}),o.jsx(Be,{path:"/admin/resources",element:o.jsx(Wr,{children:o.jsx(R5,{})})}),o.jsx(Be,{path:"/admin/users",element:o.jsx(Wr,{children:o.jsx(D5,{})})}),o.jsx(Be,{path:"/admin/users/:uid",element:o.jsx(Wr,{children:o.jsx(L5,{})})}),o.jsx(Be,{path:"/admin/activity",element:o.jsx(Wr,{children:o.jsx(M5,{})})}),o.jsx(Be,{path:"/admin/tutorial",element:o.jsx(Wr,{children:o.jsx(V5,{})})}),o.jsx(Be,{path:"*",element:o.jsx(F5,{})})]})}),o.jsx(G4,{})]})})})})}A_(document.getElementById("root")).render(o.jsx(C.StrictMode,{children:o.jsx(B5,{})}))});export default $5();
