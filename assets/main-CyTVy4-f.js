var gE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var F5=gE((W5,Ub)=>{function yE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gv={exports:{}},ku={},yv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var la=Symbol.for("react.element"),xE=Symbol.for("react.portal"),_E=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),bE=Symbol.for("react.profiler"),EE=Symbol.for("react.provider"),TE=Symbol.for("react.context"),IE=Symbol.for("react.forward_ref"),SE=Symbol.for("react.suspense"),NE=Symbol.for("react.memo"),AE=Symbol.for("react.lazy"),yg=Symbol.iterator;function kE(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var vv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xv=Object.assign,_v={};function bi(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||vv}bi.prototype.isReactComponent={};bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wv(){}wv.prototype=bi.prototype;function pf(t,e,n){this.props=t,this.context=e,this.refs=_v,this.updater=n||vv}var mf=pf.prototype=new wv;mf.constructor=pf;xv(mf,bi.prototype);mf.isPureReactComponent=!0;var vg=Array.isArray,bv=Object.prototype.hasOwnProperty,gf={current:null},Ev={key:!0,ref:!0,__self:!0,__source:!0};function Tv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bv.call(e,r)&&!Ev.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:la,type:t,key:i,ref:o,props:s,_owner:gf.current}}function CE(t,e){return{$$typeof:la,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===la}function jE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xg=/\/+/g;function Uc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jE(""+t.key):e.toString(36)}function hl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case la:case xE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Uc(o,0):r,vg(s)?(n="",t!=null&&(n=t.replace(xg,"$&/")+"/"),hl(s,e,n,"",function(d){return d})):s!=null&&(yf(s)&&(s=CE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(xg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",vg(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Uc(i,u);o+=hl(i,e,n,c,s)}else if(c=kE(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Uc(i,u++),o+=hl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function qa(t,e,n){if(t==null)return t;var r=[],s=0;return hl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function PE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},fl={transition:null},RE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:fl,ReactCurrentOwner:gf};function Iv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:qa,forEach:function(t,e,n){qa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return qa(t,function(){e++}),e},toArray:function(t){return qa(t,function(e){return e})||[]},only:function(t){if(!yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=bi;re.Fragment=_E;re.Profiler=bE;re.PureComponent=pf;re.StrictMode=wE;re.Suspense=SE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RE;re.act=Iv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)bv.call(e,c)&&!Ev.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:la,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:TE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EE,_context:t},t.Consumer=t};re.createElement=Tv;re.createFactory=function(t){var e=Tv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:IE,render:t}};re.isValidElement=yf;re.lazy=function(t){return{$$typeof:AE,_payload:{_status:-1,_result:t},_init:PE}};re.memo=function(t,e){return{$$typeof:NE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};re.unstable_act=Iv;re.useCallback=function(t,e){return _t.current.useCallback(t,e)};re.useContext=function(t){return _t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};re.useEffect=function(t,e){return _t.current.useEffect(t,e)};re.useId=function(){return _t.current.useId()};re.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return _t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};re.useRef=function(t){return _t.current.useRef(t)};re.useState=function(t){return _t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return _t.current.useTransition()};re.version="18.3.1";yv.exports=re;var j=yv.exports;const Cu=vE(j),DE=yE({__proto__:null,default:Cu},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE=j,ME=Symbol.for("react.element"),OE=Symbol.for("react.fragment"),VE=Object.prototype.hasOwnProperty,FE=LE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UE={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VE.call(e,r)&&!UE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ME,type:t,key:i,ref:o,props:s,_owner:FE.current}}ku.Fragment=OE;ku.jsx=Sv;ku.jsxs=Sv;gv.exports=ku;var a=gv.exports,Nv={exports:{}},Ft={},Av={exports:{}},kv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var Y=$.length;$.push(G);e:for(;0<Y;){var ce=Y-1>>>1,pe=$[ce];if(0<s(pe,G))$[ce]=G,$[Y]=pe,Y=ce;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],Y=$.pop();if(Y!==G){$[0]=Y;e:for(var ce=0,pe=$.length,Ie=pe>>>1;ce<Ie;){var qt=2*(ce+1)-1,zt=$[qt],Xt=qt+1,jt=$[Xt];if(0>s(zt,Y))Xt<pe&&0>s(jt,zt)?($[ce]=jt,$[Xt]=Y,ce=Xt):($[ce]=zt,$[qt]=Y,ce=qt);else if(Xt<pe&&0>s(jt,Y))$[ce]=jt,$[Xt]=Y,ce=Xt;else break e}}return G}function s($,G){var Y=$.sortIndex-G.sortIndex;return Y!==0?Y:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],f=1,g=null,m=3,w=!1,S=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function M($){if(C=!1,T($),!S)if(n(c)!==null)S=!0,bt(D);else{var G=n(d);G!==null&&tt(M,G.startTime-$)}}function D($,G){S=!1,C&&(C=!1,b(y),y=-1),w=!0;var Y=m;try{for(T(G),g=n(c);g!==null&&(!(g.expirationTime>G)||$&&!k());){var ce=g.callback;if(typeof ce=="function"){g.callback=null,m=g.priorityLevel;var pe=ce(g.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?g.callback=pe:g===n(c)&&r(c),T(G)}else r(c);g=n(c)}if(g!==null)var Ie=!0;else{var qt=n(d);qt!==null&&tt(M,qt.startTime-G),Ie=!1}return Ie}finally{g=null,m=Y,w=!1}}var V=!1,N=null,y=-1,_=5,v=-1;function k(){return!(t.unstable_now()-v<_)}function R(){if(N!==null){var $=t.unstable_now();v=$;var G=!0;try{G=N(!0,$)}finally{G?A():(V=!1,N=null)}}else V=!1}var A;if(typeof E=="function")A=function(){E(R)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ve=ue.port2;ue.port1.onmessage=R,A=function(){Ve.postMessage(null)}}else A=function(){P(R,0)};function bt($){N=$,V||(V=!0,A())}function tt($,G){y=P(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,bt(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var Y=m;m=G;try{return $()}finally{m=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=m;m=$;try{return G()}finally{m=Y}},t.unstable_scheduleCallback=function($,G,Y){var ce=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ce+Y:ce):Y=ce,$){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Y+pe,$={id:f++,callback:G,priorityLevel:$,startTime:Y,expirationTime:pe,sortIndex:-1},Y>ce?($.sortIndex=Y,e(d,$),n(c)===null&&$===n(d)&&(C?(b(y),y=-1):C=!0,tt(M,Y-ce))):($.sortIndex=pe,e(c,$),S||w||(S=!0,bt(D))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var G=m;return function(){var Y=m;m=G;try{return $.apply(this,arguments)}finally{m=Y}}}})(kv);Av.exports=kv;var qE=Av.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE=j,Vt=qE;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cv=new Set,Co={};function xs(t,e){li(t,e),li(t+"Capture",e)}function li(t,e){for(Co[t]=e,t=0;t<e.length;t++)Cv.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fd=Object.prototype.hasOwnProperty,BE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_g={},wg={};function $E(t){return Fd.call(wg,t)?!0:Fd.call(_g,t)?!1:BE.test(t)?wg[t]=!0:(_g[t]=!0,!1)}function HE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function WE(t,e,n,r){if(e===null||typeof e>"u"||HE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vf=/[\-:]([a-z])/g;function xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vf,xf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _f(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(WE(e,n,s,r)&&(n=null),r||s===null?$E(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=zE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,za=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),wf=Symbol.for("react.strict_mode"),Ud=Symbol.for("react.profiler"),jv=Symbol.for("react.provider"),Pv=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),qd=Symbol.for("react.suspense"),zd=Symbol.for("react.suspense_list"),Ef=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),Rv=Symbol.for("react.offscreen"),bg=Symbol.iterator;function Gi(t){return t===null||typeof t!="object"?null:(t=bg&&t[bg]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,qc;function no(t){if(qc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);qc=e&&e[1]||""}return`
`+qc+t}var zc=!1;function Bc(t,e){if(!t||zc)return"";zc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{zc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?no(t):""}function GE(t){switch(t.tag){case 5:return no(t.type);case 16:return no("Lazy");case 13:return no("Suspense");case 19:return no("SuspenseList");case 0:case 2:case 15:return t=Bc(t.type,!1),t;case 11:return t=Bc(t.type.render,!1),t;case 1:return t=Bc(t.type,!0),t;default:return""}}function Bd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Os:return"Portal";case Ud:return"Profiler";case wf:return"StrictMode";case qd:return"Suspense";case zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pv:return(t.displayName||"Context")+".Consumer";case jv:return(t._context.displayName||"Context")+".Provider";case bf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ef:return e=t.displayName||null,e!==null?e:Bd(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return Bd(t(e))}catch{}}return null}function KE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bd(e);case 8:return e===wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QE(t){var e=Dv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ba(t){t._valueTracker||(t._valueTracker=QE(t))}function Lv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Dv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $d(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mv(t,e){e=e.checked,e!=null&&_f(t,"checked",e,!1)}function Hd(t,e){Mv(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wd(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wd(t,e,n){(e!=="number"||Ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ro=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(ro(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function Ov(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Vv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Vv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $a,Fv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($a=$a||document.createElement("div"),$a.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$a.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YE=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){YE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),po[e]=po[t]})});function Uv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||po.hasOwnProperty(t)&&po[t]?(""+e).trim():e+"px"}function qv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Uv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var JE=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qd(t,e){if(e){if(JE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Yd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jd=null;function Tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xd=null,Js=null,Xs=null;function Ng(t){if(t=da(t)){if(typeof Xd!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Lu(e),Xd(t.stateNode,t.type,e))}}function zv(t){Js?Xs?Xs.push(t):Xs=[t]:Js=t}function Bv(){if(Js){var t=Js,e=Xs;if(Xs=Js=null,Ng(t),e)for(t=0;t<e.length;t++)Ng(e[t])}}function $v(t,e){return t(e)}function Hv(){}var $c=!1;function Wv(t,e,n){if($c)return t(e,n);$c=!0;try{return $v(t,e,n)}finally{$c=!1,(Js!==null||Xs!==null)&&(Hv(),Bv())}}function Po(t,e){var n=t.stateNode;if(n===null)return null;var r=Lu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Zd=!1;if(Bn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Zd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Zd=!1}function XE(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var mo=!1,Ol=null,Vl=!1,eh=null,ZE={onError:function(t){mo=!0,Ol=t}};function e2(t,e,n,r,s,i,o,u,c){mo=!1,Ol=null,XE.apply(ZE,arguments)}function t2(t,e,n,r,s,i,o,u,c){if(e2.apply(this,arguments),mo){if(mo){var d=Ol;mo=!1,Ol=null}else throw Error(q(198));Vl||(Vl=!0,eh=d)}}function _s(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(_s(t)!==t)throw Error(q(188))}function n2(t){var e=t.alternate;if(!e){if(e=_s(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ag(s),t;if(i===r)return Ag(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function Kv(t){return t=n2(t),t!==null?Qv(t):null}function Qv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qv(t);if(e!==null)return e;t=t.sibling}return null}var Yv=Vt.unstable_scheduleCallback,kg=Vt.unstable_cancelCallback,r2=Vt.unstable_shouldYield,s2=Vt.unstable_requestPaint,Re=Vt.unstable_now,i2=Vt.unstable_getCurrentPriorityLevel,If=Vt.unstable_ImmediatePriority,Jv=Vt.unstable_UserBlockingPriority,Fl=Vt.unstable_NormalPriority,o2=Vt.unstable_LowPriority,Xv=Vt.unstable_IdlePriority,ju=null,_n=null;function a2(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(ju,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:c2,l2=Math.log,u2=Math.LN2;function c2(t){return t>>>=0,t===0?32:31-(l2(t)/u2|0)|0}var Ha=64,Wa=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=so(u):(i&=o,i!==0&&(r=so(i)))}else o=n&~s,o!==0?r=so(o):i!==0&&(r=so(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function d2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function h2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-an(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=d2(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zv(){var t=Ha;return Ha<<=1,!(Ha&4194240)&&(Ha=64),t}function Hc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ua(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function f2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function ex(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tx,Nf,nx,rx,sx,nh=!1,Ga=[],vr=null,xr=null,_r=null,Ro=new Map,Do=new Map,lr=[],p2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cg(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Ro.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(e.pointerId)}}function Qi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=da(e),e!==null&&Nf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function m2(t,e,n,r,s){switch(e){case"focusin":return vr=Qi(vr,t,e,n,r,s),!0;case"dragenter":return xr=Qi(xr,t,e,n,r,s),!0;case"mouseover":return _r=Qi(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ro.set(i,Qi(Ro.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Do.set(i,Qi(Do.get(i)||null,t,e,n,r,s)),!0}return!1}function ix(t){var e=Jr(t.target);if(e!==null){var n=_s(e);if(n!==null){if(e=n.tag,e===13){if(e=Gv(n),e!==null){t.blockedOn=e,sx(t.priority,function(){nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jd=r,n.target.dispatchEvent(r),Jd=null}else return e=da(n),e!==null&&Nf(e),t.blockedOn=n,!1;e.shift()}return!0}function jg(t,e,n){pl(t)&&n.delete(e)}function g2(){nh=!1,vr!==null&&pl(vr)&&(vr=null),xr!==null&&pl(xr)&&(xr=null),_r!==null&&pl(_r)&&(_r=null),Ro.forEach(jg),Do.forEach(jg)}function Yi(t,e){t.blockedOn===e&&(t.blockedOn=null,nh||(nh=!0,Vt.unstable_scheduleCallback(Vt.unstable_NormalPriority,g2)))}function Lo(t){function e(s){return Yi(s,t)}if(0<Ga.length){Yi(Ga[0],t);for(var n=1;n<Ga.length;n++){var r=Ga[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&Yi(vr,t),xr!==null&&Yi(xr,t),_r!==null&&Yi(_r,t),Ro.forEach(e),Do.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)ix(n),n.blockedOn===null&&lr.shift()}var Zs=Jn.ReactCurrentBatchConfig,ql=!0;function y2(t,e,n,r){var s=me,i=Zs.transition;Zs.transition=null;try{me=1,Af(t,e,n,r)}finally{me=s,Zs.transition=i}}function v2(t,e,n,r){var s=me,i=Zs.transition;Zs.transition=null;try{me=4,Af(t,e,n,r)}finally{me=s,Zs.transition=i}}function Af(t,e,n,r){if(ql){var s=rh(t,e,n,r);if(s===null)td(t,e,r,zl,n),Cg(t,r);else if(m2(s,t,e,n,r))r.stopPropagation();else if(Cg(t,r),e&4&&-1<p2.indexOf(t)){for(;s!==null;){var i=da(s);if(i!==null&&tx(i),i=rh(t,e,n,r),i===null&&td(t,e,r,zl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else td(t,e,r,null,n)}}var zl=null;function rh(t,e,n,r){if(zl=null,t=Tf(r),t=Jr(t),t!==null)if(e=_s(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return zl=t,null}function ox(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(i2()){case If:return 1;case Jv:return 4;case Fl:case o2:return 16;case Xv:return 536870912;default:return 16}default:return 16}}var fr=null,kf=null,ml=null;function ax(){if(ml)return ml;var t,e=kf,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ml=s.slice(t,1<r?1-r:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ka(){return!0}function Pg(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ka:Pg,this.isPropagationStopped=Pg,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ka)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ka)},persist:function(){},isPersistent:Ka}),e}var Ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cf=Ut(Ei),ca=Ae({},Ei,{view:0,detail:0}),x2=Ut(ca),Wc,Gc,Ji,Pu=Ae({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(Wc=t.screenX-Ji.screenX,Gc=t.screenY-Ji.screenY):Gc=Wc=0,Ji=t),Wc)},movementY:function(t){return"movementY"in t?t.movementY:Gc}}),Rg=Ut(Pu),_2=Ae({},Pu,{dataTransfer:0}),w2=Ut(_2),b2=Ae({},ca,{relatedTarget:0}),Kc=Ut(b2),E2=Ae({},Ei,{animationName:0,elapsedTime:0,pseudoElement:0}),T2=Ut(E2),I2=Ae({},Ei,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),S2=Ut(I2),N2=Ae({},Ei,{data:0}),Dg=Ut(N2),A2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=C2[t])?!!e[t]:!1}function jf(){return j2}var P2=Ae({},ca,{key:function(t){if(t.key){var e=A2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?k2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jf,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R2=Ut(P2),D2=Ae({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lg=Ut(D2),L2=Ae({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jf}),M2=Ut(L2),O2=Ae({},Ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),V2=Ut(O2),F2=Ae({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),U2=Ut(F2),q2=[9,13,27,32],Pf=Bn&&"CompositionEvent"in window,go=null;Bn&&"documentMode"in document&&(go=document.documentMode);var z2=Bn&&"TextEvent"in window&&!go,lx=Bn&&(!Pf||go&&8<go&&11>=go),Mg=" ",Og=!1;function ux(t,e){switch(t){case"keyup":return q2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function B2(t,e){switch(t){case"compositionend":return cx(e);case"keypress":return e.which!==32?null:(Og=!0,Mg);case"textInput":return t=e.data,t===Mg&&Og?null:t;default:return null}}function $2(t,e){if(Fs)return t==="compositionend"||!Pf&&ux(t,e)?(t=ax(),ml=kf=fr=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lx&&e.locale!=="ko"?null:e.data;default:return null}}var H2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H2[t.type]:e==="textarea"}function dx(t,e,n,r){zv(r),e=Bl(e,"onChange"),0<e.length&&(n=new Cf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yo=null,Mo=null;function W2(t){bx(t,0)}function Ru(t){var e=zs(t);if(Lv(e))return t}function G2(t,e){if(t==="change")return e}var hx=!1;if(Bn){var Qc;if(Bn){var Yc="oninput"in document;if(!Yc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Yc=typeof Fg.oninput=="function"}Qc=Yc}else Qc=!1;hx=Qc&&(!document.documentMode||9<document.documentMode)}function Ug(){yo&&(yo.detachEvent("onpropertychange",fx),Mo=yo=null)}function fx(t){if(t.propertyName==="value"&&Ru(Mo)){var e=[];dx(e,Mo,t,Tf(t)),Wv(W2,e)}}function K2(t,e,n){t==="focusin"?(Ug(),yo=e,Mo=n,yo.attachEvent("onpropertychange",fx)):t==="focusout"&&Ug()}function Q2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ru(Mo)}function Y2(t,e){if(t==="click")return Ru(e)}function J2(t,e){if(t==="input"||t==="change")return Ru(e)}function X2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:X2;function Oo(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Fd.call(e,s)||!cn(t[s],e[s]))return!1}return!0}function qg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,e){var n=qg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qg(n)}}function px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mx(){for(var t=window,e=Ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ml(t.document)}return e}function Rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Z2(t){var e=mx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(r!==null&&Rf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zg(n,i);var o=zg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eT=Bn&&"documentMode"in document&&11>=document.documentMode,Us=null,sh=null,vo=null,ih=!1;function Bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ih||Us==null||Us!==Ml(r)||(r=Us,"selectionStart"in r&&Rf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Oo(vo,r)||(vo=r,r=Bl(sh,"onSelect"),0<r.length&&(e=new Cf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function Qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var qs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Jc={},gx={};Bn&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Du(t){if(Jc[t])return Jc[t];if(!qs[t])return t;var e=qs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gx)return Jc[t]=e[n];return t}var yx=Du("animationend"),vx=Du("animationiteration"),xx=Du("animationstart"),_x=Du("transitionend"),wx=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){wx.set(t,e),xs(e,[t])}for(var Xc=0;Xc<$g.length;Xc++){var Zc=$g[Xc],tT=Zc.toLowerCase(),nT=Zc[0].toUpperCase()+Zc.slice(1);Lr(tT,"on"+nT)}Lr(yx,"onAnimationEnd");Lr(vx,"onAnimationIteration");Lr(xx,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(_x,"onTransitionEnd");li("onMouseEnter",["mouseout","mouseover"]);li("onMouseLeave",["mouseout","mouseover"]);li("onPointerEnter",["pointerout","pointerover"]);li("onPointerLeave",["pointerout","pointerover"]);xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rT=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,t2(r,e,void 0,t),t.currentTarget=null}function bx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Hg(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Hg(s,u,d),i=c}}}if(Vl)throw t=eh,Vl=!1,eh=null,t}function _e(t,e){var n=e[ch];n===void 0&&(n=e[ch]=new Set);var r=t+"__bubble";n.has(r)||(Ex(e,t,2,!1),n.add(r))}function ed(t,e,n){var r=0;e&&(r|=4),Ex(n,t,r,e)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[Ya]){t[Ya]=!0,Cv.forEach(function(n){n!=="selectionchange"&&(rT.has(n)||ed(n,!1,t),ed(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ya]||(e[Ya]=!0,ed("selectionchange",!1,e))}}function Ex(t,e,n,r){switch(ox(e)){case 1:var s=y2;break;case 4:s=v2;break;default:s=Af}n=s.bind(null,e,n,t),s=void 0,!Zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function td(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Jr(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}Wv(function(){var d=i,f=Tf(n),g=[];e:{var m=wx.get(t);if(m!==void 0){var w=Cf,S=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":w=R2;break;case"focusin":S="focus",w=Kc;break;case"focusout":S="blur",w=Kc;break;case"beforeblur":case"afterblur":w=Kc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=w2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=M2;break;case yx:case vx:case xx:w=T2;break;case _x:w=V2;break;case"scroll":w=x2;break;case"wheel":w=U2;break;case"copy":case"cut":case"paste":w=S2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Lg}var C=(e&4)!==0,P=!C&&t==="scroll",b=C?m!==null?m+"Capture":null:m;C=[];for(var E=d,T;E!==null;){T=E;var M=T.stateNode;if(T.tag===5&&M!==null&&(T=M,b!==null&&(M=Po(E,b),M!=null&&C.push(Fo(E,M,T)))),P)break;E=E.return}0<C.length&&(m=new w(m,S,null,n,f),g.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",m&&n!==Jd&&(S=n.relatedTarget||n.fromElement)&&(Jr(S)||S[$n]))break e;if((w||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?Jr(S):null,S!==null&&(P=_s(S),S!==P||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(C=Rg,M="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(C=Lg,M="onPointerLeave",b="onPointerEnter",E="pointer"),P=w==null?m:zs(w),T=S==null?m:zs(S),m=new C(M,E+"leave",w,n,f),m.target=P,m.relatedTarget=T,M=null,Jr(f)===d&&(C=new C(b,E+"enter",S,n,f),C.target=T,C.relatedTarget=P,M=C),P=M,w&&S)t:{for(C=w,b=S,E=0,T=C;T;T=Ps(T))E++;for(T=0,M=b;M;M=Ps(M))T++;for(;0<E-T;)C=Ps(C),E--;for(;0<T-E;)b=Ps(b),T--;for(;E--;){if(C===b||b!==null&&C===b.alternate)break t;C=Ps(C),b=Ps(b)}C=null}else C=null;w!==null&&Wg(g,m,w,C,!1),S!==null&&P!==null&&Wg(g,P,S,C,!0)}}e:{if(m=d?zs(d):window,w=m.nodeName&&m.nodeName.toLowerCase(),w==="select"||w==="input"&&m.type==="file")var D=G2;else if(Vg(m))if(hx)D=J2;else{D=Q2;var V=K2}else(w=m.nodeName)&&w.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=Y2);if(D&&(D=D(t,d))){dx(g,D,n,f);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Wd(m,"number",m.value)}switch(V=d?zs(d):window,t){case"focusin":(Vg(V)||V.contentEditable==="true")&&(Us=V,sh=d,vo=null);break;case"focusout":vo=sh=Us=null;break;case"mousedown":ih=!0;break;case"contextmenu":case"mouseup":case"dragend":ih=!1,Bg(g,n,f);break;case"selectionchange":if(eT)break;case"keydown":case"keyup":Bg(g,n,f)}var N;if(Pf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Fs?ux(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(lx&&n.locale!=="ko"&&(Fs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Fs&&(N=ax()):(fr=f,kf="value"in fr?fr.value:fr.textContent,Fs=!0)),V=Bl(d,y),0<V.length&&(y=new Dg(y,t,null,n,f),g.push({event:y,listeners:V}),N?y.data=N:(N=cx(n),N!==null&&(y.data=N)))),(N=z2?B2(t,n):$2(t,n))&&(d=Bl(d,"onBeforeInput"),0<d.length&&(f=new Dg("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=N))}bx(g,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Po(t,n),i!=null&&r.unshift(Fo(t,i,s)),i=Po(t,e),i!=null&&r.push(Fo(t,i,s))),t=t.return}return r}function Ps(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=Po(n,i),c!=null&&o.unshift(Fo(n,c,u))):s||(c=Po(n,i),c!=null&&o.push(Fo(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function Gg(t){return(typeof t=="string"?t:""+t).replace(sT,`
`).replace(iT,"")}function Ja(t,e,n){if(e=Gg(e),Gg(t)!==e&&n)throw Error(q(425))}function $l(){}var oh=null,ah=null;function lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,oT=typeof clearTimeout=="function"?clearTimeout:void 0,Kg=typeof Promise=="function"?Promise:void 0,aT=typeof queueMicrotask=="function"?queueMicrotask:typeof Kg<"u"?function(t){return Kg.resolve(null).then(t).catch(lT)}:uh;function lT(t){setTimeout(function(){throw t})}function nd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ti=Math.random().toString(36).slice(2),xn="__reactFiber$"+Ti,Uo="__reactProps$"+Ti,$n="__reactContainer$"+Ti,ch="__reactEvents$"+Ti,uT="__reactListeners$"+Ti,cT="__reactHandles$"+Ti;function Jr(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qg(t);t!==null;){if(n=t[xn])return n;t=Qg(t)}return e}t=n,n=t.parentNode}return null}function da(t){return t=t[xn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Lu(t){return t[Uo]||null}var dh=[],Bs=-1;function Mr(t){return{current:t}}function be(t){0>Bs||(t.current=dh[Bs],dh[Bs]=null,Bs--)}function ve(t,e){Bs++,dh[Bs]=t.current,t.current=e}var jr={},ht=Mr(jr),St=Mr(!1),os=jr;function ui(t,e){var n=t.type.contextTypes;if(!n)return jr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Nt(t){return t=t.childContextTypes,t!=null}function Hl(){be(St),be(ht)}function Yg(t,e,n){if(ht.current!==jr)throw Error(q(168));ve(ht,e),ve(St,n)}function Tx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,KE(t)||"Unknown",s));return Ae({},n,r)}function Wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||jr,os=ht.current,ve(ht,t),ve(St,St.current),!0}function Jg(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Tx(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,be(St),be(ht),ve(ht,t)):be(St),ve(St,n)}var jn=null,Mu=!1,rd=!1;function Ix(t){jn===null?jn=[t]:jn.push(t)}function dT(t){Mu=!0,Ix(t)}function Or(){if(!rd&&jn!==null){rd=!0;var t=0,e=me;try{var n=jn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,Mu=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),Yv(If,Or),s}finally{me=e,rd=!1}}return null}var $s=[],Hs=0,Gl=null,Kl=0,Bt=[],$t=0,as=null,Ln=1,Mn="";function Kr(t,e){$s[Hs++]=Kl,$s[Hs++]=Gl,Gl=t,Kl=e}function Sx(t,e,n){Bt[$t++]=Ln,Bt[$t++]=Mn,Bt[$t++]=as,as=t;var r=Ln;t=Mn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ln=1<<32-an(e)+s|n<<s|r,Mn=i+t}else Ln=1<<i|n<<s|r,Mn=t}function Df(t){t.return!==null&&(Kr(t,1),Sx(t,1,0))}function Lf(t){for(;t===Gl;)Gl=$s[--Hs],$s[Hs]=null,Kl=$s[--Hs],$s[Hs]=null;for(;t===as;)as=Bt[--$t],Bt[$t]=null,Mn=Bt[--$t],Bt[$t]=null,Ln=Bt[--$t],Bt[$t]=null}var Mt=null,Dt=null,Ee=!1,sn=null;function Nx(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Mt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Mt=t,Dt=null,!0):!1;default:return!1}}function hh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fh(t){if(Ee){var e=Dt;if(e){var n=e;if(!Xg(t,e)){if(hh(t))throw Error(q(418));e=wr(n.nextSibling);var r=Mt;e&&Xg(t,e)?Nx(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Mt=t)}}else{if(hh(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ee=!1,Mt=t}}}function Zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Mt=t}function Xa(t){if(t!==Mt)return!1;if(!Ee)return Zg(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lh(t.type,t.memoizedProps)),e&&(e=Dt)){if(hh(t))throw Ax(),Error(q(418));for(;e;)Nx(t,e),e=wr(e.nextSibling)}if(Zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Mt?wr(t.stateNode.nextSibling):null;return!0}function Ax(){for(var t=Dt;t;)t=wr(t.nextSibling)}function ci(){Dt=Mt=null,Ee=!1}function Mf(t){sn===null?sn=[t]:sn.push(t)}var hT=Jn.ReactCurrentBatchConfig;function Xi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function e0(t){var e=t._init;return e(t._payload)}function kx(t){function e(b,E){if(t){var T=b.deletions;T===null?(b.deletions=[E],b.flags|=16):T.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function r(b,E){for(b=new Map;E!==null;)E.key!==null?b.set(E.key,E):b.set(E.index,E),E=E.sibling;return b}function s(b,E){return b=Ir(b,E),b.index=0,b.sibling=null,b}function i(b,E,T){return b.index=T,t?(T=b.alternate,T!==null?(T=T.index,T<E?(b.flags|=2,E):T):(b.flags|=2,E)):(b.flags|=1048576,E)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,E,T,M){return E===null||E.tag!==6?(E=cd(T,b.mode,M),E.return=b,E):(E=s(E,T),E.return=b,E)}function c(b,E,T,M){var D=T.type;return D===Vs?f(b,E,T.props.children,M,T.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===or&&e0(D)===E.type)?(M=s(E,T.props),M.ref=Xi(b,E,T),M.return=b,M):(M=El(T.type,T.key,T.props,null,b.mode,M),M.ref=Xi(b,E,T),M.return=b,M)}function d(b,E,T,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=dd(T,b.mode,M),E.return=b,E):(E=s(E,T.children||[]),E.return=b,E)}function f(b,E,T,M,D){return E===null||E.tag!==7?(E=ss(T,b.mode,M,D),E.return=b,E):(E=s(E,T),E.return=b,E)}function g(b,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=cd(""+E,b.mode,T),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case za:return T=El(E.type,E.key,E.props,null,b.mode,T),T.ref=Xi(b,null,E),T.return=b,T;case Os:return E=dd(E,b.mode,T),E.return=b,E;case or:var M=E._init;return g(b,M(E._payload),T)}if(ro(E)||Gi(E))return E=ss(E,b.mode,T,null),E.return=b,E;Za(b,E)}return null}function m(b,E,T,M){var D=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:u(b,E,""+T,M);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case za:return T.key===D?c(b,E,T,M):null;case Os:return T.key===D?d(b,E,T,M):null;case or:return D=T._init,m(b,E,D(T._payload),M)}if(ro(T)||Gi(T))return D!==null?null:f(b,E,T,M,null);Za(b,T)}return null}function w(b,E,T,M,D){if(typeof M=="string"&&M!==""||typeof M=="number")return b=b.get(T)||null,u(E,b,""+M,D);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case za:return b=b.get(M.key===null?T:M.key)||null,c(E,b,M,D);case Os:return b=b.get(M.key===null?T:M.key)||null,d(E,b,M,D);case or:var V=M._init;return w(b,E,T,V(M._payload),D)}if(ro(M)||Gi(M))return b=b.get(T)||null,f(E,b,M,D,null);Za(E,M)}return null}function S(b,E,T,M){for(var D=null,V=null,N=E,y=E=0,_=null;N!==null&&y<T.length;y++){N.index>y?(_=N,N=null):_=N.sibling;var v=m(b,N,T[y],M);if(v===null){N===null&&(N=_);break}t&&N&&v.alternate===null&&e(b,N),E=i(v,E,y),V===null?D=v:V.sibling=v,V=v,N=_}if(y===T.length)return n(b,N),Ee&&Kr(b,y),D;if(N===null){for(;y<T.length;y++)N=g(b,T[y],M),N!==null&&(E=i(N,E,y),V===null?D=N:V.sibling=N,V=N);return Ee&&Kr(b,y),D}for(N=r(b,N);y<T.length;y++)_=w(N,b,y,T[y],M),_!==null&&(t&&_.alternate!==null&&N.delete(_.key===null?y:_.key),E=i(_,E,y),V===null?D=_:V.sibling=_,V=_);return t&&N.forEach(function(k){return e(b,k)}),Ee&&Kr(b,y),D}function C(b,E,T,M){var D=Gi(T);if(typeof D!="function")throw Error(q(150));if(T=D.call(T),T==null)throw Error(q(151));for(var V=D=null,N=E,y=E=0,_=null,v=T.next();N!==null&&!v.done;y++,v=T.next()){N.index>y?(_=N,N=null):_=N.sibling;var k=m(b,N,v.value,M);if(k===null){N===null&&(N=_);break}t&&N&&k.alternate===null&&e(b,N),E=i(k,E,y),V===null?D=k:V.sibling=k,V=k,N=_}if(v.done)return n(b,N),Ee&&Kr(b,y),D;if(N===null){for(;!v.done;y++,v=T.next())v=g(b,v.value,M),v!==null&&(E=i(v,E,y),V===null?D=v:V.sibling=v,V=v);return Ee&&Kr(b,y),D}for(N=r(b,N);!v.done;y++,v=T.next())v=w(N,b,y,v.value,M),v!==null&&(t&&v.alternate!==null&&N.delete(v.key===null?y:v.key),E=i(v,E,y),V===null?D=v:V.sibling=v,V=v);return t&&N.forEach(function(R){return e(b,R)}),Ee&&Kr(b,y),D}function P(b,E,T,M){if(typeof T=="object"&&T!==null&&T.type===Vs&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case za:e:{for(var D=T.key,V=E;V!==null;){if(V.key===D){if(D=T.type,D===Vs){if(V.tag===7){n(b,V.sibling),E=s(V,T.props.children),E.return=b,b=E;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===or&&e0(D)===V.type){n(b,V.sibling),E=s(V,T.props),E.ref=Xi(b,V,T),E.return=b,b=E;break e}n(b,V);break}else e(b,V);V=V.sibling}T.type===Vs?(E=ss(T.props.children,b.mode,M,T.key),E.return=b,b=E):(M=El(T.type,T.key,T.props,null,b.mode,M),M.ref=Xi(b,E,T),M.return=b,b=M)}return o(b);case Os:e:{for(V=T.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(b,E.sibling),E=s(E,T.children||[]),E.return=b,b=E;break e}else{n(b,E);break}else e(b,E);E=E.sibling}E=dd(T,b.mode,M),E.return=b,b=E}return o(b);case or:return V=T._init,P(b,E,V(T._payload),M)}if(ro(T))return S(b,E,T,M);if(Gi(T))return C(b,E,T,M);Za(b,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(b,E.sibling),E=s(E,T),E.return=b,b=E):(n(b,E),E=cd(T,b.mode,M),E.return=b,b=E),o(b)):n(b,E)}return P}var di=kx(!0),Cx=kx(!1),Ql=Mr(null),Yl=null,Ws=null,Of=null;function Vf(){Of=Ws=Yl=null}function Ff(t){var e=Ql.current;be(Ql),t._currentValue=e}function ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ei(t,e){Yl=t,Of=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Of!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(Yl===null)throw Error(q(308));Ws=t,Yl.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var Xr=null;function Uf(t){Xr===null?Xr=[t]:Xr.push(t)}function jx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Uf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Px(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Un(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Uf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function yl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sf(t,n)}}function t0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jl(t,e,n,r){var s=t.updateQueue;ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==o&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,u=i;do{var m=u.lane,w=u.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,C=u;switch(m=e,w=n,C.tag){case 1:if(S=C.payload,typeof S=="function"){g=S.call(w,g,m);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,m=typeof S=="function"?S.call(w,g,m):S,m==null)break e;g=Ae({},g,m);break e;case 2:ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[u]:m.push(u))}else w={eventTime:w,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=w,c=g):f=f.next=w,o|=m;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;m=u,u=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);us|=o,t.lanes=o,t.memoizedState=g}}function n0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var ha={},wn=Mr(ha),qo=Mr(ha),zo=Mr(ha);function Zr(t){if(t===ha)throw Error(q(174));return t}function zf(t,e){switch(ve(zo,e),ve(qo,t),ve(wn,ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kd(e,t)}be(wn),ve(wn,e)}function hi(){be(wn),be(qo),be(zo)}function Rx(t){Zr(zo.current);var e=Zr(wn.current),n=Kd(e,t.type);e!==n&&(ve(qo,t),ve(wn,n))}function Bf(t){qo.current===t&&(be(wn),be(qo))}var Se=Mr(0);function Xl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sd=[];function $f(){for(var t=0;t<sd.length;t++)sd[t]._workInProgressVersionPrimary=null;sd.length=0}var vl=Jn.ReactCurrentDispatcher,id=Jn.ReactCurrentBatchConfig,ls=0,Ne=null,Ue=null,$e=null,Zl=!1,xo=!1,Bo=0,fT=0;function it(){throw Error(q(321))}function Hf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function Wf(t,e,n,r,s,i){if(ls=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vl.current=t===null||t.memoizedState===null?yT:vT,t=n(r,s),xo){i=0;do{if(xo=!1,Bo=0,25<=i)throw Error(q(301));i+=1,$e=Ue=null,e.updateQueue=null,vl.current=xT,t=n(r,s)}while(xo)}if(vl.current=eu,e=Ue!==null&&Ue.next!==null,ls=0,$e=Ue=Ne=null,Zl=!1,e)throw Error(q(300));return t}function Gf(){var t=Bo!==0;return Bo=0,t}function yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Ne.memoizedState=$e=t:$e=$e.next=t,$e}function Yt(){if(Ue===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=$e===null?Ne.memoizedState:$e.next;if(e!==null)$e=e,Ue=t;else{if(t===null)throw Error(q(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},$e===null?Ne.memoizedState=$e=t:$e=$e.next=t}return $e}function $o(t,e){return typeof e=="function"?e(t):e}function od(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var f=d.lane;if((ls&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,o=r):c=c.next=g,Ne.lanes|=f,us|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,cn(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ad(t){var e=Yt(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cn(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Dx(){}function Lx(t,e){var n=Ne,r=Yt(),s=e(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,Kf(Vx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Ho(9,Ox.bind(null,n,r,s,e),void 0,null),He===null)throw Error(q(349));ls&30||Mx(n,e,s)}return s}function Mx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ox(t,e,n,r){e.value=n,e.getSnapshot=r,Fx(e)&&Ux(t)}function Vx(t,e,n){return n(function(){Fx(e)&&Ux(t)})}function Fx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function Ux(t){var e=Hn(t,1);e!==null&&ln(e,t,1,-1)}function r0(t){var e=yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},e.queue=t,t=t.dispatch=gT.bind(null,Ne,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qx(){return Yt().memoizedState}function xl(t,e,n,r){var s=yn();Ne.flags|=t,s.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function Ou(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Hf(r,o.deps)){s.memoizedState=Ho(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=Ho(1|e,n,i,r)}function s0(t,e){return xl(8390656,8,t,e)}function Kf(t,e){return Ou(2048,8,t,e)}function zx(t,e){return Ou(4,2,t,e)}function Bx(t,e){return Ou(4,4,t,e)}function $x(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hx(t,e,n){return n=n!=null?n.concat([t]):null,Ou(4,4,$x.bind(null,e,t),n)}function Qf(){}function Wx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return ls&21?(cn(n,e)||(n=Zv(),Ne.lanes|=n,us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function pT(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=id.transition;id.transition={};try{t(!1),e()}finally{me=n,id.transition=r}}function Qx(){return Yt().memoizedState}function mT(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yx(t))Jx(e,n);else if(n=jx(t,e,n,r),n!==null){var s=vt();ln(n,t,r,s),Xx(n,e,r)}}function gT(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yx(t))Jx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,cn(u,o)){var c=e.interleaved;c===null?(s.next=s,Uf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=jx(t,e,s,r),n!==null&&(s=vt(),ln(n,t,r,s),Xx(n,e,r))}}function Yx(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Jx(t,e){xo=Zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sf(t,n)}}var eu={readContext:Qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},yT={readContext:Qt,useCallback:function(t,e){return yn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:s0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xl(4194308,4,$x.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return xl(4,2,t,e)},useMemo:function(t,e){var n=yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mT.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=yn();return t={current:t},e.memoizedState=t},useState:r0,useDebugValue:Qf,useDeferredValue:function(t){return yn().memoizedState=t},useTransition:function(){var t=r0(!1),e=t[0];return t=pT.bind(null,t[1]),yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=yn();if(Ee){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),He===null)throw Error(q(349));ls&30||Mx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,s0(Vx.bind(null,r,i,t),[t]),r.flags|=2048,Ho(9,Ox.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=yn(),e=He.identifierPrefix;if(Ee){var n=Mn,r=Ln;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vT={readContext:Qt,useCallback:Wx,useContext:Qt,useEffect:Kf,useImperativeHandle:Hx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Gx,useReducer:od,useRef:qx,useState:function(){return od($o)},useDebugValue:Qf,useDeferredValue:function(t){var e=Yt();return Kx(e,Ue.memoizedState,t)},useTransition:function(){var t=od($o)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Dx,useSyncExternalStore:Lx,useId:Qx,unstable_isNewReconciler:!1},xT={readContext:Qt,useCallback:Wx,useContext:Qt,useEffect:Kf,useImperativeHandle:Hx,useInsertionEffect:zx,useLayoutEffect:Bx,useMemo:Gx,useReducer:ad,useRef:qx,useState:function(){return ad($o)},useDebugValue:Qf,useDeferredValue:function(t){var e=Yt();return Ue===null?e.memoizedState=t:Kx(e,Ue.memoizedState,t)},useTransition:function(){var t=ad($o)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Dx,useSyncExternalStore:Lx,useId:Qx,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vu={isMounted:function(t){return(t=t._reactInternals)?_s(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Tr(t),i=Un(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),yl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Tr(t),i=Un(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),yl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Tr(t),s=Un(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(ln(e,t,r,n),yl(e,t,r))}};function i0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function Zx(t,e,n){var r=!1,s=jr,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=Nt(e)?os:ht.current,r=e.contextTypes,i=(r=r!=null)?ui(t,s):jr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function o0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vu.enqueueReplaceState(e,e.state,null)}function gh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=Nt(e)?os:ht.current,s.context=ui(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Vu.enqueueReplaceState(s,s.state,null),Jl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fi(t,e){try{var n="",r=e;do n+=GE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function e_(t,e,n){n=Un(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nu||(nu=!0,Nh=r),yh(t,e)},n}function t_(t,e,n){n=Un(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){yh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){yh(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function a0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _T;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DT.bind(null,t,e,n),e.then(t,t))}function l0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Un(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var wT=Jn.ReactCurrentOwner,It=!1;function gt(t,e,n,r){e.child=t===null?Cx(e,null,n,r):di(e,t.child,n,r)}function c0(t,e,n,r,s){n=n.render;var i=e.ref;return ei(e,s),r=Wf(t,e,n,r,i,s),n=Gf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&n&&Df(e),e.flags|=1,gt(t,e,r,s),e.child)}function d0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,n_(t,e,i,r,s)):(t=El(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Ir(i,r),t.ref=e.ref,t.return=e,e.child=t}function n_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return vh(t,e,n,r,s)}function r_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ks,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Ks,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(Ks,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(Ks,Rt),Rt|=r;return gt(t,e,s,n),e.child}function s_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vh(t,e,n,r,s){var i=Nt(n)?os:ht.current;return i=ui(e,i),ei(e,s),n=Wf(t,e,n,r,i,s),r=Gf(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&r&&Df(e),e.flags|=1,gt(t,e,n,s),e.child)}function h0(t,e,n,r,s){if(Nt(n)){var i=!0;Wl(e)}else i=!1;if(ei(e,s),e.stateNode===null)_l(t,e),Zx(e,n,r),gh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=Nt(n)?os:ht.current,d=ui(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&o0(e,o,r,d),ar=!1;var m=e.memoizedState;o.state=m,Jl(e,r,o,s),c=e.memoizedState,u!==r||m!==c||St.current||ar?(typeof f=="function"&&(mh(e,n,f,r),c=e.memoizedState),(u=ar||i0(e,n,u,r,m,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Px(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:nn(e.type,u),o.props=d,g=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Nt(n)?os:ht.current,c=ui(e,c));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==g||m!==c)&&o0(e,o,r,c),ar=!1,m=e.memoizedState,o.state=m,Jl(e,r,o,s);var S=e.memoizedState;u!==g||m!==S||St.current||ar?(typeof w=="function"&&(mh(e,n,w,r),S=e.memoizedState),(d=ar||i0(e,n,d,r,m,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return xh(t,e,n,r,i,s)}function xh(t,e,n,r,s,i){s_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Jg(e,n,!1),Wn(t,e,i);r=e.stateNode,wT.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=di(e,t.child,null,i),e.child=di(e,null,u,i)):gt(t,e,u,i),e.memoizedState=r.state,s&&Jg(e,n,!0),e.child}function i_(t){var e=t.stateNode;e.pendingContext?Yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yg(t,e.context,!1),zf(t,e.containerInfo)}function f0(t,e,n,r,s){return ci(),Mf(s),e.flags|=256,gt(t,e,n,r),e.child}var _h={dehydrated:null,treeContext:null,retryLane:0};function wh(t){return{baseLanes:t,cachePool:null,transitions:null}}function o_(t,e,n){var r=e.pendingProps,s=Se.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Se,s&1),t===null)return fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qu(o,r,0,null),t=ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wh(n),e.memoizedState=_h,t):Yf(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return bT(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ir(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Ir(u,i):(i=ss(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_h,r}return i=t.child,t=i.sibling,r=Ir(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yf(t,e){return e=qu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&Mf(r),di(e,t.child,null,n),t=Yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=ld(Error(q(422))),el(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=qu({mode:"visible",children:r.children},s,0,null),i=ss(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&di(e,t.child,null,o),e.child.memoizedState=wh(o),e.memoizedState=_h,i);if(!(e.mode&1))return el(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(q(419)),r=ld(i,r,void 0),el(t,e,o,r)}if(u=(o&t.childLanes)!==0,It||u){if(r=He,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),ln(r,t,s,-1))}return np(),r=ld(Error(q(421))),el(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=LT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=wr(s.nextSibling),Mt=e,Ee=!0,sn=null,t!==null&&(Bt[$t++]=Ln,Bt[$t++]=Mn,Bt[$t++]=as,Ln=t.id,Mn=t.overflow,as=e),e=Yf(e,r.children),e.flags|=4096,e)}function p0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ph(t.return,e,n)}function ud(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function a_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Se.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p0(t,n,e);else if(t.tag===19)p0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Se,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ud(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ud(e,!0,n,null,i);break;case"together":ud(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ET(t,e,n){switch(e.tag){case 3:i_(e),ci();break;case 5:Rx(e);break;case 1:Nt(e.type)&&Wl(e);break;case 4:zf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Se,Se.current&1),e.flags|=128,null):n&e.child.childLanes?o_(t,e,n):(ve(Se,Se.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);ve(Se,Se.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return a_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Se,Se.current),r)break;return null;case 22:case 23:return e.lanes=0,r_(t,e,n)}return Wn(t,e,n)}var l_,bh,u_,c_;l_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bh=function(){};u_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zr(wn.current);var i=null;switch(n){case"input":s=$d(t,s),r=$d(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Gd(t,s),r=Gd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=$l)}Qd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Co.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Co.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&_e("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};c_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zi(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function TT(t,e,n){var r=e.pendingProps;switch(Lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Nt(e.type)&&Hl(),ot(e),null;case 3:return r=e.stateNode,hi(),be(St),be(ht),$f(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Ch(sn),sn=null))),bh(t,e),ot(e),null;case 5:Bf(e);var s=Zr(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)u_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return ot(e),null}if(t=Zr(wn.current),Xa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xn]=e,r[Uo]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<io.length;s++)_e(io[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Eg(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Ig(r,i),_e("invalid",r)}Qd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ja(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ja(r.textContent,u,t),s=["children",""+u]):Co.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":Ba(r),Tg(r,i,!0);break;case"textarea":Ba(r),Sg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Vv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[Uo]=r,l_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<io.length;s++)_e(io[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Eg(t,r),s=$d(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Ig(t,r),s=Gd(t,r),_e("invalid",t);break;default:s=r}Qd(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?qv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Fv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&jo(t,c):typeof c=="number"&&jo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Co.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_e("scroll",t):c!=null&&_f(t,i,c,o))}switch(n){case"input":Ba(t),Tg(t,r,!1);break;case"textarea":Ba(t),Sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ys(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=$l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)c_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Zr(zo.current),Zr(wn.current),Xa(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(i=r.nodeValue!==n)&&(t=Mt,t!==null))switch(t.tag){case 3:Ja(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ja(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ot(e),null;case 13:if(be(Se),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Dt!==null&&e.mode&1&&!(e.flags&128))Ax(),ci(),e.flags|=98560,i=!1;else if(i=Xa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[xn]=e}else ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(Ch(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Se.current&1?qe===0&&(qe=3):np())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return hi(),bh(t,e),t===null&&Vo(e.stateNode.containerInfo),ot(e),null;case 10:return Ff(e.type._context),ot(e),null;case 17:return Nt(e.type)&&Hl(),ot(e),null;case 19:if(be(Se),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Zi(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xl(t),o!==null){for(e.flags|=128,Zi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Se,Se.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>pi&&(e.flags|=128,r=!0,Zi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return ot(e),null}else 2*Re()-i.renderingStartTime>pi&&n!==1073741824&&(e.flags|=128,r=!0,Zi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Se.current,ve(Se,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return tp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function IT(t,e){switch(Lf(e),e.tag){case 1:return Nt(e.type)&&Hl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hi(),be(St),be(ht),$f(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(be(Se),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Se),null;case 4:return hi(),null;case 10:return Ff(e.type._context),null;case 22:case 23:return tp(),null;case 24:return null;default:return null}}var tl=!1,ct=!1,ST=typeof WeakSet=="function"?WeakSet:Set,W=null;function Gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Eh(t,e,n){try{n()}catch(r){je(t,e,r)}}var m0=!1;function NT(t,e){if(oh=ql,t=mx(),Rf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,f=0,g=t,m=null;t:for(;;){for(var w;g!==n||s!==0&&g.nodeType!==3||(u=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(w=g.firstChild)!==null;)m=g,g=w;for(;;){if(g===t)break t;if(m===n&&++d===s&&(u=o),m===i&&++f===r&&(c=o),(w=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ah={focusedElem:t,selectionRange:n},ql=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,P=S.memoizedState,b=e.stateNode,E=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:nn(e.type,C),P);b.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(M){je(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=m0,m0=!1,S}function _o(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Eh(e,n,i)}s=s.next}while(s!==r)}}function Fu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Th(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d_(t){var e=t.alternate;e!==null&&(t.alternate=null,d_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[Uo],delete e[ch],delete e[uT],delete e[cT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h_(t){return t.tag===5||t.tag===3||t.tag===4}function g0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ih(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=$l));else if(r!==4&&(t=t.child,t!==null))for(Ih(t,e,n),t=t.sibling;t!==null;)Ih(t,e,n),t=t.sibling}function Sh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sh(t,e,n),t=t.sibling;t!==null;)Sh(t,e,n),t=t.sibling}var Ke=null,rn=!1;function sr(t,e,n){for(n=n.child;n!==null;)f_(t,e,n),n=n.sibling}function f_(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(ju,n)}catch{}switch(n.tag){case 5:ct||Gs(n,e);case 6:var r=Ke,s=rn;Ke=null,sr(t,e,n),Ke=r,rn=s,Ke!==null&&(rn?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(rn?(t=Ke,n=n.stateNode,t.nodeType===8?nd(t.parentNode,n):t.nodeType===1&&nd(t,n),Lo(t)):nd(Ke,n.stateNode));break;case 4:r=Ke,s=rn,Ke=n.stateNode.containerInfo,rn=!0,sr(t,e,n),Ke=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Eh(n,e,o),s=s.next}while(s!==r)}sr(t,e,n);break;case 1:if(!ct&&(Gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){je(n,e,u)}sr(t,e,n);break;case 21:sr(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,sr(t,e,n),ct=r):sr(t,e,n);break;default:sr(t,e,n)}}function y0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ST),e.forEach(function(r){var s=MT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Ke=u.stateNode,rn=!1;break e;case 3:Ke=u.stateNode.containerInfo,rn=!0;break e;case 4:Ke=u.stateNode.containerInfo,rn=!0;break e}u=u.return}if(Ke===null)throw Error(q(160));f_(i,o,s),Ke=null,rn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p_(e,t),e=e.sibling}function p_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),gn(t),r&4){try{_o(3,t,t.return),Fu(3,t)}catch(C){je(t,t.return,C)}try{_o(5,t,t.return)}catch(C){je(t,t.return,C)}}break;case 1:tn(e,t),gn(t),r&512&&n!==null&&Gs(n,n.return);break;case 5:if(tn(e,t),gn(t),r&512&&n!==null&&Gs(n,n.return),t.flags&32){var s=t.stateNode;try{jo(s,"")}catch(C){je(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Mv(s,i),Yd(u,o);var d=Yd(u,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?qv(s,g):f==="dangerouslySetInnerHTML"?Fv(s,g):f==="children"?jo(s,g):_f(s,f,g,d)}switch(u){case"input":Hd(s,i);break;case"textarea":Ov(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ys(s,!!i.multiple,w,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ys(s,!!i.multiple,i.defaultValue,!0):Ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[Uo]=i}catch(C){je(t,t.return,C)}}break;case 6:if(tn(e,t),gn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(C){je(t,t.return,C)}}break;case 3:if(tn(e,t),gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(e.containerInfo)}catch(C){je(t,t.return,C)}break;case 4:tn(e,t),gn(t);break;case 13:tn(e,t),gn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zf=Re())),r&4&&y0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(d=ct)||f,tn(e,t),ct=d):tn(e,t),gn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(g=W=f;W!==null;){switch(m=W,w=m.child,m.tag){case 0:case 11:case 14:case 15:_o(4,m,m.return);break;case 1:Gs(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(C){je(r,n,C)}}break;case 5:Gs(m,m.return);break;case 22:if(m.memoizedState!==null){x0(g);continue}}w!==null?(w.return=m,W=w):x0(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Uv("display",o))}catch(C){je(t,t.return,C)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(C){je(t,t.return,C)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:tn(e,t),gn(t),r&4&&y0(t);break;case 21:break;default:tn(e,t),gn(t)}}function gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h_(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(jo(s,""),r.flags&=-33);var i=g0(t);Sh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=g0(t);Ih(t,u,o);break;default:throw Error(q(161))}}catch(c){je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function AT(t,e,n){W=t,m_(t)}function m_(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tl;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ct;u=tl;var d=ct;if(tl=o,(ct=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?_0(s):c!==null?(c.return=o,W=c):_0(s);for(;i!==null;)W=i,m_(i),i=i.sibling;W=s,tl=u,ct=d}v0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):v0(t)}}function v0(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||Fu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&n0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}n0(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Lo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}ct||e.flags&512&&Th(e)}catch(m){je(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function x0(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function _0(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Fu(4,e)}catch(c){je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){je(e,s,c)}}var i=e.return;try{Th(e)}catch(c){je(e,i,c)}break;case 5:var o=e.return;try{Th(e)}catch(c){je(e,o,c)}}}catch(c){je(e,e.return,c)}if(e===t){W=null;break}var u=e.sibling;if(u!==null){u.return=e.return,W=u;break}W=e.return}}var kT=Math.ceil,tu=Jn.ReactCurrentDispatcher,Jf=Jn.ReactCurrentOwner,Wt=Jn.ReactCurrentBatchConfig,le=0,He=null,Me=null,Je=0,Rt=0,Ks=Mr(0),qe=0,Wo=null,us=0,Uu=0,Xf=0,wo=null,Et=null,Zf=0,pi=1/0,Cn=null,nu=!1,Nh=null,Er=null,nl=!1,pr=null,ru=0,bo=0,Ah=null,wl=-1,bl=0;function vt(){return le&6?Re():wl!==-1?wl:wl=Re()}function Tr(t){return t.mode&1?le&2&&Je!==0?Je&-Je:hT.transition!==null?(bl===0&&(bl=Zv()),bl):(t=me,t!==0||(t=window.event,t=t===void 0?16:ox(t.type)),t):1}function ln(t,e,n,r){if(50<bo)throw bo=0,Ah=null,Error(q(185));ua(t,n,r),(!(le&2)||t!==He)&&(t===He&&(!(le&2)&&(Uu|=n),qe===4&&ur(t,Je)),At(t,r),n===1&&le===0&&!(e.mode&1)&&(pi=Re()+500,Mu&&Or()))}function At(t,e){var n=t.callbackNode;h2(t,e);var r=Ul(t,t===He?Je:0);if(r===0)n!==null&&kg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kg(n),e===1)t.tag===0?dT(w0.bind(null,t)):Ix(w0.bind(null,t)),aT(function(){!(le&6)&&Or()}),n=null;else{switch(ex(r)){case 1:n=If;break;case 4:n=Jv;break;case 16:n=Fl;break;case 536870912:n=Xv;break;default:n=Fl}n=E_(n,g_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function g_(t,e){if(wl=-1,bl=0,le&6)throw Error(q(327));var n=t.callbackNode;if(ti()&&t.callbackNode!==n)return null;var r=Ul(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=su(t,r);else{e=r;var s=le;le|=2;var i=v_();(He!==t||Je!==e)&&(Cn=null,pi=Re()+500,rs(t,e));do try{PT();break}catch(u){y_(t,u)}while(!0);Vf(),tu.current=i,le=s,Me!==null?e=0:(He=null,Je=0,e=qe)}if(e!==0){if(e===2&&(s=th(t),s!==0&&(r=s,e=kh(t,s))),e===1)throw n=Wo,rs(t,0),ur(t,r),At(t,Re()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!CT(s)&&(e=su(t,r),e===2&&(i=th(t),i!==0&&(r=i,e=kh(t,i))),e===1))throw n=Wo,rs(t,0),ur(t,r),At(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Qr(t,Et,Cn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=Zf+500-Re(),10<e)){if(Ul(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uh(Qr.bind(null,t,Et,Cn),e);break}Qr(t,Et,Cn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-an(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kT(r/1960))-r,10<r){t.timeoutHandle=uh(Qr.bind(null,t,Et,Cn),r);break}Qr(t,Et,Cn);break;case 5:Qr(t,Et,Cn);break;default:throw Error(q(329))}}}return At(t,Re()),t.callbackNode===n?g_.bind(null,t):null}function kh(t,e){var n=wo;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=su(t,e),t!==2&&(e=Et,Et=n,e!==null&&Ch(e)),t}function Ch(t){Et===null?Et=t:Et.push.apply(Et,t)}function CT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~Xf,e&=~Uu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function w0(t){if(le&6)throw Error(q(327));ti();var e=Ul(t,0);if(!(e&1))return At(t,Re()),null;var n=su(t,e);if(t.tag!==0&&n===2){var r=th(t);r!==0&&(e=r,n=kh(t,r))}if(n===1)throw n=Wo,rs(t,0),ur(t,e),At(t,Re()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qr(t,Et,Cn),At(t,Re()),null}function ep(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(pi=Re()+500,Mu&&Or())}}function cs(t){pr!==null&&pr.tag===0&&!(le&6)&&ti();var e=le;le|=1;var n=Wt.transition,r=me;try{if(Wt.transition=null,me=1,t)return t()}finally{me=r,Wt.transition=n,le=e,!(le&6)&&Or()}}function tp(){Rt=Ks.current,be(Ks)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,oT(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hl();break;case 3:hi(),be(St),be(ht),$f();break;case 5:Bf(r);break;case 4:hi();break;case 13:be(Se);break;case 19:be(Se);break;case 10:Ff(r.type._context);break;case 22:case 23:tp()}n=n.return}if(He=t,Me=t=Ir(t.current,null),Je=Rt=e,qe=0,Wo=null,Xf=Uu=us=0,Et=wo=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xr=null}return t}function y_(t,e){do{var n=Me;try{if(Vf(),vl.current=eu,Zl){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zl=!1}if(ls=0,$e=Ue=Ne=null,xo=!1,Bo=0,Jf.current=null,n===null||n.return===null){qe=1,Wo=e,Me=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Je,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=l0(o);if(w!==null){w.flags&=-257,u0(w,o,u,i,e),w.mode&1&&a0(i,d,e),e=w,c=d;var S=e.updateQueue;if(S===null){var C=new Set;C.add(c),e.updateQueue=C}else S.add(c);break e}else{if(!(e&1)){a0(i,d,e),np();break e}c=Error(q(426))}}else if(Ee&&u.mode&1){var P=l0(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),u0(P,o,u,i,e),Mf(fi(c,u));break e}}i=c=fi(c,u),qe!==4&&(qe=2),wo===null?wo=[i]:wo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=e_(i,c,e);t0(i,b);break e;case 1:u=c;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Er===null||!Er.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=t_(i,u,e);t0(i,M);break e}}i=i.return}while(i!==null)}__(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function v_(){var t=tu.current;return tu.current=eu,t===null?eu:t}function np(){(qe===0||qe===3||qe===2)&&(qe=4),He===null||!(us&268435455)&&!(Uu&268435455)||ur(He,Je)}function su(t,e){var n=le;le|=2;var r=v_();(He!==t||Je!==e)&&(Cn=null,rs(t,e));do try{jT();break}catch(s){y_(t,s)}while(!0);if(Vf(),le=n,tu.current=r,Me!==null)throw Error(q(261));return He=null,Je=0,qe}function jT(){for(;Me!==null;)x_(Me)}function PT(){for(;Me!==null&&!r2();)x_(Me)}function x_(t){var e=b_(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?__(t):Me=e,Jf.current=null}function __(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IT(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Me=null;return}}else if(n=TT(n,e,Rt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);qe===0&&(qe=5)}function Qr(t,e,n){var r=me,s=Wt.transition;try{Wt.transition=null,me=1,RT(t,e,n,r)}finally{Wt.transition=s,me=r}return null}function RT(t,e,n,r){do ti();while(pr!==null);if(le&6)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(f2(t,i),t===He&&(Me=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,E_(Fl,function(){return ti(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Wt.transition,Wt.transition=null;var o=me;me=1;var u=le;le|=4,Jf.current=null,NT(t,n),p_(n,t),Z2(ah),ql=!!oh,ah=oh=null,t.current=n,AT(n),s2(),le=u,me=o,Wt.transition=i}else t.current=n;if(nl&&(nl=!1,pr=t,ru=s),i=t.pendingLanes,i===0&&(Er=null),a2(n.stateNode),At(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nu)throw nu=!1,t=Nh,Nh=null,t;return ru&1&&t.tag!==0&&ti(),i=t.pendingLanes,i&1?t===Ah?bo++:(bo=0,Ah=t):bo=0,Or(),null}function ti(){if(pr!==null){var t=ex(ru),e=Wt.transition,n=me;try{if(Wt.transition=null,me=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,ru=0,le&6)throw Error(q(331));var s=le;for(le|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:_o(8,f,i)}var g=f.child;if(g!==null)g.return=f,W=g;else for(;W!==null;){f=W;var m=f.sibling,w=f.return;if(d_(f),f===d){W=null;break}if(m!==null){m.return=w,W=m;break}W=w}}}var S=i.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_o(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,W=b;break e}W=i.return}}var E=t.current;for(W=E;W!==null;){o=W;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,W=T;else e:for(o=E;W!==null;){if(u=W,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Fu(9,u)}}catch(D){je(u,u.return,D)}if(u===o){W=null;break e}var M=u.sibling;if(M!==null){M.return=u.return,W=M;break e}W=u.return}}if(le=s,Or(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(ju,t)}catch{}r=!0}return r}finally{me=n,Wt.transition=e}}return!1}function b0(t,e,n){e=fi(n,e),e=e_(t,e,1),t=br(t,e,1),e=vt(),t!==null&&(ua(t,1,e),At(t,e))}function je(t,e,n){if(t.tag===3)b0(t,t,n);else for(;e!==null;){if(e.tag===3){b0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=fi(n,t),t=t_(e,t,1),e=br(e,t,1),t=vt(),e!==null&&(ua(e,1,t),At(e,t));break}}e=e.return}}function DT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(qe===4||qe===3&&(Je&130023424)===Je&&500>Re()-Zf?rs(t,0):Xf|=n),At(t,e)}function w_(t,e){e===0&&(t.mode&1?(e=Wa,Wa<<=1,!(Wa&130023424)&&(Wa=4194304)):e=1);var n=vt();t=Hn(t,e),t!==null&&(ua(t,e,n),At(t,n))}function LT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),w_(t,n)}function MT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),w_(t,n)}var b_;b_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,ET(t,e,n);It=!!(t.flags&131072)}else It=!1,Ee&&e.flags&1048576&&Sx(e,Kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var s=ui(e,ht.current);ei(e,n),s=Wf(null,e,r,t,s,n);var i=Gf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(i=!0,Wl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qf(e),s.updater=Vu,e.stateNode=s,s._reactInternals=e,gh(e,r,t,n),e=xh(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&Df(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=VT(r),t=nn(r,t),s){case 0:e=vh(null,e,r,t,n);break e;case 1:e=h0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=d0(null,e,r,nn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),vh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),h0(t,e,r,s,n);case 3:e:{if(i_(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Px(t,e),Jl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=fi(Error(q(423)),e),e=f0(t,e,r,n,s);break e}else if(r!==s){s=fi(Error(q(424)),e),e=f0(t,e,r,n,s);break e}else for(Dt=wr(e.stateNode.containerInfo.firstChild),Mt=e,Ee=!0,sn=null,n=Cx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ci(),r===s){e=Wn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return Rx(e),t===null&&fh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lh(r,s)?o=null:i!==null&&lh(r,i)&&(e.flags|=32),s_(t,e),gt(t,e,o,n),e.child;case 6:return t===null&&fh(e),null;case 13:return o_(t,e,n);case 4:return zf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=di(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),c0(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Ql,r._currentValue),r._currentValue=o,i!==null)if(cn(i.value,o)){if(i.children===s.children&&!St.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Un(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ph(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ei(e,n),s=Qt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),d0(t,e,r,s,n);case 15:return n_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),_l(t,e),e.tag=1,Nt(r)?(t=!0,Wl(e)):t=!1,ei(e,n),Zx(e,r,s),gh(e,r,s,n),xh(null,e,r,!0,t,n);case 19:return a_(t,e,n);case 22:return r_(t,e,n)}throw Error(q(156,e.tag))};function E_(t,e){return Yv(t,e)}function OT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new OT(t,e,n,r)}function rp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function VT(t){if(typeof t=="function")return rp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bf)return 11;if(t===Ef)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vs:return ss(n.children,s,i,e);case wf:o=8,s|=8;break;case Ud:return t=Ht(12,n,e,s|2),t.elementType=Ud,t.lanes=i,t;case qd:return t=Ht(13,n,e,s),t.elementType=qd,t.lanes=i,t;case zd:return t=Ht(19,n,e,s),t.elementType=zd,t.lanes=i,t;case Rv:return qu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jv:o=10;break e;case Pv:o=9;break e;case bf:o=11;break e;case Ef:o=14;break e;case or:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ss(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function qu(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=Rv,t.lanes=n,t.stateNode={isHidden:!1},t}function cd(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function dd(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hc(0),this.expirationTimes=Hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sp(t,e,n,r,s,i,o,u,c){return t=new FT(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qf(i),t}function UT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T_(t){if(!t)return jr;t=t._reactInternals;e:{if(_s(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Nt(n))return Tx(t,n,e)}return e}function I_(t,e,n,r,s,i,o,u,c){return t=sp(n,r,!0,t,s,i,o,u,c),t.context=T_(null),n=t.current,r=vt(),s=Tr(n),i=Un(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,ua(t,s,r),At(t,r),t}function zu(t,e,n,r){var s=e.current,i=vt(),o=Tr(s);return n=T_(n),e.context===null?e.context=n:e.pendingContext=n,e=Un(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,o),t!==null&&(ln(t,s,o,i),yl(t,s,o)),o}function iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function E0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ip(t,e){E0(t,e),(t=t.alternate)&&E0(t,e)}function qT(){return null}var S_=typeof reportError=="function"?reportError:function(t){console.error(t)};function op(t){this._internalRoot=t}Bu.prototype.render=op.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));zu(t,e,null,null)};Bu.prototype.unmount=op.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;cs(function(){zu(null,t,null,null)}),e[$n]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=rx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&ix(t)}};function ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function T0(){}function zT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=iu(o);i.call(d)}}var o=I_(e,r,t,0,null,!1,!1,"",T0);return t._reactRootContainer=o,t[$n]=o.current,Vo(t.nodeType===8?t.parentNode:t),cs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=iu(c);u.call(d)}}var c=sp(t,0,!1,null,null,!1,!1,"",T0);return t._reactRootContainer=c,t[$n]=c.current,Vo(t.nodeType===8?t.parentNode:t),cs(function(){zu(e,c,n,r)}),c}function Hu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=iu(o);u.call(c)}}zu(e,o,t,s)}else o=zT(n,e,t,s,r);return iu(o)}tx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(Sf(e,n|1),At(e,Re()),!(le&6)&&(pi=Re()+500,Or()))}break;case 13:cs(function(){var r=Hn(t,1);if(r!==null){var s=vt();ln(r,t,1,s)}}),ip(t,1)}};Nf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=vt();ln(e,t,134217728,n)}ip(t,134217728)}};nx=function(t){if(t.tag===13){var e=Tr(t),n=Hn(t,e);if(n!==null){var r=vt();ln(n,t,e,r)}ip(t,e)}};rx=function(){return me};sx=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};Xd=function(t,e,n){switch(e){case"input":if(Hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Lu(r);if(!s)throw Error(q(90));Lv(r),Hd(r,s)}}}break;case"textarea":Ov(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};$v=ep;Hv=cs;var BT={usingClientEntryPoint:!1,Events:[da,zs,Lu,zv,Bv,ep]},eo={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$T={bundleType:eo.bundleType,version:eo.version,rendererPackageName:eo.rendererPackageName,rendererConfig:eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kv(t),t===null?null:t.stateNode},findFiberByHostInstance:eo.findFiberByHostInstance||qT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{ju=rl.inject($T),_n=rl}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BT;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ap(e))throw Error(q(200));return UT(t,e,null,n)};Ft.createRoot=function(t,e){if(!ap(t))throw Error(q(299));var n=!1,r="",s=S_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sp(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Vo(t.nodeType===8?t.parentNode:t),new op(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=Kv(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return cs(t)};Ft.hydrate=function(t,e,n){if(!$u(e))throw Error(q(200));return Hu(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!ap(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=S_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I_(e,null,t,1,n??null,s,!1,i,o),t[$n]=e.current,Vo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bu(e)};Ft.render=function(t,e,n){if(!$u(e))throw Error(q(200));return Hu(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!$u(t))throw Error(q(40));return t._reactRootContainer?(cs(function(){Hu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ft.unstable_batchedUpdates=ep;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$u(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Hu(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function N_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N_)}catch(t){console.error(t)}}N_(),Nv.exports=Ft;var HT=Nv.exports,A_,I0=HT;A_=I0.createRoot,I0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Go(){return Go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Go.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const S0="popstate";function WT(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return jh("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ou(s)}return KT(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function k_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GT(){return Math.random().toString(36).substr(2,8)}function N0(t,e){return{usr:t.state,key:t.key,idx:e}}function jh(t,e,n,r){return n===void 0&&(n=null),Go({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ii(e):e,{state:n,key:e&&e.key||r||GT()})}function ou(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ii(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function KT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=mr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(Go({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){u=mr.Pop;let P=f(),b=P==null?null:P-d;d=P,c&&c({action:u,location:C.location,delta:b})}function m(P,b){u=mr.Push;let E=jh(C.location,P,b);d=f()+1;let T=N0(E,d),M=C.createHref(E);try{o.pushState(T,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(M)}i&&c&&c({action:u,location:C.location,delta:1})}function w(P,b){u=mr.Replace;let E=jh(C.location,P,b);d=f();let T=N0(E,d),M=C.createHref(E);o.replaceState(T,"",M),i&&c&&c({action:u,location:C.location,delta:0})}function S(P){let b=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof P=="string"?P:ou(P);return E=E.replace(/ $/,"%20"),De(b,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,b)}let C={get action(){return u},get location(){return t(s,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(S0,g),c=P,()=>{s.removeEventListener(S0,g),c=null}},createHref(P){return e(s,P)},createURL:S,encodeLocation(P){let b=S(P);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:m,replace:w,go(P){return o.go(P)}};return C}var A0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(A0||(A0={}));function QT(t,e,n){return n===void 0&&(n="/"),YT(t,e,n,!1)}function YT(t,e,n,r){let s=typeof e=="string"?Ii(e):e,i=lp(s.pathname||"/",n);if(i==null)return null;let o=C_(t);JT(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=lI(i);u=oI(o[c],d,r)}return u}function C_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Sr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),C_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:sI(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of j_(i.path))s(i,o,c)}),e}function j_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=j_(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function JT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const XT=/^:[\w-]+$/,ZT=3,eI=2,tI=1,nI=10,rI=-2,k0=t=>t==="*";function sI(t,e){let n=t.split("/"),r=n.length;return n.some(k0)&&(r+=rI),e&&(r+=eI),n.filter(s=>!k0(s)).reduce((s,i)=>s+(XT.test(i)?ZT:i===""?tI:nI),r)}function iI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function oI(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=C0({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=C0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Sr([i,g.pathname]),pathnameBase:hI(Sr([i,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(i=Sr([i,g.pathnameBase]))}return o}function C0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=aI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:m,isOptional:w}=f;if(m==="*"){let C=u[g]||"";o=i.slice(0,i.length-C.length).replace(/(.)\/+$/,"$1")}const S=u[g];return w&&!S?d[m]=void 0:d[m]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function aI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),k_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return k_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function lp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ii(t):t;return{pathname:n?n.startsWith("/")?n:cI(n,e):e,search:fI(r),hash:pI(s)}}function cI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function hd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function up(t,e){let n=dI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function cp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ii(t):(s=Go({},t),De(!s.pathname||!s.pathname.includes("?"),hd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),hd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),hd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}u=g>=0?e[g]:"/"}let c=uI(s,u),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),hI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,pI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function mI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const P_=["post","put","patch","delete"];new Set(P_);const gI=["get",...P_];new Set(gI);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ko(){return Ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ko.apply(this,arguments)}const dp=j.createContext(null),yI=j.createContext(null),Vr=j.createContext(null),Wu=j.createContext(null),Xn=j.createContext({outlet:null,matches:[],isDataRoute:!1}),R_=j.createContext(null);function vI(t,e){let{relative:n}=e===void 0?{}:e;Si()||De(!1);let{basename:r,navigator:s}=j.useContext(Vr),{hash:i,pathname:o,search:u}=L_(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Sr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function Si(){return j.useContext(Wu)!=null}function ws(){return Si()||De(!1),j.useContext(Wu).location}function D_(t){j.useContext(Vr).static||j.useLayoutEffect(t)}function Nn(){let{isDataRoute:t}=j.useContext(Xn);return t?PI():xI()}function xI(){Si()||De(!1);let t=j.useContext(dp),{basename:e,future:n,navigator:r}=j.useContext(Vr),{matches:s}=j.useContext(Xn),{pathname:i}=ws(),o=JSON.stringify(up(s,n.v7_relativeSplatPath)),u=j.useRef(!1);return D_(()=>{u.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=cp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Sr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,i,t])}function _I(){let{matches:t}=j.useContext(Xn),e=t[t.length-1];return e?e.params:{}}function L_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Vr),{matches:s}=j.useContext(Xn),{pathname:i}=ws(),o=JSON.stringify(up(s,r.v7_relativeSplatPath));return j.useMemo(()=>cp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function wI(t,e){return bI(t,e)}function bI(t,e,n,r){Si()||De(!1);let{navigator:s,static:i}=j.useContext(Vr),{matches:o}=j.useContext(Xn),u=o[o.length-1],c=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let f=ws(),g;if(e){var m;let b=typeof e=="string"?Ii(e):e;d==="/"||(m=b.pathname)!=null&&m.startsWith(d)||De(!1),g=b}else g=f;let w=g.pathname||"/",S=w;if(d!=="/"){let b=d.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let C=!i&&n&&n.matches&&n.matches.length>0?n.matches:QT(t,{pathname:S}),P=NI(C&&C.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Sr([d,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Sr([d,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,n,r);return e&&P?j.createElement(Wu.Provider,{value:{location:Ko({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:mr.Pop}},P):P}function EI(){let t=jI(),e=mI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const TI=j.createElement(EI,null);class II extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(Xn.Provider,{value:this.props.routeContext},j.createElement(R_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SI(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(dp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Xn.Provider,{value:e},r)}function NI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let f=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:w}=n,S=g.route.loader&&m[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,m)=>{let w,S=!1,C=null,P=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,C=g.route.errorElement||TI,c&&(d<0&&m===0?(S=!0,P=null):d===m&&(S=!0,P=g.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,m+1)),E=()=>{let T;return w?T=C:S?T=P:g.route.Component?T=j.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=f,j.createElement(SI,{match:g,routeContext:{outlet:f,matches:b,isDataRoute:n!=null},children:T})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?j.createElement(II,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:E(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):E()},null)}var M_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M_||{}),au=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(au||{});function AI(t){let e=j.useContext(dp);return e||De(!1),e}function kI(t){let e=j.useContext(yI);return e||De(!1),e}function CI(t){let e=j.useContext(Xn);return e||De(!1),e}function O_(t){let e=CI(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function jI(){var t;let e=j.useContext(R_),n=kI(au.UseRouteError),r=O_(au.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function PI(){let{router:t}=AI(M_.UseNavigateStable),e=O_(au.UseNavigateStable),n=j.useRef(!1);return D_(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ko({fromRouteId:e},i)))},[t,e])}function RI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ph(t){let{to:e,replace:n,state:r,relative:s}=t;Si()||De(!1);let{future:i,static:o}=j.useContext(Vr),{matches:u}=j.useContext(Xn),{pathname:c}=ws(),d=Nn(),f=cp(e,up(u,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function Ge(t){De(!1)}function DI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=mr.Pop,navigator:i,static:o=!1,future:u}=t;Si()&&De(!1);let c=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:c,navigator:i,static:o,future:Ko({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=Ii(r));let{pathname:f="/",search:g="",hash:m="",state:w=null,key:S="default"}=r,C=j.useMemo(()=>{let P=lp(f,c);return P==null?null:{location:{pathname:P,search:g,hash:m,state:w,key:S},navigationType:s}},[c,f,g,m,w,S,s]);return C==null?null:j.createElement(Vr.Provider,{value:d},j.createElement(Wu.Provider,{children:n,value:C}))}function LI(t){let{children:e,location:n}=t;return wI(Rh(e),n)}new Promise(()=>{});function Rh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,Rh(r.props.children,i));return}r.type!==Ge&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dh(){return Dh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dh.apply(this,arguments)}function MI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function OI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function VI(t,e){return t.button===0&&(!e||e==="_self")&&!OI(t)}function Lh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function FI(t,e){let n=Lh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const UI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qI="6";try{window.__reactRouterVersion=qI}catch{}const zI="startTransition",j0=DE[zI];function BI(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=WT({window:s,v5Compat:!0}));let o=i.current,[u,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(g=>{d&&j0?j0(()=>c(g)):c(g)},[c,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>RI(r),[r]),j.createElement(DI,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const $I=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,J=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:f,viewTransition:g}=e,m=MI(e,UI),{basename:w}=j.useContext(Vr),S,C=!1;if(typeof d=="string"&&HI.test(d)&&(S=d,$I))try{let T=new URL(window.location.href),M=d.startsWith("//")?new URL(T.protocol+d):new URL(d),D=lp(M.pathname,w);M.origin===T.origin&&D!=null?d=D+M.search+M.hash:C=!0}catch{}let P=vI(d,{relative:s}),b=WI(d,{replace:o,state:u,target:c,preventScrollReset:f,relative:s,viewTransition:g});function E(T){r&&r(T),T.defaultPrevented||b(T)}return j.createElement("a",Dh({},m,{href:S||P,onClick:C||i?r:E,ref:n,target:c}))});var P0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P0||(P0={}));var R0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(R0||(R0={}));function WI(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=Nn(),d=ws(),f=L_(t,{relative:o});return j.useCallback(g=>{if(VI(g,n)){g.preventDefault();let m=r!==void 0?r:ou(d)===ou(f);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,f,r,s,n,t,i,o,u])}function V_(t){let e=j.useRef(Lh(t)),n=j.useRef(!1),r=ws(),s=j.useMemo(()=>FI(r.search,n.current?null:e.current),[r.search]),i=Nn(),o=j.useCallback((u,c)=>{const d=Lh(typeof u=="function"?u(s):u);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var D0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},GI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},U_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let m=(u&15)<<2|d>>6,w=d&63;c||(w=64,o||(m=64)),r.push(n[f],n[g],n[m],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||g==null)throw new KI;const m=i<<2|u>>4;if(r.push(m),d!==64){const w=u<<4&240|d>>2;if(r.push(w),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QI=function(t){const e=F_(t);return U_.encodeByteArray(e,!0)},lu=function(t){return QI(t).replace(/\./g,"")},q_=function(t){try{return U_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=()=>YI().__FIREBASE_DEFAULTS__,XI=()=>{if(typeof process>"u"||typeof D0>"u")return;const t=D0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q_(t[1]);return e&&JSON.parse(e)},Gu=()=>{try{return JI()||XI()||ZI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},z_=t=>{var e,n;return(n=(e=Gu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},eS=t=>{const e=z_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B_=()=>{var t;return(t=Gu())===null||t===void 0?void 0:t.config},$_=t=>{var e;return(e=Gu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lu(JSON.stringify(n)),lu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function sS(){var t;const e=(t=Gu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hp(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oS(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aS(){return!sS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fp(){try{return typeof indexedDB=="object"}catch{return!1}}function pp(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function H_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="FirebaseError";class pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lS,Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bs.prototype.create)}}class bs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uS(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new pn(s,u,r)}}function uS(t,e){return t.replace(cS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cS=/\{\$([^}]+)}/g;function dS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Qo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(L0(i)&&L0(o)){if(!Qo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function L0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function hS(t,e){const n=new fS(t,e);return n.subscribe.bind(n)}class fS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");pS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=fd),s.error===void 0&&(s.error=fd),s.complete===void 0&&(s.complete=fd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function fd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=1e3,gS=2,yS=4*60*60*1e3,vS=.5;function M0(t,e=mS,n=gS){const r=e*Math.pow(n,t),s=Math.round(vS*r*(Math.random()-.5)*2);return Math.min(yS,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t){return t&&t._delegate?t._delegate:t}class dn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new tS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wS(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_S(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _S(t){return t===Yr?void 0:t}function wS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const ES={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},TS=ie.INFO,IS={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},SS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=IS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ku{constructor(e){this.name=e,this._logLevel=TS,this._logHandler=SS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ES[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const NS=(t,e)=>e.some(n=>t instanceof n);let O0,V0;function AS(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kS(){return V0||(V0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W_=new WeakMap,Mh=new WeakMap,G_=new WeakMap,pd=new WeakMap,mp=new WeakMap;function CS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&W_.set(n,t)}).catch(()=>{}),mp.set(e,t),e}function jS(t){if(Mh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Mh.set(t,e)}let Oh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||G_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PS(t){Oh=t(Oh)}function RS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(md(this),e,...n);return G_.set(r,e.sort?e.sort():[e]),Nr(r)}:kS().includes(t)?function(...e){return t.apply(md(this),e),Nr(W_.get(this))}:function(...e){return Nr(t.apply(md(this),e))}}function DS(t){return typeof t=="function"?RS(t):(t instanceof IDBTransaction&&jS(t),NS(t,AS())?new Proxy(t,Oh):t)}function Nr(t){if(t instanceof IDBRequest)return CS(t);if(pd.has(t))return pd.get(t);const e=DS(t);return e!==t&&(pd.set(t,e),mp.set(e,t)),e}const md=t=>mp.get(t);function K_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Nr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Nr(o.result),c.oldVersion,c.newVersion,Nr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const LS=["get","getKey","getAll","getAllKeys","count"],MS=["put","add","delete","clear"],gd=new Map;function F0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(gd.get(e))return gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||LS.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return gd.set(e,i),i}PS(t=>({...t,get:(e,n,r)=>F0(e,n)||t.get(e,n,r),has:(e,n)=>!!F0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(VS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function VS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vh="@firebase/app",U0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Ku("@firebase/app"),FS="@firebase/app-compat",US="@firebase/analytics-compat",qS="@firebase/analytics",zS="@firebase/app-check-compat",BS="@firebase/app-check",$S="@firebase/auth",HS="@firebase/auth-compat",WS="@firebase/database",GS="@firebase/database-compat",KS="@firebase/functions",QS="@firebase/functions-compat",YS="@firebase/installations",JS="@firebase/installations-compat",XS="@firebase/messaging",ZS="@firebase/messaging-compat",eN="@firebase/performance",tN="@firebase/performance-compat",nN="@firebase/remote-config",rN="@firebase/remote-config-compat",sN="@firebase/storage",iN="@firebase/storage-compat",oN="@firebase/firestore",aN="@firebase/vertexai-preview",lN="@firebase/firestore-compat",uN="firebase",cN="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="[DEFAULT]",dN={[Vh]:"fire-core",[FS]:"fire-core-compat",[qS]:"fire-analytics",[US]:"fire-analytics-compat",[BS]:"fire-app-check",[zS]:"fire-app-check-compat",[$S]:"fire-auth",[HS]:"fire-auth-compat",[WS]:"fire-rtdb",[GS]:"fire-rtdb-compat",[KS]:"fire-fn",[QS]:"fire-fn-compat",[YS]:"fire-iid",[JS]:"fire-iid-compat",[XS]:"fire-fcm",[ZS]:"fire-fcm-compat",[eN]:"fire-perf",[tN]:"fire-perf-compat",[nN]:"fire-rc",[rN]:"fire-rc-compat",[sN]:"fire-gcs",[iN]:"fire-gcs-compat",[oN]:"fire-fst",[lN]:"fire-fst-compat",[aN]:"fire-vertex","fire-js":"fire-js",[uN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map,hN=new Map,Uh=new Map;function q0(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function In(t){const e=t.name;if(Uh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Uh.set(e,t);for(const n of uu.values())q0(n,t);for(const n of hN.values())q0(n,t);return!0}function Es(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new bs("app","Firebase",fN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=cN;function Q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Fh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=B_()),!n)throw Ar.create("no-options");const i=uu.get(s);if(i){if(Qo(n,i.options)&&Qo(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const o=new bS(s);for(const c of Uh.values())o.addComponent(c);const u=new pN(n,r,o);return uu.set(s,u),u}function gp(t=Fh){const e=uu.get(t);if(!e&&t===Fh&&B_())return Q_();if(!e)throw Ar.create("no-app",{appName:t});return e}function Gt(t,e,n){var r;let s=(r=dN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(u.join(" "));return}In(new dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="firebase-heartbeat-database",gN=1,Yo="firebase-heartbeat-store";let yd=null;function Y_(){return yd||(yd=K_(mN,gN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),yd}async function yN(t){try{const n=(await Y_()).transaction(Yo),r=await n.objectStore(Yo).get(J_(t));return await n.done,r}catch(e){if(e instanceof pn)Gn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function z0(t,e){try{const r=(await Y_()).transaction(Yo,"readwrite");await r.objectStore(Yo).put(e,J_(t)),await r.done}catch(n){if(n instanceof pn)Gn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function J_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=1024,xN=30*24*60*60*1e3;class _N{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=B0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const c=new Date(u.date).valueOf();return Date.now()-c<=xN}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Gn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B0(),{heartbeatsToSend:r,unsentEntries:s}=wN(this._heartbeatsCache.heartbeats),i=lu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gn.warn(n),""}}}function B0(){return new Date().toISOString().substring(0,10)}function wN(t,e=vN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),$0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),$0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fp()?pp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return z0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return z0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function $0(t){return lu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){In(new dn("platform-logger",e=>new OS(e),"PRIVATE")),In(new dn("heartbeat",e=>new _N(e),"PRIVATE")),Gt(Vh,U0,t),Gt(Vh,U0,"esm2017"),Gt("fire-js","")}EN("");function yp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function X_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TN=X_,Z_=new bs("auth","Firebase",X_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Ku("@firebase/auth");function IN(t,...e){cu.logLevel<=ie.WARN&&cu.warn(`Auth (${Ni}): ${t}`,...e)}function Tl(t,...e){cu.logLevel<=ie.ERROR&&cu.error(`Auth (${Ni}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw xp(t,...e)}function un(t,...e){return xp(t,...e)}function vp(t,e,n){const r=Object.assign(Object.assign({},TN()),{[e]:n});return new bs("auth","Firebase",r).create(e,{appName:t.name})}function qn(t){return vp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),vp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Z_.create(t,...e)}function X(t,e,...n){if(!t)throw xp(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tl(e),new Error(e)}function Kn(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NN(){return H0()==="http:"||H0()==="https:"}function H0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NN()||hp()||"connection"in navigator)?navigator.onLine:!0}function kN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=rS()||iS()}get(){return AN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new pa(3e4,6e4);function Zn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mn(t,e,n,r,s={}){return tw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=fa(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),ew.fetch()(nw(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function tw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},CN),e);try{const s=new RN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw sl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw vp(t,f,d);Jt(t,f)}}catch(s){if(s instanceof pn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function ma(t,e,n,r,s={}){const i=await mn(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_p(t.config,s):`${t.config.apiScheme}://${s}`}function PN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),jN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=un(t,e,r);return s.customData._tokenResponse=n,s}function W0(t){return t!==void 0&&t.enterprise!==void 0}class DN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return PN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function LN(t,e){return mn(t,"GET","/v2/recaptchaConfig",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return mn(t,"POST","/v1/accounts:delete",e)}async function rw(t,e){return mn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ON(t,e=!1){const n=Te(t),r=await n.getIdToken(e),s=wp(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eo(vd(s.auth_time)),issuedAtTime:Eo(vd(s.iat)),expirationTime:Eo(vd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vd(t){return Number(t)*1e3}function wp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tl("JWT malformed, contained fewer than 3 sections"),null;try{const s=q_(n);return s?JSON.parse(s):(Tl("Failed to decode base64 JWT payload"),null)}catch(s){return Tl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function G0(t){const e=wp(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pn&&VN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eo(this.lastLoginAt),this.creationTime=Eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ds(t,rw(n,{idToken:r}));X(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sw(i.providerUserInfo):[],u=qN(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new zh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function UN(t){const e=Te(t);await du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qN(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sw(t){return t.map(e=>{var{providerId:n}=e,r=yp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(t,e){const n=await tw(t,{},async()=>{const r=fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=nw(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",ew.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function BN(t,e){return mn(t,"POST","/v2/accounts:revokeToken",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=G0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await zN(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ni;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ni,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new FN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new zh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ds(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ON(this,e)}reload(){return UN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await du(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await ds(this,MN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,C=(u=n.tenantId)!==null&&u!==void 0?u:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:M,isAnonymous:D,providerData:V,stsTokenManager:N}=n;X(T&&N,e,"internal-error");const y=ni.fromJSON(this.name,N);X(typeof T=="string",e,"internal-error"),ir(g,e.name),ir(m,e.name),X(typeof M=="boolean",e,"internal-error"),X(typeof D=="boolean",e,"internal-error"),ir(w,e.name),ir(S,e.name),ir(C,e.name),ir(P,e.name),ir(b,e.name),ir(E,e.name);const _=new Vn({uid:T,auth:e,email:m,emailVerified:M,displayName:g,isAnonymous:D,photoURL:S,phoneNumber:w,tenantId:C,stsTokenManager:y,createdAt:b,lastLoginAt:E});return V&&Array.isArray(V)&&(_.providerData=V.map(v=>Object.assign({},v))),P&&(_._redirectEventId=P),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new ni;s.updateFromServerResponse(n);const i=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await du(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new ni;u.updateFromIdToken(r);const c=new Vn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new zh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map;function Fn(t){Kn(t instanceof Function,"Expected a class definition");let e=K0.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,K0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iw.type="NONE";const Q0=iw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t,e,n){return`firebase:${t}:${e}:${n}`}class ri{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Il(this.userKey,s.apiKey,i),this.fullPersistenceKey=Il("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ri(Fn(Q0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fn(Q0);const o=Il(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Vn._fromJSON(e,f);d!==i&&(u=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ri(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ri(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dw(e))return"Blackberry";if(hw(e))return"Webos";if(aw(e))return"Safari";if((e.includes("chrome/")||lw(e))&&!e.includes("edge/"))return"Chrome";if(cw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function ow(t=ft()){return/firefox\//i.test(t)}function aw(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lw(t=ft()){return/crios\//i.test(t)}function uw(t=ft()){return/iemobile/i.test(t)}function cw(t=ft()){return/android/i.test(t)}function dw(t=ft()){return/blackberry/i.test(t)}function hw(t=ft()){return/webos/i.test(t)}function bp(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $N(t=ft()){var e;return bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HN(){return oS()&&document.documentMode===10}function fw(t=ft()){return bp(t)||cw(t)||hw(t)||dw(t)||/windows phone/i.test(t)||uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e=[]){let n;switch(t){case"Browser":n=Y0(ft());break;case"Worker":n=`${Y0(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ni}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e={}){return mn(t,"GET","/v2/passwordPolicy",Zn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=6;class QN{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:KN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J0(this),this.idTokenSubscription=new J0(this),this.beforeStateQueue=new WN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ri.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rw(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(on(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await du(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(qn(this));const n=e?Te(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await GN(this),n=new QN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new bs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await BN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await ri.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&IN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function er(t){return Te(t)}class J0{constructor(e){this.auth=e,this.observer=null,this.addObserver=hS(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JN(t){Qu=t}function mw(t){return Qu.loadJS(t)}function XN(){return Qu.recaptchaEnterpriseScript}function ZN(){return Qu.gapiScript}function eA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const tA="recaptcha-enterprise",nA="NO_RECAPTCHA";class rA{constructor(e){this.type=tA,this.auth=er(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{LN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new DN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;W0(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(nA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&W0(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=XN();c.length!==0&&(c+=u),mw(c).then(()=>{s(u,i,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function X0(t,e,n,r=!1){const s=new rA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await X0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await X0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t,e){const n=Es(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Qo(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function iA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function oA(t,e,n){const r=er(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=gw(e),{host:o,port:u}=aA(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),lA()}function gw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function aA(t){const e=gw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Z0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Z0(o)}}}function Z0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function lA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function uA(t,e){return mn(t,"POST","/v1/accounts:update",e)}async function cA(t,e){return mn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e){return ma(t,"POST","/v1/accounts:signInWithPassword",Zn(t,e))}async function yw(t,e){return mn(t,"POST","/v1/accounts:sendOobCode",Zn(t,e))}async function hA(t,e){return yw(t,e)}async function fA(t,e){return yw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pA(t,e){return ma(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}async function mA(t,e){return ma(t,"POST","/v1/accounts:signInWithEmailLink",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Ep{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Jo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Jo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hu(e,n,"signInWithPassword",dA);case"emailLink":return pA(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hu(e,r,"signUpPassword",cA);case"emailLink":return mA(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t,e){return ma(t,"POST","/v1/accounts:signInWithIdp",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="http://localhost";class hs extends Ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=yp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new hs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}buildRequest(){const e={requestUri:gA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vA(t){const e=oo(ao(t)).link,n=e?oo(ao(e)).deep_link_id:null,r=oo(ao(t)).deep_link_id;return(r?oo(ao(r)).link:null)||r||n||e||t}class Tp{constructor(e){var n,r,s,i,o,u;const c=oo(ao(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=yA((s=c.mode)!==null&&s!==void 0?s:null);X(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=vA(e);try{return new Tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,n){return Jo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tp.parseLink(n);return X(r,"argument-error"),Jo._fromEmailAndCode(e,r.code,r.tenantId)}}Ts.PROVIDER_ID="password";Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends Ip{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends ga{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rn.credential(n,r)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ga{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ga{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(t,e){return ma(t,"POST","/v1/accounts:signUp",Zn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vn._fromIdTokenResponse(e,r,s),o=ey(r);return new fs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ey(r);return new fs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ey(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu extends pn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new fu(e,n,r,s)}}function vw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?fu._fromErrorAndOperation(t,i,e,r):i})}async function _A(t,e,n=!1){const r=await ds(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xw(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(qn(r));const s="reauthenticate";try{const i=await ds(t,vw(r,s,e,t),n);X(i.idToken,r,"internal-error");const o=wp(i.idToken);X(o,r,"internal-error");const{sub:u}=o;return X(t.uid===u,r,"user-mismatch"),fs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(t,e,n=!1){if(on(t.app))return Promise.reject(qn(t));const r="signIn",s=await vw(t,r,e),i=await fs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function wA(t,e){return _w(er(t),e)}async function bA(t,e){return xw(Te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(t){const e=er(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Bh(t,e,n){const r=er(t);await hu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",fA)}async function bw(t,e,n){if(on(t.app))return Promise.reject(qn(t));const r=er(t),o=await hu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xA).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ww(t),c}),u=await fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function $h(t,e,n){return on(t.app)?Promise.reject(qn(t)):wA(Te(t),Ts.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ww(t),r})}async function ty(t,e){const n=Te(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await hA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(t,e){return mn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ew(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Te(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ds(r,EA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function TA(t,e){return IA(Te(t),null,e)}async function IA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ds(t,uA(r,i));await t._updateTokensIfNecessary(o,!0)}function SA(t,e,n,r){return Te(t).onIdTokenChanged(e,n,r)}function NA(t,e,n){return Te(t).beforeAuthStateChanged(e,n)}function AA(t,e,n,r){return Te(t).onAuthStateChanged(e,n,r)}function kA(t){return Te(t).signOut()}const pu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pu,"1"),this.storage.removeItem(pu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=1e3,jA=10;class Iw extends Tw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);HN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iw.type="LOCAL";const PA=Iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Tw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sw.type="SESSION";const Nw=Sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Yu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await RA(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=Sp("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return window}function LA(t){bn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){return typeof bn().WorkerGlobalScope<"u"&&typeof bn().importScripts=="function"}async function MA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VA(){return Aw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",FA=1,mu="firebaseLocalStorage",Cw="fbase_key";class ya{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ju(t,e){return t.transaction([mu],e?"readwrite":"readonly").objectStore(mu)}function UA(){const t=indexedDB.deleteDatabase(kw);return new ya(t).toPromise()}function Hh(){const t=indexedDB.open(kw,FA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mu,{keyPath:Cw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mu)?e(r):(r.close(),await UA(),e(await Hh()))})})}async function ny(t,e,n){const r=Ju(t,!0).put({[Cw]:e,value:n});return new ya(r).toPromise()}async function qA(t,e){const n=Ju(t,!1).get(e),r=await new ya(n).toPromise();return r===void 0?null:r.value}function ry(t,e){const n=Ju(t,!0).delete(e);return new ya(n).toPromise()}const zA=800,BA=3;class jw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Aw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yu._getInstance(VA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await MA(),!this.activeServiceWorker)return;this.sender=new DA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hh();return await ny(e,pu,"1"),await ry(e,pu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ny(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ry(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ju(s,!1).getAll();return new ya(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jw.type="LOCAL";const $A=jw;new pa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t,e){return e?Fn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np extends Ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function HA(t){return _w(t.auth,new Np(t),t.bypassAuthState)}function WA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),xw(n,new Np(t),t.bypassAuthState)}async function GA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),_A(n,new Np(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HA;case"linkViaPopup":case"linkViaRedirect":return GA;case"reauthViaPopup":case"reauthViaRedirect":return WA;default:Jt(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new pa(2e3,1e4);async function QA(t,e,n){if(on(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));const r=er(t);SN(t,e,Ip);const s=Pw(r,n);return new es(r,"signInViaPopup",e,s).executeNotNull()}class es extends Rw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KA.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="pendingRedirect",Sl=new Map;class JA extends Rw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Sl.get(this.auth._key());if(!e){try{const r=await XA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Sl.set(this.auth._key(),e)}return this.bypassAuthState||Sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XA(t,e){const n=tk(e),r=ek(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZA(t,e){Sl.set(t._key(),e)}function ek(t){return Fn(t._redirectPersistence)}function tk(t){return Il(YA,t.config.apiKey,t.name)}async function nk(t,e,n=!1){if(on(t.app))return Promise.reject(qn(t));const r=er(t),s=Pw(r,e),o=await new JA(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=10*60*1e3;class sk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ik(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Dw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rk&&this.cachedEventUids.clear(),this.cachedEventUids.has(sy(e))}saveEventToCache(e){this.cachedEventUids.add(sy(e)),this.lastProcessedEventTime=Date.now()}}function sy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Dw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ik(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Dw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e={}){return mn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lk=/^https?/;async function uk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ok(t);for(const n of e)try{if(ck(n))return}catch{}Jt(t,"unauthorized-domain")}function ck(t){const e=qh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lk.test(n))return!1;if(ak.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new pa(3e4,6e4);function iy(){const t=bn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hk(t){return new Promise((e,n)=>{var r,s,i;function o(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),n(un(t,"network-request-failed"))},timeout:dk.get()})}if(!((s=(r=bn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=bn().gapi)===null||i===void 0)&&i.load)o();else{const u=eA("iframefcb");return bn()[u]=()=>{gapi.load?o():n(un(t,"network-request-failed"))},mw(`${ZN()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Nl=null,e})}let Nl=null;function fk(t){return Nl=Nl||hk(t),Nl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=new pa(5e3,15e3),mk="__/auth/iframe",gk="emulator/auth/iframe",yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xk(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_p(e,gk):`https://${t.config.authDomain}/${mk}`,r={apiKey:e.apiKey,appName:t.name,v:Ni},s=vk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${fa(r).slice(1)}`}async function _k(t){const e=await fk(t),n=bn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:xk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=un(t,"network-request-failed"),u=bn().setTimeout(()=>{i(o)},pk.get());function c(){bn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bk=500,Ek=600,Tk="_blank",Ik="http://localhost";class oy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sk(t,e,n,r=bk,s=Ek){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},wk),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ft().toLowerCase();n&&(u=lw(d)?Tk:n),ow(d)&&(e=e||Ik,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[w,S])=>`${m}${w}=${S},`,"");if($N(d)&&u!=="_self")return Nk(e||"",u),new oy(null);const g=window.open(e||"",u,f);X(g,t,"popup-blocked");try{g.focus()}catch{}return new oy(g)}function Nk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="__/auth/handler",kk="emulator/auth/handler",Ck=encodeURIComponent("fac");async function ay(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ni,eventId:s};if(e instanceof Ip){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",dS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof ga){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),d=c?`#${Ck}=${encodeURIComponent(c)}`:"";return`${jk(t)}?${fa(u).slice(1)}${d}`}function jk({config:t}){return t.emulator?_p(t,kk):`https://${t.authDomain}/${Ak}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="webStorageSupport";class Pk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nw,this._completeRedirectFn=nk,this._overrideRedirectResult=ZA}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await ay(e,n,r,qh(),s);return Sk(e,o,Sp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ay(e,n,r,qh(),s);return LA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _k(e),r=new sk(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xd,{type:xd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[xd];o!==void 0&&n(!!o),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fw()||aw()||bp()}}const Rk=Pk;var ly="@firebase/auth",uy="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Mk(t){In(new dn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(t)},d=new YN(r,s,i,c);return iA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),In(new dn("auth-internal",e=>{const n=er(e.getProvider("auth").getImmediate());return(r=>new Dk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gt(ly,uy,Lk(t)),Gt(ly,uy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=5*60,Vk=$_("authIdTokenMaxAge")||Ok;let cy=null;const Fk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Vk)return;const s=n==null?void 0:n.token;cy!==s&&(cy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Uk(t=gp()){const e=Es(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sA(t,{popupRedirectResolver:Rk,persistence:[$A,PA,Nw]}),r=$_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Fk(i.toString());NA(n,o,()=>o(n.currentUser)),SA(n,u=>o(u))}}const s=z_("auth");return s&&oA(n,`http://${s}`),n}function qk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=un("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",qk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Mk("Browser");var zk="firebase",Bk="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt(zk,Bk,"app");var dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,Lw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,y){function _(){}_.prototype=y.prototype,N.D=y.prototype,N.prototype=new _,N.prototype.constructor=N,N.C=function(v,k,R){for(var A=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)A[ue-2]=arguments[ue];return y.prototype[k].apply(v,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,y,_){_||(_=0);var v=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)v[k]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(k=0;16>k;++k)v[k]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=N.g[0],_=N.g[1],k=N.g[2];var R=N.g[3],A=y+(R^_&(k^R))+v[0]+3614090360&4294967295;y=_+(A<<7&4294967295|A>>>25),A=R+(k^y&(_^k))+v[1]+3905402710&4294967295,R=y+(A<<12&4294967295|A>>>20),A=k+(_^R&(y^_))+v[2]+606105819&4294967295,k=R+(A<<17&4294967295|A>>>15),A=_+(y^k&(R^y))+v[3]+3250441966&4294967295,_=k+(A<<22&4294967295|A>>>10),A=y+(R^_&(k^R))+v[4]+4118548399&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(k^y&(_^k))+v[5]+1200080426&4294967295,R=y+(A<<12&4294967295|A>>>20),A=k+(_^R&(y^_))+v[6]+2821735955&4294967295,k=R+(A<<17&4294967295|A>>>15),A=_+(y^k&(R^y))+v[7]+4249261313&4294967295,_=k+(A<<22&4294967295|A>>>10),A=y+(R^_&(k^R))+v[8]+1770035416&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(k^y&(_^k))+v[9]+2336552879&4294967295,R=y+(A<<12&4294967295|A>>>20),A=k+(_^R&(y^_))+v[10]+4294925233&4294967295,k=R+(A<<17&4294967295|A>>>15),A=_+(y^k&(R^y))+v[11]+2304563134&4294967295,_=k+(A<<22&4294967295|A>>>10),A=y+(R^_&(k^R))+v[12]+1804603682&4294967295,y=_+(A<<7&4294967295|A>>>25),A=R+(k^y&(_^k))+v[13]+4254626195&4294967295,R=y+(A<<12&4294967295|A>>>20),A=k+(_^R&(y^_))+v[14]+2792965006&4294967295,k=R+(A<<17&4294967295|A>>>15),A=_+(y^k&(R^y))+v[15]+1236535329&4294967295,_=k+(A<<22&4294967295|A>>>10),A=y+(k^R&(_^k))+v[1]+4129170786&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^k&(y^_))+v[6]+3225465664&4294967295,R=y+(A<<9&4294967295|A>>>23),A=k+(y^_&(R^y))+v[11]+643717713&4294967295,k=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(k^R))+v[0]+3921069994&4294967295,_=k+(A<<20&4294967295|A>>>12),A=y+(k^R&(_^k))+v[5]+3593408605&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^k&(y^_))+v[10]+38016083&4294967295,R=y+(A<<9&4294967295|A>>>23),A=k+(y^_&(R^y))+v[15]+3634488961&4294967295,k=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(k^R))+v[4]+3889429448&4294967295,_=k+(A<<20&4294967295|A>>>12),A=y+(k^R&(_^k))+v[9]+568446438&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^k&(y^_))+v[14]+3275163606&4294967295,R=y+(A<<9&4294967295|A>>>23),A=k+(y^_&(R^y))+v[3]+4107603335&4294967295,k=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(k^R))+v[8]+1163531501&4294967295,_=k+(A<<20&4294967295|A>>>12),A=y+(k^R&(_^k))+v[13]+2850285829&4294967295,y=_+(A<<5&4294967295|A>>>27),A=R+(_^k&(y^_))+v[2]+4243563512&4294967295,R=y+(A<<9&4294967295|A>>>23),A=k+(y^_&(R^y))+v[7]+1735328473&4294967295,k=R+(A<<14&4294967295|A>>>18),A=_+(R^y&(k^R))+v[12]+2368359562&4294967295,_=k+(A<<20&4294967295|A>>>12),A=y+(_^k^R)+v[5]+4294588738&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^k)+v[8]+2272392833&4294967295,R=y+(A<<11&4294967295|A>>>21),A=k+(R^y^_)+v[11]+1839030562&4294967295,k=R+(A<<16&4294967295|A>>>16),A=_+(k^R^y)+v[14]+4259657740&4294967295,_=k+(A<<23&4294967295|A>>>9),A=y+(_^k^R)+v[1]+2763975236&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^k)+v[4]+1272893353&4294967295,R=y+(A<<11&4294967295|A>>>21),A=k+(R^y^_)+v[7]+4139469664&4294967295,k=R+(A<<16&4294967295|A>>>16),A=_+(k^R^y)+v[10]+3200236656&4294967295,_=k+(A<<23&4294967295|A>>>9),A=y+(_^k^R)+v[13]+681279174&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^k)+v[0]+3936430074&4294967295,R=y+(A<<11&4294967295|A>>>21),A=k+(R^y^_)+v[3]+3572445317&4294967295,k=R+(A<<16&4294967295|A>>>16),A=_+(k^R^y)+v[6]+76029189&4294967295,_=k+(A<<23&4294967295|A>>>9),A=y+(_^k^R)+v[9]+3654602809&4294967295,y=_+(A<<4&4294967295|A>>>28),A=R+(y^_^k)+v[12]+3873151461&4294967295,R=y+(A<<11&4294967295|A>>>21),A=k+(R^y^_)+v[15]+530742520&4294967295,k=R+(A<<16&4294967295|A>>>16),A=_+(k^R^y)+v[2]+3299628645&4294967295,_=k+(A<<23&4294967295|A>>>9),A=y+(k^(_|~R))+v[0]+4096336452&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~k))+v[7]+1126891415&4294967295,R=y+(A<<10&4294967295|A>>>22),A=k+(y^(R|~_))+v[14]+2878612391&4294967295,k=R+(A<<15&4294967295|A>>>17),A=_+(R^(k|~y))+v[5]+4237533241&4294967295,_=k+(A<<21&4294967295|A>>>11),A=y+(k^(_|~R))+v[12]+1700485571&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~k))+v[3]+2399980690&4294967295,R=y+(A<<10&4294967295|A>>>22),A=k+(y^(R|~_))+v[10]+4293915773&4294967295,k=R+(A<<15&4294967295|A>>>17),A=_+(R^(k|~y))+v[1]+2240044497&4294967295,_=k+(A<<21&4294967295|A>>>11),A=y+(k^(_|~R))+v[8]+1873313359&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~k))+v[15]+4264355552&4294967295,R=y+(A<<10&4294967295|A>>>22),A=k+(y^(R|~_))+v[6]+2734768916&4294967295,k=R+(A<<15&4294967295|A>>>17),A=_+(R^(k|~y))+v[13]+1309151649&4294967295,_=k+(A<<21&4294967295|A>>>11),A=y+(k^(_|~R))+v[4]+4149444226&4294967295,y=_+(A<<6&4294967295|A>>>26),A=R+(_^(y|~k))+v[11]+3174756917&4294967295,R=y+(A<<10&4294967295|A>>>22),A=k+(y^(R|~_))+v[2]+718787259&4294967295,k=R+(A<<15&4294967295|A>>>17),A=_+(R^(k|~y))+v[9]+3951481745&4294967295,N.g[0]=N.g[0]+y&4294967295,N.g[1]=N.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+R&4294967295}r.prototype.u=function(N,y){y===void 0&&(y=N.length);for(var _=y-this.blockSize,v=this.B,k=this.h,R=0;R<y;){if(k==0)for(;R<=_;)s(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<y;)if(v[k++]=N.charCodeAt(R++),k==this.blockSize){s(this,v),k=0;break}}else for(;R<y;)if(v[k++]=N[R++],k==this.blockSize){s(this,v),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var y=1;y<N.length-8;++y)N[y]=0;var _=8*this.o;for(y=N.length-8;y<N.length;++y)N[y]=_&255,_/=256;for(this.u(N),N=Array(16),y=_=0;4>y;++y)for(var v=0;32>v;v+=8)N[_++]=this.g[y]>>>v&255;return N};function i(N,y){var _=u;return Object.prototype.hasOwnProperty.call(_,N)?_[N]:_[N]=y(N)}function o(N,y){this.h=y;for(var _=[],v=!0,k=N.length-1;0<=k;k--){var R=N[k]|0;v&&R==y||(_[k]=R,v=!1)}this.g=_}var u={};function c(N){return-128<=N&&128>N?i(N,function(y){return new o([y|0],0>y?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return g;if(0>N)return P(d(-N));for(var y=[],_=1,v=0;N>=_;v++)y[v]=N/_|0,_*=4294967296;return new o(y,0)}function f(N,y){if(N.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(N.charAt(0)=="-")return P(f(N.substring(1),y));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(y,8)),v=g,k=0;k<N.length;k+=8){var R=Math.min(8,N.length-k),A=parseInt(N.substring(k,k+R),y);8>R?(R=d(Math.pow(y,R)),v=v.j(R).add(d(A))):(v=v.j(_),v=v.add(d(A)))}return v}var g=c(0),m=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-P(this).m();for(var N=0,y=1,_=0;_<this.g.length;_++){var v=this.i(_);N+=(0<=v?v:4294967296+v)*y,y*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S(this))return"0";if(C(this))return"-"+P(this).toString(N);for(var y=d(Math.pow(N,6)),_=this,v="";;){var k=M(_,y).g;_=b(_,k.j(y));var R=((0<_.g.length?_.g[0]:_.h)>>>0).toString(N);if(_=k,S(_))return R+v;for(;6>R.length;)R="0"+R;v=R+v}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function S(N){if(N.h!=0)return!1;for(var y=0;y<N.g.length;y++)if(N.g[y]!=0)return!1;return!0}function C(N){return N.h==-1}t.l=function(N){return N=b(this,N),C(N)?-1:S(N)?0:1};function P(N){for(var y=N.g.length,_=[],v=0;v<y;v++)_[v]=~N.g[v];return new o(_,~N.h).add(m)}t.abs=function(){return C(this)?P(this):this},t.add=function(N){for(var y=Math.max(this.g.length,N.g.length),_=[],v=0,k=0;k<=y;k++){var R=v+(this.i(k)&65535)+(N.i(k)&65535),A=(R>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);v=A>>>16,R&=65535,A&=65535,_[k]=A<<16|R}return new o(_,_[_.length-1]&-2147483648?-1:0)};function b(N,y){return N.add(P(y))}t.j=function(N){if(S(this)||S(N))return g;if(C(this))return C(N)?P(this).j(P(N)):P(P(this).j(N));if(C(N))return P(this.j(P(N)));if(0>this.l(w)&&0>N.l(w))return d(this.m()*N.m());for(var y=this.g.length+N.g.length,_=[],v=0;v<2*y;v++)_[v]=0;for(v=0;v<this.g.length;v++)for(var k=0;k<N.g.length;k++){var R=this.i(v)>>>16,A=this.i(v)&65535,ue=N.i(k)>>>16,Ve=N.i(k)&65535;_[2*v+2*k]+=A*Ve,E(_,2*v+2*k),_[2*v+2*k+1]+=R*Ve,E(_,2*v+2*k+1),_[2*v+2*k+1]+=A*ue,E(_,2*v+2*k+1),_[2*v+2*k+2]+=R*ue,E(_,2*v+2*k+2)}for(v=0;v<y;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=y;v<2*y;v++)_[v]=0;return new o(_,0)};function E(N,y){for(;(N[y]&65535)!=N[y];)N[y+1]+=N[y]>>>16,N[y]&=65535,y++}function T(N,y){this.g=N,this.h=y}function M(N,y){if(S(y))throw Error("division by zero");if(S(N))return new T(g,g);if(C(N))return y=M(P(N),y),new T(P(y.g),P(y.h));if(C(y))return y=M(N,P(y)),new T(P(y.g),y.h);if(30<N.g.length){if(C(N)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,v=y;0>=v.l(N);)_=D(_),v=D(v);var k=V(_,1),R=V(v,1);for(v=V(v,2),_=V(_,2);!S(v);){var A=R.add(v);0>=A.l(N)&&(k=k.add(_),R=A),v=V(v,1),_=V(_,1)}return y=b(N,k.j(y)),new T(k,y)}for(k=g;0<=N.l(y);){for(_=Math.max(1,Math.floor(N.m()/y.m())),v=Math.ceil(Math.log(_)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),R=d(_),A=R.j(y);C(A)||0<A.l(N);)_-=v,R=d(_),A=R.j(y);S(R)&&(R=m),k=k.add(R),N=b(N,A)}return new T(k,N)}t.A=function(N){return M(this,N).h},t.and=function(N){for(var y=Math.max(this.g.length,N.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)&N.i(v);return new o(_,this.h&N.h)},t.or=function(N){for(var y=Math.max(this.g.length,N.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)|N.i(v);return new o(_,this.h|N.h)},t.xor=function(N){for(var y=Math.max(this.g.length,N.g.length),_=[],v=0;v<y;v++)_[v]=this.i(v)^N.i(v);return new o(_,this.h^N.h)};function D(N){for(var y=N.g.length+1,_=[],v=0;v<y;v++)_[v]=N.i(v)<<1|N.i(v-1)>>>31;return new o(_,N.h)}function V(N,y){var _=y>>5;y%=32;for(var v=N.g.length-_,k=[],R=0;R<v;R++)k[R]=0<y?N.i(R+_)>>>y|N.i(R+_+1)<<32-y:N.i(R+_);return new o(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Lw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,is=o}).apply(typeof dy<"u"?dy:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mw,Ow,lo,Vw,Al,Wh,Fw,Uw,qw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var L=l[x];if(!(L in p))break e;p=p[L]}l=l[l.length-1],x=p[l],h=h(x),h!=x&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,x=!1,L={next:function(){if(!x&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function g(l,h,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function w(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,L,O){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return h.prototype[L].apply(x,B)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let x=0;x<h;x++)p[x]=l[x];return p}return[]}function P(l,h){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(c(x)){const L=l.length||0,O=x.length||0;l.length=L+O;for(let B=0;B<O;B++)l[L+B]=x[B]}else l.push(x)}}class b{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,h,p){for(const x in l)h.call(p,l[x],x,l)}function N(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(l,h){let p,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(p in x)l[p]=x[p];for(let O=0;O<_.length;O++)p=_[O],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function k(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function R(l){u.setTimeout(()=>{throw l},0)}function A(){var l=G;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ue{constructor(){this.h=this.g=null}add(h,p){const x=Ve.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var Ve=new b(()=>new bt,l=>l.reset());class bt{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,$=!1,G=new ue,Y=()=>{const l=u.Promise.resolve(void 0);tt=()=>{l.then(ce)}};var ce=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(p){R(p)}var h=Ve;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var qt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};u.addEventListener("test",p,h),u.removeEventListener("test",p,h)}catch{}return l}();function zt(l,h){if(Ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{M(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Xt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&zt.aa.h.call(this)}}S(zt,Ie);var Xt={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),Zt=0;function z(l,h,p,x,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=L,this.key=++Zt,this.da=this.fa=!1}function fe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function qr(l){this.src=l,this.g={},this.h=0}qr.prototype.add=function(l,h,p,x,L){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var B=vc(l,h,x,L);return-1<B?(h=l[B],p||(h.fa=!1)):(h=new z(h,this.src,O,!!x,L),h.fa=p,l.push(h)),h};function zr(l,h){var p=h.type;if(p in l.g){var x=l.g[p],L=Array.prototype.indexOf.call(x,h,void 0),O;(O=0<=L)&&Array.prototype.splice.call(x,L,1),O&&(fe(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function vc(l,h,p,x){for(var L=0;L<l.length;++L){var O=l[L];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==x)return L}return-1}var xc="closure_lm_"+(1e6*Math.random()|0),_c={};function vm(l,h,p,x,L){if(Array.isArray(h)){for(var O=0;O<h.length;O++)vm(l,h[O],p,x,L);return null}return p=wm(p),l&&l[jt]?l.K(h,p,d(x)?!!x.capture:!!x,L):qb(l,h,p,!1,x,L)}function qb(l,h,p,x,L,O){if(!h)throw Error("Invalid event type");var B=d(L)?!!L.capture:!!L,ge=bc(l);if(ge||(l[xc]=ge=new qr(l)),p=ge.add(h,p,x,B,O),p.proxy)return p;if(x=zb(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)qt||(L=B),L===void 0&&(L=!1),l.addEventListener(h.toString(),x,L);else if(l.attachEvent)l.attachEvent(_m(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function zb(){function l(p){return h.call(l.src,l.listener,p)}const h=Bb;return l}function xm(l,h,p,x,L){if(Array.isArray(h))for(var O=0;O<h.length;O++)xm(l,h[O],p,x,L);else x=d(x)?!!x.capture:!!x,p=wm(p),l&&l[jt]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=vc(O,p,x,L),-1<p&&(fe(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=bc(l))&&(h=l.g[h.toString()],l=-1,h&&(l=vc(h,p,x,L)),(p=-1<l?h[l]:null)&&wc(p))}function wc(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[jt])zr(h.i,l);else{var p=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(p,x,l.capture):h.detachEvent?h.detachEvent(_m(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=bc(h))?(zr(p,l),p.h==0&&(p.src=null,h[xc]=null)):fe(l)}}}function _m(l){return l in _c?_c[l]:_c[l]="on"+l}function Bb(l,h){if(l.da)l=!0;else{h=new zt(h,this);var p=l.listener,x=l.ha||l.src;l.fa&&wc(l),l=p.call(x,h)}return l}function bc(l){return l=l[xc],l instanceof qr?l:null}var Ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function wm(l){return typeof l=="function"?l:(l[Ec]||(l[Ec]=function(h){return l.handleEvent(h)}),l[Ec])}function nt(){pe.call(this),this.i=new qr(this),this.M=this,this.F=null}S(nt,pe),nt.prototype[jt]=!0,nt.prototype.removeEventListener=function(l,h,p,x){xm(this,l,h,p,x)};function pt(l,h){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new Ie(h,l);else if(h instanceof Ie)h.target=h.target||l;else{var L=h;h=new Ie(x,l),v(h,L)}if(L=!0,p)for(var O=p.length-1;0<=O;O--){var B=h.g=p[O];L=Sa(B,x,!0,h)&&L}if(B=h.g=l,L=Sa(B,x,!0,h)&&L,L=Sa(B,x,!1,h)&&L,p)for(O=0;O<p.length;O++)B=h.g=p[O],L=Sa(B,x,!1,h)&&L}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],x=0;x<p.length;x++)fe(p[x]);delete l.g[h],l.h--}}this.F=null},nt.prototype.K=function(l,h,p,x){return this.i.add(String(l),h,!1,p,x)},nt.prototype.L=function(l,h,p,x){return this.i.add(String(l),h,!0,p,x)};function Sa(l,h,p,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,O=0;O<h.length;++O){var B=h[O];if(B&&!B.da&&B.capture==p){var ge=B.listener,We=B.ha||B.src;B.fa&&zr(l.i,B),L=ge.call(We,x)!==!1&&L}}return L&&!x.defaultPrevented}function bm(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(l,h||0)}function Em(l){l.g=bm(()=>{l.g=null,l.i&&(l.i=!1,Em(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class $b extends pe{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Em(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ri(l){pe.call(this),this.h=l,this.g={}}S(Ri,pe);var Tm=[];function Im(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&wc(h)},l),l.g={}}Ri.prototype.N=function(){Ri.aa.N.call(this),Im(this)},Ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tc=u.JSON.stringify,Hb=u.JSON.parse,Wb=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function Ic(){}Ic.prototype.h=null;function Sm(l){return l.h||(l.h=l.i())}function Nm(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sc(){Ie.call(this,"d")}S(Sc,Ie);function Nc(){Ie.call(this,"c")}S(Nc,Ie);var Br={},Am=null;function Na(){return Am=Am||new nt}Br.La="serverreachability";function km(l){Ie.call(this,Br.La,l)}S(km,Ie);function Li(l){const h=Na();pt(h,new km(h))}Br.STAT_EVENT="statevent";function Cm(l,h){Ie.call(this,Br.STAT_EVENT,l),this.stat=h}S(Cm,Ie);function mt(l){const h=Na();pt(h,new Cm(h,l))}Br.Ma="timingevent";function jm(l,h){Ie.call(this,Br.Ma,l),this.size=h}S(jm,Ie);function Mi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},h)}function Oi(){this.g=!0}Oi.prototype.xa=function(){this.g=!1};function Gb(l,h,p,x,L,O){l.info(function(){if(l.g)if(O)for(var B="",ge=O.split("&"),We=0;We<ge.length;We++){var de=ge[We].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");B=2<=st.length&&st[1]=="type"?B+(rt+"="+de+"&"):B+(rt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+h+`
`+p+`
`+B})}function Kb(l,h,p,x,L,O,B){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+h+`
`+p+`
`+O+" "+B})}function As(l,h,p,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Yb(l,p)+(x?" "+x:"")})}function Qb(l,h){l.info(function(){return"TIMEOUT: "+h})}Oi.prototype.info=function(){};function Yb(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Tc(p)}catch{return h}}var Aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ac;function ka(){}S(ka,Ic),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},Ac=new ka;function tr(l,h,p,x){this.j=l,this.i=h,this.l=p,this.R=x||1,this.U=new Ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rm}function Rm(){this.i=null,this.g="",this.h=!1}var Dm={},kc={};function Cc(l,h,p){l.L=1,l.v=Ra(An(h)),l.m=p,l.P=!0,Lm(l,null)}function Lm(l,h){l.F=Date.now(),Ca(l),l.A=An(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Qm(p.i,"t",x),l.C=0,p=l.j.J,l.h=new Rm,l.g=fg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new $b(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,x=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Tm[0]=L.toString()),L=Tm);for(var O=0;O<L.length;O++){var B=vm(p,L[O],x||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Li(),Gb(l.i,l.u,l.A,l.l,l.R,l.m)}tr.prototype.ca=function(l){l=l.target;const h=this.M;h&&kn(l)==3?h.j():this.Y(l)},tr.prototype.Y=function(l){try{if(l==this.g)e:{const st=kn(this.g);var h=this.g.Ba();const js=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||ng(this.g)))){this.J||st!=4||h==7||(h==8||0>=js?Li(3):Li(2)),jc(this);var p=this.g.Z();this.X=p;t:if(Mm(this)){var x=ng(this.g);l="";var L=x.length,O=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Vi(this);var B="";break t}this.h.i=new u.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(O&&h==L-1)});x.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,Kb(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,We=this.g;if((ge=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ge)){var de=ge;break t}}de=null}if(p=de)As(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pc(this,p);else{this.o=!1,this.s=3,mt(12),$r(this),Vi(this);break e}}if(this.P){p=!0;let en;for(;!this.J&&this.C<B.length;)if(en=Jb(this,B),en==kc){st==4&&(this.s=4,mt(14),p=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Dm){this.s=4,mt(15),As(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else As(this.i,this.l,en,null),Pc(this,en);if(Mm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,mt(16),p=!1),this.o=this.o&&p,!p)As(this.i,this.l,B,"[Invalid Chunked Response]"),$r(this),Vi(this);else if(0<B.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Vc(rt),rt.M=!0,mt(11))}}else As(this.i,this.l,B,null),Pc(this,B);st==4&&$r(this),this.o&&!this.J&&(st==4?ug(this.j,this):(this.o=!1,Ca(this)))}else pE(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),$r(this),Vi(this)}}}catch{}finally{}};function Mm(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Jb(l,h){var p=l.C,x=h.indexOf(`
`,p);return x==-1?kc:(p=Number(h.substring(p,x)),isNaN(p)?Dm:(x+=1,x+p>h.length?kc:(h=h.slice(x,x+p),l.C=x+p,h)))}tr.prototype.cancel=function(){this.J=!0,$r(this)};function Ca(l){l.S=Date.now()+l.I,Om(l,l.I)}function Om(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Mi(m(l.ba,l),h)}function jc(l){l.B&&(u.clearTimeout(l.B),l.B=null)}tr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Qb(this.i,this.A),this.L!=2&&(Li(),mt(17)),$r(this),this.s=2,Vi(this)):Om(this,this.S-l)};function Vi(l){l.j.G==0||l.J||ug(l.j,l)}function $r(l){jc(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Im(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Pc(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Rc(p.h,l))){if(!l.K&&Rc(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Va(p),Ma(p);else break e;Oc(p),mt(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=Mi(m(p.Za,p),6e3));if(1>=Um(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Wr(p,11)}else if((l.K||p.g==l)&&Va(p),!E(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let de=L[h];if(p.T=de[0],de=de[1],p.G==2)if(de[0]=="c"){p.K=de[1],p.ia=de[2];const rt=de[3];rt!=null&&(p.la=rt,p.j.info("VER="+p.la));const st=de[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const js=de[5];js!=null&&typeof js=="number"&&0<js&&(x=1.5*js,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const en=l.g;if(en){const Ua=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var O=x.h;O.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Dc(O,O.h),O.h=null))}if(x.D){const Fc=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;Fc&&(x.ya=Fc,xe(x.I,x.D,Fc))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var B=l;if(x.qa=hg(x,x.J?x.ia:null,x.W),B.K){qm(x.h,B);var ge=B,We=x.L;We&&(ge.I=We),ge.B&&(jc(ge),Ca(ge)),x.g=B}else ag(x);0<p.i.length&&Oa(p)}else de[0]!="stop"&&de[0]!="close"||Wr(p,7);else p.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Wr(p,7):Mc(p):de[0]!="noop"&&p.l&&p.l.ta(de),p.v=0)}}Li(4)}catch{}}var Xb=class{constructor(l,h){this.g=l,this.map=h}};function Vm(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fm(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Um(l){return l.h?1:l.g?l.g.size:0}function Rc(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Dc(l,h){l.g?l.g.add(h):l.h=h}function qm(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Vm.prototype.cancel=function(){if(this.i=zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function zm(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function Zb(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,x=0;x<p;x++)h.push(l[x]);return h}h=[],p=0;for(x in l)h[p++]=l[x];return h}function eE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const x in l)h[p++]=x;return h}}}function Bm(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=eE(l),x=Zb(l),L=x.length,O=0;O<L;O++)h.call(void 0,x[O],p&&p[O],l)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tE(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),L=null;if(0<=x){var O=l[p].substring(0,x);L=l[p].substring(x+1)}else O=l[p];h(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Hr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Hr){this.h=l.h,ja(this,l.j),this.o=l.o,this.g=l.g,Pa(this,l.s),this.l=l.l;var h=l.i,p=new qi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Hm(this,p),this.m=l.m}else l&&(h=String(l).match($m))?(this.h=!1,ja(this,h[1]||"",!0),this.o=Fi(h[2]||""),this.g=Fi(h[3]||"",!0),Pa(this,h[4]),this.l=Fi(h[5]||"",!0),Hm(this,h[6]||"",!0),this.m=Fi(h[7]||"")):(this.h=!1,this.i=new qi(null,this.h))}Hr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ui(h,Wm,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ui(h,Wm,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Ui(p,p.charAt(0)=="/"?sE:rE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Ui(p,oE)),l.join("")};function An(l){return new Hr(l)}function ja(l,h,p){l.j=p?Fi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Pa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Hm(l,h,p){h instanceof qi?(l.i=h,aE(l.i,l.h)):(p||(h=Ui(h,iE)),l.i=new qi(h,l.h))}function xe(l,h,p){l.i.set(h,p)}function Ra(l){return xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Fi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ui(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,nE),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function nE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Wm=/[#\/\?@]/g,rE=/[#\?:]/g,sE=/[#\?]/g,iE=/[#\?@]/g,oE=/#/g;function qi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function nr(l){l.g||(l.g=new Map,l.h=0,l.i&&tE(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=qi.prototype,t.add=function(l,h){nr(this),this.i=null,l=ks(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Gm(l,h){nr(l),h=ks(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Km(l,h){return nr(l),h=ks(l,h),l.g.has(h)}t.forEach=function(l,h){nr(this),this.g.forEach(function(p,x){p.forEach(function(L){l.call(h,L,x,this)},this)},this)},t.na=function(){nr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let x=0;x<h.length;x++){const L=l[x];for(let O=0;O<L.length;O++)p.push(h[x])}return p},t.V=function(l){nr(this);let h=[];if(typeof l=="string")Km(this,l)&&(h=h.concat(this.g.get(ks(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return nr(this),this.i=null,l=ks(this,l),Km(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Qm(l,h,p){Gm(l,h),0<p.length&&(l.i=null,l.g.set(ks(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var x=h[p];const O=encodeURIComponent(String(x)),B=this.V(x);for(x=0;x<B.length;x++){var L=O;B[x]!==""&&(L+="="+encodeURIComponent(String(B[x]))),l.push(L)}}return this.i=l.join("&")};function ks(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function aE(l,h){h&&!l.j&&(nr(l),l.i=null,l.g.forEach(function(p,x){var L=x.toLowerCase();x!=L&&(Gm(this,x),Qm(this,L,p))},l)),l.j=h}function lE(l,h){const p=new Oi;if(u.Image){const x=new Image;x.onload=w(rr,p,"TestLoadImage: loaded",!0,h,x),x.onerror=w(rr,p,"TestLoadImage: error",!1,h,x),x.onabort=w(rr,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=w(rr,p,"TestLoadImage: timeout",!1,h,x),u.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function uE(l,h){const p=new Oi,x=new AbortController,L=setTimeout(()=>{x.abort(),rr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(O=>{clearTimeout(L),O.ok?rr(p,"TestPingServer: ok",!0,h):rr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),rr(p,"TestPingServer: error",!1,h)})}function rr(l,h,p,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(p)}catch{}}function cE(){this.g=new Wb}function dE(l,h,p){const x=p||"";try{Bm(l,function(L,O){let B=L;d(L)&&(B=Tc(L)),h.push(x+O+"="+encodeURIComponent(B))})}catch(L){throw h.push(x+"type="+encodeURIComponent("_badmap")),L}}function zi(l){this.l=l.Ub||null,this.j=l.eb||!1}S(zi,Ic),zi.prototype.g=function(){return new Da(this.l,this.j)},zi.prototype.i=function(l){return function(){return l}}({});function Da(l,h){nt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Da,nt),t=Da.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,$i(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Bi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ym(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ym(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Bi(this):$i(this),this.readyState==3&&Ym(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Bi(this))},t.Qa=function(l){this.g&&(this.response=l,Bi(this))},t.ga=function(){this.g&&Bi(this)};function Bi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,$i(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function $i(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Jm(l){let h="";return V(l,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function Lc(l,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Jm(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):xe(l,h,p))}function Ce(l){nt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ce,nt);var hE=/^https?$/i,fE=["POST","PUT"];t=Ce.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ac.g(),this.v=this.o?Sm(this.o):Sm(Ac),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){Xm(this,O);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)p.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())p.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),L=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(fE,h,void 0))||x||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of p)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tg(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){Xm(this,O)}};function Xm(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Zm(l),La(l)}function Zm(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,pt(this,"complete"),pt(this,"abort"),La(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),La(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eg(this):this.bb())},t.bb=function(){eg(this)};function eg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||kn(l)!=4||l.Z()!=2)){if(l.u&&kn(l)==4)bm(l.Ea,0,l);else if(pt(l,"readystatechange"),kn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=B===0){var L=String(l.D).match($m)[1]||null;!L&&u.self&&u.self.location&&(L=u.self.location.protocol.slice(0,-1)),x=!hE.test(L?L.toLowerCase():"")}p=x}if(p)pt(l,"complete"),pt(l,"success");else{l.m=6;try{var O=2<kn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Zm(l)}}finally{La(l)}}}}function La(l,h){if(l.g){tg(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||pt(l,"ready");try{p.onreadystatechange=x}catch{}}}function tg(l){l.I&&(u.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function kn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),Hb(h)}};function ng(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pE(l){const h={};l=(l.g&&2<=kn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(E(l[x]))continue;var p=k(l[x]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[L]||[];h[L]=O,O.push(p)}N(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hi(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function rg(l){this.Aa=0,this.i=[],this.j=new Oi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hi("baseRetryDelayMs",5e3,l),this.cb=Hi("retryDelaySeedMs",1e4,l),this.Wa=Hi("forwardChannelMaxRetries",2,l),this.wa=Hi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Vm(l&&l.concurrentRequestLimit),this.Da=new cE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,x){mt(0),this.W=l,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=hg(this,null,this.W),Oa(this)};function Mc(l){if(sg(l),l.G==3){var h=l.U++,p=An(l.I);if(xe(p,"SID",l.K),xe(p,"RID",h),xe(p,"TYPE","terminate"),Wi(l,p),h=new tr(l,l.j,h),h.L=2,h.v=Ra(An(p)),p=!1,u.navigator&&u.navigator.sendBeacon)try{p=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&u.Image&&(new Image().src=h.v,p=!0),p||(h.g=fg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ca(h)}dg(l)}function Ma(l){l.g&&(Vc(l),l.g.cancel(),l.g=null)}function sg(l){Ma(l),l.u&&(u.clearTimeout(l.u),l.u=null),Va(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function Oa(l){if(!Fm(l.h)&&!l.s){l.s=!0;var h=l.Ga;tt||Y(),$||(tt(),$=!0),G.add(h,l),l.B=0}}function mE(l,h){return Um(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Mi(m(l.Ga,l,h),cg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new tr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=y(O),v(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=og(this,L,h),p=An(this.I),xe(p,"RID",l),xe(p,"CVER",22),this.D&&xe(p,"X-HTTP-Session-Id",this.D),Wi(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(Jm(O)))+"&"+h:this.m&&Lc(p,this.m,O)),Dc(this.h,L),this.Ua&&xe(p,"TYPE","init"),this.P?(xe(p,"$req",h),xe(p,"SID","null"),L.T=!0,Cc(L,p,null)):Cc(L,p,h),this.G=2}}else this.G==3&&(l?ig(this,l):this.i.length==0||Fm(this.h)||ig(this))};function ig(l,h){var p;h?p=h.l:p=l.U++;const x=An(l.I);xe(x,"SID",l.K),xe(x,"RID",p),xe(x,"AID",l.T),Wi(l,x),l.m&&l.o&&Lc(x,l.m,l.o),p=new tr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=og(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Dc(l.h,p),Cc(p,x,h)}function Wi(l,h){l.H&&V(l.H,function(p,x){xe(h,x,p)}),l.l&&Bm({},function(p,x){xe(h,x,p)})}function og(l,h,p){p=Math.min(l.i.length,p);var x=l.l?m(l.l.Na,l.l,l):null;e:{var L=l.i;let O=-1;for(;;){const B=["count="+p];O==-1?0<p?(O=L[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let ge=!0;for(let We=0;We<p;We++){let de=L[We].g;const rt=L[We].map;if(de-=O,0>de)O=Math.max(0,L[We].g-100),ge=!1;else try{dE(rt,B,"req"+de+"_")}catch{x&&x(rt)}}if(ge){x=B.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,x}function ag(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;tt||Y(),$||(tt(),$=!0),G.add(h,l),l.v=0}}function Oc(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Mi(m(l.Fa,l),cg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Mi(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Ma(this),lg(this))};function Vc(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function lg(l){l.g=new tr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=An(l.qa);xe(h,"RID","rpc"),xe(h,"SID",l.K),xe(h,"AID",l.T),xe(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&xe(h,"TO",l.ja),xe(h,"TYPE","xmlhttp"),Wi(l,h),l.m&&l.o&&Lc(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Ra(An(h)),p.m=null,p.P=!0,Lm(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ma(this),Oc(this),mt(19))};function Va(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function ug(l,h){var p=null;if(l.g==h){Va(l),Vc(l),l.g=null;var x=2}else if(Rc(l.h,h))p=h.D,qm(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;x=Na(),pt(x,new jm(x,p)),Oa(l)}else ag(l);else if(L=h.s,L==3||L==0&&0<h.X||!(x==1&&mE(l,h)||x==2&&Oc(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),L){case 1:Wr(l,5);break;case 4:Wr(l,10);break;case 3:Wr(l,6);break;default:Wr(l,2)}}}function cg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Wr(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),x=l.Xa;const L=!x;x=new Hr(x||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ja(x,"https"),Ra(x),L?lE(x.toString(),p):uE(x.toString(),p)}else mt(2);l.G=0,l.l&&l.l.sa(h),dg(l),sg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function dg(l){if(l.G=0,l.ka=[],l.l){const h=zm(l.h);(h.length!=0||l.i.length!=0)&&(P(l.ka,h),P(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function hg(l,h,p){var x=p instanceof Hr?An(p):new Hr(p);if(x.g!="")h&&(x.g=h+"."+x.g),Pa(x,x.s);else{var L=u.location;x=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var O=new Hr(null);x&&ja(O,x),h&&(O.g=h),L&&Pa(O,L),p&&(O.l=p),x=O}return p=l.D,h=l.ya,p&&h&&xe(x,p,h),xe(x,"VER",l.la),Wi(l,x),x}function fg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Ce(new zi({eb:p})):new Ce(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pg(){}t=pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){nt.call(this),this.g=new rg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Cs(this)}S(Pt,nt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){Mc(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Tc(l),l=p);h.i.push(new Xb(h.Ya++,l)),h.G==3&&Oa(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,Mc(this.g),delete this.g,Pt.aa.N.call(this)};function mg(l){Sc.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(mg,Sc);function gg(){Nc.call(this),this.status=1}S(gg,Nc);function Cs(l){this.g=l}S(Cs,pg),Cs.prototype.ua=function(){pt(this.g,"a")},Cs.prototype.ta=function(l){pt(this.g,new mg(l))},Cs.prototype.sa=function(l){pt(this.g,new gg)},Cs.prototype.ra=function(){pt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,qw=function(){return new Fa},Uw=function(){return Na()},Fw=Br,Wh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,Al=Aa,Pm.COMPLETE="complete",Vw=Pm,Nm.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",nt.prototype.listen=nt.prototype.K,lo=Nm,Ow=zi,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,Mw=Ce}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const hy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps=new Ku("@firebase/firestore");function to(){return ps.logLevel}function K(t,...e){if(ps.logLevel<=ie.DEBUG){const n=e.map(Ap);ps.debug(`Firestore (${Ai}): ${t}`,...n)}}function Qn(t,...e){if(ps.logLevel<=ie.ERROR){const n=e.map(Ap);ps.error(`Firestore (${Ai}): ${t}`,...n)}}function mi(t,...e){if(ps.logLevel<=ie.WARN){const n=e.map(Ap);ps.warn(`Firestore (${Ai}): ${t}`,...n)}}function Ap(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Ai}) INTERNAL ASSERTION FAILED: `+t;throw Qn(e),new Error(e)}function ye(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class Hk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Wk{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new zw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new lt(e)}}class Gk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Kk{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Gk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new Qk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Jk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function gi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new ze(0,0))}static max(){return new ee(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Xo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class we extends Xo{construct(e,n,r){return new we(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new we(n)}static emptyPath(){return new we([])}}const Xk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends Xo{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return Xk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new H(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new H(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(we.fromString(e))}static fromName(e){return new Q(we.fromString(e).popFirst(5))}static empty(){return new Q(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return we.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new we(e.slice()))}}function Zk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Pr(s,Q.empty(),e)}function eC(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(ee.min(),Q.empty(),-1)}static max(){return new Pr(ee.max(),Q.empty(),-1)}}function tC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function va(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==nC)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++u,u===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}kp.oe=-1;function Xu(t){return t==null}function gu(t){return t===0&&1/t==-1/0}function iC(t){return typeof t=="number"&&Number.isInteger(t)&&!gu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $w(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=i??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new Xe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hw("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const oC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=oC.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ms(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jp(t){const e=t.mapValue.fields.__previous_value__;return Cp(e)?jp(e):e}function Zo(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class ea{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ea("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cp(t)?4:uC(t)?9007199254740991:lC(t)?10:11:Z()}function Sn(t,e){if(t===e)return!0;const n=gs(t);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Zo(t).isEqual(Zo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Rr(s.timestampValue),u=Rr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ms(s.bytesValue).isEqual(ms(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pe(s.doubleValue),u=Pe(i.doubleValue);return o===u?gu(o)===gu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return gi(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(fy(o)!==fy(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Sn(o[c],u[c])))return!1;return!0}(t,e);default:return Z()}}function ta(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function yi(t,e){if(t===e)return 0;const n=gs(t),r=gs(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Pe(i.integerValue||i.doubleValue),c=Pe(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return my(t.timestampValue,e.timestampValue);case 4:return my(Zo(t),Zo(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,o){const u=ms(i),c=ms(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=he(u[d],c[d]);if(f!==0)return f}return he(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=he(Pe(i.latitude),Pe(o.latitude));return u!==0?u:he(Pe(i.longitude),Pe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return gy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,f;const g=i.fields||{},m=o.fields||{},w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=(c=m.value)===null||c===void 0?void 0:c.arrayValue,C=he(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return C!==0?C:gy(w,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===al.mapValue&&o===al.mapValue)return 0;if(i===al.mapValue)return 1;if(o===al.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const m=he(c[g],f[g]);if(m!==0)return m;const w=yi(u[c[g]],d[f[g]]);if(w!==0)return w}return he(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Z()}}function my(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Rr(t),r=Rr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function gy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yi(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function vi(t){return Gh(t)}function Gh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ms(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Gh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Gh(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function yy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Kh(t){return!!t&&"integerValue"in t}function Pp(t){return!!t&&"arrayValue"in t}function vy(t){return!!t&&"nullValue"in t}function xy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kl(t){return!!t&&"mapValue"in t}function lC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=To(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Tt(To(this.value))}}function Ww(t){const e=[];return Is(t.fields,(n,r)=>{const s=new Ye([n]);if(kl(r)){const i=Ww(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new dt(e,0,ee.min(),ee.min(),ee.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,ee.min(),ee.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,ee.min(),ee.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n){this.position=e,this.inclusive=n}}function _y(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=yi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function wy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n="asc"){this.field=e,this.dir=n}}function cC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gw=class{};class Oe extends Gw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hC(e,n,r):n==="array-contains"?new mC(e,r):n==="in"?new gC(e,r):n==="not-in"?new yC(e,r):n==="array-contains-any"?new vC(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fC(e,r):new pC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yi(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends Gw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hn(e,n)}matches(e){return Kw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kw(t){return t.op==="and"}function Qw(t){return dC(t)&&Kw(t)}function dC(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Qh(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+vi(t.value);if(Qw(t))return t.filters.map(e=>Qh(e)).join(",");{const e=t.filters.map(n=>Qh(n)).join(",");return`${t.op}(${e})`}}function Yw(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&Yw(o,s.filters[u]),!0):!1}(t,e):void Z()}function Jw(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${vi(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(Jw).join(" ,")+"}"}(t):"Filter"}class hC extends Oe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class fC extends Oe{constructor(e,n){super(e,"in",n),this.keys=Xw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pC extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=Xw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Xw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class mC extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Pp(n)&&ta(n.arrayValue,this.value)}}class gC extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ta(this.value.arrayValue,n)}}class yC extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ta(this.value.arrayValue,n)}}class vC extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Pp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function by(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xC(t,e,n,r,s,i,o)}function Rp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Qh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vi(r)).join(",")),e.ue=n}return e.ue}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!cC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Yw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wy(t.startAt,e.startAt)&&wy(t.endAt,e.endAt)}function Yh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _C(t,e,n,r,s,i,o,u){return new ki(t,e,n,r,s,i,o,u)}function Lp(t){return new ki(t)}function Ey(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zw(t){return t.collectionGroup!==null}function Io(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Xe(Ye.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new na(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new na(Ye.keyField(),r))}return e.ce}function En(t){const e=te(t);return e.le||(e.le=wC(e,Io(t))),e.le}function wC(t,e){if(t.limitType==="F")return by(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new na(s.field,i)});const n=t.endAt?new yu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new yu(t.startAt.position,t.startAt.inclusive):null;return by(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Jh(t,e){const n=t.filters.concat([e]);return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vu(t,e,n){return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zu(t,e){return Dp(En(t),En(e))&&t.limitType===e.limitType}function e1(t){return`${Rp(En(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jw(s)).join(", ")}]`),Xu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>vi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>vi(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function ec(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Q.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=_y(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,Io(r),s)||r.endAt&&!function(o,u,c){const d=_y(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,Io(r),s))}(t,e)}function bC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t1(t){return(e,n)=>{let r=!1;for(const s of Io(t)){const i=EC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function EC(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?yi(c,d):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $w(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new ke(Q.comparator);function Yn(){return TC}const n1=new ke(Q.comparator);function uo(...t){let e=n1;for(const n of t)e=e.insert(n.key,n);return e}function r1(t){let e=n1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return So()}function s1(){return So()}function So(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const IC=new ke(Q.comparator),SC=new Xe(Q.comparator);function se(...t){let e=SC;for(const n of t)e=e.add(n);return e}const NC=new Xe(he);function AC(){return NC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gu(e)?"-0":e}}function i1(t){return{integerValue:""+t}}function kC(t,e){return iC(e)?i1(e):Mp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(){this._=void 0}}function CC(t,e,n){return t instanceof ra?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Cp(i)&&(i=jp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof sa?a1(t,e):t instanceof ia?l1(t,e):function(s,i){const o=o1(s,i),u=Ty(o)+Ty(s.Pe);return Kh(o)&&Kh(s.Pe)?i1(u):Mp(s.serializer,u)}(t,e)}function jC(t,e,n){return t instanceof sa?a1(t,e):t instanceof ia?l1(t,e):n}function o1(t,e){return t instanceof xu?function(r){return Kh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ra extends tc{}class sa extends tc{constructor(e){super(),this.elements=e}}function a1(t,e){const n=u1(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ia extends tc{constructor(e){super(),this.elements=e}}function l1(t,e){let n=u1(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class xu extends tc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ty(t){return Pe(t.integerValue||t.doubleValue)}function u1(t){return Pp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.field=e,this.transform=n}}function RC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof sa&&s instanceof sa||r instanceof ia&&s instanceof ia?gi(r.elements,s.elements,Sn):r instanceof xu&&s instanceof xu?Sn(r.Pe,s.Pe):r instanceof ra&&s instanceof ra}(t.transform,e.transform)}class DC{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Cl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class nc{}function c1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Op(t.key,Kt.none()):new _a(t.key,t.data,Kt.none());{const n=t.data,r=Tt.empty();let s=new Xe(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Fr(t.key,r,new Lt(s.toArray()),Kt.none())}}function LC(t,e,n){t instanceof _a?function(s,i,o){const u=s.value.clone(),c=Sy(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,i,o){if(!Cl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Sy(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(d1(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n,r){return t instanceof _a?function(i,o,u,c){if(!Cl(i.precondition,o))return u;const d=i.value.clone(),f=Ny(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(i,o,u,c){if(!Cl(i.precondition,o))return u;const d=Ny(i.fieldTransforms,c,o),f=o.data;return f.setAll(d1(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,u){return Cl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function MC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=o1(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function Iy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gi(r,s,(i,o)=>RC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class _a extends nc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends nc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function d1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Sy(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,jC(o,u,n[s]))}return r}function Ny(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,CC(i,o,e))}return r}class Op extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends nc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&LC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=s1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=c1(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&gi(this.mutations,e.mutations,(n,r)=>Iy(n,r))&&gi(this.baseMutations,e.baseMutations,(n,r)=>Iy(n,r))}}class Vp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return IC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,oe;function qC(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function h1(t){if(t===void 0)return Qn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Le.OK:return F.OK;case Le.CANCELLED:return F.CANCELLED;case Le.UNKNOWN:return F.UNKNOWN;case Le.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Le.INTERNAL:return F.INTERNAL;case Le.UNAVAILABLE:return F.UNAVAILABLE;case Le.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Le.NOT_FOUND:return F.NOT_FOUND;case Le.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Le.ABORTED:return F.ABORTED;case Le.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Le.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(oe=Le||(Le={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new is([4294967295,4294967295],0);function Ay(t){const e=zC().encode(t),n=new Lw;return n.update(e),new Uint8Array(n.digest())}function ky(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new is([n,r],0),new is([s,i],0)]}class Fp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=is.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(is.fromNumber(r)));return s.compare(BC)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Ay(e),[r,s]=ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fp(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=Ay(e),[r,s]=ky(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,wa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(ee.min(),s,new ke(he),Yn(),se())}}class wa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wa(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class f1{constructor(e,n){this.targetId=e,this.me=n}}class p1{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Cy{constructor(){this.fe=0,this.ge=Py(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new wa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Py()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $C{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=jy(),this.Qe=new ke(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Yh(i))if(r===0){const o=new Q(i.path);this.Ue(n,o,dt.newNoDocument(o,ee.min()))}else ye(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=ms(r).toUint8Array()}catch(c){if(c instanceof Hw)return mi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Fp(o,s,i)}catch(c){return mi(c instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Yh(u.target)){const c=new Q(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,dt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new rc(e,n,this.Qe,this.ke,r);return this.ke=Yn(),this.qe=jy(),this.Qe=new ke(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Cy,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Cy),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function jy(){return new ke(Q.comparator)}function Py(){return new ke(Q.comparator)}const HC={asc:"ASCENDING",desc:"DESCENDING"},WC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GC={and:"AND",or:"OR"};class KC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xh(t,e){return t.useProto3Json||Xu(e)?e:{value:e}}function _u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function QC(t,e){return _u(t,e.toTimestamp())}function Tn(t){return ye(!!t),ee.fromTimestamp(function(n){const r=Rr(n);return new ze(r.seconds,r.nanos)}(t))}function Up(t,e){return Zh(t,e).canonicalString()}function Zh(t,e){const n=function(s){return new we(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g1(t){const e=we.fromString(t);return ye(w1(e)),e}function ef(t,e){return Up(t.databaseId,e.path)}function _d(t,e){const n=g1(e);if(n.get(1)!==t.databaseId.projectId)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(v1(n))}function y1(t,e){return Up(t.databaseId,e)}function YC(t){const e=g1(t);return e.length===4?we.emptyPath():v1(e)}function tf(t){return new we(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function v1(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ry(t,e,n){return{name:ef(t,e),fields:n.value.mapValue.fields}}function JC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const f=d.code===void 0?F.UNKNOWN:h1(d.code);return new H(f,d.message||"")}(o);n=new p1(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_d(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):ee.min(),u=new Tt({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(s,i,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];n=new jl(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_d(t,r.document),i=r.readTime?Tn(r.readTime):ee.min(),o=dt.newNoDocument(s,i),u=r.removedTargetIds||[];n=new jl([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_d(t,r.document),i=r.removedTargetIds||[];n=new jl([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new UC(s,i),u=r.targetId;n=new f1(u,o)}}return n}function XC(t,e){let n;if(e instanceof _a)n={update:Ry(t,e.key,e.value)};else if(e instanceof Op)n={delete:ef(t,e.key)};else if(e instanceof Fr)n={update:Ry(t,e.key,e.data),updateMask:aj(e.fieldMask)};else{if(!(e instanceof OC))return Z();n={verify:ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof sa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof ia)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof xu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:QC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function ZC(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Tn(s.updateTime):Tn(i);return o.isEqual(ee.min())&&(o=Tn(i)),new DC(o,s.transformResults||[])}(n,e))):[]}function ej(t,e){return{documents:[y1(t,e.path)]}}function tj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=y1(t,s);const i=function(d){if(d.length!==0)return _1(hn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Ls(m.field),direction:sj(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Xh(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function nj(t){let e=YC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const m=x1(g);return m instanceof hn&&Qw(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(S){return new na(Ms(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(g){let m;return m=typeof g=="object"?g.value:g,Xu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(g){const m=!!g.before,w=g.values||[];return new yu(w,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,w=g.values||[];return new yu(w,m)}(n.endAt)),_C(e,s,o,i,u,"F",c,d)}function rj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function x1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ms(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ms(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ms(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ms(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Ms(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>x1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function sj(t){return HC[t]}function ij(t){return WC[t]}function oj(t){return GC[t]}function Ls(t){return{fieldPath:t.canonicalString()}}function Ms(t){return Ye.fromServerFormat(t.fieldPath)}function _1(t){return t instanceof Oe?function(n){if(n.op==="=="){if(xy(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xy(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(vy(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:ij(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(s=>_1(s));return r.length===1?r[0]:{compositeFilter:{op:oj(n.op),filters:r}}}(t):Z()}function aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function w1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),u=et.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.ct=e}}function uj(t){const e=nj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.un=new dj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Pr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class dj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(we.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(we.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xi(0)}static kn(){return new xi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&No(r.mutation,s,Lt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=uo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Yn();const o=So(),u=function(){return So()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Fr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),No(f.mutation,d,f.mutation.getFieldMask(),ze.now())):o.set(d.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return u.set(d,new fj(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=So();let s=new ke((o,u)=>o-u),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Lt.empty();f=u.applyToLocalView(d,f),r.set(c,f);const g=(s.get(u.batchId)||se()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,g=s1();f.forEach(m=>{if(!i.has(m)){const w=c1(n.get(m),r.get(m));w!==null&&g.set(m,w),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ts());let u=-1,c=i;return o.next(d=>U.forEach(d,(f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,se())).next(f=>({batchId:u,changes:r1(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let s=uo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=uo();return this.indexManager.getCollectionParents(e,i).next(u=>U.forEach(u,c=>{const d=function(g,m){return new ki(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let u=uo();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&No(f.mutation,d,Lt.empty(),ze.now()),ec(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uj(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(){this.overlays=new ke(Q.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,o=new Q(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ts(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=ts(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=s)););return U.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FC(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(){this.Tr=new Xe(Be.Er),this.dr=new Xe(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new we([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new we([])),r=new Be(n,e),s=new Be(n,e+1);let i=se();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe(Be.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VC(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new Be(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(he);return n.forEach(s=>{const i=new Be(s,0),o=new Be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Q.isDocumentKey(i)||(i=i.child(""));const o=new Be(new Q(i),0);let u=new Xe(he);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),U.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e){this.Mr=e,this.docs=function(){return new ke(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,u=new Q(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tC(eC(f),r)<=0||(s.has(f.key)||ec(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _j(this)}getSize(e){return U.resolve(this.size)}}class _j extends hj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e){this.persistence=e,this.Nr=new Ci(n=>Rp(n),Dp),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qp,this.targetCount=0,this.kr=xi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new kp(0),this.Kr=!1,this.Kr=!0,this.$r=new yj,this.referenceDelegate=e(this),this.Ur=new wj(this),this.indexManager=new cj,this.remoteDocumentCache=function(s){return new xj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lj(n),this.Gr=new mj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new Ej(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ej extends rC{constructor(e){super(),this.currentSequenceNumber=e}}class zp{constructor(e){this.persistence=e,this.Jr=new qp,this.Yr=null}static Zr(e){return new zp(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=Q.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Bp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aS()?8:sC(ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Tj;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(to()<=ie.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(to()<=ie.DEBUG&&K("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(to()<=ie.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):U.resolve())}Yi(e,n){if(Ey(n))return U.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vu(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,vu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Ey(n)||s.isEqual(ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(to()<=ie.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ds(n)),this.rs(e,o,n,Zk(s,-1)).next(u=>u))})}ts(e,n){let r=new Xe(t1(e));return n.forEach((s,i)=>{ec(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return to()<=ie.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new ke(he),this._s=new Ci(i=>Rp(i),Dp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Nj(t,e,n,r){return new Sj(t,e,n,r)}async function b1(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=se();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function Aj(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const g=d.batch,m=g.keys();let w=U.resolve();return m.forEach(S=>{w=w.next(()=>f.getEntry(c,S)).next(C=>{const P=d.docVersions.get(S);ye(P!==null),C.version.compareTo(P)<0&&(g.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),f.addEntry(C)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=se();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function E1(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function kj(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((f,g)=>{const m=s.get(g);if(!m)return;u.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let w=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(g,w),function(C,P,b){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,w,f)&&u.push(n.Ur.updateTargetData(i,w))});let c=Yn(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(Cj(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(f)}return U.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function Cj(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(ee.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):K("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function jj(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pj(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new gr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function nf(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xa(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Dy(t,e,n){const r=te(t);let s=ee.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=te(c),m=g._s.get(f);return m!==void 0?U.resolve(g.os.get(m)):g.Ur.getTargetData(d,f)}(r,o,En(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:se())).next(u=>(Rj(r,bC(e),u),{documents:u,Ts:i})))}function Rj(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ly{constructor(){this.activeTargetIds=AC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dj{constructor(){this.so=new Ly,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ly,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function wd(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class Vj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=wd(),c=this.xo(n,r.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(K("RestConnection",`Received RPC '${n}' ${u}: `,f),f),f=>{throw mi("RestConnection",`RPC '${n}' ${u} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ai}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Mj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=wd();return new Promise((o,u)=>{const c=new Mw;c.setWithCredentials(!0),c.listenOnce(Vw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Al.NO_ERROR:const f=c.getResponseJson();K(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Al.TIMEOUT:K(at,`RPC '${e}' ${i} timed out`),u(new H(F.DEADLINE_EXCEEDED,"Request time out"));break;case Al.HTTP_ERROR:const g=c.getStatus();if(K(at,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const w=m==null?void 0:m.error;if(w&&w.status&&w.message){const S=function(P){const b=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(b)>=0?b:F.UNKNOWN}(w.status);u(new H(S,w.message))}else u(new H(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new H(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{K(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);K(at,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=wd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=qw(),u=Uw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new Ow({})),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");K(at,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let m=!1,w=!1;const S=new Oj({Io:P=>{w?K(at,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(K(at,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),K(at,`RPC '${e}' stream ${s} sending:`,P),g.send(P))},To:()=>g.close()}),C=(P,b,E)=>{P.listen(b,T=>{try{E(T)}catch(M){setTimeout(()=>{throw M},0)}})};return C(g,lo.EventType.OPEN,()=>{w||(K(at,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),C(g,lo.EventType.CLOSE,()=>{w||(w=!0,K(at,`RPC '${e}' stream ${s} transport closed`),S.So())}),C(g,lo.EventType.ERROR,P=>{w||(w=!0,mi(at,`RPC '${e}' stream ${s} transport errored:`,P),S.So(new H(F.UNAVAILABLE,"The operation could not be completed")))}),C(g,lo.EventType.MESSAGE,P=>{var b;if(!w){const E=P.data[0];ye(!!E);const T=E,M=T.error||((b=T[0])===null||b===void 0?void 0:b.error);if(M){K(at,`RPC '${e}' stream ${s} received error:`,M);const D=M.status;let V=function(_){const v=Le[_];if(v!==void 0)return h1(v)}(D),N=M.message;V===void 0&&(V=F.INTERNAL,N="Unknown error status: "+D+" with message "+M.message),w=!0,S.So(new H(V,N)),g.close()}else K(at,`RPC '${e}' stream ${s} received:`,E),S.bo(E)}}),C(u,Fw.STAT_EVENT,P=>{P.stat===Wh.PROXY?K(at,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Wh.NOPROXY&&K(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function bd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){return new KC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new T1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new H(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fj extends I1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=JC(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Tn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=tf(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Yh(c)?{documents:ej(i,c)}:{query:tj(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=m1(i,o.resumeToken);const d=Xh(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){u.readTime=_u(i,o.snapshotVersion.toTimestamp());const d=Xh(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=rj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=tf(this.serializer),n.removeTarget=e,this.a_(n)}}class Uj extends I1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ZC(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=tf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>XC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Zh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Zh(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class zj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(n),this.D_=!1):K("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ss(this)&&(K("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=te(c);d.L_.add(4),await ba(d),d.q_.set("Unknown"),d.L_.delete(4),await ic(d)}(this))})}),this.q_=new zj(r,s)}}async function ic(t){if(Ss(t))for(const e of t.B_)await e(!0)}async function ba(t){for(const e of t.B_)await e(!1)}function S1(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Gp(n)?Wp(n):ji(n).r_()&&Hp(n,e))}function $p(t,e){const n=te(t),r=ji(n);n.N_.delete(e),r.r_()&&N1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ss(n)&&n.q_.set("Unknown"))}function Hp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ji(t).A_(e)}function N1(t,e){t.Q_.xe(e),ji(t).R_(e)}function Wp(t){t.Q_=new $C({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ji(t).start(),t.q_.v_()}function Gp(t){return Ss(t)&&!ji(t).n_()&&t.N_.size>0}function Ss(t){return te(t).L_.size===0}function A1(t){t.Q_=void 0}async function $j(t){t.q_.set("Online")}async function Hj(t){t.N_.forEach((e,n)=>{Hp(t,e)})}async function Wj(t,e){A1(t),Gp(t)?(t.q_.M_(e),Wp(t)):t.q_.set("Unknown")}async function Gj(t,e,n){if(t.q_.set("Online"),e instanceof p1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wu(t,r)}else if(e instanceof jl?t.Q_.Ke(e):e instanceof f1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await E1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),N1(i,c);const g=new gr(f.target,c,d,f.sequenceNumber);Hp(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){K("RemoteStore","Failed to raise snapshot:",r),await wu(t,r)}}async function wu(t,e,n){if(!xa(e))throw e;t.L_.add(1),await ba(t),t.q_.set("Offline"),n||(n=()=>E1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ic(t)})}function k1(t,e){return e().catch(n=>wu(t,n,e))}async function oc(t){const e=te(t),n=Dr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Kj(e);)try{const s=await jj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Qj(e,s)}catch(s){await wu(e,s)}C1(e)&&j1(e)}function Kj(t){return Ss(t)&&t.O_.length<10}function Qj(t,e){t.O_.push(e);const n=Dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function C1(t){return Ss(t)&&!Dr(t).n_()&&t.O_.length>0}function j1(t){Dr(t).start()}async function Yj(t){Dr(t).p_()}async function Jj(t){const e=Dr(t);for(const n of t.O_)e.m_(n.mutations)}async function Xj(t,e,n){const r=t.O_.shift(),s=Vp.from(r,e,n);await k1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await oc(t)}async function Zj(t,e){e&&Dr(t).V_&&await async function(r,s){if(function(o){return qC(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Dr(r).s_(),await k1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await oc(r)}}(t,e),C1(t)&&j1(t)}async function Oy(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");const r=Ss(n);n.L_.add(3),await ba(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ic(n)}async function eP(t,e){const n=te(t);e?(n.L_.delete(2),await ic(n)):e||(n.L_.add(2),await ba(n),n.q_.set("Unknown"))}function ji(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new Fj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$j.bind(null,t),Ro:Hj.bind(null,t),mo:Wj.bind(null,t),d_:Gj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Gp(t)?Wp(t):t.q_.set("Unknown")):(await t.K_.stop(),A1(t))})),t.K_}function Dr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new Uj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Yj.bind(null,t),mo:Zj.bind(null,t),f_:Jj.bind(null,t),g_:Xj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await oc(t)):(await t.U_.stop(),t.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Kp(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),xa(t))return new H(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=uo(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.W_=new ke(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _i{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new _i(e,n,ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nP{constructor(){this.queries=Fy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Fy(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new H(F.ABORTED,"Firestore shutting down"))}}function Fy(){return new Ci(t=>e1(t),Zu)}async function P1(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Qp(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Yp(n)}async function R1(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rP(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Yp(n)}function sP(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Yp(t){t.Y_.forEach(e=>{e.next()})}var rf,Uy;(Uy=rf||(rf={})).ea="default",Uy.Cache="cache";class D1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.key=e}}class M1{constructor(e){this.key=e}}class iP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=t1(e),this.Ra=new ii(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Vy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const m=s.get(f),w=ec(this.query,g)?g:null,S=!!m&&this.mutatedKeys.has(m.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;m&&w?m.data.isEqual(w.data)?S!==C&&(r.track({type:3,doc:w}),P=!0):this.ga(m,w)||(r.track({type:2,doc:w}),P=!0,(c&&this.Aa(w,c)>0||d&&this.Aa(w,d)<0)&&(u=!0)):!m&&w?(r.track({type:0,doc:w}),P=!0):m&&!w&&(r.track({type:1,doc:m}),P=!0,(c||d)&&(u=!0)),P&&(w?(o=o.add(w),i=C?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(w,S){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return C(w)-C(S)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new _i(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Vy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new M1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new L1(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aP{constructor(e){this.key=e,this.va=!1}}class lP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ci(u=>e1(u),Zu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(Q.comparator),this.Na=new Map,this.La=new qp,this.Ba={},this.ka=new Map,this.qa=xi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uP(t,e,n=!0){const r=z1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await O1(r,e,n,!0),s}async function cP(t,e){const n=z1(t);await O1(n,e,!0,!1)}async function O1(t,e,n,r){const s=await Pj(t.localStore,En(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let u;return r&&(u=await dP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&S1(t.remoteStore,s),u}async function dP(t,e,n,r,s){t.Ka=(g,m,w)=>async function(C,P,b,E){let T=P.view.ma(b);T.ns&&(T=await Dy(C.localStore,P.query,!1).then(({documents:N})=>P.view.ma(N,T)));const M=E&&E.targetChanges.get(P.targetId),D=E&&E.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(T,C.isPrimaryClient,M,D);return zy(C,P.targetId,V.wa),V.snapshot}(t,g,m,w);const i=await Dy(t.localStore,e,!0),o=new iP(e,i.Ts),u=o.ma(i.documents),c=wa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);zy(t,n,d.wa);const f=new oP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function hP(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Zu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await nf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$p(r.remoteStore,s.targetId),sf(r,s.targetId)}).catch(va)):(sf(r,s.targetId),await nf(r.localStore,s.targetId,!0))}async function fP(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$p(n.remoteStore,r.targetId))}async function pP(t,e,n){const r=wP(t);try{const s=await function(o,u){const c=te(o),d=ze.now(),f=u.reduce((w,S)=>w.add(S.key),se());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Yn(),C=se();return c.cs.getEntries(w,f).next(P=>{S=P,S.forEach((b,E)=>{E.isValidDocument()||(C=C.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,S)).next(P=>{g=P;const b=[];for(const E of u){const T=MC(E,g.get(E.key).overlayedDocument);T!=null&&b.push(new Fr(E.key,T,Ww(T.value.mapValue),Kt.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,b,u)}).next(P=>{m=P;const b=P.applyToLocalDocumentSet(g,C);return c.documentOverlayCache.saveOverlays(w,P.batchId,b)})}).then(()=>({batchId:m.batchId,changes:r1(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new ke(he)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ea(r,s.changes),await oc(r.remoteStore)}catch(s){const i=Qp(s,"Failed to persist write");n.reject(i)}}async function V1(t,e){const n=te(t);try{const r=await kj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ye(o.va):s.removedDocuments.size>0&&(ye(o.va),o.va=!1))}),await Ea(n,r,e)}catch(r){await va(r)}}function qy(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=te(o);c.onlineState=u;let d=!1;c.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(u)&&(d=!0)}),d&&Yp(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mP(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new ke(Q.comparator);o=o.insert(i,dt.newNoDocument(i,ee.min()));const u=se().add(i),c=new rc(ee.min(),new Map,new ke(he),o,u);await V1(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Jp(r)}else await nf(r.localStore,e,!1).then(()=>sf(r,e,n)).catch(va)}async function gP(t,e){const n=te(t),r=e.batch.batchId;try{const s=await Aj(n.localStore,e);U1(n,r,null),F1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ea(n,s)}catch(s){await va(s)}}async function yP(t,e,n){const r=te(t);try{const s=await function(o,u){const c=te(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(ye(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);U1(r,e,n),F1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ea(r,s)}catch(s){await va(s)}}function F1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function U1(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function sf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||q1(t,r)})}function q1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&($p(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Jp(t))}function zy(t,e,n){for(const r of n)r instanceof L1?(t.La.addReference(r.key,e),vP(t,r)):r instanceof M1?(K("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||q1(t,r.key)):Z()}function vP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(K("SyncEngine","New document in limbo: "+n),t.xa.add(r),Jp(t))}function Jp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(we.fromString(e)),r=t.qa.next();t.Na.set(r,new aP(n)),t.Oa=t.Oa.insert(n,r),S1(t.remoteStore,new gr(En(Lp(n.path)),r,"TargetPurposeLimboResolution",kp.oe))}}async function Ea(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=Bp.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=te(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,m=>U.forEach(m.$i,w=>f.persistence.referenceDelegate.addReference(g,m.targetId,w)).next(()=>U.forEach(m.Ui,w=>f.persistence.referenceDelegate.removeReference(g,m.targetId,w)))))}catch(g){if(!xa(g))throw g;K("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const w=f.os.get(m),S=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(m,C)}}}(r.localStore,i))}async function xP(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());const r=await b1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new H(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ea(n,r.hs)}}function _P(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function z1(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=V1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_P.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mP.bind(null,e),e.Ca.d_=rP.bind(null,e.eventManager),e.Ca.$a=sP.bind(null,e.eventManager),e}function wP(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yP.bind(null,e),e}class By{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Nj(this.persistence,new Ij,e.initialUser,this.serializer)}createPersistence(e){return new bj(zp.Zr,this.serializer)}createSharedClientState(e){return new Dj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xP.bind(null,this.syncEngine),await eP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nP}()}createDatastore(e){const n=sc(e.databaseInfo.databaseId),r=function(i){return new Vj(i)}(e.databaseInfo);return function(i,o,u,c){return new qj(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new Bj(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>qy(this.syncEngine,n,0),function(){return My.D()?new My:new Lj}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,f){const g=new lP(s,i,o,u,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);K("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ba(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=Bw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{K("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(K("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ed(t,e){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await b1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IP(t);K("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Oy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Oy(e.remoteStore,s)),t._onlineComponents=e}function TP(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function IP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ed(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!TP(n))throw n;mi("Error using user provided cache. Falling back to memory cache: "+n),await Ed(t,new By)}}else K("FirestoreClient","Using default OfflineComponentProvider"),await Ed(t,new By);return t._offlineComponents}async function $1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),await $y(t,new bP))),t._onlineComponents}function SP(t){return $1(t).then(e=>e.syncEngine)}async function H1(t){const e=await $1(t),n=e.eventManager;return n.onListen=uP.bind(null,e.syncEngine),n.onUnlisten=hP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fP.bind(null,e.syncEngine),n}function NP(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new B1({next:m=>{o.enqueueAndForget(()=>R1(i,g));const w=m.docs.has(u);!w&&m.fromCache?d.reject(new H(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&m.fromCache&&c&&c.source==="server"?d.reject(new H(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new D1(Lp(u.path),f,{includeMetadataChanges:!0,_a:!0});return P1(i,g)}(await H1(t),t.asyncQueue,e,n,r)),r.promise}function AP(t,e,n={}){const r=new zn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new B1({next:m=>{o.enqueueAndForget(()=>R1(i,g)),m.fromCache&&c.source==="server"?d.reject(new H(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new D1(u,f,{includeMetadataChanges:!0,_a:!0});return P1(i,g)}(await H1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e,n){if(!n)throw new H(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kP(t,e,n,r){if(e===!0&&r===!0)throw new H(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wy(t){if(!Q.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Gy(t){if(Q.isDocumentKey(t))throw new H(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ac(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ac(t);throw new H(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function CP(t,e){if(e<=0)throw new H(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new H(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ky({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ky(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $k;switch(r.type){case"firstParty":return new Kk(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hy.get(n);r&&(K("ComponentProvider","Removing Datastore"),Hy.delete(n),r.terminate())}(this),Promise.resolve()}}function jP(t,e,n,r={}){var s;const i=(t=fn(t,lc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=lt.MOCK_USER;else{u=nS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new H(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new lt(d)}t._authCredentials=new Hk(new zw(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class kr extends Ur{constructor(e,n,r){super(e,n,Lp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new Q(e))}withConverter(e){return new kr(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=Te(t),G1("collection","path",e),t instanceof lc){const r=we.fromString(e,...n);return Gy(r),new kr(t,null,r)}{if(!(t instanceof xt||t instanceof kr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Gy(r),new kr(t.firestore,null,r)}}function yt(t,e,...n){if(t=Te(t),arguments.length===1&&(e=Bw.newId()),G1("doc","path",e),t instanceof lc){const r=we.fromString(e,...n);return Wy(r),new xt(t,null,new Q(r))}{if(!(t instanceof xt||t instanceof kr))throw new H(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(we.fromString(e,...n));return Wy(r),new xt(t.firestore,t instanceof kr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new T1(this,"async_queue_retry"),this.Eu=()=>{const n=bd();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=bd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=bd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new zn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!xa(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Kp.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&Z()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Ns extends lc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new PP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||K1(this),this._firestoreClient.terminate()}}function RP(t,e){const n=typeof t=="object"?t:gp(),r=typeof t=="string"?t:"(default)",s=Es(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=eS("firestore");i&&jP(s,...i)}return s}function Xp(t){return t._firestoreClient||K1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function K1(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,f){return new aC(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,W1(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new EP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(et.fromBase64String(e))}catch(n){throw new H(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=/^__.*__$/;class LP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new _a(e,this.data,n,this.fieldTransforms)}}class Q1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Y1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class tm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new tm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return bu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Y1(this.wu)&&DP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class MP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||sc(e)}Nu(e,n,r,s=!1){return new tm({wu:e,methodName:n,Ou:r,path:Ye.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dc(t){const e=t._freezeSettings(),n=sc(t._databaseId);return new MP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function J1(t,e,n,r,s,i={}){const o=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);rm("Data must be an object, but it was:",o,r);const u=X1(r,o);let c,d;if(i.merge)c=new Lt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const m=of(e,g,n);if(!o.contains(m))throw new H(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);eb(f,m)||f.push(m)}c=new Lt(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new LP(new Tt(u),c,d)}class hc extends cc{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof hc}}class nm extends cc{_toFieldTransform(e){return new PC(e.path,new ra)}isEqual(e){return e instanceof nm}}function OP(t,e,n,r){const s=t.Nu(1,e,n);rm("Data must be an object, but it was:",s,r);const i=[],o=Tt.empty();Is(r,(c,d)=>{const f=sm(e,c,n);d=Te(d);const g=s.Cu(f);if(d instanceof hc)i.push(f);else{const m=Ta(d,g);m!=null&&(i.push(f),o.set(f,m))}});const u=new Lt(i);return new Q1(o,u,s.fieldTransforms)}function VP(t,e,n,r,s,i){const o=t.Nu(1,e,n),u=[of(e,r,n)],c=[s];if(i.length%2!=0)throw new H(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)u.push(of(e,i[m])),c.push(i[m+1]);const d=[],f=Tt.empty();for(let m=u.length-1;m>=0;--m)if(!eb(d,u[m])){const w=u[m];let S=c[m];S=Te(S);const C=o.Cu(w);if(S instanceof hc)d.push(w);else{const P=Ta(S,C);P!=null&&(d.push(w),f.set(w,P))}}const g=new Lt(d);return new Q1(f,g,o.fieldTransforms)}function FP(t,e,n,r=!1){return Ta(n,t.Nu(r?4:3,e))}function Ta(t,e){if(Z1(t=Te(t)))return rm("Unsupported field value:",e,t),X1(t,e);if(t instanceof cc)return function(r,s){if(!Y1(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Ta(u,s.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:_u(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_u(s.serializer,i)}}if(r instanceof Zp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:m1(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Up(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof em)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Mu("VectorValues must only contain numeric values.");return Mp(u.serializer,c)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${ac(r)}`)}(t,e)}function X1(t,e){const n={};return $w(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,(r,s)=>{const i=Ta(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Z1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Zp||t instanceof wi||t instanceof xt||t instanceof cc||t instanceof em)}function rm(t,e,n){if(!Z1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ac(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function of(t,e,n){if((e=Te(e))instanceof uc)return e._internalPath;if(typeof e=="string")return sm(t,e);throw bu("Field path arguments must be of type string or ",t,!1,void 0,n)}const UP=new RegExp("[~\\*/\\[\\]]");function sm(t,e,n){if(e.search(UP)>=0)throw bu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new uc(...e.split("."))._internalPath}catch{throw bu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function bu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(F.INVALID_ARGUMENT,u+t+c)}function eb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qP extends tb{data(){return super.data()}}function fc(t,e){return typeof e=="string"?sm(t,e):e instanceof uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class om extends im{}function ho(t,e,...n){let r=[];e instanceof im&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof am).length,u=i.filter(c=>c instanceof pc).length;if(o>1||o>0&&u>0)throw new H(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class pc extends om{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new pc(e,n,r)}_apply(e){const n=this._parse(e);return rb(e._query,n),new Ur(e.firestore,e.converter,Jh(e._query,n))}_parse(e){const n=dc(e.firestore);return function(i,o,u,c,d,f,g){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new H(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Yy(g,f);const w=[];for(const S of g)w.push(Qy(c,i,S));m={arrayValue:{values:w}}}else m=Qy(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Yy(g,f),m=FP(u,o,g,f==="in"||f==="not-in");return Oe.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function BP(t,e,n){const r=e,s=fc("where",t);return pc._create(s,r,n)}class am extends im{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new am(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)rb(o,c),o=Jh(o,c)}(e._query,n),new Ur(e.firestore,e.converter,Jh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lm extends om{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new H(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new na(i,o)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ki(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function nb(t,e="asc"){const n=e,r=fc("orderBy",t);return lm._create(r,n)}class um extends om{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new um(e,n,r)}_apply(e){return new Ur(e.firestore,e.converter,vu(e._query,this._limit,this._limitType))}}function af(t){return CP("limit",t),um._create("limit",t,"F")}function Qy(t,e,n){if(typeof(n=Te(n))=="string"){if(n==="")throw new H(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zw(e)&&n.indexOf("/")!==-1)throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(we.fromString(n));if(!Q.isDocumentKey(r))throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yy(t,new Q(r))}if(n instanceof xt)return yy(t,n._key);throw new H(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ac(n)}.`)}function Yy(t,e){if(!Array.isArray(t)||t.length===0)throw new H(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rb(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $P{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Pe(o.doubleValue));return new em(i)}convertGeoPoint(e){return new Zp(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=jp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=we.fromString(e);ye(w1(r));const s=new ea(r.get(1),r.get(3)),i=new Q(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ib extends tb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Pl extends ib{data(e={}){return super.data(e)}}class HP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pl(this._firestore,this._userDataWriter,r.key,r,new fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new Pl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new fo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new Pl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new fo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:WP(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function WP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){t=fn(t,xt);const e=fn(t.firestore,Ns);return NP(Xp(e),t._key).then(n=>GP(e,t,n))}class ob extends $P{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function vn(t){t=fn(t,Ur);const e=fn(t.firestore,Ns),n=Xp(e),r=new ob(e);return zP(t._query),AP(n,t._query).then(s=>new HP(e,r,t,s))}function Jy(t,e,n){t=fn(t,xt);const r=fn(t.firestore,Ns),s=sb(t.converter,e);return mc(r,[J1(dc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kt.none())])}function oi(t,e,n,...r){t=fn(t,xt);const s=fn(t.firestore,Ns),i=dc(s);let o;return o=typeof(e=Te(e))=="string"||e instanceof uc?VP(i,"updateDoc",t._key,e,n,r):OP(i,"updateDoc",t._key,e),mc(s,[o.toMutation(t._key,Kt.exists(!0))])}function Rl(t){return mc(fn(t.firestore,Ns),[new Op(t._key,Kt.none())])}function Dn(t,e){const n=fn(t.firestore,Ns),r=yt(t),s=sb(t.converter,e);return mc(n,[J1(dc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function mc(t,e){return function(r,s){const i=new zn;return r.asyncQueue.enqueueAndForget(async()=>pP(await SP(r),s,i)),i.promise}(Xp(t),e)}function GP(t,e,n){const r=n.docs.get(e._key),s=new ob(t);return new ib(t,s,e._key,r,new fo(n.hasPendingWrites,n.fromCache),e.converter)}function Td(){return new nm("serverTimestamp")}(function(e,n=!0){(function(s){Ai=s})(Ni),In(new dn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Ns(new Wk(r.getProvider("auth-internal")),new Yk(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new H(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ea(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Gt(hy,"4.7.0",e),Gt(hy,"4.7.0","esm2017")})();const ab="@firebase/installations",dm="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=1e4,ub=`w:${dm}`,cb="FIS_v2",KP="https://firebaseinstallations.googleapis.com/v1",QP=60*60*1e3,YP="installations",JP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ys=new bs(YP,JP,XP);function db(t){return t instanceof pn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb({projectId:t}){return`${KP}/projects/${t}/installations`}function fb(t){return{token:t.token,requestStatus:2,expiresIn:eR(t.expiresIn),creationTime:Date.now()}}async function pb(t,e){const r=(await e.json()).error;return ys.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function mb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZP(t,{refreshToken:e}){const n=mb(t);return n.append("Authorization",tR(e)),n}async function gb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function eR(t){return Number(t.replace("s","000"))}function tR(t){return`${cb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=hb(t),s=mb(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:cb,appId:t.appId,sdkVersion:ub},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await gb(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:fb(d.authToken)}}else throw await pb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=/^[cdef][\w-]{21}$/,lf="";function iR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=oR(t);return sR.test(n)?n:lf}catch{return lf}}function oR(t){return rR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new Map;function xb(t,e){const n=gc(t);_b(n,e),aR(n,e)}function _b(t,e){const n=vb.get(t);if(n)for(const r of n)r(e)}function aR(t,e){const n=lR();n&&n.postMessage({key:t,fid:e}),uR()}let ns=null;function lR(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{_b(t.data.key,t.data.fid)}),ns}function uR(){vb.size===0&&ns&&(ns.close(),ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebase-installations-database",dR=1,vs="firebase-installations-store";let Id=null;function hm(){return Id||(Id=K_(cR,dR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vs)}}})),Id}async function Eu(t,e){const n=gc(t),s=(await hm()).transaction(vs,"readwrite"),i=s.objectStore(vs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&xb(t,e.fid),e}async function wb(t){const e=gc(t),r=(await hm()).transaction(vs,"readwrite");await r.objectStore(vs).delete(e),await r.done}async function yc(t,e){const n=gc(t),s=(await hm()).transaction(vs,"readwrite"),i=s.objectStore(vs),o=await i.get(n),u=e(o);return u===void 0?await i.delete(n):await i.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&xb(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fm(t){let e;const n=await yc(t.appConfig,r=>{const s=hR(r),i=fR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===lf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hR(t){const e=t||{fid:iR(),registrationStatus:0};return bb(e)}function fR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ys.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mR(t)}:{installationEntry:e}}async function pR(t,e){try{const n=await nR(t,e);return Eu(t.appConfig,n)}catch(n){throw db(n)&&n.customData.serverCode===409?await wb(t.appConfig):await Eu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function mR(t){let e=await Xy(t.appConfig);for(;e.registrationStatus===1;)await yb(100),e=await Xy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await fm(t);return r||n}return e}function Xy(t){return yc(t,e=>{if(!e)throw ys.create("installation-not-found");return bb(e)})}function bb(t){return gR(t)?{fid:t.fid,registrationStatus:0}:t}function gR(t){return t.registrationStatus===1&&t.registrationTime+lb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR({appConfig:t,heartbeatServiceProvider:e},n){const r=vR(t,n),s=ZP(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:ub,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await gb(()=>fetch(r,u));if(c.ok){const d=await c.json();return fb(d)}else throw await pb("Generate Auth Token",c)}function vR(t,{fid:e}){return`${hb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pm(t,e=!1){let n;const r=await yc(t.appConfig,i=>{if(!Eb(i))throw ys.create("not-registered");const o=i.authToken;if(!e&&wR(o))return i;if(o.requestStatus===1)return n=xR(t,e),i;{if(!navigator.onLine)throw ys.create("app-offline");const u=ER(i);return n=_R(t,u),u}});return n?await n:r.authToken}async function xR(t,e){let n=await Zy(t.appConfig);for(;n.authToken.requestStatus===1;)await yb(100),n=await Zy(t.appConfig);const r=n.authToken;return r.requestStatus===0?pm(t,e):r}function Zy(t){return yc(t,e=>{if(!Eb(e))throw ys.create("not-registered");const n=e.authToken;return TR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function _R(t,e){try{const n=await yR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Eu(t.appConfig,r),n}catch(n){if(db(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await wb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Eu(t.appConfig,r)}throw n}}function Eb(t){return t!==void 0&&t.registrationStatus===2}function wR(t){return t.requestStatus===2&&!bR(t)}function bR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+QP}function ER(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function TR(t){return t.requestStatus===1&&t.requestTime+lb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t){const e=t,{installationEntry:n,registrationPromise:r}=await fm(e);return r?r.catch(console.error):pm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e=!1){const n=t;return await NR(n),(await pm(n,e)).token}async function NR(t){const{registrationPromise:e}=await fm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(t){if(!t||!t.options)throw Sd("App Configuration");if(!t.name)throw Sd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Sd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Sd(t){return ys.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="installations",kR="installations-internal",CR=t=>{const e=t.getProvider("app").getImmediate(),n=AR(e),r=Es(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},jR=t=>{const e=t.getProvider("app").getImmediate(),n=Es(e,Tb).getImmediate();return{getId:()=>IR(n),getToken:s=>SR(n,s)}};function PR(){In(new dn(Tb,CR,"PUBLIC")),In(new dn(kR,jR,"PRIVATE"))}PR();Gt(ab,dm);Gt(ab,dm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="analytics",RR="firebase_id",DR="origin",LR=60*1e3,MR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt=new Ku("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ot=new bs("analytics","Analytics",OR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t){if(!t.startsWith(mm)){const e=Ot.create("invalid-gtag-resource",{gtagURL:t});return kt.warn(e.message),""}return t}function Ib(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function FR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UR(t,e){const n=FR("firebase-js-sdk-policy",{createScriptURL:VR}),r=document.createElement("script"),s=`${mm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function qR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function zR(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await Ib(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(u){kt.error(u)}t("config",s,i)}async function BR(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const u=await Ib(n);for(const c of o){const d=u.find(g=>g.measurementId===c),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){kt.error(i)}}function $R(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[u,c]=o;await BR(t,e,n,u,c)}else if(i==="config"){const[u,c]=o;await zR(t,e,n,r,u,c)}else if(i==="consent"){const[u,c]=o;t("consent",u,c)}else if(i==="get"){const[u,c,d]=o;t("get",u,c,d)}else if(i==="set"){const[u]=o;t("set",u)}else t(i,...o)}catch(u){kt.error(u)}}return s}function HR(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=$R(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function WR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(mm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=30,KR=1e3;class QR{constructor(e={},n=KR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Sb=new QR;function YR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function JR(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:YR(r)},i=MR.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let u="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw Ot.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function XR(t,e=Sb,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Ot.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Ot.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new t4;return setTimeout(async()=>{u.abort()},LR),Nb({appId:r,apiKey:s,measurementId:i},o,u,e)}async function Nb(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Sb){var i;const{appId:o,measurementId:u}=t;try{await ZR(r,e)}catch(c){if(u)return kt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:u};throw c}try{const c=await JR(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!e4(d)){if(s.deleteThrottleMetadata(o),u)return kt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:u};throw c}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?M0(n,s.intervalMillis,GR):M0(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(o,g),kt.debug(`Calling attemptFetch again in ${f} millis`),Nb(t,g,r,s)}}function ZR(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Ot.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function e4(t){if(!(t instanceof pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class t4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function n4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r4(){if(fp())try{await pp()}catch(t){return kt.warn(Ot.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return kt.warn(Ot.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function s4(t,e,n,r,s,i,o){var u;const c=XR(t);c.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&kt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>kt.error(w)),e.push(c);const d=r4().then(w=>{if(w)return r.getId()}),[f,g]=await Promise.all([c,d]);WR(i)||UR(i,f.measurementId),s("js",new Date);const m=(u=o==null?void 0:o.config)!==null&&u!==void 0?u:{};return m[DR]="firebase",m.update=!0,g!=null&&(m[RR]=g),s("config",f.measurementId,m),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.app=e}_delete(){return delete Ao[this.app.options.appId],Promise.resolve()}}let Ao={},ev=[];const tv={};let Nd="dataLayer",o4="gtag",nv,Ab,rv=!1;function a4(){const t=[];if(hp()&&t.push("This is a browser extension environment."),H_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ot.create("invalid-analytics-context",{errorInfo:e});kt.warn(n.message)}}function l4(t,e,n){a4();const r=t.options.appId;if(!r)throw Ot.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)kt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ot.create("no-api-key");if(Ao[r]!=null)throw Ot.create("already-exists",{id:r});if(!rv){qR(Nd);const{wrappedGtag:i,gtagCore:o}=HR(Ao,ev,tv,Nd,o4);Ab=i,nv=o,rv=!0}return Ao[r]=s4(t,ev,tv,e,nv,Nd,n),new i4(t)}function u4(t=gp()){t=Te(t);const e=Es(t,Tu);return e.isInitialized()?e.getImmediate():c4(t)}function c4(t,e={}){const n=Es(t,Tu);if(n.isInitialized()){const s=n.getImmediate();if(Qo(e,n.getOptions()))return s;throw Ot.create("already-initialized")}return n.initialize({options:e})}async function d4(){if(hp()||!H_()||!fp())return!1;try{return await pp()}catch{return!1}}function h4(t,e,n,r){t=Te(t),n4(Ab,Ao[t.app.options.appId],e,n,r).catch(s=>kt.error(s))}const sv="@firebase/analytics",iv="0.10.7";function f4(){In(new dn(Tu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return l4(r,s,n)},"PUBLIC")),In(new dn("analytics-internal",t,"PRIVATE")),Gt(sv,iv),Gt(sv,iv,"esm2017");function t(e){try{const n=e.getProvider(Tu).getImmediate();return{logEvent:(r,s,i)=>h4(n,r,s,i)}}catch(n){throw Ot.create("interop-component-reg-failed",{reason:n})}}}f4();const p4={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},gm=Q_(p4),ae=RP(gm),ut=Uk(gm);typeof window<"u"&&d4().then(t=>{t&&u4(gm)});const kb=j.createContext(void 0),Ct=()=>{const t=j.useContext(kb);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ad=async t=>{var r,s;if(!t)return null;const n=(await cm(yt(ae,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},m4=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(!0);j.useEffect(()=>{const m=AA(ut,async w=>{if(w){const S=await Ad(w);n(S)}else n(null);s(!1)});return()=>m()},[]);const g={currentUser:e,loading:r,register:async(m,w,S)=>{try{const C=await bw(ut,m,w),{user:P}=C;await Ew(P,{displayName:S}),await ty(P);const b={uid:P.uid,email:P.email,displayName:S,emailVerified:P.emailVerified,isAdmin:!1,createdAt:Td(),updatedAt:Td()};await Jy(yt(ae,"users",P.uid),b);const E=await Ad(P);return n(E),P}catch(C){throw console.error("Erreur lors de l'inscription:",C),C}},login:async(m,w)=>{try{const S=await $h(ut,m,w),C=await Ad(S.user);return n(C),C}catch(S){throw console.error("Erreur de connexion:",S),S}},loginWithGoogle:async()=>{const m=new Rn;let w=null;try{w=(await QA(ut,m)).user,console.log("[Google] Utilisateur connect:",w);const C=yt(ae,"users",w.uid),P=await cm(C);console.log("[Google] Document utilisateur existe:",P.exists()),P.exists()||(await Jy(C,{uid:w.uid,email:w.email,displayName:w.displayName,emailVerified:w.emailVerified,isAdmin:!1,createdAt:Td(),photoURL:w.photoURL??void 0}),console.log("[Google] Document utilisateur cr dans Firestore"));const b={uid:w.uid,email:w.email||"",displayName:w.displayName||"",emailVerified:w.emailVerified,isAdmin:P.exists()?P.data().isAdmin:!1,createdAt:w.metadata.creationTime?new Date(w.metadata.creationTime):void 0,photoURL:w.photoURL??void 0};return console.log("[Google] AppUser retourn:",b),b}catch(S){throw console.error("[Google] Erreur dans loginWithGoogle:",S,w),S}},logout:async()=>{try{await kA(ut),n(null)}catch(m){throw console.error("Erreur lors de la dconnexion:",m),m}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(ut.currentUser)try{await ty(ut.currentUser)}catch(m){throw console.error("Erreur lors de l'envoi de l'email de vrification:",m),m}}};return a.jsx(kb.Provider,{value:g,children:t})},Cb=j.createContext(void 0),Pi=()=>{const t=j.useContext(Cb);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},g4=({children:t})=>{const[e,n]=j.useState([]),[r,s]=j.useState([]),[i,o]=j.useState([]),[u,c]=j.useState(!0);j.useEffect(()=>{(async()=>{c(!0);const _=await vn(Fe(ae,"guideSections"));s(_.docs.map(R=>({id:R.id,...R.data()})));const v=await vn(Fe(ae,"resources"));n(v.docs.map(R=>({id:R.id,...R.data()})));const k=await vn(Fe(ae,"faq"));o(k.docs.map(R=>({id:R.id,...R.data()}))),c(!1)})()},[]);const d=async()=>{const y=await vn(Fe(ae,"guideSections"));s(y.docs.map(k=>({id:k.id,...k.data()})));const _=await vn(Fe(ae,"resources"));n(_.docs.map(k=>({id:k.id,...k.data()})));const v=await vn(Fe(ae,"faq"));o(v.docs.map(k=>({id:k.id,...k.data()})))},N={resources:e,guideSections:r,faqItems:i,addResource:async y=>{await Dn(Fe(ae,"resources"),y),await d()},updateResource:async(y,_)=>{await oi(yt(ae,"resources",y),_),await d()},deleteResource:async y=>{await Rl(yt(ae,"resources",y)),await d()},addGuideSection:async y=>{await Dn(Fe(ae,"guideSections"),y),await d()},updateGuideSection:async(y,_)=>{await oi(yt(ae,"guideSections",y),_),await d()},deleteGuideSection:async y=>{await Rl(yt(ae,"guideSections",y)),await d()},addFAQItem:async y=>{await Dn(Fe(ae,"faq"),y),await d()},updateFAQItem:async(y,_)=>{await oi(yt(ae,"faq",y),_),await d()},deleteFAQItem:async y=>{await Rl(yt(ae,"faq",y)),await d()},getResourcesByPhase:y=>e.filter(_=>_.phase===y),getGuideSectionsByPhase:y=>r.filter(_=>_.phase===y).sort((_,v)=>_.order-v.order),getFAQItemsByPhase:y=>i.filter(_=>_.phase===y),searchResources:y=>{const _=y.toLowerCase();return e.filter(v=>v.title.toLowerCase().includes(_)||v.description.toLowerCase().includes(_)||v.category.toLowerCase().includes(_))}};return u?a.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):a.jsx(Cb.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ne=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},f)=>j.createElement("svg",{ref:f,...y4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${v4(t)}`,u].join(" "),...d},[...e.map(([g,m])=>j.createElement(g,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=ne("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=ne("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=ne("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kd=ne("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=ne("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=ne("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=ne("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=ne("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ne("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=ne("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=ne("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=ne("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=ne("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=ne("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=ne("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=ne("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=ne("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=ne("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=ne("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=ne("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=ne("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=ne("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=ne("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=ne("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=ne("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=ne("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=ne("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),U4=()=>{var g,m;const{currentUser:t,logout:e,isAdmin:n}=Ct(),[r,s]=j.useState(!1),[i,o]=j.useState(!1),[u,c]=j.useState(!1),d=ws();j.useEffect(()=>{const w=()=>{c(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),j.useEffect(()=>{s(!1),o(!1)},[d]);const f=async()=>{try{await e()}catch(w){console.error("Logout failed",w)}};return a.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${u?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:a.jsxs("div",{className:"container mx-auto px-4 py-3",children:[a.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[a.jsx(J,{to:"/",className:"flex items-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:a.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),a.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${u?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),a.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&a.jsxs(a.Fragment,{children:[a.jsx(J,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${u?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),a.jsx(J,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"Ressources"}),a.jsx(J,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&a.jsx(J,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"Admin"})]})}),a.jsx("div",{className:"hidden md:flex items-center",children:t?a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!i),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${u?"text-blue-800":"text-white"}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),a.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),a.jsx(ai,{className:"w-4 h-4"})]}),i&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[a.jsxs(J,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(cf,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Profil"})]}),n()&&a.jsxs(J,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(M4,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Administration"})]}),a.jsxs("button",{onClick:f,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(cv,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Dconnexion"})]})]})]}):a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(J,{to:"/login",className:`font-medium transition-colors duration-300 ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),a.jsx(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),a.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?a.jsx(Db,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`}):a.jsx(D4,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`})})]}),r&&a.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:a.jsx("div",{className:"flex flex-col space-y-4",children:t?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:(((g=t.displayName)==null?void 0:g.charAt(0))||((m=t.email)==null?void 0:m.charAt(0))||"U").toUpperCase()})}),a.jsx("span",{className:`ml-2 font-medium ${u?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),a.jsxs(J,{to:"/profile",className:`flex items-center py-2 ${u?"text-blue-800":"text-white"}`,children:[a.jsx(cf,{className:"w-4 h-4 mr-2"}),"Profil"]}),a.jsx(J,{to:"/dashboard",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),a.jsx(J,{to:"/resources",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Ressources"}),a.jsx(J,{to:"/faq",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&a.jsx(J,{to:"/admin",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Administration"}),a.jsxs("button",{onClick:f,className:`flex items-center py-2 ${u?"text-blue-800":"text-white"}`,children:[a.jsx(cv,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Dconnexion"})]})]}):a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx(J,{to:"/login",className:`font-medium ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),a.jsx(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},q4=()=>{const t=new Date().getFullYear();return a.jsx("footer",{className:"bg-blue-900 text-white",children:a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-1 md:col-span-1",children:[a.jsxs(J,{to:"/",className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:a.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),a.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),a.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(J,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),a.jsx("li",{children:a.jsx(J,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),a.jsx("li",{children:a.jsx(J,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx(J,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),a.jsx("li",{children:a.jsx(J,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les dmarches"})}),a.jsx("li",{children:a.jsx(J,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pr-arrive en France"})})]})]}),a.jsxs("div",{className:"col-span-1",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(P4,{className:"w-4 h-4 mr-2"}),a.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),a.jsxs("div",{className:"flex space-x-4 mt-4",children:[a.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:a.jsx(j4,{className:"w-5 h-5"})}),a.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:a.jsx(N4,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[a.jsxs("p",{className:"text-sm text-blue-200",children:[" ",t," ESIGELEC Prep Guide. Tous droits rservs."]}),a.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Dvelopp avec ",a.jsx(A4,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mback DIOUF"]})]})]})})},ul=({children:t})=>{const{currentUser:e,loading:n}=Ct();return n?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?a.jsx(a.Fragment,{children:t}):a.jsx(Ph,{to:"/login"})},Rs=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=Ct();return n?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?a.jsx(a.Fragment,{children:t}):a.jsx(Ph,{to:"/dashboard"}):a.jsx(Ph,{to:"/login"})},z4=()=>{const{currentUser:t}=Ct();return a.jsxs("div",{className:"flex flex-col min-h-screen",children:[a.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[a.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[a.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS  l'ESIGELEC"}),a.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement ncessaires pour russir votre transition des Classes Prparatoires Scientifiques de Dakar vers l'ESIGELEC  Rouen."}),a.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?a.jsxs(J,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accdez  votre tableau de bord",a.jsx(ov,{className:"ml-2 w-5 h-5"})]}):a.jsxs(a.Fragment,{children:[a.jsxs(J,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",a.jsx(ov,{className:"ml-2 w-5 h-5"})]}),a.jsx(J,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai dj un compte"})]})})]}),a.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:a.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour russir votre transition"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide  travers chaque tape du processus, du post-CPS jusqu' votre arrive en France."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(F4,{className:"w-7 h-7 text-blue-900"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides tape par tape"}),a.jsx("p",{className:"text-gray-600",children:"Des guides dtaills pour chaque phase de votre parcours, de la fin des CPS jusqu' votre installation  Rouen."})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(_4,{className:"w-7 h-7 text-blue-900"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),a.jsx("p",{className:"text-gray-600",children:"Accdez  tous les documents ncessaires pour vos dmarches Campus France, visa, logement et plus encore."})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(R4,{className:"w-7 h-7 text-blue-900"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),a.jsx("p",{className:"text-gray-600",children:"Dcouvrez tout ce que vous devez savoir sur la vie  Rouen, les transports, le logement et la vie tudiante."})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[a.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(df,{className:"w-7 h-7 text-blue-900"})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communaut d'entraide"}),a.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bnficiez de l'exprience des anciens tudiants qui ont suivi le mme parcours."})]})]})]})}),a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intgralit de votre parcours en trois grandes phases."})]}),a.jsxs("div",{className:"flex flex-col space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),a.jsx("p",{className:"text-blue-100",children:"Prparation des dossiers et candidatures aprs la fin des classes prparatoires."})]}),a.jsx("div",{className:"md:w-2/3 p-6",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),a.jsx("span",{children:"Prparation dossier Campus France"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),a.jsx("span",{children:"Candidature ESIGELEC"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),a.jsx("span",{children:"Validation des acquis et prrequis"})]})]})})]})}),a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les dmarches"}),a.jsx("p",{className:"text-blue-100",children:"Gestion des procdures administratives et prparation pratique."})]}),a.jsx("div",{className:"md:w-2/3 p-6",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),a.jsx("span",{children:"Demande de visa tudiant"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),a.jsx("span",{children:"Recherche de logement"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),a.jsx("span",{children:"Prparation financire et budgtaire"})]})]})})]})}),a.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:a.jsxs("div",{className:"flex flex-col md:flex-row",children:[a.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pr-arrive en France"}),a.jsx("p",{className:"text-blue-100",children:"Derniers prparatifs et informations sur l'arrive et l'installation."})]}),a.jsx("div",{className:"md:w-2/3 p-6",children:a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),a.jsx("span",{children:"Transport vers la France"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),a.jsx("span",{children:"Installation et dmarches  l'arrive"})]}),a.jsxs("li",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),a.jsx("span",{children:"Intgration  l'ESIGELEC et vie tudiante"})]})]})})]})})]})]})}),a.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prt  commencer votre parcours vers l'ESIGELEC ?"}),a.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communaut d'tudiants CPS et bnficiez de toutes les ressources dont vous avez besoin pour russir votre transition."}),a.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?a.jsx(J,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accder  mon tableau de bord"}):a.jsxs(a.Fragment,{children:[a.jsx(J,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),a.jsx(J,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},B4=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(!1),[o,u]=j.useState(""),[c,d]=j.useState(!1),[f,g]=j.useState(!1),m=Nn(),{login:w,loginWithGoogle:S}=Ct();Cu.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const C=async b=>{b.preventDefault();try{u(""),d(!0),await w(t,n),m("/dashboard")}catch(E){u("Identifiants invalides. Veuillez ressayer."),console.error(E)}finally{d(!1)}},P=async()=>{u(""),g(!0);try{await S(),m("/dashboard")}catch(b){let E="Erreur lors de la connexion avec Google.";b&&typeof b=="object"&&"message"in b&&(E+=`
${b.message}`),u(E),console.error(b)}finally{g(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:a.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous  votre compte"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",a.jsx(J,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"crez un nouveau compte"})]})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[o&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:a.jsx("div",{className:"flex",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm text-red-700",children:o})})})}),a.jsxs("button",{type:"button",onClick:P,disabled:f,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${f?"opacity-70 cursor-not-allowed":""}`,children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:a.jsxs("g",{children:[a.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),a.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),a.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),a.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),f?"Connexion Google...":"Se connecter avec Google"]}),a.jsxs("form",{className:"space-y-6",onSubmit:C,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:b=>e(b.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),a.jsx("div",{className:"mt-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:b=>r(b.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,onClick:()=>i(b=>!b),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":s?"Masquer le mot de passe":"Afficher le mot de passe",children:s?a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),a.jsx("div",{className:"text-sm",children:a.jsx(J,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oubli ?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:c,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${c?"opacity-70 cursor-not-allowed":""}`,children:c?"Connexion en cours...":"Se connecter"})})]})]})})]})},$4=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,u]=j.useState(""),[c,d]=j.useState(!1),[f,g]=j.useState(!1),[m,w]=j.useState(""),[S,C]=j.useState(!1),P=Nn(),{register:b,loginWithGoogle:E}=Ct(),T=async()=>{try{await E(),P("/dashboard")}catch{w("Erreur lors de l'inscription avec Google"),console.error()}},M=async D=>{if(D.preventDefault(),s!==o)return w("Les mots de passe ne correspondent pas");try{w(""),C(!0),await b(n,s,t),P("/dashboard")}catch{w("Erreur lors de la cration du compte"),console.error()}finally{C(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:a.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crez votre compte"}),a.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",a.jsx(J,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[m&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:a.jsx("div",{className:"flex",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm text-red-700",children:m})})})}),a.jsxs("button",{type:"button",onClick:T,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:a.jsxs("g",{children:[a.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),a.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),a.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),a.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),a.jsxs("form",{className:"space-y-6",onSubmit:M,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),a.jsx("div",{className:"mt-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:c?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:D=>i(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":c?"Masquer le mot de passe":"Afficher le mot de passe",children:c?a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),a.jsx("div",{className:"mt-1",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:o,onChange:D=>u(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),a.jsx("button",{type:"button",tabIndex:-1,onClick:()=>g(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":f?"Masquer le mot de passe":"Afficher le mot de passe",children:f?a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",a.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:S,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:S?"Cration en cours...":"Crer un compte"})})]})]})})]})},H4=()=>{const{currentUser:t}=Ct(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=Pi(),[i,o]=j.useState("post-cps"),[u,c]=j.useState([]),d=m=>{u.includes(m)?c(u.filter(w=>w!==m)):c([...u,m])},f=r?r(i):[],g=m=>{const w=r?r(m):[];if(!w||w.length===0)return 0;const S=w.filter(C=>u.includes(C.id));return Math.round(S.length/w.length*100)};return!n||!s||!e?a.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),a.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",a.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accdez  vos ressources."]})]})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:a.jsxs("div",{className:"flex flex-wrap",children:[a.jsx("button",{onClick:()=>o("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),a.jsx("button",{onClick:()=>o("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les dmarches"}),a.jsx("button",{onClick:()=>o("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pr-arrive"})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsxs("div",{className:"border-b border-gray-200 p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[i==="post-cps"&&"Aprs votre CPS",i==="during-process"&&"Pendant vos dmarches administratives",i==="pre-arrival"&&"Avant votre arrive en France"]}),a.jsxs("p",{className:"text-gray-600",children:[i==="post-cps"&&"Les tapes essentielles aprs la fin de votre classe prparatoire",i==="during-process"&&"Les dmarches  effectuer pour prparer votre dpart",i==="pre-arrival"&&"Prparez votre arrive et votre installation en France"]})]}),a.jsx("div",{className:"divide-y divide-gray-200",children:f&&f.length>0?f.map(m=>a.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:a.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[a.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:a.jsx("button",{onClick:()=>d(m.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${u.includes(m.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:a.jsx(jb,{className:"w-5 h-5"})})}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:m.content}),Array.isArray(m.resources)&&m.resources.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associes:"}),a.jsx("div",{className:"space-y-2",children:m.resources.map(w=>{const S=n.find(C=>C.id===w);return S?a.jsxs("a",{href:S.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),S.title]},S.id):null})})]})]})]})},m.id)):a.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("post-cps"),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("post-cps")}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les dmarches"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("during-process"),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("during-process")}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pr-arrive"}),a.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("pre-arrival"),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:a.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("pre-arrival")}%`}})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources rcentes"}),a.jsx(J,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),a.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(m=>a.jsxs("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:a.jsx(yr,{className:"w-5 h-5 text-blue-700"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:m.title}),a.jsx("p",{className:"text-xs text-gray-500",children:m.phase})]})]},m.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions frquentes"}),a.jsx(J,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),a.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(m=>a.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:m.question}),a.jsx("p",{className:"text-xs text-gray-700",children:m.answer&&m.answer.length>100?`${m.answer.substring(0,100)}...`:m.answer})]},m.id))})]})]})]})})]})},W4=()=>{const{resources:t}=Pi(),[e,n]=j.useState(""),[r,s]=j.useState("all"),[i,o]=j.useState("all"),[u,c]=j.useState(!1),[d,f]=j.useState(!1),[g,m]=j.useState(null),[w,S]=j.useState(!1),C=[...new Set(t.map(D=>D.category))],P=D=>{if(D.includes("dropbox.com")){let V=D.replace("www.dropbox.com","dl.dropboxusercontent.com");return V.includes("?dl=0")?V=V.replace("?dl=0","?raw=1"):V.includes("?")?V+="&raw=1":V+="?raw=1",V}return D},b=D=>`https://docs.google.com/viewer?url=${encodeURIComponent(D)}&embedded=true`,E=D=>{D.preventDefault()},T=t.filter(D=>r!=="all"&&D.phase!==r||i!=="all"&&D.category!==i?!1:e?D.title.toLowerCase().includes(e.toLowerCase())||D.description.toLowerCase().includes(e.toLowerCase()):!0),M=D=>{switch(D){case"pdf":return a.jsx(S4,{className:"w-6 h-6 text-red-500"});case"image":return a.jsx(C4,{className:"w-6 h-6 text-green-500"});case"video":return a.jsx(V4,{className:"w-6 h-6 text-purple-500"});case"archive":return a.jsx(x4,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return a.jsx(yr,{className:"w-6 h-6 text-blue-500"})}};return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothque de ressources"}),a.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:a.jsx("div",{className:"p-6",children:a.jsx("form",{onSubmit:E,children:a.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[a.jsx("div",{className:"flex-grow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Iu,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:D=>n(D.target.value)})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>c(!u),children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(lv,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les dmarches":"Pr-arrive"]}),a.jsx(ai,{className:"h-4 w-4"})]}),u&&a.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:a.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("all"),c(!1)},children:"Toutes les phases"}),a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("post-cps"),c(!1)},children:"Post-CPS"}),a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("during-process"),c(!1)},children:"Pendant les dmarches"}),a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("pre-arrival"),c(!1)},children:"Pr-arrive"})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>f(!d),children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(lv,{className:"mr-2 h-4 w-4"}),i==="all"?"Toutes les catgories":i]}),a.jsx(ai,{className:"h-4 w-4"})]}),d&&a.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:a.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o("all"),f(!1)},children:"Toutes les catgories"}),C.map(D=>a.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o(D),f(!1)},children:D},D))]})})]})]})]})})})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.length>0?T.map(D=>a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{m(D),S(!0)},children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:M(D.fileType)}),a.jsx("div",{className:"ml-4",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title})})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.phase==="post-cps"?"Post-CPS":D.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.fileType==="pdf"?"bg-red-100 text-red-800":D.fileType==="doc"||D.fileType==="docx"||D.fileType==="txt"?"bg-blue-100 text-blue-800":D.fileType==="xls"||D.fileType==="xlsx"?"bg-green-100 text-green-800":D.fileType==="ppt"||D.fileType==="pptx"?"bg-orange-100 text-orange-800":D.fileType==="image"?"bg-purple-100 text-purple-800":D.fileType==="video"?"bg-pink-100 text-pink-800":D.fileType==="audio"?"bg-indigo-100 text-indigo-800":D.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:D.fileType.toUpperCase()})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[a.jsxs("span",{children:["Mis  jour le ",D.updatedDate]}),a.jsxs("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:V=>V.stopPropagation(),children:[a.jsx(av,{className:"w-4 h-4 mr-1"}),a.jsx("span",{children:"Tlcharger"})]})]})]})},D.id)):a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:a.jsx(Iu,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouve"}),a.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),w&&g&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:g.title}),a.jsx("p",{className:"text-sm text-gray-500",children:g.category})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[a.jsx(E4,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),a.jsxs("a",{href:g.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[a.jsx(av,{className:"w-4 h-4 mr-1"}),"Tlcharger"]}),a.jsxs("button",{onClick:()=>S(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[a.jsx(Db,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),a.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:g.fileType==="pdf"?a.jsxs("div",{className:"flex flex-col items-center h-full",children:[a.jsx("div",{className:"h-full w-full",children:a.jsx("object",{data:P(g.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:a.jsx("iframe",{src:b(g.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${g.title} (Google Viewer)`,allowFullScreen:!0})})}),a.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",a.jsx("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"tlcharger"}),"ou l'",a.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(g.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):g.fileType==="image"?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("img",{src:P(g.fileUrl),alt:g.title,className:"max-w-full max-h-full object-contain rounded-md"})}):a.jsx("iframe",{src:P(g.fileUrl),className:"w-full h-full border-0 rounded-md",title:g.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},G4=()=>{const{faqItems:t,addFAQItem:e}=Pi(),{currentUser:n}=Ct(),[r,s]=j.useState(""),[i,o]=j.useState("all"),[u,c]=j.useState(null),[d,f]=j.useState(!1),[g,m]=j.useState(!1),[w,S]=j.useState(!1),[C,P]=j.useState(""),[b,E]=j.useState("post-cps"),[T,M]=j.useState(""),[D,V,N]=t.reduce((v,k)=>(n&&(k.userId===n.uid||k.userEmail===n.email)&&(k.isAnswered?v[0].push(k):v[1].push(k)),k.isApproved&&k.isAnswered&&(i==="all"||k.phase===i)&&(!r||k.question.toLowerCase().includes(r.toLowerCase())||k.answer.toLowerCase().includes(r.toLowerCase())||k.category.toLowerCase().includes(r.toLowerCase()))&&v[2].push(k),v),[[],[],[]]),y=v=>{c(u===v?null:v)},_=v=>{v.preventDefault(),C.trim()&&(e({question:C,answer:"Cette question est en attente de rponse par notre quipe.",category:T||"gnral",phase:b,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:n==null?void 0:n.uid,userEmail:n==null?void 0:n.email}),P(""),M(""),m(!0),setTimeout(()=>{m(!1),f(!1)},5e3))};return j.useEffect(()=>{d||m(!1)},[d]),a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions frquemment poses"}),a.jsx("p",{className:"text-blue-100",children:"Trouvez les rponses  vos questions ou posez-en de nouvelles."})]})}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[a.jsx("div",{className:"flex-grow",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Iu,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:v=>s(v.target.value)})]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("select",{value:i,onChange:v=>o(v.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:w,children:[a.jsx("option",{value:"all",children:"Toutes les phases"}),a.jsx("option",{value:"post-cps",children:"Post-CPS"}),a.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),a.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]}),n&&a.jsx("button",{type:"button",onClick:()=>S(!w),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:w?"Toutes les questions":"Mes questions"}),a.jsxs("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(ko,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[a.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[a.jsx(Qs,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),a.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise  lquipe, qui y rpondra rapidement."}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),a.jsx("form",{onSubmit:_,className:"space-y-7",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),a.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:C,onChange:v=>P(v.target.value),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concerne"}),a.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:v=>E(v.target.value),required:!0,children:[a.jsx("option",{value:"post-cps",children:"Post-CPS"}),a.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),a.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),a.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:T,onChange:v=>M(v.target.value)})]})]}),g?a.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(jb,{className:"h-5 w-5 text-green-500 mr-2"}),a.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien t envoye !"})]}),a.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la rponse de l'administrateur par email et elle apparatra galement sur la plateforme en tant que question anonyme."})]}):a.jsxs("div",{className:"flex justify-end",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),a.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),w?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions rpondues",a.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:D.length})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:D.length>0?D.map(v=>a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Qs,{className:"h-4 w-4 text-green-700"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.question}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),v.category&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),u===v.id?a.jsx(kd,{className:"h-5 w-5 text-gray-500"}):a.jsx(ai,{className:"h-5 w-5 text-gray-500"})]}),u===v.id&&a.jsxs("div",{className:"mt-4 ml-11",children:[a.jsx("p",{className:"text-gray-700",children:v.answer}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise  jour le ",v.updatedDate]})]})]},v.id)):a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions rpondues."})})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",a.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:V.length})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:V.length>0?V.map(v=>a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:a.jsx(Qs,{className:"h-4 w-4 text-yellow-700"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),v.category&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category}),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Pose le ",v.createdDate]})]})]})]}),u===v.id?a.jsx(kd,{className:"h-5 w-5 text-gray-500"}):a.jsx(ai,{className:"h-5 w-5 text-gray-500"})]}),u===v.id&&a.jsx("div",{className:"mt-4 ml-11",children:a.jsx("p",{className:"text-gray-700 italic",children:v.answer})})]},v.id)):a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de rponse."})})})]})]}):a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et rponses"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map(v=>a.jsxs("div",{className:"p-6",children:[a.jsxs("button",{onClick:()=>y(v.id),className:"flex justify-between items-start w-full text-left",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Qs,{className:"h-4 w-4 text-blue-700"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,w&&!v.isApproved&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),v.category&&a.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),u===v.id?a.jsx(kd,{className:"h-5 w-5 text-gray-500"}):a.jsx(ai,{className:"h-5 w-5 text-gray-500"})]}),u===v.id&&a.jsxs("div",{className:"mt-4 ml-11",children:[a.jsx("p",{className:"text-gray-700",children:v.answer}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise  jour le ",v.updatedDate]})]})]},v.id)):a.jsx("div",{className:"p-6 text-center",children:a.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond  votre recherche."})})})]})]})]})};function K4(t=20){const[e,n]=j.useState([]),[r,s]=j.useState(!0);return j.useEffect(()=>{(async()=>{s(!0);try{const o=ho(Fe(ae,"adminActivityLog"),nb("date","desc"),af(t)),u=await vn(o);n(u.docs.map(c=>({id:c.id,...c.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function Q4(t){const e={Ajout:"a ajout",Suppression:"a supprim",Modification:"a modifi"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),i=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${i}`}const Y4=()=>{const{currentUser:t}=Ct(),{resources:e,guideSections:n,faqItems:r}=Pi(),{recentActivity:s,loading:i}=K4();return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord administrateur"}),a.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",a.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Grez le contenu et les ressources de la plateforme."]})]})}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[a.jsxs(J,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(jd,{className:"-ml-1 mr-2 h-5 w-5"}),"diter le contenu"]}),a.jsxs(J,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(yr,{className:"-ml-1 mr-2 h-5 w-5"}),"Grer les ressources"]}),a.jsxs(J,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(df,{className:"-ml-1 mr-2 h-5 w-5"}),"Grer les utilisateurs"]}),a.jsxs(J,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[a.jsx(w4,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activit dtaill"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:a.jsx(yr,{className:"h-6 w-6"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:a.jsx(jd,{className:"h-6 w-6"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:a.jsx(Qs,{className:"h-6 w-6"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),a.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions rpondues"]}),Array.isArray(r)&&r.filter(o=>o.isAnswered).length>5&&a.jsx("span",{className:"text-xs text-gray-500",children:"Dfilez pour voir plus"})]}),a.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(o=>o.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(o=>o.isAnswered).length>0?r.filter(o=>o.isAnswered).map(o=>a.jsxs("li",{className:"flex items-center justify-between py-2",children:[a.jsxs("div",{className:"flex-grow pr-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-gray-800 line-clamp-1",children:o.question}),o.isApproved?a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publi"})]}),a.jsx("span",{className:"text-xs text-gray-500",children:o.phase==="post-cps"?"Post-CPS":o.phase==="during-process"?"Dmarches":"Pr-arrive"})]}),a.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:a.jsx(J,{to:`/admin/content?edit=${o.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},o.id)):a.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question rpondue pour le moment."})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[a.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&a.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(o=>!o.isAnswered).length})]}),Array.isArray(r)&&r.filter(o=>!o.isAnswered).length>5&&a.jsx("span",{className:"text-xs text-gray-500",children:"Dfilez pour voir plus"})]}),a.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(o=>!o.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(o=>!o.isAnswered).length>0?r.filter(o=>!o.isAnswered).map(o=>a.jsxs("li",{className:"flex items-center justify-between py-2",children:[a.jsxs("div",{className:"flex-grow pr-2",children:[a.jsx("span",{className:"text-gray-800 line-clamp-1",children:o.question}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:o.phase==="post-cps"?"Post-CPS":o.phase==="during-process"?"Dmarches":"Pr-arrive"}),o.userEmail&&a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[" ",o.userEmail]})]})]}),a.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:a.jsx(J,{to:`/admin/content?edit=${o.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Rpondre"})})]},o.id)):a.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de rponse."})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs(J,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:a.jsx(jd,{className:"h-5 w-5"})}),a.jsx("span",{children:"Grer le contenu"})]}),a.jsxs(J,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:a.jsx(yr,{className:"h-5 w-5"})}),a.jsx("span",{children:"Grer les ressources"})]}),a.jsxs(J,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:a.jsx(Qs,{className:"h-5 w-5"})}),a.jsx("span",{children:"Modrer la FAQ"})]}),a.jsxs(J,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:a.jsx(df,{className:"h-5 w-5"})}),a.jsx("span",{children:"Grer les utilisateurs"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[a.jsxs(J,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:a.jsx(ko,{className:"h-5 w-5"})}),a.jsx("span",{children:"Ajouter une section de guide"})]}),a.jsxs(J,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:a.jsx(ko,{className:"h-5 w-5"})}),a.jsx("span",{children:"Ajouter une ressource"})]}),a.jsxs(J,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[a.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:a.jsx(ko,{className:"h-5 w-5"})}),a.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activit rcente"})}),a.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:i?a.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?a.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activit rcente."}):s.map(o=>{var u;return a.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:a.jsx(yr,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-800",children:Q4(o)}),a.jsx("div",{className:"text-xs text-gray-500",children:new Date(o.date).toLocaleString()}),typeof((u=o.details)==null?void 0:u.title)=="string"&&a.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",o.details.title]})]})]})},o.id)})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="post-cps").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="post-cps").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="post-cps").length:0})]})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="during-process").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="during-process").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="during-process").length:0})]})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="pre-arrival").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="pre-arrival").length:0})]})}),a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),a.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Pn({type:t,target:e,targetId:n,user:r,details:s}){await Dn(Fe(ae,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const J4=()=>{const[t]=V_(),e=Nn(),{currentUser:n}=Ct(),{guideSections:r,addGuideSection:s,updateGuideSection:i,deleteGuideSection:o,resources:u,faqItems:c,addFAQItem:d,updateFAQItem:f,deleteFAQItem:g}=Pi(),m=t.get("new")==="section",w=t.get("new")==="faq",S=m?null:t.get("edit")&&r.some(z=>z.id===t.get("edit"))?t.get("edit"):null,C=w?null:t.get("edit")&&c.some(z=>z.id===t.get("edit"))?t.get("edit"):null,[P,b]=j.useState(""),[E,T]=j.useState("post-cps"),[M,D]=j.useState(""),[V,N]=j.useState(1),[y,_]=j.useState([]),[v,k]=j.useState(""),[R,A]=j.useState(""),[ue,Ve]=j.useState(""),[bt,tt]=j.useState("post-cps"),[$,G]=j.useState(!0),[Y,ce]=j.useState(!1);j.useEffect(()=>{if(S){const z=r.find(fe=>fe.id===S);z&&(b(z.title),T(z.phase),D(z.content),N(z.order),_(Array.isArray(z.resources)?z.resources:[]))}else if(m){b(""),T("post-cps"),D("");const z=r.filter(fe=>fe.phase==="post-cps");N(z.length>0?Math.max(...z.map(fe=>fe.order))+1:1),_([])}if(C){const z=c.find(fe=>fe.id===C);z&&(k(z.question),A(z.answer),Ve(z.category||""),tt(z.phase),G(!!z.isApproved),ce(!!z.isAnswered))}else w&&(k(""),A(""),Ve(""),tt("post-cps"),G(!0),ce(!1))},[S,m,r,C,w,c]);const pe=()=>{A(""),ce(!1)},Ie=z=>{const fe=z.trim()!==""&&z!=="Cette question est en attente de rponse par notre quipe.";ce(fe)},qt=z=>{if(z.preventDefault(),w||C)if(C){const fe=R.trim()!==""&&R!=="Cette question est en attente de rponse par notre quipe.";ce(fe),f(C,{question:v,answer:R,category:ue,phase:bt,isApproved:$,isAnswered:fe}),Pn({type:"Modification",target:"FAQ",targetId:C,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else{const fe=R.trim()!==""&&R!=="Cette question est en attente de rponse par notre quipe.";ce(fe),d({question:v,answer:R,category:ue,phase:bt,isApproved:$,isAnswered:fe,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Pn({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else S?(i(S,{title:P,phase:E,content:M,order:V,resources:y}),Pn({type:"Modification",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}})):(s({title:P,phase:E,content:M,order:V,resources:y}),Pn({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}}));e("/admin")},zt=()=>{S&&window.confirm("tes-vous sr de vouloir supprimer cette section ?")?(o(S),Pn({type:"Suppression",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:P}}),e("/admin")):C&&window.confirm("tes-vous sr de vouloir supprimer cette FAQ ?")&&(g(C),Pn({type:"Suppression",target:"FAQ",targetId:C,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}}),e("/admin"))},Xt=z=>{y.includes(z)?_(y.filter(fe=>fe!==z)):_([...y,z])},jt=u.filter(z=>z.phase===E),Zt={"post-cps":r.filter(z=>z.phase==="post-cps").sort((z,fe)=>z.order-fe.order),"during-process":r.filter(z=>z.phase==="during-process").sort((z,fe)=>z.order-fe.order),"pre-arrival":r.filter(z=>z.phase==="pre-arrival").sort((z,fe)=>z.order-fe.order)};return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:m?"Ajouter une nouvelle section":w?"Ajouter une question FAQ":C?"Modifier la FAQ":S?"Modifier la section":"dition"}),a.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[a.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:w||C?a.jsx("form",{onSubmit:qt,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),a.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:v,onChange:z=>k(z.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Rponse"}),C&&a.jsx("button",{type:"button",onClick:pe,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et rpondre"})]}),a.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:R,onChange:z=>{A(z.target.value),Ie(z.target.value)},required:!0}),a.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${Y?"bg-green-500":"bg-yellow-500"} mr-2`}),a.jsx("span",{className:"text-gray-600",children:Y?"Cette question est marque comme rpondue":"Cette question est en attente de rponse"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),a.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:ue,onChange:z=>Ve(z.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),a.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:bt,onChange:z=>tt(z.target.value),required:!0,children:[a.jsx("option",{value:"post-cps",children:"Post-CPS"}),a.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),a.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:$,onChange:z=>G(z.target.checked)}),a.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuve (visible publiquement)"})]})}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{children:C&&a.jsxs("button",{type:"button",onClick:zt,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[a.jsx(Su,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[a.jsx(uf,{className:"mr-2 h-4 w-4"}),w?"Ajouter":"Enregistrer"]})]})]})]})}):a.jsx("form",{onSubmit:qt,children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),a.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:z=>b(z.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),a.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:z=>{const fe=z.target.value;T(fe);const qr=r.filter(zr=>zr.phase===fe);N(qr.length>0?Math.max(...qr.map(zr=>zr.order))+1:1),_([])},required:!0,children:[a.jsx("option",{value:"post-cps",children:"Post-CPS"}),a.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),a.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),a.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:V,onChange:z=>N(parseInt(z.target.value)),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),a.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:M,onChange:z=>D(z.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associes"}),Array.isArray(jt)&&jt.length>0?a.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:jt.map(z=>a.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[a.jsx("input",{type:"checkbox",id:`resource-${z.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(z.id),onChange:()=>Xt(z.id)}),a.jsx("label",{htmlFor:`resource-${z.id}`,className:"ml-3 block text-sm text-gray-700",children:z.title})]},z.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{children:S&&a.jsxs("button",{type:"button",onClick:zt,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[a.jsx(Su,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[a.jsx(uf,{className:"mr-2 h-4 w-4"}),m?"Ajouter":"Enregistrer"]})]})]})]})})})}),a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),a.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(ko,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Zt["post-cps"])&&Zt["post-cps"].length>0?a.jsx("ul",{className:"space-y-2",children:Zt["post-cps"].map(z=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===z.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),a.jsx("span",{className:"flex-grow",children:z.title}),a.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(Zt["during-process"])&&Zt["during-process"].length>0?a.jsx("ul",{className:"space-y-2",children:Zt["during-process"].map(z=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===z.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),a.jsx("span",{className:"flex-grow",children:z.title}),a.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(Zt["pre-arrival"])&&Zt["pre-arrival"].length>0?a.jsx("ul",{className:"space-y-2",children:Zt["pre-arrival"].map(z=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===z.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),a.jsx("span",{className:"flex-grow",children:z.title}),a.jsx(Cd,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]})]})]})})]})})]})};var X4="rpc",Z4="upload",e5="download",Pd="app",Rd="user",Dd="team",t5="noauth",n5="cookie",Nu="dropboxapi.com",dv="dropbox.com",hf={api:"api",notify:"bolt",content:"api-content"},I={};I.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};I.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};I.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};I.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};I.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};I.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};I.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};I.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};I.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};I.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};I.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};I.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};I.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};I.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};I.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};I.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};I.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};I.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};I.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};I.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};I.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};I.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};I.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};I.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};I.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};I.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};I.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};I.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};I.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};I.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};I.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};I.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};I.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};I.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};I.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};I.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};I.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};I.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};I.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};I.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};I.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};I.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};I.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};I.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};I.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};I.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};I.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};I.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};I.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};I.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};I.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};I.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};I.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};I.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};I.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};I.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};I.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};I.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};I.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};I.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};I.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};I.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};I.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};I.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};I.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};I.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};I.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};I.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};I.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};I.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};I.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};I.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};I.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};I.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};I.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};I.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};I.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};I.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};I.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};I.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};I.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};I.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};I.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};I.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};I.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};I.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};I.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};I.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};I.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};I.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};I.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};I.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};I.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};I.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};I.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};I.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};I.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};I.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};I.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};I.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};I.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};I.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};I.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};I.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};I.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};I.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};I.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};I.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};I.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};I.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};I.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};I.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};I.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};I.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};I.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};I.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};I.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};I.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};I.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};I.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};I.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};I.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};I.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};I.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};I.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};I.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};I.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};I.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};I.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};I.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};I.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};I.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};I.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};I.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};I.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};I.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};I.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};I.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};I.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};I.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};I.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};I.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};I.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};I.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};I.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};I.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};I.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};I.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};I.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};I.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function r5(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var Ld=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nu,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==Nu&&hf[e]!==void 0&&(e=hf[e],r="-"),"https://".concat(e).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},s5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dv;return e!==dv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},hv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nu,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==Nu&&(r=hf[r],n="-"),"https://".concat(r).concat(n).concat(e,"/oauth2/token")};function fv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,r5)}function i5(t){return new Date(Date.now()+t*1e3)}function pv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof Ub>"u"||typeof window<"u"}function Md(){return typeof window<"u"}function Od(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function cl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function Dl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dl=function(n){return typeof n}:Dl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Dl(t)}function o5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oa(t,e)}function l5(t){var e=Lb();return function(){var r=aa(t),s;if(e){var i=aa(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return u5(this,s)}}function u5(t,e){return e&&(Dl(e)==="object"||typeof e=="function")?e:c5(t)}function c5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ff(t){var e=typeof Map=="function"?new Map:void 0;return ff=function(r){if(r===null||!d5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return Ll(r,arguments,aa(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),oa(s,r)},ff(t)}function Ll(t,e,n){return Lb()?Ll=Reflect.construct:Ll=function(s,i,o){var u=[null];u.push.apply(u,i);var c=Function.bind.apply(s,u),d=new c;return o&&oa(d,o.prototype),d},Ll.apply(null,arguments)}function Lb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function d5(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function oa(t,e){return oa=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},oa(t,e)}function aa(t){return aa=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},aa(t)}var h5=function(t){a5(n,t);var e=l5(n);function n(r,s,i){var o;return o5(this,n),o=e.call(this,"Response failed with a ".concat(r," code")),o.name="DropboxResponseError",o.status=r,o.headers=s,o.error=i,o}return n}(ff(Error));function f5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Mb=function t(e,n,r){f5(this,t),this.status=e,this.headers=n,this.result=r};function Ob(t){return t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}throw new h5(t.status,t.headers,n)})}function Au(t){return t.ok?t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}return new Mb(t.status,t.headers,n)}):Ob(t)}function p5(t){return t.ok?new Promise(function(e){pv()?t.blob().then(function(n){return e(n)}):t.buffer().then(function(n){return e(n)})}).then(function(e){var n=JSON.parse(t.headers.get("dropbox-api-result"));return pv()?n.fileBlob=e:n.fileBinary=e,new Mb(t.status,t.headers,n)}):Ob(t)}function m5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y5(t,e,n){return e&&g5(t.prototype,e),t}var dl,Gr,Vd,v5=300*1e3,mv=128,x5=["legacy","offline","online"],_5=["code","token"],w5=["none","user","team"],b5=function(){function t(e){m5(this,t),e=e||{},Md()?(dl=window.fetch.bind(window),Gr=window.crypto||window.msCrypto):Od()?(dl=self.fetch.bind(self),Gr=self.crypto):(dl=require("node-fetch"),Gr=require("crypto")),typeof TextEncoder>"u"?Vd=require("util").TextEncoder:Vd=TextEncoder,this.fetch=e.fetch||dl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return y5(t,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new Vd,s=r.encode(this.codeVerifier),i;if(Md()||Od())return Gr.subtle.digest("SHA-256",s).then(function(u){var c=btoa(String.fromCharCode.apply(null,new Uint8Array(u)));i=cl(c).substr(0,128),n.codeChallenge=i});var o=Gr.createHash("sha256").update(s).digest();return i=cl(o),this.codeChallenge=i,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(Md()||Od()){var r=new Uint8Array(mv),s=Gr.getRandomValues(r),i=btoa(s);n=cl(i).substr(0,128)}else{var o=Gr.randomBytes(mv);n=cl(o).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var s=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,f=this.getClientId(),g=s5(this.domain);if(!f)throw new Error("A client id is required. You can set the client id using .setClientId().");if(i!=="code"&&!n)throw new Error("A redirect uri is required.");if(!_5.includes(i))throw new Error("Authorization type must be code or token");if(o&&!x5.includes(o))throw new Error("Token Access Type must be legacy, offline, or online");if(u&&!(u instanceof Array))throw new Error("Scope must be an array of strings");if(!w5.includes(c))throw new Error("includeGrantedScopes must be none, user, or team");var m;return i==="code"?m="".concat(g,"?response_type=code&client_id=").concat(f):m="".concat(g,"?response_type=token&client_id=").concat(f),n&&(m+="&redirect_uri=".concat(n)),r&&(m+="&state=".concat(r)),o&&(m+="&token_access_type=".concat(o)),u&&(m+="&scope=".concat(u.join(" "))),c!=="none"&&(m+="&include_granted_scopes=".concat(c)),d?this.generatePKCECodes().then(function(){return m+="&code_challenge_method=S256",m+="&code_challenge=".concat(s.codeChallenge),m}):Promise.resolve(m)}},{key:"getAccessTokenFromCode",value:function(n,r){var s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");var o=hv(this.domain,this.domainDelimiter);if(o+="?grant_type=authorization_code",o+="&code=".concat(r),o+="&client_id=".concat(s),i)o+="&client_secret=".concat(i);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");o+="&code_verifier=".concat(this.codeVerifier)}n&&(o+="&redirect_uri=".concat(n));var u={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(o,u).then(function(c){return Au(c)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+v5)>=this.getAccessTokenExpiresAt(),s=!this.getAccessToken();return(r||s)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var o=hv(this.domain,this.domainDelimiter),u={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var c={grant_type:"refresh_token",client_id:s,refresh_token:this.getRefreshToken()};i&&(c.client_secret=i),r&&(c.scope=r.join(" ")),u.body=c}else o+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),o+="&client_id=".concat(s),i&&(o+="&client_secret=".concat(i)),r&&(o+="&scope=".concat(r.join(" ")));return this.fetch(o,u).then(function(d){return Au(d)}).then(function(d){n.setAccessToken(d.result.access_token),n.setAccessTokenExpiresAt(i5(d.result.expires_in))})}}]),t}();function E5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I5(t,e,n){return e&&T5(t.prototype,e),t}var S5=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,N5=function(){function t(e){E5(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new b5(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,I)}return I5(t,[{key:"request",value:function(n,r,s,i,o){switch(o){case X4:return this.rpcRequest(n,r,s,i);case e5:return this.downloadRequest(n,r,s,i);case Z4:return this.uploadRequest(n,r,s,i);default:throw new Error("Invalid request style: ".concat(o))}}},{key:"rpcRequest",value:function(n,r,s,i){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var u={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(u.headers["Content-Type"]="application/json"),o.setAuthHeaders(s,u),o.setCommonHeaders(u),u}).then(function(u){return o.fetch(Ld(i,o.domain,o.domainDelimiter)+n,u)}).then(function(u){return Au(u)})}},{key:"downloadRequest",value:function(n,r,s,i){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var u={method:"POST",headers:{"Dropbox-API-Arg":fv(r)}};return o.setAuthHeaders(s,u),o.setCommonHeaders(u),u}).then(function(u){return o.fetch(Ld(i,o.domain,o.domainDelimiter)+n,u)}).then(function(u){return p5(u)})}},{key:"uploadRequest",value:function(n,r,s,i){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var u=r.contents;delete r.contents;var c={body:u,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":fv(r)}};return o.setAuthHeaders(s,c),o.setCommonHeaders(c),c}).then(function(u){return o.fetch(Ld(i,o.domain,o.domainDelimiter)+n,u)}).then(function(u){return Au(u)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var s=n.replace(" ","").split(",");s.includes(Rd)&&this.auth.getAccessToken()?n=Rd:s.includes(Dd)&&this.auth.getAccessToken()?n=Dd:s.includes(Pd)&&(n=Pd)}switch(n){case Pd:if(this.auth.clientId&&this.auth.clientSecret){var i=S5("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(i)}break;case Dd:case Rd:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case t5:case n5:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var s=Object.keys(this.customHeaders);s.forEach(function(i){n.headers[i]=r.customHeaders[i]})}}}]),t}();const A5="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function Vb({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:n=!1}){const[r,s]=j.useState(null),[i,o]=j.useState(!1),[u,c]=j.useState(null),d=g=>{g.target.files&&g.target.files.length>0&&s(g.target.files[0])},f=async()=>{if(!r)return;o(!0);const g=new N5({accessToken:A5});let m=!1,w="";try{const S=await g.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});m=!0,w=S.result.path_display||S.result.path_lower||"/"+r.name,console.log("Upload russi!",S);try{const P=(await g.sharingCreateSharedLinkWithSettings({path:w})).result.url.replace("?dl=0","?raw=1");c(P),t&&t(P)}catch(C){console.error("Erreur lors de la cration du lien partageable:",C),alert("Le fichier a t upload avec succs, mais la cration du lien a chou.")}}catch(S){console.error("Erreur lors de l'upload:",S),S instanceof Error?alert(`Erreur lors de l'upload : ${S.message}
Type: ${S.constructor.name}`):alert(`Erreur lors de l'upload : ${String(S)}`)}if(o(!1),m)return alert(`Fichier "${r.name}" upload avec succs sur Dropbox!`)};return a.jsxs("div",{className:n?"flex items-center":"space-y-3",children:[a.jsx("div",{className:n?"flex-grow mr-2":"mb-2",children:a.jsx("input",{type:"file",onChange:d,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),a.jsx("button",{onClick:f,disabled:!r||i,className:`${n?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:i?"Envoi...":e}),u&&!n&&a.jsx("div",{className:"mt-2 text-sm text-gray-600",children:a.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier upload avec succs"]})})]})}const k5=()=>{const[t]=V_(),e=Nn(),{currentUser:n}=Ct(),{resources:r,addResource:s,updateResource:i,deleteResource:o}=Pi(),u=t.get("new")==="resource",c=t.get("edit"),[d,f]=j.useState(""),[g,m]=j.useState(""),[w,S]=j.useState("post-cps"),[C,P]=j.useState(""),[b,E]=j.useState(""),[T,M]=j.useState("pdf"),D=[...new Set(r.map(v=>v.category))];j.useEffect(()=>{if(c){const v=r.find(k=>k.id===c);v&&(f(v.title),m(v.description),S(v.phase),P(v.category),E(v.fileUrl),M(v.fileType))}else u&&(f(""),m(""),S("post-cps"),P(""),E(""),M("pdf"))},[c,u,r]);const V=v=>{v.preventDefault(),c?(i(c,{title:d,description:g,phase:w,category:C,fileUrl:b,fileType:T}),Pn({type:"Modification",target:"Ressource",targetId:c,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:g,phase:w,category:C,fileUrl:b,fileType:T,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Pn({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},N=()=>{c&&window.confirm("tes-vous sr de vouloir supprimer cette ressource ?")&&(o(c),Pn({type:"Suppression",target:"Ressource",targetId:c,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},y={"post-cps":r.filter(v=>v.phase==="post-cps"),"during-process":r.filter(v=>v.phase==="during-process"),"pre-arrival":r.filter(v=>v.phase==="pre-arrival")},_=v=>{switch(v){case"pdf":case"doc":return a.jsx(yr,{className:"w-5 h-5"});case"image":return a.jsx(T4,{className:"w-5 h-5"});case"link":return a.jsx(uv,{className:"w-5 h-5"});default:return a.jsx(I4,{className:"w-5 h-5"})}};return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:u?"Ajouter une nouvelle ressource":"Modifier la ressource"}),a.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[a.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsx("form",{onSubmit:V,className:"space-y-7",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),a.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:v=>f(v.target.value),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),a.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:g,onChange:v=>m(v.target.value),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),a.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:w,onChange:v=>S(v.target.value),required:!0,children:[a.jsx("option",{value:"post-cps",children:"Post-CPS"}),a.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),a.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),a.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:C,onChange:v=>P(v.target.value),required:!0}),a.jsx("datalist",{id:"categories",children:D.map((v,k)=>a.jsx("option",{value:v},k))})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),a.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:T,onChange:v=>M(v.target.value),required:!0,children:[a.jsxs("optgroup",{label:"Documents",children:[a.jsx("option",{value:"pdf",children:"PDF"}),a.jsx("option",{value:"doc",children:"Word (.doc)"}),a.jsx("option",{value:"docx",children:"Word (.docx)"}),a.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),a.jsxs("optgroup",{label:"Tableurs",children:[a.jsx("option",{value:"xls",children:"Excel (.xls)"}),a.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),a.jsxs("optgroup",{label:"Prsentations",children:[a.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),a.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),a.jsxs("optgroup",{label:"Mdias",children:[a.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),a.jsx("option",{value:"video",children:"Vido (.mp4, etc.)"}),a.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),a.jsxs("optgroup",{label:"Autres",children:[a.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),a.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:T==="link"?"URL du lien":"URL du fichier"}),T!=="link"&&a.jsxs("div",{className:"mt-3 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50/30",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(O4,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajout ci-dessous."}),a.jsx(Vb,{onSuccess:v=>E(v),buttonText:"Uploader le fichier vers Dropbox"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("input",{type:"url",id:"fileUrl",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:v=>E(v.target.value),placeholder:T==="link"?"https://example.com":"https://dropbox.com/s/...",required:!0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:T==="link"?"Entrez l'URL complte du site web externe.":"URL gnre automatiquement aprs upload ou entrez manuellement une URL Dropbox/Google Drive."})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{children:c&&a.jsxs("button",{type:"button",onClick:N,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[a.jsx(Su,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),a.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[a.jsx(uf,{className:"mr-2 h-4 w-4"}),u?"Ajouter":"Enregistrer"]})]})]})]})})})}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),a.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[a.jsx(uv,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(y["post-cps"])&&y["post-cps"].length>0?a.jsx("ul",{className:"space-y-2",children:y["post-cps"].map(v=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===v.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("span",{className:"block text-sm font-medium",children:v.title}),a.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(y["during-process"])&&y["during-process"].length>0?a.jsx("ul",{className:"space-y-2",children:y["during-process"].map(v=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===v.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("span",{className:"block text-sm font-medium",children:v.title}),a.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(y["pre-arrival"])&&y["pre-arrival"].length>0?a.jsx("ul",{className:"space-y-2",children:y["pre-arrival"].map(v=>a.jsx("li",{children:a.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${v.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===v.id?"bg-blue-50 border border-blue-200":""}`,children:[a.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:_(v.fileType)}),a.jsxs("div",{className:"flex-grow",children:[a.jsx("span",{className:"block text-sm font-medium",children:v.title}),a.jsx("span",{className:"block text-xs text-gray-500",children:v.category})]})]})},v.id))}):a.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})})]})},Fb=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[i,o]=j.useState(""),u=c=>{c.preventDefault(),n(i)};return Cu.useEffect(()=>{t||o("")},[t]),t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[a.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:""}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),a.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[a.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:i,onChange:c=>o(c.target.value),disabled:r,autoFocus:!0}),s&&a.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||i==="",children:"Valider"})]})]})}):null},C5=()=>{const[t,e]=j.useState(!1),[n,r]=j.useState(!1),[s,i]=j.useState(null),[o,u]=j.useState(null),[c,d]=j.useState([]),[f,g]=j.useState(!0),[m,w]=j.useState(null),{currentUser:S}=Ct(),C=Nn(),P=async()=>{g(!0),w(null);try{const T=await vn(Fe(ae,"users")),M=[];T.forEach(D=>{M.push(D.data())}),d(M)}catch{w("Erreur lors du chargement des utilisateurs.")}finally{g(!1)}};j.useEffect(()=>{P()},[]);const b=async(T,M)=>{e(!0),u({uid:T,isAdmin:M}),i(null)},E=async T=>{if(!o)return;if(r(!0),i(null),T!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}const M=c.find(D=>D.uid===o.uid);if(M!=null&&M.isSuperAdmin&&M.uid!==(S==null?void 0:S.uid)){i("Impossible de modifier le rle d'un admin principal."),r(!1);return}try{await oi(yt(ae,"users",o.uid),{isAdmin:!o.isAdmin}),d(D=>D.map(V=>V.uid===o.uid?{...V,isAdmin:!o.isAdmin}:V)),e(!1),u(null)}catch{i("Erreur lors de la mise  jour du statut administrateur.")}finally{r(!1)}};return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[a.jsxs("button",{onClick:()=>C("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[a.jsx(Ia,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),a.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),a.jsx("div",{className:"container mx-auto px-4 py-8",children:f?a.jsx("div",{children:"Chargement..."}):m?a.jsx("div",{className:"text-red-600",children:m}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-100",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-2",children:"Nom"}),a.jsx("th",{className:"px-4 py-2",children:"Email"}),a.jsx("th",{className:"px-4 py-2",children:"Admin"}),a.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(T=>a.jsxs("tr",{children:[a.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>C(`/admin/users/${T.uid}`),children:[T.photoURL?a.jsx("img",{src:T.photoURL,alt:T.displayName||T.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):a.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:a.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),T.displayName||T.email,T.isSuperAdmin&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),T.uid===(S==null?void 0:S.uid)&&a.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),a.jsx("td",{className:"px-4 py-2",children:T.email}),a.jsxs("td",{className:"px-4 py-2",children:[T.isAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(ym,{className:"w-4 h-4 mr-1"})," Admin"]}):a.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),T.isSuperAdmin&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),a.jsxs("td",{className:"px-4 py-2",children:[T.uid!==(S==null?void 0:S.uid)&&!T.isSuperAdmin&&a.jsx("button",{onClick:()=>b(T.uid,T.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${T.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:T.isAdmin?a.jsxs(a.Fragment,{children:[a.jsx(Pb,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):a.jsxs(a.Fragment,{children:[a.jsx(Rb,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),T.uid!==(S==null?void 0:S.uid)&&T.isSuperAdmin&&a.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rle d'un admin principal",children:"Impossible de modifier"})]})]},T.uid))})]})})}),a.jsx(Fb,{open:t,onClose:()=>{e(!1),u(null),i(null)},onSubmit:E,loading:n,error:s})]})},j5=()=>{const[t,e]=j.useState(!1),[n,r]=j.useState(!1),[s,i]=j.useState(null),{uid:o}=_I(),u=Nn(),{currentUser:c}=Ct(),[d,f]=j.useState(null),[g,m]=j.useState(!0),[w,S]=j.useState(null),[C,P]=j.useState(!1);j.useEffect(()=>{o&&(async()=>{m(!0),S(null);try{const N=yt(ae,"users",o),y=await cm(N);y.exists()?f(y.data()):S("Utilisateur introuvable.")}catch{S("Erreur lors du chargement du profil utilisateur.")}finally{m(!1)}})()},[o]);const b=async()=>{e(!0),i(null)},E=async V=>{if(d){if(r(!0),i(null),V!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}P(!0);try{await oi(yt(ae,"users",d.uid),{isAdmin:!d.isAdmin}),f({...d,isAdmin:!d.isAdmin}),e(!1)}catch{i("Erreur lors de la mise  jour du statut administrateur.")}finally{P(!1),r(!1)}}},T=async()=>{if(d){if(d.uid===(c==null?void 0:c.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}if(window.confirm("tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.")){P(!0);try{await Rl(yt(ae,"users",d.uid)),u("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{P(!1)}}}},M=V=>{d&&f({...d,[V.target.name]:V.target.value})},D=async()=>{if(d){P(!0);try{await oi(yt(ae,"users",d.uid),{displayName:d.displayName,photoURL:d.photoURL}),alert("Profil mis  jour !")}catch{alert("Erreur lors de la mise  jour du profil.")}finally{P(!1)}}};return g?a.jsx("div",{className:"p-8",children:"Chargement..."}):w?a.jsx("div",{className:"p-8 text-red-600",children:w}):d?a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[a.jsxs("button",{onClick:()=>u("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[a.jsx(Ia,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),a.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),a.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[a.jsx("div",{className:"relative mb-6",children:d.photoURL?a.jsx("img",{src:d.photoURL,alt:d.displayName||d.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):a.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:a.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),a.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(d==null?void 0:d.displayName)||"",onChange:M,disabled:C||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid)}),(d==null?void 0:d.isSuperAdmin)&&a.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),a.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(d==null?void 0:d.photoURL)||"",onChange:M,disabled:C}),a.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",d.email]}),a.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:"Vrifi :"})," ",d.emailVerified?"Oui":"Non"]}),a.jsxs("div",{className:"mb-6 w-full text-center",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",d.isAdmin?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[a.jsx(ym,{className:"w-5 h-5 mr-1"})," Admin"]}):a.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[d.uid!==(c==null?void 0:c.uid)&&a.jsx("button",{onClick:b,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${d.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:C||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),children:d.isAdmin?a.jsxs(a.Fragment,{children:[a.jsx(Pb,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):a.jsxs(a.Fragment,{children:[a.jsx(Rb,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),d.uid!==(c==null?void 0:c.uid)&&a.jsxs("button",{onClick:T,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:C||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),children:[a.jsx(Su,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),a.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:D,disabled:C||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),title:d!=null&&d.isSuperAdmin&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),a.jsx(Fb,{open:t,onClose:()=>{e(!1),i(null)},onSubmit:E,loading:n,error:s})]}):null},P5=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(""),[o,u]=j.useState("all"),[c,d]=j.useState("all"),[f,g]=j.useState("all"),[m,w]=j.useState(!1),[S,C]=j.useState(null),[P,b]=j.useState(!0),E=20,T=y=>{const _=new Date(y);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(_)},M=()=>{const y=new Date;let _=null;switch(f){case"today":_=new Date(y.setHours(0,0,0,0));break;case"week":_=new Date,_.setDate(y.getDate()-7);break;case"month":_=new Date,_.setMonth(y.getMonth()-1);break;default:_=null}return _},D=async(y=!0)=>{try{y?(r(!0),C(null)):w(!0);let _=ho(Fe(ae,"adminActivityLog"),nb("date","desc"));const v=M();v&&(_=ho(_,BP("date",">=",v.toISOString()))),_=ho(_,af(E));const k=await vn(_);b(k.docs.length===E),k.docs.length>0?C(k.docs[k.docs.length-1]):(C(null),b(!1));let A=k.docs.map(ue=>({id:ue.id,...ue.data()}));if(o!=="all"&&(A=A.filter(ue=>ue.type===o)),c!=="all"&&(A=A.filter(ue=>ue.target===c)),s){const ue=s.toLowerCase();A=A.filter(Ve=>{var bt;return((bt=Ve.user)==null?void 0:bt.toLowerCase().includes(ue))||Ve.target.toLowerCase().includes(ue)||Ve.type.toLowerCase().includes(ue)||Ve.details&&JSON.stringify(Ve.details).toLowerCase().includes(ue)})}e(y?A:ue=>[...ue,...A])}catch(_){console.error("Error fetching activities:",_)}finally{r(!1),w(!1)}};j.useEffect(()=>{D()},[]),j.useEffect(()=>{D()},[o,c,f]);const V=y=>{let _="bg-blue-100 text-blue-800";switch(y.toLowerCase()){case"ajout":_="bg-green-100 text-green-800";break;case"suppression":_="bg-red-100 text-red-800";break;case"modification":_="bg-yellow-100 text-yellow-800";break}return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_}`,children:y})},N=y=>{let _="bg-gray-100 text-gray-800";switch(y.toLowerCase()){case"ressource":_="bg-purple-100 text-purple-800";break;case"section":_="bg-indigo-100 text-indigo-800";break;case"faq":_="bg-blue-100 text-blue-800";break;case"utilisateur":_="bg-pink-100 text-pink-800";break}return a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_}`,children:y})};return a.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(J,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:a.jsx(Ia,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activit"}),a.jsx("p",{className:"text-blue-100",children:"Historique dtaill des activits administratives"})]})]})})}),a.jsxs("div",{className:"container mx-auto px-4 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Iu,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activits...",value:s,onChange:y=>i(y.target.value)})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:o,onChange:y=>u(y.target.value),children:[a.jsx("option",{value:"all",children:"Toutes les actions"}),a.jsx("option",{value:"Ajout",children:"Ajout"}),a.jsx("option",{value:"Modification",children:"Modification"}),a.jsx("option",{value:"Suppression",children:"Suppression"})]})}),a.jsx("div",{className:"relative flex-1",children:a.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:c,onChange:y=>d(y.target.value),children:[a.jsx("option",{value:"all",children:"Toutes les cibles"}),a.jsx("option",{value:"Ressource",children:"Ressources"}),a.jsx("option",{value:"Section",children:"Sections"}),a.jsx("option",{value:"FAQ",children:"FAQ"}),a.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("div",{className:"relative flex-1",children:a.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:y=>g(y.target.value),children:[a.jsx("option",{value:"all",children:"Toute priode"}),a.jsx("option",{value:"today",children:"Aujourd'hui"}),a.jsx("option",{value:"week",children:"7 derniers jours"}),a.jsx("option",{value:"month",children:"30 derniers jours"})]})}),a.jsx("button",{onClick:()=>D(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a.jsx(L4,{className:"h-5 w-5"})})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activits rcentes"})}),n?a.jsx("div",{className:"p-8 flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?a.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activit  afficher. Ajustez les filtres ou effectuez des actions administratives."}):a.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>a.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[a.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[V(y.type),a.jsx("span",{className:"mx-2",children:""}),N(y.target)]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(b4,{className:"h-4 w-4 mr-1"}),a.jsx("span",{children:T(y.date)})]})]}),a.jsx("div",{className:"flex items-start",children:y.user&&a.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[a.jsx(cf,{className:"h-4 w-4 mr-1"}),a.jsx("span",{children:y.user})]})}),y.details&&a.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[a.jsx("h4",{className:"font-medium mb-1",children:"Dtails"}),a.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(y.details).map(([_,v])=>a.jsxs("div",{className:"flex",children:[a.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[_,":"]}),a.jsx("dd",{className:"text-gray-900",children:typeof v=="object"?JSON.stringify(v):String(v)})]},_))})]}),y.targetId&&a.jsxs("div",{className:"mt-1 text-sm",children:[a.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",y.targetId]})]},y.id))}),P&&!n&&a.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:a.jsx("button",{onClick:()=>D(!1),disabled:m,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:m?a.jsxs("span",{className:"flex items-center",children:[a.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activits"})})]})]})]})},R5=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(null),[s,i]=j.useState(!0),[o,u]=j.useState(""),[c,d]=j.useState("test1234"),f=async()=>{try{(await vn(Fe(ae,"test"))).empty?(await Dn(Fe(ae,"test"),{message:"Connexion  Firestore russie!",timestamp:new Date().toISOString()}),e("Document cr avec succs!")):e("Connexion  Firestore russie!")}catch(m){const w=m;console.error("Erreur Firestore:",w),e(`Erreur Firestore: ${w.message}`)}},g=async()=>{try{const m=await bw(ut,o,c);r(m.user),await $h(ut,o,c),e(w=>w+`
Authentification russie!`)}catch(m){const w=m;if(w.code==="auth/email-already-in-use"){const S=await $h(ut,o,c);r(S.user),e(C=>C+`
Connexion russie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",m),e(S=>S+`
Erreur d'authentification: ${w.message}`)}};return j.useEffect(()=>{const m=ut.onAuthStateChanged(w=>{r(w),w&&u(w.email||""),i(!1)});return()=>m()},[]),s?a.jsx("div",{className:"p-4",children:"Chargement..."}):a.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intgration Firebase"}),a.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),a.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connect"]}),a.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),a.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),a.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Dn(Fe(ae,"guideSections"),{title:"Prparer son dossier Campus France",content:"Voici comment prparer...",phase:"pre-cps",order:1}),await Dn(Fe(ae,"guideSections"),{title:"Demander son visa",content:"Procdure dtaille...",phase:"post-cps",order:2}),await Dn(Fe(ae,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Dn(Fe(ae,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrive",createdAt:new Date().toISOString()}),e("Base initialise avec succs !")}catch(m){e("Erreur lors de l'initialisation : "+m.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block mb-2",children:"Email:"}),a.jsx("input",{type:"email",value:o,onChange:m=>u(m.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),a.jsx("input",{type:"password",value:c,onChange:m=>d(m.target.value),className:"border p-2 w-full max-w-md"})]}),a.jsx("button",{onClick:g,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!o||!c,children:n?"Se connecter":"Crer un compte"})]}),a.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Rsultats des tests"}),a.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectu"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Upload Dropbox"}),a.jsx(Vb,{})]})]})},D5=()=>a.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:a.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),a.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouve"}),a.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a t dplace."}),a.jsxs(J,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[a.jsx(k4,{className:"mr-2 h-5 w-5"}),"Retour  l'accueil"]})]})}),L5=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:i})=>{const[o,u]=j.useState(""),c=d=>{d.preventDefault(),n(o)};return Cu.useEffect(()=>{t||u("")},[t]),t?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[a.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:""}),a.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:i||"Confirmez avec votre mot de passe"}),a.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[a.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:o,onChange:d=>u(d.target.value),disabled:r,autoFocus:!0}),s&&a.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||o==="",children:"Valider"})]})]})}):null},M5=()=>{var tt,$;const[t,e]=j.useState(!1),[n,r]=j.useState(!1),[s,i]=j.useState(null),[o,u]=j.useState(null),[c,d]=j.useState(null),[f,g]=j.useState(""),{currentUser:m}=Ct(),[w,S]=j.useState((m==null?void 0:m.displayName)||""),[C,P]=j.useState((m==null?void 0:m.photoURL)||""),[b]=j.useState((m==null?void 0:m.email)||""),[E,T]=j.useState(""),[M,D]=j.useState(!1),[V,N]=j.useState(null),[y,_]=j.useState(null),[v,k]=j.useState(null);if(!m)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:a.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez tre connect pour accder  votre profil."})})});const R=ut.currentUser,A=R==null?void 0:R.providerData.some(G=>G.providerId==="password"),ue=async G=>{if(G.preventDefault(),N(null),_(null),!A){k("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:w,photoURL:C}),u("profile"),e(!0)},Ve=async G=>{if(G.preventDefault(),N(null),_(null),!A){k("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}g(E),u("password"),e(!0)},bt=async G=>{const Y=ut.currentUser;if(!Y)return;r(!0),i(null);const ce=Ts.credential(Y.email||"",G);try{await bA(Y,ce),o==="profile"&&c?(await Ew(Y,{displayName:c.displayName,photoURL:c.photoURL}),S(c.displayName),P(c.photoURL),_("Profil mis  jour !")):o==="password"&&f&&(await TA(Y,f),T(""),_("Mot de passe mis  jour !")),e(!1),u(null),d(null),g("")}catch{i("Mot de passe incorrect.")}finally{r(!1),D(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:a.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[a.jsxs("div",{className:"relative mb-5",children:[C?a.jsx("img",{src:C,alt:w||b,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):a.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((tt=w==null?void 0:w.charAt(0))==null?void 0:tt.toUpperCase())||(($=b==null?void 0:b.charAt(0))==null?void 0:$.toUpperCase())}),(m==null?void 0:m.emailVerified)&&a.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vrifi"}),(m==null?void 0:m.isAdmin)&&a.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[a.jsx(ym,{className:"w-4 h-4"})," Admin"]})]}),a.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:w||b}),a.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:b}),a.jsxs("form",{onSubmit:ue,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affich"}),a.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:G=>S(G.target.value),placeholder:"Nom affich",disabled:M})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),a.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:C,onChange:G=>P(G.target.value),placeholder:"URL de la photo",disabled:M})]})]}),a.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:M,children:"Sauvegarder le profil"})]}),a.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),A?a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:Ve,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[a.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),a.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:E,onChange:G=>T(G.target.value),placeholder:"Nouveau mot de passe (min. 6 caractres)",disabled:M}),a.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:M||E.length<6,children:"Mettre  jour le mot de passe"})]}),a.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),_(null);try{await Bh(ut,b),_("Un email de rinitialisation a t envoy  votre adresse.")}catch{N("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}):a.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[a.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez cr votre compte avec Google. Vous ne pouvez pas dfinir ou changer de mot de passe ici."}),a.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),_(null);try{await Bh(ut,b),_("Un email de rinitialisation a t envoy  votre adresse.")}catch{N("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}),(V||y)&&a.jsx("div",{className:`mt-6 text-center text-sm font-medium ${V?"text-red-600":"text-green-600"}`,children:V||y}),v&&a.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:v}),a.jsx(L5,{open:t,onClose:()=>{e(!1),i(null),u(null)},onSubmit:bt,loading:n,error:s,label:o==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},O5=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,u]=j.useState(!1),c=Nn(),d=async f=>{f.preventDefault(),i(""),r(""),u(!0);try{await Bh(ut,t),r("Un email de rinitialisation a t envoy.")}catch{i("Erreur lors de l'envoi de l'email. Vrifiez l'adresse saisie.")}finally{u(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:a.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Rinitialiser le mot de passe"})]}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),a.jsxs("form",{className:"space-y-6",onSubmit:d,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Envoi en cours...":"Envoyer le lien de rinitialisation"})})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx("button",{onClick:()=>c("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour  la connexion"})})]})})]})};function V5(){return a.jsx(m4,{children:a.jsx(g4,{children:a.jsx(BI,{basename:"/Esig-prep-guide",children:a.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[a.jsx(U4,{}),a.jsx("main",{className:"flex-grow",children:a.jsxs(LI,{children:[a.jsx(Ge,{path:"/",element:a.jsx(z4,{})}),a.jsx(Ge,{path:"/login",element:a.jsx(B4,{})}),a.jsx(Ge,{path:"/register",element:a.jsx($4,{})}),a.jsx(Ge,{path:"/reset-password",element:a.jsx(O5,{})}),a.jsx(Ge,{path:"/test-firebase",element:a.jsx(R5,{})}),a.jsx(Ge,{path:"/dashboard",element:a.jsx(ul,{children:a.jsx(H4,{})})}),a.jsx(Ge,{path:"/resources",element:a.jsx(ul,{children:a.jsx(W4,{})})}),a.jsx(Ge,{path:"/faq",element:a.jsx(ul,{children:a.jsx(G4,{})})}),a.jsx(Ge,{path:"/profile",element:a.jsx(ul,{children:a.jsx(M5,{})})}),a.jsx(Ge,{path:"/admin",element:a.jsx(Rs,{children:a.jsx(Y4,{})})}),a.jsx(Ge,{path:"/admin/content",element:a.jsx(Rs,{children:a.jsx(J4,{})})}),a.jsx(Ge,{path:"/admin/resources",element:a.jsx(Rs,{children:a.jsx(k5,{})})}),a.jsx(Ge,{path:"/admin/users",element:a.jsx(Rs,{children:a.jsx(C5,{})})}),a.jsx(Ge,{path:"/admin/users/:uid",element:a.jsx(Rs,{children:a.jsx(j5,{})})}),a.jsx(Ge,{path:"/admin/activity",element:a.jsx(Rs,{children:a.jsx(P5,{})})}),a.jsx(Ge,{path:"*",element:a.jsx(D5,{})})]})}),a.jsx(q4,{})]})})})})}A_(document.getElementById("root")).render(a.jsx(j.StrictMode,{children:a.jsx(V5,{})}))});export default F5();
