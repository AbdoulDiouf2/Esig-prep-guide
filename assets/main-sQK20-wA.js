var A2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var b3=A2((S3,t2)=>{function C2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function P2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ty={exports:{}},Oc={},Sy={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pa=Symbol.for("react.element"),R2=Symbol.for("react.portal"),D2=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),M2=Symbol.for("react.profiler"),V2=Symbol.for("react.provider"),O2=Symbol.for("react.context"),F2=Symbol.for("react.forward_ref"),q2=Symbol.for("react.suspense"),U2=Symbol.for("react.memo"),z2=Symbol.for("react.lazy"),Tg=Symbol.iterator;function B2(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var Iy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ky=Object.assign,Ay={};function Ai(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||Iy}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Cy(){}Cy.prototype=Ai.prototype;function wf(t,e,n){this.props=t,this.context=e,this.refs=Ay,this.updater=n||Iy}var _f=wf.prototype=new Cy;_f.constructor=wf;ky(_f,Ai.prototype);_f.isPureReactComponent=!0;var Sg=Array.isArray,Py=Object.prototype.hasOwnProperty,jf={current:null},Ry={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Py.call(e,r)&&!Ry.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:pa,type:t,key:o,ref:a,props:s,_owner:jf.current}}function $2(t,e){return{$$typeof:pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nf(t){return typeof t=="object"&&t!==null&&t.$$typeof===pa}function G2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ig=/\/+/g;function Hu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G2(""+t.key):e.toString(36)}function wl(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case pa:case R2:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Hu(a,0):r,Sg(s)?(n="",t!=null&&(n=t.replace(Ig,"$&/")+"/"),wl(s,e,n,"",function(d){return d})):s!=null&&(Nf(s)&&(s=$2(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ig,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Sg(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+Hu(o,c);a+=wl(o,e,n,u,s)}else if(u=B2(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+Hu(o,c++),a+=wl(o,e,n,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ya(t,e,n){if(t==null)return t;var r=[],s=0;return wl(t,r,"","",function(o){return e.call(n,o,s++)}),r}function H2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},_l={transition:null},W2={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:_l,ReactCurrentOwner:jf};function Ly(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Ya,forEach:function(t,e,n){Ya(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ya(t,function(){e++}),e},toArray:function(t){return Ya(t,function(e){return e})||[]},only:function(t){if(!Nf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=Ai;se.Fragment=D2;se.Profiler=M2;se.PureComponent=wf;se.StrictMode=L2;se.Suspense=q2;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W2;se.act=Ly;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ky({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=jf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Py.call(e,u)&&!Ry.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:pa,type:t.type,key:s,ref:o,props:r,_owner:a}};se.createContext=function(t){return t={$$typeof:O2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V2,_context:t},t.Consumer=t};se.createElement=Dy;se.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:F2,render:t}};se.isValidElement=Nf;se.lazy=function(t){return{$$typeof:z2,_payload:{_status:-1,_result:t},_init:H2}};se.memo=function(t,e){return{$$typeof:U2,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=_l.transition;_l.transition={};try{t()}finally{_l.transition=e}};se.unstable_act=Ly;se.useCallback=function(t,e){return _t.current.useCallback(t,e)};se.useContext=function(t){return _t.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};se.useEffect=function(t,e){return _t.current.useEffect(t,e)};se.useId=function(){return _t.current.useId()};se.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return _t.current.useMemo(t,e)};se.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};se.useRef=function(t){return _t.current.useRef(t)};se.useState=function(t){return _t.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return _t.current.useTransition()};se.version="18.3.1";Sy.exports=se;var A=Sy.exports;const Fc=P2(A),Q2=C2({__proto__:null,default:Fc},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2=A,Y2=Symbol.for("react.element"),J2=Symbol.for("react.fragment"),X2=Object.prototype.hasOwnProperty,Z2=K2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ej={key:!0,ref:!0,__self:!0,__source:!0};function My(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)X2.call(e,r)&&!ej.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Y2,type:t,key:o,ref:a,props:s,_owner:Z2.current}}Oc.Fragment=J2;Oc.jsx=My;Oc.jsxs=My;Ty.exports=Oc;var i=Ty.exports,Vy={exports:{}},zt={},Oy={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var Z=B.length;B.push(H);e:for(;0<Z;){var he=Z-1>>>1,ge=B[he];if(0<s(ge,H))B[he]=H,B[Z]=ge,Z=he;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],Z=B.pop();if(Z!==H){B[0]=Z;e:for(var he=0,ge=B.length,we=ge>>>1;he<we;){var Nt=2*(he+1)-1,nn=B[Nt],rn=Nt+1,sn=B[rn];if(0>s(nn,Z))rn<ge&&0>s(sn,nn)?(B[he]=sn,B[rn]=Z,he=rn):(B[he]=nn,B[Nt]=Z,he=Nt);else if(rn<ge&&0>s(sn,Z))B[he]=sn,B[rn]=Z,he=rn;else break e}}return H}function s(B,H){var Z=B.sortIndex-H.sortIndex;return Z!==0?Z:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,f=null,g=3,w=!1,S=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=B)r(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(d)}}function L(B){if(C=!1,E(B),!S)if(n(u)!==null)S=!0,Ge(D);else{var H=n(d);H!==null&&G(L,H.startTime-B)}}function D(B,H){S=!1,C&&(C=!1,j(x),x=-1),w=!0;var Z=g;try{for(E(H),f=n(u);f!==null&&(!(f.expirationTime>H)||B&&!k());){var he=f.callback;if(typeof he=="function"){f.callback=null,g=f.priorityLevel;var ge=he(f.expirationTime<=H);H=t.unstable_now(),typeof ge=="function"?f.callback=ge:f===n(u)&&r(u),E(H)}else r(u);f=n(u)}if(f!==null)var we=!0;else{var Nt=n(d);Nt!==null&&G(L,Nt.startTime-H),we=!1}return we}finally{f=null,g=Z,w=!1}}var V=!1,N=null,x=-1,y=5,v=-1;function k(){return!(t.unstable_now()-v<y)}function P(){if(N!==null){var B=t.unstable_now();v=B;var H=!0;try{H=N(!0,B)}finally{H?I():(V=!1,N=null)}}else V=!1}var I;if(typeof _=="function")I=function(){_(P)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,pe=le.port2;le.port1.onmessage=P,I=function(){pe.postMessage(null)}}else I=function(){R(P,0)};function Ge(B){N=B,V||(V=!0,I())}function G(B,H){x=R(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,Ge(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var H=3;break;default:H=g}var Z=g;g=H;try{return B()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=g;g=B;try{return H()}finally{g=Z}},t.unstable_scheduleCallback=function(B,H,Z){var he=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?he+Z:he):Z=he,B){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=Z+ge,B={id:m++,callback:H,priorityLevel:B,startTime:Z,expirationTime:ge,sortIndex:-1},Z>he?(B.sortIndex=Z,e(d,B),n(u)===null&&B===n(d)&&(C?(j(x),x=-1):C=!0,G(L,Z-he))):(B.sortIndex=ge,e(u,B),S||w||(S=!0,Ge(D))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var H=g;return function(){var Z=g;g=H;try{return B.apply(this,arguments)}finally{g=Z}}}})(Fy);Oy.exports=Fy;var tj=Oy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nj=A,qt=tj;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qy=new Set,Vo={};function Ss(t,e){gi(t,e),gi(t+"Capture",e)}function gi(t,e){for(Vo[t]=e,t=0;t<e.length;t++)qy.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=Object.prototype.hasOwnProperty,rj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kg={},Ag={};function sj(t){return Hd.call(Ag,t)?!0:Hd.call(kg,t)?!1:rj.test(t)?Ag[t]=!0:(kg[t]=!0,!1)}function ij(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oj(t,e,n,r){if(e===null||typeof e>"u"||ij(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function jt(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ef=/[\-:]([a-z])/g;function Tf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ef,Tf);tt[e]=new jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ef,Tf);tt[e]=new jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ef,Tf);tt[e]=new jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new jt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Sf(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oj(e,n,s,r)&&(n=null),r||s===null?sj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rr=nj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ja=Symbol.for("react.element"),Hs=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),If=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),zy=Symbol.for("react.context"),kf=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Kd=Symbol.for("react.suspense_list"),Af=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),By=Symbol.for("react.offscreen"),Cg=Symbol.iterator;function to(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Wu;function uo(t){if(Wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Wu=e&&e[1]||""}return`
`+Wu+t}var Qu=!1;function Ku(t,e){if(!t||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,c=o.length-1;1<=a&&0<=c&&s[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==o[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uo(t):""}function aj(t){switch(t.tag){case 5:return uo(t.type);case 16:return uo("Lazy");case 13:return uo("Suspense");case 19:return uo("SuspenseList");case 0:case 2:case 15:return t=Ku(t.type,!1),t;case 11:return t=Ku(t.type.render,!1),t;case 1:return t=Ku(t.type,!0),t;default:return""}}function Yd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case Hs:return"Portal";case Wd:return"Profiler";case If:return"StrictMode";case Qd:return"Suspense";case Kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zy:return(t.displayName||"Context")+".Consumer";case Uy:return(t._context.displayName||"Context")+".Provider";case kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Af:return e=t.displayName||null,e!==null?e:Yd(t.type)||"Memo";case fr:e=t._payload,t=t._init;try{return Yd(t(e))}catch{}}return null}function lj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(e);case 8:return e===If?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function $y(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cj(t){var e=$y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xa(t){t._valueTracker||(t._valueTracker=cj(t))}function Gy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=$y(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Hy(t,e){e=e.checked,e!=null&&Sf(t,"checked",e,!1)}function Xd(t,e){Hy(t,e);var n=Vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zd(t,e.type,Vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zd(t,e,n){(e!=="number"||Gl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ho=Array.isArray;function si(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function eh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(ho(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vr(n)}}function Wy(t,e){var n=Vr(e.value),r=Vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Qy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Qy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Za,Ky=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Za=Za||document.createElement("div"),Za.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Za.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Oo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var _o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uj=["Webkit","ms","Moz","O"];Object.keys(_o).forEach(function(t){uj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),_o[e]=_o[t]})});function Yy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||_o.hasOwnProperty(t)&&_o[t]?(""+e).trim():e+"px"}function Jy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Yy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var dj=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nh(t,e){if(e){if(dj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=null;function Cf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ih=null,ii=null,oi=null;function Mg(t){if(t=ya(t)){if(typeof ih!="function")throw Error(z(280));var e=t.stateNode;e&&(e=$c(e),ih(t.stateNode,t.type,e))}}function Xy(t){ii?oi?oi.push(t):oi=[t]:ii=t}function Zy(){if(ii){var t=ii,e=oi;if(oi=ii=null,Mg(t),e)for(t=0;t<e.length;t++)Mg(e[t])}}function ev(t,e){return t(e)}function tv(){}var Yu=!1;function nv(t,e,n){if(Yu)return t(e,n);Yu=!0;try{return ev(t,e,n)}finally{Yu=!1,(ii!==null||oi!==null)&&(tv(),Zy())}}function Fo(t,e){var n=t.stateNode;if(n===null)return null;var r=$c(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var oh=!1;if(Kn)try{var no={};Object.defineProperty(no,"passive",{get:function(){oh=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{oh=!1}function hj(t,e,n,r,s,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var jo=!1,Hl=null,Wl=!1,ah=null,fj={onError:function(t){jo=!0,Hl=t}};function mj(t,e,n,r,s,o,a,c,u){jo=!1,Hl=null,hj.apply(fj,arguments)}function pj(t,e,n,r,s,o,a,c,u){if(mj.apply(this,arguments),jo){if(jo){var d=Hl;jo=!1,Hl=null}else throw Error(z(198));Wl||(Wl=!0,ah=d)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(Is(t)!==t)throw Error(z(188))}function gj(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Vg(s),t;if(o===r)return Vg(s),e;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function sv(t){return t=gj(t),t!==null?iv(t):null}function iv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iv(t);if(e!==null)return e;t=t.sibling}return null}var ov=qt.unstable_scheduleCallback,Og=qt.unstable_cancelCallback,xj=qt.unstable_shouldYield,yj=qt.unstable_requestPaint,Me=qt.unstable_now,vj=qt.unstable_getCurrentPriorityLevel,Pf=qt.unstable_ImmediatePriority,av=qt.unstable_UserBlockingPriority,Ql=qt.unstable_NormalPriority,bj=qt.unstable_LowPriority,lv=qt.unstable_IdlePriority,qc=null,Tn=null;function wj(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(qc,t,void 0,(t.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:Nj,_j=Math.log,jj=Math.LN2;function Nj(t){return t>>>=0,t===0?32:31-(_j(t)/jj|0)|0}var el=64,tl=4194304;function fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=fo(c):(o&=a,o!==0&&(r=fo(o)))}else a=n&~s,a!==0?r=fo(a):o!==0&&(r=fo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-hn(e),s=1<<n,r|=t[n],e&=~s;return r}function Ej(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-hn(o),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=Ej(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cv(){var t=el;return el<<=1,!(el&4194240)&&(el=64),t}function Ju(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ga(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-hn(e),t[e]=n}function Sj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-hn(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function Rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-hn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function uv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dv,Df,hv,fv,mv,ch=!1,nl=[],Er=null,Tr=null,Sr=null,qo=new Map,Uo=new Map,pr=[],Ij="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":qo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uo.delete(e.pointerId)}}function ro(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=ya(e),e!==null&&Df(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function kj(t,e,n,r,s){switch(e){case"focusin":return Er=ro(Er,t,e,n,r,s),!0;case"dragenter":return Tr=ro(Tr,t,e,n,r,s),!0;case"mouseover":return Sr=ro(Sr,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return qo.set(o,ro(qo.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Uo.set(o,ro(Uo.get(o)||null,t,e,n,r,s)),!0}return!1}function pv(t){var e=ss(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=rv(n),e!==null){t.blockedOn=e,mv(t.priority,function(){hv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sh=r,n.target.dispatchEvent(r),sh=null}else return e=ya(n),e!==null&&Df(e),t.blockedOn=n,!1;e.shift()}return!0}function qg(t,e,n){jl(t)&&n.delete(e)}function Aj(){ch=!1,Er!==null&&jl(Er)&&(Er=null),Tr!==null&&jl(Tr)&&(Tr=null),Sr!==null&&jl(Sr)&&(Sr=null),qo.forEach(qg),Uo.forEach(qg)}function so(t,e){t.blockedOn===e&&(t.blockedOn=null,ch||(ch=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Aj)))}function zo(t){function e(s){return so(s,t)}if(0<nl.length){so(nl[0],t);for(var n=1;n<nl.length;n++){var r=nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Er!==null&&so(Er,t),Tr!==null&&so(Tr,t),Sr!==null&&so(Sr,t),qo.forEach(e),Uo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)pv(n),n.blockedOn===null&&pr.shift()}var ai=rr.ReactCurrentBatchConfig,Yl=!0;function Cj(t,e,n,r){var s=xe,o=ai.transition;ai.transition=null;try{xe=1,Lf(t,e,n,r)}finally{xe=s,ai.transition=o}}function Pj(t,e,n,r){var s=xe,o=ai.transition;ai.transition=null;try{xe=4,Lf(t,e,n,r)}finally{xe=s,ai.transition=o}}function Lf(t,e,n,r){if(Yl){var s=uh(t,e,n,r);if(s===null)ad(t,e,r,Jl,n),Fg(t,r);else if(kj(s,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<Ij.indexOf(t)){for(;s!==null;){var o=ya(s);if(o!==null&&dv(o),o=uh(t,e,n,r),o===null&&ad(t,e,r,Jl,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else ad(t,e,r,null,n)}}var Jl=null;function uh(t,e,n,r){if(Jl=null,t=Cf(r),t=ss(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function gv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vj()){case Pf:return 1;case av:return 4;case Ql:case bj:return 16;case lv:return 536870912;default:return 16}default:return 16}}var br=null,Mf=null,Nl=null;function xv(){if(Nl)return Nl;var t,e=Mf,n=e.length,r,s="value"in br?br.value:br.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return Nl=s.slice(t,1<r?1-r:void 0)}function El(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rl(){return!0}function Ug(){return!1}function Bt(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rl:Ug,this.isPropagationStopped=Ug,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rl)},persist:function(){},isPersistent:rl}),e}var Ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=Bt(Ci),xa=Ce({},Ci,{view:0,detail:0}),Rj=Bt(xa),Xu,Zu,io,Uc=Ce({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==io&&(io&&t.type==="mousemove"?(Xu=t.screenX-io.screenX,Zu=t.screenY-io.screenY):Zu=Xu=0,io=t),Xu)},movementY:function(t){return"movementY"in t?t.movementY:Zu}}),zg=Bt(Uc),Dj=Ce({},Uc,{dataTransfer:0}),Lj=Bt(Dj),Mj=Ce({},xa,{relatedTarget:0}),ed=Bt(Mj),Vj=Ce({},Ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Oj=Bt(Vj),Fj=Ce({},Ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qj=Bt(Fj),Uj=Ce({},Ci,{data:0}),Bg=Bt(Uj),zj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$j={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$j[t])?!!e[t]:!1}function Of(){return Gj}var Hj=Ce({},xa,{key:function(t){if(t.key){var e=zj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=El(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(t){return t.type==="keypress"?El(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?El(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wj=Bt(Hj),Qj=Ce({},Uc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$g=Bt(Qj),Kj=Ce({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),Yj=Bt(Kj),Jj=Ce({},Ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xj=Bt(Jj),Zj=Ce({},Uc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eN=Bt(Zj),tN=[9,13,27,32],Ff=Kn&&"CompositionEvent"in window,No=null;Kn&&"documentMode"in document&&(No=document.documentMode);var nN=Kn&&"TextEvent"in window&&!No,yv=Kn&&(!Ff||No&&8<No&&11>=No),Gg=" ",Hg=!1;function vv(t,e){switch(t){case"keyup":return tN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function rN(t,e){switch(t){case"compositionend":return bv(e);case"keypress":return e.which!==32?null:(Hg=!0,Gg);case"textInput":return t=e.data,t===Gg&&Hg?null:t;default:return null}}function sN(t,e){if(Qs)return t==="compositionend"||!Ff&&vv(t,e)?(t=xv(),Nl=Mf=br=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yv&&e.locale!=="ko"?null:e.data;default:return null}}var iN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iN[t.type]:e==="textarea"}function wv(t,e,n,r){Xy(r),e=Xl(e,"onChange"),0<e.length&&(n=new Vf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Eo=null,Bo=null;function oN(t){Pv(t,0)}function zc(t){var e=Js(t);if(Gy(e))return t}function aN(t,e){if(t==="change")return e}var _v=!1;if(Kn){var td;if(Kn){var nd="oninput"in document;if(!nd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),nd=typeof Qg.oninput=="function"}td=nd}else td=!1;_v=td&&(!document.documentMode||9<document.documentMode)}function Kg(){Eo&&(Eo.detachEvent("onpropertychange",jv),Bo=Eo=null)}function jv(t){if(t.propertyName==="value"&&zc(Bo)){var e=[];wv(e,Bo,t,Cf(t)),nv(oN,e)}}function lN(t,e,n){t==="focusin"?(Kg(),Eo=e,Bo=n,Eo.attachEvent("onpropertychange",jv)):t==="focusout"&&Kg()}function cN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return zc(Bo)}function uN(t,e){if(t==="click")return zc(e)}function dN(t,e){if(t==="input"||t==="change")return zc(e)}function hN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:hN;function $o(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hd.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function Nv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ev(){for(var t=window,e=Gl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gl(t.document)}return e}function qf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fN(t){var e=Ev(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nv(n.ownerDocument.documentElement,n)){if(r!==null&&qf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=Jg(n,o);var a=Jg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mN=Kn&&"documentMode"in document&&11>=document.documentMode,Ks=null,dh=null,To=null,hh=!1;function Xg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hh||Ks==null||Ks!==Gl(r)||(r=Ks,"selectionStart"in r&&qf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),To&&$o(To,r)||(To=r,r=Xl(dh,"onSelect"),0<r.length&&(e=new Vf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ks)))}function sl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ys={animationend:sl("Animation","AnimationEnd"),animationiteration:sl("Animation","AnimationIteration"),animationstart:sl("Animation","AnimationStart"),transitionend:sl("Transition","TransitionEnd")},rd={},Tv={};Kn&&(Tv=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Bc(t){if(rd[t])return rd[t];if(!Ys[t])return t;var e=Ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tv)return rd[t]=e[n];return t}var Sv=Bc("animationend"),Iv=Bc("animationiteration"),kv=Bc("animationstart"),Av=Bc("transitionend"),Cv=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Cv.set(t,e),Ss(e,[t])}for(var sd=0;sd<Zg.length;sd++){var id=Zg[sd],pN=id.toLowerCase(),gN=id[0].toUpperCase()+id.slice(1);zr(pN,"on"+gN)}zr(Sv,"onAnimationEnd");zr(Iv,"onAnimationIteration");zr(kv,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(Av,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xN=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function e0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,pj(r,e,void 0,t),t.currentTarget=null}function Pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&s.isPropagationStopped())break e;e0(s,c,d),o=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&s.isPropagationStopped())break e;e0(s,c,d),o=u}}}if(Wl)throw t=ah,Wl=!1,ah=null,t}function je(t,e){var n=e[xh];n===void 0&&(n=e[xh]=new Set);var r=t+"__bubble";n.has(r)||(Rv(e,t,2,!1),n.add(r))}function od(t,e,n){var r=0;e&&(r|=4),Rv(n,t,r,e)}var il="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[il]){t[il]=!0,qy.forEach(function(n){n!=="selectionchange"&&(xN.has(n)||od(n,!1,t),od(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[il]||(e[il]=!0,od("selectionchange",!1,e))}}function Rv(t,e,n,r){switch(gv(e)){case 1:var s=Cj;break;case 4:s=Pj;break;default:s=Lf}n=s.bind(null,e,n,t),s=void 0,!oh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ad(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=ss(c),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}c=c.parentNode}}r=r.return}nv(function(){var d=o,m=Cf(n),f=[];e:{var g=Cv.get(t);if(g!==void 0){var w=Vf,S=t;switch(t){case"keypress":if(El(n)===0)break e;case"keydown":case"keyup":w=Wj;break;case"focusin":S="focus",w=ed;break;case"focusout":S="blur",w=ed;break;case"beforeblur":case"afterblur":w=ed;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Lj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Yj;break;case Sv:case Iv:case kv:w=Oj;break;case Av:w=Xj;break;case"scroll":w=Rj;break;case"wheel":w=eN;break;case"copy":case"cut":case"paste":w=qj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=$g}var C=(e&4)!==0,R=!C&&t==="scroll",j=C?g!==null?g+"Capture":null:g;C=[];for(var _=d,E;_!==null;){E=_;var L=E.stateNode;if(E.tag===5&&L!==null&&(E=L,j!==null&&(L=Fo(_,j),L!=null&&C.push(Ho(_,L,E)))),R)break;_=_.return}0<C.length&&(g=new w(g,S,null,n,m),f.push({event:g,listeners:C}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==sh&&(S=n.relatedTarget||n.fromElement)&&(ss(S)||S[Yn]))break e;if((w||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?ss(S):null,S!==null&&(R=Is(S),S!==R||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(C=zg,L="onMouseLeave",j="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(C=$g,L="onPointerLeave",j="onPointerEnter",_="pointer"),R=w==null?g:Js(w),E=S==null?g:Js(S),g=new C(L,_+"leave",w,n,m),g.target=R,g.relatedTarget=E,L=null,ss(m)===d&&(C=new C(j,_+"enter",S,n,m),C.target=E,C.relatedTarget=R,L=C),R=L,w&&S)t:{for(C=w,j=S,_=0,E=C;E;E=zs(E))_++;for(E=0,L=j;L;L=zs(L))E++;for(;0<_-E;)C=zs(C),_--;for(;0<E-_;)j=zs(j),E--;for(;_--;){if(C===j||j!==null&&C===j.alternate)break t;C=zs(C),j=zs(j)}C=null}else C=null;w!==null&&t0(f,g,w,C,!1),S!==null&&R!==null&&t0(f,R,S,C,!0)}}e:{if(g=d?Js(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var D=aN;else if(Wg(g))if(_v)D=dN;else{D=cN;var V=lN}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=uN);if(D&&(D=D(t,d))){wv(f,D,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Zd(g,"number",g.value)}switch(V=d?Js(d):window,t){case"focusin":(Wg(V)||V.contentEditable==="true")&&(Ks=V,dh=d,To=null);break;case"focusout":To=dh=Ks=null;break;case"mousedown":hh=!0;break;case"contextmenu":case"mouseup":case"dragend":hh=!1,Xg(f,n,m);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":Xg(f,n,m)}var N;if(Ff)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Qs?vv(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(yv&&n.locale!=="ko"&&(Qs||x!=="onCompositionStart"?x==="onCompositionEnd"&&Qs&&(N=xv()):(br=m,Mf="value"in br?br.value:br.textContent,Qs=!0)),V=Xl(d,x),0<V.length&&(x=new Bg(x,t,null,n,m),f.push({event:x,listeners:V}),N?x.data=N:(N=bv(n),N!==null&&(x.data=N)))),(N=nN?rN(t,n):sN(t,n))&&(d=Xl(d,"onBeforeInput"),0<d.length&&(m=new Bg("onBeforeInput","beforeinput",null,n,m),f.push({event:m,listeners:d}),m.data=N))}Pv(f,e)})}function Ho(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Fo(t,n),o!=null&&r.unshift(Ho(t,o,s)),o=Fo(t,e),o!=null&&r.push(Ho(t,o,s))),t=t.return}return r}function zs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function t0(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Fo(n,o),u!=null&&a.unshift(Ho(n,u,c))):s||(u=Fo(n,o),u!=null&&a.push(Ho(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var yN=/\r\n?/g,vN=/\u0000|\uFFFD/g;function n0(t){return(typeof t=="string"?t:""+t).replace(yN,`
`).replace(vN,"")}function ol(t,e,n){if(e=n0(e),n0(t)!==e&&n)throw Error(z(425))}function Zl(){}var fh=null,mh=null;function ph(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gh=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,r0=typeof Promise=="function"?Promise:void 0,wN=typeof queueMicrotask=="function"?queueMicrotask:typeof r0<"u"?function(t){return r0.resolve(null).then(t).catch(_N)}:gh;function _N(t){setTimeout(function(){throw t})}function ld(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);zo(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function s0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),En="__reactFiber$"+Pi,Wo="__reactProps$"+Pi,Yn="__reactContainer$"+Pi,xh="__reactEvents$"+Pi,jN="__reactListeners$"+Pi,NN="__reactHandles$"+Pi;function ss(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yn]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=s0(t);t!==null;){if(n=t[En])return n;t=s0(t)}return e}t=n,n=t.parentNode}return null}function ya(t){return t=t[En]||t[Yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function $c(t){return t[Wo]||null}var yh=[],Xs=-1;function Br(t){return{current:t}}function Ee(t){0>Xs||(t.current=yh[Xs],yh[Xs]=null,Xs--)}function be(t,e){Xs++,yh[Xs]=t.current,t.current=e}var Or={},ft=Br(Or),kt=Br(!1),ms=Or;function xi(t,e){var n=t.type.contextTypes;if(!n)return Or;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function At(t){return t=t.childContextTypes,t!=null}function ec(){Ee(kt),Ee(ft)}function i0(t,e,n){if(ft.current!==Or)throw Error(z(168));be(ft,e),be(kt,n)}function Dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,lj(t)||"Unknown",s));return Ce({},n,r)}function tc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,ms=ft.current,be(ft,t),be(kt,kt.current),!0}function o0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Dv(t,e,ms),r.__reactInternalMemoizedMergedChildContext=t,Ee(kt),Ee(ft),be(ft,t)):Ee(kt),be(kt,n)}var Mn=null,Gc=!1,cd=!1;function Lv(t){Mn===null?Mn=[t]:Mn.push(t)}function EN(t){Gc=!0,Lv(t)}function $r(){if(!cd&&Mn!==null){cd=!0;var t=0,e=xe;try{var n=Mn;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Mn=null,Gc=!1}catch(s){throw Mn!==null&&(Mn=Mn.slice(t+1)),ov(Pf,$r),s}finally{xe=e,cd=!1}}return null}var Zs=[],ei=0,nc=null,rc=0,Ht=[],Wt=0,ps=null,qn=1,Un="";function es(t,e){Zs[ei++]=rc,Zs[ei++]=nc,nc=t,rc=e}function Mv(t,e,n){Ht[Wt++]=qn,Ht[Wt++]=Un,Ht[Wt++]=ps,ps=t;var r=qn;t=Un;var s=32-hn(r)-1;r&=~(1<<s),n+=1;var o=32-hn(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,qn=1<<32-hn(e)+s|n<<s|r,Un=o+t}else qn=1<<o|n<<s|r,Un=t}function Uf(t){t.return!==null&&(es(t,1),Mv(t,1,0))}function zf(t){for(;t===nc;)nc=Zs[--ei],Zs[ei]=null,rc=Zs[--ei],Zs[ei]=null;for(;t===ps;)ps=Ht[--Wt],Ht[Wt]=null,Un=Ht[--Wt],Ht[Wt]=null,qn=Ht[--Wt],Ht[Wt]=null}var Ot=null,Mt=null,Te=!1,un=null;function Vv(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function a0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:qn,overflow:Un}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Mt=null,!0):!1;default:return!1}}function vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bh(t){if(Te){var e=Mt;if(e){var n=e;if(!a0(t,e)){if(vh(t))throw Error(z(418));e=Ir(n.nextSibling);var r=Ot;e&&a0(t,e)?Vv(r,n):(t.flags=t.flags&-4097|2,Te=!1,Ot=t)}}else{if(vh(t))throw Error(z(418));t.flags=t.flags&-4097|2,Te=!1,Ot=t}}}function l0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function al(t){if(t!==Ot)return!1;if(!Te)return l0(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ph(t.type,t.memoizedProps)),e&&(e=Mt)){if(vh(t))throw Ov(),Error(z(418));for(;e;)Vv(t,e),e=Ir(e.nextSibling)}if(l0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ot?Ir(t.stateNode.nextSibling):null;return!0}function Ov(){for(var t=Mt;t;)t=Ir(t.nextSibling)}function yi(){Mt=Ot=null,Te=!1}function Bf(t){un===null?un=[t]:un.push(t)}var TN=rr.ReactCurrentBatchConfig;function oo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=s.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function ll(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function c0(t){var e=t._init;return e(t._payload)}function Fv(t){function e(j,_){if(t){var E=j.deletions;E===null?(j.deletions=[_],j.flags|=16):E.push(_)}}function n(j,_){if(!t)return null;for(;_!==null;)e(j,_),_=_.sibling;return null}function r(j,_){for(j=new Map;_!==null;)_.key!==null?j.set(_.key,_):j.set(_.index,_),_=_.sibling;return j}function s(j,_){return j=Pr(j,_),j.index=0,j.sibling=null,j}function o(j,_,E){return j.index=E,t?(E=j.alternate,E!==null?(E=E.index,E<_?(j.flags|=2,_):E):(j.flags|=2,_)):(j.flags|=1048576,_)}function a(j){return t&&j.alternate===null&&(j.flags|=2),j}function c(j,_,E,L){return _===null||_.tag!==6?(_=gd(E,j.mode,L),_.return=j,_):(_=s(_,E),_.return=j,_)}function u(j,_,E,L){var D=E.type;return D===Ws?m(j,_,E.props.children,L,E.key):_!==null&&(_.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fr&&c0(D)===_.type)?(L=s(_,E.props),L.ref=oo(j,_,E),L.return=j,L):(L=Pl(E.type,E.key,E.props,null,j.mode,L),L.ref=oo(j,_,E),L.return=j,L)}function d(j,_,E,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==E.containerInfo||_.stateNode.implementation!==E.implementation?(_=xd(E,j.mode,L),_.return=j,_):(_=s(_,E.children||[]),_.return=j,_)}function m(j,_,E,L,D){return _===null||_.tag!==7?(_=ds(E,j.mode,L,D),_.return=j,_):(_=s(_,E),_.return=j,_)}function f(j,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return _=gd(""+_,j.mode,E),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ja:return E=Pl(_.type,_.key,_.props,null,j.mode,E),E.ref=oo(j,null,_),E.return=j,E;case Hs:return _=xd(_,j.mode,E),_.return=j,_;case fr:var L=_._init;return f(j,L(_._payload),E)}if(ho(_)||to(_))return _=ds(_,j.mode,E,null),_.return=j,_;ll(j,_)}return null}function g(j,_,E,L){var D=_!==null?_.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return D!==null?null:c(j,_,""+E,L);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ja:return E.key===D?u(j,_,E,L):null;case Hs:return E.key===D?d(j,_,E,L):null;case fr:return D=E._init,g(j,_,D(E._payload),L)}if(ho(E)||to(E))return D!==null?null:m(j,_,E,L,null);ll(j,E)}return null}function w(j,_,E,L,D){if(typeof L=="string"&&L!==""||typeof L=="number")return j=j.get(E)||null,c(_,j,""+L,D);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ja:return j=j.get(L.key===null?E:L.key)||null,u(_,j,L,D);case Hs:return j=j.get(L.key===null?E:L.key)||null,d(_,j,L,D);case fr:var V=L._init;return w(j,_,E,V(L._payload),D)}if(ho(L)||to(L))return j=j.get(E)||null,m(_,j,L,D,null);ll(_,L)}return null}function S(j,_,E,L){for(var D=null,V=null,N=_,x=_=0,y=null;N!==null&&x<E.length;x++){N.index>x?(y=N,N=null):y=N.sibling;var v=g(j,N,E[x],L);if(v===null){N===null&&(N=y);break}t&&N&&v.alternate===null&&e(j,N),_=o(v,_,x),V===null?D=v:V.sibling=v,V=v,N=y}if(x===E.length)return n(j,N),Te&&es(j,x),D;if(N===null){for(;x<E.length;x++)N=f(j,E[x],L),N!==null&&(_=o(N,_,x),V===null?D=N:V.sibling=N,V=N);return Te&&es(j,x),D}for(N=r(j,N);x<E.length;x++)y=w(N,j,x,E[x],L),y!==null&&(t&&y.alternate!==null&&N.delete(y.key===null?x:y.key),_=o(y,_,x),V===null?D=y:V.sibling=y,V=y);return t&&N.forEach(function(k){return e(j,k)}),Te&&es(j,x),D}function C(j,_,E,L){var D=to(E);if(typeof D!="function")throw Error(z(150));if(E=D.call(E),E==null)throw Error(z(151));for(var V=D=null,N=_,x=_=0,y=null,v=E.next();N!==null&&!v.done;x++,v=E.next()){N.index>x?(y=N,N=null):y=N.sibling;var k=g(j,N,v.value,L);if(k===null){N===null&&(N=y);break}t&&N&&k.alternate===null&&e(j,N),_=o(k,_,x),V===null?D=k:V.sibling=k,V=k,N=y}if(v.done)return n(j,N),Te&&es(j,x),D;if(N===null){for(;!v.done;x++,v=E.next())v=f(j,v.value,L),v!==null&&(_=o(v,_,x),V===null?D=v:V.sibling=v,V=v);return Te&&es(j,x),D}for(N=r(j,N);!v.done;x++,v=E.next())v=w(N,j,x,v.value,L),v!==null&&(t&&v.alternate!==null&&N.delete(v.key===null?x:v.key),_=o(v,_,x),V===null?D=v:V.sibling=v,V=v);return t&&N.forEach(function(P){return e(j,P)}),Te&&es(j,x),D}function R(j,_,E,L){if(typeof E=="object"&&E!==null&&E.type===Ws&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Ja:e:{for(var D=E.key,V=_;V!==null;){if(V.key===D){if(D=E.type,D===Ws){if(V.tag===7){n(j,V.sibling),_=s(V,E.props.children),_.return=j,j=_;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===fr&&c0(D)===V.type){n(j,V.sibling),_=s(V,E.props),_.ref=oo(j,V,E),_.return=j,j=_;break e}n(j,V);break}else e(j,V);V=V.sibling}E.type===Ws?(_=ds(E.props.children,j.mode,L,E.key),_.return=j,j=_):(L=Pl(E.type,E.key,E.props,null,j.mode,L),L.ref=oo(j,_,E),L.return=j,j=L)}return a(j);case Hs:e:{for(V=E.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===E.containerInfo&&_.stateNode.implementation===E.implementation){n(j,_.sibling),_=s(_,E.children||[]),_.return=j,j=_;break e}else{n(j,_);break}else e(j,_);_=_.sibling}_=xd(E,j.mode,L),_.return=j,j=_}return a(j);case fr:return V=E._init,R(j,_,V(E._payload),L)}if(ho(E))return S(j,_,E,L);if(to(E))return C(j,_,E,L);ll(j,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,_!==null&&_.tag===6?(n(j,_.sibling),_=s(_,E),_.return=j,j=_):(n(j,_),_=gd(E,j.mode,L),_.return=j,j=_),a(j)):n(j,_)}return R}var vi=Fv(!0),qv=Fv(!1),sc=Br(null),ic=null,ti=null,$f=null;function Gf(){$f=ti=ic=null}function Hf(t){var e=sc.current;Ee(sc),t._currentValue=e}function wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function li(t,e){ic=t,$f=ti=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},ti===null){if(ic===null)throw Error(z(308));ti=t,ic.dependencies={lanes:0,firstContext:t}}else ti=ti.next=t;return e}var is=null;function Wf(t){is===null?is=[t]:is.push(t)}function Uv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Jn(t,r)}function Jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var mr=!1;function Qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Jn(t,n)}return s=r.interleaved,s===null?(e.next=e,Wf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Jn(t,n)}function Tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}function u0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,r){var s=t.updateQueue;mr=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;a=0,m=d=u=null,c=o;do{var g=c.lane,w=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,C=c;switch(g=e,w=n,C.tag){case 1:if(S=C.payload,typeof S=="function"){f=S.call(w,f,g);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=C.payload,g=typeof S=="function"?S.call(w,f,g):S,g==null)break e;f=Ce({},f,g);break e;case 2:mr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=w,u=f):m=m.next=w,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);xs|=a,t.lanes=a,t.memoizedState=f}}function d0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var va={},Sn=Br(va),Qo=Br(va),Ko=Br(va);function os(t){if(t===va)throw Error(z(174));return t}function Kf(t,e){switch(be(Ko,e),be(Qo,t),be(Sn,va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=th(e,t)}Ee(Sn),be(Sn,e)}function bi(){Ee(Sn),Ee(Qo),Ee(Ko)}function Bv(t){os(Ko.current);var e=os(Sn.current),n=th(e,t.type);e!==n&&(be(Qo,t),be(Sn,n))}function Yf(t){Qo.current===t&&(Ee(Sn),Ee(Qo))}var ke=Br(0);function ac(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ud=[];function Jf(){for(var t=0;t<ud.length;t++)ud[t]._workInProgressVersionPrimary=null;ud.length=0}var Sl=rr.ReactCurrentDispatcher,dd=rr.ReactCurrentBatchConfig,gs=0,Ae=null,ze=null,We=null,lc=!1,So=!1,Yo=0,SN=0;function ot(){throw Error(z(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function Zf(t,e,n,r,s,o){if(gs=o,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sl.current=t===null||t.memoizedState===null?CN:PN,t=n(r,s),So){o=0;do{if(So=!1,Yo=0,25<=o)throw Error(z(301));o+=1,We=ze=null,e.updateQueue=null,Sl.current=RN,t=n(r,s)}while(So)}if(Sl.current=cc,e=ze!==null&&ze.next!==null,gs=0,We=ze=Ae=null,lc=!1,e)throw Error(z(300));return t}function em(){var t=Yo!==0;return Yo=0,t}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Ae.memoizedState=We=t:We=We.next=t,We}function en(){if(ze===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=We===null?Ae.memoizedState:We.next;if(e!==null)We=e,ze=t;else{if(t===null)throw Error(z(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},We===null?Ae.memoizedState=We=t:We=We.next=t}return We}function Jo(t,e){return typeof e=="function"?e(t):e}function hd(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var c=a=null,u=null,d=o;do{var m=d.lane;if((gs&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,a=r):u=u.next=f,Ae.lanes|=m,xs|=m}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=c,pn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ae.lanes|=o,xs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fd(t){var e=en(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);pn(o,e.memoizedState)||(St=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function $v(){}function Gv(t,e){var n=Ae,r=en(),s=e(),o=!pn(r.memoizedState,s);if(o&&(r.memoizedState=s,St=!0),r=r.queue,tm(Qv.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,Xo(9,Wv.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(z(349));gs&30||Hv(n,e,s)}return s}function Hv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wv(t,e,n,r){e.value=n,e.getSnapshot=r,Kv(e)&&Yv(t)}function Qv(t,e,n){return n(function(){Kv(e)&&Yv(t)})}function Kv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Yv(t){var e=Jn(t,1);e!==null&&fn(e,t,1,-1)}function h0(t){var e=jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jo,lastRenderedState:t},e.queue=t,t=t.dispatch=AN.bind(null,Ae,t),[e.memoizedState,t]}function Xo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jv(){return en().memoizedState}function Il(t,e,n,r){var s=jn();Ae.flags|=t,s.memoizedState=Xo(1|e,n,void 0,r===void 0?null:r)}function Hc(t,e,n,r){var s=en();r=r===void 0?null:r;var o=void 0;if(ze!==null){var a=ze.memoizedState;if(o=a.destroy,r!==null&&Xf(r,a.deps)){s.memoizedState=Xo(e,n,o,r);return}}Ae.flags|=t,s.memoizedState=Xo(1|e,n,o,r)}function f0(t,e){return Il(8390656,8,t,e)}function tm(t,e){return Hc(2048,8,t,e)}function Xv(t,e){return Hc(4,2,t,e)}function Zv(t,e){return Hc(4,4,t,e)}function eb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tb(t,e,n){return n=n!=null?n.concat([t]):null,Hc(4,4,eb.bind(null,e,t),n)}function nm(){}function nb(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rb(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sb(t,e,n){return gs&21?(pn(n,e)||(n=cv(),Ae.lanes|=n,xs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function IN(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=dd.transition;dd.transition={};try{t(!1),e()}finally{xe=n,dd.transition=r}}function ib(){return en().memoizedState}function kN(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ob(t))ab(e,n);else if(n=Uv(t,e,n,r),n!==null){var s=bt();fn(n,t,r,s),lb(n,e,r)}}function AN(t,e,n){var r=Cr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ob(t))ab(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,n);if(s.hasEagerState=!0,s.eagerState=c,pn(c,a)){var u=e.interleaved;u===null?(s.next=s,Wf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Uv(t,e,s,r),n!==null&&(s=bt(),fn(n,t,r,s),lb(n,e,r))}}function ob(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function ab(t,e){So=lc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Rf(t,n)}}var cc={readContext:Zt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},CN={readContext:Zt,useCallback:function(t,e){return jn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:f0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Il(4194308,4,eb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Il(4194308,4,t,e)},useInsertionEffect:function(t,e){return Il(4,2,t,e)},useMemo:function(t,e){var n=jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kN.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=jn();return t={current:t},e.memoizedState=t},useState:h0,useDebugValue:nm,useDeferredValue:function(t){return jn().memoizedState=t},useTransition:function(){var t=h0(!1),e=t[0];return t=IN.bind(null,t[1]),jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=jn();if(Te){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Qe===null)throw Error(z(349));gs&30||Hv(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,f0(Qv.bind(null,r,o,t),[t]),r.flags|=2048,Xo(9,Wv.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=jn(),e=Qe.identifierPrefix;if(Te){var n=Un,r=qn;n=(r&~(1<<32-hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Yo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PN={readContext:Zt,useCallback:nb,useContext:Zt,useEffect:tm,useImperativeHandle:tb,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:rb,useReducer:hd,useRef:Jv,useState:function(){return hd(Jo)},useDebugValue:nm,useDeferredValue:function(t){var e=en();return sb(e,ze.memoizedState,t)},useTransition:function(){var t=hd(Jo)[0],e=en().memoizedState;return[t,e]},useMutableSource:$v,useSyncExternalStore:Gv,useId:ib,unstable_isNewReconciler:!1},RN={readContext:Zt,useCallback:nb,useContext:Zt,useEffect:tm,useImperativeHandle:tb,useInsertionEffect:Xv,useLayoutEffect:Zv,useMemo:rb,useReducer:fd,useRef:Jv,useState:function(){return fd(Jo)},useDebugValue:nm,useDeferredValue:function(t){var e=en();return ze===null?e.memoizedState=t:sb(e,ze.memoizedState,t)},useTransition:function(){var t=fd(Jo)[0],e=en().memoizedState;return[t,e]},useMutableSource:$v,useSyncExternalStore:Gv,useId:ib,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function _h(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wc={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Cr(t),o=Gn(r,s);o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,s),e!==null&&(fn(e,t,s,r),Tl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Cr(t),o=Gn(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=kr(t,o,s),e!==null&&(fn(e,t,s,r),Tl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Cr(t),s=Gn(n,r);s.tag=2,e!=null&&(s.callback=e),e=kr(t,s,r),e!==null&&(fn(e,t,r,n),Tl(e,t,r))}};function m0(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!$o(n,r)||!$o(s,o):!0}function cb(t,e,n){var r=!1,s=Or,o=e.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(s=At(e)?ms:ft.current,r=e.contextTypes,o=(r=r!=null)?xi(t,s):Or),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function p0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wc.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qf(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Zt(o):(o=At(e)?ms:ft.current,s.context=xi(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(_h(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Wc.enqueueReplaceState(s,s.state,null),oc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wi(t,e){try{var n="",r=e;do n+=aj(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DN=typeof WeakMap=="function"?WeakMap:Map;function ub(t,e,n){n=Gn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dc||(dc=!0,Dh=r),Nh(t,e)},n}function db(t,e,n){n=Gn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Nh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Nh(t,e),typeof r!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function g0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=QN.bind(null,t,e,n),e.then(t,t))}function x0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gn(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var LN=rr.ReactCurrentOwner,St=!1;function yt(t,e,n,r){e.child=t===null?qv(e,null,n,r):vi(e,t.child,n,r)}function v0(t,e,n,r,s){n=n.render;var o=e.ref;return li(e,s),r=Zf(t,e,n,r,o,s),n=em(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(Te&&n&&Uf(e),e.flags|=1,yt(t,e,r,s),e.child)}function b0(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!um(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,hb(t,e,o,r,s)):(t=Pl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:$o,n(a,r)&&t.ref===e.ref)return Xn(t,e,s)}return e.flags|=1,t=Pr(o,r),t.ref=e.ref,t.return=e,e.child=t}function hb(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if($o(o,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Xn(t,e,s)}return Eh(t,e,n,r,s)}function fb(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(ri,Lt),Lt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,be(ri,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,be(ri,Lt),Lt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,be(ri,Lt),Lt|=r;return yt(t,e,s,n),e.child}function mb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Eh(t,e,n,r,s){var o=At(n)?ms:ft.current;return o=xi(e,o),li(e,s),n=Zf(t,e,n,r,o,s),r=em(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xn(t,e,s)):(Te&&r&&Uf(e),e.flags|=1,yt(t,e,n,s),e.child)}function w0(t,e,n,r,s){if(At(n)){var o=!0;tc(e)}else o=!1;if(li(e,s),e.stateNode===null)kl(t,e),cb(e,n,r),jh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=At(n)?ms:ft.current,d=xi(e,d));var m=n.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&p0(e,a,r,d),mr=!1;var g=e.memoizedState;a.state=g,oc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||kt.current||mr?(typeof m=="function"&&(_h(e,n,m,r),u=e.memoizedState),(c=mr||m0(e,n,c,r,g,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,zv(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:ln(e.type,c),a.props=d,f=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Zt(u):(u=At(n)?ms:ft.current,u=xi(e,u));var w=n.getDerivedStateFromProps;(m=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==f||g!==u)&&p0(e,a,r,u),mr=!1,g=e.memoizedState,a.state=g,oc(e,r,a,s);var S=e.memoizedState;c!==f||g!==S||kt.current||mr?(typeof w=="function"&&(_h(e,n,w,r),S=e.memoizedState),(d=mr||m0(e,n,d,r,g,S,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),a.props=r,a.state=S,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Th(t,e,n,r,o,s)}function Th(t,e,n,r,s,o){mb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&o0(e,n,!1),Xn(t,e,o);r=e.stateNode,LN.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=vi(e,t.child,null,o),e.child=vi(e,null,c,o)):yt(t,e,c,o),e.memoizedState=r.state,s&&o0(e,n,!0),e.child}function pb(t){var e=t.stateNode;e.pendingContext?i0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i0(t,e.context,!1),Kf(t,e.containerInfo)}function _0(t,e,n,r,s){return yi(),Bf(s),e.flags|=256,yt(t,e,n,r),e.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function gb(t,e,n){var r=e.pendingProps,s=ke.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),be(ke,s&1),t===null)return bh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Yc(a,r,0,null),t=ds(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Ih(n),e.memoizedState=Sh,t):rm(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return MN(t,e,a,r,c,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Pr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?o=Pr(c,o):(o=ds(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?Ih(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Sh,r}return o=t.child,t=o.sibling,r=Pr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function rm(t,e){return e=Yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cl(t,e,n,r){return r!==null&&Bf(r),vi(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MN(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=md(Error(z(422))),cl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=Yc({mode:"visible",children:r.children},s,0,null),o=ds(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&vi(e,t.child,null,a),e.child.memoizedState=Ih(a),e.memoizedState=Sh,o);if(!(e.mode&1))return cl(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error(z(419)),r=md(o,r,void 0),cl(t,e,a,r)}if(c=(a&t.childLanes)!==0,St||c){if(r=Qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Jn(t,s),fn(r,t,s,-1))}return cm(),r=md(Error(z(421))),cl(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=KN.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Mt=Ir(s.nextSibling),Ot=e,Te=!0,un=null,t!==null&&(Ht[Wt++]=qn,Ht[Wt++]=Un,Ht[Wt++]=ps,qn=t.id,Un=t.overflow,ps=e),e=rm(e,r.children),e.flags|=4096,e)}function j0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),wh(t.return,e,n)}function pd(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function xb(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(yt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j0(t,n,e);else if(t.tag===19)j0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(be(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&ac(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),pd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ac(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}pd(e,!0,n,null,o);break;case"together":pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Pr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VN(t,e,n){switch(e.tag){case 3:pb(e),yi();break;case 5:Bv(e);break;case 1:At(e.type)&&tc(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;be(sc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(be(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?gb(t,e,n):(be(ke,ke.current&1),t=Xn(t,e,n),t!==null?t.sibling:null);be(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xb(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),be(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,fb(t,e,n)}return Xn(t,e,n)}var yb,kh,vb,bb;yb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kh=function(){};vb=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,os(Sn.current);var o=null;switch(n){case"input":s=Jd(t,s),r=Jd(t,r),o=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),o=[];break;case"textarea":s=eh(t,s),r=eh(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zl)}nh(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Vo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Vo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&je("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};bb=function(t,e,n,r){n!==r&&(e.flags|=4)};function ao(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ON(t,e,n){var r=e.pendingProps;switch(zf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return At(e.type)&&ec(),at(e),null;case 3:return r=e.stateNode,bi(),Ee(kt),Ee(ft),Jf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(Vh(un),un=null))),kh(t,e),at(e),null;case 5:Yf(e);var s=os(Ko.current);if(n=e.type,t!==null&&e.stateNode!=null)vb(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return at(e),null}if(t=os(Sn.current),al(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[En]=e,r[Wo]=o,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<mo.length;s++)je(mo[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":Pg(r,o),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},je("invalid",r);break;case"textarea":Dg(r,o),je("invalid",r)}nh(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&ol(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&ol(r.textContent,c,t),s=["children",""+c]):Vo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&je("scroll",r)}switch(n){case"input":Xa(r),Rg(r,o,!0);break;case"textarea":Xa(r),Lg(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Zl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Qy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[En]=e,t[Wo]=r,yb(t,e,!1,!1),e.stateNode=t;e:{switch(a=rh(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<mo.length;s++)je(mo[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":Pg(t,r),s=Jd(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),je("invalid",t);break;case"textarea":Dg(t,r),s=eh(t,r),je("invalid",t);break;default:s=r}nh(n,s),c=s;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?Jy(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ky(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Oo(t,u):typeof u=="number"&&Oo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Vo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&je("scroll",t):u!=null&&Sf(t,o,u,a))}switch(n){case"input":Xa(t),Rg(t,r,!1);break;case"textarea":Xa(t),Lg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Vr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?si(t,!!r.multiple,o,!1):r.defaultValue!=null&&si(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)bb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=os(Ko.current),os(Sn.current),al(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(o=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:ol(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return at(e),null;case 13:if(Ee(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Mt!==null&&e.mode&1&&!(e.flags&128))Ov(),yi(),e.flags|=98560,o=!1;else if(o=al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(z(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[En]=e}else yi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),o=!1}else un!==null&&(Vh(un),un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Be===0&&(Be=3):cm())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return bi(),kh(t,e),t===null&&Go(e.stateNode.containerInfo),at(e),null;case 10:return Hf(e.type._context),at(e),null;case 17:return At(e.type)&&ec(),at(e),null;case 19:if(Ee(ke),o=e.memoizedState,o===null)return at(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)ao(o,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ac(t),a!==null){for(e.flags|=128,ao(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return be(ke,ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&Me()>_i&&(e.flags|=128,r=!0,ao(o,!1),e.lanes=4194304)}else{if(!r)if(t=ac(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ao(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Te)return at(e),null}else 2*Me()-o.renderingStartTime>_i&&n!==1073741824&&(e.flags|=128,r=!0,ao(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Me(),e.sibling=null,n=ke.current,be(ke,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return lm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Lt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function FN(t,e){switch(zf(e),e.tag){case 1:return At(e.type)&&ec(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),Ee(kt),Ee(ft),Jf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yf(e),null;case 13:if(Ee(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));yi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(ke),null;case 4:return bi(),null;case 10:return Hf(e.type._context),null;case 22:case 23:return lm(),null;case 24:return null;default:return null}}var ul=!1,dt=!1,qN=typeof WeakSet=="function"?WeakSet:Set,K=null;function ni(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Ah(t,e,n){try{n()}catch(r){De(t,e,r)}}var N0=!1;function UN(t,e){if(fh=Yl,t=Ev(),qf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,m=0,f=t,g=null;t:for(;;){for(var w;f!==n||s!==0&&f.nodeType!==3||(c=a+s),f!==o||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(w=f.firstChild)!==null;)g=f,f=w;for(;;){if(f===t)break t;if(g===n&&++d===s&&(c=a),g===o&&++m===r&&(u=a),(w=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:t,selectionRange:n},Yl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var C=S.memoizedProps,R=S.memoizedState,j=e.stateNode,_=j.getSnapshotBeforeUpdate(e.elementType===e.type?C:ln(e.type,C),R);j.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(L){De(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return S=N0,N0=!1,S}function Io(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Ah(e,n,o)}s=s.next}while(s!==r)}}function Qc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function wb(t){var e=t.alternate;e!==null&&(t.alternate=null,wb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[Wo],delete e[xh],delete e[jN],delete e[NN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _b(t){return t.tag===5||t.tag===3||t.tag===4}function E0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_b(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zl));else if(r!==4&&(t=t.child,t!==null))for(Ph(t,e,n),t=t.sibling;t!==null;)Ph(t,e,n),t=t.sibling}function Rh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Rh(t,e,n),t=t.sibling;t!==null;)Rh(t,e,n),t=t.sibling}var Ye=null,cn=!1;function ur(t,e,n){for(n=n.child;n!==null;)jb(t,e,n),n=n.sibling}function jb(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(qc,n)}catch{}switch(n.tag){case 5:dt||ni(n,e);case 6:var r=Ye,s=cn;Ye=null,ur(t,e,n),Ye=r,cn=s,Ye!==null&&(cn?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(cn?(t=Ye,n=n.stateNode,t.nodeType===8?ld(t.parentNode,n):t.nodeType===1&&ld(t,n),zo(t)):ld(Ye,n.stateNode));break;case 4:r=Ye,s=cn,Ye=n.stateNode.containerInfo,cn=!0,ur(t,e,n),Ye=r,cn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ah(n,e,a),s=s.next}while(s!==r)}ur(t,e,n);break;case 1:if(!dt&&(ni(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){De(n,e,c)}ur(t,e,n);break;case 21:ur(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,ur(t,e,n),dt=r):ur(t,e,n);break;default:ur(t,e,n)}}function T0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qN),e.forEach(function(r){var s=YN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Ye=c.stateNode,cn=!1;break e;case 3:Ye=c.stateNode.containerInfo,cn=!0;break e;case 4:Ye=c.stateNode.containerInfo,cn=!0;break e}c=c.return}if(Ye===null)throw Error(z(160));jb(o,a,s),Ye=null,cn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){De(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nb(e,t),e=e.sibling}function Nb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),_n(t),r&4){try{Io(3,t,t.return),Qc(3,t)}catch(C){De(t,t.return,C)}try{Io(5,t,t.return)}catch(C){De(t,t.return,C)}}break;case 1:an(e,t),_n(t),r&512&&n!==null&&ni(n,n.return);break;case 5:if(an(e,t),_n(t),r&512&&n!==null&&ni(n,n.return),t.flags&32){var s=t.stateNode;try{Oo(s,"")}catch(C){De(t,t.return,C)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&Hy(s,o),rh(c,a);var d=rh(c,o);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?Jy(s,f):m==="dangerouslySetInnerHTML"?Ky(s,f):m==="children"?Oo(s,f):Sf(s,m,f,d)}switch(c){case"input":Xd(s,o);break;case"textarea":Wy(s,o);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var w=o.value;w!=null?si(s,!!o.multiple,w,!1):g!==!!o.multiple&&(o.defaultValue!=null?si(s,!!o.multiple,o.defaultValue,!0):si(s,!!o.multiple,o.multiple?[]:"",!1))}s[Wo]=o}catch(C){De(t,t.return,C)}}break;case 6:if(an(e,t),_n(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(C){De(t,t.return,C)}}break;case 3:if(an(e,t),_n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zo(e.containerInfo)}catch(C){De(t,t.return,C)}break;case 4:an(e,t),_n(t);break;case 13:an(e,t),_n(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(om=Me())),r&4&&T0(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||m,an(e,t),dt=d):an(e,t),_n(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(K=t,m=t.child;m!==null;){for(f=K=m;K!==null;){switch(g=K,w=g.child,g.tag){case 0:case 11:case 14:case 15:Io(4,g,g.return);break;case 1:ni(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(C){De(r,n,C)}}break;case 5:ni(g,g.return);break;case 22:if(g.memoizedState!==null){I0(f);continue}}w!==null?(w.return=g,K=w):I0(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{s=f.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Yy("display",a))}catch(C){De(t,t.return,C)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(C){De(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:an(e,t),_n(t),r&4&&T0(t);break;case 21:break;default:an(e,t),_n(t)}}function _n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_b(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Oo(s,""),r.flags&=-33);var o=E0(t);Rh(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=E0(t);Ph(t,c,a);break;default:throw Error(z(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zN(t,e,n){K=t,Eb(t)}function Eb(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ul;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=ul;var d=dt;if(ul=a,(dt=u)&&!d)for(K=s;K!==null;)a=K,u=a.child,a.tag===22&&a.memoizedState!==null?k0(s):u!==null?(u.return=a,K=u):k0(s);for(;o!==null;)K=o,Eb(o),o=o.sibling;K=s,ul=c,dt=d}S0(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,K=o):S0(t)}}function S0(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Qc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&d0(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}d0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&zo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&Ch(e)}catch(g){De(e,e.return,g)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function I0(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function k0(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Qc(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var o=e.return;try{Ch(e)}catch(u){De(e,o,u)}break;case 5:var a=e.return;try{Ch(e)}catch(u){De(e,a,u)}}}catch(u){De(e,e.return,u)}if(e===t){K=null;break}var c=e.sibling;if(c!==null){c.return=e.return,K=c;break}K=e.return}}var BN=Math.ceil,uc=rr.ReactCurrentDispatcher,sm=rr.ReactCurrentOwner,Yt=rr.ReactCurrentBatchConfig,de=0,Qe=null,Fe=null,Ze=0,Lt=0,ri=Br(0),Be=0,Zo=null,xs=0,Kc=0,im=0,ko=null,Et=null,om=0,_i=1/0,Ln=null,dc=!1,Dh=null,Ar=null,dl=!1,wr=null,hc=0,Ao=0,Lh=null,Al=-1,Cl=0;function bt(){return de&6?Me():Al!==-1?Al:Al=Me()}function Cr(t){return t.mode&1?de&2&&Ze!==0?Ze&-Ze:TN.transition!==null?(Cl===0&&(Cl=cv()),Cl):(t=xe,t!==0||(t=window.event,t=t===void 0?16:gv(t.type)),t):1}function fn(t,e,n,r){if(50<Ao)throw Ao=0,Lh=null,Error(z(185));ga(t,n,r),(!(de&2)||t!==Qe)&&(t===Qe&&(!(de&2)&&(Kc|=n),Be===4&&gr(t,Ze)),Ct(t,r),n===1&&de===0&&!(e.mode&1)&&(_i=Me()+500,Gc&&$r()))}function Ct(t,e){var n=t.callbackNode;Tj(t,e);var r=Kl(t,t===Qe?Ze:0);if(r===0)n!==null&&Og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Og(n),e===1)t.tag===0?EN(A0.bind(null,t)):Lv(A0.bind(null,t)),wN(function(){!(de&6)&&$r()}),n=null;else{switch(uv(r)){case 1:n=Pf;break;case 4:n=av;break;case 16:n=Ql;break;case 536870912:n=lv;break;default:n=Ql}n=Rb(n,Tb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tb(t,e){if(Al=-1,Cl=0,de&6)throw Error(z(327));var n=t.callbackNode;if(ci()&&t.callbackNode!==n)return null;var r=Kl(t,t===Qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fc(t,r);else{e=r;var s=de;de|=2;var o=Ib();(Qe!==t||Ze!==e)&&(Ln=null,_i=Me()+500,us(t,e));do try{HN();break}catch(c){Sb(t,c)}while(!0);Gf(),uc.current=o,de=s,Fe!==null?e=0:(Qe=null,Ze=0,e=Be)}if(e!==0){if(e===2&&(s=lh(t),s!==0&&(r=s,e=Mh(t,s))),e===1)throw n=Zo,us(t,0),gr(t,r),Ct(t,Me()),n;if(e===6)gr(t,r);else{if(s=t.current.alternate,!(r&30)&&!$N(s)&&(e=fc(t,r),e===2&&(o=lh(t),o!==0&&(r=o,e=Mh(t,o))),e===1))throw n=Zo,us(t,0),gr(t,r),Ct(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ts(t,Et,Ln);break;case 3:if(gr(t,r),(r&130023424)===r&&(e=om+500-Me(),10<e)){if(Kl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gh(ts.bind(null,t,Et,Ln),e);break}ts(t,Et,Ln);break;case 4:if(gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-hn(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*BN(r/1960))-r,10<r){t.timeoutHandle=gh(ts.bind(null,t,Et,Ln),r);break}ts(t,Et,Ln);break;case 5:ts(t,Et,Ln);break;default:throw Error(z(329))}}}return Ct(t,Me()),t.callbackNode===n?Tb.bind(null,t):null}function Mh(t,e){var n=ko;return t.current.memoizedState.isDehydrated&&(us(t,e).flags|=256),t=fc(t,e),t!==2&&(e=Et,Et=n,e!==null&&Vh(e)),t}function Vh(t){Et===null?Et=t:Et.push.apply(Et,t)}function $N(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!pn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gr(t,e){for(e&=~im,e&=~Kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-hn(e),r=1<<n;t[n]=-1,e&=~r}}function A0(t){if(de&6)throw Error(z(327));ci();var e=Kl(t,0);if(!(e&1))return Ct(t,Me()),null;var n=fc(t,e);if(t.tag!==0&&n===2){var r=lh(t);r!==0&&(e=r,n=Mh(t,r))}if(n===1)throw n=Zo,us(t,0),gr(t,e),Ct(t,Me()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,Et,Ln),Ct(t,Me()),null}function am(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(_i=Me()+500,Gc&&$r())}}function ys(t){wr!==null&&wr.tag===0&&!(de&6)&&ci();var e=de;de|=1;var n=Yt.transition,r=xe;try{if(Yt.transition=null,xe=1,t)return t()}finally{xe=r,Yt.transition=n,de=e,!(de&6)&&$r()}}function lm(){Lt=ri.current,Ee(ri)}function us(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bN(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(zf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ec();break;case 3:bi(),Ee(kt),Ee(ft),Jf();break;case 5:Yf(r);break;case 4:bi();break;case 13:Ee(ke);break;case 19:Ee(ke);break;case 10:Hf(r.type._context);break;case 22:case 23:lm()}n=n.return}if(Qe=t,Fe=t=Pr(t.current,null),Ze=Lt=e,Be=0,Zo=null,im=Kc=xs=0,Et=ko=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}is=null}return t}function Sb(t,e){do{var n=Fe;try{if(Gf(),Sl.current=cc,lc){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}lc=!1}if(gs=0,We=ze=Ae=null,So=!1,Yo=0,sm.current=null,n===null||n.return===null){Be=1,Zo=e,Fe=null;break}e:{var o=t,a=n.return,c=n,u=e;if(e=Ze,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var w=x0(a);if(w!==null){w.flags&=-257,y0(w,a,c,o,e),w.mode&1&&g0(o,d,e),e=w,u=d;var S=e.updateQueue;if(S===null){var C=new Set;C.add(u),e.updateQueue=C}else S.add(u);break e}else{if(!(e&1)){g0(o,d,e),cm();break e}u=Error(z(426))}}else if(Te&&c.mode&1){var R=x0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),y0(R,a,c,o,e),Bf(wi(u,c));break e}}o=u=wi(u,c),Be!==4&&(Be=2),ko===null?ko=[o]:ko.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var j=ub(o,u,e);u0(o,j);break e;case 1:c=u;var _=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ar===null||!Ar.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var L=db(o,c,e);u0(o,L);break e}}o=o.return}while(o!==null)}Ab(n)}catch(D){e=D,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function Ib(){var t=uc.current;return uc.current=cc,t===null?cc:t}function cm(){(Be===0||Be===3||Be===2)&&(Be=4),Qe===null||!(xs&268435455)&&!(Kc&268435455)||gr(Qe,Ze)}function fc(t,e){var n=de;de|=2;var r=Ib();(Qe!==t||Ze!==e)&&(Ln=null,us(t,e));do try{GN();break}catch(s){Sb(t,s)}while(!0);if(Gf(),de=n,uc.current=r,Fe!==null)throw Error(z(261));return Qe=null,Ze=0,Be}function GN(){for(;Fe!==null;)kb(Fe)}function HN(){for(;Fe!==null&&!xj();)kb(Fe)}function kb(t){var e=Pb(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?Ab(t):Fe=e,sm.current=null}function Ab(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FN(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Fe=null;return}}else if(n=ON(n,e,Lt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);Be===0&&(Be=5)}function ts(t,e,n){var r=xe,s=Yt.transition;try{Yt.transition=null,xe=1,WN(t,e,n,r)}finally{Yt.transition=s,xe=r}return null}function WN(t,e,n,r){do ci();while(wr!==null);if(de&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Sj(t,o),t===Qe&&(Fe=Qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dl||(dl=!0,Rb(Ql,function(){return ci(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Yt.transition,Yt.transition=null;var a=xe;xe=1;var c=de;de|=4,sm.current=null,UN(t,n),Nb(n,t),fN(mh),Yl=!!fh,mh=fh=null,t.current=n,zN(n),yj(),de=c,xe=a,Yt.transition=o}else t.current=n;if(dl&&(dl=!1,wr=t,hc=s),o=t.pendingLanes,o===0&&(Ar=null),wj(n.stateNode),Ct(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(dc)throw dc=!1,t=Dh,Dh=null,t;return hc&1&&t.tag!==0&&ci(),o=t.pendingLanes,o&1?t===Lh?Ao++:(Ao=0,Lh=t):Ao=0,$r(),null}function ci(){if(wr!==null){var t=uv(hc),e=Yt.transition,n=xe;try{if(Yt.transition=null,xe=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,hc=0,de&6)throw Error(z(331));var s=de;for(de|=4,K=t.current;K!==null;){var o=K,a=o.child;if(K.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(K=d;K!==null;){var m=K;switch(m.tag){case 0:case 11:case 15:Io(8,m,o)}var f=m.child;if(f!==null)f.return=m,K=f;else for(;K!==null;){m=K;var g=m.sibling,w=m.return;if(wb(m),m===d){K=null;break}if(g!==null){g.return=w,K=g;break}K=w}}}var S=o.alternate;if(S!==null){var C=S.child;if(C!==null){S.child=null;do{var R=C.sibling;C.sibling=null,C=R}while(C!==null)}}K=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,K=a;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Io(9,o,o.return)}var j=o.sibling;if(j!==null){j.return=o.return,K=j;break e}K=o.return}}var _=t.current;for(K=_;K!==null;){a=K;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,K=E;else e:for(a=_;K!==null;){if(c=K,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Qc(9,c)}}catch(D){De(c,c.return,D)}if(c===a){K=null;break e}var L=c.sibling;if(L!==null){L.return=c.return,K=L;break e}K=c.return}}if(de=s,$r(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(qc,t)}catch{}r=!0}return r}finally{xe=n,Yt.transition=e}}return!1}function C0(t,e,n){e=wi(n,e),e=ub(t,e,1),t=kr(t,e,1),e=bt(),t!==null&&(ga(t,1,e),Ct(t,e))}function De(t,e,n){if(t.tag===3)C0(t,t,n);else for(;e!==null;){if(e.tag===3){C0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ar===null||!Ar.has(r))){t=wi(n,t),t=db(e,t,1),e=kr(e,t,1),t=bt(),e!==null&&(ga(e,1,t),Ct(e,t));break}}e=e.return}}function QN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(Ze&n)===n&&(Be===4||Be===3&&(Ze&130023424)===Ze&&500>Me()-om?us(t,0):im|=n),Ct(t,e)}function Cb(t,e){e===0&&(t.mode&1?(e=tl,tl<<=1,!(tl&130023424)&&(tl=4194304)):e=1);var n=bt();t=Jn(t,e),t!==null&&(ga(t,e,n),Ct(t,n))}function KN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Cb(t,n)}function YN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Cb(t,n)}var Pb;Pb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,VN(t,e,n);St=!!(t.flags&131072)}else St=!1,Te&&e.flags&1048576&&Mv(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kl(t,e),t=e.pendingProps;var s=xi(e,ft.current);li(e,n),s=Zf(null,e,r,t,s,n);var o=em();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,At(r)?(o=!0,tc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qf(e),s.updater=Wc,e.stateNode=s,s._reactInternals=e,jh(e,r,t,n),e=Th(null,e,r,!0,o,n)):(e.tag=0,Te&&o&&Uf(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=XN(r),t=ln(r,t),s){case 0:e=Eh(null,e,r,t,n);break e;case 1:e=w0(null,e,r,t,n);break e;case 11:e=v0(null,e,r,t,n);break e;case 14:e=b0(null,e,r,ln(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),Eh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),w0(t,e,r,s,n);case 3:e:{if(pb(e),t===null)throw Error(z(387));r=e.pendingProps,o=e.memoizedState,s=o.element,zv(t,e),oc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=wi(Error(z(423)),e),e=_0(t,e,r,n,s);break e}else if(r!==s){s=wi(Error(z(424)),e),e=_0(t,e,r,n,s);break e}else for(Mt=Ir(e.stateNode.containerInfo.firstChild),Ot=e,Te=!0,un=null,n=qv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yi(),r===s){e=Xn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return Bv(e),t===null&&bh(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,ph(r,s)?a=null:o!==null&&ph(r,o)&&(e.flags|=32),mb(t,e),yt(t,e,a,n),e.child;case 6:return t===null&&bh(e),null;case 13:return gb(t,e,n);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vi(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),v0(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,be(sc,r._currentValue),r._currentValue=a,o!==null)if(pn(o.value,a)){if(o.children===s.children&&!kt.current){e=Xn(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Gn(-1,n&-n),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),wh(o.return,n,e),c.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),wh(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,li(e,n),s=Zt(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=ln(r,e.pendingProps),s=ln(r.type,s),b0(t,e,r,s,n);case 15:return hb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ln(r,s),kl(t,e),e.tag=1,At(r)?(t=!0,tc(e)):t=!1,li(e,n),cb(e,r,s),jh(e,r,s,n),Th(null,e,r,!0,t,n);case 19:return xb(t,e,n);case 22:return fb(t,e,n)}throw Error(z(156,e.tag))};function Rb(t,e){return ov(t,e)}function JN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new JN(t,e,n,r)}function um(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XN(t){if(typeof t=="function")return um(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kf)return 11;if(t===Af)return 14}return 2}function Pr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pl(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")um(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Ws:return ds(n.children,s,o,e);case If:a=8,s|=8;break;case Wd:return t=Kt(12,n,e,s|2),t.elementType=Wd,t.lanes=o,t;case Qd:return t=Kt(13,n,e,s),t.elementType=Qd,t.lanes=o,t;case Kd:return t=Kt(19,n,e,s),t.elementType=Kd,t.lanes=o,t;case By:return Yc(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uy:a=10;break e;case zy:a=9;break e;case kf:a=11;break e;case Af:a=14;break e;case fr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Kt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function ds(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Yc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=By,t.lanes=n,t.stateNode={isHidden:!1},t}function gd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function xd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ZN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ju(0),this.expirationTimes=Ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ju(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,r,s,o,a,c,u){return t=new ZN(t,e,n,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Kt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qf(o),t}function eE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Db(t){if(!t)return Or;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(At(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(At(n))return Dv(t,n,e)}return e}function Lb(t,e,n,r,s,o,a,c,u){return t=dm(n,r,!0,t,s,o,a,c,u),t.context=Db(null),n=t.current,r=bt(),s=Cr(n),o=Gn(r,s),o.callback=e??null,kr(n,o,s),t.current.lanes=s,ga(t,s,r),Ct(t,r),t}function Jc(t,e,n,r){var s=e.current,o=bt(),a=Cr(s);return n=Db(n),e.context===null?e.context=n:e.pendingContext=n,e=Gn(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(s,e,a),t!==null&&(fn(t,s,a,o),Tl(t,s,a)),a}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hm(t,e){P0(t,e),(t=t.alternate)&&P0(t,e)}function tE(){return null}var Mb=typeof reportError=="function"?reportError:function(t){console.error(t)};function fm(t){this._internalRoot=t}Xc.prototype.render=fm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Jc(t,e,null,null)};Xc.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Jc(null,t,null,null)}),e[Yn]=null}};function Xc(t){this._internalRoot=t}Xc.prototype.unstable_scheduleHydration=function(t){if(t){var e=fv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&pv(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function R0(){}function nE(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=mc(a);o.call(d)}}var a=Lb(e,r,t,0,null,!1,!1,"",R0);return t._reactRootContainer=a,t[Yn]=a.current,Go(t.nodeType===8?t.parentNode:t),ys(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=mc(u);c.call(d)}}var u=dm(t,0,!1,null,null,!1,!1,"",R0);return t._reactRootContainer=u,t[Yn]=u.current,Go(t.nodeType===8?t.parentNode:t),ys(function(){Jc(e,u,n,r)}),u}function eu(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var c=s;s=function(){var u=mc(a);c.call(u)}}Jc(e,a,t,s)}else a=nE(n,e,t,s,r);return mc(a)}dv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fo(e.pendingLanes);n!==0&&(Rf(e,n|1),Ct(e,Me()),!(de&6)&&(_i=Me()+500,$r()))}break;case 13:ys(function(){var r=Jn(t,1);if(r!==null){var s=bt();fn(r,t,1,s)}}),hm(t,1)}};Df=function(t){if(t.tag===13){var e=Jn(t,134217728);if(e!==null){var n=bt();fn(e,t,134217728,n)}hm(t,134217728)}};hv=function(t){if(t.tag===13){var e=Cr(t),n=Jn(t,e);if(n!==null){var r=bt();fn(n,t,e,r)}hm(t,e)}};fv=function(){return xe};mv=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};ih=function(t,e,n){switch(e){case"input":if(Xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=$c(r);if(!s)throw Error(z(90));Gy(r),Xd(r,s)}}}break;case"textarea":Wy(t,n);break;case"select":e=n.value,e!=null&&si(t,!!n.multiple,e,!1)}};ev=am;tv=ys;var rE={usingClientEntryPoint:!1,Events:[ya,Js,$c,Xy,Zy,am]},lo={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sE={bundleType:lo.bundleType,version:lo.version,rendererPackageName:lo.rendererPackageName,rendererConfig:lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sv(t),t===null?null:t.stateNode},findFiberByHostInstance:lo.findFiberByHostInstance||tE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{qc=hl.inject(sE),Tn=hl}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rE;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(z(200));return eE(t,e,null,n)};zt.createRoot=function(t,e){if(!mm(t))throw Error(z(299));var n=!1,r="",s=Mb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,r,s),t[Yn]=e.current,Go(t.nodeType===8?t.parentNode:t),new fm(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=sv(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return ys(t)};zt.hydrate=function(t,e,n){if(!Zc(e))throw Error(z(200));return eu(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=Mb;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Lb(e,null,t,1,n??null,s,!1,o,a),t[Yn]=e.current,Go(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Xc(e)};zt.render=function(t,e,n){if(!Zc(e))throw Error(z(200));return eu(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!Zc(t))throw Error(z(40));return t._reactRootContainer?(ys(function(){eu(null,null,t,!1,function(){t._reactRootContainer=null,t[Yn]=null})}),!0):!1};zt.unstable_batchedUpdates=am;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return eu(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function Vb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vb)}catch(t){console.error(t)}}Vb(),Vy.exports=zt;var iE=Vy.exports,Ob,D0=iE;Ob=D0.createRoot,D0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ea.apply(this,arguments)}var _r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_r||(_r={}));const L0="popstate";function oE(t){t===void 0&&(t={});function e(r,s){let{pathname:o,search:a,hash:c}=r.location;return Oh("",{pathname:o,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pc(s)}return lE(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aE(){return Math.random().toString(36).substr(2,8)}function M0(t,e){return{usr:t.state,key:t.key,idx:e}}function Oh(t,e,n,r){return n===void 0&&(n=null),ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ri(e):e,{state:n,key:e&&e.key||r||aE()})}function pc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ri(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lE(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,c=_r.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(ea({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function f(){c=_r.Pop;let R=m(),j=R==null?null:R-d;d=R,u&&u({action:c,location:C.location,delta:j})}function g(R,j){c=_r.Push;let _=Oh(C.location,R,j);d=m()+1;let E=M0(_,d),L=C.createHref(_);try{a.pushState(E,"",L)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(L)}o&&u&&u({action:c,location:C.location,delta:1})}function w(R,j){c=_r.Replace;let _=Oh(C.location,R,j);d=m();let E=M0(_,d),L=C.createHref(_);a.replaceState(E,"",L),o&&u&&u({action:c,location:C.location,delta:0})}function S(R){let j=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof R=="string"?R:pc(R);return _=_.replace(/ $/,"%20"),Ve(j,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,j)}let C={get action(){return c},get location(){return t(s,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(L0,f),u=R,()=>{s.removeEventListener(L0,f),u=null}},createHref(R){return e(s,R)},createURL:S,encodeLocation(R){let j=S(R);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:g,replace:w,go(R){return a.go(R)}};return C}var V0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(V0||(V0={}));function cE(t,e,n){return n===void 0&&(n="/"),uE(t,e,n,!1)}function uE(t,e,n,r){let s=typeof e=="string"?Ri(e):e,o=pm(s.pathname||"/",n);if(o==null)return null;let a=qb(t);dE(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=_E(o);c=bE(a[u],d,r)}return c}function qb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Rr([r,u.relativePath]),m=n.concat(u);o.children&&o.children.length>0&&(Ve(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),qb(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:yE(d,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))s(o,a);else for(let u of Ub(o.path))s(o,a,u)}),e}function Ub(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return s?[o,""]:[o];let a=Ub(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function dE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hE=/^:[\w-]+$/,fE=3,mE=2,pE=1,gE=10,xE=-2,O0=t=>t==="*";function yE(t,e){let n=t.split("/"),r=n.length;return n.some(O0)&&(r+=xE),e&&(r+=mE),n.filter(s=>!O0(s)).reduce((s,o)=>s+(hE.test(o)?fE:o===""?pE:gE),r)}function vE(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function bE(t,e,n){let{routesMeta:r}=t,s={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",f=F0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=F0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:Rr([o,f.pathname]),pathnameBase:TE(Rr([o,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(o=Rr([o,f.pathnameBase]))}return a}function F0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wE(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,m,f)=>{let{paramName:g,isOptional:w}=m;if(g==="*"){let C=c[f]||"";a=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const S=c[f];return w&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function wE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _E(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function pm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function jE(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ri(t):t;return{pathname:n?n.startsWith("/")?n:NE(n,e):e,search:SE(r),hash:IE(s)}}function NE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function yd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gm(t,e){let n=EE(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ri(t):(s=ea({},t),Ve(!s.pathname||!s.pathname.includes("?"),yd("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),yd("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),yd("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,c;if(a==null)c=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;s.pathname=g.join("/")}c=f>=0?e[f]:"/"}let u=jE(s,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const Rr=t=>t.join("/").replace(/\/\/+/g,"/"),TE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const zb=["post","put","patch","delete"];new Set(zb);const AE=["get",...zb];new Set(AE);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ta(){return ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ta.apply(this,arguments)}const ym=A.createContext(null),CE=A.createContext(null),Gr=A.createContext(null),tu=A.createContext(null),sr=A.createContext({outlet:null,matches:[],isDataRoute:!1}),Bb=A.createContext(null);function PE(t,e){let{relative:n}=e===void 0?{}:e;Di()||Ve(!1);let{basename:r,navigator:s}=A.useContext(Gr),{hash:o,pathname:a,search:c}=Gb(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Rr([r,a])),s.createHref({pathname:u,search:c,hash:o})}function Di(){return A.useContext(tu)!=null}function ks(){return Di()||Ve(!1),A.useContext(tu).location}function $b(t){A.useContext(Gr).static||A.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=A.useContext(sr);return t?HE():RE()}function RE(){Di()||Ve(!1);let t=A.useContext(ym),{basename:e,future:n,navigator:r}=A.useContext(Gr),{matches:s}=A.useContext(sr),{pathname:o}=ks(),a=JSON.stringify(gm(s,n.v7_relativeSplatPath)),c=A.useRef(!1);return $b(()=>{c.current=!0}),A.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let f=xm(d,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Rr([e,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[e,r,a,o,t])}function DE(){let{matches:t}=A.useContext(sr),e=t[t.length-1];return e?e.params:{}}function Gb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Gr),{matches:s}=A.useContext(sr),{pathname:o}=ks(),a=JSON.stringify(gm(s,r.v7_relativeSplatPath));return A.useMemo(()=>xm(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function LE(t,e){return ME(t,e)}function ME(t,e,n,r){Di()||Ve(!1);let{navigator:s,static:o}=A.useContext(Gr),{matches:a}=A.useContext(sr),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let m=ks(),f;if(e){var g;let j=typeof e=="string"?Ri(e):e;d==="/"||(g=j.pathname)!=null&&g.startsWith(d)||Ve(!1),f=j}else f=m;let w=f.pathname||"/",S=w;if(d!=="/"){let j=d.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(j.length).join("/")}let C=!o&&n&&n.matches&&n.matches.length>0?n.matches:cE(t,{pathname:S}),R=UE(C&&C.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:Rr([d,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:Rr([d,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),a,n,r);return e&&R?A.createElement(tu.Provider,{value:{location:ta({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:_r.Pop}},R):R}function VE(){let t=GE(),e=kE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const OE=A.createElement(VE,null);class FE extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(sr.Provider,{value:this.props.routeContext},A.createElement(Bb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qE(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(ym);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(sr.Provider,{value:e},r)}function UE(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let m=a.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||Ve(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:g,errors:w}=n,S=f.route.loader&&g[f.route.id]===void 0&&(!w||w[f.route.id]===void 0);if(f.route.lazy||S){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,g)=>{let w,S=!1,C=null,R=null;n&&(w=c&&f.route.id?c[f.route.id]:void 0,C=f.route.errorElement||OE,u&&(d<0&&g===0?(S=!0,R=null):d===g&&(S=!0,R=f.route.hydrateFallbackElement||null)));let j=e.concat(a.slice(0,g+1)),_=()=>{let E;return w?E=C:S?E=R:f.route.Component?E=A.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,A.createElement(qE,{match:f,routeContext:{outlet:m,matches:j,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?A.createElement(FE,{location:n.location,revalidation:n.revalidation,component:C,error:w,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):_()},null)}var Hb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hb||{}),gc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gc||{});function zE(t){let e=A.useContext(ym);return e||Ve(!1),e}function BE(t){let e=A.useContext(CE);return e||Ve(!1),e}function $E(t){let e=A.useContext(sr);return e||Ve(!1),e}function Wb(t){let e=$E(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function GE(){var t;let e=A.useContext(Bb),n=BE(gc.UseRouteError),r=Wb(gc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HE(){let{router:t}=zE(Hb.UseNavigateStable),e=Wb(gc.UseNavigateStable),n=A.useRef(!1);return $b(()=>{n.current=!0}),A.useCallback(function(s,o){o===void 0&&(o={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ta({fromRouteId:e},o)))},[t,e])}function WE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Fh(t){let{to:e,replace:n,state:r,relative:s}=t;Di()||Ve(!1);let{future:o,static:a}=A.useContext(Gr),{matches:c}=A.useContext(sr),{pathname:u}=ks(),d=vn(),m=xm(e,gm(c,o.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(m);return A.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function Ie(t){Ve(!1)}function QE(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_r.Pop,navigator:o,static:a=!1,future:c}=t;Di()&&Ve(!1);let u=e.replace(/^\/*/,"/"),d=A.useMemo(()=>({basename:u,navigator:o,static:a,future:ta({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof r=="string"&&(r=Ri(r));let{pathname:m="/",search:f="",hash:g="",state:w=null,key:S="default"}=r,C=A.useMemo(()=>{let R=pm(m,u);return R==null?null:{location:{pathname:R,search:f,hash:g,state:w,key:S},navigationType:s}},[u,m,f,g,w,S,s]);return C==null?null:A.createElement(Gr.Provider,{value:d},A.createElement(tu.Provider,{children:n,value:C}))}function KE(t){let{children:e,location:n}=t;return LE(qh(e),n)}new Promise(()=>{});function qh(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let o=[...e,s];if(r.type===A.Fragment){n.push.apply(n,qh(r.props.children,o));return}r.type!==Ie&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=qh(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uh(){return Uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uh.apply(this,arguments)}function YE(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function JE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XE(t,e){return t.button===0&&(!e||e==="_self")&&!JE(t)}function zh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function ZE(t,e){let n=zh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(o=>{n.append(s,o)})}),n}const eT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tT="6";try{window.__reactRouterVersion=tT}catch{}const nT="startTransition",q0=Q2[nT];function rT(t){let{basename:e,children:n,future:r,window:s}=t,o=A.useRef();o.current==null&&(o.current=oE({window:s,v5Compat:!0}));let a=o.current,[c,u]=A.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},m=A.useCallback(f=>{d&&q0?q0(()=>u(f)):u(f)},[u,d]);return A.useLayoutEffect(()=>a.listen(m),[a,m]),A.useEffect(()=>WE(r),[r]),A.createElement(QE,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const sT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:f}=e,g=YE(e,eT),{basename:w}=A.useContext(Gr),S,C=!1;if(typeof d=="string"&&iT.test(d)&&(S=d,sT))try{let E=new URL(window.location.href),L=d.startsWith("//")?new URL(E.protocol+d):new URL(d),D=pm(L.pathname,w);L.origin===E.origin&&D!=null?d=D+L.search+L.hash:C=!0}catch{}let R=PE(d,{relative:s}),j=oT(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:s,viewTransition:f});function _(E){r&&r(E),E.defaultPrevented||j(E)}return A.createElement("a",Uh({},g,{href:S||R,onClick:C||o?r:_,ref:n,target:u}))});var U0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(U0||(U0={}));var z0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z0||(z0={}));function oT(t,e){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=vn(),d=ks(),m=Gb(t,{relative:a});return A.useCallback(f=>{if(XE(f,n)){f.preventDefault();let g=r!==void 0?r:pc(d)===pc(m);u(t,{replace:g,state:s,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,m,r,s,n,t,o,a,c])}function Qb(t){let e=A.useRef(zh(t)),n=A.useRef(!1),r=ks(),s=A.useMemo(()=>ZE(r.search,n.current?null:e.current),[r.search]),o=vn(),a=A.useCallback((c,u)=>{const d=zh(typeof c=="function"?c(s):c);n.current=!0,o("?"+d,u)},[o,s]);return[s,a]}var B0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},aT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Yb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,m=o>>2,f=(o&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(g=64)),r.push(n[m],n[f],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Kb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||d==null||f==null)throw new lT;const g=o<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),f!==64){const S=d<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cT=function(t){const e=Kb(t);return Yb.encodeByteArray(e,!0)},xc=function(t){return cT(t).replace(/\./g,"")},Jb=function(t){try{return Yb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=()=>uT().__FIREBASE_DEFAULTS__,hT=()=>{if(typeof process>"u"||typeof B0>"u")return;const t=B0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jb(t[1]);return e&&JSON.parse(e)},nu=()=>{try{return dT()||hT()||fT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Xb=t=>{var e,n;return(n=(e=nu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},mT=t=>{const e=Xb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Zb=()=>{var t;return(t=nu())===null||t===void 0?void 0:t.config},ew=t=>{var e;return(e=nu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xc(JSON.stringify(n)),xc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function yT(){var t;const e=(t=nu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bT(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wT(){return!yT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bm(){try{return typeof indexedDB=="object"}catch{return!1}}function wm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function tw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="FirebaseError";class bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_T,Object.setPrototypeOf(this,bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,As.prototype.create)}}class As{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?jT(o,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new bn(s,c,r)}}function jT(t,e){return t.replace(NT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const NT=/\{\$([^}]+)}/g;function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if($0(o)&&$0(a)){if(!na(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function po(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function go(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TT(t,e){const n=new ST(t,e);return n.subscribe.bind(n)}class ST{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vd),s.error===void 0&&(s.error=vd),s.complete===void 0&&(s.complete=vd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=1e3,AT=2,CT=4*60*60*1e3,PT=.5;function G0(t,e=kT,n=AT){const r=e*Math.pow(n,t),s=Math.round(PT*r*(Math.random()-.5)*2);return Math.min(CT,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LT(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DT(t){return t===ns?void 0:t}function LT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const VT={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},OT=ae.INFO,FT={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},qT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=FT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ru{constructor(e){this.name=e,this._logLevel=OT,this._logHandler=qT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const UT=(t,e)=>e.some(n=>t instanceof n);let H0,W0;function zT(){return H0||(H0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BT(){return W0||(W0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nw=new WeakMap,Bh=new WeakMap,rw=new WeakMap,bd=new WeakMap,_m=new WeakMap;function $T(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Dr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&nw.set(n,t)}).catch(()=>{}),_m.set(e,t),e}function GT(t){if(Bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Bh.set(t,e)}let $h={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function HT(t){$h=t($h)}function WT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wd(this),e,...n);return rw.set(r,e.sort?e.sort():[e]),Dr(r)}:BT().includes(t)?function(...e){return t.apply(wd(this),e),Dr(nw.get(this))}:function(...e){return Dr(t.apply(wd(this),e))}}function QT(t){return typeof t=="function"?WT(t):(t instanceof IDBTransaction&&GT(t),UT(t,zT())?new Proxy(t,$h):t)}function Dr(t){if(t instanceof IDBRequest)return $T(t);if(bd.has(t))return bd.get(t);const e=QT(t);return e!==t&&(bd.set(t,e),_m.set(e,t)),e}const wd=t=>_m.get(t);function sw(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),c=Dr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Dr(a.result),u.oldVersion,u.newVersion,Dr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const KT=["get","getKey","getAll","getAllKeys","count"],YT=["put","add","delete","clear"],_d=new Map;function Q0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_d.get(e))return _d.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=YT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KT.includes(n)))return;const o=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return _d.set(e,o),o}HT(t=>({...t,get:(e,n,r)=>Q0(e,n)||t.get(e,n,r),has:(e,n)=>!!Q0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",K0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=new ru("@firebase/app"),ZT="@firebase/app-compat",eS="@firebase/analytics-compat",tS="@firebase/analytics",nS="@firebase/app-check-compat",rS="@firebase/app-check",sS="@firebase/auth",iS="@firebase/auth-compat",oS="@firebase/database",aS="@firebase/database-compat",lS="@firebase/functions",cS="@firebase/functions-compat",uS="@firebase/installations",dS="@firebase/installations-compat",hS="@firebase/messaging",fS="@firebase/messaging-compat",mS="@firebase/performance",pS="@firebase/performance-compat",gS="@firebase/remote-config",xS="@firebase/remote-config-compat",yS="@firebase/storage",vS="@firebase/storage-compat",bS="@firebase/firestore",wS="@firebase/vertexai-preview",_S="@firebase/firestore-compat",jS="firebase",NS="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh="[DEFAULT]",ES={[Gh]:"fire-core",[ZT]:"fire-core-compat",[tS]:"fire-analytics",[eS]:"fire-analytics-compat",[rS]:"fire-app-check",[nS]:"fire-app-check-compat",[sS]:"fire-auth",[iS]:"fire-auth-compat",[oS]:"fire-rtdb",[aS]:"fire-rtdb-compat",[lS]:"fire-fn",[cS]:"fire-fn-compat",[uS]:"fire-iid",[dS]:"fire-iid-compat",[hS]:"fire-fcm",[fS]:"fire-fcm-compat",[mS]:"fire-perf",[pS]:"fire-perf-compat",[gS]:"fire-rc",[xS]:"fire-rc-compat",[yS]:"fire-gcs",[vS]:"fire-gcs-compat",[bS]:"fire-fst",[_S]:"fire-fst-compat",[wS]:"fire-vertex","fire-js":"fire-js",[jS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=new Map,TS=new Map,Wh=new Map;function Y0(t,e){try{t.container.addComponent(e)}catch(n){Zn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cn(t){const e=t.name;if(Wh.has(e))return Zn.debug(`There were multiple attempts to register component ${e}.`),!1;Wh.set(e,t);for(const n of yc.values())Y0(n,t);for(const n of TS.values())Y0(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new As("app","Firebase",SS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=NS;function iw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Lr.create("bad-app-name",{appName:String(s)});if(n||(n=Zb()),!n)throw Lr.create("no-options");const o=yc.get(s);if(o){if(na(n,o.options)&&na(r,o.config))return o;throw Lr.create("duplicate-app",{appName:s})}const a=new MT(s);for(const u of Wh.values())a.addComponent(u);const c=new IS(n,r,a);return yc.set(s,c),c}function jm(t=Hh){const e=yc.get(t);if(!e&&t===Hh&&Zb())return iw();if(!e)throw Lr.create("no-app",{appName:t});return e}function Jt(t,e,n){var r;let s=(r=ES[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Zn.warn(c.join(" "));return}Cn(new gn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="firebase-heartbeat-database",AS=1,ra="firebase-heartbeat-store";let jd=null;function ow(){return jd||(jd=sw(kS,AS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),jd}async function CS(t){try{const n=(await ow()).transaction(ra),r=await n.objectStore(ra).get(aw(t));return await n.done,r}catch(e){if(e instanceof bn)Zn.warn(e.message);else{const n=Lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Zn.warn(n.message)}}}async function J0(t,e){try{const r=(await ow()).transaction(ra,"readwrite");await r.objectStore(ra).put(e,aw(t)),await r.done}catch(n){if(n instanceof bn)Zn.warn(n.message);else{const r=Lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Zn.warn(r.message)}}}function aw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=1024,RS=30*24*60*60*1e3;class DS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=X0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=RS}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Zn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=X0(),{heartbeatsToSend:r,unsentEntries:s}=LS(this._heartbeatsCache.heartbeats),o=xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Zn.warn(n),""}}}function X0(){return new Date().toISOString().substring(0,10)}function LS(t,e=PS){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Z0(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Z0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bm()?wm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return J0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return J0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Z0(t){return xc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){Cn(new gn("platform-logger",e=>new JT(e),"PRIVATE")),Cn(new gn("heartbeat",e=>new DS(e),"PRIVATE")),Jt(Gh,K0,t),Jt(Gh,K0,"esm2017"),Jt("fire-js","")}VS("");function Nm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OS=lw,cw=new As("auth","Firebase",lw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc=new ru("@firebase/auth");function FS(t,...e){vc.logLevel<=ae.WARN&&vc.warn(`Auth (${Li}): ${t}`,...e)}function Rl(t,...e){vc.logLevel<=ae.ERROR&&vc.error(`Auth (${Li}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t,...e){throw Tm(t,...e)}function mn(t,...e){return Tm(t,...e)}function Em(t,e,n){const r=Object.assign(Object.assign({},OS()),{[e]:n});return new As("auth","Firebase",r).create(e,{appName:t.name})}function Hn(t){return Em(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&tn(t,"argument-error"),Em(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cw.create(t,...e)}function ee(t,e,...n){if(!t)throw Tm(e,...n)}function zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rl(e),new Error(e)}function er(t,e){t||zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function US(){return ex()==="http:"||ex()==="https:"}function ex(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(US()||vm()||"connection"in navigator)?navigator.onLine:!0}function BS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=xT()||vT()}get(){return zS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){er(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new wa(3e4,6e4);function ir(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wn(t,e,n,r,s={}){return dw(t,s,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const c=ba(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),uw.fetch()(hw(t,t.config.apiHost,n,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))})}async function dw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$S),e);try{const s=new WS(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw fl(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw fl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw fl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw fl(t,"user-disabled",a);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Em(t,m,d);tn(t,m)}}catch(s){if(s instanceof bn)throw s;tn(t,"network-request-failed",{message:String(s)})}}async function _a(t,e,n,r,s={}){const o=await wn(t,e,n,r,s);return"mfaPendingCredential"in o&&tn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function hw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`}function HS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),GS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mn(t,e,r);return s.customData._tokenResponse=n,s}function tx(t){return t!==void 0&&t.enterprise!==void 0}class QS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function KS(t,e){return wn(t,"GET","/v2/recaptchaConfig",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e){return wn(t,"POST","/v1/accounts:delete",e)}async function fw(t,e){return wn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JS(t,e=!1){const n=Se(t),r=await n.getIdToken(e),s=Im(r);ee(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:Co(Nd(s.auth_time)),issuedAtTime:Co(Nd(s.iat)),expirationTime:Co(Nd(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Nd(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Jb(n);return s?JSON.parse(s):(Rl("Failed to decode base64 JWT payload"),null)}catch(s){return Rl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function nx(t){const e=Im(t);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof bn&&XS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function XS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Co(this.lastLoginAt),this.creationTime=Co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await vs(t,fw(n,{idToken:r}));ee(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?mw(o.providerUserInfo):[],c=tI(t.providerData,a),u=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Kh(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,f)}async function eI(t){const e=Se(t);await bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mw(t){return t.map(e=>{var{providerId:n}=e,r=Nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(t,e){const n=await dw(t,{},async()=>{const r=ba({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=hw(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",uw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(t,e){return wn(t,"POST","/v2/accounts:revokeToken",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const n=nx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await nI(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,a=new ui;return r&&(ee(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ee(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(ee(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ui,this.toJSON())}_performRefresh(){return zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t,e){ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kh(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await vs(this,this.stsTokenManager.getToken(this.auth,e));return ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return JS(this,e)}reload(){return eI(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dn(this.auth.app))return Promise.reject(Hn(this.auth));const e=await this.getIdToken();return await vs(this,YS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,a,c,u,d,m;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,C=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,j=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:E,emailVerified:L,isAnonymous:D,providerData:V,stsTokenManager:N}=n;ee(E&&N,e,"internal-error");const x=ui.fromJSON(this.name,N);ee(typeof E=="string",e,"internal-error"),dr(f,e.name),dr(g,e.name),ee(typeof L=="boolean",e,"internal-error"),ee(typeof D=="boolean",e,"internal-error"),dr(w,e.name),dr(S,e.name),dr(C,e.name),dr(R,e.name),dr(j,e.name),dr(_,e.name);const y=new Bn({uid:E,auth:e,email:g,emailVerified:L,displayName:f,isAnonymous:D,photoURL:S,phoneNumber:w,tenantId:C,stsTokenManager:x,createdAt:j,lastLoginAt:_});return V&&Array.isArray(V)&&(y.providerData=V.map(v=>Object.assign({},v))),R&&(y._redirectEventId=R),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new ui;s.updateFromServerResponse(n);const o=new Bn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bc(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ee(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?mw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),c=new ui;c.updateFromIdToken(r);const u=new Bn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Kh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=new Map;function $n(t){er(t instanceof Function,"Expected a class definition");let e=rx.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,rx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pw.type="NONE";const sx=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(t,e,n){return`firebase:${t}:${e}:${n}`}class di{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Dl(this.userKey,s.apiKey,o),this.fullPersistenceKey=Dl("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new di($n(sx),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=s[0]||$n(sx);const a=Dl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const m=await d._get(a);if(m){const f=Bn._fromJSON(e,m);d!==o&&(c=f),o=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new di(o,e,r):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new di(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ww(e))return"Blackberry";if(_w(e))return"Webos";if(xw(e))return"Safari";if((e.includes("chrome/")||yw(e))&&!e.includes("edge/"))return"Chrome";if(bw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function gw(t=mt()){return/firefox\//i.test(t)}function xw(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yw(t=mt()){return/crios\//i.test(t)}function vw(t=mt()){return/iemobile/i.test(t)}function bw(t=mt()){return/android/i.test(t)}function ww(t=mt()){return/blackberry/i.test(t)}function _w(t=mt()){return/webos/i.test(t)}function km(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sI(t=mt()){var e;return km(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iI(){return bT()&&document.documentMode===10}function jw(t=mt()){return km(t)||bw(t)||_w(t)||ww(t)||/windows phone/i.test(t)||vw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nw(t,e=[]){let n;switch(t){case"Browser":n=ix(mt());break;case"Worker":n=`${ix(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Li}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,c)=>{try{const u=e(o);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aI(t,e={}){return wn(t,"GET","/v2/passwordPolicy",ir(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=6;class cI{constructor(e){var n,r,s,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:lI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ox(this),this.idTokenSubscription=new ox(this),this.beforeStateQueue=new oI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await di.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fw(this,{idToken:e}),r=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dn(this.app))return Promise.reject(Hn(this));const n=e?Se(e):null;return n&&ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dn(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dn(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aI(this),n=new cI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new As("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$n(e)||this._popupRedirectResolver;ee(n,this,"argument-error"),this.redirectPersistenceManager=await di.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Nw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&FS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function or(t){return Se(t)}class ox{constructor(e){this.auth=e,this.observer=null,this.addObserver=TT(n=>this.observer=n)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dI(t){su=t}function Ew(t){return su.loadJS(t)}function hI(){return su.recaptchaEnterpriseScript}function fI(){return su.gapiScript}function mI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pI="recaptcha-enterprise",gI="NO_RECAPTCHA";class xI{constructor(e){this.type=pI,this.auth=or(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{KS(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new QS(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(o,a,c){const u=window.grecaptcha;tx(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(gI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!n&&tx(window.grecaptcha))s(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=hI();u.length!==0&&(u+=c),Ew(u).then(()=>{s(c,o,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function ax(t,e,n,r=!1){const s=new xI(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function wc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ax(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ax(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(na(o,e??{}))return s;tn(s,"already-initialized")}return n.initialize({options:e})}function vI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($n);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bI(t,e,n){const r=or(t);ee(r._canInitEmulator,r,"emulator-config-failed"),ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Tw(e),{host:a,port:c}=wI(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),_I()}function Tw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function wI(t){const e=Tw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:lx(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:lx(a)}}}function lx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _I(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,n){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function jI(t,e){return wn(t,"POST","/v1/accounts:update",e)}async function NI(t,e){return wn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e){return _a(t,"POST","/v1/accounts:signInWithPassword",ir(t,e))}async function Sw(t,e){return wn(t,"POST","/v1/accounts:sendOobCode",ir(t,e))}async function TI(t,e){return Sw(t,e)}async function SI(t,e){return Sw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(t,e){return _a(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}async function kI(t,e){return _a(t,"POST","/v1/accounts:signInWithEmailLink",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Am{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wc(e,n,"signInWithPassword",EI);case"emailLink":return II(e,{email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wc(e,r,"signUpPassword",NI);case"emailLink":return kI(e,{idToken:n,email:this._email,oobCode:this._password});default:tn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hi(t,e){return _a(t,"POST","/v1/accounts:signInWithIdp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="http://localhost";class bs extends Am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Nm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new bs(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return hi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hi(e,n)}buildRequest(){const e={requestUri:AI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ba(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PI(t){const e=po(go(t)).link,n=e?po(go(e)).deep_link_id:null,r=po(go(t)).deep_link_id;return(r?po(go(r)).link:null)||r||n||e||t}class Cm{constructor(e){var n,r,s,o,a,c;const u=po(go(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,f=CI((s=u.mode)!==null&&s!==void 0?s:null);ee(d&&m&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=PI(e);try{return new Cm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.providerId=Ps.PROVIDER_ID}static credential(e,n){return sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Cm.parseLink(n);return ee(r,"argument-error"),sa._fromEmailAndCode(e,r.code,r.tenantId)}}Ps.PROVIDER_ID="password";Ps.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ps.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja extends Pm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends ja{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bs._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return On.credential(n,r)}catch{return null}}}On.GOOGLE_SIGN_IN_METHOD="google.com";On.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends ja{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends ja{constructor(){super("twitter.com")}static credential(e,n){return bs._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(t,e){return _a(t,"POST","/v1/accounts:signUp",ir(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Bn._fromIdTokenResponse(e,r,s),a=cx(r);return new ws({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=cx(r);return new ws({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function cx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends bn{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,_c.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new _c(e,n,r,s)}}function Iw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?_c._fromErrorAndOperation(t,o,e,r):o})}async function DI(t,e,n=!1){const r=await vs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ws._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kw(t,e,n=!1){const{auth:r}=t;if(dn(r.app))return Promise.reject(Hn(r));const s="reauthenticate";try{const o=await vs(t,Iw(r,s,e,t),n);ee(o.idToken,r,"internal-error");const a=Im(o.idToken);ee(a,r,"internal-error");const{sub:c}=a;return ee(t.uid===c,r,"user-mismatch"),ws._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&tn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aw(t,e,n=!1){if(dn(t.app))return Promise.reject(Hn(t));const r="signIn",s=await Iw(t,r,e),o=await ws._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function LI(t,e){return Aw(or(t),e)}async function MI(t,e){return kw(Se(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cw(t){const e=or(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Yh(t,e,n){const r=or(t);await wc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",SI)}async function Pw(t,e,n){if(dn(t.app))return Promise.reject(Hn(t));const r=or(t),a=await wc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RI).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Cw(t),u}),c=await ws._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Jh(t,e,n){return dn(t.app)?Promise.reject(Hn(t)):LI(Se(t),Ps.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Cw(t),r})}async function ux(t,e){const n=Se(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await TI(n.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return wn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rw(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Se(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await vs(r,VI(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function OI(t,e){return FI(Se(t),null,e)}async function FI(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(o.password=n);const a=await vs(t,jI(r,o));await t._updateTokensIfNecessary(a,!0)}function qI(t,e,n,r){return Se(t).onIdTokenChanged(e,n,r)}function UI(t,e,n){return Se(t).beforeAuthStateChanged(e,n)}function zI(t,e,n,r){return Se(t).onAuthStateChanged(e,n,r)}function BI(t){return Se(t).signOut()}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=1e3,GI=10;class Lw extends Dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);iI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lw.type="LOCAL";const HI=Lw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Mw.type="SESSION";const Vw=Mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,o)),u=await WI(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const d=Rm("",20);s.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return window}function KI(t){In().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(){return typeof In().WorkerGlobalScope<"u"&&typeof In().importScripts=="function"}async function YI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function XI(){return Ow()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="firebaseLocalStorageDb",ZI=1,Nc="firebaseLocalStorage",qw="fbase_key";class Na{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ou(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function ek(){const t=indexedDB.deleteDatabase(Fw);return new Na(t).toPromise()}function Xh(){const t=indexedDB.open(Fw,ZI);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nc,{keyPath:qw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nc)?e(r):(r.close(),await ek(),e(await Xh()))})})}async function dx(t,e,n){const r=ou(t,!0).put({[qw]:e,value:n});return new Na(r).toPromise()}async function tk(t,e){const n=ou(t,!1).get(e),r=await new Na(n).toPromise();return r===void 0?null:r.value}function hx(t,e){const n=ou(t,!0).delete(e);return new Na(n).toPromise()}const nk=800,rk=3;class Uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=iu._getInstance(XI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await YI(),!this.activeServiceWorker)return;this.sender=new QI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xh();return await dx(e,jc,"1"),await hx(e,jc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>dx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=ou(s,!1).getAll();return new Na(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Uw.type="LOCAL";const sk=Uw;new wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t,e){return e?$n(e):(ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm extends Am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ik(t){return Aw(t.auth,new Dm(t),t.bypassAuthState)}function ok(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),kw(n,new Dm(t),t.bypassAuthState)}async function ak(t){const{auth:e,user:n}=t;return ee(n,e,"internal-error"),DI(n,new Dm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ik;case"linkViaPopup":case"linkViaRedirect":return ak;case"reauthViaPopup":case"reauthViaRedirect":return ok;default:tn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=new wa(2e3,1e4);async function ck(t,e,n){if(dn(t.app))return Promise.reject(mn(t,"operation-not-supported-in-this-environment"));const r=or(t);qS(t,e,Pm);const s=zw(r,n);return new as(r,"signInViaPopup",e,s).executeNotNull()}class as extends Bw{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,as.currentPopupAction&&as.currentPopupAction.cancel(),as.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){er(this.filter.length===1,"Popup operations only handle one event");const e=Rm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,as.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lk.get())};e()}}as.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="pendingRedirect",Ll=new Map;class dk extends Bw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ll.get(this.auth._key());if(!e){try{const r=await hk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ll.set(this.auth._key(),e)}return this.bypassAuthState||Ll.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hk(t,e){const n=pk(e),r=mk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fk(t,e){Ll.set(t._key(),e)}function mk(t){return $n(t._redirectPersistence)}function pk(t){return Dl(uk,t.config.apiKey,t.name)}async function gk(t,e,n=!1){if(dn(t.app))return Promise.reject(Hn(t));const r=or(t),s=zw(r,e),a=await new dk(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk=10*60*1e3;class yk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$w(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xk&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $w({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $w(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bk(t,e={}){return wn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_k=/^https?/;async function jk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await bk(t);for(const n of e)try{if(Nk(n))return}catch{}tn(t,"unauthorized-domain")}function Nk(t){const e=Qh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!_k.test(n))return!1;if(wk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new wa(3e4,6e4);function mx(){const t=In().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Tk(t){return new Promise((e,n)=>{var r,s,o;function a(){mx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mx(),n(mn(t,"network-request-failed"))},timeout:Ek.get()})}if(!((s=(r=In().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=In().gapi)===null||o===void 0)&&o.load)a();else{const c=mI("iframefcb");return In()[c]=()=>{gapi.load?a():n(mn(t,"network-request-failed"))},Ew(`${fI()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Ml=null,e})}let Ml=null;function Sk(t){return Ml=Ml||Tk(t),Ml}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new wa(5e3,15e3),kk="__/auth/iframe",Ak="emulator/auth/iframe",Ck={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rk(t){const e=t.config;ee(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,Ak):`https://${t.config.authDomain}/${kk}`,r={apiKey:e.apiKey,appName:t.name,v:Li},s=Pk.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${ba(r).slice(1)}`}async function Dk(t){const e=await Sk(t),n=In().gapi;return ee(n,t,"internal-error"),e.open({where:document.body,url:Rk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ck,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=mn(t,"network-request-failed"),c=In().setTimeout(()=>{o(a)},Ik.get());function u(){In().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mk=500,Vk=600,Ok="_blank",Fk="http://localhost";class px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(t,e,n,r=Mk,s=Vk){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Lk),{width:r.toString(),height:s.toString(),top:o,left:a}),d=mt().toLowerCase();n&&(c=yw(d)?Ok:n),gw(d)&&(e=e||Fk,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[w,S])=>`${g}${w}=${S},`,"");if(sI(d)&&c!=="_self")return Uk(e||"",c),new px(null);const f=window.open(e||"",c,m);ee(f,t,"popup-blocked");try{f.focus()}catch{}return new px(f)}function Uk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="__/auth/handler",Bk="emulator/auth/handler",$k=encodeURIComponent("fac");async function gx(t,e,n,r,s,o){ee(t.config.authDomain,t,"auth-domain-config-required"),ee(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Li,eventId:s};if(e instanceof Pm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",ET(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))a[m]=f}if(e instanceof ja){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${$k}=${encodeURIComponent(u)}`:"";return`${Gk(t)}?${ba(c).slice(1)}${d}`}function Gk({config:t}){return t.emulator?Sm(t,Bk):`https://${t.authDomain}/${zk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="webStorageSupport";class Hk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vw,this._completeRedirectFn=gk,this._overrideRedirectResult=fk}async _openPopup(e,n,r,s){var o;er((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await gx(e,n,r,Qh(),s);return qk(e,a,Rm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await gx(e,n,r,Qh(),s);return KI(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(er(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Dk(e),r=new yk(e);return n.register("authEvent",s=>(ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ed,{type:Ed},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Ed];a!==void 0&&n(!!a),tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jw()||xw()||km()}}const Wk=Hk;var xx="@firebase/auth",yx="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yk(t){Cn(new gn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nw(t)},d=new uI(r,s,o,u);return vI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cn(new gn("auth-internal",e=>{const n=or(e.getProvider("auth").getImmediate());return(r=>new Qk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jt(xx,yx,Kk(t)),Jt(xx,yx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=5*60,Xk=ew("authIdTokenMaxAge")||Jk;let vx=null;const Zk=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Xk)return;const s=n==null?void 0:n.token;vx!==s&&(vx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eA(t=jm()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yI(t,{popupRedirectResolver:Wk,persistence:[sk,HI,Vw]}),r=ew("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=Zk(o.toString());UI(n,a,()=>a(n.currentUser)),qI(n,c=>a(c))}}const s=Xb("auth");return s&&bI(n,`http://${s}`),n}function tA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=mn("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",tA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yk("Browser");var nA="firebase",rA="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt(nA,rA,"app");var bx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,Gw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,x){function y(){}y.prototype=x.prototype,N.D=x.prototype,N.prototype=new y,N.prototype.constructor=N,N.C=function(v,k,P){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return x.prototype[k].apply(v,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,x,y){y||(y=0);var v=Array(16);if(typeof x=="string")for(var k=0;16>k;++k)v[k]=x.charCodeAt(y++)|x.charCodeAt(y++)<<8|x.charCodeAt(y++)<<16|x.charCodeAt(y++)<<24;else for(k=0;16>k;++k)v[k]=x[y++]|x[y++]<<8|x[y++]<<16|x[y++]<<24;x=N.g[0],y=N.g[1],k=N.g[2];var P=N.g[3],I=x+(P^y&(k^P))+v[0]+3614090360&4294967295;x=y+(I<<7&4294967295|I>>>25),I=P+(k^x&(y^k))+v[1]+3905402710&4294967295,P=x+(I<<12&4294967295|I>>>20),I=k+(y^P&(x^y))+v[2]+606105819&4294967295,k=P+(I<<17&4294967295|I>>>15),I=y+(x^k&(P^x))+v[3]+3250441966&4294967295,y=k+(I<<22&4294967295|I>>>10),I=x+(P^y&(k^P))+v[4]+4118548399&4294967295,x=y+(I<<7&4294967295|I>>>25),I=P+(k^x&(y^k))+v[5]+1200080426&4294967295,P=x+(I<<12&4294967295|I>>>20),I=k+(y^P&(x^y))+v[6]+2821735955&4294967295,k=P+(I<<17&4294967295|I>>>15),I=y+(x^k&(P^x))+v[7]+4249261313&4294967295,y=k+(I<<22&4294967295|I>>>10),I=x+(P^y&(k^P))+v[8]+1770035416&4294967295,x=y+(I<<7&4294967295|I>>>25),I=P+(k^x&(y^k))+v[9]+2336552879&4294967295,P=x+(I<<12&4294967295|I>>>20),I=k+(y^P&(x^y))+v[10]+4294925233&4294967295,k=P+(I<<17&4294967295|I>>>15),I=y+(x^k&(P^x))+v[11]+2304563134&4294967295,y=k+(I<<22&4294967295|I>>>10),I=x+(P^y&(k^P))+v[12]+1804603682&4294967295,x=y+(I<<7&4294967295|I>>>25),I=P+(k^x&(y^k))+v[13]+4254626195&4294967295,P=x+(I<<12&4294967295|I>>>20),I=k+(y^P&(x^y))+v[14]+2792965006&4294967295,k=P+(I<<17&4294967295|I>>>15),I=y+(x^k&(P^x))+v[15]+1236535329&4294967295,y=k+(I<<22&4294967295|I>>>10),I=x+(k^P&(y^k))+v[1]+4129170786&4294967295,x=y+(I<<5&4294967295|I>>>27),I=P+(y^k&(x^y))+v[6]+3225465664&4294967295,P=x+(I<<9&4294967295|I>>>23),I=k+(x^y&(P^x))+v[11]+643717713&4294967295,k=P+(I<<14&4294967295|I>>>18),I=y+(P^x&(k^P))+v[0]+3921069994&4294967295,y=k+(I<<20&4294967295|I>>>12),I=x+(k^P&(y^k))+v[5]+3593408605&4294967295,x=y+(I<<5&4294967295|I>>>27),I=P+(y^k&(x^y))+v[10]+38016083&4294967295,P=x+(I<<9&4294967295|I>>>23),I=k+(x^y&(P^x))+v[15]+3634488961&4294967295,k=P+(I<<14&4294967295|I>>>18),I=y+(P^x&(k^P))+v[4]+3889429448&4294967295,y=k+(I<<20&4294967295|I>>>12),I=x+(k^P&(y^k))+v[9]+568446438&4294967295,x=y+(I<<5&4294967295|I>>>27),I=P+(y^k&(x^y))+v[14]+3275163606&4294967295,P=x+(I<<9&4294967295|I>>>23),I=k+(x^y&(P^x))+v[3]+4107603335&4294967295,k=P+(I<<14&4294967295|I>>>18),I=y+(P^x&(k^P))+v[8]+1163531501&4294967295,y=k+(I<<20&4294967295|I>>>12),I=x+(k^P&(y^k))+v[13]+2850285829&4294967295,x=y+(I<<5&4294967295|I>>>27),I=P+(y^k&(x^y))+v[2]+4243563512&4294967295,P=x+(I<<9&4294967295|I>>>23),I=k+(x^y&(P^x))+v[7]+1735328473&4294967295,k=P+(I<<14&4294967295|I>>>18),I=y+(P^x&(k^P))+v[12]+2368359562&4294967295,y=k+(I<<20&4294967295|I>>>12),I=x+(y^k^P)+v[5]+4294588738&4294967295,x=y+(I<<4&4294967295|I>>>28),I=P+(x^y^k)+v[8]+2272392833&4294967295,P=x+(I<<11&4294967295|I>>>21),I=k+(P^x^y)+v[11]+1839030562&4294967295,k=P+(I<<16&4294967295|I>>>16),I=y+(k^P^x)+v[14]+4259657740&4294967295,y=k+(I<<23&4294967295|I>>>9),I=x+(y^k^P)+v[1]+2763975236&4294967295,x=y+(I<<4&4294967295|I>>>28),I=P+(x^y^k)+v[4]+1272893353&4294967295,P=x+(I<<11&4294967295|I>>>21),I=k+(P^x^y)+v[7]+4139469664&4294967295,k=P+(I<<16&4294967295|I>>>16),I=y+(k^P^x)+v[10]+3200236656&4294967295,y=k+(I<<23&4294967295|I>>>9),I=x+(y^k^P)+v[13]+681279174&4294967295,x=y+(I<<4&4294967295|I>>>28),I=P+(x^y^k)+v[0]+3936430074&4294967295,P=x+(I<<11&4294967295|I>>>21),I=k+(P^x^y)+v[3]+3572445317&4294967295,k=P+(I<<16&4294967295|I>>>16),I=y+(k^P^x)+v[6]+76029189&4294967295,y=k+(I<<23&4294967295|I>>>9),I=x+(y^k^P)+v[9]+3654602809&4294967295,x=y+(I<<4&4294967295|I>>>28),I=P+(x^y^k)+v[12]+3873151461&4294967295,P=x+(I<<11&4294967295|I>>>21),I=k+(P^x^y)+v[15]+530742520&4294967295,k=P+(I<<16&4294967295|I>>>16),I=y+(k^P^x)+v[2]+3299628645&4294967295,y=k+(I<<23&4294967295|I>>>9),I=x+(k^(y|~P))+v[0]+4096336452&4294967295,x=y+(I<<6&4294967295|I>>>26),I=P+(y^(x|~k))+v[7]+1126891415&4294967295,P=x+(I<<10&4294967295|I>>>22),I=k+(x^(P|~y))+v[14]+2878612391&4294967295,k=P+(I<<15&4294967295|I>>>17),I=y+(P^(k|~x))+v[5]+4237533241&4294967295,y=k+(I<<21&4294967295|I>>>11),I=x+(k^(y|~P))+v[12]+1700485571&4294967295,x=y+(I<<6&4294967295|I>>>26),I=P+(y^(x|~k))+v[3]+2399980690&4294967295,P=x+(I<<10&4294967295|I>>>22),I=k+(x^(P|~y))+v[10]+4293915773&4294967295,k=P+(I<<15&4294967295|I>>>17),I=y+(P^(k|~x))+v[1]+2240044497&4294967295,y=k+(I<<21&4294967295|I>>>11),I=x+(k^(y|~P))+v[8]+1873313359&4294967295,x=y+(I<<6&4294967295|I>>>26),I=P+(y^(x|~k))+v[15]+4264355552&4294967295,P=x+(I<<10&4294967295|I>>>22),I=k+(x^(P|~y))+v[6]+2734768916&4294967295,k=P+(I<<15&4294967295|I>>>17),I=y+(P^(k|~x))+v[13]+1309151649&4294967295,y=k+(I<<21&4294967295|I>>>11),I=x+(k^(y|~P))+v[4]+4149444226&4294967295,x=y+(I<<6&4294967295|I>>>26),I=P+(y^(x|~k))+v[11]+3174756917&4294967295,P=x+(I<<10&4294967295|I>>>22),I=k+(x^(P|~y))+v[2]+718787259&4294967295,k=P+(I<<15&4294967295|I>>>17),I=y+(P^(k|~x))+v[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+P&4294967295}r.prototype.u=function(N,x){x===void 0&&(x=N.length);for(var y=x-this.blockSize,v=this.B,k=this.h,P=0;P<x;){if(k==0)for(;P<=y;)s(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<x;)if(v[k++]=N.charCodeAt(P++),k==this.blockSize){s(this,v),k=0;break}}else for(;P<x;)if(v[k++]=N[P++],k==this.blockSize){s(this,v),k=0;break}}this.h=k,this.o+=x},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;var y=8*this.o;for(x=N.length-8;x<N.length;++x)N[x]=y&255,y/=256;for(this.u(N),N=Array(16),x=y=0;4>x;++x)for(var v=0;32>v;v+=8)N[y++]=this.g[x]>>>v&255;return N};function o(N,x){var y=c;return Object.prototype.hasOwnProperty.call(y,N)?y[N]:y[N]=x(N)}function a(N,x){this.h=x;for(var y=[],v=!0,k=N.length-1;0<=k;k--){var P=N[k]|0;v&&P==x||(y[k]=P,v=!1)}this.g=y}var c={};function u(N){return-128<=N&&128>N?o(N,function(x){return new a([x|0],0>x?-1:0)}):new a([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return R(d(-N));for(var x=[],y=1,v=0;N>=y;v++)x[v]=N/y|0,y*=4294967296;return new a(x,0)}function m(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return R(m(N.substring(1),x));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(x,8)),v=f,k=0;k<N.length;k+=8){var P=Math.min(8,N.length-k),I=parseInt(N.substring(k,k+P),x);8>P?(P=d(Math.pow(x,P)),v=v.j(P).add(d(I))):(v=v.j(y),v=v.add(d(I)))}return v}var f=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(C(this))return-R(this).m();for(var N=0,x=1,y=0;y<this.g.length;y++){var v=this.i(y);N+=(0<=v?v:4294967296+v)*x,x*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(S(this))return"0";if(C(this))return"-"+R(this).toString(N);for(var x=d(Math.pow(N,6)),y=this,v="";;){var k=L(y,x).g;y=j(y,k.j(x));var P=((0<y.g.length?y.g[0]:y.h)>>>0).toString(N);if(y=k,S(y))return P+v;for(;6>P.length;)P="0"+P;v=P+v}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function S(N){if(N.h!=0)return!1;for(var x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function C(N){return N.h==-1}t.l=function(N){return N=j(this,N),C(N)?-1:S(N)?0:1};function R(N){for(var x=N.g.length,y=[],v=0;v<x;v++)y[v]=~N.g[v];return new a(y,~N.h).add(g)}t.abs=function(){return C(this)?R(this):this},t.add=function(N){for(var x=Math.max(this.g.length,N.g.length),y=[],v=0,k=0;k<=x;k++){var P=v+(this.i(k)&65535)+(N.i(k)&65535),I=(P>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);v=I>>>16,P&=65535,I&=65535,y[k]=I<<16|P}return new a(y,y[y.length-1]&-2147483648?-1:0)};function j(N,x){return N.add(R(x))}t.j=function(N){if(S(this)||S(N))return f;if(C(this))return C(N)?R(this).j(R(N)):R(R(this).j(N));if(C(N))return R(this.j(R(N)));if(0>this.l(w)&&0>N.l(w))return d(this.m()*N.m());for(var x=this.g.length+N.g.length,y=[],v=0;v<2*x;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var k=0;k<N.g.length;k++){var P=this.i(v)>>>16,I=this.i(v)&65535,le=N.i(k)>>>16,pe=N.i(k)&65535;y[2*v+2*k]+=I*pe,_(y,2*v+2*k),y[2*v+2*k+1]+=P*pe,_(y,2*v+2*k+1),y[2*v+2*k+1]+=I*le,_(y,2*v+2*k+1),y[2*v+2*k+2]+=P*le,_(y,2*v+2*k+2)}for(v=0;v<x;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=x;v<2*x;v++)y[v]=0;return new a(y,0)};function _(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function E(N,x){this.g=N,this.h=x}function L(N,x){if(S(x))throw Error("division by zero");if(S(N))return new E(f,f);if(C(N))return x=L(R(N),x),new E(R(x.g),R(x.h));if(C(x))return x=L(N,R(x)),new E(R(x.g),x.h);if(30<N.g.length){if(C(N)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var y=g,v=x;0>=v.l(N);)y=D(y),v=D(v);var k=V(y,1),P=V(v,1);for(v=V(v,2),y=V(y,2);!S(v);){var I=P.add(v);0>=I.l(N)&&(k=k.add(y),P=I),v=V(v,1),y=V(y,1)}return x=j(N,k.j(x)),new E(k,x)}for(k=f;0<=N.l(x);){for(y=Math.max(1,Math.floor(N.m()/x.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),P=d(y),I=P.j(x);C(I)||0<I.l(N);)y-=v,P=d(y),I=P.j(x);S(P)&&(P=g),k=k.add(P),N=j(N,I)}return new E(k,N)}t.A=function(N){return L(this,N).h},t.and=function(N){for(var x=Math.max(this.g.length,N.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)&N.i(v);return new a(y,this.h&N.h)},t.or=function(N){for(var x=Math.max(this.g.length,N.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)|N.i(v);return new a(y,this.h|N.h)},t.xor=function(N){for(var x=Math.max(this.g.length,N.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)^N.i(v);return new a(y,this.h^N.h)};function D(N){for(var x=N.g.length+1,y=[],v=0;v<x;v++)y[v]=N.i(v)<<1|N.i(v-1)>>>31;return new a(y,N.h)}function V(N,x){var y=x>>5;x%=32;for(var v=N.g.length-y,k=[],P=0;P<v;P++)k[P]=0<x?N.i(P+y)>>>x|N.i(P+y+1)<<32-x:N.i(P+y);return new a(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Gw=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,hs=a}).apply(typeof bx<"u"?bx:typeof self<"u"?self:typeof window<"u"?window:{});var ml=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hw,Ww,xo,Qw,Vl,Zh,Kw,Yw,Jw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ml=="object"&&ml];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var b=0;b<l.length-1;b++){var M=l[b];if(!(M in p))break e;p=p[M]}l=l[l.length-1],b=p[l],h=h(b),h!=b&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,b=!1,M={next:function(){if(!b&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return b=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,b),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,g.apply(null,arguments)}function w(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(b,M,O){for(var $=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)$[ye-2]=arguments[ye];return h.prototype[M].apply(b,$)}}function C(l){const h=l.length;if(0<h){const p=Array(h);for(let b=0;b<h;b++)p[b]=l[b];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(u(b)){const M=l.length||0,O=b.length||0;l.length=M+O;for(let $=0;$<O;$++)l[M+$]=b[$]}else l.push(b)}}class j{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(l){return/^[\s\xa0]*$/.test(l)}function E(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function L(l){return L[" "](l),l}L[" "]=function(){};var D=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function V(l,h,p){for(const b in l)h.call(p,l[b],b,l)}function N(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function x(l){const h={};for(const p in l)h[p]=l[p];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(l,h){let p,b;for(let M=1;M<arguments.length;M++){b=arguments[M];for(p in b)l[p]=b[p];for(let O=0;O<y.length;O++)p=y[O],Object.prototype.hasOwnProperty.call(b,p)&&(l[p]=b[p])}}function k(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){c.setTimeout(()=>{throw l},0)}function I(){var l=H;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class le{constructor(){this.h=this.g=null}add(h,p){const b=pe.get();b.set(h,p),this.h?this.h.next=b:this.g=b,this.h=b}}var pe=new j(()=>new Ge,l=>l.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let G,B=!1,H=new le,Z=()=>{const l=c.Promise.resolve(void 0);G=()=>{l.then(he)}};var he=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){P(p)}var h=pe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function ge(){this.s=this.s,this.C=this.C}ge.prototype.s=!1,ge.prototype.ma=function(){this.s||(this.s=!0,this.N())},ge.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Nt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function nn(l,h){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{L(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:rn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&nn.aa.h.call(this)}}S(nn,we);var rn={2:"touch",3:"pen",4:"mouse"};nn.prototype.h=function(){nn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var sn="closure_listenable_"+(1e6*Math.random()|0),Ra=0;function Da(l,h,p,b,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!b,this.ha=M,this.key=++Ra,this.da=this.fa=!1}function Ms(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Vs(l){this.src=l,this.g={},this.h=0}Vs.prototype.add=function(l,h,p,b,M){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var $=Rt(l,h,b,M);return-1<$?(h=l[$],p||(h.fa=!1)):(h=new Da(h,this.src,O,!!b,M),h.fa=p,l.push(h)),h};function Qr(l,h){var p=h.type;if(p in l.g){var b=l.g[p],M=Array.prototype.indexOf.call(b,h,void 0),O;(O=0<=M)&&Array.prototype.splice.call(b,M,1),O&&(Ms(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Rt(l,h,p,b){for(var M=0;M<l.length;++M){var O=l[M];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==b)return M}return-1}var q="closure_lm_"+(1e6*Math.random()|0),ie={};function $t(l,h,p,b,M){if(Array.isArray(h)){for(var O=0;O<h.length;O++)$t(l,h[O],p,b,M);return null}return p=Ap(p),l&&l[sn]?l.K(h,p,d(b)?!!b.capture:!!b,M):Gt(l,h,p,!1,b,M)}function Gt(l,h,p,b,M,O){if(!h)throw Error("Invalid event type");var $=d(M)?!!M.capture:!!M,ye=Iu(l);if(ye||(l[q]=ye=new Vs(l)),p=ye.add(h,p,b,$,O),p.proxy)return p;if(b=n2(),p.proxy=b,b.src=l,b.listener=p,l.addEventListener)Nt||(M=$),M===void 0&&(M=!1),l.addEventListener(h.toString(),b,M);else if(l.attachEvent)l.attachEvent(kp(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function n2(){function l(p){return h.call(l.src,l.listener,p)}const h=r2;return l}function Ip(l,h,p,b,M){if(Array.isArray(h))for(var O=0;O<h.length;O++)Ip(l,h[O],p,b,M);else b=d(b)?!!b.capture:!!b,p=Ap(p),l&&l[sn]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Rt(O,p,b,M),-1<p&&(Ms(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Iu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Rt(h,p,b,M)),(p=-1<l?h[l]:null)&&Su(p))}function Su(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[sn])Qr(h.i,l);else{var p=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(p,b,l.capture):h.detachEvent?h.detachEvent(kp(p),b):h.addListener&&h.removeListener&&h.removeListener(b),(p=Iu(h))?(Qr(p,l),p.h==0&&(p.src=null,h[q]=null)):Ms(l)}}}function kp(l){return l in ie?ie[l]:ie[l]="on"+l}function r2(l,h){if(l.da)l=!0;else{h=new nn(h,this);var p=l.listener,b=l.ha||l.src;l.fa&&Su(l),l=p.call(b,h)}return l}function Iu(l){return l=l[q],l instanceof Vs?l:null}var ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ap(l){return typeof l=="function"?l:(l[ku]||(l[ku]=function(h){return l.handleEvent(h)}),l[ku])}function rt(){ge.call(this),this.i=new Vs(this),this.M=this,this.F=null}S(rt,ge),rt.prototype[sn]=!0,rt.prototype.removeEventListener=function(l,h,p,b){Ip(this,l,h,p,b)};function gt(l,h){var p,b=l.F;if(b)for(p=[];b;b=b.F)p.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new we(h,l);else if(h instanceof we)h.target=h.target||l;else{var M=h;h=new we(b,l),v(h,M)}if(M=!0,p)for(var O=p.length-1;0<=O;O--){var $=h.g=p[O];M=La($,b,!0,h)&&M}if($=h.g=l,M=La($,b,!0,h)&&M,M=La($,b,!1,h)&&M,p)for(O=0;O<p.length;O++)$=h.g=p[O],M=La($,b,!1,h)&&M}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],b=0;b<p.length;b++)Ms(p[b]);delete l.g[h],l.h--}}this.F=null},rt.prototype.K=function(l,h,p,b){return this.i.add(String(l),h,!1,p,b)},rt.prototype.L=function(l,h,p,b){return this.i.add(String(l),h,!0,p,b)};function La(l,h,p,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,O=0;O<h.length;++O){var $=h[O];if($&&!$.da&&$.capture==p){var ye=$.listener,Ke=$.ha||$.src;$.fa&&Qr(l.i,$),M=ye.call(Ke,b)!==!1&&M}}return M&&!b.defaultPrevented}function Cp(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Pp(l){l.g=Cp(()=>{l.g=null,l.i&&(l.i=!1,Pp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class s2 extends ge{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Pp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ui(l){ge.call(this),this.h=l,this.g={}}S(Ui,ge);var Rp=[];function Dp(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&Su(h)},l),l.g={}}Ui.prototype.N=function(){Ui.aa.N.call(this),Dp(this)},Ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Au=c.JSON.stringify,i2=c.JSON.parse,o2=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Cu(){}Cu.prototype.h=null;function Lp(l){return l.h||(l.h=l.i())}function Mp(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pu(){we.call(this,"d")}S(Pu,we);function Ru(){we.call(this,"c")}S(Ru,we);var Kr={},Vp=null;function Ma(){return Vp=Vp||new rt}Kr.La="serverreachability";function Op(l){we.call(this,Kr.La,l)}S(Op,we);function Bi(l){const h=Ma();gt(h,new Op(h))}Kr.STAT_EVENT="statevent";function Fp(l,h){we.call(this,Kr.STAT_EVENT,l),this.stat=h}S(Fp,we);function xt(l){const h=Ma();gt(h,new Fp(h,l))}Kr.Ma="timingevent";function qp(l,h){we.call(this,Kr.Ma,l),this.size=h}S(qp,we);function $i(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Gi(){this.g=!0}Gi.prototype.xa=function(){this.g=!1};function a2(l,h,p,b,M,O){l.info(function(){if(l.g)if(O)for(var $="",ye=O.split("&"),Ke=0;Ke<ye.length;Ke++){var fe=ye[Ke].split("=");if(1<fe.length){var st=fe[0];fe=fe[1];var it=st.split("_");$=2<=it.length&&it[1]=="type"?$+(st+"="+fe+"&"):$+(st+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+b+") [attempt "+M+"]: "+h+`
`+p+`
`+$})}function l2(l,h,p,b,M,O,$){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+M+"]: "+h+`
`+p+`
`+O+" "+$})}function Os(l,h,p,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+u2(l,p)+(b?" "+b:"")})}function c2(l,h){l.info(function(){return"TIMEOUT: "+h})}Gi.prototype.info=function(){};function u2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var b=p[l];if(!(2>b.length)){var M=b[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return Au(p)}catch{return h}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Up={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Du;function Oa(){}S(Oa,Cu),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},Du=new Oa;function ar(l,h,p,b){this.j=l,this.i=h,this.l=p,this.R=b||1,this.U=new Ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zp}function zp(){this.i=null,this.g="",this.h=!1}var Bp={},Lu={};function Mu(l,h,p){l.L=1,l.v=za(Rn(h)),l.m=p,l.P=!0,$p(l,null)}function $p(l,h){l.F=Date.now(),Fa(l),l.A=Rn(l.v);var p=l.A,b=l.R;Array.isArray(b)||(b=[String(b)]),sg(p.i,"t",b),l.C=0,p=l.j.J,l.h=new zp,l.g=_g(l.j,p?h:null,!l.m),0<l.O&&(l.M=new s2(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,b=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Rp[0]=M.toString()),M=Rp);for(var O=0;O<M.length;O++){var $=$t(p,M[O],b||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Bi(),a2(l.i,l.u,l.A,l.l,l.R,l.m)}ar.prototype.ca=function(l){l=l.target;const h=this.M;h&&Dn(l)==3?h.j():this.Y(l)},ar.prototype.Y=function(l){try{if(l==this.g)e:{const it=Dn(this.g);var h=this.g.Ba();const Us=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||dg(this.g)))){this.J||it!=4||h==7||(h==8||0>=Us?Bi(3):Bi(2)),Vu(this);var p=this.g.Z();this.X=p;t:if(Gp(this)){var b=dg(this.g);l="";var M=b.length,O=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yr(this),Hi(this);var $="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(b[h],{stream:!(O&&h==M-1)});b.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,l2(this.i,this.u,this.A,this.l,this.R,it,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ke=this.g;if((ye=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ye)){var fe=ye;break t}}fe=null}if(p=fe)Os(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ou(this,p);else{this.o=!1,this.s=3,xt(12),Yr(this),Hi(this);break e}}if(this.P){p=!0;let on;for(;!this.J&&this.C<$.length;)if(on=d2(this,$),on==Lu){it==4&&(this.s=4,xt(14),p=!1),Os(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Bp){this.s=4,xt(15),Os(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Os(this.i,this.l,on,null),Ou(this,on);if(Gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||$.length!=0||this.h.h||(this.s=1,xt(16),p=!1),this.o=this.o&&p,!p)Os(this.i,this.l,$,"[Invalid Chunked Response]"),Yr(this),Hi(this);else if(0<$.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),$u(st),st.M=!0,xt(11))}}else Os(this.i,this.l,$,null),Ou(this,$);it==4&&Yr(this),this.o&&!this.J&&(it==4?yg(this.j,this):(this.o=!1,Fa(this)))}else I2(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Yr(this),Hi(this)}}}catch{}finally{}};function Gp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function d2(l,h){var p=l.C,b=h.indexOf(`
`,p);return b==-1?Lu:(p=Number(h.substring(p,b)),isNaN(p)?Bp:(b+=1,b+p>h.length?Lu:(h=h.slice(b,b+p),l.C=b+p,h)))}ar.prototype.cancel=function(){this.J=!0,Yr(this)};function Fa(l){l.S=Date.now()+l.I,Hp(l,l.I)}function Hp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=$i(g(l.ba,l),h)}function Vu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}ar.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(c2(this.i,this.A),this.L!=2&&(Bi(),xt(17)),Yr(this),this.s=2,Hi(this)):Hp(this,this.S-l)};function Hi(l){l.j.G==0||l.J||yg(l.j,l)}function Yr(l){Vu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Dp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ou(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Fu(p.h,l))){if(!l.K&&Fu(p.h,l)&&p.G==3){try{var b=p.Da.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var M=b;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Wa(p),Ga(p);else break e;Bu(p),xt(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=$i(g(p.Za,p),6e3));if(1>=Kp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Xr(p,11)}else if((l.K||p.g==l)&&Wa(p),!_(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let fe=M[h];if(p.T=fe[0],fe=fe[1],p.G==2)if(fe[0]=="c"){p.K=fe[1],p.ia=fe[2];const st=fe[3];st!=null&&(p.la=st,p.j.info("VER="+p.la));const it=fe[4];it!=null&&(p.Aa=it,p.j.info("SVER="+p.Aa));const Us=fe[5];Us!=null&&typeof Us=="number"&&0<Us&&(b=1.5*Us,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const on=l.g;if(on){const Ka=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ka){var O=b.h;O.g||Ka.indexOf("spdy")==-1&&Ka.indexOf("quic")==-1&&Ka.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(qu(O,O.h),O.h=null))}if(b.D){const Gu=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Gu&&(b.ya=Gu,_e(b.I,b.D,Gu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var $=l;if(b.qa=wg(b,b.J?b.ia:null,b.W),$.K){Yp(b.h,$);var ye=$,Ke=b.L;Ke&&(ye.I=Ke),ye.B&&(Vu(ye),Fa(ye)),b.g=$}else gg(b);0<p.i.length&&Ha(p)}else fe[0]!="stop"&&fe[0]!="close"||Xr(p,7);else p.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Xr(p,7):zu(p):fe[0]!="noop"&&p.l&&p.l.ta(fe),p.v=0)}}Bi(4)}catch{}}var h2=class{constructor(l,h){this.g=l,this.map=h}};function Wp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Kp(l){return l.h?1:l.g?l.g.size:0}function Fu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function qu(l,h){l.g?l.g.add(h):l.h=h}function Yp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Wp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Jp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return C(l.i)}function f2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,b=0;b<p;b++)h.push(l[b]);return h}h=[],p=0;for(b in l)h[p++]=l[b];return h}function m2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const b in l)h[p++]=b;return h}}}function Xp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=m2(l),b=f2(l),M=b.length,O=0;O<M;O++)h.call(void 0,b[O],p&&p[O],l)}var Zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var b=l[p].indexOf("="),M=null;if(0<=b){var O=l[p].substring(0,b);M=l[p].substring(b+1)}else O=l[p];h(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Jr){this.h=l.h,qa(this,l.j),this.o=l.o,this.g=l.g,Ua(this,l.s),this.l=l.l;var h=l.i,p=new Ki;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),eg(this,p),this.m=l.m}else l&&(h=String(l).match(Zp))?(this.h=!1,qa(this,h[1]||"",!0),this.o=Wi(h[2]||""),this.g=Wi(h[3]||"",!0),Ua(this,h[4]),this.l=Wi(h[5]||"",!0),eg(this,h[6]||"",!0),this.m=Wi(h[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}Jr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Qi(h,tg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Qi(h,tg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Qi(p,p.charAt(0)=="/"?y2:x2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Qi(p,b2)),l.join("")};function Rn(l){return new Jr(l)}function qa(l,h,p){l.j=p?Wi(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Ua(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function eg(l,h,p){h instanceof Ki?(l.i=h,w2(l.i,l.h)):(p||(h=Qi(h,v2)),l.i=new Ki(h,l.h))}function _e(l,h,p){l.i.set(h,p)}function za(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Wi(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Qi(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,g2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function g2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var tg=/[#\/\?@]/g,x2=/[#\?:]/g,y2=/[#\?]/g,v2=/[#\?@]/g,b2=/#/g;function Ki(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function lr(l){l.g||(l.g=new Map,l.h=0,l.i&&p2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ki.prototype,t.add=function(l,h){lr(this),this.i=null,l=Fs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function ng(l,h){lr(l),h=Fs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function rg(l,h){return lr(l),h=Fs(l,h),l.g.has(h)}t.forEach=function(l,h){lr(this),this.g.forEach(function(p,b){p.forEach(function(M){l.call(h,M,b,this)},this)},this)},t.na=function(){lr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let b=0;b<h.length;b++){const M=l[b];for(let O=0;O<M.length;O++)p.push(h[b])}return p},t.V=function(l){lr(this);let h=[];if(typeof l=="string")rg(this,l)&&(h=h.concat(this.g.get(Fs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return lr(this),this.i=null,l=Fs(this,l),rg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function sg(l,h,p){ng(l,h),0<p.length&&(l.i=null,l.g.set(Fs(l,h),C(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var b=h[p];const O=encodeURIComponent(String(b)),$=this.V(b);for(b=0;b<$.length;b++){var M=O;$[b]!==""&&(M+="="+encodeURIComponent(String($[b]))),l.push(M)}}return this.i=l.join("&")};function Fs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function w2(l,h){h&&!l.j&&(lr(l),l.i=null,l.g.forEach(function(p,b){var M=b.toLowerCase();b!=M&&(ng(this,b),sg(this,M,p))},l)),l.j=h}function _2(l,h){const p=new Gi;if(c.Image){const b=new Image;b.onload=w(cr,p,"TestLoadImage: loaded",!0,h,b),b.onerror=w(cr,p,"TestLoadImage: error",!1,h,b),b.onabort=w(cr,p,"TestLoadImage: abort",!1,h,b),b.ontimeout=w(cr,p,"TestLoadImage: timeout",!1,h,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function j2(l,h){const p=new Gi,b=new AbortController,M=setTimeout(()=>{b.abort(),cr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(O=>{clearTimeout(M),O.ok?cr(p,"TestPingServer: ok",!0,h):cr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),cr(p,"TestPingServer: error",!1,h)})}function cr(l,h,p,b,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),b(p)}catch{}}function N2(){this.g=new o2}function E2(l,h,p){const b=p||"";try{Xp(l,function(M,O){let $=M;d(M)&&($=Au(M)),h.push(b+O+"="+encodeURIComponent($))})}catch(M){throw h.push(b+"type="+encodeURIComponent("_badmap")),M}}function Yi(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Yi,Cu),Yi.prototype.g=function(){return new Ba(this.l,this.j)},Yi.prototype.i=function(l){return function(){return l}}({});function Ba(l,h){rt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ba,rt),t=Ba.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Xi(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Xi(this)),this.g&&(this.readyState=3,Xi(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ji(this):Xi(this),this.readyState==3&&ig(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ji(this))},t.Qa=function(l){this.g&&(this.response=l,Ji(this))},t.ga=function(){this.g&&Ji(this)};function Ji(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Xi(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Xi(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ba.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function og(l){let h="";return V(l,function(p,b){h+=b,h+=":",h+=p,h+=`\r
`}),h}function Uu(l,h,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=og(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):_e(l,h,p))}function Re(l){rt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Re,rt);var T2=/^https?$/i,S2=["POST","PUT"];t=Re.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Du.g(),this.v=this.o?Lp(this.o):Lp(Du),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){ag(this,O);return}if(l=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var M in b)p.set(M,b[M]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const O of b.keys())p.set(O,b.get(O));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(S2,h,void 0))||b||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of p)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ug(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){ag(this,O)}};function ag(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,lg(l),$a(l)}function lg(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?cg(this):this.bb())},t.bb=function(){cg(this)};function cg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Dn(l)!=4||l.Z()!=2)){if(l.u&&Dn(l)==4)Cp(l.Ea,0,l);else if(gt(l,"readystatechange"),Dn(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var b;if(b=$===0){var M=String(l.D).match(Zp)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),b=!T2.test(M?M.toLowerCase():"")}p=b}if(p)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var O=2<Dn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",lg(l)}}finally{$a(l)}}}}function $a(l,h){if(l.g){ug(l);const p=l.g,b=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||gt(l,"ready");try{p.onreadystatechange=b}catch{}}}function ug(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Dn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),i2(h)}};function dg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function I2(l){const h={};l=(l.g&&2<=Dn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(_(l[b]))continue;var p=k(l[b]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[M]||[];h[M]=O,O.push(p)}N(h,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zi(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function hg(l){this.Aa=0,this.i=[],this.j=new Gi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zi("baseRetryDelayMs",5e3,l),this.cb=Zi("retryDelaySeedMs",1e4,l),this.Wa=Zi("forwardChannelMaxRetries",2,l),this.wa=Zi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Wp(l&&l.concurrentRequestLimit),this.Da=new N2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=hg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,b){xt(0),this.W=l,this.H=h||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=wg(this,null,this.W),Ha(this)};function zu(l){if(fg(l),l.G==3){var h=l.U++,p=Rn(l.I);if(_e(p,"SID",l.K),_e(p,"RID",h),_e(p,"TYPE","terminate"),eo(l,p),h=new ar(l,l.j,h),h.L=2,h.v=za(Rn(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=_g(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Fa(h)}bg(l)}function Ga(l){l.g&&($u(l),l.g.cancel(),l.g=null)}function fg(l){Ga(l),l.u&&(c.clearTimeout(l.u),l.u=null),Wa(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Ha(l){if(!Qp(l.h)&&!l.s){l.s=!0;var h=l.Ga;G||Z(),B||(G(),B=!0),H.add(h,l),l.B=0}}function k2(l,h){return Kp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=$i(g(l.Ga,l,h),vg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new ar(this,this.j,l);let O=this.o;if(this.S&&(O?(O=x(O),v(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=pg(this,M,h),p=Rn(this.I),_e(p,"RID",l),_e(p,"CVER",22),this.D&&_e(p,"X-HTTP-Session-Id",this.D),eo(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(og(O)))+"&"+h:this.m&&Uu(p,this.m,O)),qu(this.h,M),this.Ua&&_e(p,"TYPE","init"),this.P?(_e(p,"$req",h),_e(p,"SID","null"),M.T=!0,Mu(M,p,null)):Mu(M,p,h),this.G=2}}else this.G==3&&(l?mg(this,l):this.i.length==0||Qp(this.h)||mg(this))};function mg(l,h){var p;h?p=h.l:p=l.U++;const b=Rn(l.I);_e(b,"SID",l.K),_e(b,"RID",p),_e(b,"AID",l.T),eo(l,b),l.m&&l.o&&Uu(b,l.m,l.o),p=new ar(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=pg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),qu(l.h,p),Mu(p,b,h)}function eo(l,h){l.H&&V(l.H,function(p,b){_e(h,b,p)}),l.l&&Xp({},function(p,b){_e(h,b,p)})}function pg(l,h,p){p=Math.min(l.i.length,p);var b=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let O=-1;for(;;){const $=["count="+p];O==-1?0<p?(O=M[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let ye=!0;for(let Ke=0;Ke<p;Ke++){let fe=M[Ke].g;const st=M[Ke].map;if(fe-=O,0>fe)O=Math.max(0,M[Ke].g-100),ye=!1;else try{E2(st,$,"req"+fe+"_")}catch{b&&b(st)}}if(ye){b=$.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,b}function gg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;G||Z(),B||(G(),B=!0),H.add(h,l),l.v=0}}function Bu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=$i(g(l.Fa,l),vg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=$i(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Ga(this),xg(this))};function $u(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function xg(l){l.g=new ar(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Rn(l.qa);_e(h,"RID","rpc"),_e(h,"SID",l.K),_e(h,"AID",l.T),_e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(h,"TO",l.ja),_e(h,"TYPE","xmlhttp"),eo(l,h),l.m&&l.o&&Uu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=za(Rn(h)),p.m=null,p.P=!0,$p(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Ga(this),Bu(this),xt(19))};function Wa(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function yg(l,h){var p=null;if(l.g==h){Wa(l),$u(l),l.g=null;var b=2}else if(Fu(l.h,h))p=h.D,Yp(l.h,h),b=1;else return;if(l.G!=0){if(h.o)if(b==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;b=Ma(),gt(b,new qp(b,p)),Ha(l)}else gg(l);else if(M=h.s,M==3||M==0&&0<h.X||!(b==1&&k2(l,h)||b==2&&Bu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:Xr(l,5);break;case 4:Xr(l,10);break;case 3:Xr(l,6);break;default:Xr(l,2)}}}function vg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Xr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),b=l.Xa;const M=!b;b=new Jr(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||qa(b,"https"),za(b),M?_2(b.toString(),p):j2(b.toString(),p)}else xt(2);l.G=0,l.l&&l.l.sa(h),bg(l),fg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function bg(l){if(l.G=0,l.ka=[],l.l){const h=Jp(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,C(l.i),l.i.length=0),l.l.ra()}}function wg(l,h,p){var b=p instanceof Jr?Rn(p):new Jr(p);if(b.g!="")h&&(b.g=h+"."+b.g),Ua(b,b.s);else{var M=c.location;b=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var O=new Jr(null);b&&qa(O,b),h&&(O.g=h),M&&Ua(O,M),p&&(O.l=p),b=O}return p=l.D,h=l.ya,p&&h&&_e(b,p,h),_e(b,"VER",l.la),eo(l,b),b}function _g(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Re(new Yi({eb:p})):new Re(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jg(){}t=jg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Qa(){}Qa.prototype.g=function(l,h){return new Dt(l,h)};function Dt(l,h){rt.call(this),this.g=new hg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!_(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new qs(this)}S(Dt,rt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){zu(this.g)},Dt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Au(l),l=p);h.i.push(new h2(h.Ya++,l)),h.G==3&&Ha(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,zu(this.g),delete this.g,Dt.aa.N.call(this)};function Ng(l){Pu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(Ng,Pu);function Eg(){Ru.call(this),this.status=1}S(Eg,Ru);function qs(l){this.g=l}S(qs,jg),qs.prototype.ua=function(){gt(this.g,"a")},qs.prototype.ta=function(l){gt(this.g,new Ng(l))},qs.prototype.sa=function(l){gt(this.g,new Eg)},qs.prototype.ra=function(){gt(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,Jw=function(){return new Qa},Yw=function(){return Ma()},Kw=Kr,Zh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,Vl=Va,Up.COMPLETE="complete",Qw=Up,Mp.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",rt.prototype.listen=rt.prototype.K,xo=Mp,Ww=Yi,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,Hw=Re}).apply(typeof ml<"u"?ml:typeof self<"u"?self:typeof window<"u"?window:{});const wx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new ru("@firebase/firestore");function co(){return _s.logLevel}function J(t,...e){if(_s.logLevel<=ae.DEBUG){const n=e.map(Lm);_s.debug(`Firestore (${Mi}): ${t}`,...n)}}function tr(t,...e){if(_s.logLevel<=ae.ERROR){const n=e.map(Lm);_s.error(`Firestore (${Mi}): ${t}`,...n)}}function ji(t,...e){if(_s.logLevel<=ae.WARN){const n=e.map(Lm);_s.warn(`Firestore (${Mi}): ${t}`,...n)}}function Lm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(t="Unexpected state"){const e=`FIRESTORE (${Mi}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function ve(t,e){t||te()}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class iA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oA{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ve(typeof r.accessToken=="string"),new Xw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new ct(e)}}class aA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class lA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new aA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{o.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new cA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=dA(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%e.length))}return r}}function me(t,e){return t<e?-1:t>e?1:0}function Ni(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?me(this.nanoseconds,e.nanoseconds):me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ne(e)}static min(){return new ne(new $e(0,0))}static max(){return new ne(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=e.get(s),a=n.get(s);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ne extends ia{construct(e,n,r){return new Ne(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ne(n)}static emptyPath(){return new Ne([])}}const hA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends ia{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return hA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(o(),s++)}if(o(),a)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ne.fromString(e))}static fromName(e){return new X(Ne.fromString(e).popFirst(5))}static empty(){return new X(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ne(e.slice()))}}function fA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ne.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Fr(s,X.empty(),e)}function mA(t){return new Fr(t.readTime,t.key,-1)}class Fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fr(ne.min(),X.empty(),-1)}static max(){return new Fr(ne.max(),X.empty(),-1)}}function pA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==gA)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,o=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++o,a&&o===s&&n()},u=>r(u))}),a=!0,o===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;n(e[d]).next(m=>{a[d]=m,++c,c===o&&r(a)},m=>s(m))}})}static doWhile(e,n){return new U((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function yA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mm.oe=-1;function au(t){return t==null}function Ec(t){return t===0&&1/t==-1/0}function vA(t){return typeof t=="number"&&Number.isInteger(t)&&!Ec(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pl(this.root,e,this.comparator,!1)}getReverseIterator(){return new pl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pl(this.root,e,this.comparator,!0)}}class pl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=o??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();const e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,s,o){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new jx(this.data.getIterator())}getIteratorFrom(e){return new jx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class jx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new et(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ni(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new t_("Invalid base64 string: "+o):o}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const bA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qr(t){if(ve(!!t),typeof t=="string"){let e=0;const n=bA.exec(t);if(ve(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Om(t){const e=t.mapValue.fields.__previous_value__;return Vm(e)?Om(e):e}function oa(t){const e=qr(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n,r,s,o,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class aa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new aa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof aa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ns(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vm(t)?4:jA(t)?9007199254740991:_A(t)?10:11:te()}function Pn(t,e){if(t===e)return!0;const n=Ns(t);if(n!==Ns(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return oa(t).isEqual(oa(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=qr(s.timestampValue),c=qr(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return js(s.bytesValue).isEqual(js(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Le(s.geoPointValue.latitude)===Le(o.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Le(s.integerValue)===Le(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Le(s.doubleValue),c=Le(o.doubleValue);return a===c?Ec(a)===Ec(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ni(t.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},c=o.mapValue.fields||{};if(_x(a)!==_x(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Pn(a[u],c[u])))return!1;return!0}(t,e);default:return te()}}function la(t,e){return(t.values||[]).find(n=>Pn(n,e))!==void 0}function Ei(t,e){if(t===e)return 0;const n=Ns(t),r=Ns(e);if(n!==r)return me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return me(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Le(o.integerValue||o.doubleValue),u=Le(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Nx(t.timestampValue,e.timestampValue);case 4:return Nx(oa(t),oa(e));case 5:return me(t.stringValue,e.stringValue);case 6:return function(o,a){const c=js(o),u=js(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=me(c[d],u[d]);if(m!==0)return m}return me(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=me(Le(o.latitude),Le(a.latitude));return c!==0?c:me(Le(o.longitude),Le(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ex(t.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,m;const f=o.fields||{},g=a.fields||{},w=(c=f.value)===null||c===void 0?void 0:c.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,C=me(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return C!==0?C:Ex(w,S)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===gl.mapValue&&a===gl.mapValue)return 0;if(o===gl.mapValue)return 1;if(a===gl.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const g=me(u[f],m[f]);if(g!==0)return g;const w=Ei(c[u[f]],d[m[f]]);if(w!==0)return w}return me(u.length,m.length)}(t.mapValue,e.mapValue);default:throw te()}}function Nx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return me(t,e);const n=qr(t),r=qr(e),s=me(n.seconds,r.seconds);return s!==0?s:me(n.nanos,r.nanos)}function Ex(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Ei(n[s],r[s]);if(o)return o}return me(n.length,r.length)}function Ti(t){return ef(t)}function ef(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=ef(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${ef(n.fields[a])}`;return s+"}"}(t.mapValue):te()}function Tx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tf(t){return!!t&&"integerValue"in t}function Fm(t){return!!t&&"arrayValue"in t}function Sx(t){return!!t&&"nullValue"in t}function Ix(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ol(t){return!!t&&"mapValue"in t}function _A(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ol(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Po(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=Po(a):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Ol(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ol(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rs(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Tt(Po(this.value))}}function n_(t){const e=[];return Rs(t.fields,(n,r)=>{const s=new Xe([n]);if(Ol(r)){const o=n_(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,o,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,ne.min(),ne.min(),ne.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,ne.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,ne.min(),ne.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ne.min(),ne.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.position=e,this.inclusive=n}}function kx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=X.comparator(X.fromName(a.referenceValue),n.key):r=Ei(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ax(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n="asc"){this.field=e,this.dir=n}}function NA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r_=class{};class qe extends r_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TA(e,n,r):n==="array-contains"?new kA(e,r):n==="in"?new AA(e,r):n==="not-in"?new CA(e,r):n==="array-contains-any"?new PA(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SA(e,r):new IA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ei(n,this.value)):n!==null&&Ns(this.value)===Ns(n)&&this.matchesComparison(Ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends r_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new xn(e,n)}matches(e){return s_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function s_(t){return t.op==="and"}function i_(t){return EA(t)&&s_(t)}function EA(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function nf(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Ti(t.value);if(i_(t))return t.filters.map(e=>nf(e)).join(",");{const e=t.filters.map(n=>nf(n)).join(",");return`${t.op}(${e})`}}function o_(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Pn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,c)=>o&&o_(a,s.filters[c]),!0):!1}(t,e):void te()}function a_(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Ti(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(a_).join(" ,")+"}"}(t):"Filter"}class TA extends qe{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class SA extends qe{constructor(e,n){super(e,"in",n),this.keys=l_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IA extends qe{constructor(e,n){super(e,"not-in",n),this.keys=l_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function l_(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class kA extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fm(n)&&la(n.arrayValue,this.value)}}class AA extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&la(this.value.arrayValue,n)}}class CA extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(la(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!la(this.value.arrayValue,n)}}class PA extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>la(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n=null,r=[],s=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function Cx(t,e=null,n=[],r=[],s=null,o=null,a=null){return new RA(t,e,n,r,s,o,a)}function qm(t){const e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),au(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ti(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ti(r)).join(",")),e.ue=n}return e.ue}function Um(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!NA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ax(t.startAt,e.startAt)&&Ax(t.endAt,e.endAt)}function rf(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n=null,r=[],s=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DA(t,e,n,r,s,o,a,c){return new Vi(t,e,n,r,s,o,a,c)}function zm(t){return new Vi(t)}function Px(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function c_(t){return t.collectionGroup!==null}function Ro(t){const e=re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new et(Xe.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ca(o,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new ca(Xe.keyField(),r))}return e.ce}function kn(t){const e=re(t);return e.le||(e.le=LA(e,Ro(t))),e.le}function LA(t,e){if(t.limitType==="F")return Cx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ca(s.field,o)});const n=t.endAt?new Tc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Tc(t.startAt.position,t.startAt.inclusive):null;return Cx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sf(t,e){const n=t.filters.concat([e]);return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Sc(t,e,n){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lu(t,e){return Um(kn(t),kn(e))&&t.limitType===e.limitType}function u_(t){return`${qm(kn(t))}|lt:${t.limitType}`}function Bs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>a_(s)).join(", ")}]`),au(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ti(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ti(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function cu(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of Ro(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=kx(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,Ro(r),s)||r.endAt&&!function(a,c,u){const d=kx(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,Ro(r),s))}(t,e)}function MA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function d_(t){return(e,n)=>{let r=!1;for(const s of Ro(t)){const o=VA(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function VA(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?Ei(u,d):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rs(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return e_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new Pe(X.comparator);function nr(){return OA}const h_=new Pe(X.comparator);function yo(...t){let e=h_;for(const n of t)e=e.insert(n.key,n);return e}function f_(t){let e=h_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Do()}function m_(){return Do()}function Do(){return new Oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const FA=new Pe(X.comparator),qA=new et(X.comparator);function oe(...t){let e=qA;for(const n of t)e=e.add(n);return e}const UA=new et(me);function zA(){return UA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function p_(t){return{integerValue:""+t}}function BA(t,e){return vA(e)?p_(e):Bm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this._=void 0}}function $A(t,e,n){return t instanceof ua?function(s,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Vm(o)&&(o=Om(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof da?x_(t,e):t instanceof ha?y_(t,e):function(s,o){const a=g_(s,o),c=Rx(a)+Rx(s.Pe);return tf(a)&&tf(s.Pe)?p_(c):Bm(s.serializer,c)}(t,e)}function GA(t,e,n){return t instanceof da?x_(t,e):t instanceof ha?y_(t,e):n}function g_(t,e){return t instanceof Ic?function(r){return tf(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ua extends uu{}class da extends uu{constructor(e){super(),this.elements=e}}function x_(t,e){const n=v_(e);for(const r of t.elements)n.some(s=>Pn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ha extends uu{constructor(e){super(),this.elements=e}}function y_(t,e){let n=v_(e);for(const r of t.elements)n=n.filter(s=>!Pn(s,r));return{arrayValue:{values:n}}}class Ic extends uu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Rx(t){return Le(t.integerValue||t.doubleValue)}function v_(t){return Fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e,n){this.field=e,this.transform=n}}function WA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof da&&s instanceof da||r instanceof ha&&s instanceof ha?Ni(r.elements,s.elements,Pn):r instanceof Ic&&s instanceof Ic?Pn(r.Pe,s.Pe):r instanceof ua&&s instanceof ua}(t.transform,e.transform)}class QA{constructor(e,n){this.version=e,this.transformResults=n}}class Xt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Xt}static exists(e){return new Xt(void 0,e)}static updateTime(e){return new Xt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class du{}function b_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $m(t.key,Xt.none()):new Sa(t.key,t.data,Xt.none());{const n=t.data,r=Tt.empty();let s=new et(Xe.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Hr(t.key,r,new Vt(s.toArray()),Xt.none())}}function KA(t,e,n){t instanceof Sa?function(s,o,a){const c=s.value.clone(),u=Lx(s.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Hr?function(s,o,a){if(!Fl(s.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Lx(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(w_(s)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Lo(t,e,n,r){return t instanceof Sa?function(o,a,c,u){if(!Fl(o.precondition,a))return c;const d=o.value.clone(),m=Mx(o.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hr?function(o,a,c,u){if(!Fl(o.precondition,a))return c;const d=Mx(o.fieldTransforms,u,a),m=a.data;return m.setAll(w_(o)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,c){return Fl(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function YA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=g_(r.transform,s||null);o!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,o))}return n||null}function Dx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ni(r,s,(o,a)=>WA(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sa extends du{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Hr extends du{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function w_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lx(t,e,n){const r=new Map;ve(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,c=e.data.field(o.field);r.set(o.field,GA(a,c,n[s]))}return r}function Mx(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,$A(o,a,e))}return r}class $m extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JA extends du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&KA(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=m_();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=n.has(s.key)?null:c;const u=b_(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ni(this.mutations,e.mutations,(n,r)=>Dx(n,r))&&Ni(this.baseMutations,e.baseMutations,(n,r)=>Dx(n,r))}}class Gm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ve(e.mutations.length===r.length);let s=function(){return FA}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new Gm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,ce;function tC(t){switch(t){default:return te();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function __(t){if(t===void 0)return tr("GRPC error has no .code"),F.UNKNOWN;switch(t){case Oe.OK:return F.OK;case Oe.CANCELLED:return F.CANCELLED;case Oe.UNKNOWN:return F.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return F.INTERNAL;case Oe.UNAVAILABLE:return F.UNAVAILABLE;case Oe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Oe.NOT_FOUND:return F.NOT_FOUND;case Oe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Oe.ABORTED:return F.ABORTED;case Oe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Oe.DATA_LOSS:return F.DATA_LOSS;default:return te()}}(ce=Oe||(Oe={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=new hs([4294967295,4294967295],0);function Vx(t){const e=nC().encode(t),n=new Gw;return n.update(e),new Uint8Array(n.digest())}function Ox(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new hs([n,r],0),new hs([s,o],0)]}class Hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vo(`Invalid padding: ${n}`);if(r<0)throw new vo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=hs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(hs.fromNumber(r)));return s.compare(rC)===1&&(s=new hs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Vx(e),[r,s]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Hm(o,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Vx(e),[r,s]=Ox(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,s,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ia.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new hu(ne.min(),s,new Pe(me),nr(),oe())}}class Ia{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ia(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class j_{constructor(e,n){this.targetId=e,this.me=n}}class N_{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Fx{constructor(){this.fe=0,this.ge=Ux(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=oe(),n=oe(),r=oe();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:te()}}),new Ia(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ux()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sC{constructor(e){this.Le=e,this.Be=new Map,this.ke=nr(),this.qe=qx(),this.Qe=new Pe(me)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const o=s.target;if(rf(o))if(r===0){const a=new X(o.path);this.Ue(n,a,ht.newNoDocument(a,ne.min()))}else ve(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=js(r).toUint8Array()}catch(u){if(u instanceof t_)return ji("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Hm(a,s,o)}catch(u){return ji(u instanceof vo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&rf(c.target)){const u=new X(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ht.newNoDocument(u,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=oe();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const s=new hu(e,n,this.Qe,this.ke,r);return this.ke=nr(),this.qe=qx(),this.Qe=new Pe(me),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Fx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(me),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function qx(){return new Pe(X.comparator)}function Ux(){return new Pe(X.comparator)}const iC={asc:"ASCENDING",desc:"DESCENDING"},oC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aC={and:"AND",or:"OR"};class lC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||au(e)?e:{value:e}}function kc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function E_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function cC(t,e){return kc(t,e.toTimestamp())}function An(t){return ve(!!t),ne.fromTimestamp(function(n){const r=qr(n);return new $e(r.seconds,r.nanos)}(t))}function Wm(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(s){return new Ne(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T_(t){const e=Ne.fromString(t);return ve(C_(e)),e}function lf(t,e){return Wm(t.databaseId,e.path)}function Td(t,e){const n=T_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(I_(n))}function S_(t,e){return Wm(t.databaseId,e)}function uC(t){const e=T_(t);return e.length===4?Ne.emptyPath():I_(e)}function cf(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function I_(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function zx(t,e,n){return{name:lf(t,e),fields:n.value.mapValue.fields}}function dC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(ve(m===void 0||typeof m=="string"),nt.fromBase64String(m||"")):(ve(m===void 0||m instanceof Buffer||m instanceof Uint8Array),nt.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?F.UNKNOWN:__(d.code);return new W(m,d.message||"")}(a);n=new N_(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Td(t,r.document.name),o=An(r.document.updateTime),a=r.document.createTime?An(r.document.createTime):ne.min(),c=new Tt({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,o,a,c),d=r.targetIds||[],m=r.removedTargetIds||[];n=new ql(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Td(t,r.document),o=r.readTime?An(r.readTime):ne.min(),a=ht.newNoDocument(s,o),c=r.removedTargetIds||[];n=new ql([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Td(t,r.document),o=r.removedTargetIds||[];n=new ql([],o,s,null)}else{if(!("filter"in e))return te();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new eC(s,o),c=r.targetId;n=new j_(c,a)}}return n}function hC(t,e){let n;if(e instanceof Sa)n={update:zx(t,e.key,e.value)};else if(e instanceof $m)n={delete:lf(t,e.key)};else if(e instanceof Hr)n={update:zx(t,e.key,e.data),updateMask:wC(e.fieldMask)};else{if(!(e instanceof JA))return te();n={verify:lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof ua)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof da)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ha)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ic)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:cC(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:te()}(t,e.precondition)),n}function fC(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(s,o){let a=s.updateTime?An(s.updateTime):An(o);return a.isEqual(ne.min())&&(a=An(o)),new QA(a,s.transformResults||[])}(n,e))):[]}function mC(t,e){return{documents:[S_(t,e.path)]}}function pC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S_(t,s);const o=function(d){if(d.length!==0)return A_(xn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:$s(g.field),direction:yC(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=of(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function gC(t){let e=uC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ve(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(f){const g=k_(f);return g instanceof xn&&i_(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(g=>function(S){return new ca(Gs(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,au(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(f){const g=!!f.before,w=f.values||[];return new Tc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const g=!f.before,w=f.values||[];return new Tc(w,g)}(n.endAt)),DA(e,s,a,o,c,"F",u,d)}function xC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Gs(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gs(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gs(n.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Gs(n.unaryFilter.field);return qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(Gs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>k_(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function yC(t){return iC[t]}function vC(t){return oC[t]}function bC(t){return aC[t]}function $s(t){return{fieldPath:t.canonicalString()}}function Gs(t){return Xe.fromServerFormat(t.fieldPath)}function A_(t){return t instanceof qe?function(n){if(n.op==="=="){if(Ix(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NAN"}};if(Sx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ix(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NAN"}};if(Sx(n.value))return{unaryFilter:{field:$s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(n.field),op:vC(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>A_(s));return r.length===1?r[0]:{compositeFilter:{op:bC(n.op),filters:r}}}(t):te()}function wC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,r,s,o=ne.min(),a=ne.min(),c=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.ct=e}}function jC(t){const e=gC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.un=new EC}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Fr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class EC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(Ne.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(Ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Si(0)}static kn(){return new Si(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(){this.changes=new Oi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Lo(r.mutation,s,Vt.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=yo();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let o=nr();const a=Do(),c=function(){return Do()}();return n.forEach((u,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Hr)?o=o.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),Lo(m.mutation,d,m.mutation.getFieldMask(),$e.now())):a.set(d.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>{var f;return c.set(d,new SC(m,(f=a.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Do();let s=new Pe((a,c)=>a-c),o=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let m=r.get(u)||Vt.empty();m=c.applyToLocalView(d,m),r.set(u,m);const f=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,f)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=m_();m.forEach(g=>{if(!o.has(g)){const w=b_(n.get(g),r.get(g));w!==null&&f.set(g,w),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return X.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):c_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):U.resolve(ls());let c=-1,u=o;return a.next(d=>U.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),o.get(m)?U.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,oe())).next(m=>({batchId:c,changes:f_(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=yo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=yo();return this.indexManager.getCollectionParents(e,o).next(c=>U.forEach(c,u=>{const d=function(f,g){return new Vi(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,ht.newInvalidDocument(m)))});let c=yo();return a.forEach((u,d)=>{const m=o.get(u);m!==void 0&&Lo(m.mutation,d,Vt.empty(),$e.now()),cu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:jC(s.bundledQuery),readTime:An(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this.overlays=new Pe(X.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return U.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.ht(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),o=n.length+1,a=new X(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Pe((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=ls(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ls(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ZA(n,r));let o=this.Ir.get(n);o===void 0&&(o=oe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.Tr=new et(He.Er),this.dr=new et(He.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new He(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new He(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ne([])),r=new He(n,e),s=new He(n,e+1),o=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ne([])),r=new He(n,e),s=new He(n,e+1);let o=oe();return this.dr.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new He(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||me(e.wr,n.wr)}static Ar(e,n){return me(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(He.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XA(o,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new He(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),o=s<0?0:s;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),s=new He(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);o.push(c)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(me);return n.forEach(s=>{const o=new He(s,0),a=new He(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;X.isDocumentKey(o)||(o=o.child(""));const a=new He(new X(o),0);let c=new et(me);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const o=new He(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new He(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.Mr=e,this.docs=function(){return new Pe(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=nr();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():ht.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=nr();const a=n.path,c=new X(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||pA(mA(m),r)<=0||(s.has(m.key)||cu(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,r,s){te()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new DC(this)}getSize(e){return U.resolve(this.size)}}class DC extends TC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.persistence=e,this.Nr=new Oi(n=>qm(n),Um),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qm,this.targetCount=0,this.kr=Si.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Si(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(o).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mm(0),this.Kr=!1,this.Kr=!0,this.$r=new CC,this.referenceDelegate=e(this),this.Ur=new LC(this),this.indexManager=new NC,this.remoteDocumentCache=function(s){return new RC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new _C(n),this.Gr=new kC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new AC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new PC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const s=new VC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class VC extends xA{constructor(e){super(),this.currentSequenceNumber=e}}class Km{constructor(e){this.persistence=e,this.Jr=new Qm,this.Yr=null}static Zr(e){return new Km(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(o=>{o||n.removeEntry(s,ne.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=oe(),s=oe();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wT()?8:yA(mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new OC;return this.Xi(e,n,a).next(c=>{if(o.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>o.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(co()<=ae.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Bs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(co()<=ae.DEBUG&&J("QueryEngine","Query:",Bs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(co()<=ae.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Bs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):U.resolve())}Yi(e,n){if(Px(n))return U.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Sc(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=oe(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,Sc(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Px(n)||s.isEqual(ne.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const a=this.ts(n,o);return this.ns(n,a,r,s)?U.resolve(null):(co()<=ae.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bs(n)),this.rs(e,a,n,fA(s,-1)).next(c=>c))})}ts(e,n){let r=new et(d_(e));return n.forEach((s,o)=>{cu(e,o)&&(r=r.add(o))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,r){return co()<=ae.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Bs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Pe(me),this._s=new Oi(o=>qm(o),Um),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new IC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function UC(t,e,n,r){return new qC(t,e,n,r)}async function P_(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=oe();for(const d of s){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function zC(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,g=f.keys();let w=U.resolve();return g.forEach(S=>{w=w.next(()=>m.getEntry(u,S)).next(C=>{const R=d.docVersions.get(S);ve(R!==null),C.version.compareTo(R)<0&&(f.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),m.addEntry(C)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function R_(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function BC(t,e){const n=re(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((m,f)=>{const g=s.get(f);if(!g)return;c.push(n.Ur.removeMatchingKeys(o,m.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(o,m.addedDocuments,f)));let w=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?w=w.withResumeToken(nt.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):m.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(m.resumeToken,r)),s=s.insert(f,w),function(C,R,j){return C.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(g,w,m)&&c.push(n.Ur.updateTargetData(o,w))});let u=nr(),d=oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push($C(o,a,e.documentUpdates).next(m=>{u=m.Ps,d=m.Is})),!r.isEqual(ne.min())){const m=n.Ur.getLastRemoteSnapshotVersion(o).next(f=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return U.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(n.os=s,o))}function $C(t,e,n){let r=oe(),s=oe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=nr();return n.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):J("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function GC(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function HC(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(o=>o?(s=o,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new jr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function uf(t,e,n){const r=re(t),s=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ta(a))throw a;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Bx(t,e,n){const r=re(t);let s=ne.min(),o=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const f=re(u),g=f._s.get(m);return g!==void 0?U.resolve(f.os.get(g)):f.Ur.getTargetData(d,m)}(r,a,kn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:ne.min(),n?o:oe())).next(c=>(WC(r,MA(e),c),{documents:c,Ts:o})))}function WC(t,e,n){let r=t.us.get(e)||ne.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class $x{constructor(){this.activeTargetIds=zA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QC{constructor(){this.so=new $x,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $x,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xl=null;function Sd(){return xl===null?xl=function(){return 268435456+Math.round(2147483648*Math.random())}():xl++,"0x"+xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class XC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,r,s,o,a){const c=Sd(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,a),this.No(n,u,d,s).then(m=>(J("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw ji("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",s),m})}Lo(n,r,s,o,a,c){return this.Mo(n,r,s,o,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),s&&s.headers.forEach((o,a)=>n[a]=o)}xo(n,r){const s=YC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const o=Sd();return new Promise((a,c)=>{const u=new Hw;u.setWithCredentials(!0),u.listenOnce(Qw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vl.NO_ERROR:const m=u.getResponseJson();J(lt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Vl.TIMEOUT:J(lt,`RPC '${e}' ${o} timed out`),c(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case Vl.HTTP_ERROR:const f=u.getStatus();if(J(lt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const S=function(R){const j=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(j)>=0?j:F.UNKNOWN}(w.status);c(new W(S,w.message))}else c(new W(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(F.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{J(lt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);J(lt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Sd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Jw(),c=Yw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new Ww({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=o.join("");J(lt,`Creating RPC '${e}' stream ${s}: ${m}`,u);const f=a.createWebChannel(m,u);let g=!1,w=!1;const S=new JC({Io:R=>{w?J(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(J(lt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),g=!0),J(lt,`RPC '${e}' stream ${s} sending:`,R),f.send(R))},To:()=>f.close()}),C=(R,j,_)=>{R.listen(j,E=>{try{_(E)}catch(L){setTimeout(()=>{throw L},0)}})};return C(f,xo.EventType.OPEN,()=>{w||(J(lt,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),C(f,xo.EventType.CLOSE,()=>{w||(w=!0,J(lt,`RPC '${e}' stream ${s} transport closed`),S.So())}),C(f,xo.EventType.ERROR,R=>{w||(w=!0,ji(lt,`RPC '${e}' stream ${s} transport errored:`,R),S.So(new W(F.UNAVAILABLE,"The operation could not be completed")))}),C(f,xo.EventType.MESSAGE,R=>{var j;if(!w){const _=R.data[0];ve(!!_);const E=_,L=E.error||((j=E[0])===null||j===void 0?void 0:j.error);if(L){J(lt,`RPC '${e}' stream ${s} received error:`,L);const D=L.status;let V=function(y){const v=Oe[y];if(v!==void 0)return __(v)}(D),N=L.message;V===void 0&&(V=F.INTERNAL,N="Unknown error status: "+D+" with message "+L.message),w=!0,S.So(new W(V,N)),f.close()}else J(lt,`RPC '${e}' stream ${s} received:`,_),S.bo(_)}}),C(c,Kw.STAT_EVENT,R=>{R.stat===Zh.PROXY?J(lt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Zh.NOPROXY&&J(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return new lC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n,r=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&J("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n,r,s,o,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new D_(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(tr(n.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZC extends L_{constructor(e,n,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=dC(this.serializer,e),r=function(o){if(!("targetChange"in o))return ne.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ne.min():a.readTime?An(a.readTime):ne.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=cf(this.serializer),n.addTarget=function(o,a){let c;const u=a.target;if(c=rf(u)?{documents:mC(o,u)}:{query:pC(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=E_(o,a.resumeToken);const d=of(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ne.min())>0){c.readTime=kc(o,a.snapshotVersion.toTimestamp());const d=of(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=xC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=cf(this.serializer),n.removeTarget=e,this.a_(n)}}class eP extends L_{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ve(!!e.streamToken),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=fC(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=cf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>hC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,af(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}Lo(e,n,r,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,af(n,r),s,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class nP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(tr(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ds(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=re(u);d.L_.add(4),await ka(d),d.q_.set("Unknown"),d.L_.delete(4),await mu(d)}(this))})}),this.q_=new nP(r,s)}}async function mu(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function ka(t){for(const e of t.B_)await e(!1)}function M_(t,e){const n=re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),ep(n)?Zm(n):Fi(n).r_()&&Xm(n,e))}function Jm(t,e){const n=re(t),r=Fi(n);n.N_.delete(e),r.r_()&&V_(n,e),n.N_.size===0&&(r.r_()?r.o_():Ds(n)&&n.q_.set("Unknown"))}function Xm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fi(t).A_(e)}function V_(t,e){t.Q_.xe(e),Fi(t).R_(e)}function Zm(t){t.Q_=new sC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fi(t).start(),t.q_.v_()}function ep(t){return Ds(t)&&!Fi(t).n_()&&t.N_.size>0}function Ds(t){return re(t).L_.size===0}function O_(t){t.Q_=void 0}async function sP(t){t.q_.set("Online")}async function iP(t){t.N_.forEach((e,n)=>{Xm(t,e)})}async function oP(t,e){O_(t),ep(t)?(t.q_.M_(e),Zm(t)):t.q_.set("Unknown")}async function aP(t,e,n){if(t.q_.set("Online"),e instanceof N_&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const c of o.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ac(t,r)}else if(e instanceof ql?t.Q_.Ke(e):e instanceof j_?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ne.min()))try{const r=await R_(t.localStore);n.compareTo(r)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.N_.get(d);m&&o.N_.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(nt.EMPTY_BYTE_STRING,m.snapshotVersion)),V_(o,u);const f=new jr(m.target,u,d,m.sequenceNumber);Xm(o,f)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Ac(t,r)}}async function Ac(t,e,n){if(!Ta(e))throw e;t.L_.add(1),await ka(t),t.q_.set("Offline"),n||(n=()=>R_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mu(t)})}function F_(t,e){return e().catch(n=>Ac(t,n,e))}async function pu(t){const e=re(t),n=Ur(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lP(e);)try{const s=await GC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cP(e,s)}catch(s){await Ac(e,s)}q_(e)&&U_(e)}function lP(t){return Ds(t)&&t.O_.length<10}function cP(t,e){t.O_.push(e);const n=Ur(t);n.r_()&&n.V_&&n.m_(e.mutations)}function q_(t){return Ds(t)&&!Ur(t).n_()&&t.O_.length>0}function U_(t){Ur(t).start()}async function uP(t){Ur(t).p_()}async function dP(t){const e=Ur(t);for(const n of t.O_)e.m_(n.mutations)}async function hP(t,e,n){const r=t.O_.shift(),s=Gm.from(r,e,n);await F_(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pu(t)}async function fP(t,e){e&&Ur(t).V_&&await async function(r,s){if(function(a){return tC(a)&&a!==F.ABORTED}(s.code)){const o=r.O_.shift();Ur(r).s_(),await F_(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await pu(r)}}(t,e),q_(t)&&U_(t)}async function Hx(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=Ds(n);n.L_.add(3),await ka(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mu(n)}async function mP(t,e){const n=re(t);e?(n.L_.delete(2),await mu(n)):e||(n.L_.add(2),await ka(n),n.q_.set("Unknown"))}function Fi(t){return t.K_||(t.K_=function(n,r,s){const o=re(n);return o.w_(),new ZC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:sP.bind(null,t),Ro:iP.bind(null,t),mo:oP.bind(null,t),d_:aP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ep(t)?Zm(t):t.q_.set("Unknown")):(await t.K_.stop(),O_(t))})),t.K_}function Ur(t){return t.U_||(t.U_=function(n,r,s){const o=re(n);return o.w_(),new eP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:uP.bind(null,t),mo:fP.bind(null,t),f_:dP.bind(null,t),g_:hP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await pu(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,c=new tp(e,n,a,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function np(t,e){if(tr("AsyncQueue",`${e}: ${t}`),Ta(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=yo(),this.sortedSet=new Pe(this.comparator)}static emptySet(e){return new fi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.W_=new Pe(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ii{constructor(e,n,r,s,o,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,o){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ii(e,n,fi.emptySet(n),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class gP{constructor(){this.queries=Qx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=re(n),o=s.queries;s.queries=Qx(),o.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function Qx(){return new Oi(t=>u_(t),lu)}async function z_(t,e){const n=re(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(r=2):(o=new pP,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=np(a,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&rp(n)}async function B_(t,e){const n=re(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xP(t,e){const n=re(t);let r=!1;for(const s of e){const o=s.query,a=n.queries.get(o);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&rp(n)}function yP(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const o of s.j_)o.onError(n);r.queries.delete(e)}function rp(t){t.Y_.forEach(e=>{e.next()})}var df,Kx;(Kx=df||(df={})).ea="default",Kx.Cache="cache";class $_{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ii(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ii.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e){this.key=e}}class H_{constructor(e){this.key=e}}class vP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=oe(),this.mutatedKeys=oe(),this.Aa=d_(e),this.Ra=new fi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Wx,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,f)=>{const g=s.get(m),w=cu(this.query,f)?f:null,S=!!g&&this.mutatedKeys.has(g.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;g&&w?g.data.isEqual(w.data)?S!==C&&(r.track({type:3,doc:w}),R=!0):this.ga(g,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),R=!0):g&&!w&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(w?(a=a.add(w),o=C?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((m,f)=>function(w,S){const C=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return C(w)-C(S)}(m.type,f.type)||this.Aa(m.doc,f.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ii(this.query,e.Ra,o,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Wx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=oe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new H_(r))}),this.da.forEach(r=>{e.has(r)||n.push(new G_(r))}),n}ba(e){this.Ta=e.Ts,this.da=oe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ii.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class wP{constructor(e){this.key=e,this.va=!1}}class _P{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Oi(c=>u_(c),lu),this.Ma=new Map,this.xa=new Set,this.Oa=new Pe(X.comparator),this.Na=new Map,this.La=new Qm,this.Ba={},this.ka=new Map,this.qa=Si.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function jP(t,e,n=!0){const r=X_(t);let s;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await W_(r,e,n,!0),s}async function NP(t,e){const n=X_(t);await W_(n,e,!0,!1)}async function W_(t,e,n,r){const s=await HC(t.localStore,kn(e)),o=s.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current";let c;return r&&(c=await EP(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&M_(t.remoteStore,s),c}async function EP(t,e,n,r,s){t.Ka=(f,g,w)=>async function(C,R,j,_){let E=R.view.ma(j);E.ns&&(E=await Bx(C.localStore,R.query,!1).then(({documents:N})=>R.view.ma(N,E)));const L=_&&_.targetChanges.get(R.targetId),D=_&&_.targetMismatches.get(R.targetId)!=null,V=R.view.applyChanges(E,C.isPrimaryClient,L,D);return Jx(C,R.targetId,V.wa),V.snapshot}(t,f,g,w);const o=await Bx(t.localStore,e,!0),a=new vP(e,o.Ts),c=a.ma(o.documents),u=Ia.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);Jx(t,n,d.wa);const m=new bP(e,n,a);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function TP(t,e,n){const r=re(t),s=r.Fa.get(e),o=r.Ma.get(s.targetId);if(o.length>1)return r.Ma.set(s.targetId,o.filter(a=>!lu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Jm(r.remoteStore,s.targetId),hf(r,s.targetId)}).catch(Ea)):(hf(r,s.targetId),await uf(r.localStore,s.targetId,!0))}async function SP(t,e){const n=re(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(n.remoteStore,r.targetId))}async function IP(t,e,n){const r=LP(t);try{const s=await function(a,c){const u=re(a),d=$e.now(),m=c.reduce((w,S)=>w.add(S.key),oe());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=nr(),C=oe();return u.cs.getEntries(w,m).next(R=>{S=R,S.forEach((j,_)=>{_.isValidDocument()||(C=C.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(R=>{f=R;const j=[];for(const _ of c){const E=YA(_,f.get(_.key).overlayedDocument);E!=null&&j.push(new Hr(_.key,E,n_(E.value.mapValue),Xt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,j,c)}).next(R=>{g=R;const j=R.applyToLocalDocumentSet(f,C);return u.documentOverlayCache.saveOverlays(w,R.batchId,j)})}).then(()=>({batchId:g.batchId,changes:f_(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new Pe(me)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Aa(r,s.changes),await pu(r.remoteStore)}catch(s){const o=np(s,"Failed to persist write");n.reject(o)}}async function Q_(t,e){const n=re(t);try{const r=await BC(n.localStore,e);e.targetChanges.forEach((s,o)=>{const a=n.Na.get(o);a&&(ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ve(a.va):s.removedDocuments.size>0&&(ve(a.va),a.va=!1))}),await Aa(n,r,e)}catch(r){await Ea(r)}}function Yx(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((o,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=re(a);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const g of f.j_)g.Z_(c)&&(d=!0)}),d&&rp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kP(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),o=s&&s.key;if(o){let a=new Pe(X.comparator);a=a.insert(o,ht.newNoDocument(o,ne.min()));const c=oe().add(o),u=new hu(ne.min(),new Map,new Pe(me),a,c);await Q_(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),sp(r)}else await uf(r.localStore,e,!1).then(()=>hf(r,e,n)).catch(Ea)}async function AP(t,e){const n=re(t),r=e.batch.batchId;try{const s=await zC(n.localStore,e);Y_(n,r,null),K_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Aa(n,s)}catch(s){await Ea(s)}}async function CP(t,e,n){const r=re(t);try{const s=await function(a,c){const u=re(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(ve(f!==null),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);Y_(r,e,n),K_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Aa(r,s)}catch(s){await Ea(s)}}function K_(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Y_(t,e,n){const r=re(t);let s=r.Ba[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||J_(t,r)})}function J_(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sp(t))}function Jx(t,e,n){for(const r of n)r instanceof G_?(t.La.addReference(r.key,e),PP(t,r)):r instanceof H_?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||J_(t,r.key)):te()}function PP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),sp(t))}function sp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ne.fromString(e)),r=t.qa.next();t.Na.set(r,new wP(n)),t.Oa=t.Oa.insert(n,r),M_(t.remoteStore,new jr(kn(zm(n.path)),r,"TargetPurposeLimboResolution",Mm.oe))}}async function Aa(t,e,n){const r=re(t),s=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Ym.Wi(u.targetId,d);o.push(f)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const m=re(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,g=>U.forEach(g.$i,w=>m.persistence.referenceDelegate.addReference(f,g.targetId,w)).next(()=>U.forEach(g.Ui,w=>m.persistence.referenceDelegate.removeReference(f,g.targetId,w)))))}catch(f){if(!Ta(f))throw f;J("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const w=m.os.get(g),S=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(S);m.os=m.os.insert(g,C)}}}(r.localStore,o))}async function RP(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await P_(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new W(F.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Aa(n,r.hs)}}function DP(t,e){const n=re(t),r=n.Na.get(e);if(r&&r.va)return oe().add(r.key);{let s=oe();const o=n.Ma.get(e);if(!o)return s;for(const a of o){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function X_(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kP.bind(null,e),e.Ca.d_=xP.bind(null,e.eventManager),e.Ca.$a=yP.bind(null,e.eventManager),e}function LP(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CP.bind(null,e),e}class Xx{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return UC(this.persistence,new FC,e.initialUser,this.serializer)}createPersistence(e){return new MC(Km.Zr,this.serializer)}createSharedClientState(e){return new QC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class MP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Yx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=RP.bind(null,this.syncEngine),await mP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gP}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),r=function(o){return new XC(o)}(e.databaseInfo);return function(o,a,c,u){return new tP(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,c){return new rP(r,s,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Yx(this.syncEngine,n,0),function(){return Gx.D()?new Gx:new KC}())}createSyncEngine(e,n){return function(s,o,a,c,u,d,m){const f=new _P(s,o,a,c,u,d);return m&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=re(s);J("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ka(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=Zw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{J("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=np(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kd(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await P_(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FP(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Hx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Hx(e.remoteStore,s)),t._onlineComponents=e}function OP(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function FP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await kd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!OP(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await kd(t,new Xx)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await kd(t,new Xx);return t._offlineComponents}async function e1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await Zx(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await Zx(t,new MP))),t._onlineComponents}function qP(t){return e1(t).then(e=>e.syncEngine)}async function t1(t){const e=await e1(t),n=e.eventManager;return n.onListen=jP.bind(null,e.syncEngine),n.onUnlisten=TP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SP.bind(null,e.syncEngine),n}function UP(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new Z_({next:g=>{a.enqueueAndForget(()=>B_(o,f));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new $_(zm(c.path),m,{includeMetadataChanges:!0,_a:!0});return z_(o,f)}(await t1(t),t.asyncQueue,e,n,r)),r.promise}function zP(t,e,n={}){const r=new Wn;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new Z_({next:g=>{a.enqueueAndForget(()=>B_(o,f)),g.fromCache&&u.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new $_(c,m,{includeMetadataChanges:!0,_a:!0});return z_(o,f)}(await t1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BP(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ty(t){if(!X.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ny(t){if(X.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function yn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gu(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function $P(t,e){if(e<=0)throw new W(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ry({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ry(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sA;switch(r.type){case"firstParty":return new lA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ey.get(n);r&&(J("ComponentProvider","Removing Datastore"),ey.delete(n),r.terminate())}(this),Promise.resolve()}}function GP(t,e,n,r={}){var s;const o=(t=yn(t,xu))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=ct.MOCK_USER;else{c=gT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(d)}t._authCredentials=new iA(new Xw(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wr(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class Mr extends Wr{constructor(e,n,r){super(e,n,zm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new X(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function Ue(t,e,...n){if(t=Se(t),r1("collection","path",e),t instanceof xu){const r=Ne.fromString(e,...n);return ny(r),new Mr(t,null,r)}{if(!(t instanceof wt||t instanceof Mr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return ny(r),new Mr(t.firestore,null,r)}}function vt(t,e,...n){if(t=Se(t),arguments.length===1&&(e=Zw.newId()),r1("doc","path",e),t instanceof xu){const r=Ne.fromString(e,...n);return ty(r),new wt(t,null,new X(r))}{if(!(t instanceof wt||t instanceof Mr))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ne.fromString(e,...n));return ty(r),new wt(t.firestore,t instanceof Mr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new D_(this,"async_queue_retry"),this.Eu=()=>{const n=Id();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Id();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Id();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Wn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ta(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw tr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=tp.createAndSchedule(this,e,n,r,o=>this.Vu(o));return this.lu.push(s),s}du(){this.hu&&te()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Ls extends xu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new HP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||s1(this),this._firestoreClient.terminate()}}function WP(t,e){const n=typeof t=="object"?t:jm(),r=typeof t=="string"?t:"(default)",s=Cs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=mT("firestore");o&&GP(s,...o)}return s}function ip(t){return t._firestoreClient||s1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function s1(t){var e,n,r;const s=t._freezeSettings(),o=function(c,u,d,m){return new wA(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,n1(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new VP(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ki(nt.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ki(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return me(this._lat,e._lat)||me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^__.*__$/;class KP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sa(e,this.data,n,this.fieldTransforms)}}class i1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Hr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function o1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}class lp{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new lp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Cc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(o1(this.wu)&&QP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class YP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fu(e)}Nu(e,n,r,s=!1){return new lp({wu:e,methodName:n,Ou:r,path:Xe.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bu(t){const e=t._freezeSettings(),n=fu(t._databaseId);return new YP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function a1(t,e,n,r,s,o={}){const a=t.Nu(o.merge||o.mergeFields?2:0,e,n,s);up("Data must be an object, but it was:",a,r);const c=l1(r,a);let u,d;if(o.merge)u=new Vt(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const f of o.mergeFields){const g=ff(e,f,n);if(!a.contains(g))throw new W(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);u1(m,g)||m.push(g)}u=new Vt(m),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new KP(new Tt(c),u,d)}class wu extends vu{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wu}}class cp extends vu{_toFieldTransform(e){return new HA(e.path,new ua)}isEqual(e){return e instanceof cp}}function JP(t,e,n,r){const s=t.Nu(1,e,n);up("Data must be an object, but it was:",s,r);const o=[],a=Tt.empty();Rs(r,(u,d)=>{const m=dp(e,u,n);d=Se(d);const f=s.Cu(m);if(d instanceof wu)o.push(m);else{const g=Ca(d,f);g!=null&&(o.push(m),a.set(m,g))}});const c=new Vt(o);return new i1(a,c,s.fieldTransforms)}function XP(t,e,n,r,s,o){const a=t.Nu(1,e,n),c=[ff(e,r,n)],u=[s];if(o.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(ff(e,o[g])),u.push(o[g+1]);const d=[],m=Tt.empty();for(let g=c.length-1;g>=0;--g)if(!u1(d,c[g])){const w=c[g];let S=u[g];S=Se(S);const C=a.Cu(w);if(S instanceof wu)d.push(w);else{const R=Ca(S,C);R!=null&&(d.push(w),m.set(w,R))}}const f=new Vt(d);return new i1(m,f,a.fieldTransforms)}function ZP(t,e,n,r=!1){return Ca(n,t.Nu(r?4:3,e))}function Ca(t,e){if(c1(t=Se(t)))return up("Unsupported field value:",e,t),l1(t,e);if(t instanceof vu)return function(r,s){if(!o1(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const c of r){let u=Ca(c,s.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=Se(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=$e.fromDate(r);return{timestampValue:kc(s.serializer,o)}}if(r instanceof $e){const o=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kc(s.serializer,o)}}if(r instanceof op)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ki)return{bytesValue:E_(s.serializer,r._byteString)};if(r instanceof wt){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ap)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Bm(c.serializer,u)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${gu(r)}`)}(t,e)}function l1(t,e){const n={};return e_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rs(t,(r,s)=>{const o=Ca(s,e.bu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function c1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof op||t instanceof ki||t instanceof wt||t instanceof vu||t instanceof ap)}function up(t,e,n){if(!c1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=gu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function ff(t,e,n){if((e=Se(e))instanceof yu)return e._internalPath;if(typeof e=="string")return dp(t,e);throw Cc("Field path arguments must be of type string or ",t,!1,void 0,n)}const eR=new RegExp("[~\\*/\\[\\]]");function dp(t,e,n){if(e.search(eR)>=0)throw Cc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yu(...e.split("."))._internalPath}catch{throw Cc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Cc(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new W(F.INVALID_ARGUMENT,c+t+u)}function u1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_u("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tR extends d1{data(){return super.data()}}function _u(t,e){return typeof e=="string"?dp(t,e):e instanceof yu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hp{}class fp extends hp{}function bo(t,e,...n){let r=[];e instanceof hp&&r.push(e),r=r.concat(n),function(o){const a=o.filter(u=>u instanceof mp).length,c=o.filter(u=>u instanceof ju).length;if(a>1||a>0&&c>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ju extends fp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ju(e,n,r)}_apply(e){const n=this._parse(e);return f1(e._query,n),new Wr(e.firestore,e.converter,sf(e._query,n))}_parse(e){const n=bu(e.firestore);return function(o,a,c,u,d,m,f){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){iy(f,m);const w=[];for(const S of f)w.push(sy(u,o,S));g={arrayValue:{values:w}}}else g=sy(u,o,f)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||iy(f,m),g=ZP(c,a,f,m==="in"||m==="not-in");return qe.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rR(t,e,n){const r=e,s=_u("where",t);return ju._create(s,r,n)}class mp extends hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new mp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let a=s;const c=o.getFlattenedFilters();for(const u of c)f1(a,u),a=sf(a,u)}(e._query,n),new Wr(e.firestore,e.converter,sf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class pp extends fp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pp(e,n)}_apply(e){const n=function(s,o,a){if(s.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ca(o,a)}(e._query,this._field,this._direction);return new Wr(e.firestore,e.converter,function(s,o){const a=s.explicitOrderBy.concat([o]);return new Vi(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function h1(t,e="asc"){const n=e,r=_u("orderBy",t);return pp._create(r,n)}class gp extends fp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new gp(e,n,r)}_apply(e){return new Wr(e.firestore,e.converter,Sc(e._query,this._limit,this._limitType))}}function mf(t){return $P("limit",t),gp._create("limit",t,"F")}function sy(t,e,n){if(typeof(n=Se(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c_(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ne.fromString(n));if(!X.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Tx(t,new X(r))}if(n instanceof wt)return Tx(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gu(n)}.`)}function iy(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function f1(t,e){const n=function(s,o){for(const a of s)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sR{convertValue(e,n="none"){switch(Ns(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rs(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Le(a.doubleValue));return new ap(o)}convertGeoPoint(e){return new op(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Om(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(oa(e));default:return null}}convertTimestamp(e){const n=qr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ne.fromString(e);ve(C_(r));const s=new aa(r.get(1),r.get(3)),o=new X(r.popFirst(5));return s.isEqual(n)||tr(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class p1 extends d1{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ul(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(_u("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ul extends p1{data(e={}){return super.data(e)}}class iR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ul(this._firestore,this._userDataWriter,r.key,r,new wo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Ul(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new Ul(s._firestore,s._userDataWriter,c.doc.key,c.doc,new wo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:oR(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(t){t=yn(t,wt);const e=yn(t.firestore,Ls);return UP(ip(e),t._key).then(n=>aR(e,t,n))}class g1 extends sR{constructor(e){super(),this.firestore=e}convertBytes(e){return new ki(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function Nn(t){t=yn(t,Wr);const e=yn(t.firestore,Ls),n=ip(e),r=new g1(e);return nR(t._query),zP(n,t._query).then(s=>new iR(e,r,t,s))}function oy(t,e,n){t=yn(t,wt);const r=yn(t.firestore,Ls),s=m1(t.converter,e);return Nu(r,[a1(bu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Xt.none())])}function mi(t,e,n,...r){t=yn(t,wt);const s=yn(t.firestore,Ls),o=bu(s);let a;return a=typeof(e=Se(e))=="string"||e instanceof yu?XP(o,"updateDoc",t._key,e,n,r):JP(o,"updateDoc",t._key,e),Nu(s,[a.toMutation(t._key,Xt.exists(!0))])}function zl(t){return Nu(yn(t.firestore,Ls),[new $m(t._key,Xt.none())])}function Fn(t,e){const n=yn(t.firestore,Ls),r=vt(t),s=m1(t.converter,e);return Nu(n,[a1(bu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Xt.exists(!1))]).then(()=>r)}function Nu(t,e){return function(r,s){const o=new Wn;return r.asyncQueue.enqueueAndForget(async()=>IP(await qP(r),s,o)),o.promise}(ip(t),e)}function aR(t,e,n){const r=n.docs.get(e._key),s=new g1(t);return new p1(t,s,e._key,r,new wo(n.hasPendingWrites,n.fromCache),e.converter)}function Ad(){return new cp("serverTimestamp")}(function(e,n=!0){(function(s){Mi=s})(Li),Cn(new gn("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new Ls(new oA(r.getProvider("auth-internal")),new uA(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new aa(d.options.projectId,m)}(a,s),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Jt(wx,"4.7.0",e),Jt(wx,"4.7.0","esm2017")})();const x1="@firebase/installations",yp="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1=1e4,v1=`w:${yp}`,b1="FIS_v2",lR="https://firebaseinstallations.googleapis.com/v1",cR=60*60*1e3,uR="installations",dR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Es=new As(uR,dR,hR);function w1(t){return t instanceof bn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1({projectId:t}){return`${lR}/projects/${t}/installations`}function j1(t){return{token:t.token,requestStatus:2,expiresIn:mR(t.expiresIn),creationTime:Date.now()}}async function N1(t,e){const r=(await e.json()).error;return Es.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function E1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function fR(t,{refreshToken:e}){const n=E1(t);return n.append("Authorization",pR(e)),n}async function T1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function mR(t){return Number(t.replace("s","000"))}function pR(t){return`${b1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=_1(t),s=E1(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:b1,appId:t.appId,sdkVersion:v1},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await T1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:j1(d.authToken)}}else throw await N1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=/^[cdef][\w-]{21}$/,pf="";function vR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=bR(t);return yR.test(n)?n:pf}catch{return pf}}function bR(t){return xR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Map;function k1(t,e){const n=Eu(t);A1(n,e),wR(n,e)}function A1(t,e){const n=I1.get(t);if(n)for(const r of n)r(e)}function wR(t,e){const n=_R();n&&n.postMessage({key:t,fid:e}),jR()}let cs=null;function _R(){return!cs&&"BroadcastChannel"in self&&(cs=new BroadcastChannel("[Firebase] FID Change"),cs.onmessage=t=>{A1(t.data.key,t.data.fid)}),cs}function jR(){I1.size===0&&cs&&(cs.close(),cs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="firebase-installations-database",ER=1,Ts="firebase-installations-store";let Cd=null;function vp(){return Cd||(Cd=sw(NR,ER,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ts)}}})),Cd}async function Pc(t,e){const n=Eu(t),s=(await vp()).transaction(Ts,"readwrite"),o=s.objectStore(Ts),a=await o.get(n);return await o.put(e,n),await s.done,(!a||a.fid!==e.fid)&&k1(t,e.fid),e}async function C1(t){const e=Eu(t),r=(await vp()).transaction(Ts,"readwrite");await r.objectStore(Ts).delete(e),await r.done}async function Tu(t,e){const n=Eu(t),s=(await vp()).transaction(Ts,"readwrite"),o=s.objectStore(Ts),a=await o.get(n),c=e(a);return c===void 0?await o.delete(n):await o.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&k1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp(t){let e;const n=await Tu(t.appConfig,r=>{const s=TR(r),o=SR(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===pf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function TR(t){const e=t||{fid:vR(),registrationStatus:0};return P1(e)}function SR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Es.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=IR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kR(t)}:{installationEntry:e}}async function IR(t,e){try{const n=await gR(t,e);return Pc(t.appConfig,n)}catch(n){throw w1(n)&&n.customData.serverCode===409?await C1(t.appConfig):await Pc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function kR(t){let e=await ay(t.appConfig);for(;e.registrationStatus===1;)await S1(100),e=await ay(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await bp(t);return r||n}return e}function ay(t){return Tu(t,e=>{if(!e)throw Es.create("installation-not-found");return P1(e)})}function P1(t){return AR(t)?{fid:t.fid,registrationStatus:0}:t}function AR(t){return t.registrationStatus===1&&t.registrationTime+y1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR({appConfig:t,heartbeatServiceProvider:e},n){const r=PR(t,n),s=fR(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:v1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await T1(()=>fetch(r,c));if(u.ok){const d=await u.json();return j1(d)}else throw await N1("Generate Auth Token",u)}function PR(t,{fid:e}){return`${_1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp(t,e=!1){let n;const r=await Tu(t.appConfig,o=>{if(!R1(o))throw Es.create("not-registered");const a=o.authToken;if(!e&&LR(a))return o;if(a.requestStatus===1)return n=RR(t,e),o;{if(!navigator.onLine)throw Es.create("app-offline");const c=VR(o);return n=DR(t,c),c}});return n?await n:r.authToken}async function RR(t,e){let n=await ly(t.appConfig);for(;n.authToken.requestStatus===1;)await S1(100),n=await ly(t.appConfig);const r=n.authToken;return r.requestStatus===0?wp(t,e):r}function ly(t){return Tu(t,e=>{if(!R1(e))throw Es.create("not-registered");const n=e.authToken;return OR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function DR(t,e){try{const n=await CR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Pc(t.appConfig,r),n}catch(n){if(w1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await C1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Pc(t.appConfig,r)}throw n}}function R1(t){return t!==void 0&&t.registrationStatus===2}function LR(t){return t.requestStatus===2&&!MR(t)}function MR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+cR}function VR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OR(t){return t.requestStatus===1&&t.requestTime+y1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t){const e=t,{installationEntry:n,registrationPromise:r}=await bp(e);return r?r.catch(console.error):wp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e=!1){const n=t;return await UR(n),(await wp(n,e)).token}async function UR(t){const{registrationPromise:e}=await bp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zR(t){if(!t||!t.options)throw Pd("App Configuration");if(!t.name)throw Pd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Pd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Pd(t){return Es.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="installations",BR="installations-internal",$R=t=>{const e=t.getProvider("app").getImmediate(),n=zR(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},GR=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,D1).getImmediate();return{getId:()=>FR(n),getToken:s=>qR(n,s)}};function HR(){Cn(new gn(D1,$R,"PUBLIC")),Cn(new gn(BR,GR,"PRIVATE"))}HR();Jt(x1,yp);Jt(x1,yp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="analytics",WR="firebase_id",QR="origin",KR=60*1e3,YR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_p="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt=new ru("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ft=new As("analytics","Analytics",JR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){if(!t.startsWith(_p)){const e=Ft.create("invalid-gtag-resource",{gtagURL:t});return Pt.warn(e.message),""}return t}function L1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function ZR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function e4(t,e){const n=ZR("firebase-js-sdk-policy",{createScriptURL:XR}),r=document.createElement("script"),s=`${_p}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function t4(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function n4(t,e,n,r,s,o){const a=r[s];try{if(a)await e[a];else{const u=(await L1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Pt.error(c)}t("config",s,o)}async function r4(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await L1(n);for(const u of a){const d=c.find(f=>f.measurementId===u),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){Pt.error(o)}}function s4(t,e,n,r){async function s(o,...a){try{if(o==="event"){const[c,u]=a;await r4(t,e,n,c,u)}else if(o==="config"){const[c,u]=a;await n4(t,e,n,r,c,u)}else if(o==="consent"){const[c,u]=a;t("consent",c,u)}else if(o==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(o==="set"){const[c]=a;t("set",c)}else t(o,...a)}catch(c){Pt.error(c)}}return s}function i4(t,e,n,r,s){let o=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=s4(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function o4(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(_p)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=30,l4=1e3;class c4{constructor(e={},n=l4){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const M1=new c4;function u4(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function d4(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:u4(r)},o=YR.replace("{app-id}",n),a=await fetch(o,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Ft.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function h4(t,e=M1,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw Ft.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Ft.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new p4;return setTimeout(async()=>{c.abort()},KR),V1({appId:r,apiKey:s,measurementId:o},a,c,e)}async function V1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=M1){var o;const{appId:a,measurementId:c}=t;try{await f4(r,e)}catch(u){if(c)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await d4(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!m4(d)){if(s.deleteThrottleMetadata(a),c)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const m=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?G0(n,s.intervalMillis,a4):G0(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return s.setThrottleMetadata(a,f),Pt.debug(`Calling attemptFetch again in ${m} millis`),V1(t,f,r,s)}}function f4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(Ft.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function m4(t){if(!(t instanceof bn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class p4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function g4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,a=Object.assign(Object.assign({},r),{send_to:o});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(){if(bm())try{await wm()}catch(t){return Pt.warn(Ft.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Pt.warn(Ft.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function y4(t,e,n,r,s,o,a){var c;const u=h4(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Pt.error(w)),e.push(u);const d=x4().then(w=>{if(w)return r.getId()}),[m,f]=await Promise.all([u,d]);o4(o)||e4(o,m.measurementId),s("js",new Date);const g=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return g[QR]="firebase",g.update=!0,f!=null&&(g[WR]=f),s("config",m.measurementId,g),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e){this.app=e}_delete(){return delete Mo[this.app.options.appId],Promise.resolve()}}let Mo={},cy=[];const uy={};let Rd="dataLayer",b4="gtag",dy,O1,hy=!1;function w4(){const t=[];if(vm()&&t.push("This is a browser extension environment."),tw()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Ft.create("invalid-analytics-context",{errorInfo:e});Pt.warn(n.message)}}function _4(t,e,n){w4();const r=t.options.appId;if(!r)throw Ft.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ft.create("no-api-key");if(Mo[r]!=null)throw Ft.create("already-exists",{id:r});if(!hy){t4(Rd);const{wrappedGtag:o,gtagCore:a}=i4(Mo,cy,uy,Rd,b4);O1=o,dy=a,hy=!0}return Mo[r]=y4(t,cy,uy,e,dy,Rd,n),new v4(t)}function j4(t=jm()){t=Se(t);const e=Cs(t,Rc);return e.isInitialized()?e.getImmediate():N4(t)}function N4(t,e={}){const n=Cs(t,Rc);if(n.isInitialized()){const s=n.getImmediate();if(na(e,n.getOptions()))return s;throw Ft.create("already-initialized")}return n.initialize({options:e})}async function E4(){if(vm()||!tw()||!bm())return!1;try{return await wm()}catch{return!1}}function T4(t,e,n,r){t=Se(t),g4(O1,Mo[t.app.options.appId],e,n,r).catch(s=>Pt.error(s))}const fy="@firebase/analytics",my="0.10.7";function S4(){Cn(new gn(Rc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return _4(r,s,n)},"PUBLIC")),Cn(new gn("analytics-internal",t,"PRIVATE")),Jt(fy,my),Jt(fy,my,"esm2017");function t(e){try{const n=e.getProvider(Rc).getImmediate();return{logEvent:(r,s,o)=>T4(n,r,s,o)}}catch(n){throw Ft.create("interop-component-reg-failed",{reason:n})}}}S4();const I4={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},jp=iw(I4),ue=WP(jp),ut=eA(jp);typeof window<"u"&&E4().then(t=>{t&&j4(jp)});const F1=A.createContext(void 0),pt=()=>{const t=A.useContext(F1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Dd=async t=>{var r,s;if(!t)return null;const n=(await xp(vt(ue,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},k4=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(!0);A.useEffect(()=>{const g=zI(ut,async w=>{if(w){const S=await Dd(w);n(S)}else n(null);s(!1)});return()=>g()},[]);const f={currentUser:e,loading:r,register:async(g,w,S)=>{try{const C=await Pw(ut,g,w),{user:R}=C;await Rw(R,{displayName:S}),await ux(R);const j={uid:R.uid,email:R.email,displayName:S,emailVerified:R.emailVerified,isAdmin:!1,createdAt:Ad(),updatedAt:Ad()};await oy(vt(ue,"users",R.uid),j);const _=await Dd(R);return n(_),R}catch(C){throw console.error("Erreur lors de l'inscription:",C),C}},login:async(g,w)=>{try{const S=await Jh(ut,g,w),C=await Dd(S.user);return n(C),C}catch(S){throw console.error("Erreur de connexion:",S),S}},loginWithGoogle:async()=>{const g=new On;let w=null;try{w=(await ck(ut,g)).user,console.log("[Google] Utilisateur connecté:",w);const C=vt(ue,"users",w.uid),R=await xp(C);console.log("[Google] Document utilisateur existe:",R.exists()),R.exists()||(await oy(C,{uid:w.uid,email:w.email,displayName:w.displayName,emailVerified:w.emailVerified,isAdmin:!1,createdAt:Ad(),photoURL:w.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const j={uid:w.uid,email:w.email||"",displayName:w.displayName||"",emailVerified:w.emailVerified,isAdmin:R.exists()?R.data().isAdmin:!1,createdAt:w.metadata.creationTime?new Date(w.metadata.creationTime):void 0,photoURL:w.photoURL??void 0};return console.log("[Google] AppUser retourné:",j),j}catch(S){throw console.error("[Google] Erreur dans loginWithGoogle:",S,w),S}},logout:async()=>{try{await BI(ut),n(null)}catch(g){throw console.error("Erreur lors de la déconnexion:",g),g}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(ut.currentUser)try{await ux(ut.currentUser)}catch(g){throw console.error("Erreur lors de l'envoi de l'email de vérification:",g),g}}};return i.jsx(F1.Provider,{value:f,children:t})},q1=A.createContext(void 0),qi=()=>{const t=A.useContext(q1);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},A4=({children:t})=>{const[e,n]=A.useState([]),[r,s]=A.useState([]),[o,a]=A.useState([]),[c,u]=A.useState(!0);A.useEffect(()=>{(async()=>{u(!0);const y=await Nn(Ue(ue,"guideSections"));s(y.docs.map(P=>({id:P.id,...P.data()})));const v=await Nn(Ue(ue,"resources"));n(v.docs.map(P=>({id:P.id,...P.data()})));const k=await Nn(Ue(ue,"faq"));a(k.docs.map(P=>({id:P.id,...P.data()}))),u(!1)})()},[]);const d=async()=>{const x=await Nn(Ue(ue,"guideSections"));s(x.docs.map(k=>({id:k.id,...k.data()})));const y=await Nn(Ue(ue,"resources"));n(y.docs.map(k=>({id:k.id,...k.data()})));const v=await Nn(Ue(ue,"faq"));a(v.docs.map(k=>({id:k.id,...k.data()})))},N={resources:e,guideSections:r,faqItems:o,addResource:async x=>{await Fn(Ue(ue,"resources"),x),await d()},updateResource:async(x,y)=>{await mi(vt(ue,"resources",x),y),await d()},deleteResource:async x=>{await zl(vt(ue,"resources",x)),await d()},addGuideSection:async x=>{await Fn(Ue(ue,"guideSections"),x),await d()},updateGuideSection:async(x,y)=>{await mi(vt(ue,"guideSections",x),y),await d()},deleteGuideSection:async x=>{await zl(vt(ue,"guideSections",x)),await d()},addFAQItem:async x=>{await Fn(Ue(ue,"faq"),x),await d()},updateFAQItem:async(x,y)=>{await mi(vt(ue,"faq",x),y),await d()},deleteFAQItem:async x=>{await zl(vt(ue,"faq",x)),await d()},getResourcesByPhase:x=>e.filter(y=>y.phase===x),getGuideSectionsByPhase:x=>r.filter(y=>y.phase===x).sort((y,v)=>y.order-v.order),getFAQItemsByPhase:x=>o.filter(y=>y.phase===x),searchResources:x=>{const y=x.toLowerCase();return e.filter(v=>v.title.toLowerCase().includes(y)||v.description.toLowerCase().includes(y)||v.category.toLowerCase().includes(y))}};return c?i.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):i.jsx(q1.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(t,e)=>{const n=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:c="",children:u,...d},m)=>A.createElement("svg",{ref:m,...C4,width:s,height:s,stroke:r,strokeWidth:a?Number(o)*24/Number(s):o,className:["lucide",`lucide-${P4(t)}`,c].join(" "),...d},[...e.map(([f,g])=>A.createElement(f,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=Q("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=Q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=Q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=Q("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=Q("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=Q("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=Q("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Q("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=Q("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=Q("Copyright",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B1=Q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=Q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=Q("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=Q("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=Q("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=Q("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=Q("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=Q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=Q("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=Q("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=Q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ep=Q("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=Q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=Q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=Q("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=Q("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=Q("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=Q("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=Q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=Q("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=Q("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Q("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=Q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=Q("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=Q("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=Q("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=Q("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=Q("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=Q("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=Q("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=Q("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=Q("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=Q("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=Q("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=Q("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),f5=()=>{var f,g;const{currentUser:t,logout:e,isAdmin:n}=pt(),[r,s]=A.useState(!1),[o,a]=A.useState(!1),[c,u]=A.useState(!1),d=ks();A.useEffect(()=>{const w=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),A.useEffect(()=>{s(!1),a(!1)},[d]);const m=async()=>{try{await e()}catch(w){console.error("Logout failed",w)}};return i.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:i.jsxs("div",{className:"container mx-auto px-4 py-3",children:[i.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[i.jsx(Y,{to:"/",className:"flex items-center",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:i.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),i.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),i.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&i.jsxs(i.Fragment,{children:[i.jsx(Y,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),i.jsx(Y,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),i.jsx(Y,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&i.jsx(Y,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),i.jsx("div",{className:"hidden md:flex items-center",children:t?i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>a(!o),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),i.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),i.jsx(pi,{className:"w-4 h-4"})]}),o&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[i.jsxs(Y,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[i.jsx(xf,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Profil"})]}),n()&&i.jsxs(Y,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[i.jsx(W1,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Administration"})]}),i.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[i.jsx(yy,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Déconnexion"})]})]})]}):i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(Y,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),i.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),i.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?i.jsx(Tp,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):i.jsx(s5,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),r&&i.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:i.jsx("div",{className:"flex flex-col space-y-4",children:t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:i.jsx("span",{className:"text-white font-medium text-sm",children:(((f=t.displayName)==null?void 0:f.charAt(0))||((g=t.email)==null?void 0:g.charAt(0))||"U").toUpperCase()})}),i.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),i.jsxs(Y,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[i.jsx(xf,{className:"w-4 h-4 mr-2"}),"Profil"]}),i.jsx(Y,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),i.jsx(Y,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),i.jsx(Y,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&i.jsx(Y,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),i.jsxs("button",{onClick:m,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[i.jsx(yy,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Déconnexion"})]})]}):i.jsxs("div",{className:"flex flex-col space-y-4",children:[i.jsx(Y,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),i.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},m5=()=>i.jsx("div",{className:"bg-gray-100 py-3 border-t border-gray-200",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center text-xs text-gray-500 gap-4",children:[i.jsx(Y,{to:"/legal/cgu",className:"hover:text-gray-700 hover:underline",children:"Conditions Générales d'Utilisation"}),i.jsx(Y,{to:"/legal/privacy-policy",className:"hover:text-gray-700 hover:underline",children:"Politique de Confidentialité"}),i.jsx(Y,{to:"/legal/legal-notice",className:"hover:text-gray-700 hover:underline",children:"Mentions Légales"}),i.jsx(Y,{to:"/legal/moderation-charter",className:"hover:text-gray-700 hover:underline",children:"Charte de Modération"}),i.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),localStorage.removeItem("cookieConsent"),window.location.reload()},className:"hover:text-gray-700 hover:underline cursor-pointer",children:"Paramètres des cookies"})]})})}),p5=()=>{const t=new Date().getFullYear();return i.jsxs("footer",{className:"bg-blue-900 text-white",children:[i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"col-span-1 md:col-span-1",children:[i.jsxs(Y,{to:"/",className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:i.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),i.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),i.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),i.jsxs("div",{className:"col-span-1",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(Y,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),i.jsx("li",{children:i.jsx(Y,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),i.jsx("li",{children:i.jsx(Y,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),i.jsxs("div",{className:"col-span-1",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx(Y,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),i.jsx("li",{children:i.jsx(Y,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),i.jsx("li",{children:i.jsx(Y,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),i.jsxs("div",{className:"col-span-1",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx(G1,{className:"w-4 h-4 mr-2"}),i.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),i.jsxs("div",{className:"flex space-x-4 mt-4",children:[i.jsx("a",{href:"https://www.linkedin.com/in/abdoul-ahad-mback%C3%A9-diouf-5b04b4213/",className:"text-blue-200 hover:text-white transition-colors",children:i.jsx(n5,{className:"w-5 h-5"})}),i.jsx("a",{href:"https://github.com/AbdoulDiouf2",className:"text-blue-200 hover:text-white transition-colors",children:i.jsx(K4,{className:"w-5 h-5"})})]})]})]}),i.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[i.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),i.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",i.jsx(Y4,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]}),i.jsx(m5,{})]})},yl=({children:t})=>{const{currentUser:e,loading:n}=pt();return n?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?i.jsx(i.Fragment,{children:t}):i.jsx(Fh,{to:"/login"})},hr=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=pt();return n?i.jsx("div",{className:"flex justify-center items-center min-h-screen",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?i.jsx(i.Fragment,{children:t}):i.jsx(Fh,{to:"/dashboard"}):i.jsx(Fh,{to:"/login"})},g5=()=>{const[t,e]=A.useState({essential:!0,analytics:!1,marketing:!1,acceptedAt:null}),[n,r]=A.useState(!1),[s,o]=A.useState(!1);A.useEffect(()=>{const f=localStorage.getItem("cookieConsent");if(f)try{const g=JSON.parse(f);e({...g,acceptedAt:g.acceptedAt?new Date(g.acceptedAt):null}),r(!1)}catch(g){console.error("Erreur lors de la lecture du consentement:",g),r(!0)}else r(!0)},[]);const a=f=>{e(g=>({...g,[f]:!g[f]}))},c=()=>{const f={essential:!0,analytics:!0,marketing:!0,acceptedAt:new Date};e(f),m(f),r(!1),o(!1)},u=()=>{const f={essential:!0,analytics:!1,marketing:!1,acceptedAt:new Date};e(f),m(f),r(!1),o(!1)},d=()=>{const f={...t,acceptedAt:new Date};e(f),m(f),r(!1),o(!1)},m=f=>{localStorage.setItem("cookieConsent",JSON.stringify(f)),f.analytics&&console.log("Analytics activé"),f.marketing&&console.log("Marketing activé")};return!n&&!s?null:i.jsxs(i.Fragment,{children:[s&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),n&&!s&&i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-40",children:i.jsx("div",{className:"container mx-auto",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[i.jsxs("div",{className:"flex-grow",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Votre vie privée"}),i.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Nous utilisons des cookies pour améliorer votre expérience sur notre site, personnaliser le contenu et analyser notre trafic. Vous pouvez choisir d'accepter tous les cookies ou personnaliser vos préférences."}),i.jsx("div",{className:"mt-1",children:i.jsx(Y,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline text-sm",target:"_blank",children:"En savoir plus sur notre politique de confidentialité"})})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Personnaliser"}),i.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refuser"}),i.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Tout accepter"})]})]})})}),s&&i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-50 max-h-[80vh] overflow-y-auto",children:i.jsxs("div",{className:"container mx-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Paramètres de confidentialité"}),i.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:i.jsx(Tp,{size:24})})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies essentiels"}),i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-not-allowed right-0 z-10 border-gray-300 transition-all duration-300"}),i.jsx("label",{className:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-not-allowed transition-all duration-300"})]})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies sont nécessaires au fonctionnement du site et ne peuvent pas être désactivés. Ils sont généralement définis en réponse à des actions que vous effectuez, comme définir vos préférences de confidentialité, vous connecter ou remplir des formulaires."})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies d'analyse"}),i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",checked:t.analytics,onChange:()=>a("analytics"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.analytics?"border-white":"border-gray-300"}`}),i.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.analytics?"bg-blue-600":"bg-gray-300"}`})]})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies nous permettent de compter les visites et les sources de trafic afin de mesurer et d'améliorer les performances de notre site. Ils nous aident à savoir quelles pages sont les plus et les moins populaires, et à voir comment les visiteurs se déplacent sur le site."})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies marketing"}),i.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[i.jsx("input",{type:"checkbox",checked:t.marketing,onChange:()=>a("marketing"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.marketing?"border-white":"border-gray-300"}`}),i.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.marketing?"bg-blue-600":"bg-gray-300"}`})]})]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies peuvent être définis via notre site par nos partenaires publicitaires. Ils peuvent être utilisés pour établir un profil de vos intérêts et vous proposer des publicités pertinentes sur d'autres sites."})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),i.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Enregistrer mes préférences"})]})]})})]})},x5=()=>{const{currentUser:t}=pt();return i.jsxs("div",{className:"flex flex-col min-h-screen",children:[i.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[i.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[i.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS à l'ESIGELEC"}),i.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),i.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?i.jsxs(Y,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",i.jsx(py,{className:"ml-2 w-5 h-5"})]}):i.jsxs(i.Fragment,{children:[i.jsxs(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",i.jsx(py,{className:"ml-2 w-5 h-5"})]}),i.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),i.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:i.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),i.jsx("section",{className:"py-16 bg-white",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[i.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(h5,{className:"w-7 h-7 text-blue-900"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),i.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(M4,{className:"w-7 h-7 text-blue-900"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),i.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(r5,{className:"w-7 h-7 text-blue-900"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),i.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[i.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:i.jsx(Qn,{className:"w-7 h-7 text-blue-900"})}),i.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),i.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),i.jsx("section",{className:"py-16 bg-gray-50",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),i.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),i.jsxs("div",{className:"flex flex-col space-y-6",children:[i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:i.jsxs("div",{className:"flex flex-col md:flex-row",children:[i.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),i.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),i.jsx("div",{className:"md:w-2/3 p-6",children:i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),i.jsx("span",{children:"Préparation dossier Campus France"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),i.jsx("span",{children:"Candidature ESIGELEC"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),i.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:i.jsxs("div",{className:"flex flex-col md:flex-row",children:[i.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),i.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),i.jsx("div",{className:"md:w-2/3 p-6",children:i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),i.jsx("span",{children:"Demande de visa étudiant"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),i.jsx("span",{children:"Recherche de logement"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),i.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),i.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:i.jsxs("div",{className:"flex flex-col md:flex-row",children:[i.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[i.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),i.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),i.jsx("div",{className:"md:w-2/3 p-6",children:i.jsxs("ul",{className:"space-y-2",children:[i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),i.jsx("span",{children:"Transport vers la France"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),i.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),i.jsxs("li",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),i.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),i.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),i.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),i.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?i.jsx(Y,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):i.jsxs(i.Fragment,{children:[i.jsx(Y,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),i.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},y5=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(!1),[a,c]=A.useState(""),[u,d]=A.useState(!1),[m,f]=A.useState(!1),g=vn(),{login:w,loginWithGoogle:S}=pt();Fc.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const C=async j=>{j.preventDefault();try{c(""),d(!0),await w(t,n),g("/dashboard")}catch(_){c("Identifiants invalides. Veuillez réessayer."),console.error(_)}finally{d(!1)}},R=async()=>{c(""),f(!0);try{await S(),g("/dashboard")}catch(j){let _="Erreur lors de la connexion avec Google.";j&&typeof j=="object"&&"message"in j&&(_+=`
${j.message}`),c(_),console.error(j)}finally{f(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:i.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),i.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",i.jsx(Y,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{children:i.jsx("p",{className:"text-sm text-red-700",children:a})})})}),i.jsxs("button",{type:"button",onClick:R,disabled:m,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${m?"opacity-70 cursor-not-allowed":""}`,children:[i.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:i.jsxs("g",{children:[i.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),i.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),i.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),i.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),m?"Connexion Google...":"Se connecter avec Google"]}),i.jsxs("form",{className:"space-y-6",onSubmit:C,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:j=>e(j.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),i.jsx("div",{className:"mt-1",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:j=>r(j.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),i.jsx("button",{type:"button",tabIndex:-1,onClick:()=>o(j=>!j),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":s?"Masquer le mot de passe":"Afficher le mot de passe",children:s?i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),i.jsx("div",{className:"text-sm",children:i.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},v5=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(""),[a,c]=A.useState(""),[u,d]=A.useState(!1),[m,f]=A.useState(!1),[g,w]=A.useState(""),[S,C]=A.useState(!1),R=vn(),{register:j,loginWithGoogle:_}=pt(),E=async()=>{try{await _(),R("/dashboard")}catch{w("Erreur lors de l'inscription avec Google"),console.error()}},L=async D=>{if(D.preventDefault(),s!==a)return w("Les mots de passe ne correspondent pas");try{w(""),C(!0),await j(n,s,t),R("/dashboard")}catch{w("Erreur lors de la création du compte"),console.error()}finally{C(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:i.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),i.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",i.jsx(Y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{children:i.jsx("p",{className:"text-sm text-red-700",children:g})})})}),i.jsxs("button",{type:"button",onClick:E,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:i.jsxs("g",{children:[i.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),i.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),i.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),i.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),i.jsxs("form",{className:"space-y-6",onSubmit:L,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),i.jsx("div",{className:"mt-1",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:D=>o(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),i.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),i.jsx("div",{className:"mt-1",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:D=>c(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),i.jsx("button",{type:"button",tabIndex:-1,onClick:()=>f(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":m?"Masquer le mot de passe":"Afficher le mot de passe",children:m?i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),i.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",i.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:S,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:S?"Création en cours...":"Créer un compte"})})]})]})})]})},b5=()=>{const{currentUser:t}=pt(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=qi(),[o,a]=A.useState("post-cps"),[c,u]=A.useState([]),d=g=>{c.includes(g)?u(c.filter(w=>w!==g)):u([...c,g])},m=r?r(o):[],f=g=>{const w=r?r(g):[];if(!w||w.length===0)return 0;const S=w.filter(C=>c.includes(C.id));return Math.round(S.length/w.length*100)};return!n||!s||!e?i.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),i.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",i.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:i.jsxs("div",{className:"flex flex-wrap",children:[i.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),i.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),i.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsxs("div",{className:"border-b border-gray-200 p-6",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[o==="post-cps"&&"Après votre CPS",o==="during-process"&&"Pendant vos démarches administratives",o==="pre-arrival"&&"Avant votre arrivée en France"]}),i.jsxs("p",{className:"text-gray-600",children:[o==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",o==="during-process"&&"Les démarches à effectuer pour préparer votre départ",o==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),i.jsx("div",{className:"divide-y divide-gray-200",children:m&&m.length>0?m.map(g=>i.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:i.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[i.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:i.jsx("button",{onClick:()=>d(g.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(g.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:i.jsx(U1,{className:"w-5 h-5"})})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g.title}),i.jsx("p",{className:"text-gray-600 mb-4",children:g.content}),Array.isArray(g.resources)&&g.resources.length>0&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),i.jsx("div",{className:"space-y-2",children:g.resources.map(w=>{const S=n.find(C=>C.id===w);return S?i.jsxs("a",{href:S.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(It,{className:"w-4 h-4 mr-2"}),S.title]},S.id):null})})]})]})]})},g.id)):i.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("post-cps"),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("post-cps")}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("during-process"),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("during-process")}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),i.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("pre-arrival"),"%"]})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:i.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("pre-arrival")}%`}})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),i.jsx(Y,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),i.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(g=>i.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:i.jsx(It,{className:"w-5 h-5 text-blue-700"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900",children:g.title}),i.jsx("p",{className:"text-xs text-gray-500",children:g.phase})]})]},g.id))})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),i.jsx(Y,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),i.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(g=>i.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:g.question}),i.jsx("p",{className:"text-xs text-gray-700",children:g.answer&&g.answer.length>100?`${g.answer.substring(0,100)}...`:g.answer})]},g.id))})]})]})]})})]})},w5=()=>{const{resources:t}=qi(),[e,n]=A.useState(""),[r,s]=A.useState("all"),[o,a]=A.useState("all"),[c,u]=A.useState(!1),[d,m]=A.useState(!1),[f,g]=A.useState(null),[w,S]=A.useState(!1),C=[...new Set(t.map(D=>D.category))],R=D=>{if(D.includes("dropbox.com")){let V=D.replace("www.dropbox.com","dl.dropboxusercontent.com");return V.includes("?dl=0")?V=V.replace("?dl=0","?raw=1"):V.includes("?")?V+="&raw=1":V+="?raw=1",V}return D},j=D=>`https://docs.google.com/viewer?url=${encodeURIComponent(D)}&embedded=true`,_=D=>{D.preventDefault()},E=t.filter(D=>r!=="all"&&D.phase!==r||o!=="all"&&D.category!==o?!1:e?D.title.toLowerCase().includes(e.toLowerCase())||D.description.toLowerCase().includes(e.toLowerCase()):!0),L=D=>{switch(D){case"pdf":return i.jsx(H4,{className:"w-6 h-6 text-red-500"});case"image":return i.jsx(X4,{className:"w-6 h-6 text-green-500"});case"video":return i.jsx(d5,{className:"w-6 h-6 text-purple-500"});case"archive":return i.jsx(D4,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return i.jsx(It,{className:"w-6 h-6 text-blue-500"})}};return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),i.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:i.jsx("div",{className:"p-6",children:i.jsx("form",{onSubmit:_,children:i.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[i.jsx("div",{className:"flex-grow",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Dc,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:D=>n(D.target.value)})]})}),i.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(xy,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),i.jsx(pi,{className:"h-4 w-4"})]}),c&&i.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:i.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("all"),u(!1)},children:"Toutes les phases"}),i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("post-cps"),u(!1)},children:"Post-CPS"}),i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("during-process"),u(!1)},children:"Pendant les démarches"}),i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>m(!d),children:[i.jsxs("span",{className:"flex items-center",children:[i.jsx(xy,{className:"mr-2 h-4 w-4"}),o==="all"?"Toutes les catégories":o]}),i.jsx(pi,{className:"h-4 w-4"})]}),d&&i.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:i.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),m(!1)},children:"Toutes les catégories"}),C.map(D=>i.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(D),m(!1)},children:D},D))]})})]})]})]})})})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.length>0?E.map(D=>i.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{g(D),S(!0)},children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:L(D.fileType)}),i.jsx("div",{className:"ml-4",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title})})]}),i.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),i.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.phase==="post-cps"?"Post-CPS":D.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category}),i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.fileType==="pdf"?"bg-red-100 text-red-800":D.fileType==="doc"||D.fileType==="docx"||D.fileType==="txt"?"bg-blue-100 text-blue-800":D.fileType==="xls"||D.fileType==="xlsx"?"bg-green-100 text-green-800":D.fileType==="ppt"||D.fileType==="pptx"?"bg-orange-100 text-orange-800":D.fileType==="image"?"bg-purple-100 text-purple-800":D.fileType==="video"?"bg-pink-100 text-pink-800":D.fileType==="audio"?"bg-indigo-100 text-indigo-800":D.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:D.fileType.toUpperCase()})]}),i.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[i.jsxs("span",{children:["Mis à jour le ",D.updatedDate]}),i.jsxs("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:V=>V.stopPropagation(),children:[i.jsx(gy,{className:"w-4 h-4 mr-1"}),i.jsx("span",{children:"Télécharger"})]})]})]})},D.id)):i.jsxs("div",{className:"col-span-full text-center py-12",children:[i.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:i.jsx(Dc,{className:"w-8 h-8 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),i.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),w&&f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.title}),i.jsx("p",{className:"text-sm text-gray-500",children:f.category})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[i.jsx(q4,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),i.jsxs("a",{href:f.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[i.jsx(gy,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),i.jsxs("button",{onClick:()=>S(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[i.jsx(Tp,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),i.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:f.fileType==="pdf"?i.jsxs("div",{className:"flex flex-col items-center h-full",children:[i.jsx("div",{className:"h-full w-full",children:i.jsx("object",{data:R(f.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:i.jsx("iframe",{src:j(f.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${f.title} (Google Viewer)`,allowFullScreen:!0})})}),i.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",i.jsx("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"télécharger"}),"ou l'",i.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(f.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):f.fileType==="image"?i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("img",{src:R(f.fileUrl),alt:f.title,className:"max-w-full max-h-full object-contain rounded-md"})}):i.jsx("iframe",{src:R(f.fileUrl),className:"w-full h-full border-0 rounded-md",title:f.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},_5=()=>{const{faqItems:t,addFAQItem:e}=qi(),{currentUser:n}=pt(),[r,s]=A.useState(""),[o,a]=A.useState("all"),[c,u]=A.useState(null),[d,m]=A.useState(!1),[f,g]=A.useState(!1),[w,S]=A.useState(!1),[C,R]=A.useState(""),[j,_]=A.useState("post-cps"),[E,L]=A.useState(""),[D,V,N]=t.reduce((v,k)=>(n&&(k.userId===n.uid||k.userEmail===n.email)&&(k.isAnswered?v[0].push(k):v[1].push(k)),k.isApproved&&k.isAnswered&&(o==="all"||k.phase===o)&&(!r||k.question.toLowerCase().includes(r.toLowerCase())||k.answer.toLowerCase().includes(r.toLowerCase())||k.category.toLowerCase().includes(r.toLowerCase()))&&v[2].push(k),v),[[],[],[]]),x=v=>{u(c===v?null:v)},y=v=>{v.preventDefault(),C.trim()&&(e({question:C,answer:"Cette question est en attente de réponse par notre équipe.",category:E||"général",phase:j,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:n==null?void 0:n.uid,userEmail:n==null?void 0:n.email}),R(""),L(""),g(!0),setTimeout(()=>{g(!1),m(!1)},5e3))};return A.useEffect(()=>{d||g(!1)},[d]),i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),i.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[i.jsx("div",{className:"flex-grow",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Dc,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:v=>s(v.target.value)})]})}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs("select",{value:o,onChange:v=>a(v.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:w,children:[i.jsx("option",{value:"all",children:"Toutes les phases"}),i.jsx("option",{value:"post-cps",children:"Post-CPS"}),i.jsx("option",{value:"during-process",children:"Pendant les démarches"}),i.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]}),n&&i.jsx("button",{type:"button",onClick:()=>S(!w),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:w?"Toutes les questions":"Mes questions"}),i.jsxs("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(fs,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[i.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[i.jsx(Nr,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),i.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),i.jsx("form",{onSubmit:y,className:"space-y-7",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),i.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:C,onChange:v=>R(v.target.value),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),i.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:j,onChange:v=>_(v.target.value),required:!0,children:[i.jsx("option",{value:"post-cps",children:"Post-CPS"}),i.jsx("option",{value:"during-process",children:"Pendant les démarches"}),i.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),i.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:E,onChange:v=>L(v.target.value)})]})]}),f?i.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(U1,{className:"h-5 w-5 text-green-500 mr-2"}),i.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),i.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):i.jsxs("div",{className:"flex justify-end",children:[i.jsx("button",{type:"button",onClick:()=>m(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),i.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),w?i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b",children:i.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",i.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:D.length})]})}),i.jsx("div",{className:"divide-y divide-gray-200",children:D.length>0?D.map(v=>i.jsxs("div",{className:"p-6",children:[i.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(Nr,{className:"h-4 w-4 text-green-700"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.question}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?i.jsx(Ld,{className:"h-5 w-5 text-gray-500"}):i.jsx(pi,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&i.jsxs("div",{className:"mt-4 ml-11",children:[i.jsx("p",{className:"text-gray-700",children:v.answer}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b",children:i.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",i.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:V.length})]})}),i.jsx("div",{className:"divide-y divide-gray-200",children:V.length>0?V.map(v=>i.jsxs("div",{className:"p-6",children:[i.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:i.jsx(Nr,{className:"h-4 w-4 text-yellow-700"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,i.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category}),i.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",v.createdDate]})]})]})]}),c===v.id?i.jsx(Ld,{className:"h-5 w-5 text-gray-500"}):i.jsx(pi,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&i.jsx("div",{className:"mt-4 ml-11",children:i.jsx("p",{className:"text-gray-700 italic",children:v.answer})})]},v.id)):i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"p-6 border-b",children:i.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),i.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map(v=>i.jsxs("div",{className:"p-6",children:[i.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:i.jsx(Nr,{className:"h-4 w-4 text-blue-700"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,w&&!v.isApproved&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?i.jsx(Ld,{className:"h-5 w-5 text-gray-500"}):i.jsx(pi,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&i.jsxs("div",{className:"mt-4 ml-11",children:[i.jsx("p",{className:"text-gray-700",children:v.answer}),i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):i.jsx("div",{className:"p-6 text-center",children:i.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})};function j5(t=20){const[e,n]=A.useState([]),[r,s]=A.useState(!0);return A.useEffect(()=>{(async()=>{s(!0);try{const a=bo(Ue(ue,"adminActivityLog"),h1("date","desc"),mf(t)),c=await Nn(a);n(c.docs.map(u=>({id:u.id,...u.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function N5(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),o=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${o}`}const E5=()=>{const{currentUser:t}=pt(),{resources:e,guideSections:n,faqItems:r}=qi(),{recentActivity:s,loading:o}=j5();return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),i.jsxs(Y,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[i.jsx(Ep,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),i.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",i.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[i.jsxs(Y,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Vd,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),i.jsxs(Y,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(It,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),i.jsxs(Y,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[i.jsx(Qn,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),i.jsxs(Y,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[i.jsx(O4,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:i.jsx(It,{className:"h-6 w-6"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:i.jsx(Vd,{className:"h-6 w-6"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:i.jsx(Nr,{className:"h-6 w-6"})}),i.jsxs("div",{className:"ml-4",children:[i.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),i.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[i.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5&&i.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),i.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>a.isAnswered).length>0?r.filter(a=>a.isAnswered).map(a=>i.jsxs("li",{className:"flex items-center justify-between py-2",children:[i.jsxs("div",{className:"flex-grow pr-2",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),a.isApproved?i.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):i.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),i.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"})]}),i.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:i.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},a.id)):i.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[i.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&i.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(a=>!a.isAnswered).length})]}),Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5&&i.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),i.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>0?r.filter(a=>!a.isAnswered).map(a=>i.jsxs("li",{className:"flex items-center justify-between py-2",children:[i.jsxs("div",{className:"flex-grow pr-2",children:[i.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),i.jsxs("div",{className:"flex items-center mt-1",children:[i.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"}),a.userEmail&&i.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",a.userEmail]})]})]}),i.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:i.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},a.id)):i.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[i.jsxs(Y,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:i.jsx(Vd,{className:"h-5 w-5"})}),i.jsx("span",{children:"Gérer le contenu"})]}),i.jsxs(Y,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:i.jsx(It,{className:"h-5 w-5"})}),i.jsx("span",{children:"Gérer les ressources"})]}),i.jsxs(Y,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:i.jsx(Nr,{className:"h-5 w-5"})}),i.jsx("span",{children:"Modérer la FAQ"})]}),i.jsxs(Y,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:i.jsx(Qn,{className:"h-5 w-5"})}),i.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[i.jsxs(Y,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:i.jsx(fs,{className:"h-5 w-5"})}),i.jsx("span",{children:"Ajouter une section de guide"})]}),i.jsxs(Y,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:i.jsx(fs,{className:"h-5 w-5"})}),i.jsx("span",{children:"Ajouter une ressource"})]}),i.jsxs(Y,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[i.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:i.jsx(fs,{className:"h-5 w-5"})}),i.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[i.jsx("div",{className:"p-6 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),i.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:o?i.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?i.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):s.map(a=>{var c;return i.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:i.jsx(It,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-800",children:N5(a)}),i.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleString()}),typeof((c=a.details)==null?void 0:c.title)=="string"&&i.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",a.details.title]})]})]})},a.id)})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="post-cps").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="post-cps").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="post-cps").length:0})]})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="during-process").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="during-process").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="during-process").length:0})]})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="pre-arrival").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="pre-arrival").length:0})]})}),i.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),i.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Vn({type:t,target:e,targetId:n,user:r,details:s}){await Fn(Ue(ue,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const Sp=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmButtonText:o="Confirmer",cancelButtonText:a="Annuler",type:c="danger"})=>{if(!t)return null;const d=(()=>{switch(c){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),m=f=>{f.target===f.currentTarget&&c!=="danger"&&e()};return i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:m,children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[i.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[i.jsx(Pa,{className:`mr-2 h-5 w-5 ${d.icon}`}),i.jsx("h3",{className:"text-lg font-medium",children:r})]}),i.jsx("div",{className:"px-6 py-4",children:i.jsx("p",{className:"text-gray-700",children:s})}),i.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[i.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:a}),i.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{n(),e()},autoFocus:!0,children:o})]})]})})},T5=()=>{const[t]=Qb(),e=vn(),{currentUser:n}=pt(),{guideSections:r,addGuideSection:s,updateGuideSection:o,deleteGuideSection:a,resources:c,faqItems:u,addFAQItem:d,updateFAQItem:m,deleteFAQItem:f}=qi(),g=t.get("new")==="section",w=t.get("new")==="faq",S=g?null:t.get("edit")&&r.some(q=>q.id===t.get("edit"))?t.get("edit"):null,C=w?null:t.get("edit")&&u.some(q=>q.id===t.get("edit"))?t.get("edit"):null,[R,j]=A.useState(""),[_,E]=A.useState("post-cps"),[L,D]=A.useState(""),[V,N]=A.useState(1),[x,y]=A.useState([]),[v,k]=A.useState(""),[P,I]=A.useState(""),[le,pe]=A.useState(""),[Ge,G]=A.useState("post-cps"),[B,H]=A.useState(!0),[Z,he]=A.useState(!1),[ge,we]=A.useState(!1),[Nt,nn]=A.useState("section");A.useEffect(()=>{if(S){const q=r.find(ie=>ie.id===S);q&&(j(q.title),E(q.phase),D(q.content),N(q.order),y(Array.isArray(q.resources)?q.resources:[]))}else if(g){j(""),E("post-cps"),D("");const q=r.filter(ie=>ie.phase==="post-cps");N(q.length>0?Math.max(...q.map(ie=>ie.order))+1:1),y([])}if(C){const q=u.find(ie=>ie.id===C);q&&(k(q.question),I(q.answer),pe(q.category||""),G(q.phase),H(!!q.isApproved),he(!!q.isAnswered))}else w&&(k(""),I(""),pe(""),G("post-cps"),H(!0),he(!1))},[S,g,r,C,w,u]);const rn=()=>{I(""),he(!1)},sn=q=>{const ie=q.trim()!==""&&q!=="Cette question est en attente de réponse par notre équipe.";he(ie)},Ra=q=>{if(q.preventDefault(),w||C)if(C){const ie=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";he(ie),m(C,{question:v,answer:P,category:le,phase:Ge,isApproved:B,isAnswered:ie}),Vn({type:"Modification",target:"FAQ",targetId:C,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else{const ie=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";he(ie),d({question:v,answer:P,category:le,phase:Ge,isApproved:B,isAnswered:ie,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Vn({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:v}})}else S?(o(S,{title:R,phase:_,content:L,order:V,resources:x}),Vn({type:"Modification",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}})):(s({title:R,phase:_,content:L,order:V,resources:x}),Vn({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}}));e("/admin")},Da=q=>{nn(q),we(!0)},Ms=()=>{Nt==="section"&&S?(a(S),Vn({type:"Suppression",target:"Section",targetId:S,user:n==null?void 0:n.uid,details:{title:R}}),e("/admin/content")):Nt==="faq"&&C&&(f(C),Vn({type:"Suppression",target:"FAQ",targetId:C,user:n==null?void 0:n.uid,details:{question:v}}),e("/admin/content")),we(!1)},Vs=q=>{x.includes(q)?y(x.filter(ie=>ie!==q)):y([...x,q])},Qr=c.filter(q=>q.phase===_),Rt={"post-cps":r.filter(q=>q.phase==="post-cps").sort((q,ie)=>q.order-ie.order),"during-process":r.filter(q=>q.phase==="during-process").sort((q,ie)=>q.order-ie.order),"pre-arrival":r.filter(q=>q.phase==="pre-arrival").sort((q,ie)=>q.order-ie.order)};return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:g?"Ajouter une nouvelle section":w?"Ajouter une question FAQ":C?"Modifier la FAQ":S?"Modifier la section":"Édition"}),i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[i.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:w||C?i.jsx("form",{onSubmit:Ra,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),i.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:v,onChange:q=>k(q.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),C&&i.jsx("button",{type:"button",onClick:rn,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),i.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:q=>{I(q.target.value),sn(q.target.value)},required:!0}),i.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[i.jsx("div",{className:`w-3 h-3 rounded-full ${Z?"bg-green-500":"bg-yellow-500"} mr-2`}),i.jsx("span",{className:"text-gray-600",children:Z?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),i.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:le,onChange:q=>pe(q.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),i.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Ge,onChange:q=>G(q.target.value),required:!0,children:[i.jsx("option",{value:"post-cps",children:"Post-CPS"}),i.jsx("option",{value:"during-process",children:"Pendant les démarches"}),i.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:B,onChange:q=>H(q.target.checked)}),i.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{children:C&&i.jsxs("button",{type:"button",onClick:()=>Da("faq"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[i.jsx(Lc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[i.jsx(gf,{className:"mr-2 h-4 w-4"}),w?"Ajouter":"Enregistrer"]})]})]})]})}):i.jsx("form",{onSubmit:Ra,children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),i.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:R,onChange:q=>j(q.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),i.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:_,onChange:q=>{const ie=q.target.value;E(ie);const $t=r.filter(Gt=>Gt.phase===ie);N($t.length>0?Math.max(...$t.map(Gt=>Gt.order))+1:1),y([])},required:!0,children:[i.jsx("option",{value:"post-cps",children:"Post-CPS"}),i.jsx("option",{value:"during-process",children:"Pendant les démarches"}),i.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),i.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:V,onChange:q=>N(parseInt(q.target.value)),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),i.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:q=>D(q.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(Qr)&&Qr.length>0?i.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:Qr.map(q=>i.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[i.jsx("input",{type:"checkbox",id:`resource-${q.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:x.includes(q.id),onChange:()=>Vs(q.id)}),i.jsx("label",{htmlFor:`resource-${q.id}`,className:"ml-3 block text-sm text-gray-700",children:q.title})]},q.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{children:S&&i.jsxs("button",{type:"button",onClick:()=>Da("section"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[i.jsx(Lc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[i.jsx(gf,{className:"mr-2 h-4 w-4"}),g?"Ajouter":"Enregistrer"]})]})]})]})})})}),i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),i.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(fs,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Rt["post-cps"])&&Rt["post-cps"].length>0?i.jsx("ul",{className:"space-y-2",children:Rt["post-cps"].map(q=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),i.jsx("span",{className:"flex-grow",children:q.title}),i.jsx(Md,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Rt["during-process"])&&Rt["during-process"].length>0?i.jsx("ul",{className:"space-y-2",children:Rt["during-process"].map(q=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),i.jsx("span",{className:"flex-grow",children:q.title}),i.jsx(Md,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Rt["pre-arrival"])&&Rt["pre-arrival"].length>0?i.jsx("ul",{className:"space-y-2",children:Rt["pre-arrival"].map(q=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),i.jsx("span",{className:"flex-grow",children:q.title}),i.jsx(Md,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),i.jsxs("div",{className:"mt-8 border-t pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),i.jsxs("button",{onClick:()=>e("/admin/content?new=faq"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(fs,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const q={};return u.forEach(ie=>{const $t=ie.category||"Non catégorisé";q[$t]||(q[$t]=[]),q[$t].push(ie)}),Object.entries(q).map(([ie,$t])=>i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:ie}),$t.length>0?i.jsx("ul",{className:"space-y-2",children:$t.map(Gt=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/content?edit=${Gt.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${C===Gt.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("span",{className:"flex-grow",children:Gt.question}),!Gt.isAnswered&&i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),Gt.isApproved?i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuvée"}):i.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuvée"})]})},Gt.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},ie))})()]})]})]})})]})}),i.jsx(Sp,{isOpen:ge,onClose:()=>we(!1),onConfirm:Ms,title:`Confirmer la suppression de ${Nt==="section"?"la section":"la question FAQ"}`,message:Nt==="section"?`Êtes-vous sûr de vouloir supprimer la section "${R}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${v}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})};var S5="rpc",I5="upload",k5="download",Fd="app",qd="user",Ud="team",A5="noauth",C5="cookie",Mc="dropboxapi.com",by="dropbox.com",yf={api:"api",notify:"bolt",content:"api-content"},T={};T.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};T.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};T.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};T.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};T.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};T.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};T.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};T.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};T.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};T.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};T.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};T.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};T.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};T.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};T.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};T.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};T.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};T.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};T.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};T.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};T.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};T.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};T.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};T.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};T.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};T.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};T.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};T.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};T.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};T.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};T.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};T.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};T.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};T.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};T.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};T.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};T.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};T.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};T.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};T.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};T.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};T.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};T.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};T.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};T.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};T.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};T.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};T.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};T.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};T.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};T.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};T.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};T.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};T.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};T.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};T.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};T.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};T.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};T.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};T.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};T.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};T.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};T.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};T.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};T.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};T.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};T.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};T.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};T.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};T.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};T.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};T.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};T.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};T.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};T.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};T.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};T.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};T.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};T.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};T.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};T.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};T.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};T.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};T.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};T.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};T.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};T.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};T.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};T.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};T.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};T.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};T.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};T.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};T.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};T.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};T.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};T.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};T.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};T.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};T.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};T.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};T.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};T.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};T.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};T.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};T.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};T.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};T.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};T.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};T.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};T.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};T.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};T.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};T.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};T.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};T.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};T.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};T.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};T.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};T.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};T.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};T.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};T.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};T.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};T.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};T.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};T.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};T.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};T.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};T.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};T.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};T.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};T.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};T.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};T.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};T.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};T.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};T.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};T.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};T.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};T.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};T.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};T.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};T.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};T.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};T.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};T.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};T.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};T.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};T.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};T.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};T.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};T.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};T.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};T.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};T.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};T.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};T.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};T.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};T.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};T.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};T.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};T.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};T.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};T.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};T.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};T.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};T.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};T.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};T.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};T.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};T.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};T.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};T.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};T.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};T.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};T.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};T.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};T.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};T.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};T.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};T.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};T.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};T.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};T.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};T.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};T.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};T.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};T.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};T.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};T.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};T.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};T.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};T.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};T.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};T.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};T.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};T.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};T.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};T.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};T.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};T.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};T.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};T.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};T.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};T.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};T.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};T.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};T.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};T.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};T.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};T.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};T.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};T.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};T.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};T.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};T.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};T.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};T.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};T.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};T.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};T.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};T.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};T.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};T.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};T.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function P5(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var zd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Mc,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==Mc&&yf[e]!==void 0&&(e=yf[e],r="-"),"https://".concat(e).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},R5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:by;return e!==by&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},wy=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mc,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==Mc&&(r=yf[r],n="-"),"https://".concat(r).concat(n).concat(e,"/oauth2/token")};function _y(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,P5)}function D5(t){return new Date(Date.now()+t*1e3)}function jy(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof t2>"u"||typeof window<"u"}function Bd(){return typeof window<"u"}function $d(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function vl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function Bl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bl=function(n){return typeof n}:Bl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bl(t)}function L5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fa(t,e)}function V5(t){var e=Y1();return function(){var r=ma(t),s;if(e){var o=ma(this).constructor;s=Reflect.construct(r,arguments,o)}else s=r.apply(this,arguments);return O5(this,s)}}function O5(t,e){return e&&(Bl(e)==="object"||typeof e=="function")?e:F5(t)}function F5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vf(t){var e=typeof Map=="function"?new Map:void 0;return vf=function(r){if(r===null||!q5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return $l(r,arguments,ma(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),fa(s,r)},vf(t)}function $l(t,e,n){return Y1()?$l=Reflect.construct:$l=function(s,o,a){var c=[null];c.push.apply(c,o);var u=Function.bind.apply(s,c),d=new u;return a&&fa(d,a.prototype),d},$l.apply(null,arguments)}function Y1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function q5(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function fa(t,e){return fa=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},fa(t,e)}function ma(t){return ma=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ma(t)}var U5=function(t){M5(n,t);var e=V5(n);function n(r,s,o){var a;return L5(this,n),a=e.call(this,"Response failed with a ".concat(r," code")),a.name="DropboxResponseError",a.status=r,a.headers=s,a.error=o,a}return n}(vf(Error));function z5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var J1=function t(e,n,r){z5(this,t),this.status=e,this.headers=n,this.result=r};function X1(t){return t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}throw new U5(t.status,t.headers,n)})}function Vc(t){return t.ok?t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}return new J1(t.status,t.headers,n)}):X1(t)}function B5(t){return t.ok?new Promise(function(e){jy()?t.blob().then(function(n){return e(n)}):t.buffer().then(function(n){return e(n)})}).then(function(e){var n=JSON.parse(t.headers.get("dropbox-api-result"));return jy()?n.fileBlob=e:n.fileBinary=e,new J1(t.status,t.headers,n)}):X1(t)}function $5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H5(t,e,n){return e&&G5(t.prototype,e),t}var bl,Zr,Gd,W5=300*1e3,Ny=128,Q5=["legacy","offline","online"],K5=["code","token"],Y5=["none","user","team"],J5=function(){function t(e){$5(this,t),e=e||{},Bd()?(bl=window.fetch.bind(window),Zr=window.crypto||window.msCrypto):$d()?(bl=self.fetch.bind(self),Zr=self.crypto):(bl=require("node-fetch"),Zr=require("crypto")),typeof TextEncoder>"u"?Gd=require("util").TextEncoder:Gd=TextEncoder,this.fetch=e.fetch||bl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return H5(t,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new Gd,s=r.encode(this.codeVerifier),o;if(Bd()||$d())return Zr.subtle.digest("SHA-256",s).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));o=vl(u).substr(0,128),n.codeChallenge=o});var a=Zr.createHash("sha256").update(s).digest();return o=vl(a),this.codeChallenge=o,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(Bd()||$d()){var r=new Uint8Array(Ny),s=Zr.getRandomValues(r),o=btoa(s);n=vl(o).substr(0,128)}else{var a=Zr.randomBytes(Ny);n=vl(a).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var s=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,m=this.getClientId(),f=R5(this.domain);if(!m)throw new Error("A client id is required. You can set the client id using .setClientId().");if(o!=="code"&&!n)throw new Error("A redirect uri is required.");if(!K5.includes(o))throw new Error("Authorization type must be code or token");if(a&&!Q5.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!Y5.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var g;return o==="code"?g="".concat(f,"?response_type=code&client_id=").concat(m):g="".concat(f,"?response_type=token&client_id=").concat(m),n&&(g+="&redirect_uri=".concat(n)),r&&(g+="&state=".concat(r)),a&&(g+="&token_access_type=".concat(a)),c&&(g+="&scope=".concat(c.join(" "))),u!=="none"&&(g+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return g+="&code_challenge_method=S256",g+="&code_challenge=".concat(s.codeChallenge),g}):Promise.resolve(g)}},{key:"getAccessTokenFromCode",value:function(n,r){var s=this.getClientId(),o=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=wy(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(r),a+="&client_id=".concat(s),o)a+="&client_secret=".concat(o);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}n&&(a+="&redirect_uri=".concat(n));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return Vc(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+W5)>=this.getAccessTokenExpiresAt(),s=!this.getAccessToken();return(r||s)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this.getClientId(),o=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var a=wy(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:s,refresh_token:this.getRefreshToken()};o&&(u.client_secret=o),r&&(u.scope=r.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(s),o&&(a+="&client_secret=".concat(o)),r&&(a+="&scope=".concat(r.join(" ")));return this.fetch(a,c).then(function(d){return Vc(d)}).then(function(d){n.setAccessToken(d.result.access_token),n.setAccessTokenExpiresAt(D5(d.result.expires_in))})}}]),t}();function X5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Z5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e3(t,e,n){return e&&Z5(t.prototype,e),t}var t3=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,bf=function(){function t(e){X5(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new J5(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,T)}return e3(t,[{key:"request",value:function(n,r,s,o,a){switch(a){case S5:return this.rpcRequest(n,r,s,o);case k5:return this.downloadRequest(n,r,s,o);case I5:return this.uploadRequest(n,r,s,o);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(n,r,s,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(zd(o,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Vc(c)})}},{key:"downloadRequest",value:function(n,r,s,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":_y(r)}};return a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(zd(o,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return B5(c)})}},{key:"uploadRequest",value:function(n,r,s,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=r.contents;delete r.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":_y(r)}};return a.setAuthHeaders(s,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(zd(o,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Vc(c)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var s=n.replace(" ","").split(",");s.includes(qd)&&this.auth.getAccessToken()?n=qd:s.includes(Ud)&&this.auth.getAccessToken()?n=Ud:s.includes(Fd)&&(n=Fd)}switch(n){case Fd:if(this.auth.clientId&&this.auth.clientSecret){var o=t3("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(o)}break;case Ud:case qd:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case A5:case C5:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var s=Object.keys(this.customHeaders);s.forEach(function(o){n.headers[o]=r.customHeaders[o]})}}}]),t}();const n3="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function Z1({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:n=!1}){const[r,s]=A.useState(null),[o,a]=A.useState(!1),[c,u]=A.useState(null),d=f=>{f.target.files&&f.target.files.length>0&&s(f.target.files[0])},m=async()=>{if(!r)return;a(!0);const f=new bf({accessToken:n3});let g=!1,w="";try{const S=await f.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});g=!0,w=S.result.path_display||S.result.path_lower||"/"+r.name,console.log("Upload réussi!",S);try{const R=(await f.sharingCreateSharedLinkWithSettings({path:w})).result.url.replace("?dl=0","?raw=1");u(R),t&&t(R)}catch(C){console.error("Erreur lors de la création du lien partageable:",C),alert("Le fichier a été uploadé avec succès, mais la création du lien a échoué.")}}catch(S){console.error("Erreur lors de l'upload:",S),S instanceof Error?alert(`Erreur lors de l'upload : ${S.message}
Type: ${S.constructor.name}`):alert(`Erreur lors de l'upload : ${String(S)}`)}if(a(!1),g)return alert(`Fichier "${r.name}" uploadé avec succès sur Dropbox!`)};return i.jsxs("div",{className:n?"flex items-center":"space-y-3",children:[i.jsx("div",{className:n?"flex-grow mr-2":"mb-2",children:i.jsx("input",{type:"file",onChange:d,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),i.jsx("button",{onClick:m,disabled:!r||o,className:`${n?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:o?"Envoi...":e}),c&&!n&&i.jsx("div",{className:"mt-2 text-sm text-gray-600",children:i.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})})]})}const Ey="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function r3({onSelect:t,showTitle:e=!0}){const[n,r]=A.useState([]),[s,o]=A.useState(!0),[a,c]=A.useState(null),[u,d]=A.useState(""),[m,f]=A.useState([]),[g,w]=A.useState(""),S=A.useCallback(V=>{var x;const N=((x=V.split(".").pop())==null?void 0:x.toLowerCase())||"";return["pdf"].includes(N)?"pdf":["doc","docx"].includes(N)?"docx":["xls","xlsx"].includes(N)?"xlsx":["ppt","pptx"].includes(N)?"pptx":["txt"].includes(N)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(N)?"image":["mp4","webm","mkv","avi","mov"].includes(N)?"video":["mp3","wav","ogg"].includes(N)?"audio":["zip","rar","7z","tar","gz"].includes(N)?"zip":"link"},[]),C=V=>{if(V===0)return"0 Bytes";const N=1024,x=["Bytes","KB","MB","GB","TB"],y=Math.floor(Math.log(V)/Math.log(N));return parseFloat((V/Math.pow(N,y)).toFixed(2))+" "+x[y]},R=A.useCallback(async(V="")=>{o(!0),c(null);try{const x=await new bf({accessToken:Ey,fetch}).filesListFolder({path:V,include_deleted:!1}),y=[];for(const v of x.result.entries)if(v[".tag"]==="file"||v[".tag"]==="folder"){const k=v[".tag"]==="folder",P={id:v.id||v.path_lower||"",name:v.name,path:v.path_lower||"",fileType:k?"folder":S(v.name),size:k?0:v.size||0,isFolder:k};y.push(P)}y.sort((v,k)=>v.isFolder&&!k.isFolder?-1:!v.isFolder&&k.isFolder?1:v.name.localeCompare(k.name)),r(y),d(V)}catch(N){console.error("Erreur lors du chargement des fichiers Dropbox:",N),c("Impossible de charger les fichiers depuis Dropbox. Veuillez réessayer.")}finally{o(!1)}},[r,d,o,c,S]),j=async V=>{var N;if(V.url)return V.url;try{const x=new bf({accessToken:Ey,fetch});let y;try{y=await x.sharingCreateSharedLinkWithSettings({path:V.path})}catch(k){const P=k;if(P.status===409&&((N=P.error)!=null&&N.shared_link_already_exists))try{const I=await x.sharingListSharedLinks({path:V.path,direct_only:!0});if(I.result.links&&I.result.links.length>0)y={result:I.result.links[0]};else throw new Error("Aucun lien partagé trouvé")}catch(I){throw console.error("Erreur lors de la récupération des liens existants:",I),I}else throw P}const v=y.result.url.replace("?dl=0","?raw=1");return r(k=>k.map(P=>P.id===V.id?{...P,url:v}:P)),v}catch(x){return console.error("Erreur lors de la création du lien partageable:",x),c("Impossible de créer un lien pour ce fichier. Vérifiez les permissions dans Dropbox."),null}},_=V=>{f([...m,u]),R(V.path)},E=async V=>{if(V.isFolder){_(V);return}const N=await j(V);N&&t(N,V.name,V.fileType)},L=()=>{if(m.length>0){const V=m[m.length-1];f(m.slice(0,-1)),R(V)}},D=g?n.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())):n;return A.useEffect(()=>{R()},[R]),i.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&i.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[i.jsx("button",{onClick:L,disabled:m.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:g,onChange:V=>w(V.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("button",{onClick:()=>R(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),i.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),a&&i.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[i.jsx("p",{children:a}),i.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accès Dropbox est configuré correctement dans vos variables d'environnement."}),i.jsx("button",{onClick:()=>R(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Réessayer"})]}),s?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):D.length>0?i.jsx("div",{className:"max-h-80 overflow-y-auto",children:i.jsx("ul",{className:"space-y-1",children:D.map(V=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>E(V),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[i.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:V.isFolder?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):V.fileType==="pdf"?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):V.fileType==="image"?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.name}),!V.isFolder&&i.jsx("div",{className:"text-xs text-gray-500",children:C(V.size)})]})]})},V.id))})}):i.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouvé."})]})]})}const s3=()=>{const[t]=Qb(),e=vn(),{currentUser:n}=pt(),{resources:r,addResource:s,updateResource:o,deleteResource:a}=qi(),c=t.get("new")==="resource",u=t.get("edit"),[d,m]=A.useState(""),[f,g]=A.useState(""),[w,S]=A.useState("post-cps"),[C,R]=A.useState(""),[j,_]=A.useState(""),[E,L]=A.useState("pdf"),[D,V]=A.useState(!1),[N,x]=A.useState(!1),[y,v]=A.useState(""),k=[...new Set(r.map(G=>G.category))];A.useEffect(()=>{if(u){const G=r.find(B=>B.id===u);G&&(m(G.title),g(G.description),S(G.phase),R(G.category),_(G.fileUrl),L(G.fileType))}else c&&(m(""),g(""),S("post-cps"),R(""),_(""),L("pdf"))},[u,c,r]);const P=G=>{G.preventDefault(),u?(o(u,{title:d,description:f,phase:w,category:C,fileUrl:j,fileType:E}),Vn({type:"Modification",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:f,phase:w,category:C,fileUrl:j,fileType:E,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Vn({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},I=()=>{V(!0)},le=()=>{u&&(a(u),Vn({type:"Suppression",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},pe={"post-cps":r.filter(G=>G.phase==="post-cps"),"during-process":r.filter(G=>G.phase==="during-process"),"pre-arrival":r.filter(G=>G.phase==="pre-arrival")},Ge=G=>{switch(G){case"pdf":case"doc":return i.jsx(It,{className:"w-5 h-5"});case"image":return i.jsx(B4,{className:"w-5 h-5"});case"link":return i.jsx(t5,{className:"w-5 h-5"});default:return i.jsx($4,{className:"w-5 h-5"})}};return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[i.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:i.jsx("form",{onSubmit:P,className:"space-y-7",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),i.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:G=>m(G.target.value),required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),i.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:G=>g(G.target.value),required:!0})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),i.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:w,onChange:G=>S(G.target.value),required:!0,children:[i.jsx("option",{value:"post-cps",children:"Post-CPS"}),i.jsx("option",{value:"during-process",children:"Pendant les démarches"}),i.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),i.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:C,onChange:G=>R(G.target.value),required:!0}),i.jsx("datalist",{id:"categories",children:k.map((G,B)=>i.jsx("option",{value:G},B))})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),i.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:G=>L(G.target.value),required:!0,children:[i.jsxs("optgroup",{label:"Documents",children:[i.jsx("option",{value:"pdf",children:"PDF"}),i.jsx("option",{value:"doc",children:"Word (.doc)"}),i.jsx("option",{value:"docx",children:"Word (.docx)"}),i.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),i.jsxs("optgroup",{label:"Tableurs",children:[i.jsx("option",{value:"xls",children:"Excel (.xls)"}),i.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),i.jsxs("optgroup",{label:"Présentations",children:[i.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),i.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),i.jsxs("optgroup",{label:"Médias",children:[i.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),i.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),i.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),i.jsxs("optgroup",{label:"Autres",children:[i.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),i.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:E==="link"?"URL du lien":"URL du fichier"}),E!=="link"&&i.jsxs("div",{className:"mt-3 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50/30",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(u5,{className:"w-5 h-5 text-blue-600 mr-2"}),i.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),i.jsx(Z1,{onSuccess:G=>_(G),buttonText:"Uploader le fichier vers Dropbox"})]}),i.jsx("div",{className:"flex items-center",children:i.jsxs("div",{className:"w-full flex",children:[i.jsx("input",{type:"url",id:"fileUrl",className:"mt-2 block w-full rounded-l-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:j,onChange:G=>_(G.target.value),placeholder:E==="link"?"https://example.com":"https://dropbox.com/s/...",required:!0}),i.jsx("button",{type:"button",onClick:()=>x(!0),className:"mt-2 px-3 py-2 bg-blue-100 hover:bg-blue-200 border border-l-0 border-blue-200 rounded-r-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors",title:"Parcourir les fichiers existants",children:i.jsx(Q4,{className:"h-5 w-5 text-blue-600"})})]})}),y&&i.jsxs("p",{className:"mt-1 text-xs text-blue-600 font-medium",children:["Fichier sélectionné: ",y]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:E==="link"?"Entrez l'URL complète du site web externe.":"URL générée automatiquement après upload ou entrez manuellement une URL Dropbox/Google Drive."})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("div",{children:u&&i.jsxs("button",{type:"button",onClick:I,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[i.jsx(Lc,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),i.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[i.jsx(gf,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),i.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[i.jsx(fs,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(pe["post-cps"])&&pe["post-cps"].length>0?i.jsx("ul",{className:"space-y-2",children:pe["post-cps"].map(G=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${G.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===G.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Ge(G.fileType)}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("span",{className:"block text-sm font-medium",children:G.title}),i.jsx("span",{className:"block text-xs text-gray-500",children:G.category})]})]})},G.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(pe["during-process"])&&pe["during-process"].length>0?i.jsx("ul",{className:"space-y-2",children:pe["during-process"].map(G=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${G.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===G.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Ge(G.fileType)}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("span",{className:"block text-sm font-medium",children:G.title}),i.jsx("span",{className:"block text-xs text-gray-500",children:G.category})]})]})},G.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(pe["pre-arrival"])&&pe["pre-arrival"].length>0?i.jsx("ul",{className:"space-y-2",children:pe["pre-arrival"].map(G=>i.jsx("li",{children:i.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${G.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===G.id?"bg-blue-50 border border-blue-200":""}`,children:[i.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Ge(G.fileType)}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("span",{className:"block text-sm font-medium",children:G.title}),i.jsx("span",{className:"block text-xs text-gray-500",children:G.category})]})]})},G.id))}):i.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),i.jsx(Sp,{isOpen:D,onClose:()=>V(!1),onConfirm:le,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${d}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),N&&i.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:i.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sélectionner un fichier Dropbox"}),i.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-grow overflow-y-auto",children:i.jsx(r3,{onSelect:(G,B,H)=>{_(G),v(B),L(H==="pdf"?"pdf":H==="docx"?"docx":H==="xlsx"?"xlsx":H==="pptx"?"pptx":H==="txt"?"txt":H==="image"?"image":H==="video"?"video":H==="audio"?"audio":H==="zip"?"zip":"link"),x(!1)},showTitle:!1})}),i.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:i.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},e2=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[o,a]=A.useState(""),c=u=>{u.preventDefault(),n(o)};return Fc.useEffect(()=>{t||a("")},[t]),t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[i.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),i.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),i.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[i.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:o,onChange:u=>a(u.target.value),disabled:r,autoFocus:!0}),s&&i.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||o==="",children:"Valider"})]})]})}):null},i3=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[s,o]=A.useState(null),[a,c]=A.useState(null),[u,d]=A.useState([]),[m,f]=A.useState(!0),[g,w]=A.useState(null),{currentUser:S}=pt(),C=vn(),R=async()=>{f(!0),w(null);try{const E=await Nn(Ue(ue,"users")),L=[];E.forEach(D=>{L.push(D.data())}),d(L)}catch{w("Erreur lors du chargement des utilisateurs.")}finally{f(!1)}};A.useEffect(()=>{R()},[]);const j=async(E,L)=>{e(!0),c({uid:E,isAdmin:L}),o(null)},_=async E=>{if(!a)return;if(r(!0),o(null),E!=="ngiryallahrek"){o("Mot de passe incorrect."),r(!1);return}const L=u.find(D=>D.uid===a.uid);if(L!=null&&L.isSuperAdmin&&L.uid!==(S==null?void 0:S.uid)){o("Impossible de modifier le rôle d'un admin principal."),r(!1);return}try{await mi(vt(ue,"users",a.uid),{isAdmin:!a.isAdmin}),d(D=>D.map(V=>V.uid===a.uid?{...V,isAdmin:!a.isAdmin}:V)),e(!1),c(null)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{r(!1)}};return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[i.jsxs("button",{onClick:()=>C("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[i.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),i.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:m?i.jsx("div",{children:"Chargement..."}):g?i.jsx("div",{className:"text-red-600",children:g}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-100",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2",children:"Nom"}),i.jsx("th",{className:"px-4 py-2",children:"Email"}),i.jsx("th",{className:"px-4 py-2",children:"Admin"}),i.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(E=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>C(`/admin/users/${E.uid}`),children:[E.photoURL?i.jsx("img",{src:E.photoURL,alt:E.displayName||E.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):i.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:i.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),E.displayName||E.email,E.isSuperAdmin&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),E.uid===(S==null?void 0:S.uid)&&i.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),i.jsx("td",{className:"px-4 py-2",children:E.email}),i.jsxs("td",{className:"px-4 py-2",children:[E.isAdmin?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(Qt,{className:"w-4 h-4 mr-1"})," Admin"]}):i.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),E.isSuperAdmin&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),i.jsxs("td",{className:"px-4 py-2",children:[E.uid!==(S==null?void 0:S.uid)&&!E.isSuperAdmin&&i.jsx("button",{onClick:()=>j(E.uid,E.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${E.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:E.isAdmin?i.jsxs(i.Fragment,{children:[i.jsx(Q1,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):i.jsxs(i.Fragment,{children:[i.jsx(K1,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),E.uid!==(S==null?void 0:S.uid)&&E.isSuperAdmin&&i.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},E.uid))})]})})}),i.jsx(e2,{open:t,onClose:()=>{e(!1),c(null),o(null)},onSubmit:_,loading:n,error:s})]})},o3=()=>{const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[s,o]=A.useState(null),[a,c]=A.useState(!1),{uid:u}=DE(),d=vn(),{currentUser:m}=pt(),[f,g]=A.useState(null),[w,S]=A.useState(!0),[C,R]=A.useState(null),[j,_]=A.useState(!1);A.useEffect(()=>{u&&(async()=>{S(!0),R(null);try{const v=vt(ue,"users",u),k=await xp(v);k.exists()?g(k.data()):R("Utilisateur introuvable.")}catch{R("Erreur lors du chargement du profil utilisateur.")}finally{S(!1)}})()},[u]);const E=async()=>{e(!0),o(null)},L=async y=>{if(f){if(r(!0),o(null),y!=="ngiryallahrek"){o("Mot de passe incorrect."),r(!1);return}_(!0);try{await mi(vt(ue,"users",f.uid),{isAdmin:!f.isAdmin}),g({...f,isAdmin:!f.isAdmin}),e(!1)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{_(!1),r(!1)}}},D=()=>{if(f){if(f.uid===(m==null?void 0:m.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}c(!0)}},V=async()=>{if(f){_(!0);try{await zl(vt(ue,"users",f.uid)),d("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{_(!1)}}},N=y=>{f&&g({...f,[y.target.name]:y.target.value})},x=async()=>{if(f){_(!0);try{await mi(vt(ue,"users",f.uid),{displayName:f.displayName,photoURL:f.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{_(!1)}}};return w?i.jsx("div",{className:"p-8",children:"Chargement..."}):C?i.jsx("div",{className:"p-8 text-red-600",children:C}):f?i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[i.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[i.jsx(Ut,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),i.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[i.jsx("div",{className:"relative mb-6",children:f.photoURL?i.jsx("img",{src:f.photoURL,alt:f.displayName||f.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):i.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:i.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),i.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(f==null?void 0:f.displayName)||"",onChange:N,disabled:j||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid)}),(f==null?void 0:f.isSuperAdmin)&&i.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),i.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(f==null?void 0:f.photoURL)||"",onChange:N,disabled:j}),i.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[i.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",f.email]}),i.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[i.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",f.emailVerified?"Oui":"Non"]}),i.jsxs("div",{className:"mb-6 w-full text-center",children:[i.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",f.isAdmin?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[i.jsx(Qt,{className:"w-5 h-5 mr-1"})," Admin"]}):i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[f.uid!==(m==null?void 0:m.uid)&&i.jsx("button",{onClick:E,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${f.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:j||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),children:f.isAdmin?i.jsxs(i.Fragment,{children:[i.jsx(Q1,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):i.jsxs(i.Fragment,{children:[i.jsx(K1,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),f.uid!==(m==null?void 0:m.uid)&&i.jsxs("button",{onClick:D,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:j||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),children:[i.jsx(Lc,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),i.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:x,disabled:j||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),title:f!=null&&f.isSuperAdmin&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),i.jsx(e2,{open:t,onClose:()=>{e(!1),o(null)},onSubmit:L,loading:n,error:s}),i.jsx(Sp,{isOpen:a,onClose:()=>c(!1),onConfirm:V,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(f==null?void 0:f.displayName)||(f==null?void 0:f.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},a3=()=>{const[t,e]=A.useState([]),[n,r]=A.useState(!0),[s,o]=A.useState(""),[a,c]=A.useState("all"),[u,d]=A.useState("all"),[m,f]=A.useState("all"),[g,w]=A.useState(!1),[S,C]=A.useState(null),[R,j]=A.useState(!0),_=20,E=x=>{const y=new Date(x);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(y)},L=()=>{const x=new Date;let y=null;switch(m){case"today":y=new Date(x.setHours(0,0,0,0));break;case"week":y=new Date,y.setDate(x.getDate()-7);break;case"month":y=new Date,y.setMonth(x.getMonth()-1);break;default:y=null}return y},D=async(x=!0)=>{try{x?(r(!0),C(null)):w(!0);let y=bo(Ue(ue,"adminActivityLog"),h1("date","desc"));const v=L();v&&(y=bo(y,rR("date",">=",v.toISOString()))),y=bo(y,mf(_));const k=await Nn(y);j(k.docs.length===_),k.docs.length>0?C(k.docs[k.docs.length-1]):(C(null),j(!1));let I=k.docs.map(le=>({id:le.id,...le.data()}));if(a!=="all"&&(I=I.filter(le=>le.type===a)),u!=="all"&&(I=I.filter(le=>le.target===u)),s){const le=s.toLowerCase();I=I.filter(pe=>{var Ge;return((Ge=pe.user)==null?void 0:Ge.toLowerCase().includes(le))||pe.target.toLowerCase().includes(le)||pe.type.toLowerCase().includes(le)||pe.details&&JSON.stringify(pe.details).toLowerCase().includes(le)})}e(x?I:le=>[...le,...I])}catch(y){console.error("Error fetching activities:",y)}finally{r(!1),w(!1)}};A.useEffect(()=>{D()},[]),A.useEffect(()=>{D()},[a,u,m]);const V=x=>{let y="bg-blue-100 text-blue-800";switch(x.toLowerCase()){case"ajout":y="bg-green-100 text-green-800";break;case"suppression":y="bg-red-100 text-red-800";break;case"modification":y="bg-yellow-100 text-yellow-800";break}return i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y}`,children:x})},N=x=>{let y="bg-gray-100 text-gray-800";switch(x.toLowerCase()){case"ressource":y="bg-purple-100 text-purple-800";break;case"section":y="bg-indigo-100 text-indigo-800";break;case"faq":y="bg-blue-100 text-blue-800";break;case"utilisateur":y="bg-pink-100 text-pink-800";break}return i.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y}`,children:x})};return i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Y,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:i.jsx(Ut,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),i.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:i.jsx(Dc,{className:"h-5 w-5 text-gray-400"})}),i.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:s,onChange:x=>o(x.target.value)})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"relative flex-1",children:i.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:x=>c(x.target.value),children:[i.jsx("option",{value:"all",children:"Toutes les actions"}),i.jsx("option",{value:"Ajout",children:"Ajout"}),i.jsx("option",{value:"Modification",children:"Modification"}),i.jsx("option",{value:"Suppression",children:"Suppression"})]})}),i.jsx("div",{className:"relative flex-1",children:i.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:x=>d(x.target.value),children:[i.jsx("option",{value:"all",children:"Toutes les cibles"}),i.jsx("option",{value:"Ressource",children:"Ressources"}),i.jsx("option",{value:"Section",children:"Sections"}),i.jsx("option",{value:"FAQ",children:"FAQ"}),i.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("div",{className:"relative flex-1",children:i.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:x=>f(x.target.value),children:[i.jsx("option",{value:"all",children:"Toute période"}),i.jsx("option",{value:"today",children:"Aujourd'hui"}),i.jsx("option",{value:"week",children:"7 derniers jours"}),i.jsx("option",{value:"month",children:"30 derniers jours"})]})}),i.jsx("button",{onClick:()=>D(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:i.jsx(a5,{className:"h-5 w-5"})})]})]})}),i.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),n?i.jsx("div",{className:"p-8 flex justify-center",children:i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):i.jsx("div",{className:"divide-y divide-gray-200",children:t.map(x=>i.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[i.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[V(x.type),i.jsx("span",{className:"mx-2",children:"•"}),N(x.target)]}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(z1,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:E(x.date)})]})]}),i.jsx("div",{className:"flex items-start",children:x.user&&i.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[i.jsx(xf,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:x.user})]})}),x.details&&i.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[i.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),i.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(x.details).map(([y,v])=>i.jsxs("div",{className:"flex",children:[i.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[y,":"]}),i.jsx("dd",{className:"text-gray-900",children:typeof v=="object"?JSON.stringify(v):String(v)})]},y))})]}),x.targetId&&i.jsxs("div",{className:"mt-1 text-sm",children:[i.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",x.targetId]})]},x.id))}),R&&!n&&i.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:i.jsx("button",{onClick:()=>D(!1),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g?i.jsxs("span",{className:"flex items-center",children:[i.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},l3=()=>{const t=vn(),{currentUser:e}=pt();return i.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:i.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[i.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[i.jsx(Ut,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),i.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&i.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:i.jsxs("p",{className:"text-blue-800",children:[i.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),i.jsx("li",{children:i.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),i.jsx("li",{children:i.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),i.jsx("li",{children:i.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),i.jsx("li",{children:i.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"5. Gestion des utilisateurs"})}),i.jsx("li",{children:i.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"6. Journal d'activité"})}),i.jsx("li",{children:i.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"7. Conseils et bonnes pratiques"})})]})]}),i.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(o5,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),i.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),i.jsx("li",{children:"Nombre de sections du guide"}),i.jsx("li",{children:"Nombre de questions FAQ"}),i.jsx("li",{children:"Nombre de ressources disponibles"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),i.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),i.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Np,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),i.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),i.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),i.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),i.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),i.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),i.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),i.jsx("li",{children:"Modifiez les informations dans le formulaire"}),i.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),i.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),i.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),i.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),i.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),i.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Ep,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"La gestion des FAQ vous permet de répondre aux questions fréquemment posées par les utilisateurs. Les questions peuvent être soumises par les utilisateurs ou créées directement par les administrateurs."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Création et édition de questions/réponses"}),i.jsx("li",{children:"Approbation des questions soumises par les utilisateurs"}),i.jsx("li",{children:"Catégorisation des questions par thème"}),i.jsx("li",{children:"Organisation des FAQ par phase du processus d'immigration"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Traitement des questions utilisateurs:"}),i.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:'Les questions soumises apparaissent dans la liste avec un statut "En attente de réponse"'}),i.jsx("li",{children:"Pour répondre, sélectionnez la question dans la liste"}),i.jsx("li",{children:"Rédigez votre réponse dans le champ prévu"}),i.jsx("li",{children:"Assignez une catégorie appropriée"}),i.jsx("li",{children:'Cochez "Approuvé" si la question doit être visible publiquement'}),i.jsx("li",{children:'Cliquez sur "Enregistrer" pour publier votre réponse'})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création manuelle de FAQ:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:'Vous pouvez également créer des questions manuellement en cliquant sur "Ajouter une FAQ" et en remplissant tous les champs du formulaire. Cela est utile pour anticiper les questions courantes que les utilisateurs pourraient avoir.'}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsx("li",{children:"Répondez de manière claire et concise"}),i.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),i.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),i.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),i.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),i.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(It,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire de ressources vous permet d'ajouter des documents, liens et autres contenus utiles que les utilisateurs pourront consulter. Ces ressources peuvent être associées à des sections spécifiques du guide."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types de ressources supportés:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Documents (PDF, Word, Excel, PowerPoint)"}),i.jsx("li",{children:"Images"}),i.jsx("li",{children:"Liens vers des sites web externes"}),i.jsx("li",{children:"Fichiers audio et vidéo"}),i.jsx("li",{children:"Archives ZIP"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Ajout d'une ressource:"}),i.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:'Cliquez sur "Ajouter une ressource"'}),i.jsx("li",{children:"Remplissez les champs du formulaire (titre, description, catégorie, phase)"}),i.jsx("li",{children:"Sélectionnez le type de ressource"}),i.jsx("li",{children:"Téléchargez le fichier via Dropbox ou indiquez l'URL pour un lien"}),i.jsx("li",{children:'Cliquez sur "Enregistrer" pour ajouter la ressource'})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation des ressources:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Les ressources sont organisées par phase du processus d'immigration (Post-CPS, Pendant les démarches, Pré-arrivée) et par catégorie. Cela facilite leur découverte par les utilisateurs."}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Important:"})," Assurez-vous que tous les fichiers téléchargés sont exempts de virus et respectent les droits d'auteur. Privilégiez les documents officiels ou les ressources libres de droits."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Conseils pour la gestion des ressources:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsx("li",{children:"Utilisez des titres descriptifs pour faciliter la recherche"}),i.jsx("li",{children:"Incluez la date de publication/mise à jour dans la description"}),i.jsx("li",{children:"Vérifiez régulièrement que les liens externes fonctionnent toujours"}),i.jsx("li",{children:"Mettez à jour ou supprimez les ressources obsolètes"}),i.jsx("li",{children:"Utilisez des catégories cohérentes pour faciliter la navigation"})]})]})]}),i.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestion des utilisateurs"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),i.jsx("li",{children:"Consultation des profils utilisateurs"}),i.jsx("li",{children:"Attribution/retrait des droits d'administration"}),i.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),i.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),i.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),i.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),i.jsx("li",{children:"Confirmez l'action"})]}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),i.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),i.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),i.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),i.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),i.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(R4,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Journal d'activité"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Connexions et inscriptions"}),i.jsx("li",{children:"Création, modification et suppression de contenu"}),i.jsx("li",{children:"Ajout et modification de ressources"}),i.jsx("li",{children:"Gestion des FAQ"}),i.jsx("li",{children:"Modifications des droits utilisateurs"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Type d'activité"}),i.jsx("li",{children:"Utilisateur (email)"}),i.jsx("li",{children:"Période (date de début et date de fin)"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Suivre les modifications apportées au contenu"}),i.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),i.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),i.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),i.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),i.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),i.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),i.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx(W1,{className:"w-6 h-6 text-blue-700 mr-2"}),i.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),i.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[i.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),i.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),i.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),i.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),i.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),i.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),i.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),i.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),i.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[i.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),i.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),i.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),i.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),i.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),i.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:i.jsxs("p",{className:"text-gray-800 italic text-sm",children:[i.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),i.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[i.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),i.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),i.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),i.jsx("div",{className:"mt-6 text-center",children:i.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},c3=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(null),[s,o]=A.useState(!0),[a,c]=A.useState(""),[u,d]=A.useState("test1234"),m=async()=>{try{(await Nn(Ue(ue,"test"))).empty?(await Fn(Ue(ue,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(g){const w=g;console.error("Erreur Firestore:",w),e(`Erreur Firestore: ${w.message}`)}},f=async()=>{try{const g=await Pw(ut,a,u);r(g.user),await Jh(ut,a,u),e(w=>w+`
Authentification réussie!`)}catch(g){const w=g;if(w.code==="auth/email-already-in-use"){const S=await Jh(ut,a,u);r(S.user),e(C=>C+`
Connexion réussie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",g),e(S=>S+`
Erreur d'authentification: ${w.message}`)}};return A.useEffect(()=>{const g=ut.onAuthStateChanged(w=>{r(w),w&&c(w.email||""),o(!1)});return()=>g()},[]),s?i.jsx("div",{className:"p-4",children:"Chargement..."}):i.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[i.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),i.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),i.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connecté"]}),i.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),i.jsx("button",{onClick:m,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),i.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Fn(Ue(ue,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Fn(Ue(ue,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Fn(Ue(ue,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Fn(Ue(ue,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(g){e("Erreur lors de l'initialisation : "+g.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-2",children:"Email:"}),i.jsx("input",{type:"email",value:a,onChange:g=>c(g.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),i.jsx("input",{type:"password",value:u,onChange:g=>d(g.target.value),className:"border p-2 w-full max-w-md"})]}),i.jsx("button",{onClick:f,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:n?"Se connecter":"Créer un compte"})]}),i.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),i.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Upload Dropbox"}),i.jsx(Z1,{})]})]})},u3=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:i.jsxs("div",{className:"text-center max-w-md",children:[i.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:i.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),i.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),i.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),i.jsxs(Y,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[i.jsx(J4,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),d3=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:o})=>{const[a,c]=A.useState(""),u=d=>{d.preventDefault(),n(a)};return Fc.useEffect(()=>{t||c("")},[t]),t?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[i.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),i.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:o||"Confirmez avec votre mot de passe"}),i.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[i.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:r,autoFocus:!0}),s&&i.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||a==="",children:"Valider"})]})]})}):null},h3=()=>{var G,B;const[t,e]=A.useState(!1),[n,r]=A.useState(!1),[s,o]=A.useState(null),[a,c]=A.useState(null),[u,d]=A.useState(null),[m,f]=A.useState(""),{currentUser:g}=pt(),[w,S]=A.useState((g==null?void 0:g.displayName)||""),[C,R]=A.useState((g==null?void 0:g.photoURL)||""),[j]=A.useState((g==null?void 0:g.email)||""),[_,E]=A.useState(""),[L,D]=A.useState(!1),[V,N]=A.useState(null),[x,y]=A.useState(null),[v,k]=A.useState(null);if(!g)return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:i.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:i.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const P=ut.currentUser,I=P==null?void 0:P.providerData.some(H=>H.providerId==="password"),le=async H=>{if(H.preventDefault(),N(null),y(null),!I){k("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:w,photoURL:C}),c("profile"),e(!0)},pe=async H=>{if(H.preventDefault(),N(null),y(null),!I){k("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}f(_),c("password"),e(!0)},Ge=async H=>{const Z=ut.currentUser;if(!Z)return;r(!0),o(null);const he=Ps.credential(Z.email||"",H);try{await MI(Z,he),a==="profile"&&u?(await Rw(Z,{displayName:u.displayName,photoURL:u.photoURL}),S(u.displayName),R(u.photoURL),y("Profil mis à jour !")):a==="password"&&m&&(await OI(Z,m),E(""),y("Mot de passe mis à jour !")),e(!1),c(null),d(null),f("")}catch{o("Mot de passe incorrect.")}finally{r(!1),D(!1)}};return i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[i.jsxs("div",{className:"relative mb-5",children:[C?i.jsx("img",{src:C,alt:w||j,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):i.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((G=w==null?void 0:w.charAt(0))==null?void 0:G.toUpperCase())||((B=j==null?void 0:j.charAt(0))==null?void 0:B.toUpperCase())}),(g==null?void 0:g.emailVerified)&&i.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(g==null?void 0:g.isAdmin)&&i.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[i.jsx(Qt,{className:"w-4 h-4"})," Admin"]})]}),i.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:w||j}),i.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:j}),i.jsxs("form",{onSubmit:le,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),i.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:H=>S(H.target.value),placeholder:"Nom affiché",disabled:L})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),i.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:C,onChange:H=>R(H.target.value),placeholder:"URL de la photo",disabled:L})]})]}),i.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:L,children:"Sauvegarder le profil"})]}),i.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),I?i.jsxs(i.Fragment,{children:[i.jsxs("form",{onSubmit:pe,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[i.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),i.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:_,onChange:H=>E(H.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:L}),i.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:L||_.length<6,children:"Mettre à jour le mot de passe"})]}),i.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),y(null);try{await Yh(ut,j),y("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):i.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[i.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),i.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),y(null);try{await Yh(ut,j),y("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(V||x)&&i.jsx("div",{className:`mt-6 text-center text-sm font-medium ${V?"text-red-600":"text-green-600"}`,children:V||x}),v&&i.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:v}),i.jsx(d3,{open:t,onClose:()=>{e(!1),o(null),c(null)},onSubmit:Ge,loading:n,error:s,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},f3=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,o]=A.useState(""),[a,c]=A.useState(!1),u=vn(),d=async m=>{m.preventDefault(),o(""),r(""),c(!0);try{await Yh(ut,t),r("Un email de réinitialisation a été envoyé.")}catch{o("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[i.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:i.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),i.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),i.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&i.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&i.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),i.jsxs("form",{className:"space-y-6",onSubmit:d,children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:m=>e(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})},m3=()=>i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(Np,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Conditions Générales d'Utilisation"}),i.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Ce document définit les règles d'utilisation de notre plateforme. Nous vous invitons à le lire attentivement."}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),i.jsx("p",{children:`Les présentes Conditions Générales d'Utilisation (ci-après dénommées "CGU") encadrent l'utilisation de la plateforme ESIG-prep-guide (ci-après dénommée "la Plateforme") mise à disposition par [Votre Nom/Organisation], à destination des étudiants et futurs étudiants de l'ESIGELEC.`}),i.jsx("p",{children:"En utilisant la Plateforme, vous acceptez sans réserve les présentes CGU. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser la Plateforme."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Description du service"})]}),i.jsx("p",{children:"La Plateforme ESIG-prep-guide est un outil d'aide et d'accompagnement destiné aux étudiants et futurs étudiants de l'ESIGELEC. Elle fournit des informations, des ressources et des guides pour faciliter les démarches liées aux études à l'ESIGELEC."}),i.jsx("p",{children:"La Plateforme propose notamment :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Des guides d'information pour les différentes phases du parcours étudiant (post-admission, pendant les démarches, pré-arrivée)"}),i.jsx("li",{children:"Une bibliothèque de ressources documentaires"}),i.jsx("li",{children:"Une section FAQ permettant aux utilisateurs de poser des questions et de consulter les réponses"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Od,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Accès au service"})]}),i.jsx("p",{children:"La Plateforme est accessible gratuitement à tout utilisateur disposant d'un accès à Internet. Tous les frais liés à l'accès à la Plateforme (matériel informatique, logiciels, connexion Internet, etc.) sont à la charge de l'utilisateur."}),i.jsx("p",{children:"Certaines fonctionnalités de la Plateforme nécessitent une inscription préalable. L'utilisateur s'engage à fournir des informations exactes et à jour lors de son inscription."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Propriété intellectuelle"})]}),i.jsx("p",{children:"L'ensemble des éléments constituant la Plateforme (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive de [Votre Nom/Organisation] ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments de la Plateforme, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),i.jsx("p",{children:"Les marques et logos présents sur la Plateforme sont la propriété de leurs détenteurs respectifs. Toute reproduction sans autorisation préalable est interdite."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Pa,{className:"w-6 h-6 text-yellow-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Responsabilités"})]}),i.jsx("p",{children:"Les informations fournies sur la Plateforme le sont à titre informatif. [Votre Nom/Organisation] s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur la Plateforme."}),i.jsx("p",{children:"[Votre Nom/Organisation] ne saurait être tenu responsable :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Des éventuelles interruptions de la Plateforme pour des raisons de maintenance ou autres"}),i.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),i.jsx("li",{children:"Des conséquences de l'utilisation de la Plateforme"}),i.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur la Plateforme"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Od,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Obligations de l'utilisateur"})]}),i.jsx("p",{children:"En utilisant la Plateforme, l'utilisateur s'engage à :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Ne pas utiliser la Plateforme à des fins illégales ou interdites par les présentes CGU"}),i.jsx("li",{children:"Ne pas tenter de perturber le bon fonctionnement de la Plateforme"}),i.jsx("li",{children:"Ne pas diffuser de contenu illégal, préjudiciable, menaçant, injurieux, harcelant, diffamatoire, vulgaire, obscène, contraire aux bonnes mœurs, portant atteinte à la vie privée d'une personne ou contrevenant aux lois en vigueur"}),i.jsx("li",{children:"Ne pas collecter ou stocker des données personnelles concernant d'autres utilisateurs"}),i.jsx("li",{children:"Ne pas usurper l'identité d'une autre personne ou entité"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Modification des CGU"})]}),i.jsx("p",{children:"[Votre Nom/Organisation] se réserve le droit de modifier les présentes CGU à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié. L'utilisation continue de la Plateforme après modification des CGU vaut acceptation des nouvelles conditions."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Droit applicable et juridiction compétente"})]}),i.jsx("p",{children:"Les présentes CGU sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Od,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),i.jsx("p",{children:"Pour toute question relative aux présentes CGU, vous pouvez contacter [Votre Nom/Organisation] à l'adresse suivante : [Votre adresse email]."}),i.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[i.jsx(Qt,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document légal important"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ces conditions générales d'utilisation constituent un contrat juridiquement contraignant entre vous et notre service. En utilisant notre plateforme, vous acceptez ces conditions."})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),p3=()=>i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(rs,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Politique de Confidentialité"}),i.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Nous accordons une grande importance à la protection de vos données personnelles. Ce document détaille comment nous les collectons et les utilisons."}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[i.jsx(rs,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),i.jsx("p",{children:'La présente Politique de Confidentialité décrit comment la plateforme ESIG-prep-guide (ci-après "la Plateforme") collecte, utilise et protège vos données personnelles lorsque vous utilisez notre service.'}),i.jsx("p",{children:"Nous respectons votre vie privée et nous nous engageons à protéger vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD) et aux autres lois applicables en matière de protection des données."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Responsable du traitement"})]}),i.jsx("p",{children:"Le responsable du traitement de vos données personnelles est [Votre Nom/Organisation], joignable à l'adresse email suivante : [Votre adresse email]."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(B1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Quelles données collectons-nous ?"})]}),i.jsx("p",{children:"Nous pouvons collecter les types de données personnelles suivants :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Données d'identification"})," : nom, prénom, adresse email, identifiant utilisateur"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Données de connexion"})," : adresse IP, type de navigateur, système d'exploitation, date et heure de connexion"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Données d'utilisation"})," : interactions avec la Plateforme, questions posées, ressources consultées"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Données de profil"})," : préférences, centres d'intérêt en lien avec votre utilisation de la Plateforme"]})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(It,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Comment collectons-nous vos données ?"})]}),i.jsx("p",{children:"Nous collectons vos données de différentes manières :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Directement auprès de vous"})," : lorsque vous créez un compte, complétez un formulaire, posez une question, ou interagissez avec notre Plateforme"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Automatiquement"})," : à travers des cookies et technologies similaires lorsque vous naviguez sur notre Plateforme"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Auprès de tiers"})," : lorsque vous vous connectez via des services tiers comme Google"]})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(It,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Pourquoi utilisons-nous vos données ?"})]}),i.jsx("p",{children:"Nous utilisons vos données personnelles pour les finalités suivantes :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Vous permettre de créer et de gérer votre compte utilisateur"}),i.jsx("li",{children:"Vous fournir les services et fonctionnalités de la Plateforme"}),i.jsx("li",{children:"Répondre à vos questions et demandes"}),i.jsx("li",{children:"Personnaliser votre expérience sur la Plateforme"}),i.jsx("li",{children:"Améliorer et développer notre Plateforme"}),i.jsx("li",{children:"Assurer la sécurité de la Plateforme et prévenir les fraudes"}),i.jsx("li",{children:"Respecter nos obligations légales"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Base légale du traitement"})]}),i.jsx("p",{children:"Nous traitons vos données personnelles sur les bases légales suivantes :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Exécution du contrat"})," : le traitement est nécessaire à l'exécution du contrat auquel vous êtes partie (les Conditions Générales d'Utilisation)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Consentement"})," : vous avez donné votre consentement au traitement de vos données à caractère personnel pour une ou plusieurs finalités spécifiques"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Intérêts légitimes"})," : le traitement est nécessaire aux fins des intérêts légitimes poursuivis par nous ou par un tiers"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Obligation légale"})," : le traitement est nécessaire au respect d'une obligation légale à laquelle nous sommes soumis"]})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(It,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Durée de conservation"})]}),i.jsx("p",{children:"Nous conservons vos données personnelles uniquement pendant la durée nécessaire à la réalisation des finalités pour lesquelles elles ont été collectées, y compris pour satisfaire aux exigences légales, comptables ou de déclaration."}),i.jsx("p",{children:"Vos données de compte utilisateur sont conservées tant que votre compte est actif. En cas de suppression de votre compte, vos données personnelles sont supprimées ou anonymisées dans un délai raisonnable."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Partage de vos données"})]}),i.jsx("p",{children:"Nous pouvons partager vos données personnelles avec :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Nos prestataires de services"})," : qui nous aident à fournir nos services (hébergement, maintenance, analyses, etc.)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Des tiers avec votre consentement"})," : lorsque vous nous avez autorisés à le faire"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Les autorités compétentes"})," : lorsque nous sommes légalement tenus de le faire"]})]}),i.jsx("p",{children:"Nous ne vendons pas vos données personnelles à des tiers."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx($1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Transfert de données hors UE"})]}),i.jsx("p",{children:"Certains de nos prestataires de services peuvent être basés en dehors de l'Espace Économique Européen (EEE). Lorsque nous transférons vos données personnelles en dehors de l'EEE, nous nous assurons qu'elles bénéficient d'un niveau de protection similaire en mettant en œuvre des garanties appropriées (clauses contractuelles types, décisions d'adéquation, etc.)."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qt,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"10. Vos droits"})]}),i.jsx("p",{children:"Conformément au RGPD, vous disposez des droits suivants concernant vos données personnelles :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Droit d'accès"})," : vous pouvez demander une copie des données personnelles que nous détenons à votre sujet"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit de rectification"})," : vous pouvez demander la correction de données inexactes ou incomplètes"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit à l'effacement"})," : vous pouvez demander la suppression de vos données personnelles dans certaines circonstances"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit à la limitation du traitement"})," : vous pouvez demander la limitation du traitement de vos données personnelles"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit à la portabilité des données"})," : vous pouvez demander le transfert de vos données personnelles à un autre responsable du traitement"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit d'opposition"})," : vous pouvez vous opposer au traitement de vos données personnelles dans certaines circonstances"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Droit de retirer votre consentement"})," : lorsque le traitement est basé sur votre consentement"]})]}),i.jsx("p",{children:"Pour exercer ces droits, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),i.jsx("p",{children:"Si vous estimez, après nous avoir contactés, que vos droits ne sont pas respectés, vous avez le droit d'introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés (CNIL)."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Z4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"11. Sécurité des données"})]}),i.jsx("p",{children:"Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données personnelles contre tout traitement non autorisé ou illégal et contre toute perte, destruction ou dommage accidentels."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(H1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"12. Cookies et technologies similaires"})]}),i.jsx("p",{children:"Notre Plateforme utilise des cookies et des technologies similaires pour améliorer votre expérience et recueillir des informations sur l'utilisation de la Plateforme. Vous pouvez gérer vos préférences en matière de cookies via notre bannière de consentement aux cookies."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(It,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"13. Modification de la politique de confidentialité"})]}),i.jsx("p",{children:"Nous pouvons modifier cette politique de confidentialité de temps à autre. Toute modification sera publiée sur cette page et, si les modifications sont importantes, nous vous fournirons une notification plus visible."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"14. Contact"})]}),i.jsx("p",{children:"Pour toute question concernant cette politique de confidentialité ou vos données personnelles, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),i.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[i.jsx(U4,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Protection de vos données personnelles"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au Règlement Général sur la Protection des Données (RGPD), vous pouvez à tout moment exercer vos droits d'accès, de rectification, d'effacement, de limitation, de portabilité et d'opposition aux données vous concernant."})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),g3=()=>i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(L4,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Mentions Légales"}),i.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Informations légales relatives à l'éditeur du site et aux conditions d'hébergement."}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[i.jsx(V4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Éditeur du site"})]}),i.jsx("p",{children:'Le site ESIG-prep-guide (ci-après "le Site") est édité par :'}),i.jsxs("p",{children:[i.jsx("strong",{children:"Nom :"})," Abdoul Ahad Mbacké Diouf",i.jsx("br",{}),i.jsx("strong",{children:"Adresse :"})," [Votre adresse postale]",i.jsx("br",{}),i.jsx("strong",{children:"Email :"})," [Votre adresse email]",i.jsx("br",{}),i.jsx("strong",{children:"Téléphone :"})," [Votre numéro de téléphone]"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Directeur de la publication :"})," Abdoul Ahad Mbacké Diouf"]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(H1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Hébergement"})]}),i.jsx("p",{children:"Le Site est hébergé par :"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Société :"})," GitHub Pages (GitHub Inc.)",i.jsx("br",{}),i.jsx("strong",{children:"Adresse :"})," 88 Colin P Kelly Jr St, San Francisco, CA 94107, États-Unis",i.jsx("br",{}),i.jsx("strong",{children:"Site web :"})," ",i.jsx("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"https://pages.github.com/"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(F4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Propriété intellectuelle"})]}),i.jsx("p",{children:"L'ensemble des éléments constituant le Site (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive d'Abdoul Ahad Mbacké Diouf ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments du Site, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),i.jsx("p",{children:"Toute exploitation non autorisée du Site ou de l'un quelconque des éléments qu'il contient sera considérée comme constitutive d'une contrefaçon et poursuivie conformément aux dispositions des articles L.335-2 et suivants du Code de Propriété Intellectuelle."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Pa,{className:"w-6 h-6 text-yellow-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Responsabilité"})]}),i.jsx("p",{children:"Les informations fournies sur le Site le sont à titre informatif. Abdoul Ahad Mbacké Diouf s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur le Site."}),i.jsx("p",{children:"Abdoul Ahad Mbacké Diouf ne saurait être tenu responsable :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Des éventuelles interruptions du Site pour des raisons de maintenance ou autres"}),i.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),i.jsx("li",{children:"Des conséquences de l'utilisation du Site"}),i.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur le Site"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx($1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Liens hypertextes"})]}),i.jsx("p",{children:"Le Site peut contenir des liens hypertextes vers d'autres sites internet. Abdoul Ahad Mbacké Diouf n'exerce aucun contrôle sur ces sites et n'assume aucune responsabilité quant à leur contenu."}),i.jsx("p",{children:"La création de liens hypertextes vers le Site est autorisée sous réserve :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Que les liens ne soient pas utilisés à des fins commerciales ou publicitaires"}),i.jsx("li",{children:"Qu'ils n'induisent pas de confusion sur l'origine des services ou contenus du Site"}),i.jsx("li",{children:"Qu'ils ne portent pas atteinte aux intérêts d'Abdoul Ahad Mbacké Diouf"})]}),i.jsx("p",{children:"Abdoul Ahad Mbacké Diouf se réserve le droit de demander la suppression de tout lien hypertexte pointant vers le Site qui ne respecterait pas ces conditions."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(G1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Protection des données personnelles"})]}),i.jsxs("p",{children:["Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, vous disposez de droits concernant vos données personnelles. Pour en savoir plus, veuillez consulter notre ",i.jsx(Y,{to:"/legal/privacy-policy",children:"Politique de Confidentialité"}),"."]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(l5,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Droit applicable et juridiction compétente"})]}),i.jsx("p",{children:"Les présentes mentions légales sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(i5,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Contact"})]}),i.jsx("p",{children:"Pour toute question relative aux présentes mentions légales, vous pouvez contacter Abdoul Ahad Mbacké Diouf à l'adresse suivante : [Votre adresse email]."}),i.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[i.jsx(e5,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Informations obligatoires"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément à l'article 6 de la loi n° 2004-575 du 21 juin 2004 pour la confiance dans l'économie numérique, il est précisé aux utilisateurs du site ESIG-prep-guide l'identité des différents intervenants dans le cadre de sa réalisation et de son suivi."})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),x3=()=>i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(vy,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Charte de Modération"}),i.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Règles de bonne conduite pour les interactions sur notre plateforme ESIG-prep-guide."}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[i.jsx(Nr,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),i.jsx("p",{children:'La présente Charte de Modération définit les règles de bonne conduite applicables aux interactions sur la plateforme ESIG-prep-guide (ci-après "la Plateforme"), notamment en ce qui concerne les questions posées dans la section FAQ et tout autre contenu généré par les utilisateurs.'}),i.jsx("p",{children:"Cette charte vise à garantir un environnement respectueux et constructif pour tous les utilisateurs de la Plateforme."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(vy,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Principes généraux"})]}),i.jsx("p",{children:"Tous les contenus publiés sur la Plateforme doivent respecter les principes suivants :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Respect mutuel entre les utilisateurs"}),i.jsx("li",{children:"Pertinence par rapport aux thématiques de la Plateforme"}),i.jsx("li",{children:"Exactitude et véracité des informations partagées"}),i.jsx("li",{children:"Respect des lois et règlements en vigueur"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Pa,{className:"w-6 h-6 text-yellow-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Contenus prohibés"})]}),i.jsx("p",{children:"Sont formellement interdits les contenus :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"À caractère injurieux, diffamatoire, raciste, xénophobe, homophobe, sexiste ou discriminatoire"}),i.jsx("li",{children:"Incitant à la haine, à la violence ou au harcèlement envers une personne ou un groupe"}),i.jsx("li",{children:"À caractère pornographique, obscène ou choquant"}),i.jsx("li",{children:"Violant les droits de propriété intellectuelle d'autrui"}),i.jsx("li",{children:"Comportant des informations personnelles d'un tiers sans son consentement"}),i.jsx("li",{children:"Faisant la promotion d'activités illégales"}),i.jsx("li",{children:"Comportant des liens vers des sites malveillants ou frauduleux"}),i.jsx("li",{children:"Consistant en du spam ou des messages répétitifs"}),i.jsx("li",{children:"Hors sujet ou sans rapport avec les thématiques de la Plateforme"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(z4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Procédure de modération"})]}),i.jsx("p",{children:"La modération des contenus sur la Plateforme s'effectue de la manière suivante :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Modération a priori"})," : les questions posées dans la section FAQ sont examinées par l'équipe de modération avant leur publication"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Signalement"})," : les utilisateurs peuvent signaler tout contenu qu'ils jugent inapproprié"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Suppression"})," : les contenus ne respectant pas la présente charte peuvent être supprimés sans préavis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Sanctions"})," : en cas de violations répétées, des mesures peuvent être prises à l'encontre des utilisateurs concernés (avertissement, suspension temporaire, suppression du compte)"]})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Ep,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Bonnes pratiques recommandées"})]}),i.jsx("p",{children:"Pour contribuer positivement à la Plateforme, nous encourageons les utilisateurs à :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Formuler des questions claires et précises"}),i.jsx("li",{children:"Utiliser un langage correct et respectueux"}),i.jsx("li",{children:"Vérifier que leur question n'a pas déjà été posée"}),i.jsx("li",{children:"Catégoriser correctement leur question (phase, catégorie)"}),i.jsx("li",{children:"Fournir les informations nécessaires à la compréhension de leur question"}),i.jsx("li",{children:"Partager leur expérience de manière constructive"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Rôle des modérateurs"})]}),i.jsx("p",{children:"Les modérateurs de la Plateforme ont pour mission de :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Veiller au respect de la présente charte"}),i.jsx("li",{children:"Examiner les contenus signalés par les utilisateurs"}),i.jsx("li",{children:"Prendre les mesures appropriées en cas de non-respect des règles"}),i.jsx("li",{children:"Répondre aux questions des utilisateurs concernant la modération"}),i.jsx("li",{children:"Faire évoluer la présente charte si nécessaire"})]}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(W4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Contestation d'une décision de modération"})]}),i.jsx("p",{children:"Si vous contestez une décision de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),i.jsx("p",{children:"Votre demande sera examinée dans les meilleurs délais."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(It,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Modification de la charte"})]}),i.jsx("p",{children:"La présente charte peut être modifiée à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié."}),i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[i.jsx(Nr,{className:"w-6 h-6 text-blue-600"}),i.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),i.jsx("p",{children:"Pour toute question concernant cette charte de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),i.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[i.jsx(z1,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Règles de la communauté"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Cette charte de modération vise à maintenir un environnement d'échanges respectueux et constructif. En utilisant notre plateforme, vous vous engagez à respecter ces règles pour le bénéfice de tous les utilisateurs."})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),y3=()=>{const{currentUser:t,isAdmin:e}=pt();return!t||!e()?i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(rs,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Accès restreint"}),i.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Cette page est réservée aux administrateurs de la plateforme."}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto border border-gray-100",children:[i.jsx("div",{className:"bg-red-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-6",children:i.jsx(rs,{className:"h-10 w-10 text-red-500"})}),i.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accès administrateur requis"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Le registre RGPD est un document à usage interne destiné uniquement aux administrateurs. Veuillez vous connecter avec un compte disposant des privilèges administrateur pour y accéder."}),i.jsx("div",{className:"flex justify-center",children:i.jsxs(Y,{to:"/login",className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:[i.jsx(rs,{className:"w-4 h-4"}),"Se connecter"]})})]})})]}):i.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center justify-center mb-6",children:i.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:i.jsx(Qt,{className:"w-8 h-8 text-white"})})}),i.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Registre de Traitement RGPD"}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"flex items-center text-red-200 bg-red-700 px-4 py-2 rounded-md inline-block mt-2 shadow-sm",children:[i.jsx(rs,{className:"w-5 h-5 mr-2"}),"Document confidentiel à usage interne uniquement"]})}),i.jsx("div",{className:"flex justify-center mt-6",children:i.jsxs(Y,{to:"/admin",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})}),i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-5xl mx-auto border border-gray-100",children:i.jsxs("div",{className:"prose max-w-none",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-4 rounded-lg border border-red-200",children:[i.jsx(rs,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),i.jsx("h2",{className:"text-xl font-bold text-red-800 m-0",children:"CONFIDENTIEL - Registre des activités de traitement"})]})}),i.jsx("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mb-8",children:i.jsx("p",{className:"text-blue-800 font-medium",children:"Conformément à l'article 30 du Règlement Général sur la Protection des Données (RGPD), ce registre recense l'ensemble des traitements de données à caractère personnel mis en œuvre par ESIG-prep-guide en tant que responsable de traitement."})}),i.jsxs("div",{className:"mb-12",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-6",children:[i.jsx(Qn,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"1. Identité du responsable de traitement"})]}),i.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 shadow-sm",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"flex items-start",children:[i.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Nom :"}),i.jsx("span",{children:"Abdoul Ahad Mbacké Diouf"})]}),i.jsxs("p",{className:"flex items-start mt-3",children:[i.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Adresse :"}),i.jsx("span",{children:"[Votre adresse postale]"})]})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"flex items-start",children:[i.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Email :"}),i.jsx("span",{children:"[Votre adresse email]"})]}),i.jsxs("p",{className:"flex items-start mt-3",children:[i.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Téléphone :"}),i.jsx("span",{children:"[Votre numéro de téléphone]"})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("p",{className:"flex items-start",children:[i.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Délégué à la protection des données :"}),i.jsx("span",{children:'[Nom du DPO ou "Non désigné"]'})]})})]})]}),i.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[i.jsx(B1,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 1: Gestion des comptes utilisateurs"})]}),i.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des comptes utilisateurs et authentification"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Création et gestion de compte"}),i.jsx("li",{children:"Authentification des utilisateurs"}),i.jsx("li",{children:"Récupération de mot de passe"}),i.jsx("li",{children:"Vérification d'email"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Exécution contractuelle (CGU) et consentement"})})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Identifiants: nom, prénom, adresse email"}),i.jsx("li",{children:"Données de compte: mot de passe (hashé), rôle"}),i.jsx("li",{children:"Données de connexion: timestamp, adresse IP"}),i.jsx("li",{children:"Données de profil: photo (facultatif)"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"En interne: administrateurs de la plateforme"}),i.jsx("li",{children:"En externe: Firebase (sous-traitant pour l'authentification)"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Aussi longtemps que le compte est actif + 1 an après suppression pour des raisons techniques et légales"})})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Authentification sécurisée (Firebase Auth)"}),i.jsx("li",{children:"Mots de passe hashés"}),i.jsx("li",{children:"Accès restreint aux données administrateur"}),i.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),i.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[i.jsx(Np,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 2: Gestion des questions FAQ"})]}),i.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des questions posées par les utilisateurs"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Recueil des questions des utilisateurs"}),i.jsx("li",{children:"Modération et publication des questions"}),i.jsx("li",{children:"Réponse aux questions"}),i.jsx("li",{children:"Constitution d'une base de connaissances"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Consentement et intérêt légitime"})})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Identifiants: ID utilisateur, email"}),i.jsx("li",{children:"Contenu: question posée, catégorie, phase"}),i.jsx("li",{children:"Métadonnées: date de soumission, statut de la question"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"En interne: administrateurs et modérateurs"}),i.jsx("li",{children:"En externe: Firebase (sous-traitant pour le stockage des données)"}),i.jsx("li",{children:"Public: questions approuvées et répondues"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),i.jsxs("td",{className:"border border-gray-300 p-3",children:[i.jsx("p",{children:"Questions publiées: durée de vie de la plateforme"}),i.jsx("p",{children:"Questions refusées: 1 an après refus"})]})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Accès restreint aux données complètes (admin uniquement)"}),i.jsx("li",{children:"Modération avant publication"}),i.jsx("li",{children:"Règles de sécurité Firebase"}),i.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),i.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[i.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[i.jsx(G4,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 3: Gestion des ressources documentaires"})]}),i.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:i.jsxs("tbody",{children:[i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion et mise à disposition des ressources documentaires"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Publication de documents informatifs"}),i.jsx("li",{children:"Catégorisation des ressources"}),i.jsx("li",{children:"Accès contrôlé aux ressources"}),i.jsx("li",{children:"Suivi statistique des consultations"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Exécution contractuelle (CGU) et intérêt légitime"})})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Métadonnées des ressources: titre, description, catégorie, phase"}),i.jsx("li",{children:"Données d'accès: identifiant utilisateur, timestamp d'accès"}),i.jsx("li",{children:"Statistiques anonymisées: nombre de consultations"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),i.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme, administrateurs"})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"En interne: administrateurs"}),i.jsx("li",{children:"En externe: Firebase (stockage des métadonnées), Dropbox (stockage des fichiers)"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),i.jsxs("td",{className:"border border-gray-300 p-3",children:[i.jsx("p",{children:"Métadonnées des ressources: durée de vie de la plateforme"}),i.jsx("p",{children:"Données d'accès individuelles: 1 an"})]})]}),i.jsxs("tr",{children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Authentification requise pour l'accès aux ressources"}),i.jsx("li",{children:"Gestion des droits d'accès"}),i.jsx("li",{children:"Transmission sécurisée via HTTPS"}),i.jsx("li",{children:"Sécurité des liens de téléchargement"})]})})]}),i.jsxs("tr",{className:"bg-gray-50",children:[i.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),i.jsx("td",{className:"border border-gray-300 p-3",children:i.jsx("p",{children:"Oui (Firebase - USA, Dropbox - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),i.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(c5,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Mise à jour du registre"})]}),i.jsx("p",{className:"text-gray-700",children:"Ce registre est mis à jour régulièrement pour refléter l'évolution des traitements de données effectués."}),i.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100",children:[i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[i.jsx(Pa,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document obligatoire"}),i.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au RGPD, ce registre des activités de traitement doit être conservé à jour et présenté sur demande à la CNIL. Il constitue un élément essentiel de la conformité au RGPD."})]})]}),i.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})]})})})]})};function v3(){return i.jsx(k4,{children:i.jsx(A4,{children:i.jsx(rT,{basename:"/Esig-prep-guide",children:i.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[i.jsx(f5,{}),i.jsx("main",{className:"flex-grow",children:i.jsxs(KE,{children:[i.jsx(Ie,{path:"/",element:i.jsx(x5,{})}),i.jsx(Ie,{path:"/login",element:i.jsx(y5,{})}),i.jsx(Ie,{path:"/register",element:i.jsx(v5,{})}),i.jsx(Ie,{path:"/reset-password",element:i.jsx(f3,{})}),i.jsx(Ie,{path:"/test-firebase",element:i.jsx(c3,{})}),i.jsx(Ie,{path:"/legal/cgu",element:i.jsx(m3,{})}),i.jsx(Ie,{path:"/legal/privacy-policy",element:i.jsx(p3,{})}),i.jsx(Ie,{path:"/legal/legal-notice",element:i.jsx(g3,{})}),i.jsx(Ie,{path:"/legal/moderation-charter",element:i.jsx(x3,{})}),i.jsx(Ie,{path:"/legal/rgpd-registry",element:i.jsx(hr,{children:i.jsx(y3,{})})}),i.jsx(Ie,{path:"/dashboard",element:i.jsx(yl,{children:i.jsx(b5,{})})}),i.jsx(Ie,{path:"/resources",element:i.jsx(yl,{children:i.jsx(w5,{})})}),i.jsx(Ie,{path:"/faq",element:i.jsx(yl,{children:i.jsx(_5,{})})}),i.jsx(Ie,{path:"/profile",element:i.jsx(yl,{children:i.jsx(h3,{})})}),i.jsx(Ie,{path:"/admin",element:i.jsx(hr,{children:i.jsx(E5,{})})}),i.jsx(Ie,{path:"/admin/content",element:i.jsx(hr,{children:i.jsx(T5,{})})}),i.jsx(Ie,{path:"/admin/resources",element:i.jsx(hr,{children:i.jsx(s3,{})})}),i.jsx(Ie,{path:"/admin/users",element:i.jsx(hr,{children:i.jsx(i3,{})})}),i.jsx(Ie,{path:"/admin/users/:uid",element:i.jsx(hr,{children:i.jsx(o3,{})})}),i.jsx(Ie,{path:"/admin/activity",element:i.jsx(hr,{children:i.jsx(a3,{})})}),i.jsx(Ie,{path:"/admin/tutorial",element:i.jsx(hr,{children:i.jsx(l3,{})})}),i.jsx(Ie,{path:"*",element:i.jsx(u3,{})})]})}),i.jsx(p5,{}),i.jsx(g5,{})]})})})})}Ob(document.getElementById("root")).render(i.jsx(A.StrictMode,{children:i.jsx(v3,{})}))});export default b3();
