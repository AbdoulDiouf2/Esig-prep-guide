function jE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function DE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var F0={exports:{}},fu={},U0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),OE=Symbol.for("react.portal"),VE=Symbol.for("react.fragment"),LE=Symbol.for("react.strict_mode"),ME=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),UE=Symbol.for("react.context"),zE=Symbol.for("react.forward_ref"),$E=Symbol.for("react.suspense"),BE=Symbol.for("react.memo"),qE=Symbol.for("react.lazy"),Wp=Symbol.iterator;function WE(t){return t===null||typeof t!="object"?null:(t=Wp&&t[Wp]||t["@@iterator"],typeof t=="function"?t:null)}var z0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,B0={};function hi(t,e,n){this.props=t,this.context=e,this.refs=B0,this.updater=n||z0}hi.prototype.isReactComponent={};hi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function q0(){}q0.prototype=hi.prototype;function Fh(t,e,n){this.props=t,this.context=e,this.refs=B0,this.updater=n||z0}var Uh=Fh.prototype=new q0;Uh.constructor=Fh;$0(Uh,hi.prototype);Uh.isPureReactComponent=!0;var Hp=Array.isArray,W0=Object.prototype.hasOwnProperty,zh={current:null},H0={key:!0,ref:!0,__self:!0,__source:!0};function G0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)W0.call(e,r)&&!H0.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Xo,type:t,key:i,ref:o,props:s,_owner:zh.current}}function HE(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function $h(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function GE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gp=/\/+/g;function Tc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GE(""+t.key):e.toString(36)}function el(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case OE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tc(o,0):r,Hp(s)?(n="",t!=null&&(n=t.replace(Gp,"$&/")+"/"),el(s,e,n,"",function(d){return d})):s!=null&&($h(s)&&(s=HE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Gp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Hp(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Tc(i,u);o+=el(i,e,n,c,s)}else if(c=WE(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Tc(i,u++),o+=el(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pa(t,e,n){if(t==null)return t;var r=[],s=0;return el(t,r,"","",function(i){return e.call(n,i,s++)}),r}function KE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},tl={transition:null},QE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:tl,ReactCurrentOwner:zh};function K0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Pa,forEach:function(t,e,n){Pa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pa(t,function(){e++}),e},toArray:function(t){return Pa(t,function(e){return e})||[]},only:function(t){if(!$h(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=hi;te.Fragment=VE;te.Profiler=ME;te.PureComponent=Fh;te.StrictMode=LE;te.Suspense=$E;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QE;te.act=K0;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)W0.call(e,c)&&!H0.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Xo,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:UE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FE,_context:t},t.Consumer=t};te.createElement=G0;te.createFactory=function(t){var e=G0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:zE,render:t}};te.isValidElement=$h;te.lazy=function(t){return{$$typeof:qE,_payload:{_status:-1,_result:t},_init:KE}};te.memo=function(t,e){return{$$typeof:BE,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=tl.transition;tl.transition={};try{t()}finally{tl.transition=e}};te.unstable_act=K0;te.useCallback=function(t,e){return _t.current.useCallback(t,e)};te.useContext=function(t){return _t.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};te.useEffect=function(t,e){return _t.current.useEffect(t,e)};te.useId=function(){return _t.current.useId()};te.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return _t.current.useMemo(t,e)};te.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};te.useRef=function(t){return _t.current.useRef(t)};te.useState=function(t){return _t.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return _t.current.useTransition()};te.version="18.3.1";U0.exports=te;var P=U0.exports;const mu=DE(P),YE=jE({__proto__:null,default:mu},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE=P,JE=Symbol.for("react.element"),ZE=Symbol.for("react.fragment"),eI=Object.prototype.hasOwnProperty,tI=XE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nI={key:!0,ref:!0,__self:!0,__source:!0};function Q0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eI.call(e,r)&&!nI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:JE,type:t,key:i,ref:o,props:s,_owner:tI.current}}fu.Fragment=ZE;fu.jsx=Q0;fu.jsxs=Q0;F0.exports=fu;var l=F0.exports,Y0={exports:{}},Vt={},X0={exports:{}},J0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,H){var Q=B.length;B.push(H);e:for(;0<Q;){var he=Q-1>>>1,ce=B[he];if(0<s(ce,H))B[he]=H,B[Q]=ce,Q=he;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var H=B[0],Q=B.pop();if(Q!==H){B[0]=Q;e:for(var he=0,ce=B.length,ye=ce>>>1;he<ye;){var Ve=2*(he+1)-1,U=B[Ve],fe=Ve+1,Ft=B[fe];if(0>s(U,Q))fe<ce&&0>s(Ft,U)?(B[he]=Ft,B[fe]=Q,he=fe):(B[he]=U,B[Ve]=Q,he=Ve);else if(fe<ce&&0>s(Ft,Q))B[he]=Ft,B[fe]=Q,he=fe;else break e}}return H}function s(B,H){var Q=B.sortIndex-H.sortIndex;return Q!==0?Q:B.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],m=1,g=null,p=3,x=!1,S=!1,A=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=B)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(d)}}function D(B){if(A=!1,w(B),!S)if(n(c)!==null)S=!0,Qt(L);else{var H=n(d);H!==null&&Ze(D,H.startTime-B)}}function L(B,H){S=!1,A&&(A=!1,I(y),y=-1),x=!0;var Q=p;try{for(w(H),g=n(c);g!==null&&(!(g.expirationTime>H)||B&&!k());){var he=g.callback;if(typeof he=="function"){g.callback=null,p=g.priorityLevel;var ce=he(g.expirationTime<=H);H=t.unstable_now(),typeof ce=="function"?g.callback=ce:g===n(c)&&r(c),w(H)}else r(c);g=n(c)}if(g!==null)var ye=!0;else{var Ve=n(d);Ve!==null&&Ze(D,Ve.startTime-H),ye=!1}return ye}finally{g=null,p=Q,x=!1}}var M=!1,b=null,y=-1,E=5,_=-1;function k(){return!(t.unstable_now()-_<E)}function R(){if(b!==null){var B=t.unstable_now();_=B;var H=!0;try{H=b(!0,B)}finally{H?N():(M=!1,b=null)}}else M=!1}var N;if(typeof T=="function")N=function(){T(R)};else if(typeof MessageChannel<"u"){var Ue=new MessageChannel,At=Ue.port2;Ue.port1.onmessage=R,N=function(){At.postMessage(null)}}else N=function(){C(R,0)};function Qt(B){b=B,M||(M=!0,N())}function Ze(B,H){y=C(function(){B(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){S||x||(S=!0,Qt(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Q=p;p=H;try{return B()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,H){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Q=p;p=B;try{return H()}finally{p=Q}},t.unstable_scheduleCallback=function(B,H,Q){var he=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?he+Q:he):Q=he,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Q+ce,B={id:m++,callback:H,priorityLevel:B,startTime:Q,expirationTime:ce,sortIndex:-1},Q>he?(B.sortIndex=Q,e(d,B),n(c)===null&&B===n(d)&&(A?(I(y),y=-1):A=!0,Ze(D,Q-he))):(B.sortIndex=ce,e(c,B),S||x||(S=!0,Qt(L))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var H=p;return function(){var Q=p;p=H;try{return B.apply(this,arguments)}finally{p=Q}}}})(J0);X0.exports=J0;var rI=X0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sI=P,Ot=rI;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Z0=new Set,wo={};function hs(t,e){Js(t,e),Js(t+"Capture",e)}function Js(t,e){for(wo[t]=e,t=0;t<e.length;t++)Z0.add(e[t])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),md=Object.prototype.hasOwnProperty,iI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kp={},Qp={};function oI(t){return md.call(Qp,t)?!0:md.call(Kp,t)?!1:iI.test(t)?Qp[t]=!0:(Kp[t]=!0,!1)}function aI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lI(t,e,n,r){if(e===null||typeof e>"u"||aI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bh=/[\-:]([a-z])/g;function qh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bh,qh);Xe[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bh,qh);Xe[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bh,qh);Xe[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wh(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lI(e,n,s,r)&&(n=null),r||s===null?oI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gn=sI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),Cs=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),Gh=Symbol.for("react.forward_ref"),gd=Symbol.for("react.suspense"),yd=Symbol.for("react.suspense_list"),Kh=Symbol.for("react.memo"),nr=Symbol.for("react.lazy"),nv=Symbol.for("react.offscreen"),Yp=Symbol.iterator;function Mi(t){return t===null||typeof t!="object"?null:(t=Yp&&t[Yp]||t["@@iterator"],typeof t=="function"?t:null)}var Se=Object.assign,bc;function Ki(t){if(bc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bc=e&&e[1]||""}return`
`+bc+t}var Sc=!1;function Nc(t,e){if(!t||Sc)return"";Sc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Sc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ki(t):""}function uI(t){switch(t.tag){case 5:return Ki(t.type);case 16:return Ki("Lazy");case 13:return Ki("Suspense");case 19:return Ki("SuspenseList");case 0:case 2:case 15:return t=Nc(t.type,!1),t;case 11:return t=Nc(t.type.render,!1),t;case 1:return t=Nc(t.type,!0),t;default:return""}}function vd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ks:return"Fragment";case Cs:return"Portal";case pd:return"Profiler";case Hh:return"StrictMode";case gd:return"Suspense";case yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case tv:return(t.displayName||"Context")+".Consumer";case ev:return(t._context.displayName||"Context")+".Provider";case Gh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kh:return e=t.displayName||null,e!==null?e:vd(t.type)||"Memo";case nr:e=t._payload,t=t._init;try{return vd(t(e))}catch{}}return null}function cI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vd(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function br(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dI(t){var e=rv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ja(t){t._valueTracker||(t._valueTracker=dI(t))}function sv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=rv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function El(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _d(t,e){var n=e.checked;return Se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=br(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iv(t,e){e=e.checked,e!=null&&Wh(t,"checked",e,!1)}function xd(t,e){iv(t,e);var n=br(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wd(t,e.type,n):e.hasOwnProperty("defaultValue")&&wd(t,e.type,br(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wd(t,e,n){(e!=="number"||El(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qi=Array.isArray;function zs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+br(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ed(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Qi(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:br(n)}}function ov(t,e){var n=br(e.value),r=br(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function av(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Id(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?av(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,lv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var so={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hI=["Webkit","ms","Moz","O"];Object.keys(so).forEach(function(t){hI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),so[e]=so[t]})});function uv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||so.hasOwnProperty(t)&&so[t]?(""+e).trim():e+"px"}function cv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=uv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var fI=Se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Td(t,e){if(e){if(fI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=null;function Qh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nd=null,$s=null,Bs=null;function tg(t){if(t=ea(t)){if(typeof Nd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=_u(e),Nd(t.stateNode,t.type,e))}}function dv(t){$s?Bs?Bs.push(t):Bs=[t]:$s=t}function hv(){if($s){var t=$s,e=Bs;if(Bs=$s=null,tg(t),e)for(t=0;t<e.length;t++)tg(e[t])}}function fv(t,e){return t(e)}function mv(){}var Ac=!1;function pv(t,e,n){if(Ac)return t(e,n);Ac=!0;try{return fv(t,e,n)}finally{Ac=!1,($s!==null||Bs!==null)&&(mv(),hv())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Ad=!1;if(Fn)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Ad=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Ad=!1}function mI(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var io=!1,Il=null,Tl=!1,Cd=null,pI={onError:function(t){io=!0,Il=t}};function gI(t,e,n,r,s,i,o,u,c){io=!1,Il=null,mI.apply(pI,arguments)}function yI(t,e,n,r,s,i,o,u,c){if(gI.apply(this,arguments),io){if(io){var d=Il;io=!1,Il=null}else throw Error(z(198));Tl||(Tl=!0,Cd=d)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function gv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ng(t){if(fs(t)!==t)throw Error(z(188))}function vI(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ng(s),t;if(i===r)return ng(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function yv(t){return t=vI(t),t!==null?vv(t):null}function vv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vv(t);if(e!==null)return e;t=t.sibling}return null}var _v=Ot.unstable_scheduleCallback,rg=Ot.unstable_cancelCallback,_I=Ot.unstable_shouldYield,xI=Ot.unstable_requestPaint,Pe=Ot.unstable_now,wI=Ot.unstable_getCurrentPriorityLevel,Yh=Ot.unstable_ImmediatePriority,xv=Ot.unstable_UserBlockingPriority,bl=Ot.unstable_NormalPriority,EI=Ot.unstable_LowPriority,wv=Ot.unstable_IdlePriority,pu=null,pn=null;function II(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(pu,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:SI,TI=Math.log,bI=Math.LN2;function SI(t){return t>>>=0,t===0?32:31-(TI(t)/bI|0)|0}var Oa=64,Va=4194304;function Yi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Yi(u):(i&=o,i!==0&&(r=Yi(i)))}else o=n&~s,o!==0?r=Yi(o):i!==0&&(r=Yi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),s=1<<n,r|=t[n],e&=~s;return r}function NI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-nn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=NI(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ev(){var t=Oa;return Oa<<=1,!(Oa&4194240)&&(Oa=64),t}function Cc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function CI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-nn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Xh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Iv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tv,Jh,bv,Sv,Nv,Pd=!1,La=[],fr=null,mr=null,pr=null,To=new Map,bo=new Map,sr=[],kI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":pr=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(e.pointerId)}}function Ui(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ea(e),e!==null&&Jh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PI(t,e,n,r,s){switch(e){case"focusin":return fr=Ui(fr,t,e,n,r,s),!0;case"dragenter":return mr=Ui(mr,t,e,n,r,s),!0;case"mouseover":return pr=Ui(pr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return To.set(i,Ui(To.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,bo.set(i,Ui(bo.get(i)||null,t,e,n,r,s)),!0}return!1}function Av(t){var e=Br(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=gv(n),e!==null){t.blockedOn=e,Nv(t.priority,function(){bv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Sd=r,n.target.dispatchEvent(r),Sd=null}else return e=ea(n),e!==null&&Jh(e),t.blockedOn=n,!1;e.shift()}return!0}function ig(t,e,n){nl(t)&&n.delete(e)}function RI(){Pd=!1,fr!==null&&nl(fr)&&(fr=null),mr!==null&&nl(mr)&&(mr=null),pr!==null&&nl(pr)&&(pr=null),To.forEach(ig),bo.forEach(ig)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,Pd||(Pd=!0,Ot.unstable_scheduleCallback(Ot.unstable_NormalPriority,RI)))}function So(t){function e(s){return zi(s,t)}if(0<La.length){zi(La[0],t);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===t&&(r.blockedOn=null)}}for(fr!==null&&zi(fr,t),mr!==null&&zi(mr,t),pr!==null&&zi(pr,t),To.forEach(e),bo.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)Av(n),n.blockedOn===null&&sr.shift()}var qs=Gn.ReactCurrentBatchConfig,Nl=!0;function jI(t,e,n,r){var s=de,i=qs.transition;qs.transition=null;try{de=1,Zh(t,e,n,r)}finally{de=s,qs.transition=i}}function DI(t,e,n,r){var s=de,i=qs.transition;qs.transition=null;try{de=4,Zh(t,e,n,r)}finally{de=s,qs.transition=i}}function Zh(t,e,n,r){if(Nl){var s=Rd(t,e,n,r);if(s===null)Fc(t,e,r,Al,n),sg(t,r);else if(PI(s,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<kI.indexOf(t)){for(;s!==null;){var i=ea(s);if(i!==null&&Tv(i),i=Rd(t,e,n,r),i===null&&Fc(t,e,r,Al,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fc(t,e,r,null,n)}}var Al=null;function Rd(t,e,n,r){if(Al=null,t=Qh(r),t=Br(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=gv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Al=t,null}function Cv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wI()){case Yh:return 1;case xv:return 4;case bl:case EI:return 16;case wv:return 536870912;default:return 16}default:return 16}}var ur=null,ef=null,rl=null;function kv(){if(rl)return rl;var t,e=ef,n=e.length,r,s="value"in ur?ur.value:ur.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return rl=s.slice(t,1<r?1-r:void 0)}function sl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ma(){return!0}function og(){return!1}function Lt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ma:og,this.isPropagationStopped=og,this}return Se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ma)},persist:function(){},isPersistent:Ma}),e}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Lt(fi),Zo=Se({},fi,{view:0,detail:0}),OI=Lt(Zo),kc,Pc,$i,gu=Se({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$i&&($i&&t.type==="mousemove"?(kc=t.screenX-$i.screenX,Pc=t.screenY-$i.screenY):Pc=kc=0,$i=t),kc)},movementY:function(t){return"movementY"in t?t.movementY:Pc}}),ag=Lt(gu),VI=Se({},gu,{dataTransfer:0}),LI=Lt(VI),MI=Se({},Zo,{relatedTarget:0}),Rc=Lt(MI),FI=Se({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),UI=Lt(FI),zI=Se({},fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$I=Lt(zI),BI=Se({},fi,{data:0}),lg=Lt(BI),qI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HI[t])?!!e[t]:!1}function nf(){return GI}var KI=Se({},Zo,{key:function(t){if(t.key){var e=qI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(t){return t.type==="keypress"?sl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QI=Lt(KI),YI=Se({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ug=Lt(YI),XI=Se({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),JI=Lt(XI),ZI=Se({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),eT=Lt(ZI),tT=Se({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nT=Lt(tT),rT=[9,13,27,32],rf=Fn&&"CompositionEvent"in window,oo=null;Fn&&"documentMode"in document&&(oo=document.documentMode);var sT=Fn&&"TextEvent"in window&&!oo,Pv=Fn&&(!rf||oo&&8<oo&&11>=oo),cg=" ",dg=!1;function Rv(t,e){switch(t){case"keyup":return rT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function iT(t,e){switch(t){case"compositionend":return jv(e);case"keypress":return e.which!==32?null:(dg=!0,cg);case"textInput":return t=e.data,t===cg&&dg?null:t;default:return null}}function oT(t,e){if(Ps)return t==="compositionend"||!rf&&Rv(t,e)?(t=kv(),rl=ef=ur=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pv&&e.locale!=="ko"?null:e.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!aT[t.type]:e==="textarea"}function Dv(t,e,n,r){dv(r),e=Cl(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,No=null;function lT(t){Wv(t,0)}function yu(t){var e=Ds(t);if(sv(e))return t}function uT(t,e){if(t==="change")return e}var Ov=!1;if(Fn){var jc;if(Fn){var Dc="oninput"in document;if(!Dc){var fg=document.createElement("div");fg.setAttribute("oninput","return;"),Dc=typeof fg.oninput=="function"}jc=Dc}else jc=!1;Ov=jc&&(!document.documentMode||9<document.documentMode)}function mg(){ao&&(ao.detachEvent("onpropertychange",Vv),No=ao=null)}function Vv(t){if(t.propertyName==="value"&&yu(No)){var e=[];Dv(e,No,t,Qh(t)),pv(lT,e)}}function cT(t,e,n){t==="focusin"?(mg(),ao=e,No=n,ao.attachEvent("onpropertychange",Vv)):t==="focusout"&&mg()}function dT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(No)}function hT(t,e){if(t==="click")return yu(e)}function fT(t,e){if(t==="input"||t==="change")return yu(e)}function mT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:mT;function Ao(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!md.call(e,s)||!on(t[s],e[s]))return!1}return!0}function pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gg(t,e){var n=pg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pg(n)}}function Lv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Mv(){for(var t=window,e=El();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=El(t.document)}return e}function sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pT(t){var e=Mv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lv(n.ownerDocument.documentElement,n)){if(r!==null&&sf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=gg(n,i);var o=gg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gT=Fn&&"documentMode"in document&&11>=document.documentMode,Rs=null,jd=null,lo=null,Dd=!1;function yg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dd||Rs==null||Rs!==El(r)||(r=Rs,"selectionStart"in r&&sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lo&&Ao(lo,r)||(lo=r,r=Cl(jd,"onSelect"),0<r.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Rs)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var js={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},Oc={},Fv={};Fn&&(Fv=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function vu(t){if(Oc[t])return Oc[t];if(!js[t])return t;var e=js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fv)return Oc[t]=e[n];return t}var Uv=vu("animationend"),zv=vu("animationiteration"),$v=vu("animationstart"),Bv=vu("transitionend"),qv=new Map,vg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(t,e){qv.set(t,e),hs(e,[t])}for(var Vc=0;Vc<vg.length;Vc++){var Lc=vg[Vc],yT=Lc.toLowerCase(),vT=Lc[0].toUpperCase()+Lc.slice(1);kr(yT,"on"+vT)}kr(Uv,"onAnimationEnd");kr(zv,"onAnimationIteration");kr($v,"onAnimationStart");kr("dblclick","onDoubleClick");kr("focusin","onFocus");kr("focusout","onBlur");kr(Bv,"onTransitionEnd");Js("onMouseEnter",["mouseout","mouseover"]);Js("onMouseLeave",["mouseout","mouseover"]);Js("onPointerEnter",["pointerout","pointerover"]);Js("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_T=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xi));function _g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yI(r,e,void 0,t),t.currentTarget=null}function Wv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;_g(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;_g(s,u,d),i=c}}}if(Tl)throw t=Cd,Tl=!1,Cd=null,t}function _e(t,e){var n=e[Fd];n===void 0&&(n=e[Fd]=new Set);var r=t+"__bubble";n.has(r)||(Hv(e,t,2,!1),n.add(r))}function Mc(t,e,n){var r=0;e&&(r|=4),Hv(n,t,r,e)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Ua]){t[Ua]=!0,Z0.forEach(function(n){n!=="selectionchange"&&(_T.has(n)||Mc(n,!1,t),Mc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ua]||(e[Ua]=!0,Mc("selectionchange",!1,e))}}function Hv(t,e,n,r){switch(Cv(e)){case 1:var s=jI;break;case 4:s=DI;break;default:s=Zh}n=s.bind(null,e,n,t),s=void 0,!Ad||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=Br(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}pv(function(){var d=i,m=Qh(n),g=[];e:{var p=qv.get(t);if(p!==void 0){var x=tf,S=t;switch(t){case"keypress":if(sl(n)===0)break e;case"keydown":case"keyup":x=QI;break;case"focusin":S="focus",x=Rc;break;case"focusout":S="blur",x=Rc;break;case"beforeblur":case"afterblur":x=Rc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ag;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=LI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=JI;break;case Uv:case zv:case $v:x=UI;break;case Bv:x=eT;break;case"scroll":x=OI;break;case"wheel":x=nT;break;case"copy":case"cut":case"paste":x=$I;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ug}var A=(e&4)!==0,C=!A&&t==="scroll",I=A?p!==null?p+"Capture":null:p;A=[];for(var T=d,w;T!==null;){w=T;var D=w.stateNode;if(w.tag===5&&D!==null&&(w=D,I!==null&&(D=Io(T,I),D!=null&&A.push(ko(T,D,w)))),C)break;T=T.return}0<A.length&&(p=new x(p,S,null,n,m),g.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==Sd&&(S=n.relatedTarget||n.fromElement)&&(Br(S)||S[Un]))break e;if((x||p)&&(p=m.window===m?m:(p=m.ownerDocument)?p.defaultView||p.parentWindow:window,x?(S=n.relatedTarget||n.toElement,x=d,S=S?Br(S):null,S!==null&&(C=fs(S),S!==C||S.tag!==5&&S.tag!==6)&&(S=null)):(x=null,S=d),x!==S)){if(A=ag,D="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(A=ug,D="onPointerLeave",I="onPointerEnter",T="pointer"),C=x==null?p:Ds(x),w=S==null?p:Ds(S),p=new A(D,T+"leave",x,n,m),p.target=C,p.relatedTarget=w,D=null,Br(m)===d&&(A=new A(I,T+"enter",S,n,m),A.target=w,A.relatedTarget=C,D=A),C=D,x&&S)t:{for(A=x,I=S,T=0,w=A;w;w=bs(w))T++;for(w=0,D=I;D;D=bs(D))w++;for(;0<T-w;)A=bs(A),T--;for(;0<w-T;)I=bs(I),w--;for(;T--;){if(A===I||I!==null&&A===I.alternate)break t;A=bs(A),I=bs(I)}A=null}else A=null;x!==null&&xg(g,p,x,A,!1),S!==null&&C!==null&&xg(g,C,S,A,!0)}}e:{if(p=d?Ds(d):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var L=uT;else if(hg(p))if(Ov)L=fT;else{L=dT;var M=cT}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=hT);if(L&&(L=L(t,d))){Dv(g,L,n,m);break e}M&&M(t,p,d),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&wd(p,"number",p.value)}switch(M=d?Ds(d):window,t){case"focusin":(hg(M)||M.contentEditable==="true")&&(Rs=M,jd=d,lo=null);break;case"focusout":lo=jd=Rs=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,yg(g,n,m);break;case"selectionchange":if(gT)break;case"keydown":case"keyup":yg(g,n,m)}var b;if(rf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ps?Rv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Pv&&n.locale!=="ko"&&(Ps||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ps&&(b=kv()):(ur=m,ef="value"in ur?ur.value:ur.textContent,Ps=!0)),M=Cl(d,y),0<M.length&&(y=new lg(y,t,null,n,m),g.push({event:y,listeners:M}),b?y.data=b:(b=jv(n),b!==null&&(y.data=b)))),(b=sT?iT(t,n):oT(t,n))&&(d=Cl(d,"onBeforeInput"),0<d.length&&(m=new lg("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:d}),m.data=b))}Wv(g,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(ko(t,i,s)),i=Io(t,e),i!=null&&r.push(ko(t,i,s))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=Io(n,i),c!=null&&o.unshift(ko(n,c,u))):s||(c=Io(n,i),c!=null&&o.push(ko(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function wg(t){return(typeof t=="string"?t:""+t).replace(xT,`
`).replace(wT,"")}function za(t,e,n){if(e=wg(e),wg(t)!==e&&n)throw Error(z(425))}function kl(){}var Od=null,Vd=null;function Ld(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,ET=typeof clearTimeout=="function"?clearTimeout:void 0,Eg=typeof Promise=="function"?Promise:void 0,IT=typeof queueMicrotask=="function"?queueMicrotask:typeof Eg<"u"?function(t){return Eg.resolve(null).then(t).catch(TT)}:Md;function TT(t){setTimeout(function(){throw t})}function Uc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);So(e)}function gr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ig(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mi=Math.random().toString(36).slice(2),mn="__reactFiber$"+mi,Po="__reactProps$"+mi,Un="__reactContainer$"+mi,Fd="__reactEvents$"+mi,bT="__reactListeners$"+mi,ST="__reactHandles$"+mi;function Br(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ig(t);t!==null;){if(n=t[mn])return n;t=Ig(t)}return e}t=n,n=t.parentNode}return null}function ea(t){return t=t[mn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ds(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function _u(t){return t[Po]||null}var Ud=[],Os=-1;function Pr(t){return{current:t}}function we(t){0>Os||(t.current=Ud[Os],Ud[Os]=null,Os--)}function ge(t,e){Os++,Ud[Os]=t.current,t.current=e}var Sr={},dt=Pr(Sr),Tt=Pr(!1),Zr=Sr;function Zs(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function Pl(){we(Tt),we(dt)}function Tg(t,e,n){if(dt.current!==Sr)throw Error(z(168));ge(dt,e),ge(Tt,n)}function Gv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,cI(t)||"Unknown",s));return Se({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sr,Zr=dt.current,ge(dt,t),ge(Tt,Tt.current),!0}function bg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Gv(t,e,Zr),r.__reactInternalMemoizedMergedChildContext=t,we(Tt),we(dt),ge(dt,t)):we(Tt),ge(Tt,n)}var Sn=null,xu=!1,zc=!1;function Kv(t){Sn===null?Sn=[t]:Sn.push(t)}function NT(t){xu=!0,Kv(t)}function Rr(){if(!zc&&Sn!==null){zc=!0;var t=0,e=de;try{var n=Sn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,xu=!1}catch(s){throw Sn!==null&&(Sn=Sn.slice(t+1)),_v(Yh,Rr),s}finally{de=e,zc=!1}}return null}var Vs=[],Ls=0,jl=null,Dl=0,Ut=[],zt=0,es=null,Pn=1,Rn="";function Ur(t,e){Vs[Ls++]=Dl,Vs[Ls++]=jl,jl=t,Dl=e}function Qv(t,e,n){Ut[zt++]=Pn,Ut[zt++]=Rn,Ut[zt++]=es,es=t;var r=Pn;t=Rn;var s=32-nn(r)-1;r&=~(1<<s),n+=1;var i=32-nn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-nn(e)+s|n<<s|r,Rn=i+t}else Pn=1<<i|n<<s|r,Rn=t}function of(t){t.return!==null&&(Ur(t,1),Qv(t,1,0))}function af(t){for(;t===jl;)jl=Vs[--Ls],Vs[Ls]=null,Dl=Vs[--Ls],Vs[Ls]=null;for(;t===es;)es=Ut[--zt],Ut[zt]=null,Rn=Ut[--zt],Ut[zt]=null,Pn=Ut[--zt],Ut[zt]=null}var jt=null,Pt=null,Ee=!1,en=null;function Yv(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Pt=gr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=es!==null?{id:Pn,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Pt=null,!0):!1;default:return!1}}function zd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $d(t){if(Ee){var e=Pt;if(e){var n=e;if(!Sg(t,e)){if(zd(t))throw Error(z(418));e=gr(n.nextSibling);var r=jt;e&&Sg(t,e)?Yv(r,n):(t.flags=t.flags&-4097|2,Ee=!1,jt=t)}}else{if(zd(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ee=!1,jt=t}}}function Ng(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function $a(t){if(t!==jt)return!1;if(!Ee)return Ng(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ld(t.type,t.memoizedProps)),e&&(e=Pt)){if(zd(t))throw Xv(),Error(z(418));for(;e;)Yv(t,e),e=gr(e.nextSibling)}if(Ng(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pt=gr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pt=null}}else Pt=jt?gr(t.stateNode.nextSibling):null;return!0}function Xv(){for(var t=Pt;t;)t=gr(t.nextSibling)}function ei(){Pt=jt=null,Ee=!1}function lf(t){en===null?en=[t]:en.push(t)}var AT=Gn.ReactCurrentBatchConfig;function Bi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ba(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ag(t){var e=t._init;return e(t._payload)}function Jv(t){function e(I,T){if(t){var w=I.deletions;w===null?(I.deletions=[T],I.flags|=16):w.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function r(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function s(I,T){return I=xr(I,T),I.index=0,I.sibling=null,I}function i(I,T,w){return I.index=w,t?(w=I.alternate,w!==null?(w=w.index,w<T?(I.flags|=2,T):w):(I.flags|=2,T)):(I.flags|=1048576,T)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function u(I,T,w,D){return T===null||T.tag!==6?(T=Kc(w,I.mode,D),T.return=I,T):(T=s(T,w),T.return=I,T)}function c(I,T,w,D){var L=w.type;return L===ks?m(I,T,w.props.children,D,w.key):T!==null&&(T.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===nr&&Ag(L)===T.type)?(D=s(T,w.props),D.ref=Bi(I,T,w),D.return=I,D):(D=dl(w.type,w.key,w.props,null,I.mode,D),D.ref=Bi(I,T,w),D.return=I,D)}function d(I,T,w,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==w.containerInfo||T.stateNode.implementation!==w.implementation?(T=Qc(w,I.mode,D),T.return=I,T):(T=s(T,w.children||[]),T.return=I,T)}function m(I,T,w,D,L){return T===null||T.tag!==7?(T=Yr(w,I.mode,D,L),T.return=I,T):(T=s(T,w),T.return=I,T)}function g(I,T,w){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Kc(""+T,I.mode,w),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Ra:return w=dl(T.type,T.key,T.props,null,I.mode,w),w.ref=Bi(I,null,T),w.return=I,w;case Cs:return T=Qc(T,I.mode,w),T.return=I,T;case nr:var D=T._init;return g(I,D(T._payload),w)}if(Qi(T)||Mi(T))return T=Yr(T,I.mode,w,null),T.return=I,T;Ba(I,T)}return null}function p(I,T,w,D){var L=T!==null?T.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return L!==null?null:u(I,T,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ra:return w.key===L?c(I,T,w,D):null;case Cs:return w.key===L?d(I,T,w,D):null;case nr:return L=w._init,p(I,T,L(w._payload),D)}if(Qi(w)||Mi(w))return L!==null?null:m(I,T,w,D,null);Ba(I,w)}return null}function x(I,T,w,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return I=I.get(w)||null,u(T,I,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ra:return I=I.get(D.key===null?w:D.key)||null,c(T,I,D,L);case Cs:return I=I.get(D.key===null?w:D.key)||null,d(T,I,D,L);case nr:var M=D._init;return x(I,T,w,M(D._payload),L)}if(Qi(D)||Mi(D))return I=I.get(w)||null,m(T,I,D,L,null);Ba(T,D)}return null}function S(I,T,w,D){for(var L=null,M=null,b=T,y=T=0,E=null;b!==null&&y<w.length;y++){b.index>y?(E=b,b=null):E=b.sibling;var _=p(I,b,w[y],D);if(_===null){b===null&&(b=E);break}t&&b&&_.alternate===null&&e(I,b),T=i(_,T,y),M===null?L=_:M.sibling=_,M=_,b=E}if(y===w.length)return n(I,b),Ee&&Ur(I,y),L;if(b===null){for(;y<w.length;y++)b=g(I,w[y],D),b!==null&&(T=i(b,T,y),M===null?L=b:M.sibling=b,M=b);return Ee&&Ur(I,y),L}for(b=r(I,b);y<w.length;y++)E=x(b,I,y,w[y],D),E!==null&&(t&&E.alternate!==null&&b.delete(E.key===null?y:E.key),T=i(E,T,y),M===null?L=E:M.sibling=E,M=E);return t&&b.forEach(function(k){return e(I,k)}),Ee&&Ur(I,y),L}function A(I,T,w,D){var L=Mi(w);if(typeof L!="function")throw Error(z(150));if(w=L.call(w),w==null)throw Error(z(151));for(var M=L=null,b=T,y=T=0,E=null,_=w.next();b!==null&&!_.done;y++,_=w.next()){b.index>y?(E=b,b=null):E=b.sibling;var k=p(I,b,_.value,D);if(k===null){b===null&&(b=E);break}t&&b&&k.alternate===null&&e(I,b),T=i(k,T,y),M===null?L=k:M.sibling=k,M=k,b=E}if(_.done)return n(I,b),Ee&&Ur(I,y),L;if(b===null){for(;!_.done;y++,_=w.next())_=g(I,_.value,D),_!==null&&(T=i(_,T,y),M===null?L=_:M.sibling=_,M=_);return Ee&&Ur(I,y),L}for(b=r(I,b);!_.done;y++,_=w.next())_=x(b,I,y,_.value,D),_!==null&&(t&&_.alternate!==null&&b.delete(_.key===null?y:_.key),T=i(_,T,y),M===null?L=_:M.sibling=_,M=_);return t&&b.forEach(function(R){return e(I,R)}),Ee&&Ur(I,y),L}function C(I,T,w,D){if(typeof w=="object"&&w!==null&&w.type===ks&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ra:e:{for(var L=w.key,M=T;M!==null;){if(M.key===L){if(L=w.type,L===ks){if(M.tag===7){n(I,M.sibling),T=s(M,w.props.children),T.return=I,I=T;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===nr&&Ag(L)===M.type){n(I,M.sibling),T=s(M,w.props),T.ref=Bi(I,M,w),T.return=I,I=T;break e}n(I,M);break}else e(I,M);M=M.sibling}w.type===ks?(T=Yr(w.props.children,I.mode,D,w.key),T.return=I,I=T):(D=dl(w.type,w.key,w.props,null,I.mode,D),D.ref=Bi(I,T,w),D.return=I,I=D)}return o(I);case Cs:e:{for(M=w.key;T!==null;){if(T.key===M)if(T.tag===4&&T.stateNode.containerInfo===w.containerInfo&&T.stateNode.implementation===w.implementation){n(I,T.sibling),T=s(T,w.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=Qc(w,I.mode,D),T.return=I,I=T}return o(I);case nr:return M=w._init,C(I,T,M(w._payload),D)}if(Qi(w))return S(I,T,w,D);if(Mi(w))return A(I,T,w,D);Ba(I,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,T!==null&&T.tag===6?(n(I,T.sibling),T=s(T,w),T.return=I,I=T):(n(I,T),T=Kc(w,I.mode,D),T.return=I,I=T),o(I)):n(I,T)}return C}var ti=Jv(!0),Zv=Jv(!1),Ol=Pr(null),Vl=null,Ms=null,uf=null;function cf(){uf=Ms=Vl=null}function df(t){var e=Ol.current;we(Ol),t._currentValue=e}function Bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ws(t,e){Vl=t,uf=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(It=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(uf!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Vl===null)throw Error(z(308));Ms=t,Vl.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var qr=null;function hf(t){qr===null?qr=[t]:qr.push(t)}function e_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,hf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var rr=!1;function ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function yr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,hf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}function Cg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var s=t.updateQueue;rr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==o&&(u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,m=d=c=null,u=i;do{var p=u.lane,x=u.eventTime;if((r&p)===p){m!==null&&(m=m.next={eventTime:x,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var S=t,A=u;switch(p=e,x=n,A.tag){case 1:if(S=A.payload,typeof S=="function"){g=S.call(x,g,p);break e}g=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=A.payload,p=typeof S=="function"?S.call(x,g,p):S,p==null)break e;g=Se({},g,p);break e;case 2:rr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[u]:p.push(u))}else x={eventTime:x,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(d=m=x,c=g):m=m.next=x,o|=p;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;p=u,u=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(m===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ns|=o,t.lanes=o,t.memoizedState=g}}function kg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ta={},gn=Pr(ta),Ro=Pr(ta),jo=Pr(ta);function Wr(t){if(t===ta)throw Error(z(174));return t}function mf(t,e){switch(ge(jo,e),ge(Ro,t),ge(gn,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Id(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Id(e,t)}we(gn),ge(gn,e)}function ni(){we(gn),we(Ro),we(jo)}function n_(t){Wr(jo.current);var e=Wr(gn.current),n=Id(e,t.type);e!==n&&(ge(Ro,t),ge(gn,n))}function pf(t){Ro.current===t&&(we(gn),we(Ro))}var Te=Pr(0);function Ml(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $c=[];function gf(){for(var t=0;t<$c.length;t++)$c[t]._workInProgressVersionPrimary=null;$c.length=0}var ol=Gn.ReactCurrentDispatcher,Bc=Gn.ReactCurrentBatchConfig,ts=0,be=null,Le=null,Be=null,Fl=!1,uo=!1,Do=0,CT=0;function rt(){throw Error(z(321))}function yf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function vf(t,e,n,r,s,i){if(ts=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?jT:DT,t=n(r,s),uo){i=0;do{if(uo=!1,Do=0,25<=i)throw Error(z(301));i+=1,Be=Le=null,e.updateQueue=null,ol.current=OT,t=n(r,s)}while(uo)}if(ol.current=Ul,e=Le!==null&&Le.next!==null,ts=0,Be=Le=be=null,Fl=!1,e)throw Error(z(300));return t}function _f(){var t=Do!==0;return Do=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?be.memoizedState=Be=t:Be=Be.next=t,Be}function Gt(){if(Le===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Le.next;var e=Be===null?be.memoizedState:Be.next;if(e!==null)Be=e,Le=t;else{if(t===null)throw Error(z(310));Le=t,t={memoizedState:Le.memoizedState,baseState:Le.baseState,baseQueue:Le.baseQueue,queue:Le.queue,next:null},Be===null?be.memoizedState=Be=t:Be=Be.next=t}return Be}function Oo(t,e){return typeof e=="function"?e(t):e}function qc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Le,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var m=d.lane;if((ts&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,o=r):c=c.next=g,be.lanes|=m,ns|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,on(r,e.memoizedState)||(It=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,ns|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wc(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);on(i,e.memoizedState)||(It=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r_(){}function s_(t,e){var n=be,r=Gt(),s=e(),i=!on(r.memoizedState,s);if(i&&(r.memoizedState=s,It=!0),r=r.queue,xf(a_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,Vo(9,o_.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(z(349));ts&30||i_(n,e,s)}return s}function i_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o_(t,e,n,r){e.value=n,e.getSnapshot=r,l_(e)&&u_(t)}function a_(t,e,n){return n(function(){l_(e)&&u_(t)})}function l_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function u_(t){var e=zn(t,1);e!==null&&rn(e,t,1,-1)}function Pg(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},e.queue=t,t=t.dispatch=RT.bind(null,be,t),[e.memoizedState,t]}function Vo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function c_(){return Gt().memoizedState}function al(t,e,n,r){var s=fn();be.flags|=t,s.memoizedState=Vo(1|e,n,void 0,r===void 0?null:r)}function wu(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Le!==null){var o=Le.memoizedState;if(i=o.destroy,r!==null&&yf(r,o.deps)){s.memoizedState=Vo(e,n,i,r);return}}be.flags|=t,s.memoizedState=Vo(1|e,n,i,r)}function Rg(t,e){return al(8390656,8,t,e)}function xf(t,e){return wu(2048,8,t,e)}function d_(t,e){return wu(4,2,t,e)}function h_(t,e){return wu(4,4,t,e)}function f_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function m_(t,e,n){return n=n!=null?n.concat([t]):null,wu(4,4,f_.bind(null,e,t),n)}function wf(){}function p_(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g_(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y_(t,e,n){return ts&21?(on(n,e)||(n=Ev(),be.lanes|=n,ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,It=!0),t.memoizedState=n)}function kT(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Bc.transition;Bc.transition={};try{t(!1),e()}finally{de=n,Bc.transition=r}}function v_(){return Gt().memoizedState}function PT(t,e,n){var r=_r(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},__(t))x_(e,n);else if(n=e_(t,e,n,r),n!==null){var s=yt();rn(n,t,r,s),w_(n,e,r)}}function RT(t,e,n){var r=_r(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(__(t))x_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,on(u,o)){var c=e.interleaved;c===null?(s.next=s,hf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=e_(t,e,s,r),n!==null&&(s=yt(),rn(n,t,r,s),w_(n,e,r))}}function __(t){var e=t.alternate;return t===be||e!==null&&e===be}function x_(t,e){uo=Fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xh(t,n)}}var Ul={readContext:Ht,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},jT={readContext:Ht,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:Rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,al(4194308,4,f_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){return al(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=PT.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:Pg,useDebugValue:wf,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=Pg(!1),e=t[0];return t=kT.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=fn();if(Ee){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),qe===null)throw Error(z(349));ts&30||i_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Rg(a_.bind(null,r,i,t),[t]),r.flags|=2048,Vo(9,o_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fn(),e=qe.identifierPrefix;if(Ee){var n=Rn,r=Pn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Do++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DT={readContext:Ht,useCallback:p_,useContext:Ht,useEffect:xf,useImperativeHandle:m_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:qc,useRef:c_,useState:function(){return qc(Oo)},useDebugValue:wf,useDeferredValue:function(t){var e=Gt();return y_(e,Le.memoizedState,t)},useTransition:function(){var t=qc(Oo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:r_,useSyncExternalStore:s_,useId:v_,unstable_isNewReconciler:!1},OT={readContext:Ht,useCallback:p_,useContext:Ht,useEffect:xf,useImperativeHandle:m_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:Wc,useRef:c_,useState:function(){return Wc(Oo)},useDebugValue:wf,useDeferredValue:function(t){var e=Gt();return Le===null?e.memoizedState=t:y_(e,Le.memoizedState,t)},useTransition:function(){var t=Wc(Oo)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:r_,useSyncExternalStore:s_,useId:v_,unstable_isNewReconciler:!1};function Jt(t,e){if(t&&t.defaultProps){e=Se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Eu={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yt(),s=_r(t),i=Vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(rn(e,t,s,r),il(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yt(),s=_r(t),i=Vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=yr(t,i,s),e!==null&&(rn(e,t,s,r),il(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yt(),r=_r(t),s=Vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=yr(t,s,r),e!==null&&(rn(e,t,r,n),il(e,t,r))}};function jg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ao(n,r)||!Ao(s,i):!0}function E_(t,e,n){var r=!1,s=Sr,i=e.contextType;return typeof i=="object"&&i!==null?i=Ht(i):(s=bt(e)?Zr:dt.current,r=e.contextTypes,i=(r=r!=null)?Zs(t,s):Sr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Dg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Eu.enqueueReplaceState(e,e.state,null)}function Wd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ff(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ht(i):(i=bt(e)?Zr:dt.current,s.context=Zs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Eu.enqueueReplaceState(s,s.state,null),Ll(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ri(t,e){try{var n="",r=e;do n+=uI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VT=typeof WeakMap=="function"?WeakMap:Map;function I_(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$l||($l=!0,nh=r),Hd(t,e)},n}function T_(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Hd(t,e),typeof r!="function"&&(vr===null?vr=new Set([this]):vr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VT;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=YT.bind(null,t,e,n),e.then(t,t))}function Vg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Lg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,yr(n,e,1))),n.lanes|=1),t)}var LT=Gn.ReactCurrentOwner,It=!1;function pt(t,e,n,r){e.child=t===null?Zv(e,null,n,r):ti(e,t.child,n,r)}function Mg(t,e,n,r,s){n=n.render;var i=e.ref;return Ws(e,s),r=vf(t,e,n,r,i,s),n=_f(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Ee&&n&&of(e),e.flags|=1,pt(t,e,r,s),e.child)}function Fg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Cf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,b_(t,e,i,r,s)):(t=dl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ao,n(o,r)&&t.ref===e.ref)return $n(t,e,s)}return e.flags|=1,t=xr(i,r),t.ref=e.ref,t.return=e,e.child=t}function b_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ao(i,r)&&t.ref===e.ref)if(It=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(It=!0);else return e.lanes=t.lanes,$n(t,e,s)}return Gd(t,e,n,r,s)}function S_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Us,kt),kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Us,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(Us,kt),kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(Us,kt),kt|=r;return pt(t,e,s,n),e.child}function N_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gd(t,e,n,r,s){var i=bt(n)?Zr:dt.current;return i=Zs(e,i),Ws(e,s),n=vf(t,e,n,r,i,s),r=_f(),t!==null&&!It?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,$n(t,e,s)):(Ee&&r&&of(e),e.flags|=1,pt(t,e,n,s),e.child)}function Ug(t,e,n,r,s){if(bt(n)){var i=!0;Rl(e)}else i=!1;if(Ws(e,s),e.stateNode===null)ll(t,e),E_(e,n,r),Wd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ht(d):(d=bt(n)?Zr:dt.current,d=Zs(e,d));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Dg(e,o,r,d),rr=!1;var p=e.memoizedState;o.state=p,Ll(e,r,o,s),c=e.memoizedState,u!==r||p!==c||Tt.current||rr?(typeof m=="function"&&(qd(e,n,m,r),c=e.memoizedState),(u=rr||jg(e,n,u,r,p,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t_(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:Jt(e.type,u),o.props=d,g=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ht(c):(c=bt(n)?Zr:dt.current,c=Zs(e,c));var x=n.getDerivedStateFromProps;(m=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==g||p!==c)&&Dg(e,o,r,c),rr=!1,p=e.memoizedState,o.state=p,Ll(e,r,o,s);var S=e.memoizedState;u!==g||p!==S||Tt.current||rr?(typeof x=="function"&&(qd(e,n,x,r),S=e.memoizedState),(d=rr||jg(e,n,d,r,p,S,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Kd(t,e,n,r,i,s)}function Kd(t,e,n,r,s,i){N_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&bg(e,n,!1),$n(t,e,i);r=e.stateNode,LT.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ti(e,t.child,null,i),e.child=ti(e,null,u,i)):pt(t,e,u,i),e.memoizedState=r.state,s&&bg(e,n,!0),e.child}function A_(t){var e=t.stateNode;e.pendingContext?Tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Tg(t,e.context,!1),mf(t,e.containerInfo)}function zg(t,e,n,r,s){return ei(),lf(s),e.flags|=256,pt(t,e,n,r),e.child}var Qd={dehydrated:null,treeContext:null,retryLane:0};function Yd(t){return{baseLanes:t,cachePool:null,transitions:null}}function C_(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Te,s&1),t===null)return $d(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,r,0,null),t=Yr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Yd(n),e.memoizedState=Qd,t):Ef(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return MT(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=xr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=xr(u,i):(i=Yr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Yd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Qd,r}return i=t.child,t=i.sibling,r=xr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ef(t,e){return e=bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&lf(r),ti(e,t.child,null,n),t=Ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MT(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hc(Error(z(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bu({mode:"visible",children:r.children},s,0,null),i=Yr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ti(e,t.child,null,o),e.child.memoizedState=Yd(o),e.memoizedState=Qd,i);if(!(e.mode&1))return qa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=Hc(i,r,void 0),qa(t,e,o,r)}if(u=(o&t.childLanes)!==0,It||u){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),rn(r,t,s,-1))}return Af(),r=Hc(Error(z(421))),qa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=XT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Pt=gr(s.nextSibling),jt=e,Ee=!0,en=null,t!==null&&(Ut[zt++]=Pn,Ut[zt++]=Rn,Ut[zt++]=es,Pn=t.id,Rn=t.overflow,es=e),e=Ef(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bd(t.return,e,n)}function Gc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function k_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(pt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ml(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ml(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gc(e,!0,n,null,i);break;case"together":Gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=xr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FT(t,e,n){switch(e.tag){case 3:A_(e),ei();break;case 5:n_(e);break;case 1:bt(e.type)&&Rl(e);break;case 4:mf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Ol,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?C_(t,e,n):(ge(Te,Te.current&1),t=$n(t,e,n),t!==null?t.sibling:null);ge(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,S_(t,e,n)}return $n(t,e,n)}var P_,Xd,R_,j_;P_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xd=function(){};R_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wr(gn.current);var i=null;switch(n){case"input":s=_d(t,s),r=_d(t,r),i=[];break;case"select":s=Se({},s,{value:void 0}),r=Se({},r,{value:void 0}),i=[];break;case"textarea":s=Ed(t,s),r=Ed(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=kl)}Td(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&_e("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};j_=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function st(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function UT(t,e,n){var r=e.pendingProps;switch(af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return st(e),null;case 1:return bt(e.type)&&Pl(),st(e),null;case 3:return r=e.stateNode,ni(),we(Tt),we(dt),gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(ih(en),en=null))),Xd(t,e),st(e),null;case 5:pf(e);var s=Wr(jo.current);if(n=e.type,t!==null&&e.stateNode!=null)R_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return st(e),null}if(t=Wr(gn.current),$a(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[mn]=e,r[Po]=i,t=(e.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(s=0;s<Xi.length;s++)_e(Xi[s],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Xp(r,i),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_e("invalid",r);break;case"textarea":Zp(r,i),_e("invalid",r)}Td(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&za(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&za(r.textContent,u,t),s=["children",""+u]):wo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&_e("scroll",r)}switch(n){case"input":ja(r),Jp(r,i,!0);break;case"textarea":ja(r),eg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=kl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=av(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mn]=e,t[Po]=r,P_(t,e,!1,!1),e.stateNode=t;e:{switch(o=bd(n,r),n){case"dialog":_e("cancel",t),_e("close",t),s=r;break;case"iframe":case"object":case"embed":_e("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xi.length;s++)_e(Xi[s],t);s=r;break;case"source":_e("error",t),s=r;break;case"img":case"image":case"link":_e("error",t),_e("load",t),s=r;break;case"details":_e("toggle",t),s=r;break;case"input":Xp(t,r),s=_d(t,r),_e("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Se({},r,{value:void 0}),_e("invalid",t);break;case"textarea":Zp(t,r),s=Ed(t,r),_e("invalid",t);break;default:s=r}Td(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?cv(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lv(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Eo(t,c):typeof c=="number"&&Eo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(wo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&_e("scroll",t):c!=null&&Wh(t,i,c,o))}switch(n){case"input":ja(t),Jp(t,r,!1);break;case"textarea":ja(t),eg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+br(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?zs(t,!!r.multiple,i,!1):r.defaultValue!=null&&zs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return st(e),null;case 6:if(t&&e.stateNode!=null)j_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Wr(jo.current),Wr(gn.current),$a(e)){if(r=e.stateNode,n=e.memoizedProps,r[mn]=e,(i=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:za(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&za(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mn]=e,e.stateNode=r}return st(e),null;case 13:if(we(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Pt!==null&&e.mode&1&&!(e.flags&128))Xv(),ei(),e.flags|=98560,i=!1;else if(i=$a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[mn]=e}else ei(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;st(e),i=!1}else en!==null&&(ih(en),en=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Me===0&&(Me=3):Af())),e.updateQueue!==null&&(e.flags|=4),st(e),null);case 4:return ni(),Xd(t,e),t===null&&Co(e.stateNode.containerInfo),st(e),null;case 10:return df(e.type._context),st(e),null;case 17:return bt(e.type)&&Pl(),st(e),null;case 19:if(we(Te),i=e.memoizedState,i===null)return st(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qi(i,!1);else{if(Me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ml(t),o!==null){for(e.flags|=128,qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>si&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ml(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return st(e),null}else 2*Pe()-i.renderingStartTime>si&&n!==1073741824&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Te.current,ge(Te,r?n&1|2:n&1),e):(st(e),null);case 22:case 23:return Nf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(st(e),e.subtreeFlags&6&&(e.flags|=8192)):st(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function zT(t,e){switch(af(e),e.tag){case 1:return bt(e.type)&&Pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ni(),we(Tt),we(dt),gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(we(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ei()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Te),null;case 4:return ni(),null;case 10:return df(e.type._context),null;case 22:case 23:return Nf(),null;case 24:return null;default:return null}}var Wa=!1,ut=!1,$T=typeof WeakSet=="function"?WeakSet:Set,W=null;function Fs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Jd(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var Bg=!1;function BT(t,e){if(Od=Nl,t=Mv(),sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,m=0,g=t,p=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(u=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)p=g,g=x;for(;;){if(g===t)break t;if(p===n&&++d===s&&(u=o),p===i&&++m===r&&(c=o),(x=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=x}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vd={focusedElem:t,selectionRange:n},Nl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var A=S.memoizedProps,C=S.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?A:Jt(e.type,A),C);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(D){Ce(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return S=Bg,Bg=!1,S}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jd(e,n,i)}s=s.next}while(s!==r)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D_(t){var e=t.alternate;e!==null&&(t.alternate=null,D_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mn],delete e[Po],delete e[Fd],delete e[bT],delete e[ST])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O_(t){return t.tag===5||t.tag===3||t.tag===4}function qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=kl));else if(r!==4&&(t=t.child,t!==null))for(eh(t,e,n),t=t.sibling;t!==null;)eh(t,e,n),t=t.sibling}function th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(th(t,e,n),t=t.sibling;t!==null;)th(t,e,n),t=t.sibling}var He=null,Zt=!1;function er(t,e,n){for(n=n.child;n!==null;)V_(t,e,n),n=n.sibling}function V_(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(pu,n)}catch{}switch(n.tag){case 5:ut||Fs(n,e);case 6:var r=He,s=Zt;He=null,er(t,e,n),He=r,Zt=s,He!==null&&(Zt?(t=He,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):He.removeChild(n.stateNode));break;case 18:He!==null&&(Zt?(t=He,n=n.stateNode,t.nodeType===8?Uc(t.parentNode,n):t.nodeType===1&&Uc(t,n),So(t)):Uc(He,n.stateNode));break;case 4:r=He,s=Zt,He=n.stateNode.containerInfo,Zt=!0,er(t,e,n),He=r,Zt=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jd(n,e,o),s=s.next}while(s!==r)}er(t,e,n);break;case 1:if(!ut&&(Fs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ce(n,e,u)}er(t,e,n);break;case 21:er(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,er(t,e,n),ut=r):er(t,e,n);break;default:er(t,e,n)}}function Wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $T),e.forEach(function(r){var s=JT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:He=u.stateNode,Zt=!1;break e;case 3:He=u.stateNode.containerInfo,Zt=!0;break e;case 4:He=u.stateNode.containerInfo,Zt=!0;break e}u=u.return}if(He===null)throw Error(z(160));V_(i,o,s),He=null,Zt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)L_(e,t),e=e.sibling}function L_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),hn(t),r&4){try{co(3,t,t.return),Iu(3,t)}catch(A){Ce(t,t.return,A)}try{co(5,t,t.return)}catch(A){Ce(t,t.return,A)}}break;case 1:Xt(e,t),hn(t),r&512&&n!==null&&Fs(n,n.return);break;case 5:if(Xt(e,t),hn(t),r&512&&n!==null&&Fs(n,n.return),t.flags&32){var s=t.stateNode;try{Eo(s,"")}catch(A){Ce(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&iv(s,i),bd(u,o);var d=bd(u,i);for(o=0;o<c.length;o+=2){var m=c[o],g=c[o+1];m==="style"?cv(s,g):m==="dangerouslySetInnerHTML"?lv(s,g):m==="children"?Eo(s,g):Wh(s,m,g,d)}switch(u){case"input":xd(s,i);break;case"textarea":ov(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?zs(s,!!i.multiple,x,!1):p!==!!i.multiple&&(i.defaultValue!=null?zs(s,!!i.multiple,i.defaultValue,!0):zs(s,!!i.multiple,i.multiple?[]:"",!1))}s[Po]=i}catch(A){Ce(t,t.return,A)}}break;case 6:if(Xt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Ce(t,t.return,A)}}break;case 3:if(Xt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(A){Ce(t,t.return,A)}break;case 4:Xt(e,t),hn(t);break;case 13:Xt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bf=Pe())),r&4&&Wg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||m,Xt(e,t),ut=d):Xt(e,t),hn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(W=t,m=t.child;m!==null;){for(g=W=m;W!==null;){switch(p=W,x=p.child,p.tag){case 0:case 11:case 14:case 15:co(4,p,p.return);break;case 1:Fs(p,p.return);var S=p.stateNode;if(typeof S.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(A){Ce(r,n,A)}}break;case 5:Fs(p,p.return);break;case 22:if(p.memoizedState!==null){Gg(g);continue}}x!==null?(x.return=p,W=x):Gg(g)}m=m.sibling}e:for(m=null,g=t;;){if(g.tag===5){if(m===null){m=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=uv("display",o))}catch(A){Ce(t,t.return,A)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(A){Ce(t,t.return,A)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Xt(e,t),hn(t),r&4&&Wg(t);break;case 21:break;default:Xt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(O_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Eo(s,""),r.flags&=-33);var i=qg(t);th(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=qg(t);eh(t,u,o);break;default:throw Error(z(161))}}catch(c){Ce(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qT(t,e,n){W=t,M_(t)}function M_(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wa;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ut;u=Wa;var d=ut;if(Wa=o,(ut=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?Kg(s):c!==null?(c.return=o,W=c):Kg(s);for(;i!==null;)W=i,M_(i),i=i.sibling;W=s,Wa=u,ut=d}Hg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Hg(t)}}function Hg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Iu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Jt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kg(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&So(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&Zd(e)}catch(p){Ce(e,e.return,p)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Gg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Kg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(c){Ce(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ce(e,s,c)}}var i=e.return;try{Zd(e)}catch(c){Ce(e,i,c)}break;case 5:var o=e.return;try{Zd(e)}catch(c){Ce(e,o,c)}}}catch(c){Ce(e,e.return,c)}if(e===t){W=null;break}var u=e.sibling;if(u!==null){u.return=e.return,W=u;break}W=e.return}}var WT=Math.ceil,zl=Gn.ReactCurrentDispatcher,If=Gn.ReactCurrentOwner,Bt=Gn.ReactCurrentBatchConfig,oe=0,qe=null,De=null,Qe=0,kt=0,Us=Pr(0),Me=0,Lo=null,ns=0,Tu=0,Tf=0,ho=null,wt=null,bf=0,si=1/0,bn=null,$l=!1,nh=null,vr=null,Ha=!1,cr=null,Bl=0,fo=0,rh=null,ul=-1,cl=0;function yt(){return oe&6?Pe():ul!==-1?ul:ul=Pe()}function _r(t){return t.mode&1?oe&2&&Qe!==0?Qe&-Qe:AT.transition!==null?(cl===0&&(cl=Ev()),cl):(t=de,t!==0||(t=window.event,t=t===void 0?16:Cv(t.type)),t):1}function rn(t,e,n,r){if(50<fo)throw fo=0,rh=null,Error(z(185));Jo(t,n,r),(!(oe&2)||t!==qe)&&(t===qe&&(!(oe&2)&&(Tu|=n),Me===4&&ir(t,Qe)),St(t,r),n===1&&oe===0&&!(e.mode&1)&&(si=Pe()+500,xu&&Rr()))}function St(t,e){var n=t.callbackNode;AI(t,e);var r=Sl(t,t===qe?Qe:0);if(r===0)n!==null&&rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rg(n),e===1)t.tag===0?NT(Qg.bind(null,t)):Kv(Qg.bind(null,t)),IT(function(){!(oe&6)&&Rr()}),n=null;else{switch(Iv(r)){case 1:n=Yh;break;case 4:n=xv;break;case 16:n=bl;break;case 536870912:n=wv;break;default:n=bl}n=H_(n,F_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F_(t,e){if(ul=-1,cl=0,oe&6)throw Error(z(327));var n=t.callbackNode;if(Hs()&&t.callbackNode!==n)return null;var r=Sl(t,t===qe?Qe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var s=oe;oe|=2;var i=z_();(qe!==t||Qe!==e)&&(bn=null,si=Pe()+500,Qr(t,e));do try{KT();break}catch(u){U_(t,u)}while(!0);cf(),zl.current=i,oe=s,De!==null?e=0:(qe=null,Qe=0,e=Me)}if(e!==0){if(e===2&&(s=kd(t),s!==0&&(r=s,e=sh(t,s))),e===1)throw n=Lo,Qr(t,0),ir(t,r),St(t,Pe()),n;if(e===6)ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!HT(s)&&(e=ql(t,r),e===2&&(i=kd(t),i!==0&&(r=i,e=sh(t,i))),e===1))throw n=Lo,Qr(t,0),ir(t,r),St(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:zr(t,wt,bn);break;case 3:if(ir(t,r),(r&130023424)===r&&(e=bf+500-Pe(),10<e)){if(Sl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Md(zr.bind(null,t,wt,bn),e);break}zr(t,wt,bn);break;case 4:if(ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-nn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WT(r/1960))-r,10<r){t.timeoutHandle=Md(zr.bind(null,t,wt,bn),r);break}zr(t,wt,bn);break;case 5:zr(t,wt,bn);break;default:throw Error(z(329))}}}return St(t,Pe()),t.callbackNode===n?F_.bind(null,t):null}function sh(t,e){var n=ho;return t.current.memoizedState.isDehydrated&&(Qr(t,e).flags|=256),t=ql(t,e),t!==2&&(e=wt,wt=n,e!==null&&ih(e)),t}function ih(t){wt===null?wt=t:wt.push.apply(wt,t)}function HT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!on(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ir(t,e){for(e&=~Tf,e&=~Tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function Qg(t){if(oe&6)throw Error(z(327));Hs();var e=Sl(t,0);if(!(e&1))return St(t,Pe()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=kd(t);r!==0&&(e=r,n=sh(t,r))}if(n===1)throw n=Lo,Qr(t,0),ir(t,e),St(t,Pe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zr(t,wt,bn),St(t,Pe()),null}function Sf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(si=Pe()+500,xu&&Rr())}}function rs(t){cr!==null&&cr.tag===0&&!(oe&6)&&Hs();var e=oe;oe|=1;var n=Bt.transition,r=de;try{if(Bt.transition=null,de=1,t)return t()}finally{de=r,Bt.transition=n,oe=e,!(oe&6)&&Rr()}}function Nf(){kt=Us.current,we(Us)}function Qr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ET(n)),De!==null)for(n=De.return;n!==null;){var r=n;switch(af(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pl();break;case 3:ni(),we(Tt),we(dt),gf();break;case 5:pf(r);break;case 4:ni();break;case 13:we(Te);break;case 19:we(Te);break;case 10:df(r.type._context);break;case 22:case 23:Nf()}n=n.return}if(qe=t,De=t=xr(t.current,null),Qe=kt=e,Me=0,Lo=null,Tf=Tu=ns=0,wt=ho=null,qr!==null){for(e=0;e<qr.length;e++)if(n=qr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}qr=null}return t}function U_(t,e){do{var n=De;try{if(cf(),ol.current=Ul,Fl){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fl=!1}if(ts=0,Be=Le=be=null,uo=!1,Do=0,If.current=null,n===null||n.return===null){Me=1,Lo=e,De=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Qe,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=u,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var p=m.alternate;p?(m.updateQueue=p.updateQueue,m.memoizedState=p.memoizedState,m.lanes=p.lanes):(m.updateQueue=null,m.memoizedState=null)}var x=Vg(o);if(x!==null){x.flags&=-257,Lg(x,o,u,i,e),x.mode&1&&Og(i,d,e),e=x,c=d;var S=e.updateQueue;if(S===null){var A=new Set;A.add(c),e.updateQueue=A}else S.add(c);break e}else{if(!(e&1)){Og(i,d,e),Af();break e}c=Error(z(426))}}else if(Ee&&u.mode&1){var C=Vg(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Lg(C,o,u,i,e),lf(ri(c,u));break e}}i=c=ri(c,u),Me!==4&&(Me=2),ho===null?ho=[i]:ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var I=I_(i,c,e);Cg(i,I);break e;case 1:u=c;var T=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(vr===null||!vr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var D=T_(i,u,e);Cg(i,D);break e}}i=i.return}while(i!==null)}B_(n)}catch(L){e=L,De===n&&n!==null&&(De=n=n.return);continue}break}while(!0)}function z_(){var t=zl.current;return zl.current=Ul,t===null?Ul:t}function Af(){(Me===0||Me===3||Me===2)&&(Me=4),qe===null||!(ns&268435455)&&!(Tu&268435455)||ir(qe,Qe)}function ql(t,e){var n=oe;oe|=2;var r=z_();(qe!==t||Qe!==e)&&(bn=null,Qr(t,e));do try{GT();break}catch(s){U_(t,s)}while(!0);if(cf(),oe=n,zl.current=r,De!==null)throw Error(z(261));return qe=null,Qe=0,Me}function GT(){for(;De!==null;)$_(De)}function KT(){for(;De!==null&&!_I();)$_(De)}function $_(t){var e=W_(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?B_(t):De=e,If.current=null}function B_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=zT(n,e),n!==null){n.flags&=32767,De=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Me=6,De=null;return}}else if(n=UT(n,e,kt),n!==null){De=n;return}if(e=e.sibling,e!==null){De=e;return}De=e=t}while(e!==null);Me===0&&(Me=5)}function zr(t,e,n){var r=de,s=Bt.transition;try{Bt.transition=null,de=1,QT(t,e,n,r)}finally{Bt.transition=s,de=r}return null}function QT(t,e,n,r){do Hs();while(cr!==null);if(oe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(CI(t,i),t===qe&&(De=qe=null,Qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,H_(bl,function(){return Hs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Bt.transition,Bt.transition=null;var o=de;de=1;var u=oe;oe|=4,If.current=null,BT(t,n),L_(n,t),pT(Vd),Nl=!!Od,Vd=Od=null,t.current=n,qT(n),xI(),oe=u,de=o,Bt.transition=i}else t.current=n;if(Ha&&(Ha=!1,cr=t,Bl=s),i=t.pendingLanes,i===0&&(vr=null),II(n.stateNode),St(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($l)throw $l=!1,t=nh,nh=null,t;return Bl&1&&t.tag!==0&&Hs(),i=t.pendingLanes,i&1?t===rh?fo++:(fo=0,rh=t):fo=0,Rr(),null}function Hs(){if(cr!==null){var t=Iv(Bl),e=Bt.transition,n=de;try{if(Bt.transition=null,de=16>t?16:t,cr===null)var r=!1;else{if(t=cr,cr=null,Bl=0,oe&6)throw Error(z(331));var s=oe;for(oe|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(W=d;W!==null;){var m=W;switch(m.tag){case 0:case 11:case 15:co(8,m,i)}var g=m.child;if(g!==null)g.return=m,W=g;else for(;W!==null;){m=W;var p=m.sibling,x=m.return;if(D_(m),m===d){W=null;break}if(p!==null){p.return=x,W=p;break}W=x}}}var S=i.alternate;if(S!==null){var A=S.child;if(A!==null){S.child=null;do{var C=A.sibling;A.sibling=null,A=C}while(A!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:co(9,i,i.return)}var I=i.sibling;if(I!==null){I.return=i.return,W=I;break e}W=i.return}}var T=t.current;for(W=T;W!==null;){o=W;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,W=w;else e:for(o=T;W!==null;){if(u=W,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Iu(9,u)}}catch(L){Ce(u,u.return,L)}if(u===o){W=null;break e}var D=u.sibling;if(D!==null){D.return=u.return,W=D;break e}W=u.return}}if(oe=s,Rr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(pu,t)}catch{}r=!0}return r}finally{de=n,Bt.transition=e}}return!1}function Yg(t,e,n){e=ri(n,e),e=I_(t,e,1),t=yr(t,e,1),e=yt(),t!==null&&(Jo(t,1,e),St(t,e))}function Ce(t,e,n){if(t.tag===3)Yg(t,t,n);else for(;e!==null;){if(e.tag===3){Yg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(vr===null||!vr.has(r))){t=ri(n,t),t=T_(e,t,1),e=yr(e,t,1),t=yt(),e!==null&&(Jo(e,1,t),St(e,t));break}}e=e.return}}function YT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Qe&n)===n&&(Me===4||Me===3&&(Qe&130023424)===Qe&&500>Pe()-bf?Qr(t,0):Tf|=n),St(t,e)}function q_(t,e){e===0&&(t.mode&1?(e=Va,Va<<=1,!(Va&130023424)&&(Va=4194304)):e=1);var n=yt();t=zn(t,e),t!==null&&(Jo(t,e,n),St(t,n))}function XT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q_(t,n)}function JT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),q_(t,n)}var W_;W_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)It=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return It=!1,FT(t,e,n);It=!!(t.flags&131072)}else It=!1,Ee&&e.flags&1048576&&Qv(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ll(t,e),t=e.pendingProps;var s=Zs(e,dt.current);Ws(e,n),s=vf(null,e,r,t,s,n);var i=_f();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Rl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ff(e),s.updater=Eu,e.stateNode=s,s._reactInternals=e,Wd(e,r,t,n),e=Kd(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&of(e),pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ll(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=eb(r),t=Jt(r,t),s){case 0:e=Gd(null,e,r,t,n);break e;case 1:e=Ug(null,e,r,t,n);break e;case 11:e=Mg(null,e,r,t,n);break e;case 14:e=Fg(null,e,r,Jt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Gd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Ug(t,e,r,s,n);case 3:e:{if(A_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t_(t,e),Ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ri(Error(z(423)),e),e=zg(t,e,r,n,s);break e}else if(r!==s){s=ri(Error(z(424)),e),e=zg(t,e,r,n,s);break e}else for(Pt=gr(e.stateNode.containerInfo.firstChild),jt=e,Ee=!0,en=null,n=Zv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ei(),r===s){e=$n(t,e,n);break e}pt(t,e,r,n)}e=e.child}return e;case 5:return n_(e),t===null&&$d(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ld(r,s)?o=null:i!==null&&Ld(r,i)&&(e.flags|=32),N_(t,e),pt(t,e,o,n),e.child;case 6:return t===null&&$d(e),null;case 13:return C_(t,e,n);case 4:return mf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ti(e,null,r,n):pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),Mg(t,e,r,s,n);case 7:return pt(t,e,e.pendingProps,n),e.child;case 8:return pt(t,e,e.pendingProps.children,n),e.child;case 12:return pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(Ol,r._currentValue),r._currentValue=o,i!==null)if(on(i.value,o)){if(i.children===s.children&&!Tt.current){e=$n(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bd(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Bd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ws(e,n),s=Ht(s),r=r(s),e.flags|=1,pt(t,e,r,n),e.child;case 14:return r=e.type,s=Jt(r,e.pendingProps),s=Jt(r.type,s),Fg(t,e,r,s,n);case 15:return b_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Jt(r,s),ll(t,e),e.tag=1,bt(r)?(t=!0,Rl(e)):t=!1,Ws(e,n),E_(e,r,s),Wd(e,r,s,n),Kd(null,e,r,!0,t,n);case 19:return k_(t,e,n);case 22:return S_(t,e,n)}throw Error(z(156,e.tag))};function H_(t,e){return _v(t,e)}function ZT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new ZT(t,e,n,r)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eb(t){if(typeof t=="function")return Cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gh)return 11;if(t===Kh)return 14}return 2}function xr(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function dl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Cf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ks:return Yr(n.children,s,i,e);case Hh:o=8,s|=8;break;case pd:return t=$t(12,n,e,s|2),t.elementType=pd,t.lanes=i,t;case gd:return t=$t(13,n,e,s),t.elementType=gd,t.lanes=i,t;case yd:return t=$t(19,n,e,s),t.elementType=yd,t.lanes=i,t;case nv:return bu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ev:o=10;break e;case tv:o=9;break e;case Gh:o=11;break e;case Kh:o=14;break e;case nr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Yr(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function bu(t,e,n,r){return t=$t(22,t,r,e),t.elementType=nv,t.lanes=n,t.stateNode={isHidden:!1},t}function Kc(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function Qc(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kf(t,e,n,r,s,i,o,u,c){return t=new tb(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$t(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ff(i),t}function nb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function G_(t){if(!t)return Sr;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(bt(n))return Gv(t,n,e)}return e}function K_(t,e,n,r,s,i,o,u,c){return t=kf(n,r,!0,t,s,i,o,u,c),t.context=G_(null),n=t.current,r=yt(),s=_r(n),i=Vn(r,s),i.callback=e??null,yr(n,i,s),t.current.lanes=s,Jo(t,s,r),St(t,r),t}function Su(t,e,n,r){var s=e.current,i=yt(),o=_r(s);return n=G_(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=yr(s,e,o),t!==null&&(rn(t,s,o,i),il(t,s,o)),o}function Wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pf(t,e){Xg(t,e),(t=t.alternate)&&Xg(t,e)}function rb(){return null}var Q_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rf(t){this._internalRoot=t}Nu.prototype.render=Rf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Su(t,e,null,null)};Nu.prototype.unmount=Rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;rs(function(){Su(null,t,null,null)}),e[Un]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&Av(t)}};function jf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Jg(){}function sb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Wl(o);i.call(d)}}var o=K_(e,r,t,0,null,!1,!1,"",Jg);return t._reactRootContainer=o,t[Un]=o.current,Co(t.nodeType===8?t.parentNode:t),rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Wl(c);u.call(d)}}var c=kf(t,0,!1,null,null,!1,!1,"",Jg);return t._reactRootContainer=c,t[Un]=c.current,Co(t.nodeType===8?t.parentNode:t),rs(function(){Su(e,c,n,r)}),c}function Cu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Wl(o);u.call(c)}}Su(e,o,t,s)}else o=sb(n,e,t,s,r);return Wl(o)}Tv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yi(e.pendingLanes);n!==0&&(Xh(e,n|1),St(e,Pe()),!(oe&6)&&(si=Pe()+500,Rr()))}break;case 13:rs(function(){var r=zn(t,1);if(r!==null){var s=yt();rn(r,t,1,s)}}),Pf(t,1)}};Jh=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=yt();rn(e,t,134217728,n)}Pf(t,134217728)}};bv=function(t){if(t.tag===13){var e=_r(t),n=zn(t,e);if(n!==null){var r=yt();rn(n,t,e,r)}Pf(t,e)}};Sv=function(){return de};Nv=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Nd=function(t,e,n){switch(e){case"input":if(xd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_u(r);if(!s)throw Error(z(90));sv(r),xd(r,s)}}}break;case"textarea":ov(t,n);break;case"select":e=n.value,e!=null&&zs(t,!!n.multiple,e,!1)}};fv=Sf;mv=rs;var ib={usingClientEntryPoint:!1,Events:[ea,Ds,_u,dv,hv,Sf]},Wi={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ob={bundleType:Wi.bundleType,version:Wi.version,rendererPackageName:Wi.rendererPackageName,rendererConfig:Wi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yv(t),t===null?null:t.stateNode},findFiberByHostInstance:Wi.findFiberByHostInstance||rb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{pu=Ga.inject(ob),pn=Ga}catch{}}Vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ib;Vt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jf(e))throw Error(z(200));return nb(t,e,null,n)};Vt.createRoot=function(t,e){if(!jf(t))throw Error(z(299));var n=!1,r="",s=Q_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kf(t,1,!1,null,null,n,!1,r,s),t[Un]=e.current,Co(t.nodeType===8?t.parentNode:t),new Rf(e)};Vt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=yv(e),t=t===null?null:t.stateNode,t};Vt.flushSync=function(t){return rs(t)};Vt.hydrate=function(t,e,n){if(!Au(e))throw Error(z(200));return Cu(null,t,e,!0,n)};Vt.hydrateRoot=function(t,e,n){if(!jf(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Q_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=K_(e,null,t,1,n??null,s,!1,i,o),t[Un]=e.current,Co(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nu(e)};Vt.render=function(t,e,n){if(!Au(e))throw Error(z(200));return Cu(null,t,e,!1,n)};Vt.unmountComponentAtNode=function(t){if(!Au(t))throw Error(z(40));return t._reactRootContainer?(rs(function(){Cu(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Vt.unstable_batchedUpdates=Sf;Vt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Au(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Cu(t,e,n,!1,r)};Vt.version="18.3.1-next-f1338f8080-20240426";function Y_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y_)}catch(t){console.error(t)}}Y_(),Y0.exports=Vt;var ab=Y0.exports,X_,Zg=ab;X_=Zg.createRoot,Zg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}var dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(dr||(dr={}));const ey="popstate";function lb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return oh("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Hl(s)}return cb(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function J_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ub(){return Math.random().toString(36).substr(2,8)}function ty(t,e){return{usr:t.state,key:t.key,idx:e}}function oh(t,e,n,r){return n===void 0&&(n=null),Mo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pi(e):e,{state:n,key:e&&e.key||r||ub()})}function Hl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function pi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=dr.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(Mo({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function g(){u=dr.Pop;let C=m(),I=C==null?null:C-d;d=C,c&&c({action:u,location:A.location,delta:I})}function p(C,I){u=dr.Push;let T=oh(A.location,C,I);d=m()+1;let w=ty(T,d),D=A.createHref(T);try{o.pushState(w,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(D)}i&&c&&c({action:u,location:A.location,delta:1})}function x(C,I){u=dr.Replace;let T=oh(A.location,C,I);d=m();let w=ty(T,d),D=A.createHref(T);o.replaceState(w,"",D),i&&c&&c({action:u,location:A.location,delta:0})}function S(C){let I=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof C=="string"?C:Hl(C);return T=T.replace(/ $/,"%20"),Re(I,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,I)}let A={get action(){return u},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ey,g),c=C,()=>{s.removeEventListener(ey,g),c=null}},createHref(C){return e(s,C)},createURL:S,encodeLocation(C){let I=S(C);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:p,replace:x,go(C){return o.go(C)}};return A}var ny;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ny||(ny={}));function db(t,e,n){return n===void 0&&(n="/"),hb(t,e,n,!1)}function hb(t,e,n,r){let s=typeof e=="string"?pi(e):e,i=Df(s.pathname||"/",n);if(i==null)return null;let o=Z_(t);fb(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=Tb(i);u=Eb(o[c],d,r)}return u}function Z_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Re(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=wr([r,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(Re(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Z_(i.children,e,m,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:xb(d,i.index),routesMeta:m})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of ex(i.path))s(i,o,c)}),e}function ex(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ex(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function fb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:wb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const mb=/^:[\w-]+$/,pb=3,gb=2,yb=1,vb=10,_b=-2,ry=t=>t==="*";function xb(t,e){let n=t.split("/"),r=n.length;return n.some(ry)&&(r+=_b),e&&(r+=gb),n.filter(s=>!ry(s)).reduce((s,i)=>s+(mb.test(i)?pb:i===""?yb:vb),r)}function wb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Eb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,m=i==="/"?e:e.slice(i.length)||"/",g=sy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),p=c.route;if(!g&&d&&n&&!r[r.length-1].route.index&&(g=sy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:wr([i,g.pathname]),pathnameBase:Ab(wr([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=wr([i,g.pathnameBase]))}return o}function sy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Ib(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,m,g)=>{let{paramName:p,isOptional:x}=m;if(p==="*"){let A=u[g]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const S=u[g];return x&&!S?d[p]=void 0:d[p]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Ib(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),J_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Tb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return J_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?pi(t):t;return{pathname:n?n.startsWith("/")?n:Sb(n,e):e,search:Cb(r),hash:kb(s)}}function Sb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Yc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Nb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Of(t,e){let n=Nb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Vf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=pi(t):(s=Mo({},t),Re(!s.pathname||!s.pathname.includes("?"),Yc("?","pathname","search",s)),Re(!s.pathname||!s.pathname.includes("#"),Yc("#","pathname","hash",s)),Re(!s.search||!s.search.includes("#"),Yc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;s.pathname=p.join("/")}u=g>=0?e[g]:"/"}let c=bb(s,u),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const wr=t=>t.join("/").replace(/\/\/+/g,"/"),Ab=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Cb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Pb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tx=["post","put","patch","delete"];new Set(tx);const Rb=["get",...tx];new Set(Rb);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fo.apply(this,arguments)}const Lf=P.createContext(null),jb=P.createContext(null),jr=P.createContext(null),ku=P.createContext(null),Kn=P.createContext({outlet:null,matches:[],isDataRoute:!1}),nx=P.createContext(null);function Db(t,e){let{relative:n}=e===void 0?{}:e;gi()||Re(!1);let{basename:r,navigator:s}=P.useContext(jr),{hash:i,pathname:o,search:u}=sx(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:wr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function gi(){return P.useContext(ku)!=null}function ms(){return gi()||Re(!1),P.useContext(ku).location}function rx(t){P.useContext(jr).static||P.useLayoutEffect(t)}function En(){let{isDataRoute:t}=P.useContext(Kn);return t?Kb():Ob()}function Ob(){gi()||Re(!1);let t=P.useContext(Lf),{basename:e,future:n,navigator:r}=P.useContext(jr),{matches:s}=P.useContext(Kn),{pathname:i}=ms(),o=JSON.stringify(Of(s,n.v7_relativeSplatPath)),u=P.useRef(!1);return rx(()=>{u.current=!0}),P.useCallback(function(d,m){if(m===void 0&&(m={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=Vf(d,JSON.parse(o),i,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:wr([e,g.pathname])),(m.replace?r.replace:r.push)(g,m.state,m)},[e,r,o,i,t])}function Vb(){let{matches:t}=P.useContext(Kn),e=t[t.length-1];return e?e.params:{}}function sx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(jr),{matches:s}=P.useContext(Kn),{pathname:i}=ms(),o=JSON.stringify(Of(s,r.v7_relativeSplatPath));return P.useMemo(()=>Vf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function Lb(t,e){return Mb(t,e)}function Mb(t,e,n,r){gi()||Re(!1);let{navigator:s,static:i}=P.useContext(jr),{matches:o}=P.useContext(Kn),u=o[o.length-1],c=u?u.params:{};u&&u.pathname;let d=u?u.pathnameBase:"/";u&&u.route;let m=ms(),g;if(e){var p;let I=typeof e=="string"?pi(e):e;d==="/"||(p=I.pathname)!=null&&p.startsWith(d)||Re(!1),g=I}else g=m;let x=g.pathname||"/",S=x;if(d!=="/"){let I=d.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=!i&&n&&n.matches&&n.matches.length>0?n.matches:db(t,{pathname:S}),C=Bb(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},c,I.params),pathname:wr([d,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:wr([d,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,n,r);return e&&C?P.createElement(ku.Provider,{value:{location:Fo({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:dr.Pop}},C):C}function Fb(){let t=Gb(),e=Pb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const Ub=P.createElement(Fb,null);class zb extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Kn.Provider,{value:this.props.routeContext},P.createElement(nx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $b(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(Lf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Kn.Provider,{value:e},r)}function Bb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let m=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);m>=0||Re(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let m=0;m<o.length;m++){let g=o[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:p,errors:x}=n,S=g.route.loader&&p[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||S){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,g,p)=>{let x,S=!1,A=null,C=null;n&&(x=u&&g.route.id?u[g.route.id]:void 0,A=g.route.errorElement||Ub,c&&(d<0&&p===0?(S=!0,C=null):d===p&&(S=!0,C=g.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,p+1)),T=()=>{let w;return x?w=A:S?w=C:g.route.Component?w=P.createElement(g.route.Component,null):g.route.element?w=g.route.element:w=m,P.createElement($b,{match:g,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:w})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?P.createElement(zb,{location:n.location,revalidation:n.revalidation,component:A,error:x,children:T(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):T()},null)}var ix=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ix||{}),Gl=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gl||{});function qb(t){let e=P.useContext(Lf);return e||Re(!1),e}function Wb(t){let e=P.useContext(jb);return e||Re(!1),e}function Hb(t){let e=P.useContext(Kn);return e||Re(!1),e}function ox(t){let e=Hb(),n=e.matches[e.matches.length-1];return n.route.id||Re(!1),n.route.id}function Gb(){var t;let e=P.useContext(nx),n=Wb(Gl.UseRouteError),r=ox(Gl.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Kb(){let{router:t}=qb(ix.UseNavigateStable),e=ox(Gl.UseNavigateStable),n=P.useRef(!1);return rx(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fo({fromRouteId:e},i)))},[t,e])}function Qb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ah(t){let{to:e,replace:n,state:r,relative:s}=t;gi()||Re(!1);let{future:i,static:o}=P.useContext(jr),{matches:u}=P.useContext(Kn),{pathname:c}=ms(),d=En(),m=Vf(e,Of(u,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(m);return P.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function ot(t){Re(!1)}function Yb(t){let{basename:e="/",children:n=null,location:r,navigationType:s=dr.Pop,navigator:i,static:o=!1,future:u}=t;gi()&&Re(!1);let c=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:c,navigator:i,static:o,future:Fo({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=pi(r));let{pathname:m="/",search:g="",hash:p="",state:x=null,key:S="default"}=r,A=P.useMemo(()=>{let C=Df(m,c);return C==null?null:{location:{pathname:C,search:g,hash:p,state:x,key:S},navigationType:s}},[c,m,g,p,x,S,s]);return A==null?null:P.createElement(jr.Provider,{value:d},P.createElement(ku.Provider,{children:n,value:A}))}function Xb(t){let{children:e,location:n}=t;return Lb(lh(e),n)}new Promise(()=>{});function lh(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,lh(r.props.children,i));return}r.type!==ot&&Re(!1),!r.props.index||!r.props.children||Re(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uh(){return uh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uh.apply(this,arguments)}function Jb(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Zb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eS(t,e){return t.button===0&&(!e||e==="_self")&&!Zb(t)}function ch(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function tS(t,e){let n=ch(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const nS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rS="6";try{window.__reactRouterVersion=rS}catch{}const sS="startTransition",iy=YE[sS];function iS(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=lb({window:s,v5Compat:!0}));let o=i.current,[u,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},m=P.useCallback(g=>{d&&iy?iy(()=>c(g)):c(g)},[c,d]);return P.useLayoutEffect(()=>o.listen(m),[o,m]),P.useEffect(()=>Qb(r),[r]),P.createElement(Yb,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const oS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ee=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:m,viewTransition:g}=e,p=Jb(e,nS),{basename:x}=P.useContext(jr),S,A=!1;if(typeof d=="string"&&aS.test(d)&&(S=d,oS))try{let w=new URL(window.location.href),D=d.startsWith("//")?new URL(w.protocol+d):new URL(d),L=Df(D.pathname,x);D.origin===w.origin&&L!=null?d=L+D.search+D.hash:A=!0}catch{}let C=Db(d,{relative:s}),I=lS(d,{replace:o,state:u,target:c,preventScrollReset:m,relative:s,viewTransition:g});function T(w){r&&r(w),w.defaultPrevented||I(w)}return P.createElement("a",uh({},p,{href:S||C,onClick:A||i?r:T,ref:n,target:c}))});var oy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(oy||(oy={}));var ay;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ay||(ay={}));function lS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=En(),d=ms(),m=sx(t,{relative:o});return P.useCallback(g=>{if(eS(g,n)){g.preventDefault();let p=r!==void 0?r:Hl(d)===Hl(m);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,m,r,s,n,t,i,o,u])}function ax(t){let e=P.useRef(ch(t)),n=P.useRef(!1),r=ms(),s=P.useMemo(()=>tS(r.search,n.current?null:e.current),[r.search]),i=En(),o=P.useCallback((u,c)=>{const d=ch(typeof u=="function"?u(s):u);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,m=i>>2,g=(i&3)<<4|u>>4;let p=(u&15)<<2|d>>6,x=d&63;c||(x=64,o||(p=64)),r.push(n[m],n[g],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||g==null)throw new cS;const p=i<<2|u>>4;if(r.push(p),d!==64){const x=u<<4&240|d>>2;if(r.push(x),g!==64){const S=d<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const dS=function(t){const e=lx(t);return ux.encodeByteArray(e,!0)},Kl=function(t){return dS(t).replace(/\./g,"")},cx=function(t){try{return ux.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=()=>hS().__FIREBASE_DEFAULTS__,mS=()=>{if(typeof process>"u"||typeof ly>"u")return;const t=ly.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cx(t[1]);return e&&JSON.parse(e)},Pu=()=>{try{return fS()||mS()||pS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dx=t=>{var e,n;return(n=(e=Pu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gS=t=>{const e=dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hx=()=>{var t;return(t=Pu())===null||t===void 0?void 0:t.config},fx=t=>{var e;return(e=Pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kl(JSON.stringify(n)),Kl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _S(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ht())}function xS(){var t;const e=(t=Pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mf(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ES(){const t=ht();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function IS(){return!xS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ff(){try{return typeof indexedDB=="object"}catch{return!1}}function Uf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function mx(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="FirebaseError";class cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TS,Object.setPrototypeOf(this,cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ps.prototype.create)}}class ps{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?bS(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new cn(s,u,r)}}function bS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function NS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Uo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(uy(i)&&uy(o)){if(!Uo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function uy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ji(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Zi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AS(t,e){const n=new CS(t,e);return n.subscribe.bind(n)}class CS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Xc),s.error===void 0&&(s.error=Xc),s.complete===void 0&&(s.complete=Xc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Xc(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS=1e3,RS=2,jS=4*60*60*1e3,DS=.5;function cy(t,e=PS,n=RS){const r=e*Math.pow(n,t),s=Math.round(DS*r*(Math.random()-.5)*2);return Math.min(jS,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class an{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LS(e))try{this.getOrInitializeService({instanceIdentifier:$r})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$r){return this.instances.has(e)}getOptions(e=$r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:VS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$r){return this.component?this.component.multipleInstances?e:$r:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VS(t){return t===$r?void 0:t}function LS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const FS={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},US=se.INFO,zS={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},$S=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ru{constructor(e){this.name=e,this._logLevel=US,this._logHandler=$S,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?FS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const BS=(t,e)=>e.some(n=>t instanceof n);let dy,hy;function qS(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WS(){return hy||(hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const px=new WeakMap,dh=new WeakMap,gx=new WeakMap,Jc=new WeakMap,zf=new WeakMap;function HS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Er(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&px.set(n,t)}).catch(()=>{}),zf.set(e,t),e}function GS(t){if(dh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});dh.set(t,e)}let hh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Er(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KS(t){hh=t(hh)}function QS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Zc(this),e,...n);return gx.set(r,e.sort?e.sort():[e]),Er(r)}:WS().includes(t)?function(...e){return t.apply(Zc(this),e),Er(px.get(this))}:function(...e){return Er(t.apply(Zc(this),e))}}function YS(t){return typeof t=="function"?QS(t):(t instanceof IDBTransaction&&GS(t),BS(t,qS())?new Proxy(t,hh):t)}function Er(t){if(t instanceof IDBRequest)return HS(t);if(Jc.has(t))return Jc.get(t);const e=YS(t);return e!==t&&(Jc.set(t,e),zf.set(e,t)),e}const Zc=t=>zf.get(t);function yx(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Er(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Er(o.result),c.oldVersion,c.newVersion,Er(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const XS=["get","getKey","getAll","getAllKeys","count"],JS=["put","add","delete","clear"],ed=new Map;function fy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ed.get(e))return ed.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=JS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||XS.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return ed.set(e,i),i}KS(t=>({...t,get:(e,n,r)=>fy(e,n)||t.get(e,n,r),has:(e,n)=>!!fy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const fh="@firebase/app",my="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Ru("@firebase/app"),tN="@firebase/app-compat",nN="@firebase/analytics-compat",rN="@firebase/analytics",sN="@firebase/app-check-compat",iN="@firebase/app-check",oN="@firebase/auth",aN="@firebase/auth-compat",lN="@firebase/database",uN="@firebase/database-compat",cN="@firebase/functions",dN="@firebase/functions-compat",hN="@firebase/installations",fN="@firebase/installations-compat",mN="@firebase/messaging",pN="@firebase/messaging-compat",gN="@firebase/performance",yN="@firebase/performance-compat",vN="@firebase/remote-config",_N="@firebase/remote-config-compat",xN="@firebase/storage",wN="@firebase/storage-compat",EN="@firebase/firestore",IN="@firebase/vertexai-preview",TN="@firebase/firestore-compat",bN="firebase",SN="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="[DEFAULT]",NN={[fh]:"fire-core",[tN]:"fire-core-compat",[rN]:"fire-analytics",[nN]:"fire-analytics-compat",[iN]:"fire-app-check",[sN]:"fire-app-check-compat",[oN]:"fire-auth",[aN]:"fire-auth-compat",[lN]:"fire-rtdb",[uN]:"fire-rtdb-compat",[cN]:"fire-fn",[dN]:"fire-fn-compat",[hN]:"fire-iid",[fN]:"fire-iid-compat",[mN]:"fire-fcm",[pN]:"fire-fcm-compat",[gN]:"fire-perf",[yN]:"fire-perf-compat",[vN]:"fire-rc",[_N]:"fire-rc-compat",[xN]:"fire-gcs",[wN]:"fire-gcs-compat",[EN]:"fire-fst",[TN]:"fire-fst-compat",[IN]:"fire-vertex","fire-js":"fire-js",[bN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ql=new Map,AN=new Map,ph=new Map;function py(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xn(t){const e=t.name;if(ph.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;ph.set(e,t);for(const n of Ql.values())py(n,t);for(const n of AN.values())py(n,t);return!0}function gs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new ps("app","Firebase",CN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=SN;function vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ir.create("bad-app-name",{appName:String(s)});if(n||(n=hx()),!n)throw Ir.create("no-options");const i=Ql.get(s);if(i){if(Uo(n,i.options)&&Uo(r,i.config))return i;throw Ir.create("duplicate-app",{appName:s})}const o=new MS(s);for(const c of ph.values())o.addComponent(c);const u=new kN(n,r,o);return Ql.set(s,u),u}function $f(t=mh){const e=Ql.get(t);if(!e&&t===mh&&hx())return vx();if(!e)throw Ir.create("no-app",{appName:t});return e}function qt(t,e,n){var r;let s=(r=NN[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(u.join(" "));return}xn(new an(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebase-heartbeat-database",RN=1,zo="firebase-heartbeat-store";let td=null;function _x(){return td||(td=yx(PN,RN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),td}async function jN(t){try{const n=(await _x()).transaction(zo),r=await n.objectStore(zo).get(xx(t));return await n.done,r}catch(e){if(e instanceof cn)Bn.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function gy(t,e){try{const r=(await _x()).transaction(zo,"readwrite");await r.objectStore(zo).put(e,xx(t)),await r.done}catch(n){if(n instanceof cn)Bn.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(r.message)}}}function xx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=1024,ON=30*24*60*60*1e3;class VN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yy();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const c=new Date(u.date).valueOf();return Date.now()-c<=ON}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Bn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=yy(),{heartbeatsToSend:r,unsentEntries:s}=LN(this._heartbeatsCache.heartbeats),i=Kl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Bn.warn(n),""}}}function yy(){return new Date().toISOString().substring(0,10)}function LN(t,e=DN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),vy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ff()?Uf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function vy(t){return Kl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){xn(new an("platform-logger",e=>new ZS(e),"PRIVATE")),xn(new an("heartbeat",e=>new VN(e),"PRIVATE")),qt(fh,my,t),qt(fh,my,"esm2017"),qt("fire-js","")}FN("");function Bf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function wx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UN=wx,Ex=new ps("auth","Firebase",wx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Ru("@firebase/auth");function zN(t,...e){Yl.logLevel<=se.WARN&&Yl.warn(`Auth (${yi}): ${t}`,...e)}function hl(t,...e){Yl.logLevel<=se.ERROR&&Yl.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t,...e){throw Wf(t,...e)}function sn(t,...e){return Wf(t,...e)}function qf(t,e,n){const r=Object.assign(Object.assign({},UN()),{[e]:n});return new ps("auth","Firebase",r).create(e,{appName:t.name})}function Ln(t){return qf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $N(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kt(t,"argument-error"),qf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ex.create(t,...e)}function Y(t,e,...n){if(!t)throw Wf(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hl(e),new Error(e)}function qn(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BN(){return _y()==="http:"||_y()==="https:"}function _y(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BN()||Mf()||"connection"in navigator)?navigator.onLine:!0}function WN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=_S()||wS()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new ra(3e4,6e4);function Qn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function dn(t,e,n,r,s={}){return Tx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=na(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),Ix.fetch()(bx(t,t.config.apiHost,n,u),Object.assign({method:e,headers:c,referrerPolicy:"no-referrer"},i))})}async function Tx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},HN),e);try{const s=new QN(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ka(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ka(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ka(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ka(t,"user-disabled",o);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qf(t,m,d);Kt(t,m)}}catch(s){if(s instanceof cn)throw s;Kt(t,"network-request-failed",{message:String(s)})}}async function sa(t,e,n,r,s={}){const i=await dn(t,e,n,r,s);return"mfaPendingCredential"in i&&Kt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function bx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Hf(t.config,s):`${t.config.apiScheme}://${s}`}function KN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(sn(this.auth,"network-request-failed")),GN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ka(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=sn(t,e,r);return s.customData._tokenResponse=n,s}function xy(t){return t!==void 0&&t.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return KN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function XN(t,e){return dn(t,"GET","/v2/recaptchaConfig",Qn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return dn(t,"POST","/v1/accounts:delete",e)}async function Sx(t,e){return dn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZN(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),s=Gf(r);Y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mo(nd(s.auth_time)),issuedAtTime:mo(nd(s.iat)),expirationTime:mo(nd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function nd(t){return Number(t)*1e3}function Gf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hl("JWT malformed, contained fewer than 3 sections"),null;try{const s=cx(n);return s?JSON.parse(s):(hl("Failed to decode base64 JWT payload"),null)}catch(s){return hl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function wy(t){const e=Gf(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ss(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cn&&eA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function eA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ss(t,Sx(n,{idToken:r}));Y(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Nx(i.providerUserInfo):[],u=rA(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),m=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new yh(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(t,g)}async function nA(t){const e=Ie(t);await Xl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Nx(t){return t.map(e=>{var{providerId:n}=e,r=Bf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t,e){const n=await Tx(t,{},async()=>{const r=na({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=bx(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Ix.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function iA(t,e){return dn(t,"POST","/v2/accounts:revokeToken",Qn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Y(e.length!==0,"internal-error");const n=wy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await sA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Gs;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Y(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Y(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gs,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Dn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ss(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ZN(this,e)}reload(){return nA(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Dn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Ln(this.auth));const e=await this.getIdToken();return await ss(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,d,m;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(u=n.tenantId)!==null&&u!==void 0?u:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,I=(d=n.createdAt)!==null&&d!==void 0?d:void 0,T=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:w,emailVerified:D,isAnonymous:L,providerData:M,stsTokenManager:b}=n;Y(w&&b,e,"internal-error");const y=Gs.fromJSON(this.name,b);Y(typeof w=="string",e,"internal-error"),tr(g,e.name),tr(p,e.name),Y(typeof D=="boolean",e,"internal-error"),Y(typeof L=="boolean",e,"internal-error"),tr(x,e.name),tr(S,e.name),tr(A,e.name),tr(C,e.name),tr(I,e.name),tr(T,e.name);const E=new Dn({uid:w,auth:e,email:p,emailVerified:D,displayName:g,isAnonymous:L,photoURL:S,phoneNumber:x,tenantId:A,stsTokenManager:y,createdAt:I,lastLoginAt:T});return M&&Array.isArray(M)&&(E.providerData=M.map(_=>Object.assign({},_))),C&&(E._redirectEventId=C),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Gs;s.updateFromServerResponse(n);const i=new Dn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Y(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Nx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Gs;u.updateFromIdToken(r);const c=new Dn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=new Map;function On(t){qn(t instanceof Function,"Expected a class definition");let e=Ey.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ey.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Ax.type="NONE";const Iy=Ax;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t,e,n){return`firebase:${t}:${e}:${n}`}class Ks{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fl(this.userKey,s.apiKey,i),this.fullPersistenceKey=fl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ks(On(Iy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||On(Iy);const o=fl(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const m=await d._get(o);if(m){const g=Dn._fromJSON(e,m);d!==i&&(u=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ks(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ks(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Cx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dx(e))return"Blackberry";if(Ox(e))return"Webos";if(kx(e))return"Safari";if((e.includes("chrome/")||Px(e))&&!e.includes("edge/"))return"Chrome";if(jx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Cx(t=ht()){return/firefox\//i.test(t)}function kx(t=ht()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Px(t=ht()){return/crios\//i.test(t)}function Rx(t=ht()){return/iemobile/i.test(t)}function jx(t=ht()){return/android/i.test(t)}function Dx(t=ht()){return/blackberry/i.test(t)}function Ox(t=ht()){return/webos/i.test(t)}function Kf(t=ht()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function oA(t=ht()){var e;return Kf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aA(){return ES()&&document.documentMode===10}function Vx(t=ht()){return Kf(t)||jx(t)||Ox(t)||Dx(t)||/windows phone/i.test(t)||Rx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e=[]){let n;switch(t){case"Browser":n=Ty(ht());break;case"Worker":n=`${Ty(ht())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(t,e={}){return dn(t,"GET","/v2/passwordPolicy",Qn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=6;class dA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:cA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new by(this),this.idTokenSubscription=new by(this),this.beforeStateQueue=new lA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ex,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sx(this,{idToken:e}),r=await Dn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Ln(this));const n=e?Ie(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Ln(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uA(this),n=new dA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ps("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await iA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yn(t){return Ie(t)}class by{constructor(e){this.auth=e,this.observer=null,this.addObserver=AS(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function fA(t){ju=t}function Mx(t){return ju.loadJS(t)}function mA(){return ju.recaptchaEnterpriseScript}function pA(){return ju.gapiScript}function gA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const yA="recaptcha-enterprise",vA="NO_RECAPTCHA";class _A{constructor(e){this.type=yA,this.auth=Yn(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{XN(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new YN(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;xy(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(vA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&xy(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=mA();c.length!==0&&(c+=u),Mx(c).then(()=>{s(u,i,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function Sy(t,e,n,r=!1){const s=new _A(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Jl(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Sy(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Sy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t,e){const n=gs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Uo(i,e??{}))return s;Kt(s,"already-initialized")}return n.initialize({options:e})}function wA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function EA(t,e,n){const r=Yn(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Fx(e),{host:o,port:u}=IA(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),TA()}function Fx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IA(t){const e=Fx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ny(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ny(o)}}}function Ny(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function bA(t,e){return dn(t,"POST","/v1/accounts:update",e)}async function SA(t,e){return dn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NA(t,e){return sa(t,"POST","/v1/accounts:signInWithPassword",Qn(t,e))}async function Ux(t,e){return dn(t,"POST","/v1/accounts:sendOobCode",Qn(t,e))}async function AA(t,e){return Ux(t,e)}async function CA(t,e){return Ux(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e){return sa(t,"POST","/v1/accounts:signInWithEmailLink",Qn(t,e))}async function PA(t,e){return sa(t,"POST","/v1/accounts:signInWithEmailLink",Qn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends Qf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new $o(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new $o(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(e,n,"signInWithPassword",NA);case"emailLink":return kA(e,{email:this._email,oobCode:this._password});default:Kt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jl(e,r,"signUpPassword",SA);case"emailLink":return PA(e,{idToken:n,email:this._email,oobCode:this._password});default:Kt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e){return sa(t,"POST","/v1/accounts:signInWithIdp",Qn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="http://localhost";class is extends Qf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Bf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}buildRequest(){const e={requestUri:RA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=na(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DA(t){const e=Ji(Zi(t)).link,n=e?Ji(Zi(e)).deep_link_id:null,r=Ji(Zi(t)).deep_link_id;return(r?Ji(Zi(r)).link:null)||r||n||e||t}class Yf{constructor(e){var n,r,s,i,o,u;const c=Ji(Zi(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,m=(r=c.oobCode)!==null&&r!==void 0?r:null,g=jA((s=c.mode)!==null&&s!==void 0?s:null);Y(d&&m&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=m,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=DA(e);try{return new Yf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.providerId=ys.PROVIDER_ID}static credential(e,n){return $o._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Yf.parseLink(n);return Y(r,"argument-error"),$o._fromEmailAndCode(e,r.code,r.tenantId)}}ys.PROVIDER_ID="password";ys.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ys.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or extends ia{constructor(){super("facebook.com")}static credential(e){return is._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return or.credential(e.oauthAccessToken)}catch{return null}}}or.FACEBOOK_SIGN_IN_METHOD="facebook.com";or.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends ia{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return is._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Cn.credential(n,r)}catch{return null}}}Cn.GOOGLE_SIGN_IN_METHOD="google.com";Cn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends ia{constructor(){super("github.com")}static credential(e){return is._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends ia{constructor(){super("twitter.com")}static credential(e,n){return is._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OA(t,e){return sa(t,"POST","/v1/accounts:signUp",Qn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Dn._fromIdTokenResponse(e,r,s),o=Ay(r);return new os({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ay(r);return new os({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ay(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl extends cn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Zl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Zl(e,n,r,s)}}function zx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Zl._fromErrorAndOperation(t,i,e,r):i})}async function VA(t,e,n=!1){const r=await ss(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return os._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(t,e,n=!1){const{auth:r}=t;if(tn(r.app))return Promise.reject(Ln(r));const s="reauthenticate";try{const i=await ss(t,zx(r,s,e,t),n);Y(i.idToken,r,"internal-error");const o=Gf(i.idToken);Y(o,r,"internal-error");const{sub:u}=o;return Y(t.uid===u,r,"user-mismatch"),os._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Kt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(t,e,n=!1){if(tn(t.app))return Promise.reject(Ln(t));const r="signIn",s=await zx(t,r,e),i=await os._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function LA(t,e){return Bx(Yn(t),e)}async function MA(t,e){return $x(Ie(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t){const e=Yn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vh(t,e,n){const r=Yn(t);await Jl(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",CA)}async function Wx(t,e,n){if(tn(t.app))return Promise.reject(Ln(t));const r=Yn(t),o=await Jl(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OA).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&qx(t),c}),u=await os._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function _h(t,e,n){return tn(t.app)?Promise.reject(Ln(t)):LA(Ie(t),ys.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qx(t),r})}async function Cy(t,e){const n=Ie(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await AA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(t,e){return dn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ie(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ss(r,FA(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function UA(t,e){return zA(Ie(t),null,e)}async function zA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await ss(t,bA(r,i));await t._updateTokensIfNecessary(o,!0)}function $A(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function BA(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function qA(t,e,n,r){return Ie(t).onAuthStateChanged(e,n,r)}function WA(t){return Ie(t).signOut()}const eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=1e3,GA=10;class Kx extends Gx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);aA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kx.type="LOCAL";const KA=Kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx extends Gx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Qx.type="SESSION";const Yx=Qx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Du(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await QA(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Du.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=Jf("",20);s.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(p.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return window}function XA(t){yn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(){return typeof yn().WorkerGlobalScope<"u"&&typeof yn().importScripts=="function"}async function JA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function e2(){return Xx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="firebaseLocalStorageDb",t2=1,tu="firebaseLocalStorage",Zx="fbase_key";class oa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([tu],e?"readwrite":"readonly").objectStore(tu)}function n2(){const t=indexedDB.deleteDatabase(Jx);return new oa(t).toPromise()}function xh(){const t=indexedDB.open(Jx,t2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tu,{keyPath:Zx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tu)?e(r):(r.close(),await n2(),e(await xh()))})})}async function ky(t,e,n){const r=Ou(t,!0).put({[Zx]:e,value:n});return new oa(r).toPromise()}async function r2(t,e){const n=Ou(t,!1).get(e),r=await new oa(n).toPromise();return r===void 0?null:r.value}function Py(t,e){const n=Ou(t,!0).delete(e);return new oa(n).toPromise()}const s2=800,i2=3;class ew{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>i2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Du._getInstance(e2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await JA(),!this.activeServiceWorker)return;this.sender=new YA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xh();return await ky(e,eu,"1"),await Py(e,eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ky(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>r2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Py(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new oa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ew.type="LOCAL";const o2=ew;new ra(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(t,e){return e?On(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends Qf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a2(t){return Bx(t.auth,new Zf(t),t.bypassAuthState)}function l2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),$x(n,new Zf(t),t.bypassAuthState)}async function u2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),VA(n,new Zf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a2;case"linkViaPopup":case"linkViaRedirect":return u2;case"reauthViaPopup":case"reauthViaRedirect":return l2;default:Kt(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new ra(2e3,1e4);async function d2(t,e,n){if(tn(t.app))return Promise.reject(sn(t,"operation-not-supported-in-this-environment"));const r=Yn(t);$N(t,e,Xf);const s=tw(r,n);return new Hr(r,"signInViaPopup",e,s).executeNotNull()}class Hr extends nw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hr.currentPopupAction&&Hr.currentPopupAction.cancel(),Hr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=Jf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(sn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c2.get())};e()}}Hr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="pendingRedirect",ml=new Map;class f2 extends nw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ml.get(this.auth._key());if(!e){try{const r=await m2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ml.set(this.auth._key(),e)}return this.bypassAuthState||ml.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m2(t,e){const n=y2(e),r=g2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function p2(t,e){ml.set(t._key(),e)}function g2(t){return On(t._redirectPersistence)}function y2(t){return fl(h2,t.config.apiKey,t.name)}async function v2(t,e,n=!1){if(tn(t.app))return Promise.reject(Ln(t));const r=Yn(t),s=tw(r,e),o=await new f2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=10*60*1e3;class x2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!rw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(sn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ry(e))}saveEventToCache(e){this.cachedEventUids.add(Ry(e)),this.lastProcessedEventTime=Date.now()}}function Ry(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function rw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(t,e={}){return dn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;async function b2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E2(t);for(const n of e)try{if(S2(n))return}catch{}Kt(t,"unauthorized-domain")}function S2(t){const e=gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!T2.test(n))return!1;if(I2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=new ra(3e4,6e4);function jy(){const t=yn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function A2(t){return new Promise((e,n)=>{var r,s,i;function o(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),n(sn(t,"network-request-failed"))},timeout:N2.get()})}if(!((s=(r=yn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=yn().gapi)===null||i===void 0)&&i.load)o();else{const u=gA("iframefcb");return yn()[u]=()=>{gapi.load?o():n(sn(t,"network-request-failed"))},Mx(`${pA()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw pl=null,e})}let pl=null;function C2(t){return pl=pl||A2(t),pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2=new ra(5e3,15e3),P2="__/auth/iframe",R2="emulator/auth/iframe",j2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O2(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hf(e,R2):`https://${t.config.authDomain}/${P2}`,r={apiKey:e.apiKey,appName:t.name,v:yi},s=D2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${na(r).slice(1)}`}async function V2(t){const e=await C2(t),n=yn().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:O2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=sn(t,"network-request-failed"),u=yn().setTimeout(()=>{i(o)},k2.get());function c(){yn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},M2=500,F2=600,U2="_blank",z2="http://localhost";class Dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $2(t,e,n,r=M2,s=F2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},L2),{width:r.toString(),height:s.toString(),top:i,left:o}),d=ht().toLowerCase();n&&(u=Px(d)?U2:n),Cx(d)&&(e=e||z2,c.scrollbars="yes");const m=Object.entries(c).reduce((p,[x,S])=>`${p}${x}=${S},`,"");if(oA(d)&&u!=="_self")return B2(e||"",u),new Dy(null);const g=window.open(e||"",u,m);Y(g,t,"popup-blocked");try{g.focus()}catch{}return new Dy(g)}function B2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="__/auth/handler",W2="emulator/auth/handler",H2=encodeURIComponent("fac");async function Oy(t,e,n,r,s,i){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yi,eventId:s};if(e instanceof Xf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,g]of Object.entries({}))o[m]=g}if(e instanceof ia){const m=e.getScopes().filter(g=>g!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const c=await t._getAppCheckToken(),d=c?`#${H2}=${encodeURIComponent(c)}`:"";return`${G2(t)}?${na(u).slice(1)}${d}`}function G2({config:t}){return t.emulator?Hf(t,W2):`https://${t.authDomain}/${q2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="webStorageSupport";class K2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yx,this._completeRedirectFn=v2,this._overrideRedirectResult=p2}async _openPopup(e,n,r,s){var i;qn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Oy(e,n,r,gh(),s);return $2(e,o,Jf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Oy(e,n,r,gh(),s);return XA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(qn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await V2(e),r=new x2(e);return n.register("authEvent",s=>(Y(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rd,{type:rd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[rd];o!==void 0&&n(!!o),Kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=b2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vx()||kx()||Kf()}}const Q2=K2;var Vy="@firebase/auth",Ly="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function J2(t){xn(new an("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lx(t)},d=new hA(r,s,i,c);return wA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xn(new an("auth-internal",e=>{const n=Yn(e.getProvider("auth").getImmediate());return(r=>new Y2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qt(Vy,Ly,X2(t)),qt(Vy,Ly,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=5*60,eC=fx("authIdTokenMaxAge")||Z2;let My=null;const tC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eC)return;const s=n==null?void 0:n.token;My!==s&&(My=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function nC(t=$f()){const e=gs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xA(t,{popupRedirectResolver:Q2,persistence:[o2,KA,Yx]}),r=fx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=tC(i.toString());BA(n,o,()=>o(n.currentUser)),$A(n,u=>o(u))}}const s=dx("auth");return s&&EA(n,`http://${s}`),n}function rC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}fA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=sn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",rC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});J2("Browser");var sC="firebase",iC="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qt(sC,iC,"app");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xr,sw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function E(){}E.prototype=y.prototype,b.D=y.prototype,b.prototype=new E,b.prototype.constructor=b,b.C=function(_,k,R){for(var N=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)N[Ue-2]=arguments[Ue];return y.prototype[k].apply(_,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,y,E){E||(E=0);var _=Array(16);if(typeof y=="string")for(var k=0;16>k;++k)_[k]=y.charCodeAt(E++)|y.charCodeAt(E++)<<8|y.charCodeAt(E++)<<16|y.charCodeAt(E++)<<24;else for(k=0;16>k;++k)_[k]=y[E++]|y[E++]<<8|y[E++]<<16|y[E++]<<24;y=b.g[0],E=b.g[1],k=b.g[2];var R=b.g[3],N=y+(R^E&(k^R))+_[0]+3614090360&4294967295;y=E+(N<<7&4294967295|N>>>25),N=R+(k^y&(E^k))+_[1]+3905402710&4294967295,R=y+(N<<12&4294967295|N>>>20),N=k+(E^R&(y^E))+_[2]+606105819&4294967295,k=R+(N<<17&4294967295|N>>>15),N=E+(y^k&(R^y))+_[3]+3250441966&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(R^E&(k^R))+_[4]+4118548399&4294967295,y=E+(N<<7&4294967295|N>>>25),N=R+(k^y&(E^k))+_[5]+1200080426&4294967295,R=y+(N<<12&4294967295|N>>>20),N=k+(E^R&(y^E))+_[6]+2821735955&4294967295,k=R+(N<<17&4294967295|N>>>15),N=E+(y^k&(R^y))+_[7]+4249261313&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(R^E&(k^R))+_[8]+1770035416&4294967295,y=E+(N<<7&4294967295|N>>>25),N=R+(k^y&(E^k))+_[9]+2336552879&4294967295,R=y+(N<<12&4294967295|N>>>20),N=k+(E^R&(y^E))+_[10]+4294925233&4294967295,k=R+(N<<17&4294967295|N>>>15),N=E+(y^k&(R^y))+_[11]+2304563134&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(R^E&(k^R))+_[12]+1804603682&4294967295,y=E+(N<<7&4294967295|N>>>25),N=R+(k^y&(E^k))+_[13]+4254626195&4294967295,R=y+(N<<12&4294967295|N>>>20),N=k+(E^R&(y^E))+_[14]+2792965006&4294967295,k=R+(N<<17&4294967295|N>>>15),N=E+(y^k&(R^y))+_[15]+1236535329&4294967295,E=k+(N<<22&4294967295|N>>>10),N=y+(k^R&(E^k))+_[1]+4129170786&4294967295,y=E+(N<<5&4294967295|N>>>27),N=R+(E^k&(y^E))+_[6]+3225465664&4294967295,R=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(R^y))+_[11]+643717713&4294967295,k=R+(N<<14&4294967295|N>>>18),N=E+(R^y&(k^R))+_[0]+3921069994&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^R&(E^k))+_[5]+3593408605&4294967295,y=E+(N<<5&4294967295|N>>>27),N=R+(E^k&(y^E))+_[10]+38016083&4294967295,R=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(R^y))+_[15]+3634488961&4294967295,k=R+(N<<14&4294967295|N>>>18),N=E+(R^y&(k^R))+_[4]+3889429448&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^R&(E^k))+_[9]+568446438&4294967295,y=E+(N<<5&4294967295|N>>>27),N=R+(E^k&(y^E))+_[14]+3275163606&4294967295,R=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(R^y))+_[3]+4107603335&4294967295,k=R+(N<<14&4294967295|N>>>18),N=E+(R^y&(k^R))+_[8]+1163531501&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(k^R&(E^k))+_[13]+2850285829&4294967295,y=E+(N<<5&4294967295|N>>>27),N=R+(E^k&(y^E))+_[2]+4243563512&4294967295,R=y+(N<<9&4294967295|N>>>23),N=k+(y^E&(R^y))+_[7]+1735328473&4294967295,k=R+(N<<14&4294967295|N>>>18),N=E+(R^y&(k^R))+_[12]+2368359562&4294967295,E=k+(N<<20&4294967295|N>>>12),N=y+(E^k^R)+_[5]+4294588738&4294967295,y=E+(N<<4&4294967295|N>>>28),N=R+(y^E^k)+_[8]+2272392833&4294967295,R=y+(N<<11&4294967295|N>>>21),N=k+(R^y^E)+_[11]+1839030562&4294967295,k=R+(N<<16&4294967295|N>>>16),N=E+(k^R^y)+_[14]+4259657740&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^R)+_[1]+2763975236&4294967295,y=E+(N<<4&4294967295|N>>>28),N=R+(y^E^k)+_[4]+1272893353&4294967295,R=y+(N<<11&4294967295|N>>>21),N=k+(R^y^E)+_[7]+4139469664&4294967295,k=R+(N<<16&4294967295|N>>>16),N=E+(k^R^y)+_[10]+3200236656&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^R)+_[13]+681279174&4294967295,y=E+(N<<4&4294967295|N>>>28),N=R+(y^E^k)+_[0]+3936430074&4294967295,R=y+(N<<11&4294967295|N>>>21),N=k+(R^y^E)+_[3]+3572445317&4294967295,k=R+(N<<16&4294967295|N>>>16),N=E+(k^R^y)+_[6]+76029189&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(E^k^R)+_[9]+3654602809&4294967295,y=E+(N<<4&4294967295|N>>>28),N=R+(y^E^k)+_[12]+3873151461&4294967295,R=y+(N<<11&4294967295|N>>>21),N=k+(R^y^E)+_[15]+530742520&4294967295,k=R+(N<<16&4294967295|N>>>16),N=E+(k^R^y)+_[2]+3299628645&4294967295,E=k+(N<<23&4294967295|N>>>9),N=y+(k^(E|~R))+_[0]+4096336452&4294967295,y=E+(N<<6&4294967295|N>>>26),N=R+(E^(y|~k))+_[7]+1126891415&4294967295,R=y+(N<<10&4294967295|N>>>22),N=k+(y^(R|~E))+_[14]+2878612391&4294967295,k=R+(N<<15&4294967295|N>>>17),N=E+(R^(k|~y))+_[5]+4237533241&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~R))+_[12]+1700485571&4294967295,y=E+(N<<6&4294967295|N>>>26),N=R+(E^(y|~k))+_[3]+2399980690&4294967295,R=y+(N<<10&4294967295|N>>>22),N=k+(y^(R|~E))+_[10]+4293915773&4294967295,k=R+(N<<15&4294967295|N>>>17),N=E+(R^(k|~y))+_[1]+2240044497&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~R))+_[8]+1873313359&4294967295,y=E+(N<<6&4294967295|N>>>26),N=R+(E^(y|~k))+_[15]+4264355552&4294967295,R=y+(N<<10&4294967295|N>>>22),N=k+(y^(R|~E))+_[6]+2734768916&4294967295,k=R+(N<<15&4294967295|N>>>17),N=E+(R^(k|~y))+_[13]+1309151649&4294967295,E=k+(N<<21&4294967295|N>>>11),N=y+(k^(E|~R))+_[4]+4149444226&4294967295,y=E+(N<<6&4294967295|N>>>26),N=R+(E^(y|~k))+_[11]+3174756917&4294967295,R=y+(N<<10&4294967295|N>>>22),N=k+(y^(R|~E))+_[2]+718787259&4294967295,k=R+(N<<15&4294967295|N>>>17),N=E+(R^(k|~y))+_[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,b.g[2]=b.g[2]+k&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var E=y-this.blockSize,_=this.B,k=this.h,R=0;R<y;){if(k==0)for(;R<=E;)s(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<y;)if(_[k++]=b.charCodeAt(R++),k==this.blockSize){s(this,_),k=0;break}}else for(;R<y;)if(_[k++]=b[R++],k==this.blockSize){s(this,_),k=0;break}}this.h=k,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var E=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=E&255,E/=256;for(this.u(b),b=Array(16),y=E=0;4>y;++y)for(var _=0;32>_;_+=8)b[E++]=this.g[y]>>>_&255;return b};function i(b,y){var E=u;return Object.prototype.hasOwnProperty.call(E,b)?E[b]:E[b]=y(b)}function o(b,y){this.h=y;for(var E=[],_=!0,k=b.length-1;0<=k;k--){var R=b[k]|0;_&&R==y||(E[k]=R,_=!1)}this.g=E}var u={};function c(b){return-128<=b&&128>b?i(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return g;if(0>b)return C(d(-b));for(var y=[],E=1,_=0;b>=E;_++)y[_]=b/E|0,E*=4294967296;return new o(y,0)}function m(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return C(m(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(y,8)),_=g,k=0;k<b.length;k+=8){var R=Math.min(8,b.length-k),N=parseInt(b.substring(k,k+R),y);8>R?(R=d(Math.pow(y,R)),_=_.j(R).add(d(N))):(_=_.j(E),_=_.add(d(N)))}return _}var g=c(0),p=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-C(this).m();for(var b=0,y=1,E=0;E<this.g.length;E++){var _=this.i(E);b+=(0<=_?_:4294967296+_)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S(this))return"0";if(A(this))return"-"+C(this).toString(b);for(var y=d(Math.pow(b,6)),E=this,_="";;){var k=D(E,y).g;E=I(E,k.j(y));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(b);if(E=k,S(E))return R+_;for(;6>R.length;)R="0"+R;_=R+_}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function S(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function A(b){return b.h==-1}t.l=function(b){return b=I(this,b),A(b)?-1:S(b)?0:1};function C(b){for(var y=b.g.length,E=[],_=0;_<y;_++)E[_]=~b.g[_];return new o(E,~b.h).add(p)}t.abs=function(){return A(this)?C(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],_=0,k=0;k<=y;k++){var R=_+(this.i(k)&65535)+(b.i(k)&65535),N=(R>>>16)+(this.i(k)>>>16)+(b.i(k)>>>16);_=N>>>16,R&=65535,N&=65535,E[k]=N<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(b,y){return b.add(C(y))}t.j=function(b){if(S(this)||S(b))return g;if(A(this))return A(b)?C(this).j(C(b)):C(C(this).j(b));if(A(b))return C(this.j(C(b)));if(0>this.l(x)&&0>b.l(x))return d(this.m()*b.m());for(var y=this.g.length+b.g.length,E=[],_=0;_<2*y;_++)E[_]=0;for(_=0;_<this.g.length;_++)for(var k=0;k<b.g.length;k++){var R=this.i(_)>>>16,N=this.i(_)&65535,Ue=b.i(k)>>>16,At=b.i(k)&65535;E[2*_+2*k]+=N*At,T(E,2*_+2*k),E[2*_+2*k+1]+=R*At,T(E,2*_+2*k+1),E[2*_+2*k+1]+=N*Ue,T(E,2*_+2*k+1),E[2*_+2*k+2]+=R*Ue,T(E,2*_+2*k+2)}for(_=0;_<y;_++)E[_]=E[2*_+1]<<16|E[2*_];for(_=y;_<2*y;_++)E[_]=0;return new o(E,0)};function T(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function w(b,y){this.g=b,this.h=y}function D(b,y){if(S(y))throw Error("division by zero");if(S(b))return new w(g,g);if(A(b))return y=D(C(b),y),new w(C(y.g),C(y.h));if(A(y))return y=D(b,C(y)),new w(C(y.g),y.h);if(30<b.g.length){if(A(b)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var E=p,_=y;0>=_.l(b);)E=L(E),_=L(_);var k=M(E,1),R=M(_,1);for(_=M(_,2),E=M(E,2);!S(_);){var N=R.add(_);0>=N.l(b)&&(k=k.add(E),R=N),_=M(_,1),E=M(E,1)}return y=I(b,k.j(y)),new w(k,y)}for(k=g;0<=b.l(y);){for(E=Math.max(1,Math.floor(b.m()/y.m())),_=Math.ceil(Math.log(E)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),R=d(E),N=R.j(y);A(N)||0<N.l(b);)E-=_,R=d(E),N=R.j(y);S(R)&&(R=p),k=k.add(R),b=I(b,N)}return new w(k,b)}t.A=function(b){return D(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],_=0;_<y;_++)E[_]=this.i(_)&b.i(_);return new o(E,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],_=0;_<y;_++)E[_]=this.i(_)|b.i(_);return new o(E,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),E=[],_=0;_<y;_++)E[_]=this.i(_)^b.i(_);return new o(E,this.h^b.h)};function L(b){for(var y=b.g.length+1,E=[],_=0;_<y;_++)E[_]=b.i(_)<<1|b.i(_-1)>>>31;return new o(E,b.h)}function M(b,y){var E=y>>5;y%=32;for(var _=b.g.length-E,k=[],R=0;R<_;R++)k[R]=0<y?b.i(R+E)>>>y|b.i(R+E+1)<<32-y:b.i(R+E);return new o(k,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,Xr=o}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var Qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iw,ow,eo,aw,gl,wh,lw,uw,cw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qa=="object"&&Qa];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in f))break e;f=f[j]}a=a[a.length-1],v=f[a],h=h(v),h!=v&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,v=!1,j={next:function(){if(!v&&f<a.length){var O=f++;return{value:h(O,a[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function g(a,h,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function p(a,h,f){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:g,p.apply(null,arguments)}function x(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function S(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,j,O){for(var $=Array(arguments.length-2),me=2;me<arguments.length;me++)$[me-2]=arguments[me];return h.prototype[j].apply(v,$)}}function A(a){const h=a.length;if(0<h){const f=Array(h);for(let v=0;v<h;v++)f[v]=a[v];return f}return[]}function C(a,h){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(c(v)){const j=a.length||0,O=v.length||0;a.length=j+O;for(let $=0;$<O;$++)a[j+$]=v[$]}else a.push(v)}}class I{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function T(a){return/^[\s\xa0]*$/.test(a)}function w(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var L=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function M(a,h,f){for(const v in a)h.call(f,a[v],v,a)}function b(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function y(a){const h={};for(const f in a)h[f]=a[f];return h}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(a,h){let f,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(f in v)a[f]=v[f];for(let O=0;O<E.length;O++)f=E[O],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function k(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function R(a){u.setTimeout(()=>{throw a},0)}function N(){var a=H;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ue{constructor(){this.h=this.g=null}add(h,f){const v=At.get();v.set(h,f),this.h?this.h.next=v:this.g=v,this.h=v}}var At=new I(()=>new Qt,a=>a.reset());class Qt{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ze,B=!1,H=new Ue,Q=()=>{const a=u.Promise.resolve(void 0);Ze=()=>{a.then(he)}};var he=()=>{for(var a;a=N();){try{a.h.call(a.g)}catch(f){R(f)}var h=At;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};u.addEventListener("test",f,h),u.removeEventListener("test",f,h)}catch{}return a}();function U(a,h){if(ye.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{D(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&U.aa.h.call(this)}}S(U,ye);var fe={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ft="closure_listenable_"+(1e6*Math.random()|0),Ii=0;function rE(a,h,f,v,j){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!v,this.ha=j,this.key=++Ii,this.da=this.fa=!1}function ma(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function pa(a){this.src=a,this.g={},this.h=0}pa.prototype.add=function(a,h,f,v,j){var O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);var $=nc(a,h,v,j);return-1<$?(h=a[$],f||(h.fa=!1)):(h=new rE(h,this.src,O,!!v,j),h.fa=f,a.push(h)),h};function tc(a,h){var f=h.type;if(f in a.g){var v=a.g[f],j=Array.prototype.indexOf.call(v,h,void 0),O;(O=0<=j)&&Array.prototype.splice.call(v,j,1),O&&(ma(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function nc(a,h,f,v){for(var j=0;j<a.length;++j){var O=a[j];if(!O.da&&O.listener==h&&O.capture==!!f&&O.ha==v)return j}return-1}var rc="closure_lm_"+(1e6*Math.random()|0),sc={};function Hm(a,h,f,v,j){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Hm(a,h[O],f,v,j);return null}return f=Qm(f),a&&a[Ft]?a.K(h,f,d(v)?!!v.capture:!!v,j):sE(a,h,f,!1,v,j)}function sE(a,h,f,v,j,O){if(!h)throw Error("Invalid event type");var $=d(j)?!!j.capture:!!j,me=oc(a);if(me||(a[rc]=me=new pa(a)),f=me.add(h,f,v,$,O),f.proxy)return f;if(v=iE(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Ve||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),v,j);else if(a.attachEvent)a.attachEvent(Km(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function iE(){function a(f){return h.call(a.src,a.listener,f)}const h=oE;return a}function Gm(a,h,f,v,j){if(Array.isArray(h))for(var O=0;O<h.length;O++)Gm(a,h[O],f,v,j);else v=d(v)?!!v.capture:!!v,f=Qm(f),a&&a[Ft]?(a=a.i,h=String(h).toString(),h in a.g&&(O=a.g[h],f=nc(O,f,v,j),-1<f&&(ma(O[f]),Array.prototype.splice.call(O,f,1),O.length==0&&(delete a.g[h],a.h--)))):a&&(a=oc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=nc(h,f,v,j)),(f=-1<a?h[a]:null)&&ic(f))}function ic(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ft])tc(h.i,a);else{var f=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(f,v,a.capture):h.detachEvent?h.detachEvent(Km(f),v):h.addListener&&h.removeListener&&h.removeListener(v),(f=oc(h))?(tc(f,a),f.h==0&&(f.src=null,h[rc]=null)):ma(a)}}}function Km(a){return a in sc?sc[a]:sc[a]="on"+a}function oE(a,h){if(a.da)a=!0;else{h=new U(h,this);var f=a.listener,v=a.ha||a.src;a.fa&&ic(a),a=f.call(v,h)}return a}function oc(a){return a=a[rc],a instanceof pa?a:null}var ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qm(a){return typeof a=="function"?a:(a[ac]||(a[ac]=function(h){return a.handleEvent(h)}),a[ac])}function et(){ce.call(this),this.i=new pa(this),this.M=this,this.F=null}S(et,ce),et.prototype[Ft]=!0,et.prototype.removeEventListener=function(a,h,f,v){Gm(this,a,h,f,v)};function ft(a,h){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new ye(h,a);else if(h instanceof ye)h.target=h.target||a;else{var j=h;h=new ye(v,a),_(h,j)}if(j=!0,f)for(var O=f.length-1;0<=O;O--){var $=h.g=f[O];j=ga($,v,!0,h)&&j}if($=h.g=a,j=ga($,v,!0,h)&&j,j=ga($,v,!1,h)&&j,f)for(O=0;O<f.length;O++)$=h.g=f[O],j=ga($,v,!1,h)&&j}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],v=0;v<f.length;v++)ma(f[v]);delete a.g[h],a.h--}}this.F=null},et.prototype.K=function(a,h,f,v){return this.i.add(String(a),h,!1,f,v)},et.prototype.L=function(a,h,f,v){return this.i.add(String(a),h,!0,f,v)};function ga(a,h,f,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,O=0;O<h.length;++O){var $=h[O];if($&&!$.da&&$.capture==f){var me=$.listener,We=$.ha||$.src;$.fa&&tc(a.i,$),j=me.call(We,v)!==!1&&j}}return j&&!v.defaultPrevented}function Ym(a,h,f){if(typeof a=="function")f&&(a=p(a,f));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function Xm(a){a.g=Ym(()=>{a.g=null,a.i&&(a.i=!1,Xm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class aE extends ce{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Xm(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(a){ce.call(this),this.h=a,this.g={}}S(Ti,ce);var Jm=[];function Zm(a){M(a.g,function(h,f){this.g.hasOwnProperty(f)&&ic(h)},a),a.g={}}Ti.prototype.N=function(){Ti.aa.N.call(this),Zm(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lc=u.JSON.stringify,lE=u.JSON.parse,uE=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function uc(){}uc.prototype.h=null;function ep(a){return a.h||(a.h=a.i())}function tp(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cc(){ye.call(this,"d")}S(cc,ye);function dc(){ye.call(this,"c")}S(dc,ye);var Vr={},np=null;function ya(){return np=np||new et}Vr.La="serverreachability";function rp(a){ye.call(this,Vr.La,a)}S(rp,ye);function Si(a){const h=ya();ft(h,new rp(h))}Vr.STAT_EVENT="statevent";function sp(a,h){ye.call(this,Vr.STAT_EVENT,a),this.stat=h}S(sp,ye);function mt(a){const h=ya();ft(h,new sp(h,a))}Vr.Ma="timingevent";function ip(a,h){ye.call(this,Vr.Ma,a),this.size=h}S(ip,ye);function Ni(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Ai(){this.g=!0}Ai.prototype.xa=function(){this.g=!1};function cE(a,h,f,v,j,O){a.info(function(){if(a.g)if(O)for(var $="",me=O.split("&"),We=0;We<me.length;We++){var ae=me[We].split("=");if(1<ae.length){var tt=ae[0];ae=ae[1];var nt=tt.split("_");$=2<=nt.length&&nt[1]=="type"?$+(tt+"="+ae+"&"):$+(tt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+h+`
`+f+`
`+$})}function dE(a,h,f,v,j,O,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+h+`
`+f+`
`+O+" "+$})}function ws(a,h,f,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+fE(a,f)+(v?" "+v:"")})}function hE(a,h){a.info(function(){return"TIMEOUT: "+h})}Ai.prototype.info=function(){};function fE(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return lc(f)}catch{return h}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},op={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hc;function _a(){}S(_a,uc),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},hc=new _a;function Xn(a,h,f,v){this.j=a,this.i=h,this.l=f,this.R=v||1,this.U=new Ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ap}function ap(){this.i=null,this.g="",this.h=!1}var lp={},fc={};function mc(a,h,f){a.L=1,a.v=Ia(In(h)),a.m=f,a.P=!0,up(a,null)}function up(a,h){a.F=Date.now(),xa(a),a.A=In(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Ip(f.i,"t",v),a.C=0,f=a.j.J,a.h=new ap,a.g=zp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new aE(p(a.Y,a,a.g),a.O)),h=a.U,f=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(Jm[0]=j.toString()),j=Jm);for(var O=0;O<j.length;O++){var $=Hm(f,j[O],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Si(),cE(a.i,a.u,a.A,a.l,a.R,a.m)}Xn.prototype.ca=function(a){a=a.target;const h=this.M;h&&Tn(a)==3?h.j():this.Y(a)},Xn.prototype.Y=function(a){try{if(a==this.g)e:{const nt=Tn(this.g);var h=this.g.Ba();const Ts=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||kp(this.g)))){this.J||nt!=4||h==7||(h==8||0>=Ts?Si(3):Si(2)),pc(this);var f=this.g.Z();this.X=f;t:if(cp(this)){var v=kp(this.g);a="";var j=v.length,O=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lr(this),Ci(this);var $="";break t}this.h.i=new u.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(O&&h==j-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,dE(this.i,this.u,this.A,this.l,this.R,nt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,We=this.g;if((me=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(me)){var ae=me;break t}}ae=null}if(f=ae)ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gc(this,f);else{this.o=!1,this.s=3,mt(12),Lr(this),Ci(this);break e}}if(this.P){f=!0;let Yt;for(;!this.J&&this.C<$.length;)if(Yt=mE(this,$),Yt==fc){nt==4&&(this.s=4,mt(14),f=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==lp){this.s=4,mt(15),ws(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else ws(this.i,this.l,Yt,null),gc(this,Yt);if(cp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||$.length!=0||this.h.h||(this.s=1,mt(16),f=!1),this.o=this.o&&f,!f)ws(this.i,this.l,$,"[Invalid Chunked Response]"),Lr(this),Ci(this);else if(0<$.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Ec(tt),tt.M=!0,mt(11))}}else ws(this.i,this.l,$,null),gc(this,$);nt==4&&Lr(this),this.o&&!this.J&&(nt==4?Lp(this.j,this):(this.o=!1,xa(this)))}else PE(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Lr(this),Ci(this)}}}catch{}finally{}};function cp(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function mE(a,h){var f=a.C,v=h.indexOf(`
`,f);return v==-1?fc:(f=Number(h.substring(f,v)),isNaN(f)?lp:(v+=1,v+f>h.length?fc:(h=h.slice(v,v+f),a.C=v+f,h)))}Xn.prototype.cancel=function(){this.J=!0,Lr(this)};function xa(a){a.S=Date.now()+a.I,dp(a,a.I)}function dp(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ni(p(a.ba,a),h)}function pc(a){a.B&&(u.clearTimeout(a.B),a.B=null)}Xn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(hE(this.i,this.A),this.L!=2&&(Si(),mt(17)),Lr(this),this.s=2,Ci(this)):dp(this,this.S-a)};function Ci(a){a.j.G==0||a.J||Lp(a.j,a)}function Lr(a){pc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Zm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function gc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||yc(f.h,a))){if(!a.K&&yc(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Aa(f),Sa(f);else break e;wc(f),mt(18)}}else f.za=j[1],0<f.za-f.T&&37500>j[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ni(p(f.Za,f),6e3));if(1>=mp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Fr(f,11)}else if((a.K||f.g==a)&&Aa(f),!T(h))for(j=f.Da.g.parse(h),h=0;h<j.length;h++){let ae=j[h];if(f.T=ae[0],ae=ae[1],f.G==2)if(ae[0]=="c"){f.K=ae[1],f.ia=ae[2];const tt=ae[3];tt!=null&&(f.la=tt,f.j.info("VER="+f.la));const nt=ae[4];nt!=null&&(f.Aa=nt,f.j.info("SVER="+f.Aa));const Ts=ae[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(v=1.5*Ts,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const Yt=a.g;if(Yt){const ka=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ka){var O=v.h;O.g||ka.indexOf("spdy")==-1&&ka.indexOf("quic")==-1&&ka.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(vc(O,O.h),O.h=null))}if(v.D){const Ic=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ic&&(v.ya=Ic,ve(v.I,v.D,Ic))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var $=a;if(v.qa=Up(v,v.J?v.ia:null,v.W),$.K){pp(v.h,$);var me=$,We=v.L;We&&(me.I=We),me.B&&(pc(me),xa(me)),v.g=$}else Op(v);0<f.i.length&&Na(f)}else ae[0]!="stop"&&ae[0]!="close"||Fr(f,7);else f.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Fr(f,7):xc(f):ae[0]!="noop"&&f.l&&f.l.ta(ae),f.v=0)}}Si(4)}catch{}}var pE=class{constructor(a,h){this.g=a,this.map=h}};function hp(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mp(a){return a.h?1:a.g?a.g.size:0}function yc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vc(a,h){a.g?a.g.add(h):a.h=h}function pp(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}hp.prototype.cancel=function(){if(this.i=gp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function gp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return A(a.i)}function gE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,v=0;v<f;v++)h.push(a[v]);return h}h=[],f=0;for(v in a)h[f++]=a[v];return h}function yE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const v in a)h[f++]=v;return h}}}function yp(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=yE(a),v=gE(a),j=v.length,O=0;O<j;O++)h.call(void 0,v[O],f&&f[O],a)}var vp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vE(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),j=null;if(0<=v){var O=a[f].substring(0,v);j=a[f].substring(v+1)}else O=a[f];h(O,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Mr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Mr){this.h=a.h,wa(this,a.j),this.o=a.o,this.g=a.g,Ea(this,a.s),this.l=a.l;var h=a.i,f=new Ri;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),_p(this,f),this.m=a.m}else a&&(h=String(a).match(vp))?(this.h=!1,wa(this,h[1]||"",!0),this.o=ki(h[2]||""),this.g=ki(h[3]||"",!0),Ea(this,h[4]),this.l=ki(h[5]||"",!0),_p(this,h[6]||"",!0),this.m=ki(h[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}Mr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Pi(h,xp,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Pi(h,xp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Pi(f,f.charAt(0)=="/"?wE:xE,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Pi(f,IE)),a.join("")};function In(a){return new Mr(a)}function wa(a,h,f){a.j=f?ki(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ea(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function _p(a,h,f){h instanceof Ri?(a.i=h,TE(a.i,a.h)):(f||(h=Pi(h,EE)),a.i=new Ri(h,a.h))}function ve(a,h,f){a.i.set(h,f)}function Ia(a){return ve(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ki(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Pi(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,_E),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function _E(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var xp=/[#\/\?@]/g,xE=/[#\?:]/g,wE=/[#\?]/g,EE=/[#\?@]/g,IE=/#/g;function Ri(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Jn(a){a.g||(a.g=new Map,a.h=0,a.i&&vE(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ri.prototype,t.add=function(a,h){Jn(this),this.i=null,a=Es(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function wp(a,h){Jn(a),h=Es(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Ep(a,h){return Jn(a),h=Es(a,h),a.g.has(h)}t.forEach=function(a,h){Jn(this),this.g.forEach(function(f,v){f.forEach(function(j){a.call(h,j,v,this)},this)},this)},t.na=function(){Jn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let v=0;v<h.length;v++){const j=a[v];for(let O=0;O<j.length;O++)f.push(h[v])}return f},t.V=function(a){Jn(this);let h=[];if(typeof a=="string")Ep(this,a)&&(h=h.concat(this.g.get(Es(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return Jn(this),this.i=null,a=Es(this,a),Ep(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Ip(a,h,f){wp(a,h),0<f.length&&(a.i=null,a.g.set(Es(a,h),A(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var v=h[f];const O=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var j=O;$[v]!==""&&(j+="="+encodeURIComponent(String($[v]))),a.push(j)}}return this.i=a.join("&")};function Es(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function TE(a,h){h&&!a.j&&(Jn(a),a.i=null,a.g.forEach(function(f,v){var j=v.toLowerCase();v!=j&&(wp(this,v),Ip(this,j,f))},a)),a.j=h}function bE(a,h){const f=new Ai;if(u.Image){const v=new Image;v.onload=x(Zn,f,"TestLoadImage: loaded",!0,h,v),v.onerror=x(Zn,f,"TestLoadImage: error",!1,h,v),v.onabort=x(Zn,f,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(Zn,f,"TestLoadImage: timeout",!1,h,v),u.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function SE(a,h){const f=new Ai,v=new AbortController,j=setTimeout(()=>{v.abort(),Zn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(j),O.ok?Zn(f,"TestPingServer: ok",!0,h):Zn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),Zn(f,"TestPingServer: error",!1,h)})}function Zn(a,h,f,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(f)}catch{}}function NE(){this.g=new uE}function AE(a,h,f){const v=f||"";try{yp(a,function(j,O){let $=j;d(j)&&($=lc(j)),h.push(v+O+"="+encodeURIComponent($))})}catch(j){throw h.push(v+"type="+encodeURIComponent("_badmap")),j}}function ji(a){this.l=a.Ub||null,this.j=a.eb||!1}S(ji,uc),ji.prototype.g=function(){return new Ta(this.l,this.j)},ji.prototype.i=function(a){return function(){return a}}({});function Ta(a,h){et.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Ta,et),t=Ta.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Oi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Di(this):Oi(this),this.readyState==3&&Tp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Di(this))},t.Qa=function(a){this.g&&(this.response=a,Di(this))},t.ga=function(){this.g&&Di(this)};function Di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Oi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Oi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bp(a){let h="";return M(a,function(f,v){h+=v,h+=":",h+=f,h+=`\r
`}),h}function _c(a,h,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=bp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):ve(a,h,f))}function Ae(a){et.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ae,et);var CE=/^https?$/i,kE=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hc.g(),this.v=this.o?ep(this.o):ep(hc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){Sp(this,O);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)f.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())f.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(O=>O.toLowerCase()=="content-type"),j=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(kE,h,void 0))||v||j||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of f)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cp(this),this.u=!0,this.g.send(a),this.u=!1}catch(O){Sp(this,O)}};function Sp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Np(a),ba(a)}function Np(a){a.A||(a.A=!0,ft(a,"complete"),ft(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ft(this,"complete"),ft(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ap(this):this.bb())},t.bb=function(){Ap(this)};function Ap(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Tn(a)!=4||a.Z()!=2)){if(a.u&&Tn(a)==4)Ym(a.Ea,0,a);else if(ft(a,"readystatechange"),Tn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var v;if(v=$===0){var j=String(a.D).match(vp)[1]||null;!j&&u.self&&u.self.location&&(j=u.self.location.protocol.slice(0,-1)),v=!CE.test(j?j.toLowerCase():"")}f=v}if(f)ft(a,"complete"),ft(a,"success");else{a.m=6;try{var O=2<Tn(a)?a.g.statusText:""}catch{O=""}a.l=O+" ["+a.Z()+"]",Np(a)}}finally{ba(a)}}}}function ba(a,h){if(a.g){Cp(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ft(a,"ready");try{f.onreadystatechange=v}catch{}}}function Cp(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Tn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),lE(h)}};function kp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function PE(a){const h={};a=(a.g&&2<=Tn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(T(a[v]))continue;var f=k(a[v]);const j=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const O=h[j]||[];h[j]=O,O.push(f)}b(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function Pp(a){this.Aa=0,this.i=[],this.j=new Ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,a),this.cb=Vi("retryDelaySeedMs",1e4,a),this.Wa=Vi("forwardChannelMaxRetries",2,a),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new hp(a&&a.concurrentRequestLimit),this.Da=new NE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Pp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,v){mt(0),this.W=a,this.H=h||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=Up(this,null,this.W),Na(this)};function xc(a){if(Rp(a),a.G==3){var h=a.U++,f=In(a.I);if(ve(f,"SID",a.K),ve(f,"RID",h),ve(f,"TYPE","terminate"),Li(a,f),h=new Xn(a,a.j,h),h.L=2,h.v=Ia(In(f)),f=!1,u.navigator&&u.navigator.sendBeacon)try{f=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&u.Image&&(new Image().src=h.v,f=!0),f||(h.g=zp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),xa(h)}Fp(a)}function Sa(a){a.g&&(Ec(a),a.g.cancel(),a.g=null)}function Rp(a){Sa(a),a.u&&(u.clearTimeout(a.u),a.u=null),Aa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Na(a){if(!fp(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ze||Q(),B||(Ze(),B=!0),H.add(h,a),a.B=0}}function RE(a,h){return mp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ni(p(a.Ga,a,h),Mp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new Xn(this,this.j,a);let O=this.o;if(this.S&&(O?(O=y(O),_(O,this.S)):O=this.S),this.m!==null||this.O||(j.H=O,O=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Dp(this,j,h),f=In(this.I),ve(f,"RID",a),ve(f,"CVER",22),this.D&&ve(f,"X-HTTP-Session-Id",this.D),Li(this,f),O&&(this.O?h="headers="+encodeURIComponent(String(bp(O)))+"&"+h:this.m&&_c(f,this.m,O)),vc(this.h,j),this.Ua&&ve(f,"TYPE","init"),this.P?(ve(f,"$req",h),ve(f,"SID","null"),j.T=!0,mc(j,f,null)):mc(j,f,h),this.G=2}}else this.G==3&&(a?jp(this,a):this.i.length==0||fp(this.h)||jp(this))};function jp(a,h){var f;h?f=h.l:f=a.U++;const v=In(a.I);ve(v,"SID",a.K),ve(v,"RID",f),ve(v,"AID",a.T),Li(a,v),a.m&&a.o&&_c(v,a.m,a.o),f=new Xn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Dp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vc(a.h,f),mc(f,v,h)}function Li(a,h){a.H&&M(a.H,function(f,v){ve(h,v,f)}),a.l&&yp({},function(f,v){ve(h,v,f)})}function Dp(a,h,f){f=Math.min(a.i.length,f);var v=a.l?p(a.l.Na,a.l,a):null;e:{var j=a.i;let O=-1;for(;;){const $=["count="+f];O==-1?0<f?(O=j[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let me=!0;for(let We=0;We<f;We++){let ae=j[We].g;const tt=j[We].map;if(ae-=O,0>ae)O=Math.max(0,j[We].g-100),me=!1;else try{AE(tt,$,"req"+ae+"_")}catch{v&&v(tt)}}if(me){v=$.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,v}function Op(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ze||Q(),B||(Ze(),B=!0),H.add(h,a),a.v=0}}function wc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ni(p(a.Fa,a),Mp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Vp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ni(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Sa(this),Vp(this))};function Ec(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Vp(a){a.g=new Xn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=In(a.qa);ve(h,"RID","rpc"),ve(h,"SID",a.K),ve(h,"AID",a.T),ve(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ve(h,"TO",a.ja),ve(h,"TYPE","xmlhttp"),Li(a,h),a.m&&a.o&&_c(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Ia(In(h)),f.m=null,f.P=!0,up(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Sa(this),wc(this),mt(19))};function Aa(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Lp(a,h){var f=null;if(a.g==h){Aa(a),Ec(a),a.g=null;var v=2}else if(yc(a.h,h))f=h.D,pp(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;v=ya(),ft(v,new ip(v,f)),Na(a)}else Op(a);else if(j=h.s,j==3||j==0&&0<h.X||!(v==1&&RE(a,h)||v==2&&wc(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),j){case 1:Fr(a,5);break;case 4:Fr(a,10);break;case 3:Fr(a,6);break;default:Fr(a,2)}}}function Mp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Fr(a,h){if(a.j.info("Error code "+h),h==2){var f=p(a.fb,a),v=a.Xa;const j=!v;v=new Mr(v||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||wa(v,"https"),Ia(v),j?bE(v.toString(),f):SE(v.toString(),f)}else mt(2);a.G=0,a.l&&a.l.sa(h),Fp(a),Rp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Fp(a){if(a.G=0,a.ka=[],a.l){const h=gp(a.h);(h.length!=0||a.i.length!=0)&&(C(a.ka,h),C(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function Up(a,h,f){var v=f instanceof Mr?In(f):new Mr(f);if(v.g!="")h&&(v.g=h+"."+v.g),Ea(v,v.s);else{var j=u.location;v=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var O=new Mr(null);v&&wa(O,v),h&&(O.g=h),j&&Ea(O,j),f&&(O.l=f),v=O}return f=a.D,h=a.ya,f&&h&&ve(v,f,h),ve(v,"VER",a.la),Li(a,v),v}function zp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ae(new ji({eb:f})):new Ae(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $p(){}t=$p.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ca(){}Ca.prototype.g=function(a,h){return new Ct(a,h)};function Ct(a,h){et.call(this),this.g=new Pp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!T(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!T(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Is(this)}S(Ct,et),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){xc(this.g)},Ct.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=lc(a),a=f);h.i.push(new pE(h.Ya++,a)),h.G==3&&Na(h)},Ct.prototype.N=function(){this.g.l=null,delete this.j,xc(this.g),delete this.g,Ct.aa.N.call(this)};function Bp(a){cc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}S(Bp,cc);function qp(){dc.call(this),this.status=1}S(qp,dc);function Is(a){this.g=a}S(Is,$p),Is.prototype.ua=function(){ft(this.g,"a")},Is.prototype.ta=function(a){ft(this.g,new Bp(a))},Is.prototype.sa=function(a){ft(this.g,new qp)},Is.prototype.ra=function(){ft(this.g,"b")},Ca.prototype.createWebChannel=Ca.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,cw=function(){return new Ca},uw=function(){return ya()},lw=Vr,wh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,gl=va,op.COMPLETE="complete",aw=op,tp.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",et.prototype.listen=et.prototype.K,eo=tp,ow=ji,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,iw=Ae}).apply(typeof Qa<"u"?Qa:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let at=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};at.UNAUTHENTICATED=new at(null),at.GOOGLE_CREDENTIALS=new at("google-credentials-uid"),at.FIRST_PARTY=new at("first-party-uid"),at.MOCK_USER=new at("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Ru("@firebase/firestore");function Hi(){return as.logLevel}function G(t,...e){if(as.logLevel<=se.DEBUG){const n=e.map(em);as.debug(`Firestore (${vi}): ${t}`,...n)}}function Wn(t,...e){if(as.logLevel<=se.ERROR){const n=e.map(em);as.error(`Firestore (${vi}): ${t}`,...n)}}function ii(t,...e){if(as.logLevel<=se.WARN){const n=e.map(em);as.warn(`Firestore (${vi}): ${t}`,...n)}}function em(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${vi}) INTERNAL ASSERTION FAILED: `+t;throw Wn(e),new Error(e)}function pe(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(at.UNAUTHENTICATED))}shutdown(){}}class aC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lC{constructor(e){this.t=e,this.currentUser=at.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Mn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new dw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new at(e)}}class uC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=at.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(at.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new dC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=fC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Fe(0,0))}static max(){return new J(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Bo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Bo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends Bo{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const mC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends Bo{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return mC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new q(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new q(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(xe.fromString(e))}static fromName(e){return new K(xe.fromString(e).popFirst(5))}static empty(){return new K(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new xe(e.slice()))}}function pC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new Nr(s,K.empty(),e)}function gC(t){return new Nr(t.readTime,t.key,-1)}class Nr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Nr(J.min(),K.empty(),-1)}static max(){return new Nr(J.max(),K.empty(),-1)}}function yC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _C{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==vC)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++u,u===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function xC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function la(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tm.oe=-1;function Vu(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function wC(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ya(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ya(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ya(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ya(this.root,e,this.comparator,!0)}}class Ya{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ge.RED,this.left=s??Ge.EMPTY,this.right=i??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ge(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ge.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ge(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ye)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ye(this.comparator);return n.data=e,n}}class $y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new Ye(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new mw("Invalid base64 string: "+i):i}}(e);return new Je(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const EC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(t){if(pe(!!t),typeof t=="string"){let e=0;const n=EC.exec(t);if(pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ls(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rm(t){const e=t.mapValue.fields.__previous_value__;return nm(e)?rm(e):e}function qo(t){const e=Ar(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Wo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nm(t)?4:bC(t)?9007199254740991:TC(t)?10:11:X()}function wn(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qo(t).isEqual(qo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ar(s.timestampValue),u=Ar(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ls(s.bytesValue).isEqual(ls(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),u=ke(i.doubleValue);return o===u?nu(o)===nu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],wn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(zy(o)!==zy(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!wn(o[c],u[c])))return!1;return!0}(t,e);default:return X()}}function Ho(t,e){return(t.values||[]).find(n=>wn(n,e))!==void 0}function ai(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=ke(i.integerValue||i.doubleValue),c=ke(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return By(t.timestampValue,e.timestampValue);case 4:return By(qo(t),qo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(i,o){const u=ls(i),c=ls(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const m=ue(u[d],c[d]);if(m!==0)return m}return ue(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ue(ke(i.latitude),ke(o.latitude));return u!==0?u:ue(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,m;const g=i.fields||{},p=o.fields||{},x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,S=(c=p.value)===null||c===void 0?void 0:c.arrayValue,A=ue(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((m=S==null?void 0:S.values)===null||m===void 0?void 0:m.length)||0);return A!==0?A:qy(x,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Xa.mapValue&&o===Xa.mapValue)return 0;if(i===Xa.mapValue)return 1;if(o===Xa.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let g=0;g<c.length&&g<m.length;++g){const p=ue(c[g],m[g]);if(p!==0)return p;const x=ai(u[c[g]],d[m[g]]);if(x!==0)return x}return ue(c.length,m.length)}(t.mapValue,e.mapValue);default:throw X()}}function By(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Ar(t),r=Ar(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function qy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ai(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function li(t){return Eh(t)}function Eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ls(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Eh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Eh(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function Wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ih(t){return!!t&&"integerValue"in t}function sm(t){return!!t&&"arrayValue"in t}function Hy(t){return!!t&&"nullValue"in t}function Gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function TC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function po(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=po(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=po(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.value=e}static empty(){return new Et({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=po(n)}setAll(e){let n=Ke.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=po(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Et(po(this.value))}}function pw(t){const e=[];return vs(t.fields,(n,r)=>{const s=new Ke([n]);if(yl(r)){const i=pw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ct(e,0,J.min(),J.min(),J.min(),Et.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,J.min(),J.min(),Et.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,J.min(),J.min(),Et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.position=e,this.inclusive=n}}function Ky(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n="asc"){this.field=e,this.dir=n}}function SC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gw=class{};class Oe extends gw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new AC(e,n,r):n==="array-contains"?new PC(e,r):n==="in"?new RC(e,r):n==="not-in"?new jC(e,r):n==="array-contains-any"?new DC(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new CC(e,r):new kC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ai(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends gw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ln(e,n)}matches(e){return yw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yw(t){return t.op==="and"}function vw(t){return NC(t)&&yw(t)}function NC(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function Th(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+li(t.value);if(vw(t))return t.filters.map(e=>Th(e)).join(",");{const e=t.filters.map(n=>Th(n)).join(",");return`${t.op}(${e})`}}function _w(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&wn(r.value,s.value)}(t,e):t instanceof ln?function(r,s){return s instanceof ln&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&_w(o,s.filters[u]),!0):!1}(t,e):void X()}function xw(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`}(t):t instanceof ln?function(n){return n.op.toString()+" {"+n.getFilters().map(xw).join(" ,")+"}"}(t):"Filter"}class AC extends Oe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class CC extends Oe{constructor(e,n){super(e,"in",n),this.keys=ww("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kC extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=ww("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ww(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class PC extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sm(n)&&Ho(n.arrayValue,this.value)}}class RC extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ho(this.value.arrayValue,n)}}class jC extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ho(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ho(this.value.arrayValue,n)}}class DC extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ho(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function Yy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new OC(t,e,n,r,s,i,o)}function im(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Th(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Vu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>li(r)).join(",")),e.ue=n}return e.ue}function om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!SC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_w(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function bh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function VC(t,e,n,r,s,i,o,u){return new _i(t,e,n,r,s,i,o,u)}function am(t){return new _i(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ew(t){return t.collectionGroup!==null}function go(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Ye(Ke.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Go(i,r))}),n.has(Ke.keyField().canonicalString())||e.ce.push(new Go(Ke.keyField(),r))}return e.ce}function vn(t){const e=Z(t);return e.le||(e.le=LC(e,go(t))),e.le}function LC(t,e){if(t.limitType==="F")return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Go(s.field,i)});const n=t.endAt?new ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ru(t.startAt.position,t.startAt.inclusive):null;return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sh(t,e){const n=t.filters.concat([e]);return new _i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function su(t,e,n){return new _i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return om(vn(t),vn(e))&&t.limitType===e.limitType}function Iw(t){return`${im(vn(t))}|lt:${t.limitType}`}function Ss(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xw(s)).join(", ")}]`),Vu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>li(s)).join(",")),`Target(${r})`}(vn(t))}; limitType=${t.limitType})`}function Mu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of go(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=Ky(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,go(r),s)||r.endAt&&!function(o,u,c){const d=Ky(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,go(r),s))}(t,e)}function MC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Tw(t){return(e,n)=>{let r=!1;for(const s of go(t)){const i=FC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function FC(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?ai(c,d):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return fw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Ne(K.comparator);function Hn(){return UC}const bw=new Ne(K.comparator);function to(...t){let e=bw;for(const n of t)e=e.insert(n.key,n);return e}function Sw(t){let e=bw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gr(){return yo()}function Nw(){return yo()}function yo(){return new xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const zC=new Ne(K.comparator),$C=new Ye(K.comparator);function ne(...t){let e=$C;for(const n of t)e=e.add(n);return e}const BC=new Ye(ue);function qC(){return BC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function Aw(t){return{integerValue:""+t}}function WC(t,e){return wC(e)?Aw(e):lm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this._=void 0}}function HC(t,e,n){return t instanceof Ko?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nm(i)&&(i=rm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Qo?kw(t,e):t instanceof Yo?Pw(t,e):function(s,i){const o=Cw(s,i),u=Jy(o)+Jy(s.Pe);return Ih(o)&&Ih(s.Pe)?Aw(u):lm(s.serializer,u)}(t,e)}function GC(t,e,n){return t instanceof Qo?kw(t,e):t instanceof Yo?Pw(t,e):n}function Cw(t,e){return t instanceof iu?function(r){return Ih(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ko extends Fu{}class Qo extends Fu{constructor(e){super(),this.elements=e}}function kw(t,e){const n=Rw(e);for(const r of t.elements)n.some(s=>wn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Yo extends Fu{constructor(e){super(),this.elements=e}}function Pw(t,e){let n=Rw(e);for(const r of t.elements)n=n.filter(s=>!wn(s,r));return{arrayValue:{values:n}}}class iu extends Fu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jy(t){return ke(t.integerValue||t.doubleValue)}function Rw(t){return sm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n){this.field=e,this.transform=n}}function QC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Qo&&s instanceof Qo||r instanceof Yo&&s instanceof Yo?oi(r.elements,s.elements,wn):r instanceof iu&&s instanceof iu?wn(r.Pe,s.Pe):r instanceof Ko&&s instanceof Ko}(t.transform,e.transform)}class YC{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uu{}function jw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new um(t.key,Wt.none()):new ua(t.key,t.data,Wt.none());{const n=t.data,r=Et.empty();let s=new Ye(Ke.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Dr(t.key,r,new Rt(s.toArray()),Wt.none())}}function XC(t,e,n){t instanceof ua?function(s,i,o){const u=s.value.clone(),c=e0(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Dr?function(s,i,o){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=e0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Dw(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vo(t,e,n,r){return t instanceof ua?function(i,o,u,c){if(!vl(i.precondition,o))return u;const d=i.value.clone(),m=t0(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Dr?function(i,o,u,c){if(!vl(i.precondition,o))return u;const d=t0(i.fieldTransforms,c,o),m=o.data;return m.setAll(Dw(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,u){return vl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function JC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Cw(r.transform,s||null);i!=null&&(n===null&&(n=Et.empty()),n.set(r.field,i))}return n||null}function Zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&oi(r,s,(i,o)=>QC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ua extends Uu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Dr extends Uu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function e0(t,e,n){const r=new Map;pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,GC(o,u,n[s]))}return r}function t0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,HC(i,o,e))}return r}class um extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZC extends Uu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&XC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=jw(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,(n,r)=>Zy(n,r))&&oi(this.baseMutations,e.baseMutations,(n,r)=>Zy(n,r))}}class cm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length);let s=function(){return zC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new cm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,ie;function rk(t){switch(t){default:return X();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Ow(t){if(t===void 0)return Wn("GRPC error has no .code"),V.UNKNOWN;switch(t){case je.OK:return V.OK;case je.CANCELLED:return V.CANCELLED;case je.UNKNOWN:return V.UNKNOWN;case je.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case je.INTERNAL:return V.INTERNAL;case je.UNAVAILABLE:return V.UNAVAILABLE;case je.UNAUTHENTICATED:return V.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case je.NOT_FOUND:return V.NOT_FOUND;case je.ALREADY_EXISTS:return V.ALREADY_EXISTS;case je.PERMISSION_DENIED:return V.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case je.ABORTED:return V.ABORTED;case je.OUT_OF_RANGE:return V.OUT_OF_RANGE;case je.UNIMPLEMENTED:return V.UNIMPLEMENTED;case je.DATA_LOSS:return V.DATA_LOSS;default:return X()}}(ie=je||(je={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=new Xr([4294967295,4294967295],0);function n0(t){const e=sk().encode(t),n=new sw;return n.update(e),new Uint8Array(n.digest())}function r0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Xr([n,r],0),new Xr([s,i],0)]}class dm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new no(`Invalid padding: ${n}`);if(r<0)throw new no(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new no(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new no(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Xr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Xr.fromNumber(r)));return s.compare(ik)===1&&(s=new Xr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=n0(e),[r,s]=r0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new dm(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=n0(e),[r,s]=r0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class no extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ca.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(J.min(),s,new Ne(ue),Hn(),ne())}}class ca{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ca(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Vw{constructor(e,n){this.targetId=e,this.me=n}}class Lw{constructor(e,n,r=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class s0{constructor(){this.fe=0,this.ge=o0(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new ca(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=o0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ok{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hn(),this.qe=i0(),this.Qe=new Ne(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(bh(i))if(r===0){const o=new K(i.path);this.Ue(n,o,ct.newNoDocument(o,J.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=ls(r).toUint8Array()}catch(c){if(c instanceof mw)return ii("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new dm(o,s,i)}catch(c){return ii(c instanceof no?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&bh(u.target)){const c=new K(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ct.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new zu(e,n,this.Qe,this.ke,r);return this.ke=Hn(),this.qe=i0(),this.Qe=new Ne(ue),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new s0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ye(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new s0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function i0(){return new Ne(K.comparator)}function o0(){return new Ne(K.comparator)}const ak={asc:"ASCENDING",desc:"DESCENDING"},lk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uk={and:"AND",or:"OR"};class ck{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nh(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dk(t,e){return ou(t,e.toTimestamp())}function _n(t){return pe(!!t),J.fromTimestamp(function(n){const r=Ar(n);return new Fe(r.seconds,r.nanos)}(t))}function hm(t,e){return Ah(t,e).canonicalString()}function Ah(t,e){const n=function(s){return new xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Fw(t){const e=xe.fromString(t);return pe(qw(e)),e}function Ch(t,e){return hm(t.databaseId,e.path)}function sd(t,e){const n=Fw(e);if(n.get(1)!==t.databaseId.projectId)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(zw(n))}function Uw(t,e){return hm(t.databaseId,e)}function hk(t){const e=Fw(t);return e.length===4?xe.emptyPath():zw(e)}function kh(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zw(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function a0(t,e,n){return{name:Ch(t,e),fields:n.value.mapValue.fields}}function fk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(pe(m===void 0||typeof m=="string"),Je.fromBase64String(m||"")):(pe(m===void 0||m instanceof Buffer||m instanceof Uint8Array),Je.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const m=d.code===void 0?V.UNKNOWN:Ow(d.code);return new q(m,d.message||"")}(o);n=new Lw(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sd(t,r.document.name),i=_n(r.document.updateTime),o=r.document.createTime?_n(r.document.createTime):J.min(),u=new Et({mapValue:{fields:r.document.fields}}),c=ct.newFoundDocument(s,i,o,u),d=r.targetIds||[],m=r.removedTargetIds||[];n=new _l(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sd(t,r.document),i=r.readTime?_n(r.readTime):J.min(),o=ct.newNoDocument(s,i),u=r.removedTargetIds||[];n=new _l([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sd(t,r.document),i=r.removedTargetIds||[];n=new _l([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new nk(s,i),u=r.targetId;n=new Vw(u,o)}}return n}function mk(t,e){let n;if(e instanceof ua)n={update:a0(t,e.key,e.value)};else if(e instanceof um)n={delete:Ch(t,e.key)};else if(e instanceof Dr)n={update:a0(t,e.key,e.data),updateMask:Ik(e.fieldMask)};else{if(!(e instanceof ZC))return X();n={verify:Ch(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ko)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Qo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Yo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof iu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function pk(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?_n(s.updateTime):_n(i);return o.isEqual(J.min())&&(o=_n(i)),new YC(o,s.transformResults||[])}(n,e))):[]}function gk(t,e){return{documents:[Uw(t,e.path)]}}function yk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uw(t,s);const i=function(d){if(d.length!==0)return Bw(ln.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(p){return{field:Ns(p.field),direction:xk(p.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Nh(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function vk(t){let e=hk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(g){const p=$w(g);return p instanceof ln&&vw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(p=>function(S){return new Go(As(S.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(g){let p;return p=typeof g=="object"?g.value:g,Vu(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(g){const p=!!g.before,x=g.values||[];return new ru(x,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,x=g.values||[];return new ru(x,p)}(n.endAt)),VC(e,s,o,i,u,"F",c,d)}function _k(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $w(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=As(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=As(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=As(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=As(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(As(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ln.create(n.compositeFilter.filters.map(r=>$w(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function xk(t){return ak[t]}function wk(t){return lk[t]}function Ek(t){return uk[t]}function Ns(t){return{fieldPath:t.canonicalString()}}function As(t){return Ke.fromServerFormat(t.fieldPath)}function Bw(t){return t instanceof Oe?function(n){if(n.op==="=="){if(Gy(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gy(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ns(n.field),op:wk(n.op),value:n.value}}}(t):t instanceof ln?function(n){const r=n.getFilters().map(s=>Bw(s));return r.length===1?r[0]:{compositeFilter:{op:Ek(n.op),filters:r}}}(t):X()}function Ik(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function qw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,r,s,i=J.min(),o=J.min(),u=Je.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.ct=e}}function bk(t){const e=vk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?su(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(){this.un=new Nk}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Nr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Nr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Nk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ye(xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ye(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ui(0)}static kn(){return new ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.changes=new xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vo(r.mutation,s,Rt.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=Gr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=to();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=Hn();const o=yo(),u=function(){return yo()}();return n.forEach((c,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Dr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),vo(m.mutation,d,m.mutation.getFieldMask(),Fe.now())):o.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>{var g;return u.set(d,new Ck(m,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=yo();let s=new Ne((o,u)=>o-u),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||Rt.empty();m=u.applyToLocalView(d,m),r.set(c,m);const g=(s.get(u.batchId)||ne()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,m=c.value,g=Nw();m.forEach(p=>{if(!i.has(p)){const x=jw(n.get(p),r.get(p));x!==null&&g.set(p,x),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Ew(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(Gr());let u=-1,c=i;return o.next(d=>F.forEach(d,(m,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(m)?F.resolve():this.remoteDocumentCache.getEntry(e,m).next(p=>{c=c.insert(m,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ne())).next(m=>({batchId:u,changes:Sw(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=to();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=to();return this.indexManager.getCollectionParents(e,i).next(u=>F.forEach(u,c=>{const d=function(g,p){return new _i(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((g,p)=>{o=o.insert(g,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,ct.newInvalidDocument(m)))});let u=to();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&vo(m.mutation,d,Rt.empty(),Fe.now()),Mu(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:_n(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:bk(s.bundledQuery),readTime:_n(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(){this.overlays=new Ne(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=Gr(),i=n.length+1,o=new K(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=Gr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const u=Gr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>u.set(d,m)),!(u.size()>=s)););return F.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tk(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.Tr=new Ye(ze.Er),this.dr=new Ye(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new xe([])),r=new ze(n,e),s=new ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new xe([])),r=new ze(n,e),s=new ze(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ye(ze.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ek(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new ze(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),s=new ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ye(ue);return n.forEach(s=>{const i=new ze(s,0),o=new ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new ze(new K(i),0);let u=new Ye(ue);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),F.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ze(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.Mr=e,this.docs=function(){return new Ne(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Hn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Hn();const o=n.path,u=new K(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||yC(gC(m),r)<=0||(s.has(m.key)||Mu(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Vk(this)}getSize(e){return F.resolve(this.size)}}class Vk extends Ak{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e){this.persistence=e,this.Nr=new xi(n=>im(n),om),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fm,this.targetCount=0,this.kr=ui.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ui(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tm(0),this.Kr=!1,this.Kr=!0,this.$r=new jk,this.referenceDelegate=e(this),this.Ur=new Lk(this),this.indexManager=new Sk,this.remoteDocumentCache=function(s){return new Ok(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Tk(n),this.Gr=new Pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Dk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new Fk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Fk extends _C{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Jr=new fm,this.Yr=null}static Zr(e){return new mm(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return IS()?8:xC(ht())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Uk;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Hi()<=se.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Ss(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Hi()<=se.DEBUG&&G("QueryEngine","Query:",Ss(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Hi()<=se.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Ss(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vn(n))):F.resolve())}Yi(e,n){if(Xy(n))return F.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=su(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,su(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return Xy(n)||s.isEqual(J.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(Hi()<=se.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ss(n)),this.rs(e,o,n,pC(s,-1)).next(u=>u))})}ts(e,n){let r=new Ye(Tw(e));return n.forEach((s,i)=>{Mu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Hi()<=se.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Ss(n)),this.Ji.getDocumentsMatchingQuery(e,n,Nr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(ue),this._s=new xi(i=>im(i),om),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Bk(t,e,n,r){return new $k(t,e,n,r)}async function Ww(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ne();for(const d of s){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){u.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function qk(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,m){const g=d.batch,p=g.keys();let x=F.resolve();return p.forEach(S=>{x=x.next(()=>m.getEntry(c,S)).next(A=>{const C=d.docVersions.get(S);pe(C!==null),A.version.compareTo(C)<0&&(g.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),m.addEntry(A)))})}),x.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ne();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hw(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Wk(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((m,g)=>{const p=s.get(g);if(!p)return;u.push(n.Ur.removeMatchingKeys(i,m.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,m.addedDocuments,g)));let x=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(Je.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):m.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(m.resumeToken,r)),s=s.insert(g,x),function(A,C,I){return A.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(p,x,m)&&u.push(n.Ur.updateTargetData(i,x))});let c=Hn(),d=ne();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),u.push(Hk(i,o,e.documentUpdates).next(m=>{c=m.Ps,d=m.Is})),!r.isEqual(J.min())){const m=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(m)}return F.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function Hk(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Hn();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):G("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function Gk(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Kk(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new hr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ph(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!la(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function l0(t,e,n){const r=Z(t);let s=J.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const g=Z(c),p=g._s.get(m);return p!==void 0?F.resolve(g.os.get(p)):g.Ur.getTargetData(d,m)}(r,o,vn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:ne())).next(u=>(Qk(r,MC(e),u),{documents:u,Ts:i})))}function Qk(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class u0{constructor(){this.activeTargetIds=qC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yk{constructor(){this.so=new u0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new u0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja=null;function id(){return Ja===null?Ja=function(){return 268435456+Math.round(2147483648*Math.random())}():Ja++,"0x"+Ja.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it="WebChannelConnection";class eP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=id(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(m=>(G("RestConnection",`Received RPC '${n}' ${u}: `,m),m),m=>{throw ii("RestConnection",`RPC '${n}' ${u} failed with error: `,m,"url: ",c,"request:",s),m})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Jk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=id();return new Promise((o,u)=>{const c=new iw;c.setWithCredentials(!0),c.listenOnce(aw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case gl.NO_ERROR:const m=c.getResponseJson();G(it,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(m)),o(m);break;case gl.TIMEOUT:G(it,`RPC '${e}' ${i} timed out`),u(new q(V.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:const g=c.getStatus();if(G(it,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const x=p==null?void 0:p.error;if(x&&x.status&&x.message){const S=function(C){const I=C.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(I)>=0?I:V.UNKNOWN}(x.status);u(new q(S,x.message))}else u(new q(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new q(V.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{G(it,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);G(it,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=id(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cw(),u=uw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.xmlHttpFactory=new ow({})),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");G(it,`Creating RPC '${e}' stream ${s}: ${m}`,c);const g=o.createWebChannel(m,c);let p=!1,x=!1;const S=new Zk({Io:C=>{x?G(it,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(G(it,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),G(it,`RPC '${e}' stream ${s} sending:`,C),g.send(C))},To:()=>g.close()}),A=(C,I,T)=>{C.listen(I,w=>{try{T(w)}catch(D){setTimeout(()=>{throw D},0)}})};return A(g,eo.EventType.OPEN,()=>{x||(G(it,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),A(g,eo.EventType.CLOSE,()=>{x||(x=!0,G(it,`RPC '${e}' stream ${s} transport closed`),S.So())}),A(g,eo.EventType.ERROR,C=>{x||(x=!0,ii(it,`RPC '${e}' stream ${s} transport errored:`,C),S.So(new q(V.UNAVAILABLE,"The operation could not be completed")))}),A(g,eo.EventType.MESSAGE,C=>{var I;if(!x){const T=C.data[0];pe(!!T);const w=T,D=w.error||((I=w[0])===null||I===void 0?void 0:I.error);if(D){G(it,`RPC '${e}' stream ${s} received error:`,D);const L=D.status;let M=function(E){const _=je[E];if(_!==void 0)return Ow(_)}(L),b=D.message;M===void 0&&(M=V.INTERNAL,b="Unknown error status: "+L+" with message "+D.message),x=!0,S.So(new q(M,b)),g.close()}else G(it,`RPC '${e}' stream ${s} received:`,T),S.bo(T)}}),A(u,lw.STAT_EVENT,C=>{C.stat===wh.PROXY?G(it,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===wh.NOPROXY&&G(it,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return new ck(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Wn(n.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tP extends Kw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fk(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?_n(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=kh(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=bh(c)?{documents:gk(i,c)}:{query:yk(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Mw(i,o.resumeToken);const d=Nh(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){u.readTime=ou(i,o.snapshotVersion.toTimestamp());const d=Nh(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=_k(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=kh(this.serializer),n.removeTarget=e,this.a_(n)}}class nP extends Kw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=pk(e.writeResults,e.commitTime),r=_n(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=kh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ah(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Ah(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wn(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=Z(c);d.L_.add(4),await da(d),d.q_.set("Unknown"),d.L_.delete(4),await Bu(d)}(this))})}),this.q_=new sP(r,s)}}async function Bu(t){if(_s(t))for(const e of t.B_)await e(!0)}async function da(t){for(const e of t.B_)await e(!1)}function Qw(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_m(n)?vm(n):wi(n).r_()&&ym(n,e))}function gm(t,e){const n=Z(t),r=wi(n);n.N_.delete(e),r.r_()&&Yw(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function ym(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}wi(t).A_(e)}function Yw(t,e){t.Q_.xe(e),wi(t).R_(e)}function vm(t){t.Q_=new ok({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),wi(t).start(),t.q_.v_()}function _m(t){return _s(t)&&!wi(t).n_()&&t.N_.size>0}function _s(t){return Z(t).L_.size===0}function Xw(t){t.Q_=void 0}async function oP(t){t.q_.set("Online")}async function aP(t){t.N_.forEach((e,n)=>{ym(t,e)})}async function lP(t,e){Xw(t),_m(t)?(t.q_.M_(e),vm(t)):t.q_.set("Unknown")}async function uP(t,e,n){if(t.q_.set("Online"),e instanceof Lw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await au(t,r)}else if(e instanceof _l?t.Q_.Ke(e):e instanceof Vw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await Hw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.N_.get(d);m&&i.N_.set(d,m.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const m=i.N_.get(c);if(!m)return;i.N_.set(c,m.withResumeToken(Je.EMPTY_BYTE_STRING,m.snapshotVersion)),Yw(i,c);const g=new hr(m.target,c,d,m.sequenceNumber);ym(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await au(t,r)}}async function au(t,e,n){if(!la(e))throw e;t.L_.add(1),await da(t),t.q_.set("Offline"),n||(n=()=>Hw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bu(t)})}function Jw(t,e){return e().catch(n=>au(t,n,e))}async function qu(t){const e=Z(t),n=Cr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;cP(e);)try{const s=await Gk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,dP(e,s)}catch(s){await au(e,s)}Zw(e)&&e1(e)}function cP(t){return _s(t)&&t.O_.length<10}function dP(t,e){t.O_.push(e);const n=Cr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Zw(t){return _s(t)&&!Cr(t).n_()&&t.O_.length>0}function e1(t){Cr(t).start()}async function hP(t){Cr(t).p_()}async function fP(t){const e=Cr(t);for(const n of t.O_)e.m_(n.mutations)}async function mP(t,e,n){const r=t.O_.shift(),s=cm.from(r,e,n);await Jw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qu(t)}async function pP(t,e){e&&Cr(t).V_&&await async function(r,s){if(function(o){return rk(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Cr(r).s_(),await Jw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qu(r)}}(t,e),Zw(t)&&e1(t)}async function d0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await da(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bu(n)}async function gP(t,e){const n=Z(t);e?(n.L_.delete(2),await Bu(n)):e||(n.L_.add(2),await da(n),n.q_.set("Unknown"))}function wi(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new tP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:oP.bind(null,t),Ro:aP.bind(null,t),mo:lP.bind(null,t),d_:uP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_m(t)?vm(t):t.q_.set("Unknown")):(await t.K_.stop(),Xw(t))})),t.K_}function Cr(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new nP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hP.bind(null,t),mo:pP.bind(null,t),f_:fP.bind(null,t),g_:mP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qu(t)):(await t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new xm(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(t,e){if(Wn("AsyncQueue",`${e}: ${t}`),la(t))return new q(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=to(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Ys(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ys)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ys;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(){this.W_=new Ne(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ci{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new ci(e,n,Ys.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vP{constructor(){this.queries=f0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=f0(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new q(V.ABORTED,"Firestore shutting down"))}}function f0(){return new xi(t=>Iw(t),Lu)}async function t1(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new yP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=wm(o,`Initialization of query '${Ss(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Em(n)}async function n1(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _P(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Em(n)}function xP(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Em(t){t.Y_.forEach(e=>{e.next()})}var Rh,m0;(m0=Rh||(Rh={})).ea="default",m0.Cache="cache";class r1{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ci(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ci.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class wP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=Tw(e),this.Ra=new Ys(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,g)=>{const p=s.get(m),x=Mu(this.query,g)?g:null,S=!!p&&this.mutatedKeys.has(p.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let C=!1;p&&x?p.data.isEqual(x.data)?S!==A&&(r.track({type:3,doc:x}),C=!0):this.ga(p,x)||(r.track({type:2,doc:x}),C=!0,(c&&this.Aa(x,c)>0||d&&this.Aa(x,d)<0)&&(u=!0)):!p&&x?(r.track({type:0,doc:x}),C=!0):p&&!x&&(r.track({type:1,doc:p}),C=!0,(c||d)&&(u=!0)),C&&(x?(o=o.add(x),i=A?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((m,g)=>function(x,S){const A=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return A(x)-A(S)}(m.type,g.type)||this.Aa(m.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new ci(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new i1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new s1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ci.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IP{constructor(e){this.key=e,this.va=!1}}class TP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new xi(u=>Iw(u),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(K.comparator),this.Na=new Map,this.La=new fm,this.Ba={},this.ka=new Map,this.qa=ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function bP(t,e,n=!0){const r=d1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await o1(r,e,n,!0),s}async function SP(t,e){const n=d1(t);await o1(n,e,!0,!1)}async function o1(t,e,n,r){const s=await Kk(t.localStore,vn(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let u;return r&&(u=await NP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Qw(t.remoteStore,s),u}async function NP(t,e,n,r,s){t.Ka=(g,p,x)=>async function(A,C,I,T){let w=C.view.ma(I);w.ns&&(w=await l0(A.localStore,C.query,!1).then(({documents:b})=>C.view.ma(b,w)));const D=T&&T.targetChanges.get(C.targetId),L=T&&T.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(w,A.isPrimaryClient,D,L);return g0(A,C.targetId,M.wa),M.snapshot}(t,g,p,x);const i=await l0(t.localStore,e,!0),o=new wP(e,i.Ts),u=o.ma(i.documents),c=ca.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);g0(t,n,d.wa);const m=new EP(e,n,o);return t.Fa.set(e,m),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function AP(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Lu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ph(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gm(r.remoteStore,s.targetId),jh(r,s.targetId)}).catch(aa)):(jh(r,s.targetId),await Ph(r.localStore,s.targetId,!0))}async function CP(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gm(n.remoteStore,r.targetId))}async function kP(t,e,n){const r=LP(t);try{const s=await function(o,u){const c=Z(o),d=Fe.now(),m=u.reduce((x,S)=>x.add(S.key),ne());let g,p;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let S=Hn(),A=ne();return c.cs.getEntries(x,m).next(C=>{S=C,S.forEach((I,T)=>{T.isValidDocument()||(A=A.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,S)).next(C=>{g=C;const I=[];for(const T of u){const w=JC(T,g.get(T.key).overlayedDocument);w!=null&&I.push(new Dr(T.key,w,pw(w.value.mapValue),Wt.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,I,u)}).next(C=>{p=C;const I=C.applyToLocalDocumentSet(g,A);return c.documentOverlayCache.saveOverlays(x,C.batchId,I)})}).then(()=>({batchId:p.batchId,changes:Sw(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ne(ue)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ha(r,s.changes),await qu(r.remoteStore)}catch(s){const i=wm(s,"Failed to persist write");n.reject(i)}}async function a1(t,e){const n=Z(t);try{const r=await Wk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?pe(o.va):s.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await ha(n,r,e)}catch(r){await aa(r)}}function p0(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=Z(o);c.onlineState=u;let d=!1;c.queries.forEach((m,g)=>{for(const p of g.j_)p.Z_(u)&&(d=!0)}),d&&Em(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function PP(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ne(K.comparator);o=o.insert(i,ct.newNoDocument(i,J.min()));const u=ne().add(i),c=new zu(J.min(),new Map,new Ne(ue),o,u);await a1(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Im(r)}else await Ph(r.localStore,e,!1).then(()=>jh(r,e,n)).catch(aa)}async function RP(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await qk(n.localStore,e);u1(n,r,null),l1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ha(n,s)}catch(s){await aa(s)}}async function jP(t,e,n){const r=Z(t);try{const s=await function(o,u){const c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(pe(g!==null),m=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(r.localStore,e);u1(r,e,n),l1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ha(r,s)}catch(s){await aa(s)}}function l1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function u1(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function jh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||c1(t,r)})}function c1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Im(t))}function g0(t,e,n){for(const r of n)r instanceof s1?(t.La.addReference(r.key,e),DP(t,r)):r instanceof i1?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||c1(t,r.key)):X()}function DP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),Im(t))}function Im(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new IP(n)),t.Oa=t.Oa.insert(n,r),Qw(t.remoteStore,new hr(vn(am(n.path)),r,"TargetPurposeLimboResolution",tm.oe))}}async function ha(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=pm.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const m=Z(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>F.forEach(d,p=>F.forEach(p.$i,x=>m.persistence.referenceDelegate.addReference(g,p.targetId,x)).next(()=>F.forEach(p.Ui,x=>m.persistence.referenceDelegate.removeReference(g,p.targetId,x)))))}catch(g){if(!la(g))throw g;G("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const x=m.os.get(p),S=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(S);m.os=m.os.insert(p,A)}}}(r.localStore,i))}async function OP(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await Ww(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new q(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ha(n,r.hs)}}function VP(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function d1(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Ca.d_=_P.bind(null,e.eventManager),e.Ca.$a=xP.bind(null,e.eventManager),e}function LP(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,e),e}class y0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Bk(this.persistence,new zk,e.initialUser,this.serializer)}createPersistence(e){return new Mk(mm.Zr,this.serializer)}createSharedClientState(e){return new Yk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class MP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OP.bind(null,this.syncEngine),await gP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vP}()}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=function(i){return new eP(i)}(e.databaseInfo);return function(i,o,u,c){return new rP(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new iP(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>p0(this.syncEngine,n,0),function(){return c0.D()?new c0:new Xk}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,m){const g=new TP(s,i,o,u,c,d);return m&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);G("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await da(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=at.UNAUTHENTICATED,this.clientId=hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{G("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(G("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ad(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ww(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function v0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>d0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>d0(e.remoteStore,s)),t._onlineComponents=e}function UP(t){return t.name==="FirebaseError"?t.code===V.FAILED_PRECONDITION||t.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function zP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!UP(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await ad(t,new y0)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await ad(t,new y0);return t._offlineComponents}async function f1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await v0(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await v0(t,new MP))),t._onlineComponents}function $P(t){return f1(t).then(e=>e.syncEngine)}async function m1(t){const e=await f1(t),n=e.eventManager;return n.onListen=bP.bind(null,e.syncEngine),n.onUnlisten=AP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=CP.bind(null,e.syncEngine),n}function BP(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new h1({next:p=>{o.enqueueAndForget(()=>n1(i,g));const x=p.docs.has(u);!x&&p.fromCache?d.reject(new q(V.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&c&&c.source==="server"?d.reject(new q(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new r1(am(u.path),m,{includeMetadataChanges:!0,_a:!0});return t1(i,g)}(await m1(t),t.asyncQueue,e,n,r)),r.promise}function qP(t,e,n={}){const r=new Mn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const m=new h1({next:p=>{o.enqueueAndForget(()=>n1(i,g)),p.fromCache&&c.source==="server"?d.reject(new q(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new r1(u,m,{includeMetadataChanges:!0,_a:!0});return t1(i,g)}(await m1(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t,e,n){if(!n)throw new q(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,r){if(e===!0&&r===!0)throw new q(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x0(t){if(!K.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w0(t){if(K.isDocumentKey(t))throw new q(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wu(t);throw new q(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function HP(t,e){if(e<=0)throw new q(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new E0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new E0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oC;switch(r.type){case"firstParty":return new cC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=_0.get(n);r&&(G("ComponentProvider","Removing Datastore"),_0.delete(n),r.terminate())}(this),Promise.resolve()}}function GP(t,e,n,r={}){var s;const i=(t=un(t,Hu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=at.MOCK_USER;else{u=vS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new q(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new at(d)}t._authCredentials=new aC(new dw(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Or(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}}class Tr extends Or{constructor(e,n,r){super(e,n,am(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new K(e))}withConverter(e){return new Tr(this.firestore,e,this._path)}}function $e(t,e,...n){if(t=Ie(t),g1("collection","path",e),t instanceof Hu){const r=xe.fromString(e,...n);return w0(r),new Tr(t,null,r)}{if(!(t instanceof vt||t instanceof Tr))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return w0(r),new Tr(t.firestore,null,r)}}function gt(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=hw.newId()),g1("doc","path",e),t instanceof Hu){const r=xe.fromString(e,...n);return x0(r),new vt(t,null,new K(r))}{if(!(t instanceof vt||t instanceof Tr))throw new q(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return x0(r),new vt(t.firestore,t instanceof Tr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Gw(this,"async_queue_retry"),this.Eu=()=>{const n=od();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=od();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Mn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!la(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw Wn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=xm.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&X()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class xs extends Hu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new KP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||y1(this),this._firestoreClient.terminate()}}function QP(t,e){const n=typeof t=="object"?t:$f(),r=typeof t=="string"?t:"(default)",s=gs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=gS("firestore");i&&GP(s,...i)}return s}function Tm(t){return t._firestoreClient||y1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function y1(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,m){return new IC(u,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,p1(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new FP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(Je.fromBase64String(e))}catch(n){throw new q(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new di(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=/^__.*__$/;class XP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ua(e,this.data,n,this.fieldTransforms)}}class v1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Dr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Nm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Nm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return lu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(_1(this.wu)&&YP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class JP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}Nu(e,n,r,s=!1){return new Nm({wu:e,methodName:n,Ou:r,path:Ke.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qu(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new JP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function x1(t,e,n,r,s,i={}){const o=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);Cm("Data must be an object, but it was:",o,r);const u=w1(r,o);let c,d;if(i.merge)c=new Rt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const g of i.mergeFields){const p=Dh(e,g,n);if(!o.contains(p))throw new q(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);I1(m,p)||m.push(p)}c=new Rt(m),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new XP(new Et(u),c,d)}class Yu extends Ku{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yu}}class Am extends Ku{_toFieldTransform(e){return new KC(e.path,new Ko)}isEqual(e){return e instanceof Am}}function ZP(t,e,n,r){const s=t.Nu(1,e,n);Cm("Data must be an object, but it was:",s,r);const i=[],o=Et.empty();vs(r,(c,d)=>{const m=km(e,c,n);d=Ie(d);const g=s.Cu(m);if(d instanceof Yu)i.push(m);else{const p=fa(d,g);p!=null&&(i.push(m),o.set(m,p))}});const u=new Rt(i);return new v1(o,u,s.fieldTransforms)}function eR(t,e,n,r,s,i){const o=t.Nu(1,e,n),u=[Dh(e,r,n)],c=[s];if(i.length%2!=0)throw new q(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)u.push(Dh(e,i[p])),c.push(i[p+1]);const d=[],m=Et.empty();for(let p=u.length-1;p>=0;--p)if(!I1(d,u[p])){const x=u[p];let S=c[p];S=Ie(S);const A=o.Cu(x);if(S instanceof Yu)d.push(x);else{const C=fa(S,A);C!=null&&(d.push(x),m.set(x,C))}}const g=new Rt(d);return new v1(m,g,o.fieldTransforms)}function tR(t,e,n,r=!1){return fa(n,t.Nu(r?4:3,e))}function fa(t,e){if(E1(t=Ie(t)))return Cm("Unsupported field value:",e,t),w1(t,e);if(t instanceof Ku)return function(r,s){if(!_1(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=fa(u,s.Fu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Fe.fromDate(r);return{timestampValue:ou(s.serializer,i)}}if(r instanceof Fe){const i=new Fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(s.serializer,i)}}if(r instanceof bm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof di)return{bytesValue:Mw(s.serializer,r._byteString)};if(r instanceof vt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sm)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Mu("VectorValues must only contain numeric values.");return lm(u.serializer,c)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${Wu(r)}`)}(t,e)}function w1(t,e){const n={};return fw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,s)=>{const i=fa(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function E1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof bm||t instanceof di||t instanceof vt||t instanceof Ku||t instanceof Sm)}function Cm(t,e,n){if(!E1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Wu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Dh(t,e,n){if((e=Ie(e))instanceof Gu)return e._internalPath;if(typeof e=="string")return km(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,n)}const nR=new RegExp("[~\\*/\\[\\]]");function km(t,e,n){if(e.search(nR)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gu(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(V.INVALID_ARGUMENT,u+t+c)}function I1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class rR extends T1{data(){return super.data()}}function Pm(t,e){return typeof e=="string"?km(t,e):e instanceof Gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rm{}class jm extends Rm{}function iR(t,e,...n){let r=[];e instanceof Rm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Om).length,u=i.filter(c=>c instanceof Dm).length;if(o>1||o>0&&u>0)throw new q(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dm extends jm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dm(e,n,r)}_apply(e){const n=this._parse(e);return b1(e._query,n),new Or(e.firestore,e.converter,Sh(e._query,n))}_parse(e){const n=Qu(e.firestore);return function(i,o,u,c,d,m,g){let p;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new q(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){T0(g,m);const x=[];for(const S of g)x.push(I0(c,i,S));p={arrayValue:{values:x}}}else p=I0(c,i,g)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||T0(g,m),p=tR(u,o,g,m==="in"||m==="not-in");return Oe.create(d,m,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Om extends Rm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)b1(o,c),o=Sh(o,c)}(e._query,n),new Or(e.firestore,e.converter,Sh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vm extends jm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Go(i,o)}(e._query,this._field,this._direction);return new Or(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new _i(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function oR(t,e="asc"){const n=e,r=Pm("orderBy",t);return Vm._create(r,n)}class Lm extends jm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lm(e,n,r)}_apply(e){return new Or(e.firestore,e.converter,su(e._query,this._limit,this._limitType))}}function aR(t){return HP("limit",t),Lm._create("limit",t,"F")}function I0(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new q(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ew(e)&&n.indexOf("/")!==-1)throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xe.fromString(n));if(!K.isDocumentKey(r))throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wy(t,new K(r))}if(n instanceof vt)return Wy(t,n._key);throw new q(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wu(n)}.`)}function T0(t,e){if(!Array.isArray(t)||t.length===0)throw new q(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lR{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new Sm(i)}convertGeoPoint(e){return new bm(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qo(e));default:return null}}convertTimestamp(e){const n=Ar(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);pe(qw(r));const s=new Wo(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Wn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class N1 extends T1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xl extends N1{data(e={}){return super.data(e)}}class uR{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xl(this._firestore,this._userDataWriter,r.key,r,new ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new xl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ro(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new xl(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ro(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),m=o.indexOf(u.doc.key)),{type:cR(u.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){t=un(t,vt);const e=un(t.firestore,xs);return BP(Tm(e),t._key).then(n=>dR(e,t,n))}class A1 extends lR{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function Nn(t){t=un(t,Or);const e=un(t.firestore,xs),n=Tm(e),r=new A1(e);return sR(t._query),qP(n,t._query).then(s=>new uR(e,r,t,s))}function b0(t,e,n){t=un(t,vt);const r=un(t.firestore,xs),s=S1(t.converter,e);return Xu(r,[x1(Qu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wt.none())])}function Xs(t,e,n,...r){t=un(t,vt);const s=un(t.firestore,xs),i=Qu(s);let o;return o=typeof(e=Ie(e))=="string"||e instanceof Gu?eR(i,"updateDoc",t._key,e,n,r):ZP(i,"updateDoc",t._key,e),Xu(s,[o.toMutation(t._key,Wt.exists(!0))])}function wl(t){return Xu(un(t.firestore,xs),[new um(t._key,Wt.none())])}function kn(t,e){const n=un(t.firestore,xs),r=gt(t),s=S1(t.converter,e);return Xu(n,[x1(Qu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function Xu(t,e){return function(r,s){const i=new Mn;return r.asyncQueue.enqueueAndForget(async()=>kP(await $P(r),s,i)),i.promise}(Tm(t),e)}function dR(t,e,n){const r=n.docs.get(e._key),s=new A1(t);return new N1(t,s,e._key,r,new ro(n.hasPendingWrites,n.fromCache),e.converter)}function ld(){return new Am("serverTimestamp")}(function(e,n=!0){(function(s){vi=s})(yi),xn(new an("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new xs(new lC(r.getProvider("auth-internal")),new hC(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new q(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(d.options.projectId,m)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),qt(Uy,"4.7.0",e),qt(Uy,"4.7.0","esm2017")})();const C1="@firebase/installations",Fm="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=1e4,P1=`w:${Fm}`,R1="FIS_v2",hR="https://firebaseinstallations.googleapis.com/v1",fR=60*60*1e3,mR="installations",pR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},cs=new ps(mR,pR,gR);function j1(t){return t instanceof cn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1({projectId:t}){return`${hR}/projects/${t}/installations`}function O1(t){return{token:t.token,requestStatus:2,expiresIn:vR(t.expiresIn),creationTime:Date.now()}}async function V1(t,e){const r=(await e.json()).error;return cs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function L1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yR(t,{refreshToken:e}){const n=L1(t);return n.append("Authorization",_R(e)),n}async function M1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vR(t){return Number(t.replace("s","000"))}function _R(t){return`${R1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=D1(t),s=L1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:R1,appId:t.appId,sdkVersion:P1},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await M1(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:O1(d.authToken)}}else throw await V1("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=/^[cdef][\w-]{21}$/,Oh="";function IR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=TR(t);return ER.test(n)?n:Oh}catch{return Oh}}function TR(t){return wR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=new Map;function z1(t,e){const n=Ju(t);$1(n,e),bR(n,e)}function $1(t,e){const n=U1.get(t);if(n)for(const r of n)r(e)}function bR(t,e){const n=SR();n&&n.postMessage({key:t,fid:e}),NR()}let Kr=null;function SR(){return!Kr&&"BroadcastChannel"in self&&(Kr=new BroadcastChannel("[Firebase] FID Change"),Kr.onmessage=t=>{$1(t.data.key,t.data.fid)}),Kr}function NR(){U1.size===0&&Kr&&(Kr.close(),Kr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="firebase-installations-database",CR=1,ds="firebase-installations-store";let ud=null;function Um(){return ud||(ud=yx(AR,CR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ds)}}})),ud}async function uu(t,e){const n=Ju(t),s=(await Um()).transaction(ds,"readwrite"),i=s.objectStore(ds),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&z1(t,e.fid),e}async function B1(t){const e=Ju(t),r=(await Um()).transaction(ds,"readwrite");await r.objectStore(ds).delete(e),await r.done}async function Zu(t,e){const n=Ju(t),s=(await Um()).transaction(ds,"readwrite"),i=s.objectStore(ds),o=await i.get(n),u=e(o);return u===void 0?await i.delete(n):await i.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&z1(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zm(t){let e;const n=await Zu(t.appConfig,r=>{const s=kR(r),i=PR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Oh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function kR(t){const e=t||{fid:IR(),registrationStatus:0};return q1(e)}function PR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(cs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jR(t)}:{installationEntry:e}}async function RR(t,e){try{const n=await xR(t,e);return uu(t.appConfig,n)}catch(n){throw j1(n)&&n.customData.serverCode===409?await B1(t.appConfig):await uu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function jR(t){let e=await S0(t.appConfig);for(;e.registrationStatus===1;)await F1(100),e=await S0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await zm(t);return r||n}return e}function S0(t){return Zu(t,e=>{if(!e)throw cs.create("installation-not-found");return q1(e)})}function q1(t){return DR(t)?{fid:t.fid,registrationStatus:0}:t}function DR(t){return t.registrationStatus===1&&t.registrationTime+k1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR({appConfig:t,heartbeatServiceProvider:e},n){const r=VR(t,n),s=yR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:P1,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await M1(()=>fetch(r,u));if(c.ok){const d=await c.json();return O1(d)}else throw await V1("Generate Auth Token",c)}function VR(t,{fid:e}){return`${D1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(t,e=!1){let n;const r=await Zu(t.appConfig,i=>{if(!W1(i))throw cs.create("not-registered");const o=i.authToken;if(!e&&FR(o))return i;if(o.requestStatus===1)return n=LR(t,e),i;{if(!navigator.onLine)throw cs.create("app-offline");const u=zR(i);return n=MR(t,u),u}});return n?await n:r.authToken}async function LR(t,e){let n=await N0(t.appConfig);for(;n.authToken.requestStatus===1;)await F1(100),n=await N0(t.appConfig);const r=n.authToken;return r.requestStatus===0?$m(t,e):r}function N0(t){return Zu(t,e=>{if(!W1(e))throw cs.create("not-registered");const n=e.authToken;return $R(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function MR(t,e){try{const n=await OR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await uu(t.appConfig,r),n}catch(n){if(j1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await B1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uu(t.appConfig,r)}throw n}}function W1(t){return t!==void 0&&t.registrationStatus===2}function FR(t){return t.requestStatus===2&&!UR(t)}function UR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fR}function zR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $R(t){return t.requestStatus===1&&t.requestTime+k1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t){const e=t,{installationEntry:n,registrationPromise:r}=await zm(e);return r?r.catch(console.error):$m(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e=!1){const n=t;return await WR(n),(await $m(n,e)).token}async function WR(t){const{registrationPromise:e}=await zm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){if(!t||!t.options)throw cd("App Configuration");if(!t.name)throw cd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw cd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function cd(t){return cs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1="installations",GR="installations-internal",KR=t=>{const e=t.getProvider("app").getImmediate(),n=HR(e),r=gs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QR=t=>{const e=t.getProvider("app").getImmediate(),n=gs(e,H1).getImmediate();return{getId:()=>BR(n),getToken:s=>qR(n,s)}};function YR(){xn(new an(H1,KR,"PUBLIC")),xn(new an(GR,QR,"PRIVATE"))}YR();qt(C1,Fm);qt(C1,Fm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu="analytics",XR="firebase_id",JR="origin",ZR=60*1e3,ej="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt=new Ru("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Dt=new ps("analytics","Analytics",tj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(t){if(!t.startsWith(Bm)){const e=Dt.create("invalid-gtag-resource",{gtagURL:t});return Nt.warn(e.message),""}return t}function G1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function rj(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sj(t,e){const n=rj("firebase-js-sdk-policy",{createScriptURL:nj}),r=document.createElement("script"),s=`${Bm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function ij(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oj(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await G1(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(u){Nt.error(u)}t("config",s,i)}async function aj(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const u=await G1(n);for(const c of o){const d=u.find(g=>g.measurementId===c),m=d&&e[d.appId];if(m)i.push(m);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Nt.error(i)}}function lj(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[u,c]=o;await aj(t,e,n,u,c)}else if(i==="config"){const[u,c]=o;await oj(t,e,n,r,u,c)}else if(i==="consent"){const[u,c]=o;t("consent",u,c)}else if(i==="get"){const[u,c,d]=o;t("get",u,c,d)}else if(i==="set"){const[u]=o;t("set",u)}else t(i,...o)}catch(u){Nt.error(u)}}return s}function uj(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=lj(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function cj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Bm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=30,hj=1e3;class fj{constructor(e={},n=hj){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const K1=new fj;function mj(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function pj(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:mj(r)},i=ej.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let u="";try{const c=await o.json();!((e=c.error)===null||e===void 0)&&e.message&&(u=c.error.message)}catch{}throw Dt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function gj(t,e=K1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Dt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Dt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new _j;return setTimeout(async()=>{u.abort()},ZR),Q1({appId:r,apiKey:s,measurementId:i},o,u,e)}async function Q1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=K1){var i;const{appId:o,measurementId:u}=t;try{await yj(r,e)}catch(c){if(u)return Nt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:u};throw c}try{const c=await pj(t);return s.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!vj(d)){if(s.deleteThrottleMetadata(o),u)return Nt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:u};throw c}const m=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?cy(n,s.intervalMillis,dj):cy(n,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return s.setThrottleMetadata(o,g),Nt.debug(`Calling attemptFetch again in ${m} millis`),Q1(t,g,r,s)}}function yj(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Dt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vj(t){if(!(t instanceof cn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class _j{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xj(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wj(){if(Ff())try{await Uf()}catch(t){return Nt.warn(Dt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Nt.warn(Dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Ej(t,e,n,r,s,i,o){var u;const c=gj(t);c.then(x=>{n[x.measurementId]=x.appId,t.options.measurementId&&x.measurementId!==t.options.measurementId&&Nt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>Nt.error(x)),e.push(c);const d=wj().then(x=>{if(x)return r.getId()}),[m,g]=await Promise.all([c,d]);cj(i)||sj(i,m.measurementId),s("js",new Date);const p=(u=o==null?void 0:o.config)!==null&&u!==void 0?u:{};return p[JR]="firebase",p.update=!0,g!=null&&(p[XR]=g),s("config",m.measurementId,p),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.app=e}_delete(){return delete _o[this.app.options.appId],Promise.resolve()}}let _o={},A0=[];const C0={};let dd="dataLayer",Tj="gtag",k0,Y1,P0=!1;function bj(){const t=[];if(Mf()&&t.push("This is a browser extension environment."),mx()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Dt.create("invalid-analytics-context",{errorInfo:e});Nt.warn(n.message)}}function Sj(t,e,n){bj();const r=t.options.appId;if(!r)throw Dt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Nt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Dt.create("no-api-key");if(_o[r]!=null)throw Dt.create("already-exists",{id:r});if(!P0){ij(dd);const{wrappedGtag:i,gtagCore:o}=uj(_o,A0,C0,dd,Tj);Y1=i,k0=o,P0=!0}return _o[r]=Ej(t,A0,C0,e,k0,dd,n),new Ij(t)}function Nj(t=$f()){t=Ie(t);const e=gs(t,cu);return e.isInitialized()?e.getImmediate():Aj(t)}function Aj(t,e={}){const n=gs(t,cu);if(n.isInitialized()){const s=n.getImmediate();if(Uo(e,n.getOptions()))return s;throw Dt.create("already-initialized")}return n.initialize({options:e})}async function Cj(){if(Mf()||!mx()||!Ff())return!1;try{return await Uf()}catch{return!1}}function kj(t,e,n,r){t=Ie(t),xj(Y1,_o[t.app.options.appId],e,n,r).catch(s=>Nt.error(s))}const R0="@firebase/analytics",j0="0.10.7";function Pj(){xn(new an(cu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Sj(r,s,n)},"PUBLIC")),xn(new an("analytics-internal",t,"PRIVATE")),qt(R0,j0),qt(R0,j0,"esm2017");function t(e){try{const n=e.getProvider(cu).getImmediate();return{logEvent:(r,s,i)=>kj(n,r,s,i)}}catch(n){throw Dt.create("interop-component-reg-failed",{reason:n})}}}Pj();const Rj={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},qm=vx(Rj),le=QP(qm),lt=nC(qm);typeof window<"u"&&Cj().then(t=>{t&&Nj(qm)});const X1=P.createContext(void 0),Mt=()=>{const t=P.useContext(X1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},hd=async t=>{var r,s;if(!t)return null;const n=(await Mm(gt(le,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},jj=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(!0);P.useEffect(()=>{const p=qA(lt,async x=>{if(x){const S=await hd(x);n(S)}else n(null);s(!1)});return()=>p()},[]);const g={currentUser:e,loading:r,register:async(p,x,S)=>{try{const A=await Wx(lt,p,x),{user:C}=A;await Hx(C,{displayName:S}),await Cy(C);const I={uid:C.uid,email:C.email,displayName:S,emailVerified:C.emailVerified,isAdmin:!1,createdAt:ld(),updatedAt:ld()};await b0(gt(le,"users",C.uid),I);const T=await hd(C);return n(T),C}catch(A){throw console.error("Erreur lors de l'inscription:",A),A}},login:async(p,x)=>{try{const S=await _h(lt,p,x),A=await hd(S.user);return n(A),A}catch(S){throw console.error("Erreur de connexion:",S),S}},loginWithGoogle:async()=>{const p=new Cn;let x=null;try{x=(await d2(lt,p)).user,console.log("[Google] Utilisateur connect:",x);const A=gt(le,"users",x.uid),C=await Mm(A);console.log("[Google] Document utilisateur existe:",C.exists()),C.exists()||(await b0(A,{uid:x.uid,email:x.email,displayName:x.displayName,emailVerified:x.emailVerified,isAdmin:!1,createdAt:ld(),photoURL:x.photoURL??void 0}),console.log("[Google] Document utilisateur cr dans Firestore"));const I={uid:x.uid,email:x.email||"",displayName:x.displayName||"",emailVerified:x.emailVerified,isAdmin:C.exists()?C.data().isAdmin:!1,createdAt:x.metadata.creationTime?new Date(x.metadata.creationTime):void 0,photoURL:x.photoURL??void 0};return console.log("[Google] AppUser retourn:",I),I}catch(S){throw console.error("[Google] Erreur dans loginWithGoogle:",S,x),S}},logout:async()=>{try{await WA(lt),n(null)}catch(p){throw console.error("Erreur lors de la dconnexion:",p),p}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(lt.currentUser)try{await Cy(lt.currentUser)}catch(p){throw console.error("Erreur lors de l'envoi de l'email de vrification:",p),p}}};return l.jsx(X1.Provider,{value:g,children:t})},J1=P.createContext(void 0),Ei=()=>{const t=P.useContext(J1);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},Dj=({children:t})=>{const[e,n]=P.useState([]),[r,s]=P.useState([]),[i,o]=P.useState([]),[u,c]=P.useState(!0);P.useEffect(()=>{(async()=>{c(!0);const E=await Nn($e(le,"guideSections"));s(E.docs.map(R=>({id:R.id,...R.data()})));const _=await Nn($e(le,"resources"));n(_.docs.map(R=>({id:R.id,...R.data()})));const k=await Nn($e(le,"faq"));o(k.docs.map(R=>({id:R.id,...R.data()}))),c(!1)})()},[]);const d=async()=>{const y=await Nn($e(le,"guideSections"));s(y.docs.map(k=>({id:k.id,...k.data()})));const E=await Nn($e(le,"resources"));n(E.docs.map(k=>({id:k.id,...k.data()})));const _=await Nn($e(le,"faq"));o(_.docs.map(k=>({id:k.id,...k.data()})))},b={resources:e,guideSections:r,faqItems:i,addResource:async y=>{await kn($e(le,"resources"),y),await d()},updateResource:async(y,E)=>{await Xs(gt(le,"resources",y),E),await d()},deleteResource:async y=>{await wl(gt(le,"resources",y)),await d()},addGuideSection:async y=>{await kn($e(le,"guideSections"),y),await d()},updateGuideSection:async(y,E)=>{await Xs(gt(le,"guideSections",y),E),await d()},deleteGuideSection:async y=>{await wl(gt(le,"guideSections",y)),await d()},addFAQItem:async y=>{await kn($e(le,"faq"),y),await d()},updateFAQItem:async(y,E)=>{await Xs(gt(le,"faq",y),E),await d()},deleteFAQItem:async y=>{await wl(gt(le,"faq",y)),await d()},getResourcesByPhase:y=>e.filter(E=>E.phase===y),getGuideSectionsByPhase:y=>r.filter(E=>E.phase===y).sort((E,_)=>E.order-_.order),getFAQItemsByPhase:y=>i.filter(E=>E.phase===y),searchResources:y=>{const E=y.toLowerCase();return e.filter(_=>_.title.toLowerCase().includes(E)||_.description.toLowerCase().includes(E)||_.category.toLowerCase().includes(E))}};return u?l.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):l.jsx(J1.Provider,{value:b,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),re=(t,e)=>{const n=P.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},m)=>P.createElement("svg",{ref:m,...Oj,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${Vj(t)}`,u].join(" "),...d},[...e.map(([g,p])=>P.createElement(g,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=re("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=re("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=re("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=re("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=re("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=re("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=re("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=re("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=re("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=re("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=re("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=re("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=re("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=re("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=re("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=re("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),t4=()=>{var g,p;const{currentUser:t,logout:e,isAdmin:n}=Mt(),[r,s]=P.useState(!1),[i,o]=P.useState(!1),[u,c]=P.useState(!1),d=ms();P.useEffect(()=>{const x=()=>{c(window.scrollY>10)};return window.addEventListener("scroll",x),()=>window.removeEventListener("scroll",x)},[]),P.useEffect(()=>{s(!1),o(!1)},[d]);const m=async()=>{try{await e()}catch(x){console.error("Logout failed",x)}};return l.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${u?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:l.jsxs("div",{className:"container mx-auto px-4 py-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx(ee,{to:"/",className:"flex items-center",children:l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:l.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),l.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${u?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),l.jsx("nav",{className:"hidden md:flex items-center space-x-6",children:t&&l.jsxs(l.Fragment,{children:[l.jsx(ee,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),l.jsx(ee,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"Ressources"}),l.jsx(ee,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&l.jsx(ee,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${u?"text-blue-800":"text-white"}`,children:"Admin"})]})}),l.jsx("div",{className:"hidden md:flex items-center",children:t?l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>o(!i),className:`flex items-center space-x-2 transition-colors duration-300 ${u?"text-blue-800":"text-white"}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:l.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),l.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),l.jsx(du,{className:"w-4 h-4"})]}),i&&l.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[l.jsxs(ee,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[l.jsx(Jj,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Profil"})]}),n()&&l.jsxs(ee,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[l.jsx(Yj,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Administration"})]}),l.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[l.jsx(L0,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Dconnexion"})]})]})]}):l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsx(ee,{to:"/login",className:`font-medium transition-colors duration-300 ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),l.jsx(ee,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),l.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?l.jsx(e4,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`}):l.jsx(Qj,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`})})]}),r&&l.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:l.jsx("div",{className:"flex flex-col space-y-4",children:t?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:l.jsx("span",{className:"text-white font-medium text-sm",children:(((g=t.displayName)==null?void 0:g.charAt(0))||((p=t.email)==null?void 0:p.charAt(0))||"U").toUpperCase()})}),l.jsx("span",{className:`ml-2 font-medium ${u?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),l.jsx(ee,{to:"/dashboard",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),l.jsx(ee,{to:"/resources",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Ressources"}),l.jsx(ee,{to:"/faq",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&l.jsx(ee,{to:"/admin",className:`py-2 ${u?"text-blue-800":"text-white"}`,children:"Administration"}),l.jsxs("button",{onClick:m,className:`flex items-center py-2 ${u?"text-blue-800":"text-white"}`,children:[l.jsx(L0,{className:"w-4 h-4 mr-2"}),l.jsx("span",{children:"Dconnexion"})]})]}):l.jsxs("div",{className:"flex flex-col space-y-4",children:[l.jsx(ee,{to:"/login",className:`font-medium ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),l.jsx(ee,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},n4=()=>{const t=new Date().getFullYear();return l.jsx("footer",{className:"bg-blue-900 text-white",children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[l.jsxs("div",{className:"col-span-1 md:col-span-1",children:[l.jsxs(ee,{to:"/",className:"flex items-center",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:l.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),l.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),l.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(ee,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),l.jsx("li",{children:l.jsx(ee,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),l.jsx("li",{children:l.jsx(ee,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),l.jsxs("ul",{className:"space-y-2",children:[l.jsx("li",{children:l.jsx(ee,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),l.jsx("li",{children:l.jsx(ee,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les dmarches"})}),l.jsx("li",{children:l.jsx(ee,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pr-arrive en France"})})]})]}),l.jsxs("div",{className:"col-span-1",children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx(Gj,{className:"w-4 h-4 mr-2"}),l.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"contact@esiguide.com"})]}),l.jsxs("div",{className:"flex space-x-4 mt-4",children:[l.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:l.jsx(zj,{className:"w-5 h-5"})}),l.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:l.jsx(Xj,{className:"w-5 h-5"})}),l.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:l.jsx(Hj,{className:"w-5 h-5"})})]})]})]}),l.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("p",{className:"text-sm text-blue-200",children:[" ",t," ESIGELEC Prep Guide. Tous droits rservs."]}),l.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Dvelopp avec ",l.jsx(qj,{className:"w-4 h-4 mx-1 text-red-400"})," par d'anciens tudiants CPS"]})]})]})})},Za=({children:t})=>{const{currentUser:e,loading:n}=Mt();return n?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?l.jsx(l.Fragment,{children:t}):l.jsx(ah,{to:"/login"})},Gi=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=Mt();return n?l.jsx("div",{className:"flex justify-center items-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?l.jsx(l.Fragment,{children:t}):l.jsx(ah,{to:"/dashboard"}):l.jsx(ah,{to:"/login"})},r4=()=>{const{currentUser:t}=Mt();return l.jsxs("div",{className:"flex flex-col min-h-screen",children:[l.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[l.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[l.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS  l'ESIGELEC"}),l.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement ncessaires pour russir votre transition des Classes Prparatoires Scientifiques de Dakar vers l'ESIGELEC  Rouen."}),l.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?l.jsxs(ee,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accdez  votre tableau de bord",l.jsx(D0,{className:"ml-2 w-5 h-5"})]}):l.jsxs(l.Fragment,{children:[l.jsxs(ee,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",l.jsx(D0,{className:"ml-2 w-5 h-5"})]}),l.jsx(ee,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai dj un compte"})]})})]}),l.jsx("div",{className:"md:w-1/2 flex justify-center",children:l.jsx("img",{src:"https://images.pexels.com/photos/267885/pexels-photo-267885.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",alt:"Campus universitaire",className:"rounded-lg shadow-lg max-w-full md:max-w-md lg:max-w-lg h-auto"})})]})})}),l.jsx("section",{className:"py-16 bg-white",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour russir votre transition"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide  travers chaque tape du processus, du post-CPS jusqu' votre arrive en France."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(Zj,{className:"w-7 h-7 text-blue-900"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides tape par tape"}),l.jsx("p",{className:"text-gray-600",children:"Des guides dtaills pour chaque phase de votre parcours, de la fin des CPS jusqu' votre installation  Rouen."})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(Lj,{className:"w-7 h-7 text-blue-900"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),l.jsx("p",{className:"text-gray-600",children:"Accdez  tous les documents ncessaires pour vos dmarches Campus France, visa, logement et plus encore."})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(Kj,{className:"w-7 h-7 text-blue-900"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),l.jsx("p",{className:"text-gray-600",children:"Dcouvrez tout ce que vous devez savoir sur la vie  Rouen, les transports, le logement et la vie tudiante."})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[l.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:l.jsx(tE,{className:"w-7 h-7 text-blue-900"})}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communaut d'entraide"}),l.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bnficiez de l'exprience des anciens tudiants qui ont suivi le mme parcours."})]})]})]})}),l.jsx("section",{className:"py-16 bg-gray-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),l.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intgralit de votre parcours en trois grandes phases."})]}),l.jsxs("div",{className:"flex flex-col space-y-6",children:[l.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col md:flex-row",children:[l.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),l.jsx("p",{className:"text-blue-100",children:"Prparation des dossiers et candidatures aprs la fin des classes prparatoires."})]}),l.jsx("div",{className:"md:w-2/3 p-6",children:l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),l.jsx("span",{children:"Prparation dossier Campus France"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),l.jsx("span",{children:"Candidature ESIGELEC"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),l.jsx("span",{children:"Validation des acquis et prrequis"})]})]})})]})}),l.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col md:flex-row",children:[l.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les dmarches"}),l.jsx("p",{className:"text-blue-100",children:"Gestion des procdures administratives et prparation pratique."})]}),l.jsx("div",{className:"md:w-2/3 p-6",children:l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),l.jsx("span",{children:"Demande de visa tudiant"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),l.jsx("span",{children:"Recherche de logement"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),l.jsx("span",{children:"Prparation financire et budgtaire"})]})]})})]})}),l.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"flex flex-col md:flex-row",children:[l.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pr-arrive en France"}),l.jsx("p",{className:"text-blue-100",children:"Derniers prparatifs et informations sur l'arrive et l'installation."})]}),l.jsx("div",{className:"md:w-2/3 p-6",children:l.jsxs("ul",{className:"space-y-2",children:[l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),l.jsx("span",{children:"Transport vers la France"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),l.jsx("span",{children:"Installation et dmarches  l'arrive"})]}),l.jsxs("li",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:l.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),l.jsx("span",{children:"Intgration  l'ESIGELEC et vie tudiante"})]})]})})]})})]})]})}),l.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:l.jsxs("div",{className:"container mx-auto px-4 text-center",children:[l.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prt  commencer votre parcours vers l'ESIGELEC ?"}),l.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communaut d'tudiants CPS et bnficiez de toutes les ressources dont vous avez besoin pour russir votre transition."}),l.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?l.jsx(ee,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accder  mon tableau de bord"}):l.jsxs(l.Fragment,{children:[l.jsx(ee,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),l.jsx(ee,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},s4=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,u]=P.useState(!1),[c,d]=P.useState(!1),m=En(),{login:g,loginWithGoogle:p}=Mt();mu.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const x=async A=>{A.preventDefault();try{i(""),u(!0),await g(t,n),m("/dashboard")}catch(C){i("Identifiants invalides. Veuillez ressayer."),console.error(C)}finally{u(!1)}},S=async()=>{i(""),d(!0);try{await p(),m("/dashboard")}catch(A){let C="Erreur lors de la connexion avec Google.";A&&typeof A=="object"&&"message"in A&&(C+=`
${A.message}`),i(C),console.error(A)}finally{d(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:l.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous  votre compte"}),l.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",l.jsx(ee,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"crez un nouveau compte"})]})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:l.jsx("div",{className:"flex",children:l.jsx("div",{children:l.jsx("p",{className:"text-sm text-red-700",children:s})})})}),l.jsxs("button",{type:"button",onClick:S,disabled:c,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${c?"opacity-70 cursor-not-allowed":""}`,children:[l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:l.jsxs("g",{children:[l.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),l.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),l.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),l.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),c?"Connexion Google...":"Se connecter avec Google"]}),l.jsxs("form",{className:"space-y-6",onSubmit:x,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:A=>r(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),l.jsx("div",{className:"text-sm",children:l.jsx(ee,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oubli ?"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Connexion en cours...":"Se connecter"})})]})]})})]})},i4=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,u]=P.useState(""),[c,d]=P.useState(""),[m,g]=P.useState(!1),p=En(),{register:x,loginWithGoogle:S}=Mt(),A=async()=>{try{await S(),p("/dashboard")}catch{d("Erreur lors de l'inscription avec Google"),console.error()}},C=async I=>{if(I.preventDefault(),s!==o)return d("Les mots de passe ne correspondent pas");try{d(""),g(!0),await x(n,s,t),p("/dashboard")}catch{d("Erreur lors de la cration du compte"),console.error()}finally{g(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:l.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crez votre compte"}),l.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",l.jsx(ee,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[c&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:l.jsx("div",{className:"flex",children:l.jsx("div",{children:l.jsx("p",{className:"text-sm text-red-700",children:c})})})}),l.jsxs("button",{type:"button",onClick:A,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:l.jsxs("g",{children:[l.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),l.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),l.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),l.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),l.jsxs("form",{className:"space-y-6",onSubmit:C,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:I=>e(I.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:I=>r(I.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:s,onChange:I=>i(I.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:o,onChange:I=>u(I.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),l.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",l.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:m,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${m?"opacity-70 cursor-not-allowed":""}`,children:m?"Cration en cours...":"Crer un compte"})})]})]})})]})},o4=()=>{const{currentUser:t}=Mt(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=Ei(),[i,o]=P.useState("post-cps"),[u,c]=P.useState([]),d=p=>{u.includes(p)?c(u.filter(x=>x!==p)):c([...u,p])},m=r?r(i):[],g=p=>{const x=r?r(p):[];if(!x||x.length===0)return 0;const S=x.filter(A=>u.includes(A.id));return Math.round(S.length/x.length*100)};return!n||!s||!e?l.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),l.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",l.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accdez  vos ressources."]})]})}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:l.jsxs("div",{className:"flex flex-wrap",children:[l.jsx("button",{onClick:()=>o("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),l.jsx("button",{onClick:()=>o("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les dmarches"}),l.jsx("button",{onClick:()=>o("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pr-arrive"})]})}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsxs("div",{className:"border-b border-gray-200 p-6",children:[l.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[i==="post-cps"&&"Aprs votre CPS",i==="during-process"&&"Pendant vos dmarches administratives",i==="pre-arrival"&&"Avant votre arrive en France"]}),l.jsxs("p",{className:"text-gray-600",children:[i==="post-cps"&&"Les tapes essentielles aprs la fin de votre classe prparatoire",i==="during-process"&&"Les dmarches  effectuer pour prparer votre dpart",i==="pre-arrival"&&"Prparez votre arrive et votre installation en France"]})]}),l.jsx("div",{className:"divide-y divide-gray-200",children:m&&m.length>0?m.map(p=>l.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:l.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[l.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:l.jsx("button",{onClick:()=>d(p.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${u.includes(p.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:l.jsx(Mj,{className:"w-5 h-5"})})}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p.title}),l.jsx("p",{className:"text-gray-600 mb-4",children:p.content}),Array.isArray(p.resources)&&p.resources.length>0&&l.jsxs("div",{className:"mt-3",children:[l.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associes:"}),l.jsx("div",{className:"space-y-2",children:p.resources.map(x=>{const S=n.find(A=>A.id===x);return S?l.jsxs("a",{href:S.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[l.jsx(Jr,{className:"w-4 h-4 mr-2"}),S.title]},S.id):null})})]})]})]})},p.id)):l.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("post-cps"),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("post-cps")}%`}})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les dmarches"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("during-process"),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("during-process")}%`}})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pr-arrive"}),l.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[g("pre-arrival"),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${g("pre-arrival")}%`}})})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources rcentes"}),l.jsx(ee,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),l.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(p=>l.jsxs("a",{href:p.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[l.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:l.jsx(Jr,{className:"w-5 h-5 text-blue-700"})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900",children:p.title}),l.jsx("p",{className:"text-xs text-gray-500",children:p.phase})]})]},p.id))})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions frquentes"}),l.jsx(ee,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),l.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(p=>l.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:p.question}),l.jsx("p",{className:"text-xs text-gray-700",children:p.answer&&p.answer.length>100?`${p.answer.substring(0,100)}...`:p.answer})]},p.id))})]})]})]})})]})},a4=()=>{const{resources:t,searchResources:e}=Ei(),[n,r]=P.useState(""),[s,i]=P.useState("all"),[o,u]=P.useState("all"),[c,d]=P.useState(!1),[m,g]=P.useState(!1),p=[...new Set(t.map(C=>C.category))],x=C=>{C.preventDefault()},S=t.filter(C=>s!=="all"&&C.phase!==s||o!=="all"&&C.category!==o?!1:n?C.title.toLowerCase().includes(n.toLowerCase())||C.description.toLowerCase().includes(n.toLowerCase()):!0),A=C=>l.jsx(Jr,{className:"w-6 h-6"});return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothque de ressources"}),l.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:l.jsx("div",{className:"p-6",children:l.jsx("form",{onSubmit:x,children:l.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[l.jsx("div",{className:"flex-grow",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mh,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:n,onChange:C=>r(C.target.value)})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>d(!c),children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(O0,{className:"mr-2 h-4 w-4"}),s==="all"?"Toutes les phases":s==="post-cps"?"Post-CPS":s==="during-process"?"Pendant les dmarches":"Pr-arrive"]}),l.jsx(du,{className:"h-4 w-4"})]}),c&&l.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:l.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${s==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("all"),d(!1)},children:"Toutes les phases"}),l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${s==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("post-cps"),d(!1)},children:"Post-CPS"}),l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${s==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("during-process"),d(!1)},children:"Pendant les dmarches"}),l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${s==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("pre-arrival"),d(!1)},children:"Pr-arrive"})]})})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>g(!m),children:[l.jsxs("span",{className:"flex items-center",children:[l.jsx(O0,{className:"mr-2 h-4 w-4"}),o==="all"?"Toutes les catgories":o]}),l.jsx(du,{className:"h-4 w-4"})]}),m&&l.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:l.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{u("all"),g(!1)},children:"Toutes les catgories"}),p.map(C=>l.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o===C?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{u(C),g(!1)},children:C},C))]})})]})]})]})})})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.length>0?S.map(C=>l.jsx("a",{href:C.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-100 flex items-center justify-center",children:A(C.fileType)}),l.jsx("div",{className:"ml-4",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:C.title})})]}),l.jsx("p",{className:"text-gray-600 mb-4",children:C.description}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:C.phase==="post-cps"?"Post-CPS":C.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:C.category})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[l.jsxs("span",{children:["Mis  jour le ",C.updatedDate]}),l.jsxs("div",{className:"flex items-center text-blue-600 hover:text-blue-800",children:[l.jsx(Uj,{className:"w-4 h-4 mr-1"}),l.jsx("span",{children:"Tlcharger"})]})]})]})},C.id)):l.jsxs("div",{className:"col-span-full text-center py-12",children:[l.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:l.jsx(Mh,{className:"w-8 h-8 text-gray-400"})}),l.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouve"}),l.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]})]})},l4=()=>{const{faqItems:t,addFAQItem:e}=Ei(),[n,r]=P.useState(""),[s,i]=P.useState("all"),[o,u]=P.useState(null),[c,d]=P.useState(!1),[m,g]=P.useState(""),[p,x]=P.useState("post-cps"),[S,A]=P.useState(""),C=t.filter(w=>s!=="all"&&w.phase!==s?!1:n?w.question.toLowerCase().includes(n.toLowerCase())||w.answer.toLowerCase().includes(n.toLowerCase())||w.category.toLowerCase().includes(n.toLowerCase()):!0),I=w=>{u(o===w?null:w)},T=w=>{w.preventDefault(),m.trim()&&(e({question:m,answer:"Cette question est en attente de rponse par notre quipe.",category:S||"gnral",phase:p,isApproved:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),g(""),A(""),d(!1))};return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions frquemment poses"}),l.jsx("p",{className:"text-blue-100",children:"Trouvez les rponses  vos questions ou posez-en de nouvelles."})]})}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[l.jsx("div",{className:"flex-grow",children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mh,{className:"h-5 w-5 text-gray-400"})}),l.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:n,onChange:w=>r(w.target.value)})]})}),l.jsxs("div",{className:"flex space-x-2",children:[l.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[l.jsx("option",{value:"all",children:"Toutes les phases"}),l.jsx("option",{value:"post-cps",children:"Post-CPS"}),l.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),l.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]}),l.jsxs("button",{type:"button",onClick:()=>d(!c),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx(xo,{className:"mr-2 h-4 w-4"}),"Poser une question"]})]})]}),c&&l.jsxs("div",{className:"bg-white rounded-lg shadow mb-8 p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),l.jsx("form",{onSubmit:T,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),l.jsx("textarea",{id:"question",rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Posez votre question ici...",value:m,onChange:w=>g(w.target.value),required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concerne"}),l.jsxs("select",{id:"phase",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:p,onChange:w=>x(w.target.value),required:!0,children:[l.jsx("option",{value:"post-cps",children:"Post-CPS"}),l.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),l.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),l.jsx("input",{type:"text",id:"category",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Ex: visa, logement, transport...",value:S,onChange:w=>A(w.target.value)})]})]}),l.jsxs("div",{className:"flex justify-end",children:[l.jsx("button",{type:"button",onClick:()=>d(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),l.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Soumettre la question"})]})]})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"p-6 border-b",children:l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et rponses"})}),l.jsx("div",{className:"divide-y divide-gray-200",children:C.length>0?C.map(w=>l.jsxs("div",{className:"p-6",children:[l.jsxs("button",{onClick:()=>I(w.id),className:"flex justify-between items-start w-full text-left",children:[l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:l.jsx(Vh,{className:"h-4 w-4 text-blue-700"})})}),l.jsxs("div",{className:"ml-3",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:w.question}),l.jsxs("div",{className:"flex items-center mt-1",children:[l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:w.phase==="post-cps"?"Post-CPS":w.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),w.category&&l.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:w.category})]})]})]}),o===w.id?l.jsx(Fj,{className:"h-5 w-5 text-gray-500"}):l.jsx(du,{className:"h-5 w-5 text-gray-500"})]}),o===w.id&&l.jsxs("div",{className:"mt-4 ml-11",children:[l.jsx("p",{className:"text-gray-700",children:w.answer}),l.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise  jour le ",w.updatedDate]})]})]},w.id)):l.jsx("div",{className:"p-6 text-center",children:l.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond  votre recherche."})})})]})]})]})};function u4(t=20){const[e,n]=P.useState([]),[r,s]=P.useState(!0);return P.useEffect(()=>{(async()=>{s(!0);try{const o=iR($e(le,"adminActivityLog"),oR("date","desc"),aR(t)),u=await Nn(o);n(u.docs.map(c=>({id:c.id,...c.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function c4(t){const e={Ajout:"a ajout",Suppression:"a supprim",Modification:"a modifi"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),i=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${i}`}const d4=()=>{const{currentUser:t}=Mt(),{resources:e,guideSections:n,faqItems:r}=Ei(),{recentActivity:s,loading:i}=u4();return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord administrateur"}),l.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",l.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Grez le contenu et les ressources de la plateforme."]})]})}),l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:l.jsx(Jr,{className:"h-6 w-6"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:l.jsx(M0,{className:"h-6 w-6"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:l.jsx(Vh,{className:"h-6 w-6"})}),l.jsxs("div",{className:"ml-4",children:[l.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),l.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-8",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Questions FAQ existantes"}),l.jsx("ul",{className:"divide-y divide-gray-200",children:Array.isArray(r)&&r.length>0?r.map(o=>l.jsxs("li",{className:"flex items-center justify-between py-2",children:[l.jsx("span",{className:"text-gray-800",children:o.question}),l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx(ee,{to:`/admin/content?edit=${o.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"}),(!o.answer||o.answer.trim()===""||o.answer.trim()==="Cette question est en attente de rponse par notre quipe.")&&l.jsx(ee,{to:`/admin/content?edit=${o.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Rpondre  la question"})]})]},o.id)):l.jsx("li",{className:"text-gray-400",children:"Aucune question FAQ pour le moment."})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs(ee,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:l.jsx(M0,{className:"h-5 w-5"})}),l.jsx("span",{children:"Grer le contenu"})]}),l.jsxs(ee,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:l.jsx(Jr,{className:"h-5 w-5"})}),l.jsx("span",{children:"Grer les ressources"})]}),l.jsxs(ee,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:l.jsx(Vh,{className:"h-5 w-5"})}),l.jsx("span",{children:"Modrer la FAQ"})]}),l.jsxs(ee,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:l.jsx(tE,{className:"h-5 w-5"})}),l.jsx("span",{children:"Grer les utilisateurs"})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),l.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full",children:[l.jsxs(ee,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:l.jsx(xo,{className:"h-5 w-5"})}),l.jsx("span",{children:"Ajouter une section de guide"})]}),l.jsxs(ee,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:l.jsx(xo,{className:"h-5 w-5"})}),l.jsx("span",{children:"Ajouter une ressource"})]}),l.jsxs(ee,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[l.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:l.jsx(xo,{className:"h-5 w-5"})}),l.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activit rcente"})}),l.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:i?l.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?l.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activit rcente."}):s.map(o=>{var u;return l.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:l.jsx(Jr,{className:"h-5 w-5"})}),l.jsxs("div",{children:[l.jsx("div",{className:"font-medium text-gray-800",children:c4(o)}),l.jsx("div",{className:"text-xs text-gray-500",children:new Date(o.date).toLocaleString()}),typeof((u=o.details)==null?void 0:u.title)=="string"&&l.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",o.details.title]})]})]})},o.id)})})]}),l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="post-cps").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="post-cps").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="post-cps").length:0})]})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="during-process").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="during-process").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="during-process").length:0})]})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(o=>o.phase==="pre-arrival").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(o=>o.phase==="pre-arrival").length:0})]})}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),l.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(o=>o.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function An({type:t,target:e,targetId:n,user:r,details:s}){await kn($e(le,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const h4=()=>{const[t]=ax(),e=En(),{currentUser:n}=Mt(),{guideSections:r,addGuideSection:s,updateGuideSection:i,deleteGuideSection:o,resources:u,faqItems:c,addFAQItem:d,updateFAQItem:m,deleteFAQItem:g}=Ei(),p=t.get("new")==="section",x=t.get("new")==="faq",S=p?null:t.get("edit")&&r.some(U=>U.id===t.get("edit"))?t.get("edit"):null,A=x?null:t.get("edit")&&c.some(U=>U.id===t.get("edit"))?t.get("edit"):null,[C,I]=P.useState(""),[T,w]=P.useState("post-cps"),[D,L]=P.useState(""),[M,b]=P.useState(1),[y,E]=P.useState([]),[_,k]=P.useState(""),[R,N]=P.useState(""),[Ue,At]=P.useState(""),[Qt,Ze]=P.useState("post-cps"),[B,H]=P.useState(!0);P.useEffect(()=>{if(S){const U=r.find(fe=>fe.id===S);U&&(I(U.title),w(U.phase),L(U.content),b(U.order),E(Array.isArray(U.resources)?U.resources:[]))}else if(p){I(""),w("post-cps"),L("");const U=r.filter(fe=>fe.phase==="post-cps");b(U.length>0?Math.max(...U.map(fe=>fe.order))+1:1),E([])}if(A){const U=c.find(fe=>fe.id===A);U&&(k(U.question),N(U.answer),At(U.category||""),Ze(U.phase),H(!!U.isApproved))}else x&&(k(""),N(""),At(""),Ze("post-cps"),H(!0))},[S,p,r,A,x,c]);const Q=U=>{U.preventDefault(),x||A?A?(m(A,{question:_,answer:R,category:Ue,phase:Qt,isApproved:B}),An({type:"Modification",target:"FAQ",targetId:A,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:_}})):(d({question:_,answer:R,category:Ue,phase:Qt,isApproved:B,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),An({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:_}})):S?(i(S,{title:C,phase:T,content:D,order:M,resources:y}),An({type:"Modification",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:C}})):(s({title:C,phase:T,content:D,order:M,resources:y}),An({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:C}})),e("/admin")},he=()=>{S&&window.confirm("tes-vous sr de vouloir supprimer cette section ?")?(o(S),An({type:"Suppression",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:C}}),e("/admin")):A&&window.confirm("tes-vous sr de vouloir supprimer cette FAQ ?")&&(g(A),An({type:"Suppression",target:"FAQ",targetId:A,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:_}}),e("/admin"))},ce=U=>{y.includes(U)?E(y.filter(fe=>fe!==U)):E([...y,U])},ye=u.filter(U=>U.phase===T),Ve={"post-cps":r.filter(U=>U.phase==="post-cps").sort((U,fe)=>U.order-fe.order),"during-process":r.filter(U=>U.phase==="during-process").sort((U,fe)=>U.order-fe.order),"pre-arrival":r.filter(U=>U.phase==="pre-arrival").sort((U,fe)=>U.order-fe.order)};return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:p?"Ajouter une nouvelle section":x?"Ajouter une question FAQ":A?"Modifier la FAQ":S?"Modifier la section":"dition"}),l.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[l.jsx(ec,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:x||A?l.jsx("form",{onSubmit:Q,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),l.jsx("input",{type:"text",id:"faq-question",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:_,onChange:U=>k(U.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Rponse"}),l.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:R,onChange:U=>N(U.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),l.jsx("input",{type:"text",id:"faq-category",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:Ue,onChange:U=>At(U.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),l.jsxs("select",{id:"faq-phase",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:Qt,onChange:U=>Ze(U.target.value),required:!0,children:[l.jsx("option",{value:"post-cps",children:"Post-CPS"}),l.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),l.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded",checked:B,onChange:U=>H(U.target.checked)}),l.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuve"})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("div",{children:A&&l.jsxs("button",{type:"button",onClick:he,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[l.jsx(hu,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx(Lh,{className:"mr-2 h-4 w-4"}),x?"Ajouter":"Enregistrer"]})]})]})]})}):l.jsx("form",{onSubmit:Q,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),l.jsx("input",{type:"text",id:"title",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:C,onChange:U=>I(U.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),l.jsxs("select",{id:"phase",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:T,onChange:U=>{const fe=U.target.value;w(fe);const Ft=r.filter(Ii=>Ii.phase===fe);b(Ft.length>0?Math.max(...Ft.map(Ii=>Ii.order))+1:1),E([])},required:!0,children:[l.jsx("option",{value:"post-cps",children:"Post-CPS"}),l.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),l.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),l.jsx("input",{type:"number",id:"order",min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:M,onChange:U=>b(parseInt(U.target.value)),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),l.jsx("textarea",{id:"content",rows:8,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:D,onChange:U=>L(U.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associes"}),Array.isArray(ye)&&ye.length>0?l.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:ye.map(U=>l.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[l.jsx("input",{type:"checkbox",id:`resource-${U.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(U.id),onChange:()=>ce(U.id)}),l.jsx("label",{htmlFor:`resource-${U.id}`,className:"ml-3 block text-sm text-gray-700",children:U.title})]},U.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("div",{children:S&&l.jsxs("button",{type:"button",onClick:he,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[l.jsx(hu,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx(Lh,{className:"mr-2 h-4 w-4"}),p?"Ajouter":"Enregistrer"]})]})]})]})})}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),l.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[l.jsx(xo,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Ve["post-cps"])&&Ve["post-cps"].length>0?l.jsx("ul",{className:"space-y-2",children:Ve["post-cps"].map(U=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),l.jsx("span",{className:"flex-grow",children:U.title}),l.jsx(fd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(Ve["during-process"])&&Ve["during-process"].length>0?l.jsx("ul",{className:"space-y-2",children:Ve["during-process"].map(U=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),l.jsx("span",{className:"flex-grow",children:U.title}),l.jsx(fd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(Ve["pre-arrival"])&&Ve["pre-arrival"].length>0?l.jsx("ul",{className:"space-y-2",children:Ve["pre-arrival"].map(U=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===U.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),l.jsx("span",{className:"flex-grow",children:U.title}),l.jsx(fd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]})]})]})})]})})})]})},f4=()=>{const[t]=ax(),e=En(),{currentUser:n}=Mt(),{resources:r,addResource:s,updateResource:i,deleteResource:o}=Ei(),u=t.get("new")==="resource",c=t.get("edit"),[d,m]=P.useState(""),[g,p]=P.useState(""),[x,S]=P.useState("post-cps"),[A,C]=P.useState(""),[I,T]=P.useState(""),[w,D]=P.useState("pdf"),L=[...new Set(r.map(_=>_.category))];P.useEffect(()=>{if(c){const _=r.find(k=>k.id===c);_&&(m(_.title),p(_.description),S(_.phase),C(_.category),T(_.fileUrl),D(_.fileType))}else u&&(m(""),p(""),S("post-cps"),C(""),T(""),D("pdf"))},[c,u,r]);const M=_=>{_.preventDefault(),c?(i(c,{title:d,description:g,phase:x,category:A,fileUrl:I,fileType:w}),An({type:"Modification",target:"Ressource",targetId:c,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:g,phase:x,category:A,fileUrl:I,fileType:w,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),An({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},b=()=>{c&&window.confirm("tes-vous sr de vouloir supprimer cette ressource ?")&&(o(c),An({type:"Suppression",target:"Ressource",targetId:c,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},y={"post-cps":r.filter(_=>_.phase==="post-cps"),"during-process":r.filter(_=>_.phase==="during-process"),"pre-arrival":r.filter(_=>_.phase==="pre-arrival")},E=_=>{switch(_){case"pdf":case"doc":return l.jsx(Jr,{className:"w-5 h-5"});case"image":return l.jsx($j,{className:"w-5 h-5"});case"link":return l.jsx(V0,{className:"w-5 h-5"});default:return l.jsx(Bj,{className:"w-5 h-5"})}};return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("h1",{className:"text-2xl font-bold mb-2",children:u?"Ajouter une nouvelle ressource":"Modifier la ressource"}),l.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[l.jsx(ec,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2",children:l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsx("form",{onSubmit:M,children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),l.jsx("input",{type:"text",id:"title",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:d,onChange:_=>m(_.target.value),required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),l.jsx("textarea",{id:"description",rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:g,onChange:_=>p(_.target.value),required:!0})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),l.jsxs("select",{id:"phase",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:x,onChange:_=>S(_.target.value),required:!0,children:[l.jsx("option",{value:"post-cps",children:"Post-CPS"}),l.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),l.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),l.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:A,onChange:_=>C(_.target.value),required:!0}),l.jsx("datalist",{id:"categories",children:L.map((_,k)=>l.jsx("option",{value:_},k))})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),l.jsxs("select",{id:"fileType",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:w,onChange:_=>D(_.target.value),required:!0,children:[l.jsx("option",{value:"pdf",children:"PDF"}),l.jsx("option",{value:"doc",children:"Document"}),l.jsx("option",{value:"image",children:"Image"}),l.jsx("option",{value:"link",children:"Lien externe"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:w==="link"?"URL du lien":"URL du fichier"}),l.jsx("input",{type:"url",id:"fileUrl",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",value:I,onChange:_=>T(_.target.value),placeholder:w==="link"?"https://example.com":"https://example.com/file.pdf",required:!0}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:w==="link"?"Entrez l'URL complte du site web externe.":"Entrez l'URL complte o le fichier est hberg (Google Drive, Dropbox, etc.)."})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsx("div",{children:c&&l.jsxs("button",{type:"button",onClick:b,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[l.jsx(hu,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),l.jsxs("div",{className:"flex space-x-3",children:[l.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[l.jsx(Lh,{className:"mr-2 h-4 w-4"}),u?"Ajouter":"Enregistrer"]})]})]})]})})})}),l.jsx("div",{className:"space-y-6",children:l.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),l.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[l.jsx(V0,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(y["post-cps"])&&y["post-cps"].length>0?l.jsx("ul",{className:"space-y-2",children:y["post-cps"].map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${_.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===_.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:E(_.fileType)}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("span",{className:"block text-sm font-medium",children:_.title}),l.jsx("span",{className:"block text-xs text-gray-500",children:_.category})]})]})},_.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(y["during-process"])&&y["during-process"].length>0?l.jsx("ul",{className:"space-y-2",children:y["during-process"].map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${_.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===_.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:E(_.fileType)}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("span",{className:"block text-sm font-medium",children:_.title}),l.jsx("span",{className:"block text-xs text-gray-500",children:_.category})]})]})},_.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(y["pre-arrival"])&&y["pre-arrival"].length>0?l.jsx("ul",{className:"space-y-2",children:y["pre-arrival"].map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${_.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${c===_.id?"bg-blue-50 border border-blue-200":""}`,children:[l.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:E(_.fileType)}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("span",{className:"block text-sm font-medium",children:_.title}),l.jsx("span",{className:"block text-xs text-gray-500",children:_.category})]})]})},_.id))}):l.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})})]})},nE=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[i,o]=P.useState(""),u=c=>{c.preventDefault(),n(i)};return mu.useEffect(()=>{t||o("")},[t]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:""}),l.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),l.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[l.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:i,onChange:c=>o(c.target.value),disabled:r,autoFocus:!0}),s&&l.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||i==="",children:"Valider"})]})]})}):null},m4=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[s,i]=P.useState(null),[o,u]=P.useState(null),[c,d]=P.useState([]),[m,g]=P.useState(!0),[p,x]=P.useState(null),{currentUser:S}=Mt(),A=En(),C=async()=>{g(!0),x(null);try{const w=await Nn($e(le,"users")),D=[];w.forEach(L=>{D.push(L.data())}),d(D)}catch{x("Erreur lors du chargement des utilisateurs.")}finally{g(!1)}};P.useEffect(()=>{C()},[]);const I=async(w,D)=>{e(!0),u({uid:w,isAdmin:D}),i(null)},T=async w=>{if(!o)return;if(r(!0),i(null),w!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}const D=c.find(L=>L.uid===o.uid);if(D!=null&&D.isSuperAdmin&&D.uid!==(S==null?void 0:S.uid)){i("Impossible de modifier le rle d'un admin principal."),r(!1);return}try{await Xs(gt(le,"users",o.uid),{isAdmin:!o.isAdmin}),d(L=>L.map(M=>M.uid===o.uid?{...M,isAdmin:!o.isAdmin}:M)),e(!1),u(null)}catch{i("Erreur lors de la mise  jour du statut administrateur.")}finally{r(!1)}};return l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[l.jsxs("button",{onClick:()=>A("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[l.jsx(ec,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),l.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),l.jsx("div",{className:"container mx-auto px-4 py-8",children:m?l.jsx("div",{children:"Chargement..."}):p?l.jsx("div",{className:"text-red-600",children:p}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2",children:"Nom"}),l.jsx("th",{className:"px-4 py-2",children:"Email"}),l.jsx("th",{className:"px-4 py-2",children:"Admin"}),l.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(w=>l.jsxs("tr",{children:[l.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>A(`/admin/users/${w.uid}`),children:[w.photoURL?l.jsx("img",{src:w.photoURL,alt:w.displayName||w.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):l.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:l.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),w.displayName||w.email,w.isSuperAdmin&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),w.uid===(S==null?void 0:S.uid)&&l.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),l.jsx("td",{className:"px-4 py-2",children:w.email}),l.jsxs("td",{className:"px-4 py-2",children:[w.isAdmin?l.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[l.jsx(Wm,{className:"w-4 h-4 mr-1"})," Admin"]}):l.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),w.isSuperAdmin&&l.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),l.jsxs("td",{className:"px-4 py-2",children:[w.uid!==(S==null?void 0:S.uid)&&!w.isSuperAdmin&&l.jsx("button",{onClick:()=>I(w.uid,w.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${w.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:w.isAdmin?l.jsxs(l.Fragment,{children:[l.jsx(Z1,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):l.jsxs(l.Fragment,{children:[l.jsx(eE,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),w.uid!==(S==null?void 0:S.uid)&&w.isSuperAdmin&&l.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rle d'un admin principal",children:"Impossible de modifier"})]})]},w.uid))})]})})}),l.jsx(nE,{open:t,onClose:()=>{e(!1),u(null),i(null)},onSubmit:T,loading:n,error:s})]})},p4=()=>{const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[s,i]=P.useState(null),{uid:o}=Vb(),u=En(),{currentUser:c}=Mt(),[d,m]=P.useState(null),[g,p]=P.useState(!0),[x,S]=P.useState(null),[A,C]=P.useState(!1);P.useEffect(()=>{o&&(async()=>{p(!0),S(null);try{const b=gt(le,"users",o),y=await Mm(b);y.exists()?m(y.data()):S("Utilisateur introuvable.")}catch{S("Erreur lors du chargement du profil utilisateur.")}finally{p(!1)}})()},[o]);const I=async()=>{e(!0),i(null)},T=async M=>{if(d){if(r(!0),i(null),M!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}C(!0);try{await Xs(gt(le,"users",d.uid),{isAdmin:!d.isAdmin}),m({...d,isAdmin:!d.isAdmin}),e(!1)}catch{i("Erreur lors de la mise  jour du statut administrateur.")}finally{C(!1),r(!1)}}},w=async()=>{if(d){if(d.uid===(c==null?void 0:c.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}if(window.confirm("tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.")){C(!0);try{await wl(gt(le,"users",d.uid)),u("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{C(!1)}}}},D=M=>{d&&m({...d,[M.target.name]:M.target.value})},L=async()=>{if(d){C(!0);try{await Xs(gt(le,"users",d.uid),{displayName:d.displayName,photoURL:d.photoURL}),alert("Profil mis  jour !")}catch{alert("Erreur lors de la mise  jour du profil.")}finally{C(!1)}}};return g?l.jsx("div",{className:"p-8",children:"Chargement..."}):x?l.jsx("div",{className:"p-8 text-red-600",children:x}):d?l.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[l.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:l.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[l.jsxs("button",{onClick:()=>u("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[l.jsx(ec,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),l.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),l.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[l.jsx("div",{className:"relative mb-6",children:d.photoURL?l.jsx("img",{src:d.photoURL,alt:d.displayName||d.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):l.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:l.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),l.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(d==null?void 0:d.displayName)||"",onChange:D,disabled:A||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid)}),(d==null?void 0:d.isSuperAdmin)&&l.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),l.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(d==null?void 0:d.photoURL)||"",onChange:D,disabled:A}),l.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[l.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",d.email]}),l.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[l.jsx("span",{className:"font-semibold text-gray-800",children:"Vrifi :"})," ",d.emailVerified?"Oui":"Non"]}),l.jsxs("div",{className:"mb-6 w-full text-center",children:[l.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",d.isAdmin?l.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[l.jsx(Wm,{className:"w-5 h-5 mr-1"})," Admin"]}):l.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),l.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[d.uid!==(c==null?void 0:c.uid)&&l.jsx("button",{onClick:I,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${d.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:A||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),children:d.isAdmin?l.jsxs(l.Fragment,{children:[l.jsx(Z1,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):l.jsxs(l.Fragment,{children:[l.jsx(eE,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),d.uid!==(c==null?void 0:c.uid)&&l.jsxs("button",{onClick:w,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:A||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),children:[l.jsx(hu,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),l.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:L,disabled:A||(d==null?void 0:d.isSuperAdmin)&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid),title:d!=null&&d.isSuperAdmin&&(d==null?void 0:d.uid)!==(c==null?void 0:c.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),l.jsx(nE,{open:t,onClose:()=>{e(!1),i(null)},onSubmit:T,loading:n,error:s})]}):null},g4=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(null),[s,i]=P.useState(!0),[o,u]=P.useState(""),[c,d]=P.useState("test1234"),m=async()=>{try{(await Nn($e(le,"test"))).empty?(await kn($e(le,"test"),{message:"Connexion  Firestore russie!",timestamp:new Date().toISOString()}),e("Document cr avec succs!")):e("Connexion  Firestore russie!")}catch(p){const x=p;console.error("Erreur Firestore:",x),e(`Erreur Firestore: ${x.message}`)}},g=async()=>{try{const p=await Wx(lt,o,c);r(p.user),await _h(lt,o,c),e(x=>x+`
Authentification russie!`)}catch(p){const x=p;if(x.code==="auth/email-already-in-use"){const S=await _h(lt,o,c);r(S.user),e(A=>A+`
Connexion russie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",p),e(S=>S+`
Erreur d'authentification: ${x.message}`)}};return P.useEffect(()=>{const p=lt.onAuthStateChanged(x=>{r(x),x&&u(x.email||""),i(!1)});return()=>p()},[]),s?l.jsx("div",{className:"p-4",children:"Chargement..."}):l.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[l.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intgration Firebase"}),l.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),l.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connect"]}),l.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),l.jsx("button",{onClick:m,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),l.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await kn($e(le,"guideSections"),{title:"Prparer son dossier Campus France",content:"Voici comment prparer...",phase:"pre-cps",order:1}),await kn($e(le,"guideSections"),{title:"Demander son visa",content:"Procdure dtaille...",phase:"post-cps",order:2}),await kn($e(le,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await kn($e(le,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrive",createdAt:new Date().toISOString()}),e("Base initialise avec succs !")}catch(p){e("Erreur lors de l'initialisation : "+p.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block mb-2",children:"Email:"}),l.jsx("input",{type:"email",value:o,onChange:p=>u(p.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),l.jsx("input",{type:"password",value:c,onChange:p=>d(p.target.value),className:"border p-2 w-full max-w-md"})]}),l.jsx("button",{onClick:g,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!o||!c,children:n?"Se connecter":"Crer un compte"})]}),l.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Rsultats des tests"}),l.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectu"})]})]})},y4=()=>l.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:l.jsxs("div",{className:"text-center max-w-md",children:[l.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:l.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),l.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouve"}),l.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a t dplace."}),l.jsxs(ee,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[l.jsx(Wj,{className:"mr-2 h-5 w-5"}),"Retour  l'accueil"]})]})}),v4=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:i})=>{const[o,u]=P.useState(""),c=d=>{d.preventDefault(),n(o)};return mu.useEffect(()=>{t||u("")},[t]),t?l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[l.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:""}),l.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:i||"Confirmez avec votre mot de passe"}),l.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[l.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:o,onChange:d=>u(d.target.value),disabled:r,autoFocus:!0}),s&&l.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||o==="",children:"Valider"})]})]})}):null},_4=()=>{var Ze,B;const[t,e]=P.useState(!1),[n,r]=P.useState(!1),[s,i]=P.useState(null),[o,u]=P.useState(null),[c,d]=P.useState(null),[m,g]=P.useState(""),{currentUser:p}=Mt(),[x,S]=P.useState((p==null?void 0:p.displayName)||""),[A,C]=P.useState((p==null?void 0:p.photoURL)||""),[I]=P.useState((p==null?void 0:p.email)||""),[T,w]=P.useState(""),[D,L]=P.useState(!1),[M,b]=P.useState(null),[y,E]=P.useState(null),[_,k]=P.useState(null);if(!p)return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:l.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:l.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez tre connect pour accder  votre profil."})})});const R=lt.currentUser,N=R==null?void 0:R.providerData.some(H=>H.providerId==="password"),Ue=async H=>{if(H.preventDefault(),b(null),E(null),!N){k("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:x,photoURL:A}),u("profile"),e(!0)},At=async H=>{if(H.preventDefault(),b(null),E(null),!N){k("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}g(T),u("password"),e(!0)},Qt=async H=>{const Q=lt.currentUser;if(!Q)return;r(!0),i(null);const he=ys.credential(Q.email||"",H);try{await MA(Q,he),o==="profile"&&c?(await Hx(Q,{displayName:c.displayName,photoURL:c.photoURL}),S(c.displayName),C(c.photoURL),E("Profil mis  jour !")):o==="password"&&m&&(await UA(Q,m),w(""),E("Mot de passe mis  jour !")),e(!1),u(null),d(null),g("")}catch{i("Mot de passe incorrect.")}finally{r(!1),L(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:l.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[l.jsxs("div",{className:"relative mb-5",children:[A?l.jsx("img",{src:A,alt:x||I,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):l.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((Ze=x==null?void 0:x.charAt(0))==null?void 0:Ze.toUpperCase())||((B=I==null?void 0:I.charAt(0))==null?void 0:B.toUpperCase())}),(p==null?void 0:p.emailVerified)&&l.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vrifi"}),(p==null?void 0:p.isAdmin)&&l.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[l.jsx(Wm,{className:"w-4 h-4"})," Admin"]})]}),l.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:x||I}),l.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:I}),l.jsxs("form",{onSubmit:Ue,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affich"}),l.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:x,onChange:H=>S(H.target.value),placeholder:"Nom affich",disabled:D})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),l.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:A,onChange:H=>C(H.target.value),placeholder:"URL de la photo",disabled:D})]})]}),l.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:D,children:"Sauvegarder le profil"})]}),l.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),N?l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:At,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[l.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),l.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:T,onChange:H=>w(H.target.value),placeholder:"Nouveau mot de passe (min. 6 caractres)",disabled:D}),l.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:D||T.length<6,children:"Mettre  jour le mot de passe"})]}),l.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{b(null),E(null);try{await vh(lt,I),E("Un email de rinitialisation a t envoy  votre adresse.")}catch{b("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}):l.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[l.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez cr votre compte avec Google. Vous ne pouvez pas dfinir ou changer de mot de passe ici."}),l.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{b(null),E(null);try{await vh(lt,I),E("Un email de rinitialisation a t envoy  votre adresse.")}catch{b("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}),(M||y)&&l.jsx("div",{className:`mt-6 text-center text-sm font-medium ${M?"text-red-600":"text-green-600"}`,children:M||y}),_&&l.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:_}),l.jsx(v4,{open:t,onClose:()=>{e(!1),i(null),u(null)},onSubmit:Qt,loading:n,error:s,label:o==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},x4=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,u]=P.useState(!1),c=En(),d=async m=>{m.preventDefault(),i(""),r(""),u(!0);try{await vh(lt,t),r("Un email de rinitialisation a t envoy.")}catch{i("Erreur lors de l'envoi de l'email. Vrifiez l'adresse saisie.")}finally{u(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[l.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:l.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),l.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Rinitialiser le mot de passe"})]}),l.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:l.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&l.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&l.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),l.jsxs("form",{className:"space-y-6",onSubmit:d,children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:m=>e(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Envoi en cours...":"Envoyer le lien de rinitialisation"})})]}),l.jsx("div",{className:"mt-4 text-center",children:l.jsx("button",{onClick:()=>c("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour  la connexion"})})]})})]})};function w4(){return l.jsx(jj,{children:l.jsx(Dj,{children:l.jsx(iS,{basename:"/Esig-prep-guide",children:l.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[l.jsx(t4,{}),l.jsx("main",{className:"flex-grow",children:l.jsxs(Xb,{children:[l.jsx(ot,{path:"/",element:l.jsx(r4,{})}),l.jsx(ot,{path:"/login",element:l.jsx(s4,{})}),l.jsx(ot,{path:"/register",element:l.jsx(i4,{})}),l.jsx(ot,{path:"/reset-password",element:l.jsx(x4,{})}),l.jsx(ot,{path:"/test-firebase",element:l.jsx(g4,{})}),l.jsx(ot,{path:"/dashboard",element:l.jsx(Za,{children:l.jsx(o4,{})})}),l.jsx(ot,{path:"/resources",element:l.jsx(Za,{children:l.jsx(a4,{})})}),l.jsx(ot,{path:"/faq",element:l.jsx(Za,{children:l.jsx(l4,{})})}),l.jsx(ot,{path:"/profile",element:l.jsx(Za,{children:l.jsx(_4,{})})}),l.jsx(ot,{path:"/admin",element:l.jsx(Gi,{children:l.jsx(d4,{})})}),l.jsx(ot,{path:"/admin/content",element:l.jsx(Gi,{children:l.jsx(h4,{})})}),l.jsx(ot,{path:"/admin/resources",element:l.jsx(Gi,{children:l.jsx(f4,{})})}),l.jsx(ot,{path:"/admin/users",element:l.jsx(Gi,{children:l.jsx(m4,{})})}),l.jsx(ot,{path:"/admin/users/:uid",element:l.jsx(Gi,{children:l.jsx(p4,{})})}),l.jsx(ot,{path:"*",element:l.jsx(y4,{})})]})}),l.jsx(n4,{})]})})})})}X_(document.getElementById("root")).render(l.jsx(P.StrictMode,{children:l.jsx(w4,{})}));
