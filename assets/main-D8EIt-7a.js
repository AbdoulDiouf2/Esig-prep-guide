var X2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var iD=X2((hD,E2)=>{function Z2(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function ej(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zy={exports:{}},Xc={},By={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=Symbol.for("react.element"),tj=Symbol.for("react.portal"),rj=Symbol.for("react.fragment"),nj=Symbol.for("react.strict_mode"),sj=Symbol.for("react.profiler"),ij=Symbol.for("react.provider"),oj=Symbol.for("react.context"),aj=Symbol.for("react.forward_ref"),lj=Symbol.for("react.suspense"),cj=Symbol.for("react.memo"),uj=Symbol.for("react.lazy"),zg=Symbol.iterator;function dj(t){return t===null||typeof t!="object"?null:(t=zg&&t[zg]||t["@@iterator"],typeof t=="function"?t:null)}var Hy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wy=Object.assign,Gy={};function Wi(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}Wi.prototype.isReactComponent={};Wi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $y(){}$y.prototype=Wi.prototype;function Lm(t,e,r){this.props=t,this.context=e,this.refs=Gy,this.updater=r||Hy}var Mm=Lm.prototype=new $y;Mm.constructor=Lm;Wy(Mm,Wi.prototype);Mm.isPureReactComponent=!0;var Bg=Array.isArray,Ky=Object.prototype.hasOwnProperty,Vm={current:null},Qy={key:!0,ref:!0,__self:!0,__source:!0};function Yy(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Ky.call(e,n)&&!Qy.hasOwnProperty(n)&&(i[n]=e[n]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(n in c=t.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:Aa,type:t,key:o,ref:a,props:i,_owner:Vm.current}}function hj(t,e){return{$$typeof:Aa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Om(t){return typeof t=="object"&&t!==null&&t.$$typeof===Aa}function mj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Hg=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?mj(""+t.key):e.toString(36)}function Ml(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Aa:case tj:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+sd(a,0):n,Bg(i)?(r="",t!=null&&(r=t.replace(Hg,"$&/")+"/"),Ml(i,e,r,"",function(d){return d})):i!=null&&(Om(i)&&(i=hj(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Hg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Bg(t))for(var c=0;c<t.length;c++){o=t[c];var u=n+sd(o,c);a+=Ml(o,e,r,u,i)}else if(u=dj(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=n+sd(o,c++),a+=Ml(o,e,r,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function dl(t,e,r){if(t==null)return t;var n=[],i=0;return Ml(t,n,"","",function(o){return e.call(r,o,i++)}),n}function fj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Dt={current:null},Vl={transition:null},pj={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:Vm};function Jy(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:dl,forEach:function(t,e,r){dl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return dl(t,function(){e++}),e},toArray:function(t){return dl(t,function(e){return e})||[]},only:function(t){if(!Om(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};de.Component=Wi;de.Fragment=rj;de.Profiler=sj;de.PureComponent=Lm;de.StrictMode=nj;de.Suspense=lj;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pj;de.act=Jy;de.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ky.call(e,u)&&!Qy.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:Aa,type:t.type,key:i,ref:o,props:n,_owner:a}};de.createContext=function(t){return t={$$typeof:oj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ij,_context:t},t.Consumer=t};de.createElement=Yy;de.createFactory=function(t){var e=Yy.bind(null,t);return e.type=t,e};de.createRef=function(){return{current:null}};de.forwardRef=function(t){return{$$typeof:aj,render:t}};de.isValidElement=Om;de.lazy=function(t){return{$$typeof:uj,_payload:{_status:-1,_result:t},_init:fj}};de.memo=function(t,e){return{$$typeof:cj,type:t,compare:e===void 0?null:e}};de.startTransition=function(t){var e=Vl.transition;Vl.transition={};try{t()}finally{Vl.transition=e}};de.unstable_act=Jy;de.useCallback=function(t,e){return Dt.current.useCallback(t,e)};de.useContext=function(t){return Dt.current.useContext(t)};de.useDebugValue=function(){};de.useDeferredValue=function(t){return Dt.current.useDeferredValue(t)};de.useEffect=function(t,e){return Dt.current.useEffect(t,e)};de.useId=function(){return Dt.current.useId()};de.useImperativeHandle=function(t,e,r){return Dt.current.useImperativeHandle(t,e,r)};de.useInsertionEffect=function(t,e){return Dt.current.useInsertionEffect(t,e)};de.useLayoutEffect=function(t,e){return Dt.current.useLayoutEffect(t,e)};de.useMemo=function(t,e){return Dt.current.useMemo(t,e)};de.useReducer=function(t,e,r){return Dt.current.useReducer(t,e,r)};de.useRef=function(t){return Dt.current.useRef(t)};de.useState=function(t){return Dt.current.useState(t)};de.useSyncExternalStore=function(t,e,r){return Dt.current.useSyncExternalStore(t,e,r)};de.useTransition=function(){return Dt.current.useTransition()};de.version="18.3.1";By.exports=de;var k=By.exports;const Pa=ej(k),gj=Z2({__proto__:null,default:Pa},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xj=k,yj=Symbol.for("react.element"),vj=Symbol.for("react.fragment"),bj=Object.prototype.hasOwnProperty,wj=xj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_j={key:!0,ref:!0,__self:!0,__source:!0};function Xy(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)bj.call(e,n)&&!_j.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:yj,type:t,key:o,ref:a,props:i,_owner:wj.current}}Xc.Fragment=vj;Xc.jsx=Xy;Xc.jsxs=Xy;zy.exports=Xc;var s=zy.exports,oh={},Zy={exports:{}},tr={},ev={exports:{}},tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,W){var J=q.length;q.push(W);e:for(;0<J;){var le=J-1>>>1,ee=q[le];if(0<i(ee,W))q[le]=W,q[J]=ee,J=le;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var W=q[0],J=q.pop();if(J!==W){q[0]=J;e:for(var le=0,ee=q.length,me=ee>>>1;le<me;){var Ge=2*(le+1)-1,dt=q[Ge],Gt=Ge+1,$t=q[Gt];if(0>i(dt,J))Gt<ee&&0>i($t,dt)?(q[le]=$t,q[Gt]=J,le=Gt):(q[le]=dt,q[Ge]=J,le=Ge);else if(Gt<ee&&0>i($t,J))q[le]=$t,q[Gt]=J,le=Gt;else break e}}return W}function i(q,W){var J=q.sortIndex-W.sortIndex;return J!==0?J:q.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,f=null,g=3,j=!1,C=!1,P=!1,R=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(q){for(var W=r(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=q)n(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=r(d)}}function D(q){if(P=!1,T(q),!C)if(r(u)!==null)C=!0,ce(L);else{var W=r(d);W!==null&&Z(D,W.startTime-q)}}function L(q,W){C=!1,P&&(P=!1,_(x),x=-1),j=!0;var J=g;try{for(T(W),f=r(u);f!==null&&(!(f.expirationTime>W)||q&&!N());){var le=f.callback;if(typeof le=="function"){f.callback=null,g=f.priorityLevel;var ee=le(f.expirationTime<=W);W=t.unstable_now(),typeof ee=="function"?f.callback=ee:f===r(u)&&n(u),T(W)}else n(u);f=r(u)}if(f!==null)var me=!0;else{var Ge=r(d);Ge!==null&&Z(D,Ge.startTime-W),me=!1}return me}finally{f=null,g=J,j=!1}}var V=!1,E=null,x=-1,y=5,v=-1;function N(){return!(t.unstable_now()-v<y)}function A(){if(E!==null){var q=t.unstable_now();v=q;var W=!0;try{W=E(!0,q)}finally{W?S():(V=!1,E=null)}}else V=!1}var S;if(typeof w=="function")S=function(){w(A)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ae=re.port2;re.port1.onmessage=A,S=function(){ae.postMessage(null)}}else S=function(){R(A,0)};function ce(q){E=q,V||(V=!0,S())}function Z(q,W){x=R(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){C||j||(C=!0,ce(L))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var J=g;g=W;try{return q()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=g;g=q;try{return W()}finally{g=J}},t.unstable_scheduleCallback=function(q,W,J){var le=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?le+J:le):J=le,q){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=J+ee,q={id:m++,callback:W,priorityLevel:q,startTime:J,expirationTime:ee,sortIndex:-1},J>le?(q.sortIndex=J,e(d,q),r(u)===null&&q===r(d)&&(P?(_(x),x=-1):P=!0,Z(D,J-le))):(q.sortIndex=ee,e(u,q),C||j||(C=!0,ce(L))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var W=g;return function(){var J=g;g=W;try{return q.apply(this,arguments)}finally{g=J}}}})(tv);ev.exports=tv;var jj=ev.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nj=k,er=jj;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rv=new Set,Jo={};function zs(t,e){Ai(t,e),Ai(t+"Capture",e)}function Ai(t,e){for(Jo[t]=e,t=0;t<e.length;t++)rv.add(e[t])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ah=Object.prototype.hasOwnProperty,Ej=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wg={},Gg={};function Sj(t){return ah.call(Gg,t)?!0:ah.call(Wg,t)?!1:Ej.test(t)?Gg[t]=!0:(Wg[t]=!0,!1)}function Tj(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ij(t,e,r,n){if(e===null||typeof e>"u"||Tj(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){lt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];lt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){lt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){lt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){lt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){lt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){lt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){lt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){lt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fm=/[\-:]([a-z])/g;function qm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fm,qm);lt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fm,qm);lt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fm,qm);lt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){lt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});lt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){lt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Um(t,e,r,n){var i=lt.hasOwnProperty(e)?lt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ij(e,r,i,n)&&(r=null),n||i===null?Sj(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var yn=Nj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hl=Symbol.for("react.element"),oi=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),zm=Symbol.for("react.strict_mode"),lh=Symbol.for("react.profiler"),nv=Symbol.for("react.provider"),sv=Symbol.for("react.context"),Bm=Symbol.for("react.forward_ref"),ch=Symbol.for("react.suspense"),uh=Symbol.for("react.suspense_list"),Hm=Symbol.for("react.memo"),Tn=Symbol.for("react.lazy"),iv=Symbol.for("react.offscreen"),$g=Symbol.iterator;function xo(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,id;function So(t){if(id===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);id=e&&e[1]||""}return`
`+id+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{od=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?So(t):""}function kj(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function dh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case oi:return"Portal";case lh:return"Profiler";case zm:return"StrictMode";case ch:return"Suspense";case uh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sv:return(t.displayName||"Context")+".Consumer";case nv:return(t._context.displayName||"Context")+".Provider";case Bm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hm:return e=t.displayName||null,e!==null?e:dh(t.type)||"Memo";case Tn:e=t._payload,t=t._init;try{return dh(t(e))}catch{}}return null}function Cj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dh(e);case 8:return e===zm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Jn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Aj(t){var e=ov(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=Aj(t))}function av(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ov(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function oc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function hh(t,e){var r=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Kg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Jn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lv(t,e){e=e.checked,e!=null&&Um(t,"checked",e,!1)}function mh(t,e){lv(t,e);var r=Jn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fh(t,e.type,r):e.hasOwnProperty("defaultValue")&&fh(t,e.type,Jn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function fh(t,e,r){(e!=="number"||oc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var To=Array.isArray;function vi(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Jn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(To(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Jn(r)}}function cv(t,e){var r=Jn(e.value),n=Jn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,dv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xo(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pj=["Webkit","ms","Moz","O"];Object.keys(Mo).forEach(function(t){Pj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mo[e]=Mo[t]})});function hv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Mo.hasOwnProperty(t)&&Mo[t]?(""+e).trim():e+"px"}function mv(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=hv(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var Rj=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xh(t,e){if(e){if(Rj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=null;function Wm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bh=null,bi=null,wi=null;function Xg(t){if(t=La(t)){if(typeof bh!="function")throw Error(H(280));var e=t.stateNode;e&&(e=nu(e),bh(t.stateNode,t.type,e))}}function fv(t){bi?wi?wi.push(t):wi=[t]:bi=t}function pv(){if(bi){var t=bi,e=wi;if(wi=bi=null,Xg(t),e)for(t=0;t<e.length;t++)Xg(e[t])}}function gv(t,e){return t(e)}function xv(){}var ld=!1;function yv(t,e,r){if(ld)return t(e,r);ld=!0;try{return gv(t,e,r)}finally{ld=!1,(bi!==null||wi!==null)&&(xv(),pv())}}function Zo(t,e){var r=t.stateNode;if(r===null)return null;var n=nu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var wh=!1;if(un)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){wh=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{wh=!1}function Dj(t,e,r,n,i,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(m){this.onError(m)}}var Vo=!1,ac=null,lc=!1,_h=null,Lj={onError:function(t){Vo=!0,ac=t}};function Mj(t,e,r,n,i,o,a,c,u){Vo=!1,ac=null,Dj.apply(Lj,arguments)}function Vj(t,e,r,n,i,o,a,c,u){if(Mj.apply(this,arguments),Vo){if(Vo){var d=ac;Vo=!1,ac=null}else throw Error(H(198));lc||(lc=!0,_h=d)}}function Bs(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function vv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Zg(t){if(Bs(t)!==t)throw Error(H(188))}function Oj(t){var e=t.alternate;if(!e){if(e=Bs(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Zg(i),t;if(o===n)return Zg(i),e;o=o.sibling}throw Error(H(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,c=i.child;c;){if(c===r){a=!0,r=i,n=o;break}if(c===n){a=!0,n=i,r=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===r){a=!0,r=o,n=i;break}if(c===n){a=!0,n=o,r=i;break}c=c.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function bv(t){return t=Oj(t),t!==null?wv(t):null}function wv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wv(t);if(e!==null)return e;t=t.sibling}return null}var _v=er.unstable_scheduleCallback,e0=er.unstable_cancelCallback,Fj=er.unstable_shouldYield,qj=er.unstable_requestPaint,qe=er.unstable_now,Uj=er.unstable_getCurrentPriorityLevel,Gm=er.unstable_ImmediatePriority,jv=er.unstable_UserBlockingPriority,cc=er.unstable_NormalPriority,zj=er.unstable_LowPriority,Nv=er.unstable_IdlePriority,Zc=null,Vr=null;function Bj(t){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(Zc,t,void 0,(t.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:Gj,Hj=Math.log,Wj=Math.LN2;function Gj(t){return t>>>=0,t===0?32:31-(Hj(t)/Wj|0)|0}var pl=64,gl=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var c=a&~i;c!==0?n=Io(c):(o&=a,o!==0&&(n=Io(o)))}else a=r&~i,a!==0?n=Io(a):o!==0&&(n=Io(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Nr(e),i=1<<r,n|=t[r],e&=~i;return n}function $j(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kj(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Nr(o),c=1<<a,u=i[a];u===-1?(!(c&r)||c&n)&&(i[a]=$j(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function jh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ev(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function cd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ra(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nr(e),t[e]=r}function Qj(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Nr(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function $m(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Nr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var be=0;function Sv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tv,Km,Iv,kv,Cv,Nh=!1,xl=[],Fn=null,qn=null,Un=null,ea=new Map,ta=new Map,kn=[],Yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function t0(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(e.pointerId)}}function vo(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=La(e),e!==null&&Km(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Jj(t,e,r,n,i){switch(e){case"focusin":return Fn=vo(Fn,t,e,r,n,i),!0;case"dragenter":return qn=vo(qn,t,e,r,n,i),!0;case"mouseover":return Un=vo(Un,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return ea.set(o,vo(ea.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,ta.set(o,vo(ta.get(o)||null,t,e,r,n,i)),!0}return!1}function Av(t){var e=xs(t.target);if(e!==null){var r=Bs(e);if(r!==null){if(e=r.tag,e===13){if(e=vv(r),e!==null){t.blockedOn=e,Cv(t.priority,function(){Iv(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Eh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);vh=n,r.target.dispatchEvent(n),vh=null}else return e=La(r),e!==null&&Km(e),t.blockedOn=r,!1;e.shift()}return!0}function r0(t,e,r){Ol(t)&&r.delete(e)}function Xj(){Nh=!1,Fn!==null&&Ol(Fn)&&(Fn=null),qn!==null&&Ol(qn)&&(qn=null),Un!==null&&Ol(Un)&&(Un=null),ea.forEach(r0),ta.forEach(r0)}function bo(t,e){t.blockedOn===e&&(t.blockedOn=null,Nh||(Nh=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Xj)))}function ra(t){function e(i){return bo(i,t)}if(0<xl.length){bo(xl[0],t);for(var r=1;r<xl.length;r++){var n=xl[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Fn!==null&&bo(Fn,t),qn!==null&&bo(qn,t),Un!==null&&bo(Un,t),ea.forEach(e),ta.forEach(e),r=0;r<kn.length;r++)n=kn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<kn.length&&(r=kn[0],r.blockedOn===null);)Av(r),r.blockedOn===null&&kn.shift()}var _i=yn.ReactCurrentBatchConfig,dc=!0;function Zj(t,e,r,n){var i=be,o=_i.transition;_i.transition=null;try{be=1,Qm(t,e,r,n)}finally{be=i,_i.transition=o}}function eN(t,e,r,n){var i=be,o=_i.transition;_i.transition=null;try{be=4,Qm(t,e,r,n)}finally{be=i,_i.transition=o}}function Qm(t,e,r,n){if(dc){var i=Eh(t,e,r,n);if(i===null)vd(t,e,n,hc,r),t0(t,n);else if(Jj(i,t,e,r,n))n.stopPropagation();else if(t0(t,n),e&4&&-1<Yj.indexOf(t)){for(;i!==null;){var o=La(i);if(o!==null&&Tv(o),o=Eh(t,e,r,n),o===null&&vd(t,e,n,hc,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else vd(t,e,n,null,r)}}var hc=null;function Eh(t,e,r,n){if(hc=null,t=Wm(n),t=xs(t),t!==null)if(e=Bs(t),e===null)t=null;else if(r=e.tag,r===13){if(t=vv(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hc=t,null}function Pv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uj()){case Gm:return 1;case jv:return 4;case cc:case zj:return 16;case Nv:return 536870912;default:return 16}default:return 16}}var Dn=null,Ym=null,Fl=null;function Rv(){if(Fl)return Fl;var t,e=Ym,r=e.length,n,i="value"in Dn?Dn.value:Dn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return Fl=i.slice(t,1<n?1-n:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yl(){return!0}function n0(){return!1}function rr(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(r=t[c],this[c]=r?r(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yl:n0,this.isPropagationStopped=n0,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jm=rr(Gi),Da=De({},Gi,{view:0,detail:0}),tN=rr(Da),ud,dd,wo,eu=De({},Da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(ud=t.screenX-wo.screenX,dd=t.screenY-wo.screenY):dd=ud=0,wo=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),s0=rr(eu),rN=De({},eu,{dataTransfer:0}),nN=rr(rN),sN=De({},Da,{relatedTarget:0}),hd=rr(sN),iN=De({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),oN=rr(iN),aN=De({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lN=rr(aN),cN=De({},Gi,{data:0}),i0=rr(cN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hN[t])?!!e[t]:!1}function Xm(){return mN}var fN=De({},Da,{key:function(t){if(t.key){var e=uN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xm,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pN=rr(fN),gN=De({},eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o0=rr(gN),xN=De({},Da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xm}),yN=rr(xN),vN=De({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bN=rr(vN),wN=De({},eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_N=rr(wN),jN=[9,13,27,32],Zm=un&&"CompositionEvent"in window,Oo=null;un&&"documentMode"in document&&(Oo=document.documentMode);var NN=un&&"TextEvent"in window&&!Oo,Dv=un&&(!Zm||Oo&&8<Oo&&11>=Oo),a0=" ",l0=!1;function Lv(t,e){switch(t){case"keyup":return jN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function EN(t,e){switch(t){case"compositionend":return Mv(e);case"keypress":return e.which!==32?null:(l0=!0,a0);case"textInput":return t=e.data,t===a0&&l0?null:t;default:return null}}function SN(t,e){if(li)return t==="compositionend"||!Zm&&Lv(t,e)?(t=Rv(),Fl=Ym=Dn=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dv&&e.locale!=="ko"?null:e.data;default:return null}}var TN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TN[t.type]:e==="textarea"}function Vv(t,e,r,n){fv(n),e=mc(e,"onChange"),0<e.length&&(r=new Jm("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Fo=null,na=null;function IN(t){Kv(t,0)}function tu(t){var e=di(t);if(av(e))return t}function kN(t,e){if(t==="change")return e}var Ov=!1;if(un){var md;if(un){var fd="oninput"in document;if(!fd){var u0=document.createElement("div");u0.setAttribute("oninput","return;"),fd=typeof u0.oninput=="function"}md=fd}else md=!1;Ov=md&&(!document.documentMode||9<document.documentMode)}function d0(){Fo&&(Fo.detachEvent("onpropertychange",Fv),na=Fo=null)}function Fv(t){if(t.propertyName==="value"&&tu(na)){var e=[];Vv(e,na,t,Wm(t)),yv(IN,e)}}function CN(t,e,r){t==="focusin"?(d0(),Fo=e,na=r,Fo.attachEvent("onpropertychange",Fv)):t==="focusout"&&d0()}function AN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tu(na)}function PN(t,e){if(t==="click")return tu(e)}function RN(t,e){if(t==="input"||t==="change")return tu(e)}function DN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Tr=typeof Object.is=="function"?Object.is:DN;function sa(t,e){if(Tr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ah.call(e,i)||!Tr(t[i],e[i]))return!1}return!0}function h0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0(t,e){var r=h0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=h0(r)}}function qv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Uv(){for(var t=window,e=oc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=oc(t.document)}return e}function ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LN(t){var e=Uv(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&qv(r.ownerDocument.documentElement,r)){if(n!==null&&ef(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=m0(r,o);var a=m0(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MN=un&&"documentMode"in document&&11>=document.documentMode,ci=null,Sh=null,qo=null,Th=!1;function f0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Th||ci==null||ci!==oc(n)||(n=ci,"selectionStart"in n&&ef(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),qo&&sa(qo,n)||(qo=n,n=mc(Sh,"onSelect"),0<n.length&&(e=new Jm("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ci)))}function vl(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var ui={animationend:vl("Animation","AnimationEnd"),animationiteration:vl("Animation","AnimationIteration"),animationstart:vl("Animation","AnimationStart"),transitionend:vl("Transition","TransitionEnd")},pd={},zv={};un&&(zv=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function ru(t){if(pd[t])return pd[t];if(!ui[t])return t;var e=ui[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in zv)return pd[t]=e[r];return t}var Bv=ru("animationend"),Hv=ru("animationiteration"),Wv=ru("animationstart"),Gv=ru("transitionend"),$v=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){$v.set(t,e),zs(e,[t])}for(var gd=0;gd<p0.length;gd++){var xd=p0[gd],VN=xd.toLowerCase(),ON=xd[0].toUpperCase()+xd.slice(1);rs(VN,"on"+ON)}rs(Bv,"onAnimationEnd");rs(Hv,"onAnimationIteration");rs(Wv,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(Gv,"onTransitionEnd");Ai("onMouseEnter",["mouseout","mouseover"]);Ai("onMouseLeave",["mouseout","mouseover"]);Ai("onPointerEnter",["pointerout","pointerover"]);Ai("onPointerLeave",["pointerout","pointerover"]);zs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zs("onBeforeInput",["compositionend","keypress","textInput","paste"]);zs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function g0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Vj(n,e,void 0,t),t.currentTarget=null}function Kv(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var c=n[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&i.isPropagationStopped())break e;g0(i,c,d),o=u}else for(a=0;a<n.length;a++){if(c=n[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&i.isPropagationStopped())break e;g0(i,c,d),o=u}}}if(lc)throw t=_h,lc=!1,_h=null,t}function Ee(t,e){var r=e[Ph];r===void 0&&(r=e[Ph]=new Set);var n=t+"__bubble";r.has(n)||(Qv(e,t,2,!1),r.add(n))}function yd(t,e,r){var n=0;e&&(n|=4),Qv(r,t,n,e)}var bl="_reactListening"+Math.random().toString(36).slice(2);function ia(t){if(!t[bl]){t[bl]=!0,rv.forEach(function(r){r!=="selectionchange"&&(FN.has(r)||yd(r,!1,t),yd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bl]||(e[bl]=!0,yd("selectionchange",!1,e))}}function Qv(t,e,r,n){switch(Pv(e)){case 1:var i=Zj;break;case 4:i=eN;break;default:i=Qm}r=i.bind(null,e,r,t),i=void 0,!wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function vd(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;c!==null;){if(a=xs(c),a===null)return;if(u=a.tag,u===5||u===6){n=o=a;continue e}c=c.parentNode}}n=n.return}yv(function(){var d=o,m=Wm(r),f=[];e:{var g=$v.get(t);if(g!==void 0){var j=Jm,C=t;switch(t){case"keypress":if(ql(r)===0)break e;case"keydown":case"keyup":j=pN;break;case"focusin":C="focus",j=hd;break;case"focusout":C="blur",j=hd;break;case"beforeblur":case"afterblur":j=hd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=s0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=nN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=yN;break;case Bv:case Hv:case Wv:j=oN;break;case Gv:j=bN;break;case"scroll":j=tN;break;case"wheel":j=_N;break;case"copy":case"cut":case"paste":j=lN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=o0}var P=(e&4)!==0,R=!P&&t==="scroll",_=P?g!==null?g+"Capture":null:g;P=[];for(var w=d,T;w!==null;){T=w;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,_!==null&&(D=Zo(w,_),D!=null&&P.push(oa(w,D,T)))),R)break;w=w.return}0<P.length&&(g=new j(g,C,null,r,m),f.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",g&&r!==vh&&(C=r.relatedTarget||r.fromElement)&&(xs(C)||C[dn]))break e;if((j||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,j?(C=r.relatedTarget||r.toElement,j=d,C=C?xs(C):null,C!==null&&(R=Bs(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(j=null,C=d),j!==C)){if(P=s0,D="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=o0,D="onPointerLeave",_="onPointerEnter",w="pointer"),R=j==null?g:di(j),T=C==null?g:di(C),g=new P(D,w+"leave",j,r,m),g.target=R,g.relatedTarget=T,D=null,xs(m)===d&&(P=new P(_,w+"enter",C,r,m),P.target=T,P.relatedTarget=R,D=P),R=D,j&&C)t:{for(P=j,_=C,w=0,T=P;T;T=ri(T))w++;for(T=0,D=_;D;D=ri(D))T++;for(;0<w-T;)P=ri(P),w--;for(;0<T-w;)_=ri(_),T--;for(;w--;){if(P===_||_!==null&&P===_.alternate)break t;P=ri(P),_=ri(_)}P=null}else P=null;j!==null&&x0(f,g,j,P,!1),C!==null&&R!==null&&x0(f,R,C,P,!0)}}e:{if(g=d?di(d):window,j=g.nodeName&&g.nodeName.toLowerCase(),j==="select"||j==="input"&&g.type==="file")var L=kN;else if(c0(g))if(Ov)L=RN;else{L=AN;var V=CN}else(j=g.nodeName)&&j.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=PN);if(L&&(L=L(t,d))){Vv(f,L,r,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&fh(g,"number",g.value)}switch(V=d?di(d):window,t){case"focusin":(c0(V)||V.contentEditable==="true")&&(ci=V,Sh=d,qo=null);break;case"focusout":qo=Sh=ci=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,f0(f,r,m);break;case"selectionchange":if(MN)break;case"keydown":case"keyup":f0(f,r,m)}var E;if(Zm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else li?Lv(t,r)&&(x="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(x="onCompositionStart");x&&(Dv&&r.locale!=="ko"&&(li||x!=="onCompositionStart"?x==="onCompositionEnd"&&li&&(E=Rv()):(Dn=m,Ym="value"in Dn?Dn.value:Dn.textContent,li=!0)),V=mc(d,x),0<V.length&&(x=new i0(x,t,null,r,m),f.push({event:x,listeners:V}),E?x.data=E:(E=Mv(r),E!==null&&(x.data=E)))),(E=NN?EN(t,r):SN(t,r))&&(d=mc(d,"onBeforeInput"),0<d.length&&(m=new i0("onBeforeInput","beforeinput",null,r,m),f.push({event:m,listeners:d}),m.data=E))}Kv(f,e)})}function oa(t,e,r){return{instance:t,listener:e,currentTarget:r}}function mc(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Zo(t,r),o!=null&&n.unshift(oa(t,o,i)),o=Zo(t,e),o!=null&&n.push(oa(t,o,i))),t=t.return}return n}function ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function x0(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var c=r,u=c.alternate,d=c.stateNode;if(u!==null&&u===n)break;c.tag===5&&d!==null&&(c=d,i?(u=Zo(r,o),u!=null&&a.unshift(oa(r,u,c))):i||(u=Zo(r,o),u!=null&&a.push(oa(r,u,c)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var qN=/\r\n?/g,UN=/\u0000|\uFFFD/g;function y0(t){return(typeof t=="string"?t:""+t).replace(qN,`
`).replace(UN,"")}function wl(t,e,r){if(e=y0(e),y0(t)!==e&&r)throw Error(H(425))}function fc(){}var Ih=null,kh=null;function Ch(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ah=typeof setTimeout=="function"?setTimeout:void 0,zN=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(t){return v0.resolve(null).then(t).catch(HN)}:Ah;function HN(t){setTimeout(function(){throw t})}function bd(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),ra(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ra(e)}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Mr="__reactFiber$"+$i,aa="__reactProps$"+$i,dn="__reactContainer$"+$i,Ph="__reactEvents$"+$i,WN="__reactListeners$"+$i,GN="__reactHandles$"+$i;function xs(t){var e=t[Mr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[dn]||r[Mr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=b0(t);t!==null;){if(r=t[Mr])return r;t=b0(t)}return e}t=r,r=t.parentNode}return null}function La(t){return t=t[Mr]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function nu(t){return t[aa]||null}var Rh=[],hi=-1;function ns(t){return{current:t}}function Te(t){0>hi||(t.current=Rh[hi],Rh[hi]=null,hi--)}function je(t,e){hi++,Rh[hi]=t.current,t.current=e}var Xn={},Et=ns(Xn),Ut=ns(!1),Is=Xn;function Pi(t,e){var r=t.type.contextTypes;if(!r)return Xn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zt(t){return t=t.childContextTypes,t!=null}function pc(){Te(Ut),Te(Et)}function w0(t,e,r){if(Et.current!==Xn)throw Error(H(168));je(Et,e),je(Ut,r)}function Yv(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(H(108,Cj(t)||"Unknown",i));return De({},r,n)}function gc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xn,Is=Et.current,je(Et,t),je(Ut,Ut.current),!0}function _0(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=Yv(t,e,Is),n.__reactInternalMemoizedMergedChildContext=t,Te(Ut),Te(Et),je(Et,t)):Te(Ut),je(Ut,r)}var Yr=null,su=!1,wd=!1;function Jv(t){Yr===null?Yr=[t]:Yr.push(t)}function $N(t){su=!0,Jv(t)}function ss(){if(!wd&&Yr!==null){wd=!0;var t=0,e=be;try{var r=Yr;for(be=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Yr=null,su=!1}catch(i){throw Yr!==null&&(Yr=Yr.slice(t+1)),_v(Gm,ss),i}finally{be=e,wd=!1}}return null}var mi=[],fi=0,xc=null,yc=0,ir=[],or=0,ks=null,en=1,tn="";function ms(t,e){mi[fi++]=yc,mi[fi++]=xc,xc=t,yc=e}function Xv(t,e,r){ir[or++]=en,ir[or++]=tn,ir[or++]=ks,ks=t;var n=en;t=tn;var i=32-Nr(n)-1;n&=~(1<<i),r+=1;var o=32-Nr(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,en=1<<32-Nr(e)+i|r<<i|n,tn=o+t}else en=1<<o|r<<i|n,tn=t}function tf(t){t.return!==null&&(ms(t,1),Xv(t,1,0))}function rf(t){for(;t===xc;)xc=mi[--fi],mi[fi]=null,yc=mi[--fi],mi[fi]=null;for(;t===ks;)ks=ir[--or],ir[or]=null,tn=ir[--or],ir[or]=null,en=ir[--or],ir[or]=null}var Xt=null,Yt=null,Ce=!1,wr=null;function Zv(t,e){var r=lr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function j0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ks!==null?{id:en,overflow:tn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=lr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Xt=t,Yt=null,!0):!1;default:return!1}}function Dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Lh(t){if(Ce){var e=Yt;if(e){var r=e;if(!j0(t,e)){if(Dh(t))throw Error(H(418));e=zn(r.nextSibling);var n=Xt;e&&j0(t,e)?Zv(n,r):(t.flags=t.flags&-4097|2,Ce=!1,Xt=t)}}else{if(Dh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ce=!1,Xt=t}}}function N0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function _l(t){if(t!==Xt)return!1;if(!Ce)return N0(t),Ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ch(t.type,t.memoizedProps)),e&&(e=Yt)){if(Dh(t))throw eb(),Error(H(418));for(;e;)Zv(t,e),e=zn(e.nextSibling)}if(N0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Yt=zn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?zn(t.stateNode.nextSibling):null;return!0}function eb(){for(var t=Yt;t;)t=zn(t.nextSibling)}function Ri(){Yt=Xt=null,Ce=!1}function nf(t){wr===null?wr=[t]:wr.push(t)}var KN=yn.ReactCurrentBatchConfig;function _o(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=i.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E0(t){var e=t._init;return e(t._payload)}function tb(t){function e(_,w){if(t){var T=_.deletions;T===null?(_.deletions=[w],_.flags|=16):T.push(w)}}function r(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function n(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function i(_,w){return _=Gn(_,w),_.index=0,_.sibling=null,_}function o(_,w,T){return _.index=T,t?(T=_.alternate,T!==null?(T=T.index,T<w?(_.flags|=2,w):T):(_.flags|=2,w)):(_.flags|=1048576,w)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function c(_,w,T,D){return w===null||w.tag!==6?(w=Id(T,_.mode,D),w.return=_,w):(w=i(w,T),w.return=_,w)}function u(_,w,T,D){var L=T.type;return L===ai?m(_,w,T.props.children,D,T.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Tn&&E0(L)===w.type)?(D=i(w,T.props),D.ref=_o(_,w,T),D.return=_,D):(D=$l(T.type,T.key,T.props,null,_.mode,D),D.ref=_o(_,w,T),D.return=_,D)}function d(_,w,T,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=kd(T,_.mode,D),w.return=_,w):(w=i(w,T.children||[]),w.return=_,w)}function m(_,w,T,D,L){return w===null||w.tag!==7?(w=Ns(T,_.mode,D,L),w.return=_,w):(w=i(w,T),w.return=_,w)}function f(_,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Id(""+w,_.mode,T),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hl:return T=$l(w.type,w.key,w.props,null,_.mode,T),T.ref=_o(_,null,w),T.return=_,T;case oi:return w=kd(w,_.mode,T),w.return=_,w;case Tn:var D=w._init;return f(_,D(w._payload),T)}if(To(w)||xo(w))return w=Ns(w,_.mode,T,null),w.return=_,w;jl(_,w)}return null}function g(_,w,T,D){var L=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return L!==null?null:c(_,w,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case hl:return T.key===L?u(_,w,T,D):null;case oi:return T.key===L?d(_,w,T,D):null;case Tn:return L=T._init,g(_,w,L(T._payload),D)}if(To(T)||xo(T))return L!==null?null:m(_,w,T,D,null);jl(_,T)}return null}function j(_,w,T,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return _=_.get(T)||null,c(w,_,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case hl:return _=_.get(D.key===null?T:D.key)||null,u(w,_,D,L);case oi:return _=_.get(D.key===null?T:D.key)||null,d(w,_,D,L);case Tn:var V=D._init;return j(_,w,T,V(D._payload),L)}if(To(D)||xo(D))return _=_.get(T)||null,m(w,_,D,L,null);jl(w,D)}return null}function C(_,w,T,D){for(var L=null,V=null,E=w,x=w=0,y=null;E!==null&&x<T.length;x++){E.index>x?(y=E,E=null):y=E.sibling;var v=g(_,E,T[x],D);if(v===null){E===null&&(E=y);break}t&&E&&v.alternate===null&&e(_,E),w=o(v,w,x),V===null?L=v:V.sibling=v,V=v,E=y}if(x===T.length)return r(_,E),Ce&&ms(_,x),L;if(E===null){for(;x<T.length;x++)E=f(_,T[x],D),E!==null&&(w=o(E,w,x),V===null?L=E:V.sibling=E,V=E);return Ce&&ms(_,x),L}for(E=n(_,E);x<T.length;x++)y=j(E,_,x,T[x],D),y!==null&&(t&&y.alternate!==null&&E.delete(y.key===null?x:y.key),w=o(y,w,x),V===null?L=y:V.sibling=y,V=y);return t&&E.forEach(function(N){return e(_,N)}),Ce&&ms(_,x),L}function P(_,w,T,D){var L=xo(T);if(typeof L!="function")throw Error(H(150));if(T=L.call(T),T==null)throw Error(H(151));for(var V=L=null,E=w,x=w=0,y=null,v=T.next();E!==null&&!v.done;x++,v=T.next()){E.index>x?(y=E,E=null):y=E.sibling;var N=g(_,E,v.value,D);if(N===null){E===null&&(E=y);break}t&&E&&N.alternate===null&&e(_,E),w=o(N,w,x),V===null?L=N:V.sibling=N,V=N,E=y}if(v.done)return r(_,E),Ce&&ms(_,x),L;if(E===null){for(;!v.done;x++,v=T.next())v=f(_,v.value,D),v!==null&&(w=o(v,w,x),V===null?L=v:V.sibling=v,V=v);return Ce&&ms(_,x),L}for(E=n(_,E);!v.done;x++,v=T.next())v=j(E,_,x,v.value,D),v!==null&&(t&&v.alternate!==null&&E.delete(v.key===null?x:v.key),w=o(v,w,x),V===null?L=v:V.sibling=v,V=v);return t&&E.forEach(function(A){return e(_,A)}),Ce&&ms(_,x),L}function R(_,w,T,D){if(typeof T=="object"&&T!==null&&T.type===ai&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case hl:e:{for(var L=T.key,V=w;V!==null;){if(V.key===L){if(L=T.type,L===ai){if(V.tag===7){r(_,V.sibling),w=i(V,T.props.children),w.return=_,_=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Tn&&E0(L)===V.type){r(_,V.sibling),w=i(V,T.props),w.ref=_o(_,V,T),w.return=_,_=w;break e}r(_,V);break}else e(_,V);V=V.sibling}T.type===ai?(w=Ns(T.props.children,_.mode,D,T.key),w.return=_,_=w):(D=$l(T.type,T.key,T.props,null,_.mode,D),D.ref=_o(_,w,T),D.return=_,_=D)}return a(_);case oi:e:{for(V=T.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){r(_,w.sibling),w=i(w,T.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else e(_,w);w=w.sibling}w=kd(T,_.mode,D),w.return=_,_=w}return a(_);case Tn:return V=T._init,R(_,w,V(T._payload),D)}if(To(T))return C(_,w,T,D);if(xo(T))return P(_,w,T,D);jl(_,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(r(_,w.sibling),w=i(w,T),w.return=_,_=w):(r(_,w),w=Id(T,_.mode,D),w.return=_,_=w),a(_)):r(_,w)}return R}var Di=tb(!0),rb=tb(!1),vc=ns(null),bc=null,pi=null,sf=null;function of(){sf=pi=bc=null}function af(t){var e=vc.current;Te(vc),t._currentValue=e}function Mh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function ji(t,e){bc=t,sf=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(sf!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(bc===null)throw Error(H(308));pi=t,bc.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var ys=null;function lf(t){ys===null?ys=[t]:ys.push(t)}function nb(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,lf(e)):(r.next=i.next,i.next=r),e.interleaved=r,hn(t,n)}function hn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var In=!1;function cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function on(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,xe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,hn(t,r)}return i=n.interleaved,i===null?(e.next=e,lf(n)):(e.next=i.next,i.next=e),n.interleaved=e,hn(t,r)}function Ul(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$m(t,r)}}function S0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function wc(t,e,r,n){var i=t.updateQueue;In=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(o!==null){var f=i.baseState;a=0,m=d=u=null,c=o;do{var g=c.lane,j=c.eventTime;if((n&g)===g){m!==null&&(m=m.next={eventTime:j,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,P=c;switch(g=e,j=r,P.tag){case 1:if(C=P.payload,typeof C=="function"){f=C.call(j,f,g);break e}f=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=P.payload,g=typeof C=="function"?C.call(j,f,g):C,g==null)break e;f=De({},f,g);break e;case 2:In=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else j={eventTime:j,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=j,u=f):m=m.next=j,a|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(u=f),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);As|=a,t.lanes=a,t.memoizedState=f}}function T0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(H(191,i));i.call(n)}}}var Ma={},Or=ns(Ma),la=ns(Ma),ca=ns(Ma);function vs(t){if(t===Ma)throw Error(H(174));return t}function uf(t,e){switch(je(ca,e),je(la,t),je(Or,Ma),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gh(e,t)}Te(Or),je(Or,e)}function Li(){Te(Or),Te(la),Te(ca)}function ib(t){vs(ca.current);var e=vs(Or.current),r=gh(e,t.type);e!==r&&(je(la,t),je(Or,r))}function df(t){la.current===t&&(Te(Or),Te(la))}var Pe=ns(0);function _c(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function hf(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var zl=yn.ReactCurrentDispatcher,jd=yn.ReactCurrentBatchConfig,Cs=0,Re=null,Ke=null,Ze=null,jc=!1,Uo=!1,ua=0,QN=0;function xt(){throw Error(H(321))}function mf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Tr(t[r],e[r]))return!1;return!0}function ff(t,e,r,n,i,o){if(Cs=o,Re=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?ZN:eE,t=r(n,i),Uo){o=0;do{if(Uo=!1,ua=0,25<=o)throw Error(H(301));o+=1,Ze=Ke=null,e.updateQueue=null,zl.current=tE,t=r(n,i)}while(Uo)}if(zl.current=Nc,e=Ke!==null&&Ke.next!==null,Cs=0,Ze=Ke=Re=null,jc=!1,e)throw Error(H(300));return t}function pf(){var t=ua!==0;return ua=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ze===null?Re.memoizedState=Ze=t:Ze=Ze.next=t,Ze}function fr(){if(Ke===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var e=Ze===null?Re.memoizedState:Ze.next;if(e!==null)Ze=e,Ke=t;else{if(t===null)throw Error(H(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},Ze===null?Re.memoizedState=Ze=t:Ze=Ze.next=t}return Ze}function da(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=fr(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=Ke,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var c=a=null,u=null,d=o;do{var m=d.lane;if((Cs&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=f,a=n):u=u.next=f,Re.lanes|=m,As|=m}d=d.next}while(d!==null&&d!==o);u===null?a=n:u.next=c,Tr(n,e.memoizedState)||(qt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,Re.lanes|=o,As|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ed(t){var e=fr(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Tr(o,e.memoizedState)||(qt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function ob(){}function ab(t,e){var r=Re,n=fr(),i=e(),o=!Tr(n.memoizedState,i);if(o&&(n.memoizedState=i,qt=!0),n=n.queue,gf(ub.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||Ze!==null&&Ze.memoizedState.tag&1){if(r.flags|=2048,ha(9,cb.bind(null,r,n,i,e),void 0,null),et===null)throw Error(H(349));Cs&30||lb(r,e,i)}return i}function lb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function cb(t,e,r,n){e.value=r,e.getSnapshot=n,db(e)&&hb(t)}function ub(t,e,r){return r(function(){db(e)&&hb(t)})}function db(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Tr(t,r)}catch{return!0}}function hb(t){var e=hn(t,1);e!==null&&Er(e,t,1,-1)}function I0(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=XN.bind(null,Re,t),[e.memoizedState,t]}function ha(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Re.updateQueue,e===null?(e={lastEffect:null,stores:null},Re.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function mb(){return fr().memoizedState}function Bl(t,e,r,n){var i=Lr();Re.flags|=t,i.memoizedState=ha(1|e,r,void 0,n===void 0?null:n)}function iu(t,e,r,n){var i=fr();n=n===void 0?null:n;var o=void 0;if(Ke!==null){var a=Ke.memoizedState;if(o=a.destroy,n!==null&&mf(n,a.deps)){i.memoizedState=ha(e,r,o,n);return}}Re.flags|=t,i.memoizedState=ha(1|e,r,o,n)}function k0(t,e){return Bl(8390656,8,t,e)}function gf(t,e){return iu(2048,8,t,e)}function fb(t,e){return iu(4,2,t,e)}function pb(t,e){return iu(4,4,t,e)}function gb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xb(t,e,r){return r=r!=null?r.concat([t]):null,iu(4,4,gb.bind(null,e,t),r)}function xf(){}function yb(t,e){var r=fr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&mf(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function vb(t,e){var r=fr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&mf(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function bb(t,e,r){return Cs&21?(Tr(r,e)||(r=Ev(),Re.lanes|=r,As|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=r)}function YN(t,e){var r=be;be=r!==0&&4>r?r:4,t(!0);var n=jd.transition;jd.transition={};try{t(!1),e()}finally{be=r,jd.transition=n}}function wb(){return fr().memoizedState}function JN(t,e,r){var n=Wn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},_b(t))jb(e,r);else if(r=nb(t,e,r,n),r!==null){var i=Pt();Er(r,t,n,i),Nb(r,e,n)}}function XN(t,e,r){var n=Wn(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(_b(t))jb(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,r);if(i.hasEagerState=!0,i.eagerState=c,Tr(c,a)){var u=e.interleaved;u===null?(i.next=i,lf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=nb(t,e,i,n),r!==null&&(i=Pt(),Er(r,t,n,i),Nb(r,e,n))}}function _b(t){var e=t.alternate;return t===Re||e!==null&&e===Re}function jb(t,e){Uo=jc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Nb(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,$m(t,r)}}var Nc={readContext:mr,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},ZN={readContext:mr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:k0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Bl(4194308,4,gb.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bl(4,2,t,e)},useMemo:function(t,e){var r=Lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Lr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=JN.bind(null,Re,t),[n.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:I0,useDebugValue:xf,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=I0(!1),e=t[0];return t=YN.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Re,i=Lr();if(Ce){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),et===null)throw Error(H(349));Cs&30||lb(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,k0(ub.bind(null,n,o,t),[t]),n.flags|=2048,ha(9,cb.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Lr(),e=et.identifierPrefix;if(Ce){var r=tn,n=en;r=(n&~(1<<32-Nr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ua++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=QN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eE={readContext:mr,useCallback:yb,useContext:mr,useEffect:gf,useImperativeHandle:xb,useInsertionEffect:fb,useLayoutEffect:pb,useMemo:vb,useReducer:Nd,useRef:mb,useState:function(){return Nd(da)},useDebugValue:xf,useDeferredValue:function(t){var e=fr();return bb(e,Ke.memoizedState,t)},useTransition:function(){var t=Nd(da)[0],e=fr().memoizedState;return[t,e]},useMutableSource:ob,useSyncExternalStore:ab,useId:wb,unstable_isNewReconciler:!1},tE={readContext:mr,useCallback:yb,useContext:mr,useEffect:gf,useImperativeHandle:xb,useInsertionEffect:fb,useLayoutEffect:pb,useMemo:vb,useReducer:Ed,useRef:mb,useState:function(){return Ed(da)},useDebugValue:xf,useDeferredValue:function(t){var e=fr();return Ke===null?e.memoizedState=t:bb(e,Ke.memoizedState,t)},useTransition:function(){var t=Ed(da)[0],e=fr().memoizedState;return[t,e]},useMutableSource:ob,useSyncExternalStore:ab,useId:wb,unstable_isNewReconciler:!1};function vr(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Vh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:De({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ou={isMounted:function(t){return(t=t._reactInternals)?Bs(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Pt(),i=Wn(t),o=on(n,i);o.payload=e,r!=null&&(o.callback=r),e=Bn(t,o,i),e!==null&&(Er(e,t,i,n),Ul(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Pt(),i=Wn(t),o=on(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Bn(t,o,i),e!==null&&(Er(e,t,i,n),Ul(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Pt(),n=Wn(t),i=on(r,n);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,n),e!==null&&(Er(e,t,n,r),Ul(e,t,n))}};function C0(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!sa(r,n)||!sa(i,o):!0}function Eb(t,e,r){var n=!1,i=Xn,o=e.contextType;return typeof o=="object"&&o!==null?o=mr(o):(i=zt(e)?Is:Et.current,n=e.contextTypes,o=(n=n!=null)?Pi(t,i):Xn),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ou,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function A0(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&ou.enqueueReplaceState(e,e.state,null)}function Oh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},cf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=mr(o):(o=zt(e)?Is:Et.current,i.context=Pi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Vh(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ou.enqueueReplaceState(i,i.state,null),wc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Mi(t,e){try{var r="",n=e;do r+=kj(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Sd(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Fh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var rE=typeof WeakMap=="function"?WeakMap:Map;function Sb(t,e,r){r=on(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Sc||(Sc=!0,Qh=n),Fh(t,e)},r}function Tb(t,e,r){r=on(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Fh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Fh(t,e),typeof n!="function"&&(Hn===null?Hn=new Set([this]):Hn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function P0(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new rE;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=gE.bind(null,t,e,r),e.then(t,t))}function R0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function D0(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=on(-1,1),e.tag=2,Bn(r,e,1))),r.lanes|=1),t)}var nE=yn.ReactCurrentOwner,qt=!1;function At(t,e,r,n){e.child=t===null?rb(e,null,r,n):Di(e,t.child,r,n)}function L0(t,e,r,n,i){r=r.render;var o=e.ref;return ji(e,i),n=ff(t,e,r,n,o,i),r=pf(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(Ce&&r&&tf(e),e.flags|=1,At(t,e,n,i),e.child)}function M0(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!Ef(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,Ib(t,e,o,n,i)):(t=$l(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:sa,r(a,n)&&t.ref===e.ref)return mn(t,e,i)}return e.flags|=1,t=Gn(o,n),t.ref=e.ref,t.return=e,e.child=t}function Ib(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(sa(o,n)&&t.ref===e.ref)if(qt=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,mn(t,e,i)}return qh(t,e,r,n,i)}function kb(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(xi,Qt),Qt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(xi,Qt),Qt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,je(xi,Qt),Qt|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,je(xi,Qt),Qt|=n;return At(t,e,i,r),e.child}function Cb(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function qh(t,e,r,n,i){var o=zt(r)?Is:Et.current;return o=Pi(e,o),ji(e,i),r=ff(t,e,r,n,o,i),n=pf(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(Ce&&n&&tf(e),e.flags|=1,At(t,e,r,i),e.child)}function V0(t,e,r,n,i){if(zt(r)){var o=!0;gc(e)}else o=!1;if(ji(e,i),e.stateNode===null)Hl(t,e),Eb(e,r,n),Oh(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=mr(d):(d=zt(r)?Is:Et.current,d=Pi(e,d));var m=r.getDerivedStateFromProps,f=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==n||u!==d)&&A0(e,a,n,d),In=!1;var g=e.memoizedState;a.state=g,wc(e,n,a,i),u=e.memoizedState,c!==n||g!==u||Ut.current||In?(typeof m=="function"&&(Vh(e,r,m,n),u=e.memoizedState),(c=In||C0(e,r,c,n,g,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=d,n=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,sb(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:vr(e.type,c),a.props=d,f=e.pendingProps,g=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=mr(u):(u=zt(r)?Is:Et.current,u=Pi(e,u));var j=r.getDerivedStateFromProps;(m=typeof j=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==f||g!==u)&&A0(e,a,n,u),In=!1,g=e.memoizedState,a.state=g,wc(e,n,a,i);var C=e.memoizedState;c!==f||g!==C||Ut.current||In?(typeof j=="function"&&(Vh(e,r,j,n),C=e.memoizedState),(d=In||C0(e,r,d,n,g,C,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=C),a.props=n,a.state=C,a.context=u,n=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return Uh(t,e,r,n,o,i)}function Uh(t,e,r,n,i,o){Cb(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&_0(e,r,!1),mn(t,e,o);n=e.stateNode,nE.current=e;var c=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Di(e,t.child,null,o),e.child=Di(e,null,c,o)):At(t,e,c,o),e.memoizedState=n.state,i&&_0(e,r,!0),e.child}function Ab(t){var e=t.stateNode;e.pendingContext?w0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w0(t,e.context,!1),uf(t,e.containerInfo)}function O0(t,e,r,n,i){return Ri(),nf(i),e.flags|=256,At(t,e,r,n),e.child}var zh={dehydrated:null,treeContext:null,retryLane:0};function Bh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pb(t,e,r){var n=e.pendingProps,i=Pe.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),je(Pe,i&1),t===null)return Lh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=cu(a,n,0,null),t=Ns(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Bh(r),e.memoizedState=zh,t):yf(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return sE(t,e,a,n,c,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Gn(i,u),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Gn(c,o):(o=Ns(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Bh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=zh,n}return o=t.child,t=o.sibling,n=Gn(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function yf(t,e){return e=cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,r,n){return n!==null&&nf(n),Di(e,t.child,null,r),t=yf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sE(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=Sd(Error(H(422))),Nl(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=cu({mode:"visible",children:n.children},i,0,null),o=Ns(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&Di(e,t.child,null,a),e.child.memoizedState=Bh(a),e.memoizedState=zh,o);if(!(e.mode&1))return Nl(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,o=Error(H(419)),n=Sd(o,n,void 0),Nl(t,e,a,n)}if(c=(a&t.childLanes)!==0,qt||c){if(n=et,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,hn(t,i),Er(n,t,i,-1))}return Nf(),n=Sd(Error(H(421))),Nl(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=xE.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Yt=zn(i.nextSibling),Xt=e,Ce=!0,wr=null,t!==null&&(ir[or++]=en,ir[or++]=tn,ir[or++]=ks,en=t.id,tn=t.overflow,ks=e),e=yf(e,n.children),e.flags|=4096,e)}function F0(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Mh(t.return,e,r)}function Td(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Rb(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(At(t,e,n.children,r),n=Pe.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&F0(t,r,e);else if(t.tag===19)F0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(je(Pe,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&_c(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Td(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_c(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Td(e,!0,r,null,o);break;case"together":Td(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),As|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=Gn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Gn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function iE(t,e,r){switch(e.tag){case 3:Ab(e),Ri();break;case 5:ib(e);break;case 1:zt(e.type)&&gc(e);break;case 4:uf(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;je(vc,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(je(Pe,Pe.current&1),e.flags|=128,null):r&e.child.childLanes?Pb(t,e,r):(je(Pe,Pe.current&1),t=mn(t,e,r),t!==null?t.sibling:null);je(Pe,Pe.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Rb(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),je(Pe,Pe.current),n)break;return null;case 22:case 23:return e.lanes=0,kb(t,e,r)}return mn(t,e,r)}var Db,Hh,Lb,Mb;Db=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hh=function(){};Lb=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,vs(Or.current);var o=null;switch(r){case"input":i=hh(t,i),n=hh(t,n),o=[];break;case"select":i=De({},i,{value:void 0}),n=De({},n,{value:void 0}),o=[];break;case"textarea":i=ph(t,i),n=ph(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=fc)}xh(r,n);var a;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jo.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var u=n[d];if(c=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ee("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}r&&(o=o||[]).push("style",r);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Mb=function(t,e,r,n){r!==n&&(e.flags|=4)};function jo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function oE(t,e,r){var n=e.pendingProps;switch(rf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return zt(e.type)&&pc(),yt(e),null;case 3:return n=e.stateNode,Li(),Te(Ut),Te(Et),hf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(_l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&(Xh(wr),wr=null))),Hh(t,e),yt(e),null;case 5:df(e);var i=vs(ca.current);if(r=e.type,t!==null&&e.stateNode!=null)Lb(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return yt(e),null}if(t=vs(Or.current),_l(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Mr]=e,n[aa]=o,t=(e.mode&1)!==0,r){case"dialog":Ee("cancel",n),Ee("close",n);break;case"iframe":case"object":case"embed":Ee("load",n);break;case"video":case"audio":for(i=0;i<ko.length;i++)Ee(ko[i],n);break;case"source":Ee("error",n);break;case"img":case"image":case"link":Ee("error",n),Ee("load",n);break;case"details":Ee("toggle",n);break;case"input":Kg(n,o),Ee("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",n);break;case"textarea":Yg(n,o),Ee("invalid",n)}xh(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?n.textContent!==c&&(o.suppressHydrationWarning!==!0&&wl(n.textContent,c,t),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&wl(n.textContent,c,t),i=["children",""+c]):Jo.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ee("scroll",n)}switch(r){case"input":ml(n),Qg(n,o,!0);break;case"textarea":ml(n),Jg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=fc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Mr]=e,t[aa]=n,Db(t,e,!1,!1),e.stateNode=t;e:{switch(a=yh(r,n),r){case"dialog":Ee("cancel",t),Ee("close",t),i=n;break;case"iframe":case"object":case"embed":Ee("load",t),i=n;break;case"video":case"audio":for(i=0;i<ko.length;i++)Ee(ko[i],t);i=n;break;case"source":Ee("error",t),i=n;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=n;break;case"details":Ee("toggle",t),i=n;break;case"input":Kg(t,n),i=hh(t,n),Ee("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=De({},n,{value:void 0}),Ee("invalid",t);break;case"textarea":Yg(t,n),i=ph(t,n),Ee("invalid",t);break;default:i=n}xh(r,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?mv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dv(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Xo(t,u):typeof u=="number"&&Xo(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Jo.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ee("scroll",t):u!=null&&Um(t,o,u,a))}switch(r){case"input":ml(t),Qg(t,n,!1);break;case"textarea":ml(t),Jg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Jn(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?vi(t,!!n.multiple,o,!1):n.defaultValue!=null&&vi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=fc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)Mb(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=vs(ca.current),vs(Or.current),_l(e)){if(n=e.stateNode,r=e.memoizedProps,n[Mr]=e,(o=n.nodeValue!==r)&&(t=Xt,t!==null))switch(t.tag){case 3:wl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Mr]=e,e.stateNode=n}return yt(e),null;case 13:if(Te(Pe),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ce&&Yt!==null&&e.mode&1&&!(e.flags&128))eb(),Ri(),e.flags|=98560,o=!1;else if(o=_l(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Mr]=e}else Ri(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),o=!1}else wr!==null&&(Xh(wr),wr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?Qe===0&&(Qe=3):Nf())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return Li(),Hh(t,e),t===null&&ia(e.stateNode.containerInfo),yt(e),null;case 10:return af(e.type._context),yt(e),null;case 17:return zt(e.type)&&pc(),yt(e),null;case 19:if(Te(Pe),o=e.memoizedState,o===null)return yt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)jo(o,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=_c(t),a!==null){for(e.flags|=128,jo(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return je(Pe,Pe.current&1|2),e.child}t=t.sibling}o.tail!==null&&qe()>Vi&&(e.flags|=128,n=!0,jo(o,!1),e.lanes=4194304)}else{if(!n)if(t=_c(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),jo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ce)return yt(e),null}else 2*qe()-o.renderingStartTime>Vi&&r!==1073741824&&(e.flags|=128,n=!0,jo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=qe(),e.sibling=null,r=Pe.current,je(Pe,n?r&1|2:r&1),e):(yt(e),null);case 22:case 23:return jf(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Qt&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function aE(t,e){switch(rf(e),e.tag){case 1:return zt(e.type)&&pc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Te(Ut),Te(Et),hf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return df(e),null;case 13:if(Te(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ri()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Pe),null;case 4:return Li(),null;case 10:return af(e.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var El=!1,_t=!1,lE=typeof WeakSet=="function"?WeakSet:Set,Y=null;function gi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(t,e,n)}else r.current=null}function Wh(t,e,r){try{r()}catch(n){Ve(t,e,n)}}var q0=!1;function cE(t,e){if(Ih=dc,t=Uv(),ef(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,c=-1,u=-1,d=0,m=0,f=t,g=null;t:for(;;){for(var j;f!==r||i!==0&&f.nodeType!==3||(c=a+i),f!==o||n!==0&&f.nodeType!==3||(u=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(j=f.firstChild)!==null;)g=f,f=j;for(;;){if(f===t)break t;if(g===r&&++d===i&&(c=a),g===o&&++m===n&&(u=a),(j=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=j}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(kh={focusedElem:t,selectionRange:r},dc=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var P=C.memoizedProps,R=C.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?P:vr(e.type,P),R);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(D){Ve(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=q0,q0=!1,C}function zo(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Wh(e,r,o)}i=i.next}while(i!==n)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Gh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Vb(t){var e=t.alternate;e!==null&&(t.alternate=null,Vb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mr],delete e[aa],delete e[Ph],delete e[WN],delete e[GN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ob(t){return t.tag===5||t.tag===3||t.tag===4}function U0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ob(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $h(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=fc));else if(n!==4&&(t=t.child,t!==null))for($h(t,e,r),t=t.sibling;t!==null;)$h(t,e,r),t=t.sibling}function Kh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Kh(t,e,r),t=t.sibling;t!==null;)Kh(t,e,r),t=t.sibling}var rt=null,br=!1;function En(t,e,r){for(r=r.child;r!==null;)Fb(t,e,r),r=r.sibling}function Fb(t,e,r){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(Zc,r)}catch{}switch(r.tag){case 5:_t||gi(r,e);case 6:var n=rt,i=br;rt=null,En(t,e,r),rt=n,br=i,rt!==null&&(br?(t=rt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):rt.removeChild(r.stateNode));break;case 18:rt!==null&&(br?(t=rt,r=r.stateNode,t.nodeType===8?bd(t.parentNode,r):t.nodeType===1&&bd(t,r),ra(t)):bd(rt,r.stateNode));break;case 4:n=rt,i=br,rt=r.stateNode.containerInfo,br=!0,En(t,e,r),rt=n,br=i;break;case 0:case 11:case 14:case 15:if(!_t&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Wh(r,e,a),i=i.next}while(i!==n)}En(t,e,r);break;case 1:if(!_t&&(gi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){Ve(r,e,c)}En(t,e,r);break;case 21:En(t,e,r);break;case 22:r.mode&1?(_t=(n=_t)||r.memoizedState!==null,En(t,e,r),_t=n):En(t,e,r);break;default:En(t,e,r)}}function z0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new lE),e.forEach(function(n){var i=yE.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function yr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:rt=c.stateNode,br=!1;break e;case 3:rt=c.stateNode.containerInfo,br=!0;break e;case 4:rt=c.stateNode.containerInfo,br=!0;break e}c=c.return}if(rt===null)throw Error(H(160));Fb(o,a,i),rt=null,br=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ve(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qb(e,t),e=e.sibling}function qb(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(e,t),Rr(t),n&4){try{zo(3,t,t.return),au(3,t)}catch(P){Ve(t,t.return,P)}try{zo(5,t,t.return)}catch(P){Ve(t,t.return,P)}}break;case 1:yr(e,t),Rr(t),n&512&&r!==null&&gi(r,r.return);break;case 5:if(yr(e,t),Rr(t),n&512&&r!==null&&gi(r,r.return),t.flags&32){var i=t.stateNode;try{Xo(i,"")}catch(P){Ve(t,t.return,P)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&lv(i,o),yh(c,a);var d=yh(c,o);for(a=0;a<u.length;a+=2){var m=u[a],f=u[a+1];m==="style"?mv(i,f):m==="dangerouslySetInnerHTML"?dv(i,f):m==="children"?Xo(i,f):Um(i,m,f,d)}switch(c){case"input":mh(i,o);break;case"textarea":cv(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var j=o.value;j!=null?vi(i,!!o.multiple,j,!1):g!==!!o.multiple&&(o.defaultValue!=null?vi(i,!!o.multiple,o.defaultValue,!0):vi(i,!!o.multiple,o.multiple?[]:"",!1))}i[aa]=o}catch(P){Ve(t,t.return,P)}}break;case 6:if(yr(e,t),Rr(t),n&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Ve(t,t.return,P)}}break;case 3:if(yr(e,t),Rr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ra(e.containerInfo)}catch(P){Ve(t,t.return,P)}break;case 4:yr(e,t),Rr(t);break;case 13:yr(e,t),Rr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(wf=qe())),n&4&&z0(t);break;case 22:if(m=r!==null&&r.memoizedState!==null,t.mode&1?(_t=(d=_t)||m,yr(e,t),_t=d):yr(e,t),Rr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(Y=t,m=t.child;m!==null;){for(f=Y=m;Y!==null;){switch(g=Y,j=g.child,g.tag){case 0:case 11:case 14:case 15:zo(4,g,g.return);break;case 1:gi(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(P){Ve(n,r,P)}}break;case 5:gi(g,g.return);break;case 22:if(g.memoizedState!==null){H0(f);continue}}j!==null?(j.return=g,Y=j):H0(f)}m=m.sibling}e:for(m=null,f=t;;){if(f.tag===5){if(m===null){m=f;try{i=f.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=hv("display",a))}catch(P){Ve(t,t.return,P)}}}else if(f.tag===6){if(m===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(P){Ve(t,t.return,P)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yr(e,t),Rr(t),n&4&&z0(t);break;case 21:break;default:yr(e,t),Rr(t)}}function Rr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ob(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Xo(i,""),n.flags&=-33);var o=U0(t);Kh(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,c=U0(t);$h(t,c,a);break;default:throw Error(H(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uE(t,e,r){Y=t,Ub(t)}function Ub(t,e,r){for(var n=(t.mode&1)!==0;Y!==null;){var i=Y,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||El;if(!a){var c=i.alternate,u=c!==null&&c.memoizedState!==null||_t;c=El;var d=_t;if(El=a,(_t=u)&&!d)for(Y=i;Y!==null;)a=Y,u=a.child,a.tag===22&&a.memoizedState!==null?W0(i):u!==null?(u.return=a,Y=u):W0(i);for(;o!==null;)Y=o,Ub(o),o=o.sibling;Y=i,El=c,_t=d}B0(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Y=o):B0(t)}}function B0(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||au(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!_t)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:vr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&T0(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}T0(e,a,r)}break;case 5:var c=e.stateNode;if(r===null&&e.flags&4){r=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var f=m.dehydrated;f!==null&&ra(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}_t||e.flags&512&&Gh(e)}catch(g){Ve(e,e.return,g)}}if(e===t){Y=null;break}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}}function H0(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Y=r;break}Y=e.return}}function W0(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{au(4,e)}catch(u){Ve(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Ve(e,i,u)}}var o=e.return;try{Gh(e)}catch(u){Ve(e,o,u)}break;case 5:var a=e.return;try{Gh(e)}catch(u){Ve(e,a,u)}}}catch(u){Ve(e,e.return,u)}if(e===t){Y=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Y=c;break}Y=e.return}}var dE=Math.ceil,Ec=yn.ReactCurrentDispatcher,vf=yn.ReactCurrentOwner,ur=yn.ReactCurrentBatchConfig,xe=0,et=null,He=null,ot=0,Qt=0,xi=ns(0),Qe=0,ma=null,As=0,lu=0,bf=0,Bo=null,Ot=null,wf=0,Vi=1/0,Qr=null,Sc=!1,Qh=null,Hn=null,Sl=!1,Ln=null,Tc=0,Ho=0,Yh=null,Wl=-1,Gl=0;function Pt(){return xe&6?qe():Wl!==-1?Wl:Wl=qe()}function Wn(t){return t.mode&1?xe&2&&ot!==0?ot&-ot:KN.transition!==null?(Gl===0&&(Gl=Ev()),Gl):(t=be,t!==0||(t=window.event,t=t===void 0?16:Pv(t.type)),t):1}function Er(t,e,r,n){if(50<Ho)throw Ho=0,Yh=null,Error(H(185));Ra(t,r,n),(!(xe&2)||t!==et)&&(t===et&&(!(xe&2)&&(lu|=r),Qe===4&&Cn(t,ot)),Bt(t,n),r===1&&xe===0&&!(e.mode&1)&&(Vi=qe()+500,su&&ss()))}function Bt(t,e){var r=t.callbackNode;Kj(t,e);var n=uc(t,t===et?ot:0);if(n===0)r!==null&&e0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&e0(r),e===1)t.tag===0?$N(G0.bind(null,t)):Jv(G0.bind(null,t)),BN(function(){!(xe&6)&&ss()}),r=null;else{switch(Sv(n)){case 1:r=Gm;break;case 4:r=jv;break;case 16:r=cc;break;case 536870912:r=Nv;break;default:r=cc}r=Qb(r,zb.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function zb(t,e){if(Wl=-1,Gl=0,xe&6)throw Error(H(327));var r=t.callbackNode;if(Ni()&&t.callbackNode!==r)return null;var n=uc(t,t===et?ot:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Ic(t,n);else{e=n;var i=xe;xe|=2;var o=Hb();(et!==t||ot!==e)&&(Qr=null,Vi=qe()+500,js(t,e));do try{fE();break}catch(c){Bb(t,c)}while(!0);of(),Ec.current=o,xe=i,He!==null?e=0:(et=null,ot=0,e=Qe)}if(e!==0){if(e===2&&(i=jh(t),i!==0&&(n=i,e=Jh(t,i))),e===1)throw r=ma,js(t,0),Cn(t,n),Bt(t,qe()),r;if(e===6)Cn(t,n);else{if(i=t.current.alternate,!(n&30)&&!hE(i)&&(e=Ic(t,n),e===2&&(o=jh(t),o!==0&&(n=o,e=Jh(t,o))),e===1))throw r=ma,js(t,0),Cn(t,n),Bt(t,qe()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:fs(t,Ot,Qr);break;case 3:if(Cn(t,n),(n&130023424)===n&&(e=wf+500-qe(),10<e)){if(uc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ah(fs.bind(null,t,Ot,Qr),e);break}fs(t,Ot,Qr);break;case 4:if(Cn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-Nr(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=qe()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*dE(n/1960))-n,10<n){t.timeoutHandle=Ah(fs.bind(null,t,Ot,Qr),n);break}fs(t,Ot,Qr);break;case 5:fs(t,Ot,Qr);break;default:throw Error(H(329))}}}return Bt(t,qe()),t.callbackNode===r?zb.bind(null,t):null}function Jh(t,e){var r=Bo;return t.current.memoizedState.isDehydrated&&(js(t,e).flags|=256),t=Ic(t,e),t!==2&&(e=Ot,Ot=r,e!==null&&Xh(e)),t}function Xh(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function hE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Tr(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cn(t,e){for(e&=~bf,e&=~lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Nr(e),n=1<<r;t[r]=-1,e&=~n}}function G0(t){if(xe&6)throw Error(H(327));Ni();var e=uc(t,0);if(!(e&1))return Bt(t,qe()),null;var r=Ic(t,e);if(t.tag!==0&&r===2){var n=jh(t);n!==0&&(e=n,r=Jh(t,n))}if(r===1)throw r=ma,js(t,0),Cn(t,e),Bt(t,qe()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fs(t,Ot,Qr),Bt(t,qe()),null}function _f(t,e){var r=xe;xe|=1;try{return t(e)}finally{xe=r,xe===0&&(Vi=qe()+500,su&&ss())}}function Ps(t){Ln!==null&&Ln.tag===0&&!(xe&6)&&Ni();var e=xe;xe|=1;var r=ur.transition,n=be;try{if(ur.transition=null,be=1,t)return t()}finally{be=n,ur.transition=r,xe=e,!(xe&6)&&ss()}}function jf(){Qt=xi.current,Te(xi)}function js(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,zN(r)),He!==null)for(r=He.return;r!==null;){var n=r;switch(rf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pc();break;case 3:Li(),Te(Ut),Te(Et),hf();break;case 5:df(n);break;case 4:Li();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:af(n.type._context);break;case 22:case 23:jf()}r=r.return}if(et=t,He=t=Gn(t.current,null),ot=Qt=e,Qe=0,ma=null,bf=lu=As=0,Ot=Bo=null,ys!==null){for(e=0;e<ys.length;e++)if(r=ys[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}ys=null}return t}function Bb(t,e){do{var r=He;try{if(of(),zl.current=Nc,jc){for(var n=Re.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}jc=!1}if(Cs=0,Ze=Ke=Re=null,Uo=!1,ua=0,vf.current=null,r===null||r.return===null){Qe=1,ma=e,He=null;break}e:{var o=t,a=r.return,c=r,u=e;if(e=ot,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,f=m.tag;if(!(m.mode&1)&&(f===0||f===11||f===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var j=R0(a);if(j!==null){j.flags&=-257,D0(j,a,c,o,e),j.mode&1&&P0(o,d,e),e=j,u=d;var C=e.updateQueue;if(C===null){var P=new Set;P.add(u),e.updateQueue=P}else C.add(u);break e}else{if(!(e&1)){P0(o,d,e),Nf();break e}u=Error(H(426))}}else if(Ce&&c.mode&1){var R=R0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),D0(R,a,c,o,e),nf(Mi(u,c));break e}}o=u=Mi(u,c),Qe!==4&&(Qe=2),Bo===null?Bo=[o]:Bo.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=Sb(o,u,e);S0(o,_);break e;case 1:c=u;var w=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Hn===null||!Hn.has(T)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=Tb(o,c,e);S0(o,D);break e}}o=o.return}while(o!==null)}Gb(r)}catch(L){e=L,He===r&&r!==null&&(He=r=r.return);continue}break}while(!0)}function Hb(){var t=Ec.current;return Ec.current=Nc,t===null?Nc:t}function Nf(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),et===null||!(As&268435455)&&!(lu&268435455)||Cn(et,ot)}function Ic(t,e){var r=xe;xe|=2;var n=Hb();(et!==t||ot!==e)&&(Qr=null,js(t,e));do try{mE();break}catch(i){Bb(t,i)}while(!0);if(of(),xe=r,Ec.current=n,He!==null)throw Error(H(261));return et=null,ot=0,Qe}function mE(){for(;He!==null;)Wb(He)}function fE(){for(;He!==null&&!Fj();)Wb(He)}function Wb(t){var e=Kb(t.alternate,t,Qt);t.memoizedProps=t.pendingProps,e===null?Gb(t):He=e,vf.current=null}function Gb(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=aE(r,e),r!==null){r.flags&=32767,He=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,He=null;return}}else if(r=oE(r,e,Qt),r!==null){He=r;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Qe===0&&(Qe=5)}function fs(t,e,r){var n=be,i=ur.transition;try{ur.transition=null,be=1,pE(t,e,r,n)}finally{ur.transition=i,be=n}return null}function pE(t,e,r,n){do Ni();while(Ln!==null);if(xe&6)throw Error(H(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(Qj(t,o),t===et&&(He=et=null,ot=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sl||(Sl=!0,Qb(cc,function(){return Ni(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=ur.transition,ur.transition=null;var a=be;be=1;var c=xe;xe|=4,vf.current=null,cE(t,r),qb(r,t),LN(kh),dc=!!Ih,kh=Ih=null,t.current=r,uE(r),qj(),xe=c,be=a,ur.transition=o}else t.current=r;if(Sl&&(Sl=!1,Ln=t,Tc=i),o=t.pendingLanes,o===0&&(Hn=null),Bj(r.stateNode),Bt(t,qe()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Sc)throw Sc=!1,t=Qh,Qh=null,t;return Tc&1&&t.tag!==0&&Ni(),o=t.pendingLanes,o&1?t===Yh?Ho++:(Ho=0,Yh=t):Ho=0,ss(),null}function Ni(){if(Ln!==null){var t=Sv(Tc),e=ur.transition,r=be;try{if(ur.transition=null,be=16>t?16:t,Ln===null)var n=!1;else{if(t=Ln,Ln=null,Tc=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,Y=t.current;Y!==null;){var o=Y,a=o.child;if(Y.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Y=d;Y!==null;){var m=Y;switch(m.tag){case 0:case 11:case 15:zo(8,m,o)}var f=m.child;if(f!==null)f.return=m,Y=f;else for(;Y!==null;){m=Y;var g=m.sibling,j=m.return;if(Vb(m),m===d){Y=null;break}if(g!==null){g.return=j,Y=g;break}Y=j}}}var C=o.alternate;if(C!==null){var P=C.child;if(P!==null){C.child=null;do{var R=P.sibling;P.sibling=null,P=R}while(P!==null)}}Y=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Y=a;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:zo(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Y=_;break e}Y=o.return}}var w=t.current;for(Y=w;Y!==null;){a=Y;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,Y=T;else e:for(a=w;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:au(9,c)}}catch(L){Ve(c,c.return,L)}if(c===a){Y=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,Y=D;break e}Y=c.return}}if(xe=i,ss(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(Zc,t)}catch{}n=!0}return n}finally{be=r,ur.transition=e}}return!1}function $0(t,e,r){e=Mi(r,e),e=Sb(t,e,1),t=Bn(t,e,1),e=Pt(),t!==null&&(Ra(t,1,e),Bt(t,e))}function Ve(t,e,r){if(t.tag===3)$0(t,t,r);else for(;e!==null;){if(e.tag===3){$0(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Hn===null||!Hn.has(n))){t=Mi(r,t),t=Tb(e,t,1),e=Bn(e,t,1),t=Pt(),e!==null&&(Ra(e,1,t),Bt(e,t));break}}e=e.return}}function gE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&r,et===t&&(ot&r)===r&&(Qe===4||Qe===3&&(ot&130023424)===ot&&500>qe()-wf?js(t,0):bf|=r),Bt(t,e)}function $b(t,e){e===0&&(t.mode&1?(e=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):e=1);var r=Pt();t=hn(t,e),t!==null&&(Ra(t,e,r),Bt(t,r))}function xE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),$b(t,r)}function yE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),$b(t,r)}var Kb;Kb=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)qt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qt=!1,iE(t,e,r);qt=!!(t.flags&131072)}else qt=!1,Ce&&e.flags&1048576&&Xv(e,yc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Hl(t,e),t=e.pendingProps;var i=Pi(e,Et.current);ji(e,r),i=ff(null,e,n,t,i,r);var o=pf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zt(n)?(o=!0,gc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cf(e),i.updater=ou,e.stateNode=i,i._reactInternals=e,Oh(e,n,t,r),e=Uh(null,e,n,!0,o,r)):(e.tag=0,Ce&&o&&tf(e),At(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Hl(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=bE(n),t=vr(n,t),i){case 0:e=qh(null,e,n,t,r);break e;case 1:e=V0(null,e,n,t,r);break e;case 11:e=L0(null,e,n,t,r);break e;case 14:e=M0(null,e,n,vr(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),qh(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),V0(t,e,n,i,r);case 3:e:{if(Ab(e),t===null)throw Error(H(387));n=e.pendingProps,o=e.memoizedState,i=o.element,sb(t,e),wc(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Mi(Error(H(423)),e),e=O0(t,e,n,r,i);break e}else if(n!==i){i=Mi(Error(H(424)),e),e=O0(t,e,n,r,i);break e}else for(Yt=zn(e.stateNode.containerInfo.firstChild),Xt=e,Ce=!0,wr=null,r=rb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ri(),n===i){e=mn(t,e,r);break e}At(t,e,n,r)}e=e.child}return e;case 5:return ib(e),t===null&&Lh(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Ch(n,i)?a=null:o!==null&&Ch(n,o)&&(e.flags|=32),Cb(t,e),At(t,e,a,r),e.child;case 6:return t===null&&Lh(e),null;case 13:return Pb(t,e,r);case 4:return uf(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Di(e,null,n,r):At(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),L0(t,e,n,i,r);case 7:return At(t,e,e.pendingProps,r),e.child;case 8:return At(t,e,e.pendingProps.children,r),e.child;case 12:return At(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,je(vc,n._currentValue),n._currentValue=a,o!==null)if(Tr(o.value,a)){if(o.children===i.children&&!Ut.current){e=mn(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===n){if(o.tag===1){u=on(-1,r&-r),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),Mh(o.return,r,e),c.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Mh(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}At(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ji(e,r),i=mr(i),n=n(i),e.flags|=1,At(t,e,n,r),e.child;case 14:return n=e.type,i=vr(n,e.pendingProps),i=vr(n.type,i),M0(t,e,n,i,r);case 15:return Ib(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:vr(n,i),Hl(t,e),e.tag=1,zt(n)?(t=!0,gc(e)):t=!1,ji(e,r),Eb(e,n,i),Oh(e,n,i,r),Uh(null,e,n,!0,t,r);case 19:return Rb(t,e,r);case 22:return kb(t,e,r)}throw Error(H(156,e.tag))};function Qb(t,e){return _v(t,e)}function vE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(t,e,r,n){return new vE(t,e,r,n)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bE(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Bm)return 11;if(t===Hm)return 14}return 2}function Gn(t,e){var r=t.alternate;return r===null?(r=lr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function $l(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")Ef(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ai:return Ns(r.children,i,o,e);case zm:a=8,i|=8;break;case lh:return t=lr(12,r,e,i|2),t.elementType=lh,t.lanes=o,t;case ch:return t=lr(13,r,e,i),t.elementType=ch,t.lanes=o,t;case uh:return t=lr(19,r,e,i),t.elementType=uh,t.lanes=o,t;case iv:return cu(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nv:a=10;break e;case sv:a=9;break e;case Bm:a=11;break e;case Hm:a=14;break e;case Tn:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=lr(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function Ns(t,e,r,n){return t=lr(7,t,n,e),t.lanes=r,t}function cu(t,e,r,n){return t=lr(22,t,n,e),t.elementType=iv,t.lanes=r,t.stateNode={isHidden:!1},t}function Id(t,e,r){return t=lr(6,t,null,e),t.lanes=r,t}function kd(t,e,r){return e=lr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wE(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sf(t,e,r,n,i,o,a,c,u){return t=new wE(t,e,r,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=lr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(o),t}function _E(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Yb(t){if(!t)return Xn;t=t._reactInternals;e:{if(Bs(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(zt(r))return Yv(t,r,e)}return e}function Jb(t,e,r,n,i,o,a,c,u){return t=Sf(r,n,!0,t,i,o,a,c,u),t.context=Yb(null),r=t.current,n=Pt(),i=Wn(r),o=on(n,i),o.callback=e??null,Bn(r,o,i),t.current.lanes=i,Ra(t,i,n),Bt(t,n),t}function uu(t,e,r,n){var i=e.current,o=Pt(),a=Wn(i);return r=Yb(r),e.context===null?e.context=r:e.pendingContext=r,e=on(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bn(i,e,a),t!==null&&(Er(t,i,a,o),Ul(t,i,a)),a}function kc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function K0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Tf(t,e){K0(t,e),(t=t.alternate)&&K0(t,e)}function jE(){return null}var Xb=typeof reportError=="function"?reportError:function(t){console.error(t)};function If(t){this._internalRoot=t}du.prototype.render=If.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));uu(t,e,null,null)};du.prototype.unmount=If.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ps(function(){uu(null,t,null,null)}),e[dn]=null}};function du(t){this._internalRoot=t}du.prototype.unstable_scheduleHydration=function(t){if(t){var e=kv();t={blockedOn:null,target:t,priority:e};for(var r=0;r<kn.length&&e!==0&&e<kn[r].priority;r++);kn.splice(r,0,t),r===0&&Av(t)}};function kf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q0(){}function NE(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var d=kc(a);o.call(d)}}var a=Jb(e,n,t,0,null,!1,!1,"",Q0);return t._reactRootContainer=a,t[dn]=a.current,ia(t.nodeType===8?t.parentNode:t),Ps(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var d=kc(u);c.call(d)}}var u=Sf(t,0,!1,null,null,!1,!1,"",Q0);return t._reactRootContainer=u,t[dn]=u.current,ia(t.nodeType===8?t.parentNode:t),Ps(function(){uu(e,u,r,n)}),u}function mu(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var c=i;i=function(){var u=kc(a);c.call(u)}}uu(e,a,t,i)}else a=NE(r,e,t,i,n);return kc(a)}Tv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Io(e.pendingLanes);r!==0&&($m(e,r|1),Bt(e,qe()),!(xe&6)&&(Vi=qe()+500,ss()))}break;case 13:Ps(function(){var n=hn(t,1);if(n!==null){var i=Pt();Er(n,t,1,i)}}),Tf(t,1)}};Km=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var r=Pt();Er(e,t,134217728,r)}Tf(t,134217728)}};Iv=function(t){if(t.tag===13){var e=Wn(t),r=hn(t,e);if(r!==null){var n=Pt();Er(r,t,e,n)}Tf(t,e)}};kv=function(){return be};Cv=function(t,e){var r=be;try{return be=t,e()}finally{be=r}};bh=function(t,e,r){switch(e){case"input":if(mh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=nu(n);if(!i)throw Error(H(90));av(n),mh(n,i)}}}break;case"textarea":cv(t,r);break;case"select":e=r.value,e!=null&&vi(t,!!r.multiple,e,!1)}};gv=_f;xv=Ps;var EE={usingClientEntryPoint:!1,Events:[La,di,nu,fv,pv,_f]},No={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SE={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bv(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||jE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Zc=Tl.inject(SE),Vr=Tl}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EE;tr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kf(e))throw Error(H(200));return _E(t,e,null,r)};tr.createRoot=function(t,e){if(!kf(t))throw Error(H(299));var r=!1,n="",i=Xb;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sf(t,1,!1,null,null,r,!1,n,i),t[dn]=e.current,ia(t.nodeType===8?t.parentNode:t),new If(e)};tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=bv(e),t=t===null?null:t.stateNode,t};tr.flushSync=function(t){return Ps(t)};tr.hydrate=function(t,e,r){if(!hu(e))throw Error(H(200));return mu(null,t,e,!0,r)};tr.hydrateRoot=function(t,e,r){if(!kf(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=Xb;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Jb(e,null,t,1,r??null,i,!1,o,a),t[dn]=e.current,ia(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new du(e)};tr.render=function(t,e,r){if(!hu(e))throw Error(H(200));return mu(null,t,e,!1,r)};tr.unmountComponentAtNode=function(t){if(!hu(t))throw Error(H(40));return t._reactRootContainer?(Ps(function(){mu(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};tr.unstable_batchedUpdates=_f;tr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!hu(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return mu(t,e,r,!1,n)};tr.version="18.3.1-next-f1338f8080-20240426";function Zb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zb)}catch(t){console.error(t)}}Zb(),Zy.exports=tr;var TE=Zy.exports,Y0=TE;oh.createRoot=Y0.createRoot,oh.hydrateRoot=Y0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fa(){return fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fa.apply(this,arguments)}var Mn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mn||(Mn={}));const J0="popstate";function IE(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:a,hash:c}=n.location;return Zh("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Cc(i)}return CE(e,r,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ew(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kE(){return Math.random().toString(36).substr(2,8)}function X0(t,e){return{usr:t.state,key:t.key,idx:e}}function Zh(t,e,r,n){return r===void 0&&(r=null),fa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:r,key:e&&e.key||n||kE()})}function Cc(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ki(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function CE(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,c=Mn.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(fa({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function f(){c=Mn.Pop;let R=m(),_=R==null?null:R-d;d=R,u&&u({action:c,location:P.location,delta:_})}function g(R,_){c=Mn.Push;let w=Zh(P.location,R,_);d=m()+1;let T=X0(w,d),D=P.createHref(w);try{a.pushState(T,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(D)}o&&u&&u({action:c,location:P.location,delta:1})}function j(R,_){c=Mn.Replace;let w=Zh(P.location,R,_);d=m();let T=X0(w,d),D=P.createHref(w);a.replaceState(T,"",D),o&&u&&u({action:c,location:P.location,delta:0})}function C(R){let _=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:Cc(R);return w=w.replace(/ $/,"%20"),Ue(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let P={get action(){return c},get location(){return t(i,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(J0,f),u=R,()=>{i.removeEventListener(J0,f),u=null}},createHref(R){return e(i,R)},createURL:C,encodeLocation(R){let _=C(R);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:g,replace:j,go(R){return a.go(R)}};return P}var Z0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z0||(Z0={}));function AE(t,e,r){return r===void 0&&(r="/"),PE(t,e,r,!1)}function PE(t,e,r,n){let i=typeof e=="string"?Ki(e):e,o=Cf(i.pathname||"/",r);if(o==null)return null;let a=tw(t);RE(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=HE(o);c=zE(a[u],d,n)}return c}function tw(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ue(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=$n([n,u.relativePath]),m=r.concat(u);o.children&&o.children.length>0&&(Ue(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tw(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:qE(d,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let u of rw(o.path))i(o,a,u)}),e}function rw(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=rw(n.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function RE(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:UE(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const DE=/^:[\w-]+$/,LE=3,ME=2,VE=1,OE=10,FE=-2,ex=t=>t==="*";function qE(t,e){let r=t.split("/"),n=r.length;return r.some(ex)&&(n+=FE),e&&(n+=ME),r.filter(i=>!ex(i)).reduce((i,o)=>i+(DE.test(o)?LE:o===""?VE:OE),n)}function UE(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function zE(t,e,r){let{routesMeta:n}=t,i={},o="/",a=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,m=o==="/"?e:e.slice(o.length)||"/",f=tx({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=tx({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:$n([o,f.pathname]),pathnameBase:KE($n([o,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(o=$n([o,f.pathnameBase]))}return a}function tx(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=BE(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((d,m,f)=>{let{paramName:g,isOptional:j}=m;if(g==="*"){let P=c[f]||"";a=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const C=c[f];return j&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function BE(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),ew(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function HE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ew(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function WE(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Ki(t):t;return{pathname:r?r.startsWith("/")?r:GE(r,e):e,search:QE(n),hash:YE(i)}}function GE(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Cd(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $E(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Af(t,e){let r=$E(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Pf(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Ki(t):(i=fa({},t),Ue(!i.pathname||!i.pathname.includes("?"),Cd("?","pathname","search",i)),Ue(!i.pathname||!i.pathname.includes("#"),Cd("#","pathname","hash",i)),Ue(!i.search||!i.search.includes("#"),Cd("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}c=f>=0?e[f]:"/"}let u=WE(i,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const $n=t=>t.join("/").replace(/\/\/+/g,"/"),KE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const nw=["post","put","patch","delete"];new Set(nw);const XE=["get",...nw];new Set(XE);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pa.apply(this,arguments)}const Rf=k.createContext(null),ZE=k.createContext(null),is=k.createContext(null),fu=k.createContext(null),vn=k.createContext({outlet:null,matches:[],isDataRoute:!1}),sw=k.createContext(null);function eS(t,e){let{relative:r}=e===void 0?{}:e;Qi()||Ue(!1);let{basename:n,navigator:i}=k.useContext(is),{hash:o,pathname:a,search:c}=ow(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:$n([n,a])),i.createHref({pathname:u,search:c,hash:o})}function Qi(){return k.useContext(fu)!=null}function Hs(){return Qi()||Ue(!1),k.useContext(fu).location}function iw(t){k.useContext(is).static||k.useLayoutEffect(t)}function gr(){let{isDataRoute:t}=k.useContext(vn);return t?fS():tS()}function tS(){Qi()||Ue(!1);let t=k.useContext(Rf),{basename:e,future:r,navigator:n}=k.useContext(is),{matches:i}=k.useContext(vn),{pathname:o}=Hs(),a=JSON.stringify(Af(i,r.v7_relativeSplatPath)),c=k.useRef(!1);return iw(()=>{c.current=!0}),k.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let f=Pf(d,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:$n([e,f.pathname])),(m.replace?n.replace:n.push)(f,m.state,m)},[e,n,a,o,t])}function rS(){let{matches:t}=k.useContext(vn),e=t[t.length-1];return e?e.params:{}}function ow(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=k.useContext(is),{matches:i}=k.useContext(vn),{pathname:o}=Hs(),a=JSON.stringify(Af(i,n.v7_relativeSplatPath));return k.useMemo(()=>Pf(t,JSON.parse(a),o,r==="path"),[t,a,o,r])}function nS(t,e){return sS(t,e)}function sS(t,e,r,n){Qi()||Ue(!1);let{navigator:i,static:o}=k.useContext(is),{matches:a}=k.useContext(vn),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let m=Hs(),f;if(e){var g;let _=typeof e=="string"?Ki(e):e;d==="/"||(g=_.pathname)!=null&&g.startsWith(d)||Ue(!1),f=_}else f=m;let j=f.pathname||"/",C=j;if(d!=="/"){let _=d.replace(/^\//,"").split("/");C="/"+j.replace(/^\//,"").split("/").slice(_.length).join("/")}let P=!o&&r&&r.matches&&r.matches.length>0?r.matches:AE(t,{pathname:C}),R=cS(P&&P.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:$n([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:$n([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,n);return e&&R?k.createElement(fu.Provider,{value:{location:pa({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Mn.Pop}},R):R}function iS(){let t=mS(),e=JE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),r?k.createElement("pre",{style:i},r):null,null)}const oS=k.createElement(iS,null);class aS extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?k.createElement(vn.Provider,{value:this.props.routeContext},k.createElement(sw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lS(t){let{routeContext:e,match:r,children:n}=t,i=k.useContext(Rf);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),k.createElement(vn.Provider,{value:e},n)}function cS(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,c=(i=r)==null?void 0:i.errors;if(c!=null){let m=a.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);m>=0||Ue(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:g,errors:j}=r,C=f.route.loader&&g[f.route.id]===void 0&&(!j||j[f.route.id]===void 0);if(f.route.lazy||C){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,g)=>{let j,C=!1,P=null,R=null;r&&(j=c&&f.route.id?c[f.route.id]:void 0,P=f.route.errorElement||oS,u&&(d<0&&g===0?(C=!0,R=null):d===g&&(C=!0,R=f.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,g+1)),w=()=>{let T;return j?T=P:C?T=R:f.route.Component?T=k.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=m,k.createElement(lS,{match:f,routeContext:{outlet:m,matches:_,isDataRoute:r!=null},children:T})};return r&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?k.createElement(aS,{location:r.location,revalidation:r.revalidation,component:P,error:j,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var aw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aw||{}),Ac=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ac||{});function uS(t){let e=k.useContext(Rf);return e||Ue(!1),e}function dS(t){let e=k.useContext(ZE);return e||Ue(!1),e}function hS(t){let e=k.useContext(vn);return e||Ue(!1),e}function lw(t){let e=hS(),r=e.matches[e.matches.length-1];return r.route.id||Ue(!1),r.route.id}function mS(){var t;let e=k.useContext(sw),r=dS(Ac.UseRouteError),n=lw(Ac.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function fS(){let{router:t}=uS(aw.UseNavigateStable),e=lw(Ac.UseNavigateStable),r=k.useRef(!1);return iw(()=>{r.current=!0}),k.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pa({fromRouteId:e},o)))},[t,e])}function pS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function em(t){let{to:e,replace:r,state:n,relative:i}=t;Qi()||Ue(!1);let{future:o,static:a}=k.useContext(is),{matches:c}=k.useContext(vn),{pathname:u}=Hs(),d=gr(),m=Pf(e,Af(c,o.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(m);return k.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:i}),[d,f,i,r,n]),null}function ke(t){Ue(!1)}function gS(t){let{basename:e="/",children:r=null,location:n,navigationType:i=Mn.Pop,navigator:o,static:a=!1,future:c}=t;Qi()&&Ue(!1);let u=e.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:u,navigator:o,static:a,future:pa({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof n=="string"&&(n=Ki(n));let{pathname:m="/",search:f="",hash:g="",state:j=null,key:C="default"}=n,P=k.useMemo(()=>{let R=Cf(m,u);return R==null?null:{location:{pathname:R,search:f,hash:g,state:j,key:C},navigationType:i}},[u,m,f,g,j,C,i]);return P==null?null:k.createElement(is.Provider,{value:d},k.createElement(fu.Provider,{children:r,value:P}))}function xS(t){let{children:e,location:r}=t;return nS(tm(e),r)}new Promise(()=>{});function tm(t,e){e===void 0&&(e=[]);let r=[];return k.Children.forEach(t,(n,i)=>{if(!k.isValidElement(n))return;let o=[...e,i];if(n.type===k.Fragment){r.push.apply(r,tm(n.props.children,o));return}n.type!==ke&&Ue(!1),!n.props.index||!n.props.children||Ue(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=tm(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rm(){return rm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},rm.apply(this,arguments)}function yS(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function vS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bS(t,e){return t.button===0&&(!e||e==="_self")&&!vS(t)}function nm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function wS(t,e){let r=nm(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(o=>{r.append(i,o)})}),r}const _S=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jS="6";try{window.__reactRouterVersion=jS}catch{}const NS="startTransition",rx=gj[NS];function ES(t){let{basename:e,children:r,future:n,window:i}=t,o=k.useRef();o.current==null&&(o.current=IE({window:i,v5Compat:!0}));let a=o.current,[c,u]=k.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},m=k.useCallback(f=>{d&&rx?rx(()=>u(f)):u(f)},[u,d]);return k.useLayoutEffect(()=>a.listen(m),[a,m]),k.useEffect(()=>pS(n),[n]),k.createElement(gS,{basename:e,children:r,location:c.location,navigationType:c.action,navigator:a,future:n})}const SS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q=k.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:f}=e,g=yS(e,_S),{basename:j}=k.useContext(is),C,P=!1;if(typeof d=="string"&&TS.test(d)&&(C=d,SS))try{let T=new URL(window.location.href),D=d.startsWith("//")?new URL(T.protocol+d):new URL(d),L=Cf(D.pathname,j);D.origin===T.origin&&L!=null?d=L+D.search+D.hash:P=!0}catch{}let R=eS(d,{relative:i}),_=IS(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:f});function w(T){n&&n(T),T.defaultPrevented||_(T)}return k.createElement("a",rm({},g,{href:C||R,onClick:P||o?n:w,ref:r,target:u}))});var nx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(nx||(nx={}));var sx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(sx||(sx={}));function IS(t,e){let{target:r,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=gr(),d=Hs(),m=ow(t,{relative:a});return k.useCallback(f=>{if(bS(f,r)){f.preventDefault();let g=n!==void 0?n:Cc(d)===Cc(m);u(t,{replace:g,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,m,n,i,r,t,o,a,c])}function cw(t){let e=k.useRef(nm(t)),r=k.useRef(!1),n=Hs(),i=k.useMemo(()=>wS(n.search,r.current?null:e.current),[n.search]),o=gr(),a=k.useCallback((c,u)=>{const d=nm(typeof c=="function"?c(i):c);r.current=!0,o("?"+d,u)},[o,i]);return[i,a]}var ix={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},kS=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[r++];e[n++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[r++],a=t[r++],c=t[r++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],a=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,m=o>>2,f=(o&3)<<4|c>>4;let g=(c&15)<<2|d>>6,j=d&63;u||(j=64,a||(g=64)),n.push(r[m],r[f],r[g],r[j])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const o=r[t.charAt(i++)],c=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const f=i<t.length?r[t.charAt(i)]:64;if(++i,o==null||c==null||d==null||f==null)throw new CS;const g=o<<2|c>>4;if(n.push(g),d!==64){const j=c<<4&240|d>>2;if(n.push(j),f!==64){const C=d<<6&192|f;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AS=function(t){const e=uw(t);return dw.encodeByteArray(e,!0)},Pc=function(t){return AS(t).replace(/\./g,"")},hw=function(t){try{return dw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=()=>PS().__FIREBASE_DEFAULTS__,DS=()=>{if(typeof process>"u"||typeof ix>"u")return;const t=ix.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hw(t[1]);return e&&JSON.parse(e)},pu=()=>{try{return RS()||DS()||LS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mw=t=>{var e,r;return(r=(e=pu())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},MS=t=>{const e=mw(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},fw=()=>{var t;return(t=pu())===null||t===void 0?void 0:t.config},pw=t=>{var e;return(e=pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Pc(JSON.stringify(r)),Pc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(St())}function qS(){var t;const e=(t=pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Df(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function US(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zS(){const t=St();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BS(){return!qS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lf(){try{return typeof indexedDB=="object"}catch{return!1}}function Mf(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}function gw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS="FirebaseError";class Ar extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=HS,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ws.prototype.create)}}class Ws{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?WS(o,n):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ar(i,c,n)}}function WS(t,e){return t.replace(GS,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const GS=/\{\$([^}]+)}/g;function $S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ga(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const o=t[i],a=e[i];if(ox(o)&&ox(a)){if(!ga(o,a))return!1}else if(o!==a)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function ox(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Co(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,o]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ao(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function KS(t,e){const r=new QS(t,e);return r.subscribe.bind(r)}class QS{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");YS(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Ad),i.error===void 0&&(i.error=Ad),i.complete===void 0&&(i.complete=Ad);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YS(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Ad(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=1e3,XS=2,ZS=4*60*60*1e3,eT=.5;function ax(t,e=JS,r=XS){const n=e*Math.pow(r,t),i=Math.round(eT*n*(Math.random()-.5)*2);return Math.min(ZS,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t){return t&&t._delegate?t._delegate:t}class Ir{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new VS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nT(e))try{this.getOrInitializeService({instanceIdentifier:ps})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:i});n.resolve(o)}catch{}}}}clearInstance(e=ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ps){return this.instances.has(e)}getOptions(e=ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);n===c&&a.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),o=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:rT(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ps){return this.component?this.component.multipleInstances?e:ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rT(t){return t===ps?void 0:t}function nT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new tT(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const iT={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},oT=pe.INFO,aT={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},lT=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=aT[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gu{constructor(e){this.name=e,this._logLevel=oT,this._logHandler=lT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const cT=(t,e)=>e.some(r=>t instanceof r);let lx,cx;function uT(){return lx||(lx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return cx||(cx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xw=new WeakMap,sm=new WeakMap,yw=new WeakMap,Pd=new WeakMap,Vf=new WeakMap;function hT(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(Kn(t.result)),i()},a=()=>{n(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&xw.set(r,t)}).catch(()=>{}),Vf.set(e,t),e}function mT(t){if(sm.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),i()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});sm.set(t,e)}let im={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yw.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Kn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fT(t){im=t(im)}function pT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Rd(this),e,...r);return yw.set(n,e.sort?e.sort():[e]),Kn(n)}:dT().includes(t)?function(...e){return t.apply(Rd(this),e),Kn(xw.get(this))}:function(...e){return Kn(t.apply(Rd(this),e))}}function gT(t){return typeof t=="function"?pT(t):(t instanceof IDBTransaction&&mT(t),cT(t,uT())?new Proxy(t,im):t)}function Kn(t){if(t instanceof IDBRequest)return hT(t);if(Pd.has(t))return Pd.get(t);const e=gT(t);return e!==t&&(Pd.set(t,e),Vf.set(e,t)),e}const Rd=t=>Vf.get(t);function vw(t,e,{blocked:r,upgrade:n,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),c=Kn(a);return n&&a.addEventListener("upgradeneeded",u=>{n(Kn(a.result),u.oldVersion,u.newVersion,Kn(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const xT=["get","getKey","getAll","getAllKeys","count"],yT=["put","add","delete","clear"],Dd=new Map;function ux(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dd.get(e))return Dd.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=yT.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||xT.includes(r)))return;const o=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(c.shift())),(await Promise.all([d[r](...c),i&&u.done]))[0]};return Dd.set(e,o),o}fT(t=>({...t,get:(e,r,n)=>ux(e,r)||t.get(e,r,n),has:(e,r)=>!!ux(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bT(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function bT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",dx="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn=new gu("@firebase/app"),wT="@firebase/app-compat",_T="@firebase/analytics-compat",jT="@firebase/analytics",NT="@firebase/app-check-compat",ET="@firebase/app-check",ST="@firebase/auth",TT="@firebase/auth-compat",IT="@firebase/database",kT="@firebase/database-compat",CT="@firebase/functions",AT="@firebase/functions-compat",PT="@firebase/installations",RT="@firebase/installations-compat",DT="@firebase/messaging",LT="@firebase/messaging-compat",MT="@firebase/performance",VT="@firebase/performance-compat",OT="@firebase/remote-config",FT="@firebase/remote-config-compat",qT="@firebase/storage",UT="@firebase/storage-compat",zT="@firebase/firestore",BT="@firebase/vertexai-preview",HT="@firebase/firestore-compat",WT="firebase",GT="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am="[DEFAULT]",$T={[om]:"fire-core",[wT]:"fire-core-compat",[jT]:"fire-analytics",[_T]:"fire-analytics-compat",[ET]:"fire-app-check",[NT]:"fire-app-check-compat",[ST]:"fire-auth",[TT]:"fire-auth-compat",[IT]:"fire-rtdb",[kT]:"fire-rtdb-compat",[CT]:"fire-fn",[AT]:"fire-fn-compat",[PT]:"fire-iid",[RT]:"fire-iid-compat",[DT]:"fire-fcm",[LT]:"fire-fcm-compat",[MT]:"fire-perf",[VT]:"fire-perf-compat",[OT]:"fire-rc",[FT]:"fire-rc-compat",[qT]:"fire-gcs",[UT]:"fire-gcs-compat",[zT]:"fire-fst",[HT]:"fire-fst-compat",[BT]:"fire-vertex","fire-js":"fire-js",[WT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new Map,KT=new Map,lm=new Map;function hx(t,e){try{t.container.addComponent(e)}catch(r){fn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function zr(t){const e=t.name;if(lm.has(e))return fn.debug(`There were multiple attempts to register component ${e}.`),!1;lm.set(e,t);for(const r of Rc.values())hx(r,t);for(const r of KT.values())hx(r,t);return!0}function Gs(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new Ws("app","Firebase",QT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=GT;function bw(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:am,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(r||(r=fw()),!r)throw Qn.create("no-options");const o=Rc.get(i);if(o){if(ga(r,o.options)&&ga(n,o.config))return o;throw Qn.create("duplicate-app",{appName:i})}const a=new sT(i);for(const u of lm.values())a.addComponent(u);const c=new YT(r,n,a);return Rc.set(i,c),c}function Of(t=am){const e=Rc.get(t);if(!e&&t===am&&fw())return bw();if(!e)throw Qn.create("no-app",{appName:t});return e}function dr(t,e,r){var n;let i=(n=$T[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fn.warn(c.join(" "));return}zr(new Ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="firebase-heartbeat-database",XT=1,xa="firebase-heartbeat-store";let Ld=null;function ww(){return Ld||(Ld=vw(JT,XT,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xa)}catch(r){console.warn(r)}}}}).catch(t=>{throw Qn.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function ZT(t){try{const r=(await ww()).transaction(xa),n=await r.objectStore(xa).get(_w(t));return await r.done,n}catch(e){if(e instanceof Ar)fn.warn(e.message);else{const r=Qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fn.warn(r.message)}}}async function mx(t,e){try{const n=(await ww()).transaction(xa,"readwrite");await n.objectStore(xa).put(e,_w(t)),await n.done}catch(r){if(r instanceof Ar)fn.warn(r.message);else{const n=Qn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});fn.warn(n.message)}}}function _w(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=1024,tI=30*24*60*60*1e3;class rI{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new sI(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=fx();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=tI}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fn.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=fx(),{heartbeatsToSend:n,unsentEntries:i}=nI(this._heartbeatsCache.heartbeats),o=Pc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return fn.warn(r),""}}}function fx(){return new Date().toISOString().substring(0,10)}function nI(t,e=eI){const r=[];let n=t.slice();for(const i of t){const o=r.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),px(r)>e){o.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),px(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class sI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lf()?Mf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await ZT(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return mx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return mx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function px(t){return Pc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t){zr(new Ir("platform-logger",e=>new vT(e),"PRIVATE")),zr(new Ir("heartbeat",e=>new rI(e),"PRIVATE")),dr(om,dx,t),dr(om,dx,"esm2017"),dr("fire-js","")}iI("");function Ff(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function jw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oI=jw,Nw=new Ws("auth","Firebase",jw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new gu("@firebase/auth");function aI(t,...e){Dc.logLevel<=pe.WARN&&Dc.warn(`Auth (${Yi}): ${t}`,...e)}function Kl(t,...e){Dc.logLevel<=pe.ERROR&&Dc.error(`Auth (${Yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(t,...e){throw Uf(t,...e)}function Sr(t,...e){return Uf(t,...e)}function qf(t,e,r){const n=Object.assign(Object.assign({},oI()),{[e]:r});return new Ws("auth","Firebase",n).create(e,{appName:t.name})}function an(t){return qf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lI(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&pr(t,"argument-error"),qf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Uf(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return Nw.create(t,...e)}function ne(t,e,...r){if(!t)throw Uf(e,...r)}function rn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kl(e),new Error(e)}function pn(t,e){t||rn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function cI(){return gx()==="http:"||gx()==="https:"}function gx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(cI()||Df()||"connection"in navigator)?navigator.onLine:!0}function dI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,r){this.shortDelay=e,this.longDelay=r,pn(r>e,"Short delay should be less than long delay!"),this.isMobile=FS()||US()}get(){return uI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e){pn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Oa(3e4,6e4);function bn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Pr(t,e,r,n,i={}){return Sw(t,i,async()=>{let o={},a={};n&&(e==="GET"?a=n:o={body:JSON.stringify(n)});const c=Va(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Ew.fetch()(Tw(t,t.config.apiHost,r,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))})}async function Sw(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},hI),e);try{const i=new pI(t),o=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Il(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Il(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Il(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Il(t,"user-disabled",a);const m=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw qf(t,m,d);pr(t,m)}}catch(i){if(i instanceof Ar)throw i;pr(t,"network-request-failed",{message:String(i)})}}async function Fa(t,e,r,n,i={}){const o=await Pr(t,e,r,n,i);return"mfaPendingCredential"in o&&pr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Tw(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?zf(t.config,i):`${t.config.apiScheme}://${i}`}function fI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Sr(this.auth,"network-request-failed")),mI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Il(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=Sr(t,e,n);return i.customData._tokenResponse=r,i}function xx(t){return t!==void 0&&t.enterprise!==void 0}class gI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return fI(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xI(t,e){return Pr(t,"GET","/v2/recaptchaConfig",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e){return Pr(t,"POST","/v1/accounts:delete",e)}async function Iw(t,e){return Pr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vI(t,e=!1){const r=Ae(t),n=await r.getIdToken(e),i=Bf(n);ne(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:n,authTime:Wo(Md(i.auth_time)),issuedAtTime:Wo(Md(i.iat)),expirationTime:Wo(Md(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Md(t){return Number(t)*1e3}function Bf(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Kl("JWT malformed, contained fewer than 3 sections"),null;try{const i=hw(r);return i?JSON.parse(i):(Kl("Failed to decode base64 JWT payload"),null)}catch(i){return Kl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yx(t){const e=Bf(t);return ne(e,"internal-error"),ne(typeof e.exp<"u","internal-error"),ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rs(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Ar&&bI(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function bI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t){var e;const r=t.auth,n=await t.getIdToken(),i=await Rs(t,Iw(r,{idToken:n}));ne(i==null?void 0:i.users.length,r,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kw(o.providerUserInfo):[],c=jI(t.providerData,a),u=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new um(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,f)}async function _I(t){const e=Ae(t);await Lc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jI(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function kw(t){return t.map(e=>{var{providerId:r}=e,n=Ff(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(t,e){const r=await Sw(t,{},async()=>{const n=Va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=Tw(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Ew.fetch()(a,{method:"POST",headers:c,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function EI(t,e){return Pr(t,"POST","/v2/accounts:revokeToken",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ne(e.idToken,"internal-error"),ne(typeof e.idToken<"u","internal-error"),ne(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ne(e.length!==0,"internal-error");const r=yx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:o}=await NI(e,r);this.updateTokensAndExpiration(n,i,Number(o))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:o}=r,a=new Ei;return n&&(ne(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(ne(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ne(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ei,this.toJSON())}_performRefresh(){return rn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,e){ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nn{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,o=Ff(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await Rs(this,this.stsTokenManager.getToken(this.auth,e));return ne(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return vI(this,e)}reload(){return _I(this)}_assign(e){this!==e&&(ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Lc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(an(this.auth));const e=await this.getIdToken();return await Rs(this,yI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,o,a,c,u,d,m;const f=(n=r.displayName)!==null&&n!==void 0?n:void 0,g=(i=r.email)!==null&&i!==void 0?i:void 0,j=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,C=(a=r.photoURL)!==null&&a!==void 0?a:void 0,P=(c=r.tenantId)!==null&&c!==void 0?c:void 0,R=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,_=(d=r.createdAt)!==null&&d!==void 0?d:void 0,w=(m=r.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:T,emailVerified:D,isAnonymous:L,providerData:V,stsTokenManager:E}=r;ne(T&&E,e,"internal-error");const x=Ei.fromJSON(this.name,E);ne(typeof T=="string",e,"internal-error"),Sn(f,e.name),Sn(g,e.name),ne(typeof D=="boolean",e,"internal-error"),ne(typeof L=="boolean",e,"internal-error"),Sn(j,e.name),Sn(C,e.name),Sn(P,e.name),Sn(R,e.name),Sn(_,e.name),Sn(w,e.name);const y=new nn({uid:T,auth:e,email:g,emailVerified:D,displayName:f,isAnonymous:L,photoURL:C,phoneNumber:j,tenantId:P,stsTokenManager:x,createdAt:_,lastLoginAt:w});return V&&Array.isArray(V)&&(y.providerData=V.map(v=>Object.assign({},v))),R&&(y._redirectEventId=R),y}static async _fromIdTokenResponse(e,r,n=!1){const i=new Ei;i.updateFromServerResponse(r);const o=new nn({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Lc(o),o}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ne(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?kw(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Ei;c.updateFromIdToken(n);const u=new nn({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new um(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new Map;function sn(t){pn(t instanceof Function,"Expected a class definition");let e=vx.get(t);return e?(pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,vx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Cw.type="NONE";const bx=Cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e,r){return`firebase:${t}:${e}:${r}`}class Si{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:o}=this.auth;this.fullUserKey=Ql(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ql("persistence",i.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Si(sn(bx),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||sn(bx);const a=Ql(n,e.config.apiKey,e.name);let c=null;for(const d of r)try{const m=await d._get(a);if(m){const f=nn._fromJSON(e,m);d!==o&&(c=f),o=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Si(o,e,n):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(r.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new Si(o,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mw(e))return"Blackberry";if(Vw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||Rw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Aw(t=St()){return/firefox\//i.test(t)}function Pw(t=St()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rw(t=St()){return/crios\//i.test(t)}function Dw(t=St()){return/iemobile/i.test(t)}function Lw(t=St()){return/android/i.test(t)}function Mw(t=St()){return/blackberry/i.test(t)}function Vw(t=St()){return/webos/i.test(t)}function Hf(t=St()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SI(t=St()){var e;return Hf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TI(){return zS()&&document.documentMode===10}function Ow(t=St()){return Hf(t)||Lw(t)||Vw(t)||Mw(t)||/windows phone/i.test(t)||Dw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t,e=[]){let r;switch(t){case"Browser":r=wx(St());break;case"Worker":r=`${wx(St())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Yi}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=o=>new Promise((a,c)=>{try{const u=e(o);a(u)}catch(u){c(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(t,e={}){return Pr(t,"GET","/v2/passwordPolicy",bn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI=6;class AI{constructor(e){var r,n,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:CI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,o,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _x(this),this.idTokenSubscription=new _x(this),this.beforeStateQueue=new II(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=sn(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Si.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Iw(this,{idToken:e}),n=await nn._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(jr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Lc(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(an(this));const r=e?Ae(e):null;return r&&ne(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(an(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(an(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(sn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kI(this),r=new AI(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ws("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await EI(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&sn(e)||this._popupRedirectResolver;ne(r,this,"argument-error"),this.redirectPersistenceManager=await Si.create(this,[sn(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ne(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&aI(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function wn(t){return Ae(t)}class _x{constructor(e){this.auth=e,this.observer=null,this.addObserver=KS(r=>this.observer=r)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RI(t){xu=t}function qw(t){return xu.loadJS(t)}function DI(){return xu.recaptchaEnterpriseScript}function LI(){return xu.gapiScript}function MI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VI="recaptcha-enterprise",OI="NO_RECAPTCHA";class FI{constructor(e){this.type=VI,this.auth=wn(e)}async verify(e="verify",r=!1){async function n(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{xI(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new gI(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function i(o,a,c){const u=window.grecaptcha;xx(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(OI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{n(this.auth).then(c=>{if(!r&&xx(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=DI();u.length!==0&&(u+=c),qw(u).then(()=>{i(c,o,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function jx(t,e,r,n=!1){const i=new FI(t);let o;try{o=await i.verify(r)}catch{o=await i.verify(r,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Mc(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await jx(t,e,r,r==="getOobCode");return n(t,o)}else return n(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await jx(t,e,r,r==="getOobCode");return n(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e){const r=Gs(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),o=r.getOptions();if(ga(o,e??{}))return i;pr(i,"already-initialized")}return r.initialize({options:e})}function UI(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(sn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function zI(t,e,r){const n=wn(t);ne(n._canInitEmulator,n,"emulator-config-failed"),ne(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,o=Uw(e),{host:a,port:c}=BI(e),u=c===null?"":`:${c}`;n.config.emulator={url:`${o}//${a}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),HI()}function Uw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BI(t){const e=Uw(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const o=i[1];return{host:o,port:Nx(n.substr(o.length+1))}}else{const[o,a]=n.split(":");return{host:o,port:Nx(a)}}}function Nx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function HI(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return rn("not implemented")}_getIdTokenResponse(e){return rn("not implemented")}_linkToIdToken(e,r){return rn("not implemented")}_getReauthenticationResolver(e){return rn("not implemented")}}async function WI(t,e){return Pr(t,"POST","/v1/accounts:update",e)}async function GI(t,e){return Pr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(t,e){return Fa(t,"POST","/v1/accounts:signInWithPassword",bn(t,e))}async function zw(t,e){return Pr(t,"POST","/v1/accounts:sendOobCode",bn(t,e))}async function KI(t,e){return zw(t,e)}async function QI(t,e){return zw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(t,e){return Fa(t,"POST","/v1/accounts:signInWithEmailLink",bn(t,e))}async function JI(t,e){return Fa(t,"POST","/v1/accounts:signInWithEmailLink",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends Wf{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new ya(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new ya(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mc(e,r,"signInWithPassword",$I);case"emailLink":return YI(e,{email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mc(e,n,"signUpPassword",GI);case"emailLink":return JI(e,{idToken:r,email:this._email,oobCode:this._password});default:pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ti(t,e){return Fa(t,"POST","/v1/accounts:signInWithIdp",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="http://localhost";class Ds extends Wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):pr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,o=Ff(r,["providerId","signInMethod"]);if(!n||!i)return null;const a=new Ds(n,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Ti(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ti(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ti(e,r)}buildRequest(){const e={requestUri:XI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Va(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ek(t){const e=Co(Ao(t)).link,r=e?Co(Ao(e)).deep_link_id:null,n=Co(Ao(t)).deep_link_id;return(n?Co(Ao(n)).link:null)||n||r||e||t}class Gf{constructor(e){var r,n,i,o,a,c;const u=Co(Ao(e)),d=(r=u.apiKey)!==null&&r!==void 0?r:null,m=(n=u.oobCode)!==null&&n!==void 0?n:null,f=ZI((i=u.mode)!==null&&i!==void 0?i:null);ne(d&&m&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const r=ek(e);try{return new Gf(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.providerId=$s.PROVIDER_ID}static credential(e,r){return ya._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Gf.parseLink(r);return ne(n,"argument-error"),ya._fromEmailAndCode(e,n.code,n.tenantId)}}$s.PROVIDER_ID="password";$s.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$s.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends $f{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends qa{constructor(){super("facebook.com")}static credential(e){return Ds._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return An.credential(e.oauthAccessToken)}catch{return null}}}An.FACEBOOK_SIGN_IN_METHOD="facebook.com";An.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ds._fromParams({providerId:Xr.PROVIDER_ID,signInMethod:Xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Xr.credentialFromTaggedObject(e)}static credentialFromError(e){return Xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Xr.credential(r,n)}catch{return null}}}Xr.GOOGLE_SIGN_IN_METHOD="google.com";Xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends qa{constructor(){super("github.com")}static credential(e){return Ds._fromParams({providerId:Pn.PROVIDER_ID,signInMethod:Pn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pn.credentialFromTaggedObject(e)}static credentialFromError(e){return Pn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pn.credential(e.oauthAccessToken)}catch{return null}}}Pn.GITHUB_SIGN_IN_METHOD="github.com";Pn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends qa{constructor(){super("twitter.com")}static credential(e,r){return Ds._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Rn.credential(r,n)}catch{return null}}}Rn.TWITTER_SIGN_IN_METHOD="twitter.com";Rn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e){return Fa(t,"POST","/v1/accounts:signUp",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const o=await nn._fromIdTokenResponse(e,n,i),a=Ex(n);return new Ls({user:o,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=Ex(n);return new Ls({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function Ex(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends Ar{constructor(e,r,n,i){var o;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Vc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Vc(e,r,n,i)}}function Bw(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vc._fromErrorAndOperation(t,o,e,n):o})}async function rk(t,e,r=!1){const n=await Rs(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ls._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hw(t,e,r=!1){const{auth:n}=t;if(jr(n.app))return Promise.reject(an(n));const i="reauthenticate";try{const o=await Rs(t,Bw(n,i,e,t),r);ne(o.idToken,n,"internal-error");const a=Bf(o.idToken);ne(a,n,"internal-error");const{sub:c}=a;return ne(t.uid===c,n,"user-mismatch"),Ls._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&pr(n,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(t,e,r=!1){if(jr(t.app))return Promise.reject(an(t));const n="signIn",i=await Bw(t,n,e),o=await Ls._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(o.user),o}async function nk(t,e){return Ww(wn(t),e)}async function sk(t,e){return Hw(Ae(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(t){const e=wn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dm(t,e,r){const n=wn(t);await Mc(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",QI)}async function $w(t,e,r){if(jr(t.app))return Promise.reject(an(t));const n=wn(t),a=await Mc(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tk).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Gw(t),u}),c=await Ls._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(c.user),c}function hm(t,e,r){return jr(t.app)?Promise.reject(an(t)):nk(Ae(t),$s.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Gw(t),n})}async function Sx(t,e){const r=Ae(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await KI(r.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e){return Pr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Ae(t),o={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},a=await Rs(n,ik(n.auth,o));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const c=n.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=n.displayName,c.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function ok(t,e){return ak(Ae(t),null,e)}async function ak(t,e,r){const{auth:n}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(o.password=r);const a=await Rs(t,WI(n,o));await t._updateTokensIfNecessary(a,!0)}function lk(t,e,r,n){return Ae(t).onIdTokenChanged(e,r,n)}function ck(t,e,r){return Ae(t).beforeAuthStateChanged(e,r)}function uk(t,e,r,n){return Ae(t).onAuthStateChanged(e,r,n)}function dk(t){return Ae(t).signOut()}const Oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Oc,"1"),this.storage.removeItem(Oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1e3,mk=10;class Yw extends Qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},o=this.storage.getItem(n);TI()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mk):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yw.type="LOCAL";const fk=Yw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Jw.type="SESSION";const Xw=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new yu(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:o}=r.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const c=Array.from(a).map(async d=>d(r.origin,o)),u=await pk(c);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const d=Kf("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function xk(t){Fr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function yk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function bk(){return Zw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="firebaseLocalStorageDb",wk=1,Fc="firebaseLocalStorage",t_="fbase_key";class Ua{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function vu(t,e){return t.transaction([Fc],e?"readwrite":"readonly").objectStore(Fc)}function _k(){const t=indexedDB.deleteDatabase(e_);return new Ua(t).toPromise()}function mm(){const t=indexedDB.open(e_,wk);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Fc,{keyPath:t_})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Fc)?e(n):(n.close(),await _k(),e(await mm()))})})}async function Tx(t,e,r){const n=vu(t,!0).put({[t_]:e,value:r});return new Ua(n).toPromise()}async function jk(t,e){const r=vu(t,!1).get(e),n=await new Ua(r).toPromise();return n===void 0?null:n.value}function Ix(t,e){const r=vu(t,!0).delete(e);return new Ua(r).toPromise()}const Nk=800,Ek=3;class r_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>Ek)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(bk()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await yk(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await Tx(e,Oc,"1"),await Ix(e,Oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tx(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>jk(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ix(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=vu(i,!1).getAll();return new Ua(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}r_.type="LOCAL";const Sk=r_;new Oa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t,e){return e?sn(e):(ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ti(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ti(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ti(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function Tk(t){return Ww(t.auth,new Qf(t),t.bypassAuthState)}function Ik(t){const{auth:e,user:r}=t;return ne(r,e,"internal-error"),Hw(r,new Qf(t),t.bypassAuthState)}async function kk(t){const{auth:e,user:r}=t;return ne(r,e,"internal-error"),rk(r,new Qf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,r,n,i,o=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tk;case"linkViaPopup":case"linkViaRedirect":return kk;case"reauthViaPopup":case"reauthViaRedirect":return Ik;default:pr(this.auth,"internal-error")}}resolve(e){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Oa(2e3,1e4);async function Ak(t,e,r){if(jr(t.app))return Promise.reject(Sr(t,"operation-not-supported-in-this-environment"));const n=wn(t);lI(t,e,$f);const i=n_(n,r);return new bs(n,"signInViaPopup",e,i).executeNotNull()}class bs extends s_{constructor(e,r,n,i,o){super(e,r,i,o),this.provider=n,this.authWindow=null,this.pollId=null,bs.currentPopupAction&&bs.currentPopupAction.cancel(),bs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ne(e,this.auth,"internal-error"),e}async onExecution(){pn(this.filter.length===1,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ck.get())};e()}}bs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="pendingRedirect",Yl=new Map;class Rk extends s_{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Yl.get(this.auth._key());if(!e){try{const n=await Dk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Dk(t,e){const r=Vk(e),n=Mk(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function Lk(t,e){Yl.set(t._key(),e)}function Mk(t){return sn(t._redirectPersistence)}function Vk(t){return Ql(Pk,t.config.apiKey,t.name)}async function Ok(t,e,r=!1){if(jr(t.app))return Promise.reject(an(t));const n=wn(t),i=n_(n,e),a=await new Rk(n,i,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=10*60*1e3;class qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Uk(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!i_(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(Sr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Fk&&this.cachedEventUids.clear(),this.cachedEventUids.has(kx(e))}saveEventToCache(e){this.cachedEventUids.add(kx(e)),this.lastProcessedEventTime=Date.now()}}function kx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Uk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e={}){return Pr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hk=/^https?/;async function Wk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await zk(t);for(const r of e)try{if(Gk(r))return}catch{}pr(t,"unauthorized-domain")}function Gk(t){const e=cm(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!Hk.test(r))return!1;if(Bk.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Oa(3e4,6e4);function Cx(){const t=Fr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Kk(t){return new Promise((e,r)=>{var n,i,o;function a(){Cx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Cx(),r(Sr(t,"network-request-failed"))},timeout:$k.get()})}if(!((i=(n=Fr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Fr().gapi)===null||o===void 0)&&o.load)a();else{const c=MI("iframefcb");return Fr()[c]=()=>{gapi.load?a():r(Sr(t,"network-request-failed"))},qw(`${LI()}?onload=${c}`).catch(u=>r(u))}}).catch(e=>{throw Jl=null,e})}let Jl=null;function Qk(t){return Jl=Jl||Kk(t),Jl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Oa(5e3,15e3),Jk="__/auth/iframe",Xk="emulator/auth/iframe",Zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tC(t){const e=t.config;ne(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?zf(e,Xk):`https://${t.config.authDomain}/${Jk}`,n={apiKey:e.apiKey,appName:t.name,v:Yi},i=eC.get(t.config.apiHost);i&&(n.eid=i);const o=t._getFrameworks();return o.length&&(n.fw=o.join(",")),`${r}?${Va(n).slice(1)}`}async function rC(t){const e=await Qk(t),r=Fr().gapi;return ne(r,t,"internal-error"),e.open({where:document.body,url:tC(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zk,dontclear:!0},n=>new Promise(async(i,o)=>{await n.restyle({setHideOnLeave:!1});const a=Sr(t,"network-request-failed"),c=Fr().setTimeout(()=>{o(a)},Yk.get());function u(){Fr().clearTimeout(c),i(n)}n.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sC=500,iC=600,oC="_blank",aC="http://localhost";class Ax{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lC(t,e,r,n=sC,i=iC){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let c="";const u=Object.assign(Object.assign({},nC),{width:n.toString(),height:i.toString(),top:o,left:a}),d=St().toLowerCase();r&&(c=Rw(d)?oC:r),Aw(d)&&(e=e||aC,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[j,C])=>`${g}${j}=${C},`,"");if(SI(d)&&c!=="_self")return cC(e||"",c),new Ax(null);const f=window.open(e||"",c,m);ne(f,t,"popup-blocked");try{f.focus()}catch{}return new Ax(f)}function cC(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="__/auth/handler",dC="emulator/auth/handler",hC=encodeURIComponent("fac");async function Px(t,e,r,n,i,o){ne(t.config.authDomain,t,"auth-domain-config-required"),ne(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Yi,eventId:i};if(e instanceof $f){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",$S(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,f]of Object.entries({}))a[m]=f}if(e instanceof qa){const m=e.getScopes().filter(f=>f!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${hC}=${encodeURIComponent(u)}`:"";return`${mC(t)}?${Va(c).slice(1)}${d}`}function mC({config:t}){return t.emulator?zf(t,dC):`https://${t.authDomain}/${uC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class fC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xw,this._completeRedirectFn=Ok,this._overrideRedirectResult=Lk}async _openPopup(e,r,n,i){var o;pn((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Px(e,r,n,cm(),i);return lC(e,a,Kf())}async _openRedirect(e,r,n,i){await this._originValidation(e);const o=await Px(e,r,n,cm(),i);return xk(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:o}=this.eventManagers[r];return i?Promise.resolve(i):(pn(o,"If manager is not set, promise should be"),o)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await rC(e),n=new qk(e);return r.register("authEvent",i=>(ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Vd,{type:Vd},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Vd];a!==void 0&&r(!!a),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Wk(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Ow()||Pw()||Hf()}}const pC=fC;var Rx="@firebase/auth",Dx="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yC(t){zr(new Ir("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=n.options;ne(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fw(t)},d=new PI(n,i,o,u);return UI(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),zr(new Ir("auth-internal",e=>{const r=wn(e.getProvider("auth").getImmediate());return(n=>new gC(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),dr(Rx,Dx,xC(t)),dr(Rx,Dx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=5*60,bC=pw("authIdTokenMaxAge")||vC;let Lx=null;const wC=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>bC)return;const i=r==null?void 0:r.token;Lx!==i&&(Lx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function _C(t=Of()){const e=Gs(t,"auth");if(e.isInitialized())return e.getImmediate();const r=qI(t,{popupRedirectResolver:pC,persistence:[Sk,fk,Xw]}),n=pw("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(n,location.origin);if(location.origin===o.origin){const a=wC(o.toString());ck(r,a,()=>a(r.currentUser)),lk(r,c=>a(c))}}const i=mw("auth");return i&&zI(r,`http://${i}`),r}function jC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RI({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const o=Sr("internal-error");o.customData=i,r(o)},n.type="text/javascript",n.charset="UTF-8",jC().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yC("Browser");var NC="firebase",EC="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(NC,EC,"app");var Mx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,o_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function y(){}y.prototype=x.prototype,E.D=x.prototype,E.prototype=new y,E.prototype.constructor=E,E.C=function(v,N,A){for(var S=Array(arguments.length-2),re=2;re<arguments.length;re++)S[re-2]=arguments[re];return x.prototype[N].apply(v,S)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,x,y){y||(y=0);var v=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)v[N]=x.charCodeAt(y++)|x.charCodeAt(y++)<<8|x.charCodeAt(y++)<<16|x.charCodeAt(y++)<<24;else for(N=0;16>N;++N)v[N]=x[y++]|x[y++]<<8|x[y++]<<16|x[y++]<<24;x=E.g[0],y=E.g[1],N=E.g[2];var A=E.g[3],S=x+(A^y&(N^A))+v[0]+3614090360&4294967295;x=y+(S<<7&4294967295|S>>>25),S=A+(N^x&(y^N))+v[1]+3905402710&4294967295,A=x+(S<<12&4294967295|S>>>20),S=N+(y^A&(x^y))+v[2]+606105819&4294967295,N=A+(S<<17&4294967295|S>>>15),S=y+(x^N&(A^x))+v[3]+3250441966&4294967295,y=N+(S<<22&4294967295|S>>>10),S=x+(A^y&(N^A))+v[4]+4118548399&4294967295,x=y+(S<<7&4294967295|S>>>25),S=A+(N^x&(y^N))+v[5]+1200080426&4294967295,A=x+(S<<12&4294967295|S>>>20),S=N+(y^A&(x^y))+v[6]+2821735955&4294967295,N=A+(S<<17&4294967295|S>>>15),S=y+(x^N&(A^x))+v[7]+4249261313&4294967295,y=N+(S<<22&4294967295|S>>>10),S=x+(A^y&(N^A))+v[8]+1770035416&4294967295,x=y+(S<<7&4294967295|S>>>25),S=A+(N^x&(y^N))+v[9]+2336552879&4294967295,A=x+(S<<12&4294967295|S>>>20),S=N+(y^A&(x^y))+v[10]+4294925233&4294967295,N=A+(S<<17&4294967295|S>>>15),S=y+(x^N&(A^x))+v[11]+2304563134&4294967295,y=N+(S<<22&4294967295|S>>>10),S=x+(A^y&(N^A))+v[12]+1804603682&4294967295,x=y+(S<<7&4294967295|S>>>25),S=A+(N^x&(y^N))+v[13]+4254626195&4294967295,A=x+(S<<12&4294967295|S>>>20),S=N+(y^A&(x^y))+v[14]+2792965006&4294967295,N=A+(S<<17&4294967295|S>>>15),S=y+(x^N&(A^x))+v[15]+1236535329&4294967295,y=N+(S<<22&4294967295|S>>>10),S=x+(N^A&(y^N))+v[1]+4129170786&4294967295,x=y+(S<<5&4294967295|S>>>27),S=A+(y^N&(x^y))+v[6]+3225465664&4294967295,A=x+(S<<9&4294967295|S>>>23),S=N+(x^y&(A^x))+v[11]+643717713&4294967295,N=A+(S<<14&4294967295|S>>>18),S=y+(A^x&(N^A))+v[0]+3921069994&4294967295,y=N+(S<<20&4294967295|S>>>12),S=x+(N^A&(y^N))+v[5]+3593408605&4294967295,x=y+(S<<5&4294967295|S>>>27),S=A+(y^N&(x^y))+v[10]+38016083&4294967295,A=x+(S<<9&4294967295|S>>>23),S=N+(x^y&(A^x))+v[15]+3634488961&4294967295,N=A+(S<<14&4294967295|S>>>18),S=y+(A^x&(N^A))+v[4]+3889429448&4294967295,y=N+(S<<20&4294967295|S>>>12),S=x+(N^A&(y^N))+v[9]+568446438&4294967295,x=y+(S<<5&4294967295|S>>>27),S=A+(y^N&(x^y))+v[14]+3275163606&4294967295,A=x+(S<<9&4294967295|S>>>23),S=N+(x^y&(A^x))+v[3]+4107603335&4294967295,N=A+(S<<14&4294967295|S>>>18),S=y+(A^x&(N^A))+v[8]+1163531501&4294967295,y=N+(S<<20&4294967295|S>>>12),S=x+(N^A&(y^N))+v[13]+2850285829&4294967295,x=y+(S<<5&4294967295|S>>>27),S=A+(y^N&(x^y))+v[2]+4243563512&4294967295,A=x+(S<<9&4294967295|S>>>23),S=N+(x^y&(A^x))+v[7]+1735328473&4294967295,N=A+(S<<14&4294967295|S>>>18),S=y+(A^x&(N^A))+v[12]+2368359562&4294967295,y=N+(S<<20&4294967295|S>>>12),S=x+(y^N^A)+v[5]+4294588738&4294967295,x=y+(S<<4&4294967295|S>>>28),S=A+(x^y^N)+v[8]+2272392833&4294967295,A=x+(S<<11&4294967295|S>>>21),S=N+(A^x^y)+v[11]+1839030562&4294967295,N=A+(S<<16&4294967295|S>>>16),S=y+(N^A^x)+v[14]+4259657740&4294967295,y=N+(S<<23&4294967295|S>>>9),S=x+(y^N^A)+v[1]+2763975236&4294967295,x=y+(S<<4&4294967295|S>>>28),S=A+(x^y^N)+v[4]+1272893353&4294967295,A=x+(S<<11&4294967295|S>>>21),S=N+(A^x^y)+v[7]+4139469664&4294967295,N=A+(S<<16&4294967295|S>>>16),S=y+(N^A^x)+v[10]+3200236656&4294967295,y=N+(S<<23&4294967295|S>>>9),S=x+(y^N^A)+v[13]+681279174&4294967295,x=y+(S<<4&4294967295|S>>>28),S=A+(x^y^N)+v[0]+3936430074&4294967295,A=x+(S<<11&4294967295|S>>>21),S=N+(A^x^y)+v[3]+3572445317&4294967295,N=A+(S<<16&4294967295|S>>>16),S=y+(N^A^x)+v[6]+76029189&4294967295,y=N+(S<<23&4294967295|S>>>9),S=x+(y^N^A)+v[9]+3654602809&4294967295,x=y+(S<<4&4294967295|S>>>28),S=A+(x^y^N)+v[12]+3873151461&4294967295,A=x+(S<<11&4294967295|S>>>21),S=N+(A^x^y)+v[15]+530742520&4294967295,N=A+(S<<16&4294967295|S>>>16),S=y+(N^A^x)+v[2]+3299628645&4294967295,y=N+(S<<23&4294967295|S>>>9),S=x+(N^(y|~A))+v[0]+4096336452&4294967295,x=y+(S<<6&4294967295|S>>>26),S=A+(y^(x|~N))+v[7]+1126891415&4294967295,A=x+(S<<10&4294967295|S>>>22),S=N+(x^(A|~y))+v[14]+2878612391&4294967295,N=A+(S<<15&4294967295|S>>>17),S=y+(A^(N|~x))+v[5]+4237533241&4294967295,y=N+(S<<21&4294967295|S>>>11),S=x+(N^(y|~A))+v[12]+1700485571&4294967295,x=y+(S<<6&4294967295|S>>>26),S=A+(y^(x|~N))+v[3]+2399980690&4294967295,A=x+(S<<10&4294967295|S>>>22),S=N+(x^(A|~y))+v[10]+4293915773&4294967295,N=A+(S<<15&4294967295|S>>>17),S=y+(A^(N|~x))+v[1]+2240044497&4294967295,y=N+(S<<21&4294967295|S>>>11),S=x+(N^(y|~A))+v[8]+1873313359&4294967295,x=y+(S<<6&4294967295|S>>>26),S=A+(y^(x|~N))+v[15]+4264355552&4294967295,A=x+(S<<10&4294967295|S>>>22),S=N+(x^(A|~y))+v[6]+2734768916&4294967295,N=A+(S<<15&4294967295|S>>>17),S=y+(A^(N|~x))+v[13]+1309151649&4294967295,y=N+(S<<21&4294967295|S>>>11),S=x+(N^(y|~A))+v[4]+4149444226&4294967295,x=y+(S<<6&4294967295|S>>>26),S=A+(y^(x|~N))+v[11]+3174756917&4294967295,A=x+(S<<10&4294967295|S>>>22),S=N+(x^(A|~y))+v[2]+718787259&4294967295,N=A+(S<<15&4294967295|S>>>17),S=y+(A^(N|~x))+v[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,E.g[2]=E.g[2]+N&4294967295,E.g[3]=E.g[3]+A&4294967295}n.prototype.u=function(E,x){x===void 0&&(x=E.length);for(var y=x-this.blockSize,v=this.B,N=this.h,A=0;A<x;){if(N==0)for(;A<=y;)i(this,E,A),A+=this.blockSize;if(typeof E=="string"){for(;A<x;)if(v[N++]=E.charCodeAt(A++),N==this.blockSize){i(this,v),N=0;break}}else for(;A<x;)if(v[N++]=E[A++],N==this.blockSize){i(this,v),N=0;break}}this.h=N,this.o+=x},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;var y=8*this.o;for(x=E.length-8;x<E.length;++x)E[x]=y&255,y/=256;for(this.u(E),E=Array(16),x=y=0;4>x;++x)for(var v=0;32>v;v+=8)E[y++]=this.g[x]>>>v&255;return E};function o(E,x){var y=c;return Object.prototype.hasOwnProperty.call(y,E)?y[E]:y[E]=x(E)}function a(E,x){this.h=x;for(var y=[],v=!0,N=E.length-1;0<=N;N--){var A=E[N]|0;v&&A==x||(y[N]=A,v=!1)}this.g=y}var c={};function u(E){return-128<=E&&128>E?o(E,function(x){return new a([x|0],0>x?-1:0)}):new a([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return R(d(-E));for(var x=[],y=1,v=0;E>=y;v++)x[v]=E/y|0,y*=4294967296;return new a(x,0)}function m(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return R(m(E.substring(1),x));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(x,8)),v=f,N=0;N<E.length;N+=8){var A=Math.min(8,E.length-N),S=parseInt(E.substring(N,N+A),x);8>A?(A=d(Math.pow(x,A)),v=v.j(A).add(d(S))):(v=v.j(y),v=v.add(d(S)))}return v}var f=u(0),g=u(1),j=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-R(this).m();for(var E=0,x=1,y=0;y<this.g.length;y++){var v=this.i(y);E+=(0<=v?v:4294967296+v)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C(this))return"0";if(P(this))return"-"+R(this).toString(E);for(var x=d(Math.pow(E,6)),y=this,v="";;){var N=D(y,x).g;y=_(y,N.j(x));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(E);if(y=N,C(y))return A+v;for(;6>A.length;)A="0"+A;v=A+v}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function C(E){if(E.h!=0)return!1;for(var x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function P(E){return E.h==-1}t.l=function(E){return E=_(this,E),P(E)?-1:C(E)?0:1};function R(E){for(var x=E.g.length,y=[],v=0;v<x;v++)y[v]=~E.g[v];return new a(y,~E.h).add(g)}t.abs=function(){return P(this)?R(this):this},t.add=function(E){for(var x=Math.max(this.g.length,E.g.length),y=[],v=0,N=0;N<=x;N++){var A=v+(this.i(N)&65535)+(E.i(N)&65535),S=(A>>>16)+(this.i(N)>>>16)+(E.i(N)>>>16);v=S>>>16,A&=65535,S&=65535,y[N]=S<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function _(E,x){return E.add(R(x))}t.j=function(E){if(C(this)||C(E))return f;if(P(this))return P(E)?R(this).j(R(E)):R(R(this).j(E));if(P(E))return R(this.j(R(E)));if(0>this.l(j)&&0>E.l(j))return d(this.m()*E.m());for(var x=this.g.length+E.g.length,y=[],v=0;v<2*x;v++)y[v]=0;for(v=0;v<this.g.length;v++)for(var N=0;N<E.g.length;N++){var A=this.i(v)>>>16,S=this.i(v)&65535,re=E.i(N)>>>16,ae=E.i(N)&65535;y[2*v+2*N]+=S*ae,w(y,2*v+2*N),y[2*v+2*N+1]+=A*ae,w(y,2*v+2*N+1),y[2*v+2*N+1]+=S*re,w(y,2*v+2*N+1),y[2*v+2*N+2]+=A*re,w(y,2*v+2*N+2)}for(v=0;v<x;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=x;v<2*x;v++)y[v]=0;return new a(y,0)};function w(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function T(E,x){this.g=E,this.h=x}function D(E,x){if(C(x))throw Error("division by zero");if(C(E))return new T(f,f);if(P(E))return x=D(R(E),x),new T(R(x.g),R(x.h));if(P(x))return x=D(E,R(x)),new T(R(x.g),x.h);if(30<E.g.length){if(P(E)||P(x))throw Error("slowDivide_ only works with positive integers.");for(var y=g,v=x;0>=v.l(E);)y=L(y),v=L(v);var N=V(y,1),A=V(v,1);for(v=V(v,2),y=V(y,2);!C(v);){var S=A.add(v);0>=S.l(E)&&(N=N.add(y),A=S),v=V(v,1),y=V(y,1)}return x=_(E,N.j(x)),new T(N,x)}for(N=f;0<=E.l(x);){for(y=Math.max(1,Math.floor(E.m()/x.m())),v=Math.ceil(Math.log(y)/Math.LN2),v=48>=v?1:Math.pow(2,v-48),A=d(y),S=A.j(x);P(S)||0<S.l(E);)y-=v,A=d(y),S=A.j(x);C(A)&&(A=g),N=N.add(A),E=_(E,S)}return new T(N,E)}t.A=function(E){return D(this,E).h},t.and=function(E){for(var x=Math.max(this.g.length,E.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)&E.i(v);return new a(y,this.h&E.h)},t.or=function(E){for(var x=Math.max(this.g.length,E.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)|E.i(v);return new a(y,this.h|E.h)},t.xor=function(E){for(var x=Math.max(this.g.length,E.g.length),y=[],v=0;v<x;v++)y[v]=this.i(v)^E.i(v);return new a(y,this.h^E.h)};function L(E){for(var x=E.g.length+1,y=[],v=0;v<x;v++)y[v]=E.i(v)<<1|E.i(v-1)>>>31;return new a(y,E.h)}function V(E,x){var y=x>>5;x%=32;for(var v=E.g.length-y,N=[],A=0;A<v;A++)N[A]=0<x?E.i(A+y)>>>x|E.i(A+y+1)<<32-x:E.i(A+y);return new a(N,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,o_=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,Es=a}).apply(typeof Mx<"u"?Mx:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a_,l_,Po,c_,Xl,fm,u_,d_,h_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=r(this);function i(l,h){if(h)e:{var p=n;l=l.split(".");for(var b=0;b<l.length-1;b++){var M=l[b];if(!(M in p))break e;p=p[M]}l=l[l.length-1],b=p[l],h=h(b),h!=b&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,b=!1,M={next:function(){if(!b&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return b=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,b),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:f,g.apply(null,arguments)}function j(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var b=p.slice();return b.push.apply(b,arguments),l.apply(this,b)}}function C(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(b,M,O){for(var G=Array(arguments.length-2),we=2;we<arguments.length;we++)G[we-2]=arguments[we];return h.prototype[M].apply(b,G)}}function P(l){const h=l.length;if(0<h){const p=Array(h);for(let b=0;b<h;b++)p[b]=l[b];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const b=arguments[p];if(u(b)){const M=l.length||0,O=b.length||0;l.length=M+O;for(let G=0;G<O;G++)l[M+G]=b[G]}else l.push(b)}}class _{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var L=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,h,p){for(const b in l)h.call(p,l[b],b,l)}function E(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function x(l){const h={};for(const p in l)h[p]=l[p];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function v(l,h){let p,b;for(let M=1;M<arguments.length;M++){b=arguments[M];for(p in b)l[p]=b[p];for(let O=0;O<y.length;O++)p=y[O],Object.prototype.hasOwnProperty.call(b,p)&&(l[p]=b[p])}}function N(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function A(l){c.setTimeout(()=>{throw l},0)}function S(){var l=W;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class re{constructor(){this.h=this.g=null}add(h,p){const b=ae.get();b.set(h,p),this.h?this.h.next=b:this.g=b,this.h=b}}var ae=new _(()=>new ce,l=>l.reset());class ce{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,q=!1,W=new re,J=()=>{const l=c.Promise.resolve(void 0);Z=()=>{l.then(le)}};var le=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(p){A(p)}var h=ae;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}q=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function dt(l,h){if(me.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,b=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{D(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Gt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&dt.aa.h.call(this)}}C(dt,me);var Gt={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $t="closure_listenable_"+(1e6*Math.random()|0),ht=0;function nr(l,h,p,b,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!b,this.ha=M,this.key=++ht,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ie(l){this.src=l,this.g={},this.h=0}Ie.prototype.add=function(l,h,p,b,M){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var G=Tt(l,h,b,M);return-1<G?(h=l[G],p||(h.fa=!1)):(h=new nr(h,this.src,O,!!b,M),h.fa=p,l.push(h)),h};function $e(l,h){var p=h.type;if(p in l.g){var b=l.g[p],M=Array.prototype.indexOf.call(b,h,void 0),O;(O=0<=M)&&Array.prototype.splice.call(b,M,1),O&&(B(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Tt(l,h,p,b){for(var M=0;M<l.length;++M){var O=l[M];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==b)return M}return-1}var sr="closure_lm_"+(1e6*Math.random()|0),Oe={};function Mt(l,h,p,b,M){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Mt(l,h[O],p,b,M);return null}return p=Gp(p),l&&l[$t]?l.K(h,p,d(b)?!!b.capture:!!b,M):Hr(l,h,p,!1,b,M)}function Hr(l,h,p,b,M,O){if(!h)throw Error("Invalid event type");var G=d(M)?!!M.capture:!!M,we=Wr(l);if(we||(l[sr]=we=new Ie(l)),p=we.add(h,p,b,G,O),p.proxy)return p;if(b=It(),p.proxy=b,b.src=l,b.listener=p,l.addEventListener)Ge||(M=G),M===void 0&&(M=!1),l.addEventListener(h.toString(),b,M);else if(l.attachEvent)l.attachEvent(mt(h.toString()),b);else if(l.addListener&&l.removeListener)l.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return p}function It(){function l(p){return h.call(l.src,l.listener,p)}const h=Vt;return l}function U(l,h,p,b,M){if(Array.isArray(h))for(var O=0;O<h.length;O++)U(l,h[O],p,b,M);else b=d(b)?!!b.capture:!!b,p=Gp(p),l&&l[$t]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Tt(O,p,b,M),-1<p&&(B(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Wr(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Tt(h,p,b,M)),(p=-1<l?h[l]:null)&&ue(p))}function ue(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[$t])$e(h.i,l);else{var p=l.type,b=l.proxy;h.removeEventListener?h.removeEventListener(p,b,l.capture):h.detachEvent?h.detachEvent(mt(p),b):h.addListener&&h.removeListener&&h.removeListener(b),(p=Wr(h))?($e(p,l),p.h==0&&(p.src=null,h[sr]=null)):B(l)}}}function mt(l){return l in Oe?Oe[l]:Oe[l]="on"+l}function Vt(l,h){if(l.da)l=!0;else{h=new dt(h,this);var p=l.listener,b=l.ha||l.src;l.fa&&ue(l),l=p.call(b,h)}return l}function Wr(l){return l=l[sr],l instanceof Ie?l:null}var Uu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Gp(l){return typeof l=="function"?l:(l[Uu]||(l[Uu]=function(h){return l.handleEvent(h)}),l[Uu])}function ft(){ee.call(this),this.i=new Ie(this),this.M=this,this.F=null}C(ft,ee),ft.prototype[$t]=!0,ft.prototype.removeEventListener=function(l,h,p,b){U(this,l,h,p,b)};function kt(l,h){var p,b=l.F;if(b)for(p=[];b;b=b.F)p.push(b);if(l=l.M,b=h.type||h,typeof h=="string")h=new me(h,l);else if(h instanceof me)h.target=h.target||l;else{var M=h;h=new me(b,l),v(h,M)}if(M=!0,p)for(var O=p.length-1;0<=O;O--){var G=h.g=p[O];M=Ya(G,b,!0,h)&&M}if(G=h.g=l,M=Ya(G,b,!0,h)&&M,M=Ya(G,b,!1,h)&&M,p)for(O=0;O<p.length;O++)G=h.g=p[O],M=Ya(G,b,!1,h)&&M}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],b=0;b<p.length;b++)B(p[b]);delete l.g[h],l.h--}}this.F=null},ft.prototype.K=function(l,h,p,b){return this.i.add(String(l),h,!1,p,b)},ft.prototype.L=function(l,h,p,b){return this.i.add(String(l),h,!0,p,b)};function Ya(l,h,p,b){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,O=0;O<h.length;++O){var G=h[O];if(G&&!G.da&&G.capture==p){var we=G.listener,tt=G.ha||G.src;G.fa&&$e(l.i,G),M=we.call(tt,b)!==!1&&M}}return M&&!b.defaultPrevented}function $p(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Kp(l){l.g=$p(()=>{l.g=null,l.i&&(l.i=!1,Kp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class S2 extends ee{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Kp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(l){ee.call(this),this.h=l,this.g={}}C(ro,ee);var Qp=[];function Yp(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&ue(h)},l),l.g={}}ro.prototype.N=function(){ro.aa.N.call(this),Yp(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=c.JSON.stringify,T2=c.JSON.parse,I2=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Bu(){}Bu.prototype.h=null;function Jp(l){return l.h||(l.h=l.i())}function Xp(){}var no={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hu(){me.call(this,"d")}C(Hu,me);function Wu(){me.call(this,"c")}C(Wu,me);var ls={},Zp=null;function Ja(){return Zp=Zp||new ft}ls.La="serverreachability";function eg(l){me.call(this,ls.La,l)}C(eg,me);function so(l){const h=Ja();kt(h,new eg(h))}ls.STAT_EVENT="statevent";function tg(l,h){me.call(this,ls.STAT_EVENT,l),this.stat=h}C(tg,me);function Ct(l){const h=Ja();kt(h,new tg(h,l))}ls.Ma="timingevent";function rg(l,h){me.call(this,ls.Ma,l),this.size=h}C(rg,me);function io(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function oo(){this.g=!0}oo.prototype.xa=function(){this.g=!1};function k2(l,h,p,b,M,O){l.info(function(){if(l.g)if(O)for(var G="",we=O.split("&"),tt=0;tt<we.length;tt++){var ye=we[tt].split("=");if(1<ye.length){var pt=ye[0];ye=ye[1];var gt=pt.split("_");G=2<=gt.length&&gt[1]=="type"?G+(pt+"="+ye+"&"):G+(pt+"=redacted&")}}else G=null;else G=O;return"XMLHTTP REQ ("+b+") [attempt "+M+"]: "+h+`
`+p+`
`+G})}function C2(l,h,p,b,M,O,G){l.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+M+"]: "+h+`
`+p+`
`+O+" "+G})}function Xs(l,h,p,b){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+P2(l,p)+(b?" "+b:"")})}function A2(l,h){l.info(function(){return"TIMEOUT: "+h})}oo.prototype.info=function(){};function P2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var b=p[l];if(!(2>b.length)){var M=b[1];if(Array.isArray(M)&&!(1>M.length)){var O=M[0];if(O!="noop"&&O!="stop"&&O!="close")for(var G=1;G<M.length;G++)M[G]=""}}}}return zu(p)}catch{return h}}var Xa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ng={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gu;function Za(){}C(Za,Bu),Za.prototype.g=function(){return new XMLHttpRequest},Za.prototype.i=function(){return{}},Gu=new Za;function _n(l,h,p,b){this.j=l,this.i=h,this.l=p,this.R=b||1,this.U=new ro(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sg}function sg(){this.i=null,this.g="",this.h=!1}var ig={},$u={};function Ku(l,h,p){l.L=1,l.v=nl(Gr(h)),l.m=p,l.P=!0,og(l,null)}function og(l,h){l.F=Date.now(),el(l),l.A=Gr(l.v);var p=l.A,b=l.R;Array.isArray(b)||(b=[String(b)]),bg(p.i,"t",b),l.C=0,p=l.j.J,l.h=new sg,l.g=Og(l.j,p?h:null,!l.m),0<l.O&&(l.M=new S2(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,b=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(Qp[0]=M.toString()),M=Qp);for(var O=0;O<M.length;O++){var G=Mt(p,M[O],b||h.handleEvent,!1,h.h||h);if(!G)break;h.g[G.key]=G}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),so(),k2(l.i,l.u,l.A,l.l,l.R,l.m)}_n.prototype.ca=function(l){l=l.target;const h=this.M;h&&$r(l)==3?h.j():this.Y(l)},_n.prototype.Y=function(l){try{if(l==this.g)e:{const gt=$r(this.g);var h=this.g.Ba();const ti=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Tg(this.g)))){this.J||gt!=4||h==7||(h==8||0>=ti?so(3):so(2)),Qu(this);var p=this.g.Z();this.X=p;t:if(ag(this)){var b=Tg(this.g);l="";var M=b.length,O=$r(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cs(this),ao(this);var G="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(b[h],{stream:!(O&&h==M-1)});b.length=0,this.h.g+=l,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=p==200,C2(this.i,this.u,this.A,this.l,this.R,gt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var we,tt=this.g;if((we=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(we)){var ye=we;break t}}ye=null}if(p=ye)Xs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yu(this,p);else{this.o=!1,this.s=3,Ct(12),cs(this),ao(this);break e}}if(this.P){p=!0;let xr;for(;!this.J&&this.C<G.length;)if(xr=R2(this,G),xr==$u){gt==4&&(this.s=4,Ct(14),p=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(xr==ig){this.s=4,Ct(15),Xs(this.i,this.l,G,"[Invalid Chunk]"),p=!1;break}else Xs(this.i,this.l,xr,null),Yu(this,xr);if(ag(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||G.length!=0||this.h.h||(this.s=1,Ct(16),p=!1),this.o=this.o&&p,!p)Xs(this.i,this.l,G,"[Invalid Chunked Response]"),cs(this),ao(this);else if(0<G.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),rd(pt),pt.M=!0,Ct(11))}}else Xs(this.i,this.l,G,null),Yu(this,G);gt==4&&cs(this),this.o&&!this.J&&(gt==4?Dg(this.j,this):(this.o=!1,el(this)))}else Y2(this.g),p==400&&0<G.indexOf("Unknown SID")?(this.s=3,Ct(12)):(this.s=0,Ct(13)),cs(this),ao(this)}}}catch{}finally{}};function ag(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function R2(l,h){var p=l.C,b=h.indexOf(`
`,p);return b==-1?$u:(p=Number(h.substring(p,b)),isNaN(p)?ig:(b+=1,b+p>h.length?$u:(h=h.slice(b,b+p),l.C=b+p,h)))}_n.prototype.cancel=function(){this.J=!0,cs(this)};function el(l){l.S=Date.now()+l.I,lg(l,l.I)}function lg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=io(g(l.ba,l),h)}function Qu(l){l.B&&(c.clearTimeout(l.B),l.B=null)}_n.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(A2(this.i,this.A),this.L!=2&&(so(),Ct(17)),cs(this),this.s=2,ao(this)):lg(this,this.S-l)};function ao(l){l.j.G==0||l.J||Dg(l.j,l)}function cs(l){Qu(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Yp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Yu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Ju(p.h,l))){if(!l.K&&Ju(p.h,l)&&p.G==3){try{var b=p.Da.g.parse(h)}catch{b=null}if(Array.isArray(b)&&b.length==3){var M=b;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)ll(p),ol(p);else break e;td(p),Ct(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=io(g(p.Za,p),6e3));if(1>=dg(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ds(p,11)}else if((l.K||p.g==l)&&ll(p),!w(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let ye=M[h];if(p.T=ye[0],ye=ye[1],p.G==2)if(ye[0]=="c"){p.K=ye[1],p.ia=ye[2];const pt=ye[3];pt!=null&&(p.la=pt,p.j.info("VER="+p.la));const gt=ye[4];gt!=null&&(p.Aa=gt,p.j.info("SVER="+p.Aa));const ti=ye[5];ti!=null&&typeof ti=="number"&&0<ti&&(b=1.5*ti,p.L=b,p.j.info("backChannelRequestTimeoutMs_="+b)),b=p;const xr=l.g;if(xr){const ul=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ul){var O=b.h;O.g||ul.indexOf("spdy")==-1&&ul.indexOf("quic")==-1&&ul.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Xu(O,O.h),O.h=null))}if(b.D){const nd=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;nd&&(b.ya=nd,Ne(b.I,b.D,nd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),b=p;var G=l;if(b.qa=Vg(b,b.J?b.ia:null,b.W),G.K){hg(b.h,G);var we=G,tt=b.L;tt&&(we.I=tt),we.B&&(Qu(we),el(we)),b.g=G}else Pg(b);0<p.i.length&&al(p)}else ye[0]!="stop"&&ye[0]!="close"||ds(p,7);else p.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ds(p,7):ed(p):ye[0]!="noop"&&p.l&&p.l.ta(ye),p.v=0)}}so(4)}catch{}}var D2=class{constructor(l,h){this.g=l,this.map=h}};function cg(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ug(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function dg(l){return l.h?1:l.g?l.g.size:0}function Ju(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Xu(l,h){l.g?l.g.add(h):l.h=h}function hg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}cg.prototype.cancel=function(){if(this.i=mg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function mg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function L2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,b=0;b<p;b++)h.push(l[b]);return h}h=[],p=0;for(b in l)h[p++]=l[b];return h}function M2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const b in l)h[p++]=b;return h}}}function fg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=M2(l),b=L2(l),M=b.length,O=0;O<M;O++)h.call(void 0,b[O],p&&p[O],l)}var pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function V2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var b=l[p].indexOf("="),M=null;if(0<=b){var O=l[p].substring(0,b);M=l[p].substring(b+1)}else O=l[p];h(O,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function us(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof us){this.h=l.h,tl(this,l.j),this.o=l.o,this.g=l.g,rl(this,l.s),this.l=l.l;var h=l.i,p=new uo;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),gg(this,p),this.m=l.m}else l&&(h=String(l).match(pg))?(this.h=!1,tl(this,h[1]||"",!0),this.o=lo(h[2]||""),this.g=lo(h[3]||"",!0),rl(this,h[4]),this.l=lo(h[5]||"",!0),gg(this,h[6]||"",!0),this.m=lo(h[7]||"")):(this.h=!1,this.i=new uo(null,this.h))}us.prototype.toString=function(){var l=[],h=this.j;h&&l.push(co(h,xg,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(co(h,xg,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(co(p,p.charAt(0)=="/"?q2:F2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",co(p,z2)),l.join("")};function Gr(l){return new us(l)}function tl(l,h,p){l.j=p?lo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function rl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function gg(l,h,p){h instanceof uo?(l.i=h,B2(l.i,l.h)):(p||(h=co(h,U2)),l.i=new uo(h,l.h))}function Ne(l,h,p){l.i.set(h,p)}function nl(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function lo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function co(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,O2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function O2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var xg=/[#\/\?@]/g,F2=/[#\?:]/g,q2=/[#\?]/g,U2=/[#\?@]/g,z2=/#/g;function uo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function jn(l){l.g||(l.g=new Map,l.h=0,l.i&&V2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=uo.prototype,t.add=function(l,h){jn(this),this.i=null,l=Zs(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function yg(l,h){jn(l),h=Zs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function vg(l,h){return jn(l),h=Zs(l,h),l.g.has(h)}t.forEach=function(l,h){jn(this),this.g.forEach(function(p,b){p.forEach(function(M){l.call(h,M,b,this)},this)},this)},t.na=function(){jn(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let b=0;b<h.length;b++){const M=l[b];for(let O=0;O<M.length;O++)p.push(h[b])}return p},t.V=function(l){jn(this);let h=[];if(typeof l=="string")vg(this,l)&&(h=h.concat(this.g.get(Zs(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return jn(this),this.i=null,l=Zs(this,l),vg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function bg(l,h,p){yg(l,h),0<p.length&&(l.i=null,l.g.set(Zs(l,h),P(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var b=h[p];const O=encodeURIComponent(String(b)),G=this.V(b);for(b=0;b<G.length;b++){var M=O;G[b]!==""&&(M+="="+encodeURIComponent(String(G[b]))),l.push(M)}}return this.i=l.join("&")};function Zs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function B2(l,h){h&&!l.j&&(jn(l),l.i=null,l.g.forEach(function(p,b){var M=b.toLowerCase();b!=M&&(yg(this,b),bg(this,M,p))},l)),l.j=h}function H2(l,h){const p=new oo;if(c.Image){const b=new Image;b.onload=j(Nn,p,"TestLoadImage: loaded",!0,h,b),b.onerror=j(Nn,p,"TestLoadImage: error",!1,h,b),b.onabort=j(Nn,p,"TestLoadImage: abort",!1,h,b),b.ontimeout=j(Nn,p,"TestLoadImage: timeout",!1,h,b),c.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=l}else h(!1)}function W2(l,h){const p=new oo,b=new AbortController,M=setTimeout(()=>{b.abort(),Nn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:b.signal}).then(O=>{clearTimeout(M),O.ok?Nn(p,"TestPingServer: ok",!0,h):Nn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Nn(p,"TestPingServer: error",!1,h)})}function Nn(l,h,p,b,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),b(p)}catch{}}function G2(){this.g=new I2}function $2(l,h,p){const b=p||"";try{fg(l,function(M,O){let G=M;d(M)&&(G=zu(M)),h.push(b+O+"="+encodeURIComponent(G))})}catch(M){throw h.push(b+"type="+encodeURIComponent("_badmap")),M}}function ho(l){this.l=l.Ub||null,this.j=l.eb||!1}C(ho,Bu),ho.prototype.g=function(){return new sl(this.l,this.j)},ho.prototype.i=function(l){return function(){return l}}({});function sl(l,h){ft.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(sl,ft),t=sl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,fo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,fo(this)),this.g&&(this.readyState=3,fo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function wg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?mo(this):fo(this),this.readyState==3&&wg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,mo(this))},t.Qa=function(l){this.g&&(this.response=l,mo(this))},t.ga=function(){this.g&&mo(this)};function mo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,fo(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function fo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _g(l){let h="";return V(l,function(p,b){h+=b,h+=":",h+=p,h+=`\r
`}),h}function Zu(l,h,p){e:{for(b in p){var b=!1;break e}b=!0}b||(p=_g(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ne(l,h,p))}function Me(l){ft.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Me,ft);var K2=/^https?$/i,Q2=["POST","PUT"];t=Me.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gu.g(),this.v=this.o?Jp(this.o):Jp(Gu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){jg(this,O);return}if(l=p||"",p=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var M in b)p.set(M,b[M]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const O of b.keys())p.set(O,b.get(O));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Q2,h,void 0))||b||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,G]of p)this.g.setRequestHeader(O,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Sg(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){jg(this,O)}};function jg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Ng(l),il(l)}function Ng(l){l.A||(l.A=!0,kt(l,"complete"),kt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,kt(this,"complete"),kt(this,"abort"),il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Me.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Eg(this):this.bb())},t.bb=function(){Eg(this)};function Eg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||$r(l)!=4||l.Z()!=2)){if(l.u&&$r(l)==4)$p(l.Ea,0,l);else if(kt(l,"readystatechange"),$r(l)==4){l.h=!1;try{const G=l.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var b;if(b=G===0){var M=String(l.D).match(pg)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),b=!K2.test(M?M.toLowerCase():"")}p=b}if(p)kt(l,"complete"),kt(l,"success");else{l.m=6;try{var O=2<$r(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",Ng(l)}}finally{il(l)}}}}function il(l,h){if(l.g){Sg(l);const p=l.g,b=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||kt(l,"ready");try{p.onreadystatechange=b}catch{}}}function Sg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function $r(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<$r(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),T2(h)}};function Tg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Y2(l){const h={};l=(l.g&&2<=$r(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<l.length;b++){if(w(l[b]))continue;var p=N(l[b]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[M]||[];h[M]=O,O.push(p)}E(h,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Ig(l){this.Aa=0,this.i=[],this.j=new oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=po("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=po("baseRetryDelayMs",5e3,l),this.cb=po("retryDelaySeedMs",1e4,l),this.Wa=po("forwardChannelMaxRetries",2,l),this.wa=po("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new cg(l&&l.concurrentRequestLimit),this.Da=new G2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ig.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,b){Ct(0),this.W=l,this.H=h||{},p&&b!==void 0&&(this.H.OSID=p,this.H.OAID=b),this.F=this.X,this.I=Vg(this,null,this.W),al(this)};function ed(l){if(kg(l),l.G==3){var h=l.U++,p=Gr(l.I);if(Ne(p,"SID",l.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),go(l,p),h=new _n(l,l.j,h),h.L=2,h.v=nl(Gr(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=Og(h.j,null),h.g.ea(h.v)),h.F=Date.now(),el(h)}Mg(l)}function ol(l){l.g&&(rd(l),l.g.cancel(),l.g=null)}function kg(l){ol(l),l.u&&(c.clearTimeout(l.u),l.u=null),ll(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function al(l){if(!ug(l.h)&&!l.s){l.s=!0;var h=l.Ga;Z||J(),q||(Z(),q=!0),W.add(h,l),l.B=0}}function J2(l,h){return dg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=io(g(l.Ga,l,h),Lg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new _n(this,this.j,l);let O=this.o;if(this.S&&(O?(O=x(O),v(O,this.S)):O=this.S),this.m!==null||this.O||(M.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var b=this.i[p];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(h+=b,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Ag(this,M,h),p=Gr(this.I),Ne(p,"RID",l),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),go(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(_g(O)))+"&"+h:this.m&&Zu(p,this.m,O)),Xu(this.h,M),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),M.T=!0,Ku(M,p,null)):Ku(M,p,h),this.G=2}}else this.G==3&&(l?Cg(this,l):this.i.length==0||ug(this.h)||Cg(this))};function Cg(l,h){var p;h?p=h.l:p=l.U++;const b=Gr(l.I);Ne(b,"SID",l.K),Ne(b,"RID",p),Ne(b,"AID",l.T),go(l,b),l.m&&l.o&&Zu(b,l.m,l.o),p=new _n(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Ag(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Xu(l.h,p),Ku(p,b,h)}function go(l,h){l.H&&V(l.H,function(p,b){Ne(h,b,p)}),l.l&&fg({},function(p,b){Ne(h,b,p)})}function Ag(l,h,p){p=Math.min(l.i.length,p);var b=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let O=-1;for(;;){const G=["count="+p];O==-1?0<p?(O=M[0].g,G.push("ofs="+O)):O=0:G.push("ofs="+O);let we=!0;for(let tt=0;tt<p;tt++){let ye=M[tt].g;const pt=M[tt].map;if(ye-=O,0>ye)O=Math.max(0,M[tt].g-100),we=!1;else try{$2(pt,G,"req"+ye+"_")}catch{b&&b(pt)}}if(we){b=G.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,b}function Pg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Z||J(),q||(Z(),q=!0),W.add(h,l),l.v=0}}function td(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=io(g(l.Fa,l),Lg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Rg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=io(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ct(10),ol(this),Rg(this))};function rd(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Rg(l){l.g=new _n(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Gr(l.qa);Ne(h,"RID","rpc"),Ne(h,"SID",l.K),Ne(h,"AID",l.T),Ne(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(h,"TO",l.ja),Ne(h,"TYPE","xmlhttp"),go(l,h),l.m&&l.o&&Zu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=nl(Gr(h)),p.m=null,p.P=!0,og(p,l)}t.Za=function(){this.C!=null&&(this.C=null,ol(this),td(this),Ct(19))};function ll(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Dg(l,h){var p=null;if(l.g==h){ll(l),rd(l),l.g=null;var b=2}else if(Ju(l.h,h))p=h.D,hg(l.h,h),b=1;else return;if(l.G!=0){if(h.o)if(b==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;b=Ja(),kt(b,new rg(b,p)),al(l)}else Pg(l);else if(M=h.s,M==3||M==0&&0<h.X||!(b==1&&J2(l,h)||b==2&&td(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:ds(l,5);break;case 4:ds(l,10);break;case 3:ds(l,6);break;default:ds(l,2)}}}function Lg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function ds(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),b=l.Xa;const M=!b;b=new us(b||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||tl(b,"https"),nl(b),M?H2(b.toString(),p):W2(b.toString(),p)}else Ct(2);l.G=0,l.l&&l.l.sa(h),Mg(l),kg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Mg(l){if(l.G=0,l.ka=[],l.l){const h=mg(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function Vg(l,h,p){var b=p instanceof us?Gr(p):new us(p);if(b.g!="")h&&(b.g=h+"."+b.g),rl(b,b.s);else{var M=c.location;b=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var O=new us(null);b&&tl(O,b),h&&(O.g=h),M&&rl(O,M),p&&(O.l=p),b=O}return p=l.D,h=l.ya,p&&h&&Ne(b,p,h),Ne(b,"VER",l.la),go(l,b),b}function Og(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Me(new ho({eb:p})):new Me(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fg(){}t=Fg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cl(){}cl.prototype.g=function(l,h){return new Kt(l,h)};function Kt(l,h){ft.call(this),this.g=new Ig(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new ei(this)}C(Kt,ft),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){ed(this.g)},Kt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=zu(l),l=p);h.i.push(new D2(h.Ya++,l)),h.G==3&&al(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,ed(this.g),delete this.g,Kt.aa.N.call(this)};function qg(l){Hu.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(qg,Hu);function Ug(){Wu.call(this),this.status=1}C(Ug,Wu);function ei(l){this.g=l}C(ei,Fg),ei.prototype.ua=function(){kt(this.g,"a")},ei.prototype.ta=function(l){kt(this.g,new qg(l))},ei.prototype.sa=function(l){kt(this.g,new Ug)},ei.prototype.ra=function(){kt(this.g,"b")},cl.prototype.createWebChannel=cl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,h_=function(){return new cl},d_=function(){return Ja()},u_=ls,fm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xa.NO_ERROR=0,Xa.TIMEOUT=8,Xa.HTTP_ERROR=6,Xl=Xa,ng.COMPLETE="complete",c_=ng,Xp.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",ft.prototype.listen=ft.prototype.K,Po=Xp,l_=ho,Me.prototype.listenOnce=Me.prototype.L,Me.prototype.getLastError=Me.prototype.Ka,Me.prototype.getLastErrorCode=Me.prototype.Ba,Me.prototype.getStatus=Me.prototype.Z,Me.prototype.getResponseJson=Me.prototype.Oa,Me.prototype.getResponseText=Me.prototype.oa,Me.prototype.send=Me.prototype.ea,Me.prototype.setWithCredentials=Me.prototype.Ha,a_=Me}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const Vx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ji="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new gu("@firebase/firestore");function Eo(){return Ms.logLevel}function X(t,...e){if(Ms.logLevel<=pe.DEBUG){const r=e.map(Yf);Ms.debug(`Firestore (${Ji}): ${t}`,...r)}}function gn(t,...e){if(Ms.logLevel<=pe.ERROR){const r=e.map(Yf);Ms.error(`Firestore (${Ji}): ${t}`,...r)}}function Oi(t,...e){if(Ms.logLevel<=pe.WARN){const r=e.map(Yf);Ms.warn(`Firestore (${Ji}): ${t}`,...r)}}function Yf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Ji}) INTERNAL ASSERTION FAILED: `+t;throw gn(e),new Error(e)}function _e(t,e){t||se()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ar{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(bt.UNAUTHENTICATED))}shutdown(){}}class TC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let o=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ln,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ln)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(_e(typeof n.accessToken=="string"),new m_(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new bt(e)}}class kC{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CC{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new kC(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=o=>{o.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>n(o))};const i=o=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(_e(typeof r.token=="string"),this.R=r.token,new AC(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=RC(40);for(let o=0;o<i.length;++o)n.length<20&&i[o]<r&&(n+=e.charAt(i[o]%e.length))}return n}}function ve(t,e){return t<e?-1:t>e?1:0}function Fi(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new Je(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Je(0,0))}static max(){return new ie(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,r,n){r===void 0?r=0:r>e.length&&se(),n===void 0?n=e.length-r:n>e.length-r&&se(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return va.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof va?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const o=e.get(i),a=r.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Se extends va{construct(e,r,n){return new Se(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new Se(r)}static emptyPath(){return new Se([])}}const DC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class it extends va{construct(e,r,n){return new it(e,r,n)}static isValidIdentifier(e){return DC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),it.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new it(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const o=()=>{if(n.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(n+=c,i++):(o(),i++)}if(o(),a)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new it(r)}static emptyPath(){return new it([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Se.fromString(e))}static fromName(e){return new te(Se.fromString(e).popFirst(5))}static empty(){return new te(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Se.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Se(e.slice()))}}function LC(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(n===1e9?new Je(r+1,0):new Je(r,n));return new Zn(i,te.empty(),e)}function MC(t){return new Zn(t.readTime,t.key,-1)}class Zn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Zn(ie.min(),te.empty(),-1)}static max(){return new Zn(ie.max(),te.empty(),-1)}}function VC(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=te.comparator(t.documentKey,e.documentKey),r!==0?r:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function za(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==OC)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new z((n,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(n,i)},this.catchCallback=o=>{this.wrapFailure(r,o).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof z?r:z.resolve(r)}catch(r){return z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):z.reject(r)}static resolve(e){return new z((r,n)=>{r(e)})}static reject(e){return new z((r,n)=>{n(e)})}static waitFor(e){return new z((r,n)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&r()},u=>n(u))}),a=!0,o===i&&r()})}static or(e){let r=z.resolve(!1);for(const n of e)r=r.next(i=>i?z.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,o)=>{n.push(r.call(this,i,o))}),this.waitFor(n)}static mapArray(e,r){return new z((n,i)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;r(e[d]).next(m=>{a[d]=m,++c,c===o&&n(a)},m=>i(m))}})}static doWhile(e,r){return new z((n,i)=>{const o=()=>{e()===!0?r().next(()=>{o()},i):n()};o()})}}function qC(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Jf.oe=-1;function bu(t){return t==null}function qc(t){return t===0&&1/t==-1/0}function UC(t){return typeof t=="number"&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ks(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function p_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,r){this.comparator=e,this.root=r||nt.EMPTY}insert(e,r){return new Le(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cl(this.root,e,this.comparator,!0)}}class Cl{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?n(e.key,r):1,r&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,r,n,i,o){this.key=e,this.value=r,this.color=n??nt.RED,this.left=i??nt.EMPTY,this.right=o??nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,o){return new nt(e??this.key,r??this.value,n??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const o=n(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,r,n),null):o===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return nt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1;nt.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,r,n,i,o){return this}insert(e,r,n){return new nt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Fx(this.data.getIterator())}getIteratorFrom(e){return new Fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new at(this.comparator);return r.data=e,r}}class Fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.fields=e,e.sort(it.comparator)}static empty(){return new Jt([])}unionWith(e){let r=new at(it.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new Jt(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Fi(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new g_("Invalid base64 string: "+o):o}}(e);return new ct(r)}static fromUint8Array(e){const r=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new ct(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const zC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(_e(!!t),typeof t=="string"){let e=0;const r=zC.exec(t);if(_e(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Fe(t.seconds),nanos:Fe(t.nanos)}}function Fe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Zf(t){const e=t.mapValue.fields.__previous_value__;return Xf(e)?Zf(e):e}function ba(t){const e=es(t.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,r,n,i,o,a,c,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class wa{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Os(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Xf(t)?4:WC(t)?9007199254740991:HC(t)?10:11:se()}function Br(t,e){if(t===e)return!0;const r=Os(t);if(r!==Os(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ba(t).isEqual(ba(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=es(i.timestampValue),c=es(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Vs(i.bytesValue).isEqual(Vs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Fe(i.geoPointValue.latitude)===Fe(o.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Fe(i.integerValue)===Fe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=Fe(i.doubleValue),c=Fe(o.doubleValue);return a===c?qc(a)===qc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Fi(t.arrayValue.values||[],e.arrayValue.values||[],Br);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if(Ox(a)!==Ox(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Br(a[u],c[u])))return!1;return!0}(t,e);default:return se()}}function _a(t,e){return(t.values||[]).find(r=>Br(r,e))!==void 0}function qi(t,e){if(t===e)return 0;const r=Os(t),n=Os(e);if(r!==n)return ve(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=Fe(o.integerValue||o.doubleValue),u=Fe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return qx(t.timestampValue,e.timestampValue);case 4:return qx(ba(t),ba(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(o,a){const c=Vs(o),u=Vs(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=ve(c[d],u[d]);if(m!==0)return m}return ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=ve(Fe(o.latitude),Fe(a.latitude));return c!==0?c:ve(Fe(o.longitude),Fe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ux(t.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,m;const f=o.fields||{},g=a.fields||{},j=(c=f.value)===null||c===void 0?void 0:c.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=ve(((d=j==null?void 0:j.values)===null||d===void 0?void 0:d.length)||0,((m=C==null?void 0:C.values)===null||m===void 0?void 0:m.length)||0);return P!==0?P:Ux(j,C)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Al.mapValue&&a===Al.mapValue)return 0;if(o===Al.mapValue)return 1;if(a===Al.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let f=0;f<u.length&&f<m.length;++f){const g=ve(u[f],m[f]);if(g!==0)return g;const j=qi(c[u[f]],d[m[f]]);if(j!==0)return j}return ve(u.length,m.length)}(t.mapValue,e.mapValue);default:throw se()}}function qx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const r=es(t),n=es(e),i=ve(r.seconds,n.seconds);return i!==0?i:ve(r.nanos,n.nanos)}function Ux(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const o=qi(r[i],n[i]);if(o)return o}return ve(r.length,n.length)}function Ui(t){return pm(t)}function pm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=es(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Vs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return te.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const o of r.values||[])i?i=!1:n+=",",n+=pm(o);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of n)o?o=!1:i+=",",i+=`${a}:${pm(r.fields[a])}`;return i+"}"}(t.mapValue):se()}function zx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gm(t){return!!t&&"integerValue"in t}function ep(t){return!!t&&"arrayValue"in t}function Bx(t){return!!t&&"nullValue"in t}function Hx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zl(t){return!!t&&"mapValue"in t}function HC(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Go(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Go(t.arrayValue.values[r]);return e}return Object.assign({},t)}function WC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.value=e}static empty(){return new Ft({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Zl(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(r)}setAll(e){let r=it.emptyPath(),n={},i=[];e.forEach((a,c)=>{if(!r.isImmediateParentOf(c)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=c.popLast()}a?n[c.lastSegment()]=Go(a):i.push(c.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,n,i)}delete(e){const r=this.field(e.popLast());Zl(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Br(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Zl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){Ks(r,(i,o)=>e[i]=o);for(const i of n)delete e[i]}clone(){return new Ft(Go(this.value))}}function x_(t){const e=[];return Ks(t.fields,(r,n)=>{const i=new it([r]);if(Zl(n)){const o=x_(n.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Jt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,r,n,i,o,a,c){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new jt(e,0,ie.min(),ie.min(),ie.min(),Ft.empty(),0)}static newFoundDocument(e,r,n,i){return new jt(e,1,r,ie.min(),n,i,0)}static newNoDocument(e,r){return new jt(e,2,r,ie.min(),ie.min(),Ft.empty(),0)}static newUnknownDocument(e,r){return new jt(e,3,r,ie.min(),ie.min(),Ft.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ft.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ft.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,r){this.position=e,this.inclusive=r}}function Wx(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?n=te.comparator(te.fromName(a.referenceValue),r.key):n=qi(a,r.data.field(o.field)),o.dir==="desc"&&(n*=-1),n!==0)break}return n}function Gx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Br(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,r="asc"){this.field=e,this.dir=r}}function GC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y_=class{};class We extends y_{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new KC(e,r,n):r==="array-contains"?new JC(e,n):r==="in"?new XC(e,n):r==="not-in"?new ZC(e,n):r==="array-contains-any"?new eA(e,n):new We(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new QC(e,n):new YC(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(qi(r,this.value)):r!==null&&Os(this.value)===Os(r)&&this.matchesComparison(qi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends y_{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new kr(e,r)}matches(e){return v_(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function v_(t){return t.op==="and"}function b_(t){return $C(t)&&v_(t)}function $C(t){for(const e of t.filters)if(e instanceof kr)return!1;return!0}function xm(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Ui(t.value);if(b_(t))return t.filters.map(e=>xm(e)).join(",");{const e=t.filters.map(r=>xm(r)).join(",");return`${t.op}(${e})`}}function w_(t,e){return t instanceof We?function(n,i){return i instanceof We&&n.op===i.op&&n.field.isEqual(i.field)&&Br(n.value,i.value)}(t,e):t instanceof kr?function(n,i){return i instanceof kr&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((o,a,c)=>o&&w_(a,i.filters[c]),!0):!1}(t,e):void se()}function __(t){return t instanceof We?function(r){return`${r.field.canonicalString()} ${r.op} ${Ui(r.value)}`}(t):t instanceof kr?function(r){return r.op.toString()+" {"+r.getFilters().map(__).join(" ,")+"}"}(t):"Filter"}class KC extends We{constructor(e,r,n){super(e,r,n),this.key=te.fromName(n.referenceValue)}matches(e){const r=te.comparator(e.key,this.key);return this.matchesComparison(r)}}class QC extends We{constructor(e,r){super(e,"in",r),this.keys=j_("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class YC extends We{constructor(e,r){super(e,"not-in",r),this.keys=j_("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function j_(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>te.fromName(n.referenceValue))}class JC extends We{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ep(r)&&_a(r.arrayValue,this.value)}}class XC extends We{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&_a(this.value.arrayValue,r)}}class ZC extends We{constructor(e,r){super(e,"not-in",r)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!_a(this.value.arrayValue,r)}}class eA extends We{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ep(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>_a(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,r=null,n=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function $x(t,e=null,r=[],n=[],i=null,o=null,a=null){return new tA(t,e,r,n,i,o,a)}function tp(t){const e=oe(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>xm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(o){return o.field.canonicalString()+o.dir}(n)).join(","),bu(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Ui(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Ui(n)).join(",")),e.ue=r}return e.ue}function rp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!GC(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!w_(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gx(t.startAt,e.startAt)&&Gx(t.endAt,e.endAt)}function ym(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,r=null,n=[],i=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function rA(t,e,r,n,i,o,a,c){return new Xi(t,e,r,n,i,o,a,c)}function np(t){return new Xi(t)}function Kx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N_(t){return t.collectionGroup!==null}function $o(t){const e=oe(t);if(e.ce===null){e.ce=[];const r=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),r.add(o.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new at(it.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ja(o,n))}),r.has(it.keyField().canonicalString())||e.ce.push(new ja(it.keyField(),n))}return e.ce}function qr(t){const e=oe(t);return e.le||(e.le=nA(e,$o(t))),e.le}function nA(t,e){if(t.limitType==="F")return $x(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new ja(i.field,o)});const r=t.endAt?new Uc(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Uc(t.startAt.position,t.startAt.inclusive):null;return $x(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function vm(t,e){const r=t.filters.concat([e]);return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function zc(t,e,r){return new Xi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function wu(t,e){return rp(qr(t),qr(e))&&t.limitType===e.limitType}function E_(t){return`${tp(qr(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>__(i)).join(", ")}]`),bu(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Ui(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Ui(i)).join(",")),`Target(${n})`}(qr(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(n,i){const o=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(o):te.isDocumentKey(n.path)?n.path.isEqual(o):n.path.isImmediateParentOf(o)}(t,e)&&function(n,i){for(const o of $o(n))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const o of n.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(a,c,u){const d=Wx(a,c,u);return a.inclusive?d<=0:d<0}(n.startAt,$o(n),i)||n.endAt&&!function(a,c,u){const d=Wx(a,c,u);return a.inclusive?d>=0:d>0}(n.endAt,$o(n),i))}(t,e)}function sA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function S_(t){return(e,r)=>{let n=!1;for(const i of $o(t)){const o=iA(i,e,r);if(o!==0)return o;n=n||i.field.isKeyField()}return 0}}function iA(t,e,r){const n=t.field.isKeyField()?te.comparator(e.key,r.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?qi(u,d):se()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,o]of n)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(r,n)=>{for(const[i,o]of n)e(i,o)})}isEmpty(){return p_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=new Le(te.comparator);function xn(){return oA}const T_=new Le(te.comparator);function Ro(...t){let e=T_;for(const r of t)e=e.insert(r.key,r);return e}function I_(t){let e=T_;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function ws(){return Ko()}function k_(){return Ko()}function Ko(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const aA=new Le(te.comparator),lA=new at(te.comparator);function he(...t){let e=lA;for(const r of t)e=e.add(r);return e}const cA=new at(ve);function uA(){return cA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function C_(t){return{integerValue:""+t}}function dA(t,e){return UC(e)?C_(e):sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this._=void 0}}function hA(t,e,r){return t instanceof Na?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Xf(o)&&(o=Zf(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(r,e):t instanceof Ea?P_(t,e):t instanceof Sa?R_(t,e):function(i,o){const a=A_(i,o),c=Qx(a)+Qx(i.Pe);return gm(a)&&gm(i.Pe)?C_(c):sp(i.serializer,c)}(t,e)}function mA(t,e,r){return t instanceof Ea?P_(t,e):t instanceof Sa?R_(t,e):r}function A_(t,e){return t instanceof Bc?function(n){return gm(n)||function(o){return!!o&&"doubleValue"in o}(n)}(e)?e:{integerValue:0}:null}class Na extends ju{}class Ea extends ju{constructor(e){super(),this.elements=e}}function P_(t,e){const r=D_(e);for(const n of t.elements)r.some(i=>Br(i,n))||r.push(n);return{arrayValue:{values:r}}}class Sa extends ju{constructor(e){super(),this.elements=e}}function R_(t,e){let r=D_(e);for(const n of t.elements)r=r.filter(i=>!Br(i,n));return{arrayValue:{values:r}}}class Bc extends ju{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Qx(t){return Fe(t.integerValue||t.doubleValue)}function D_(t){return ep(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,r){this.field=e,this.transform=r}}function pA(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Ea&&i instanceof Ea||n instanceof Sa&&i instanceof Sa?Fi(n.elements,i.elements,Br):n instanceof Bc&&i instanceof Bc?Br(n.Pe,i.Pe):n instanceof Na&&i instanceof Na}(t.transform,e.transform)}class gA{constructor(e,r){this.version=e,this.transformResults=r}}class hr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ec(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nu{}function L_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ip(t.key,hr.none()):new Ha(t.key,t.data,hr.none());{const r=t.data,n=Ft.empty();let i=new at(it.comparator);for(let o of e.fields)if(!i.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?n.delete(o):n.set(o,a),i=i.add(o)}return new os(t.key,n,new Jt(i.toArray()),hr.none())}}function xA(t,e,r){t instanceof Ha?function(i,o,a){const c=i.value.clone(),u=Jx(i.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,r):t instanceof os?function(i,o,a){if(!ec(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=Jx(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(M_(i)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function Qo(t,e,r,n){return t instanceof Ha?function(o,a,c,u){if(!ec(o.precondition,a))return c;const d=o.value.clone(),m=Xx(o.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof os?function(o,a,c,u){if(!ec(o.precondition,a))return c;const d=Xx(o.fieldTransforms,u,a),m=a.data;return m.setAll(M_(o)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(o,a,c){return ec(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,r)}function yA(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),o=A_(n.transform,i||null);o!=null&&(r===null&&(r=Ft.empty()),r.set(n.field,o))}return r||null}function Yx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Fi(n,i,(o,a)=>pA(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ha extends Nu{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends Nu{constructor(e,r,n,i,o=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function M_(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Jx(t,e,r){const n=new Map;_e(t.length===r.length);for(let i=0;i<r.length;i++){const o=t[i],a=o.transform,c=e.data.field(o.field);n.set(o.field,mA(a,c,r[i]))}return n}function Xx(t,e,r){const n=new Map;for(const i of t){const o=i.transform,a=r.data.field(i.field);n.set(i.field,hA(o,a,e))}return n}class ip extends Nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends Nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&xA(o,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Qo(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Qo(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=k_();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=r.has(i.key)?null:c;const u=L_(a,c);u!==null&&n.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),he())}isEqual(e){return this.batchId===e.batchId&&Fi(this.mutations,e.mutations,(r,n)=>Yx(r,n))&&Fi(this.baseMutations,e.baseMutations,(r,n)=>Yx(r,n))}}class op{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){_e(e.mutations.length===n.length);let i=function(){return aA}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new op(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,ge;function jA(t){switch(t){default:return se();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function V_(t){if(t===void 0)return gn("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return se()}}(ge=ze||(ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Es([4294967295,4294967295],0);function Zx(t){const e=NA().encode(t),r=new o_;return r.update(e),new Uint8Array(r.digest())}function ey(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Es([r,n],0),new Es([i,o],0)]}class ap{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new Do(`Invalid padding: ${r}`);if(n<0)throw new Do(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Do(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new Do(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Es.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(Es.fromNumber(n)));return i.compare(EA)===1&&(i=new Es([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Zx(e),[n,i]=ey(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);if(!this.de(a))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new ap(o,i,r);return n.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const r=Zx(e),[n,i]=ey(r);for(let o=0;o<this.hashCount;o++){const a=this.Ee(n,i,o);this.Ae(a)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class Do extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,r,n,i,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Wa.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Eu(ie.min(),i,new Le(ve),xn(),he())}}class Wa{constructor(e,r,n,i,o){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Wa(n,r,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class O_{constructor(e,r){this.targetId=e,this.me=r}}class F_{constructor(e,r,n=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class ty{constructor(){this.fe=0,this.ge=ny(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=he(),r=he(),n=he();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:se()}}),new Wa(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=ny()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SA{constructor(e){this.Le=e,this.Be=new Map,this.ke=xn(),this.qe=ry(),this.Qe=new Le(ve)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:se()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const o=i.target;if(ym(o))if(n===0){const a=new te(o.path);this.Ue(r,a,jt.newNoDocument(a,ie.min()))}else _e(n===1);else{const a=this.Ye(r);if(a!==n){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:o=0}=r;let a,c;try{a=Vs(n).toUint8Array()}catch(u){if(u instanceof g_)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ap(a,i,o)}catch(u){return Oi(u instanceof Do?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(r,o,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&ym(c.target)){const u=new te(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,jt.newNoDocument(u,e))}o.be&&(r.set(a,o.ve()),o.Ce())}});let n=he();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(n=n.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new Eu(e,r,this.Qe,this.ke,n);return this.ke=xn(),this.qe=ry(),this.Qe=new Le(ve),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new ty,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new at(ve),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||X("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ty),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function ry(){return new Le(te.comparator)}function ny(){return new Le(te.comparator)}const TA={asc:"ASCENDING",desc:"DESCENDING"},IA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kA={and:"AND",or:"OR"};class CA{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function bm(t,e){return t.useProto3Json||bu(e)?e:{value:e}}function Hc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function q_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AA(t,e){return Hc(t,e.toTimestamp())}function Ur(t){return _e(!!t),ie.fromTimestamp(function(r){const n=es(r);return new Je(n.seconds,n.nanos)}(t))}function lp(t,e){return wm(t,e).canonicalString()}function wm(t,e){const r=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function U_(t){const e=Se.fromString(t);return _e(G_(e)),e}function _m(t,e){return lp(t.databaseId,e.path)}function Od(t,e){const r=U_(e);if(r.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new te(B_(r))}function z_(t,e){return lp(t.databaseId,e)}function PA(t){const e=U_(t);return e.length===4?Se.emptyPath():B_(e)}function jm(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function B_(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sy(t,e,r){return{name:_m(t,e),fields:r.value.mapValue.fields}}function RA(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(_e(m===void 0||typeof m=="string"),ct.fromBase64String(m||"")):(_e(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ct.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?F.UNKNOWN:V_(d.code);return new K(m,d.message||"")}(a);r=new F_(n,i,o,c||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=Od(t,n.document.name),o=Ur(n.document.updateTime),a=n.document.createTime?Ur(n.document.createTime):ie.min(),c=new Ft({mapValue:{fields:n.document.fields}}),u=jt.newFoundDocument(i,o,a,c),d=n.targetIds||[],m=n.removedTargetIds||[];r=new tc(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=Od(t,n.document),o=n.readTime?Ur(n.readTime):ie.min(),a=jt.newNoDocument(i,o),c=n.removedTargetIds||[];r=new tc([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=Od(t,n.document),o=n.removedTargetIds||[];r=new tc([],o,i,null)}else{if(!("filter"in e))return se();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:o}=n,a=new _A(i,o),c=n.targetId;r=new O_(c,a)}}return r}function DA(t,e){let r;if(e instanceof Ha)r={update:sy(t,e.key,e.value)};else if(e instanceof ip)r={delete:_m(t,e.key)};else if(e instanceof os)r={update:sy(t,e.key,e.data),updateMask:BA(e.fieldMask)};else{if(!(e instanceof vA))return se();r={verify:_m(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(o,a){const c=a.transform;if(c instanceof Na)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ea)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Sa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Bc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw se()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:AA(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:se()}(t,e.precondition)),r}function LA(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(r=>function(i,o){let a=i.updateTime?Ur(i.updateTime):Ur(o);return a.isEqual(ie.min())&&(a=Ur(o)),new gA(a,i.transformResults||[])}(r,e))):[]}function MA(t,e){return{documents:[z_(t,e.path)]}}function VA(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=z_(t,i);const o=function(d){if(d.length!==0)return W_(kr.create(d,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:si(g.field),direction:qA(g.dir)}}(m))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const c=bm(t,e.limit);return c!==null&&(r.structuredQuery.limit=c),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:r,parent:i}}function OA(t){let e=PA(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){_e(n===1);const m=r.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];r.where&&(o=function(f){const g=H_(f);return g instanceof kr&&b_(g)?g.getFilters():[g]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(g=>function(C){return new ja(ii(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(r.orderBy));let c=null;r.limit&&(c=function(f){let g;return g=typeof f=="object"?f.value:f,bu(g)?null:g}(r.limit));let u=null;r.startAt&&(u=function(f){const g=!!f.before,j=f.values||[];return new Uc(j,g)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const g=!f.before,j=f.values||[];return new Uc(j,g)}(r.endAt)),rA(e,i,a,o,c,"F",u,d)}function FA(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function H_(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ii(r.unaryFilter.field);return We.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=ii(r.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ii(r.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ii(r.unaryFilter.field);return We.create(a,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(r){return We.create(ii(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return kr.create(r.compositeFilter.filters.map(n=>H_(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(r.compositeFilter.op))}(t):se()}function qA(t){return TA[t]}function UA(t){return IA[t]}function zA(t){return kA[t]}function si(t){return{fieldPath:t.canonicalString()}}function ii(t){return it.fromServerFormat(t.fieldPath)}function W_(t){return t instanceof We?function(r){if(r.op==="=="){if(Hx(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NAN"}};if(Bx(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Hx(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NOT_NAN"}};if(Bx(r.value))return{unaryFilter:{field:si(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(r.field),op:UA(r.op),value:r.value}}}(t):t instanceof kr?function(r){const n=r.getFilters().map(i=>W_(i));return n.length===1?n[0]:{compositeFilter:{op:zA(r.op),filters:n}}}(t):se()}function BA(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function G_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,r,n,i,o=ie.min(),a=ie.min(),c=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Vn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.ct=e}}function WA(t){const e=OA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.un=new $A}addToCollectionParentIndex(e,r){return this.un.add(r),z.resolve()}getCollectionParents(e,r){return z.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return z.resolve()}deleteFieldIndex(e,r){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,r){return z.resolve()}getDocumentsMatchingTarget(e,r){return z.resolve(null)}getIndexType(e,r){return z.resolve(0)}getFieldIndexes(e,r){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,r){return z.resolve(Zn.min())}getMinOffsetFromCollectionGroup(e,r){return z.resolve(Zn.min())}updateCollectionGroup(e,r,n){return z.resolve()}updateIndexEntries(e,r){return z.resolve()}}class $A{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new at(Se.comparator),o=!i.has(n);return this.index[r]=i.add(n),o}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new at(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new zi(0)}static kn(){return new zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.changes=new Zi(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?z.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&Qo(n.mutation,i,Jt.empty(),Je.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,he()).next(()=>n))}getLocalViewOfDocuments(e,r,n=he()){const i=ws();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(o=>{let a=Ro();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=ws();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,he()))}populateOverlays(e,r,n){const i=[];return n.forEach(o=>{r.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{r.set(a,c)})})}computeViews(e,r,n,i){let o=xn();const a=Ko(),c=function(){return Ko()}();return r.forEach((u,d)=>{const m=n.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof os)?o=o.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),Qo(m.mutation,d,m.mutation.getFieldMask(),Je.now())):a.set(d.key,Jt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>a.set(d,m)),r.forEach((d,m)=>{var f;return c.set(d,new QA(m,(f=a.get(d))!==null&&f!==void 0?f:null))}),c))}recalculateAndSaveOverlays(e,r){const n=Ko();let i=new Le((a,c)=>a-c),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let m=n.get(u)||Jt.empty();m=c.applyToLocalView(d,m),n.set(u,m);const f=(i.get(c.batchId)||he()).add(u);i=i.insert(c.batchId,f)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,f=k_();m.forEach(g=>{if(!o.has(g)){const j=L_(r.get(g),n.get(g));j!==null&&f.set(g,j),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return z.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):N_(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-o.size):z.resolve(ws());let c=-1,u=o;return a.next(d=>z.forEach(d,(m,f)=>(c<f.largestBatchId&&(c=f.largestBatchId),o.get(m)?z.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,he())).next(m=>({batchId:c,changes:I_(m)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new te(r)).next(n=>{let i=Ro();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const o=r.collectionGroup;let a=Ro();return this.indexManager.getCollectionParents(e,o).next(c=>z.forEach(c,u=>{const d=function(f,g){return new Xi(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(m=>{m.forEach((f,g)=>{a=a.insert(f,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,o,i))).next(a=>{o.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,jt.newInvalidDocument(m)))});let c=Ro();return a.forEach((u,d)=>{const m=o.get(u);m!==void 0&&Qo(m.mutation,d,Jt.empty(),Je.now()),_u(r,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return z.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(r)),z.resolve()}getNamedQuery(e,r){return z.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:WA(i.bundledQuery),readTime:Ur(i.readTime)}}(r)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.overlays=new Le(te.comparator),this.Ir=new Map}getOverlay(e,r){return z.resolve(this.overlays.get(r))}getOverlays(e,r){const n=ws();return z.forEach(r,i=>this.getOverlay(e,i).next(o=>{o!==null&&n.set(i,o)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,o)=>{this.ht(e,r,o)}),z.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(n)),z.resolve()}getOverlaysForCollection(e,r,n){const i=ws(),o=r.length+1,a=new te(r.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>n&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let o=new Le((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let m=o.get(d.largestBatchId);m===null&&(m=ws(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=ws(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return z.resolve(c)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new wA(r,n));let o=this.Ir.get(r);o===void 0&&(o=he(),this.Ir.set(r,o)),this.Ir.set(r,o.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.Tr=new at(Xe.Er),this.dr=new at(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Xe(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Xe(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new te(new Se([])),n=new Xe(r,e),i=new Xe(r,e+1),o=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new te(new Se([])),n=new Xe(r,e),i=new Xe(r,e+1);let o=he();return this.dr.forEachInRange([n,i],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new Xe(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Xe{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return te.comparator(e.key,r.key)||ve(e.wr,r.wr)}static Ar(e,r){return ve(e.wr,r.wr)||te.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new at(Xe.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new bA(o,r,n,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new Xe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(a)}lookupMutationBatch(e,r){return z.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),o=i<0?0:i;return z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Xe(r,0),i=new Xe(r,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([n,i],a=>{const c=this.Dr(a.wr);o.push(c)}),z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new at(ve);return r.forEach(i=>{const o=new Xe(i,0),a=new Xe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{n=n.add(c.wr)})}),z.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let o=n;te.isDocumentKey(o)||(o=o.child(""));const a=new Xe(new te(o),0);let c=new at(ve);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},a),z.resolve(this.Cr(c))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){_e(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return z.forEach(r.mutations,i=>{const o=new Xe(i.key,r.batchId);return n=n.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Xe(r,0),i=this.br.firstAfterOrEqual(n);return z.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.Mr=e,this.docs=function(){return new Le(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),o=i?i.size:0,a=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return z.resolve(n?n.document.mutableCopy():jt.newInvalidDocument(r))}getEntries(e,r){let n=xn();return r.forEach(i=>{const o=this.docs.get(i);n=n.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))}),z.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let o=xn();const a=r.path,c=new te(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||VC(MC(m),n)<=0||(i.has(m.key)||_u(r,m))&&(o=o.insert(m.key,m.mutableCopy()))}return z.resolve(o)}getAllFromCollectionGroup(e,r,n,i){se()}Or(e,r){return z.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new rP(this)}getSize(e){return z.resolve(this.size)}}class rP extends KA{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),z.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.persistence=e,this.Nr=new Zi(r=>tp(r),rp),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cp,this.targetCount=0,this.kr=zi.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),z.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new zi(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,z.resolve()}updateTargetData(e,r){return this.Kn(r),z.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,r,n){let i=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=r&&n.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),z.waitFor(o).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return z.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),z.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,o=[];return i&&r.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),z.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),z.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return z.resolve(n)}containsKey(e,r){return z.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Jf(0),this.Kr=!1,this.Kr=!0,this.$r=new ZA,this.referenceDelegate=e(this),this.Ur=new nP(this),this.indexManager=new GA,this.remoteDocumentCache=function(i){return new tP(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new HA(r),this.Gr=new JA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new XA,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new eP(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){X("MemoryPersistence","Starting transaction:",e);const i=new iP(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,r){return z.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class iP extends FC{constructor(e){super(),this.currentSequenceNumber=e}}class up{constructor(e){this.persistence=e,this.Jr=new cp,this.Yr=null}static Zr(e){return new up(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),z.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),z.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),z.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,n=>{const i=te.fromPath(n);return this.ei(e,i).next(o=>{o||r.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return z.or([()=>z.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=he(),i=he();for(const o of r.docChanges)switch(o.type){case 0:n=n.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new dp(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BS()?8:qC(St())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const o={result:null};return this.Yi(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,r,i,n).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new oP;return this.Xi(e,r,a).next(c=>{if(o.result=c,this.zi)return this.es(e,r,a,c.size)})}).next(()=>o.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(Eo()<=pe.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",ni(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(Eo()<=pe.DEBUG&&X("QueryEngine","Query:",ni(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(Eo()<=pe.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",ni(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(r))):z.resolve())}Yi(e,r){if(Kx(r))return z.resolve(null);let n=qr(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=zc(r,null,"F"),n=qr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(o=>{const a=he(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(r,c);return this.ns(r,d,a,u.readTime)?this.Yi(e,zc(r,null,"F")):this.rs(e,d,r,u)}))})))}Zi(e,r,n,i){return Kx(r)||i.isEqual(ie.min())?z.resolve(null):this.Ji.getDocuments(e,n).next(o=>{const a=this.ts(r,o);return this.ns(r,a,n,i)?z.resolve(null):(Eo()<=pe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ni(r)),this.rs(e,a,r,LC(i,-1)).next(c=>c))})}ts(e,r){let n=new at(S_(e));return r.forEach((i,o)=>{_u(e,o)&&(n=n.add(o))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,r,n){return Eo()<=pe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",ni(r)),this.Ji.getDocumentsMatchingQuery(e,r,Zn.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new Le(ve),this._s=new Zi(o=>tp(o),rp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function cP(t,e,r,n){return new lP(t,e,r,n)}async function $_(t,e){const r=oe(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(o=>(i=o,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(o=>{const a=[],c=[];let u=he();for(const d of i){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return r.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function uP(t,e){const r=oe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),o=r.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const f=d.batch,g=f.keys();let j=z.resolve();return g.forEach(C=>{j=j.next(()=>m.getEntry(u,C)).next(P=>{const R=d.docVersions.get(C);_e(R!==null),P.version.compareTo(R)<0&&(f.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),m.addEntry(P)))})}),j.next(()=>c.mutationQueue.removeMutationBatch(u,f))}(r,n,e,o).next(()=>o.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(c){let u=he();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function K_(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function dP(t,e){const r=oe(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const c=[];e.targetChanges.forEach((m,f)=>{const g=i.get(f);if(!g)return;c.push(r.Ur.removeMatchingKeys(o,m.removedDocuments,f).next(()=>r.Ur.addMatchingKeys(o,m.addedDocuments,f)));let j=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?j=j.withResumeToken(ct.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):m.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(m.resumeToken,n)),i=i.insert(f,j),function(P,R,_){return P.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(g,j,m)&&c.push(r.Ur.updateTargetData(o,j))});let u=xn(),d=he();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(r.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(hP(o,a,e.documentUpdates).next(m=>{u=m.Ps,d=m.Is})),!n.isEqual(ie.min())){const m=r.Ur.getLastRemoteSnapshotVersion(o).next(f=>r.Ur.setTargetsMetadata(o,o.currentSequenceNumber,n));c.push(m)}return z.waitFor(c).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(r.os=i,o))}function hP(t,e,r){let n=he(),i=he();return r.forEach(o=>n=n.add(o)),e.getEntries(t,n).next(o=>{let a=xn();return r.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function mP(t,e){const r=oe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function fP(t,e){const r=oe(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(o=>o?(i=o,z.resolve(i)):r.Ur.allocateTargetId(n).next(a=>(i=new Vn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Nm(t,e,r){const n=oe(t),i=n.os.get(e),o=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",o,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Ba(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function iy(t,e,r){const n=oe(t);let i=ie.min(),o=he();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const f=oe(u),g=f._s.get(m);return g!==void 0?z.resolve(f.os.get(g)):f.Ur.getTargetData(d,m)}(n,a,qr(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,r?i:ie.min(),r?o:he())).next(c=>(pP(n,sA(e),c),{documents:c,Ts:o})))}function pP(t,e,r){let n=t.us.get(e)||ie.min();r.forEach((i,o)=>{o.readTime.compareTo(n)>0&&(n=o.readTime)}),t.us.set(e,n)}class oy{constructor(){this.activeTargetIds=uA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gP{constructor(){this.so=new oy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oy,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pl=null;function Fd(){return Pl===null?Pl=function(){return 268435456+Math.round(2147483648*Math.random())}():Pl++,"0x"+Pl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class bP extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(r,n,i,o,a){const c=Fd(),u=this.xo(r,n.toUriEncodedString());X("RestConnection",`Sending RPC '${r}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,a),this.No(r,u,d,i).then(m=>(X("RestConnection",`Received RPC '${r}' ${c}: `,m),m),m=>{throw Oi("RestConnection",`RPC '${r}' ${c} failed with error: `,m,"url: ",u,"request:",i),m})}Lo(r,n,i,o,a,c){return this.Mo(r,n,i,o,a)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ji}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,a)=>r[a]=o),i&&i.headers.forEach((o,a)=>r[a]=o)}xo(r,n){const i=yP[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const o=Fd();return new Promise((a,c)=>{const u=new a_;u.setWithCredentials(!0),u.listenOnce(c_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Xl.NO_ERROR:const m=u.getResponseJson();X(vt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Xl.TIMEOUT:X(vt,`RPC '${e}' ${o} timed out`),c(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case Xl.HTTP_ERROR:const f=u.getStatus();if(X(vt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const j=g==null?void 0:g.error;if(j&&j.status&&j.message){const C=function(R){const _=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(j.status);c(new K(C,j.message))}else c(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(F.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{X(vt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);X(vt,`RPC '${e}' ${o} sending request:`,i),u.send(r,"POST",d,n,15)})}Bo(e,r,n){const i=Fd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=h_(),c=d_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new l_({})),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const m=o.join("");X(vt,`Creating RPC '${e}' stream ${i}: ${m}`,u);const f=a.createWebChannel(m,u);let g=!1,j=!1;const C=new vP({Io:R=>{j?X(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(X(vt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),X(vt,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},To:()=>f.close()}),P=(R,_,w)=>{R.listen(_,T=>{try{w(T)}catch(D){setTimeout(()=>{throw D},0)}})};return P(f,Po.EventType.OPEN,()=>{j||(X(vt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),P(f,Po.EventType.CLOSE,()=>{j||(j=!0,X(vt,`RPC '${e}' stream ${i} transport closed`),C.So())}),P(f,Po.EventType.ERROR,R=>{j||(j=!0,Oi(vt,`RPC '${e}' stream ${i} transport errored:`,R),C.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),P(f,Po.EventType.MESSAGE,R=>{var _;if(!j){const w=R.data[0];_e(!!w);const T=w,D=T.error||((_=T[0])===null||_===void 0?void 0:_.error);if(D){X(vt,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let V=function(y){const v=ze[y];if(v!==void 0)return V_(v)}(L),E=D.message;V===void 0&&(V=F.INTERNAL,E="Unknown error status: "+L+" with message "+D.message),j=!0,C.So(new K(V,E)),f.close()}else X(vt,`RPC '${e}' stream ${i} received:`,w),C.bo(w)}}),P(c,u_.STAT_EVENT,R=>{R.stat===fm.PROXY?X(vt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===fm.NOPROXY&&X(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(t){return new CA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(e,r,n=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,r,n,i,o,a,c,u){this.ui=e,this.Ho=n,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Q_(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===F.RESOURCE_EXHAUSTED?(gn(r.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new K(F.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wP extends Y_{constructor(e,r,n,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=RA(this.serializer,e),n=function(o){if(!("targetChange"in o))return ie.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?Ur(a.readTime):ie.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=jm(this.serializer),r.addTarget=function(o,a){let c;const u=a.target;if(c=ym(u)?{documents:MA(o,u)}:{query:VA(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=q_(o,a.resumeToken);const d=bm(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ie.min())>0){c.readTime=Hc(o,a.snapshotVersion.toTimestamp());const d=bm(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const n=FA(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=jm(this.serializer),r.removeTarget=e,this.a_(r)}}class _P extends Y_{constructor(e,r,n,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=LA(e.writeResults,e.commitTime),n=Ur(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=jm(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>DA(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,wm(r,n),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}Lo(e,r,n,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,wm(r,n),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(gn(r),this.D_=!1):X("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,r,n,i,o){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{n.enqueueAndForget(async()=>{Qs(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.L_.add(4),await Ga(d),d.q_.set("Unknown"),d.L_.delete(4),await Tu(d)}(this))})}),this.q_=new NP(n,i)}}async function Tu(t){if(Qs(t))for(const e of t.B_)await e(!0)}async function Ga(t){for(const e of t.B_)await e(!1)}function J_(t,e){const r=oe(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),pp(r)?fp(r):eo(r).r_()&&mp(r,e))}function hp(t,e){const r=oe(t),n=eo(r);r.N_.delete(e),n.r_()&&X_(r,e),r.N_.size===0&&(n.r_()?n.o_():Qs(r)&&r.q_.set("Unknown"))}function mp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}eo(t).A_(e)}function X_(t,e){t.Q_.xe(e),eo(t).R_(e)}function fp(t){t.Q_=new SA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.q_.v_()}function pp(t){return Qs(t)&&!eo(t).n_()&&t.N_.size>0}function Qs(t){return oe(t).L_.size===0}function Z_(t){t.Q_=void 0}async function SP(t){t.q_.set("Online")}async function TP(t){t.N_.forEach((e,r)=>{mp(t,e)})}async function IP(t,e){Z_(t),pp(t)?(t.q_.M_(e),fp(t)):t.q_.set("Unknown")}async function kP(t,e,r){if(t.q_.set("Online"),e instanceof F_&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(n){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Wc(t,n)}else if(e instanceof tc?t.Q_.Ke(e):e instanceof O_?t.Q_.He(e):t.Q_.We(e),!r.isEqual(ie.min()))try{const n=await K_(t.localStore);r.compareTo(n)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.N_.get(d);m&&o.N_.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(ct.EMPTY_BYTE_STRING,m.snapshotVersion)),X_(o,u);const f=new Vn(m.target,u,d,m.sequenceNumber);mp(o,f)}),o.remoteSyncer.applyRemoteEvent(c)}(t,r)}catch(n){X("RemoteStore","Failed to raise snapshot:",n),await Wc(t,n)}}async function Wc(t,e,r){if(!Ba(e))throw e;t.L_.add(1),await Ga(t),t.q_.set("Offline"),r||(r=()=>K_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Tu(t)})}function e1(t,e){return e().catch(r=>Wc(t,r,e))}async function Iu(t){const e=oe(t),r=ts(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;CP(e);)try{const i=await mP(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,AP(e,i)}catch(i){await Wc(e,i)}t1(e)&&r1(e)}function CP(t){return Qs(t)&&t.O_.length<10}function AP(t,e){t.O_.push(e);const r=ts(t);r.r_()&&r.V_&&r.m_(e.mutations)}function t1(t){return Qs(t)&&!ts(t).n_()&&t.O_.length>0}function r1(t){ts(t).start()}async function PP(t){ts(t).p_()}async function RP(t){const e=ts(t);for(const r of t.O_)e.m_(r.mutations)}async function DP(t,e,r){const n=t.O_.shift(),i=op.from(n,e,r);await e1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Iu(t)}async function LP(t,e){e&&ts(t).V_&&await async function(n,i){if(function(a){return jA(a)&&a!==F.ABORTED}(i.code)){const o=n.O_.shift();ts(n).s_(),await e1(n,()=>n.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Iu(n)}}(t,e),t1(t)&&r1(t)}async function ly(t,e){const r=oe(t);r.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const n=Qs(r);r.L_.add(3),await Ga(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Tu(r)}async function MP(t,e){const r=oe(t);e?(r.L_.delete(2),await Tu(r)):e||(r.L_.add(2),await Ga(r),r.q_.set("Unknown"))}function eo(t){return t.K_||(t.K_=function(r,n,i){const o=oe(r);return o.w_(),new wP(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:SP.bind(null,t),Ro:TP.bind(null,t),mo:IP.bind(null,t),d_:kP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),pp(t)?fp(t):t.q_.set("Unknown")):(await t.K_.stop(),Z_(t))})),t.K_}function ts(t){return t.U_||(t.U_=function(r,n,i){const o=oe(r);return o.w_(),new _P(n,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:PP.bind(null,t),mo:LP.bind(null,t),f_:RP.bind(null,t),g_:DP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Iu(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,r,n,i,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=o,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,o){const a=Date.now()+n,c=new gp(e,r,a,i,o);return c.start(n),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(t,e){if(gn("AsyncQueue",`${e}: ${t}`),Ba(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.comparator=e?(r,n)=>e(r,n)||te.comparator(r.key,n.key):(r,n)=>te.comparator(r.key,n.key),this.keyedMap=Ro(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,o=n.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ii;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this.W_=new Le(te.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class Bi{constructor(e,r,n,i,o,a,c,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,o){const a=[];return r.forEach(c=>{a.push({type:0,doc:c})}),new Bi(e,r,Ii.emptySet(r),a,n,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class OP{constructor(){this.queries=uy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=oe(r),o=i.queries;i.queries=uy(),o.forEach((a,c)=>{for(const u of c.j_)u.onError(n)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function uy(){return new Zi(t=>E_(t),wu)}async function n1(t,e){const r=oe(t);let n=3;const i=e.query;let o=r.queries.get(i);o?!o.H_()&&e.J_()&&(n=2):(o=new VP,n=e.J_()?0:1);try{switch(n){case 0:o.z_=await r.onListen(i,!0);break;case 1:o.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(a){const c=xp(a,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(c)}r.queries.set(i,o),o.j_.push(e),e.Z_(r.onlineState),o.z_&&e.X_(o.z_)&&yp(r)}async function s1(t,e){const r=oe(t),n=e.query;let i=3;const o=r.queries.get(n);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function FP(t,e){const r=oe(t);let n=!1;for(const i of e){const o=i.query,a=r.queries.get(o);if(a){for(const c of a.j_)c.X_(i)&&(n=!0);a.z_=i}}n&&yp(r)}function qP(t,e,r){const n=oe(t),i=n.queries.get(e);if(i)for(const o of i.j_)o.onError(r);n.queries.delete(e)}function yp(t){t.Y_.forEach(e=>{e.next()})}var Em,dy;(dy=Em||(Em={})).ea="default",dy.Cache="cache";class i1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Bi(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=Bi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Em.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.key=e}}class a1{constructor(e){this.key=e}}class UP{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=he(),this.mutatedKeys=he(),this.Aa=S_(e),this.Ra=new Ii(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new cy,i=r?r.Ra:this.Ra;let o=r?r.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,f)=>{const g=i.get(m),j=_u(this.query,f)?f:null,C=!!g&&this.mutatedKeys.has(g.key),P=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let R=!1;g&&j?g.data.isEqual(j.data)?C!==P&&(n.track({type:3,doc:j}),R=!0):this.ga(g,j)||(n.track({type:2,doc:j}),R=!0,(u&&this.Aa(j,u)>0||d&&this.Aa(j,d)<0)&&(c=!0)):!g&&j?(n.track({type:0,doc:j}),R=!0):g&&!j&&(n.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(j?(a=a.add(j),o=P?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),n.track({type:1,doc:m})}return{Ra:a,fa:n,ns:c,mutatedKeys:o}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((m,f)=>function(j,C){const P=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return P(j)-P(C)}(m.type,f.type)||this.Aa(m.doc,f.doc)),this.pa(n),i=i!=null&&i;const c=r&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Bi(this.query,e.Ra,o,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=he(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new a1(n))}),this.da.forEach(n=>{e.has(n)||r.push(new o1(n))}),r}ba(e){this.Ta=e.Ts,this.da=he();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return Bi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class BP{constructor(e){this.key=e,this.va=!1}}class HP{constructor(e,r,n,i,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Zi(c=>E_(c),wu),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(te.comparator),this.Na=new Map,this.La=new cp,this.Ba={},this.ka=new Map,this.qa=zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WP(t,e,r=!0){const n=m1(t);let i;const o=n.Fa.get(e);return o?(n.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await l1(n,e,r,!0),i}async function GP(t,e){const r=m1(t);await l1(r,e,!0,!1)}async function l1(t,e,r,n){const i=await fP(t.localStore,qr(e)),o=i.targetId,a=r?t.sharedClientState.addLocalQueryTarget(o):"not-current";let c;return n&&(c=await $P(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&r&&J_(t.remoteStore,i),c}async function $P(t,e,r,n,i){t.Ka=(f,g,j)=>async function(P,R,_,w){let T=R.view.ma(_);T.ns&&(T=await iy(P.localStore,R.query,!1).then(({documents:E})=>R.view.ma(E,T)));const D=w&&w.targetChanges.get(R.targetId),L=w&&w.targetMismatches.get(R.targetId)!=null,V=R.view.applyChanges(T,P.isPrimaryClient,D,L);return my(P,R.targetId,V.wa),V.snapshot}(t,f,g,j);const o=await iy(t.localStore,e,!0),a=new UP(e,o.Ts),c=a.ma(o.documents),u=Wa.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=a.applyChanges(c,t.isPrimaryClient,u);my(t,r,d.wa);const m=new zP(e,r,a);return t.Fa.set(e,m),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),d.snapshot}async function KP(t,e,r){const n=oe(t),i=n.Fa.get(e),o=n.Ma.get(i.targetId);if(o.length>1)return n.Ma.set(i.targetId,o.filter(a=>!wu(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Nm(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&hp(n.remoteStore,i.targetId),Sm(n,i.targetId)}).catch(za)):(Sm(n,i.targetId),await Nm(n.localStore,i.targetId,!0))}async function QP(t,e){const r=oe(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),hp(r.remoteStore,n.targetId))}async function YP(t,e,r){const n=n4(t);try{const i=await function(a,c){const u=oe(a),d=Je.now(),m=c.reduce((j,C)=>j.add(C.key),he());let f,g;return u.persistence.runTransaction("Locally write mutations","readwrite",j=>{let C=xn(),P=he();return u.cs.getEntries(j,m).next(R=>{C=R,C.forEach((_,w)=>{w.isValidDocument()||(P=P.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(j,C)).next(R=>{f=R;const _=[];for(const w of c){const T=yA(w,f.get(w.key).overlayedDocument);T!=null&&_.push(new os(w.key,T,x_(T.value.mapValue),hr.exists(!0)))}return u.mutationQueue.addMutationBatch(j,d,_,c)}).next(R=>{g=R;const _=R.applyToLocalDocumentSet(f,P);return u.documentOverlayCache.saveOverlays(j,R.batchId,_)})}).then(()=>({batchId:g.batchId,changes:I_(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new Le(ve)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(n,i.batchId,r),await $a(n,i.changes),await Iu(n.remoteStore)}catch(i){const o=xp(i,"Failed to persist write");r.reject(o)}}async function c1(t,e){const r=oe(t);try{const n=await dP(r.localStore,e);e.targetChanges.forEach((i,o)=>{const a=r.Na.get(o);a&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?_e(a.va):i.removedDocuments.size>0&&(_e(a.va),a.va=!1))}),await $a(r,n,e)}catch(n){await za(n)}}function hy(t,e,r){const n=oe(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((o,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=oe(a);u.onlineState=c;let d=!1;u.queries.forEach((m,f)=>{for(const g of f.j_)g.Z_(c)&&(d=!0)}),d&&yp(u)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function JP(t,e,r){const n=oe(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),o=i&&i.key;if(o){let a=new Le(te.comparator);a=a.insert(o,jt.newNoDocument(o,ie.min()));const c=he().add(o),u=new Eu(ie.min(),new Map,new Le(ve),a,c);await c1(n,u),n.Oa=n.Oa.remove(o),n.Na.delete(e),vp(n)}else await Nm(n.localStore,e,!1).then(()=>Sm(n,e,r)).catch(za)}async function XP(t,e){const r=oe(t),n=e.batch.batchId;try{const i=await uP(r.localStore,e);d1(r,n,null),u1(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await $a(r,i)}catch(i){await za(i)}}async function ZP(t,e,r){const n=oe(t);try{const i=await function(a,c){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(f=>(_e(f!==null),m=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(n.localStore,e);d1(n,e,r),u1(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await $a(n,i)}catch(i){await za(i)}}function u1(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function d1(t,e,r){const n=oe(t);let i=n.Ba[n.currentUser.toKey()];if(i){const o=i.get(e);o&&(r?o.reject(r):o.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Sm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||h1(t,n)})}function h1(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(hp(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),vp(t))}function my(t,e,r){for(const n of r)n instanceof o1?(t.La.addReference(n.key,e),e4(t,n)):n instanceof a1?(X("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||h1(t,n.key)):se()}function e4(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(X("SyncEngine","New document in limbo: "+r),t.xa.add(n),vp(t))}function vp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new te(Se.fromString(e)),n=t.qa.next();t.Na.set(n,new BP(r)),t.Oa=t.Oa.insert(r,n),J_(t.remoteStore,new Vn(qr(np(r.path)),n,"TargetPurposeLimboResolution",Jf.oe))}}async function $a(t,e,r){const n=oe(t),i=[],o=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((c,u)=>{a.push(n.Ka(u,e,r).then(d=>{var m;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(m=r==null?void 0:r.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){i.push(d);const f=dp.Wi(u.targetId,d);o.push(f)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(u,d){const m=oe(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>z.forEach(d,g=>z.forEach(g.$i,j=>m.persistence.referenceDelegate.addReference(f,g.targetId,j)).next(()=>z.forEach(g.Ui,j=>m.persistence.referenceDelegate.removeReference(f,g.targetId,j)))))}catch(f){if(!Ba(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(const f of d){const g=f.targetId;if(!f.fromCache){const j=m.os.get(g),C=j.snapshotVersion,P=j.withLastLimboFreeSnapshotVersion(C);m.os=m.os.insert(g,P)}}}(n.localStore,o))}async function t4(t,e){const r=oe(t);if(!r.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const n=await $_(r.localStore,e);r.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new K(F.CANCELLED,a))})}),o.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await $a(r,n.hs)}}function r4(t,e){const r=oe(t),n=r.Na.get(e);if(n&&n.va)return he().add(n.key);{let i=he();const o=r.Ma.get(e);if(!o)return i;for(const a of o){const c=r.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function m1(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=c1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JP.bind(null,e),e.Ca.d_=FP.bind(null,e.eventManager),e.Ca.$a=qP.bind(null,e.eventManager),e}function n4(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZP.bind(null,e),e}class fy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Su(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return cP(this.persistence,new aP,e.initialUser,this.serializer)}createPersistence(e){return new sP(up.Zr,this.serializer)}createSharedClientState(e){return new gP}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class s4{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>hy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=t4.bind(null,this.syncEngine),await MP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OP}()}createDatastore(e){const r=Su(e.databaseInfo.databaseId),n=function(o){return new bP(o)}(e.databaseInfo);return function(o,a,c,u){return new jP(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,o,a,c){return new EP(n,i,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,r=>hy(this.syncEngine,r,0),function(){return ay.D()?new ay:new xP}())}createSyncEngine(e,r){return function(i,o,a,c,u,d,m){const f=new HP(i,o,a,c,u,d);return m&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const o=oe(i);X("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await Ga(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=f_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=xp(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ud(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await $_(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function py(t,e){t.asyncQueue.verifyOperationInProgress();const r=await a4(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>ly(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>ly(e.remoteStore,i)),t._onlineComponents=e}function o4(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function a4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ud(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!o4(r))throw r;Oi("Error using user provided cache. Falling back to memory cache: "+r),await Ud(t,new fy)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await Ud(t,new fy);return t._offlineComponents}async function p1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await py(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await py(t,new s4))),t._onlineComponents}function l4(t){return p1(t).then(e=>e.syncEngine)}async function g1(t){const e=await p1(t),r=e.eventManager;return r.onListen=WP.bind(null,e.syncEngine),r.onUnlisten=KP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=GP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=QP.bind(null,e.syncEngine),r}function c4(t,e,r={}){const n=new ln;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new f1({next:g=>{a.enqueueAndForget(()=>s1(o,f));const j=g.docs.has(c);!j&&g.fromCache?d.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&g.fromCache&&u&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new i1(np(c.path),m,{includeMetadataChanges:!0,_a:!0});return n1(o,f)}(await g1(t),t.asyncQueue,e,r,n)),n.promise}function u4(t,e,r={}){const n=new ln;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new f1({next:g=>{a.enqueueAndForget(()=>s1(o,f)),g.fromCache&&u.source==="server"?d.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),f=new i1(c,m,{includeMetadataChanges:!0,_a:!0});return n1(o,f)}(await g1(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e,r){if(!r)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function d4(t,e,r,n){if(e===!0&&n===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function xy(t){if(!te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yy(t){if(te.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ku(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function Cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=ku(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function h4(t,e){if(e<=0)throw new K(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}d4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cu{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vy(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new SC;switch(n.type){case"firstParty":return new CC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=gy.get(r);n&&(X("ComponentProvider","Removing Datastore"),gy.delete(r),n.terminate())}(this),Promise.resolve()}}function m4(t,e,r,n={}){var i;const o=(t=Cr(t,Cu))._getSettings(),a=`${e}:${r}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),n.mockUserToken){let c,u;if(typeof n.mockUserToken=="string")c=n.mockUserToken,u=bt.MOCK_USER;else{c=OS(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new bt(d)}t._authCredentials=new TC(new m_(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class Rt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}}class Yn extends as{constructor(e,r,n){super(e,r,np(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new te(e))}withConverter(e){return new Yn(this.firestore,e,this._path)}}function Be(t,e,...r){if(t=Ae(t),y1("collection","path",e),t instanceof Cu){const n=Se.fromString(e,...r);return yy(n),new Yn(t,null,n)}{if(!(t instanceof Rt||t instanceof Yn))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Se.fromString(e,...r));return yy(n),new Yn(t.firestore,null,n)}}function Nt(t,e,...r){if(t=Ae(t),arguments.length===1&&(e=f_.newId()),y1("doc","path",e),t instanceof Cu){const n=Se.fromString(e,...r);return xy(n),new Rt(t,null,new te(n))}{if(!(t instanceof Rt||t instanceof Yn))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Se.fromString(e,...r));return xy(n),new Rt(t.firestore,t instanceof Yn?t.converter:null,new te(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Q_(this,"async_queue_retry"),this.Eu=()=>{const r=qd();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const e=qd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const r=qd();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const r=new ln;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ba(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const r=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(n);throw gn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Pu=!1,n))));return this.au=r,r}enqueueAfterDelay(e,r,n){this.du(),this.Tu.indexOf(e)>-1&&(r=0);const i=gp.createAndSchedule(this,e,r,n,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&se()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const r of this.lu)if(r.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const r=this.lu.indexOf(e);this.lu.splice(r,1)}}class Ys extends Cu{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new f4}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||v1(this),this._firestoreClient.terminate()}}function p4(t,e){const r=typeof t=="object"?t:Of(),n=typeof t=="string"?t:"(default)",i=Gs(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const o=MS("firestore");o&&m4(i,...o)}return i}function bp(t){return t._firestoreClient||v1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function v1(t){var e,r,n;const i=t._freezeSettings(),o=function(c,u,d,m){return new BC(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,x1(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new i4(t._authCredentials,t._appCheckCredentials,t._queue,o),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hi(ct.fromBase64String(e))}catch(r){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Hi(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new it(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=/^__.*__$/;class x4{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ha(e,this.data,r,this.fieldTransforms)}}class b1{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new os(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function w1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class jp{constructor(e,r,n,i,o,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Su({path:n,Du:!1});return i.vu(e),i}Cu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Su({path:n,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Gc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(w1(this.wu)&&g4.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class y4{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Su(e)}Nu(e,r,n,i=!1){return new jp({wu:e,methodName:r,Ou:n,path:it.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(t){const e=t._freezeSettings(),r=Su(t._databaseId);return new y4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function _1(t,e,r,n,i,o={}){const a=t.Nu(o.merge||o.mergeFields?2:0,e,r,i);Ep("Data must be an object, but it was:",a,n);const c=j1(n,a);let u,d;if(o.merge)u=new Jt(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const f of o.mergeFields){const g=Tm(e,f,r);if(!a.contains(g))throw new K(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);E1(m,g)||m.push(g)}u=new Jt(m),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new x4(new Ft(c),u,d)}class Du extends Pu{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Du}}class Np extends Pu{_toFieldTransform(e){return new fA(e.path,new Na)}isEqual(e){return e instanceof Np}}function v4(t,e,r,n){const i=t.Nu(1,e,r);Ep("Data must be an object, but it was:",i,n);const o=[],a=Ft.empty();Ks(n,(u,d)=>{const m=Sp(e,u,r);d=Ae(d);const f=i.Cu(m);if(d instanceof Du)o.push(m);else{const g=Ka(d,f);g!=null&&(o.push(m),a.set(m,g))}});const c=new Jt(o);return new b1(a,c,i.fieldTransforms)}function b4(t,e,r,n,i,o){const a=t.Nu(1,e,r),c=[Tm(e,n,r)],u=[i];if(o.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(Tm(e,o[g])),u.push(o[g+1]);const d=[],m=Ft.empty();for(let g=c.length-1;g>=0;--g)if(!E1(d,c[g])){const j=c[g];let C=u[g];C=Ae(C);const P=a.Cu(j);if(C instanceof Du)d.push(j);else{const R=Ka(C,P);R!=null&&(d.push(j),m.set(j,R))}}const f=new Jt(d);return new b1(m,f,a.fieldTransforms)}function w4(t,e,r,n=!1){return Ka(r,t.Nu(n?4:3,e))}function Ka(t,e){if(N1(t=Ae(t)))return Ep("Unsupported field value:",e,t),j1(t,e);if(t instanceof Pu)return function(n,i){if(!w1(i.wu))throw i.Mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${n._methodName}() is not currently supported inside arrays`);const o=n._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,i){const o=[];let a=0;for(const c of n){let u=Ka(c,i.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(n,i){if((n=Ae(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return dA(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const o=Je.fromDate(n);return{timestampValue:Hc(i.serializer,o)}}if(n instanceof Je){const o=new Je(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Hc(i.serializer,o)}}if(n instanceof wp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hi)return{bytesValue:q_(i.serializer,n._byteString)};if(n instanceof Rt){const o=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(o))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:lp(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof _p)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return sp(c.serializer,u)})}}}}}}(n,i);throw i.Mu(`Unsupported field value: ${ku(n)}`)}(t,e)}function j1(t,e){const r={};return p_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(n,i)=>{const o=Ka(i,e.bu(n));o!=null&&(r[n]=o)}),{mapValue:{fields:r}}}function N1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Je||t instanceof wp||t instanceof Hi||t instanceof Rt||t instanceof Pu||t instanceof _p)}function Ep(t,e,r){if(!N1(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=ku(r);throw n==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+n)}}function Tm(t,e,r){if((e=Ae(e))instanceof Au)return e._internalPath;if(typeof e=="string")return Sp(t,e);throw Gc("Field path arguments must be of type string or ",t,!1,void 0,r)}const _4=new RegExp("[~\\*/\\[\\]]");function Sp(t,e,r){if(e.search(_4)>=0)throw Gc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Au(...e.split("."))._internalPath}catch{throw Gc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Gc(t,e,r,n,i){const o=n&&!n.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;r&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${n}`),a&&(u+=` in document ${i}`),u+=")"),new K(F.INVALID_ARGUMENT,c+t+u)}function E1(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,r,n,i,o){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new j4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Lu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class j4 extends S1{data(){return super.data()}}function Lu(t,e){return typeof e=="string"?Sp(t,e):e instanceof Au?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tp{}class Ip extends Tp{}function yi(t,e,...r){let n=[];e instanceof Tp&&n.push(e),n=n.concat(r),function(o){const a=o.filter(u=>u instanceof kp).length,c=o.filter(u=>u instanceof Mu).length;if(a>1||a>0&&c>0)throw new K(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Mu extends Ip{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Mu(e,r,n)}_apply(e){const r=this._parse(e);return k1(e._query,r),new as(e.firestore,e.converter,vm(e._query,r))}_parse(e){const r=Ru(e.firestore);return function(o,a,c,u,d,m,f){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new K(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){wy(f,m);const j=[];for(const C of f)j.push(by(u,o,C));g={arrayValue:{values:j}}}else g=by(u,o,f)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||wy(f,m),g=w4(c,a,f,m==="in"||m==="not-in");return We.create(d,m,g)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function T1(t,e,r){const n=e,i=Lu("where",t);return Mu._create(i,n,r)}class kp extends Tp{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new kp(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:kr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,o){let a=i;const c=o.getFlattenedFilters();for(const u of c)k1(a,u),a=vm(a,u)}(e._query,r),new as(e.firestore,e.converter,vm(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Cp extends Ip{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Cp(e,r)}_apply(e){const r=function(i,o,a){if(i.startAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new K(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(o,a)}(e._query,this._field,this._direction);return new as(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Xi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function I1(t,e="asc"){const r=e,n=Lu("orderBy",t);return Cp._create(n,r)}class Ap extends Ip{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new Ap(e,r,n)}_apply(e){return new as(e.firestore,e.converter,zc(e._query,this._limit,this._limitType))}}function Im(t){return h4("limit",t),Ap._create("limit",t,"F")}function by(t,e,r){if(typeof(r=Ae(r))=="string"){if(r==="")throw new K(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N_(e)&&r.indexOf("/")!==-1)throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Se.fromString(r));if(!te.isDocumentKey(n))throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return zx(t,new te(n))}if(r instanceof Rt)return zx(t,r._key);throw new K(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ku(r)}.`)}function wy(t,e){if(!Array.isArray(t)||t.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(t,e){const r=function(i,o){for(const a of i)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class E4{convertValue(e,r="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Ks(e,(i,o)=>{n[i]=this.convertValue(o,r)}),n}convertVectorValue(e){var r,n,i;const o=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>Fe(a.doubleValue));return new _p(o)}convertGeoPoint(e){return new wp(Fe(e.latitude),Fe(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Zf(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(ba(e));default:return null}}convertTimestamp(e){const r=es(e);return new Je(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Se.fromString(e);_e(G_(n));const i=new wa(n.get(1),n.get(3)),o=new te(n.popFirst(5));return i.isEqual(r)||gn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t,e,r){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A1 extends S1{constructor(e,r,n,i,o,a){super(e,r,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Lu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class rc extends A1{data(e={}){return super.data(e)}}class S4{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new Lo(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new rc(this._firestore,this._userDataWriter,n.key,n,new Lo(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new rc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new rc(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Lo(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:T4(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function T4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){t=Cr(t,Rt);const e=Cr(t.firestore,Ys);return c4(bp(e),t._key).then(r=>I4(e,t,r))}class P1 extends E4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hi(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,r)}}function _r(t){t=Cr(t,as);const e=Cr(t.firestore,Ys),r=bp(e),n=new P1(e);return N4(t._query),u4(r,t._query).then(i=>new S4(e,n,t,i))}function _y(t,e,r){t=Cr(t,Rt);const n=Cr(t.firestore,Ys),i=C1(t.converter,e);return Ou(n,[_1(Ru(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,hr.none())])}function ki(t,e,r,...n){t=Cr(t,Rt);const i=Cr(t.firestore,Ys),o=Ru(i);let a;return a=typeof(e=Ae(e))=="string"||e instanceof Au?b4(o,"updateDoc",t._key,e,r,n):v4(o,"updateDoc",t._key,e),Ou(i,[a.toMutation(t._key,hr.exists(!0))])}function nc(t){return Ou(Cr(t.firestore,Ys),[new ip(t._key,hr.none())])}function Zr(t,e){const r=Cr(t.firestore,Ys),n=Nt(t),i=C1(t.converter,e);return Ou(r,[_1(Ru(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,hr.exists(!1))]).then(()=>n)}function Ou(t,e){return function(n,i){const o=new ln;return n.asyncQueue.enqueueAndForget(async()=>YP(await l4(n),i,o)),o.promise}(bp(t),e)}function I4(t,e,r){const n=r.docs.get(e._key),i=new P1(t);return new A1(t,i,e._key,n,new Lo(r.hasPendingWrites,r.fromCache),e.converter)}function zd(){return new Np("serverTimestamp")}(function(e,r=!0){(function(i){Ji=i})(Yi),zr(new Ir("firestore",(n,{instanceIdentifier:i,options:o})=>{const a=n.getProvider("app").getImmediate(),c=new Ys(new IC(n.getProvider("auth-internal")),new PC(n.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(d.options.projectId,m)}(a,i),a);return o=Object.assign({useFetchStreams:r},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),dr(Vx,"4.7.0",e),dr(Vx,"4.7.0","esm2017")})();const R1="@firebase/installations",Pp="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=1e4,L1=`w:${Pp}`,M1="FIS_v2",k4="https://firebaseinstallations.googleapis.com/v1",C4=60*60*1e3,A4="installations",P4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Fs=new Ws(A4,P4,R4);function V1(t){return t instanceof Ar&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1({projectId:t}){return`${k4}/projects/${t}/installations`}function F1(t){return{token:t.token,requestStatus:2,expiresIn:L4(t.expiresIn),creationTime:Date.now()}}async function q1(t,e){const n=(await e.json()).error;return Fs.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function U1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function D4(t,{refreshToken:e}){const r=U1(t);return r.append("Authorization",M4(e)),r}async function z1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function L4(t){return Number(t.replace("s","000"))}function M4(t){return`${M1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V4({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=O1(t),i=U1(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:r,authVersion:M1,appId:t.appId,sdkVersion:L1},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await z1(()=>fetch(n,c));if(u.ok){const d=await u.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:F1(d.authToken)}}else throw await q1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=/^[cdef][\w-]{21}$/,km="";function q4(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=U4(t);return F4.test(r)?r:km}catch{return km}}function U4(t){return O4(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Map;function W1(t,e){const r=Fu(t);G1(r,e),z4(r,e)}function G1(t,e){const r=H1.get(t);if(r)for(const n of r)n(e)}function z4(t,e){const r=B4();r&&r.postMessage({key:t,fid:e}),H4()}let _s=null;function B4(){return!_s&&"BroadcastChannel"in self&&(_s=new BroadcastChannel("[Firebase] FID Change"),_s.onmessage=t=>{G1(t.data.key,t.data.fid)}),_s}function H4(){H1.size===0&&_s&&(_s.close(),_s=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="firebase-installations-database",G4=1,qs="firebase-installations-store";let Bd=null;function Rp(){return Bd||(Bd=vw(W4,G4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qs)}}})),Bd}async function $c(t,e){const r=Fu(t),i=(await Rp()).transaction(qs,"readwrite"),o=i.objectStore(qs),a=await o.get(r);return await o.put(e,r),await i.done,(!a||a.fid!==e.fid)&&W1(t,e.fid),e}async function $1(t){const e=Fu(t),n=(await Rp()).transaction(qs,"readwrite");await n.objectStore(qs).delete(e),await n.done}async function qu(t,e){const r=Fu(t),i=(await Rp()).transaction(qs,"readwrite"),o=i.objectStore(qs),a=await o.get(r),c=e(a);return c===void 0?await o.delete(r):await o.put(c,r),await i.done,c&&(!a||a.fid!==c.fid)&&W1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(t){let e;const r=await qu(t.appConfig,n=>{const i=$4(n),o=K4(t,i);return e=o.registrationPromise,o.installationEntry});return r.fid===km?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function $4(t){const e=t||{fid:q4(),registrationStatus:0};return K1(e)}function K4(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Fs.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=Q4(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Y4(t)}:{installationEntry:e}}async function Q4(t,e){try{const r=await V4(t,e);return $c(t.appConfig,r)}catch(r){throw V1(r)&&r.customData.serverCode===409?await $1(t.appConfig):await $c(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function Y4(t){let e=await jy(t.appConfig);for(;e.registrationStatus===1;)await B1(100),e=await jy(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Dp(t);return n||r}return e}function jy(t){return qu(t,e=>{if(!e)throw Fs.create("installation-not-found");return K1(e)})}function K1(t){return J4(t)?{fid:t.fid,registrationStatus:0}:t}function J4(t){return t.registrationStatus===1&&t.registrationTime+D1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4({appConfig:t,heartbeatServiceProvider:e},r){const n=Z4(t,r),i=D4(t,r),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:L1,appId:t.appId}},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await z1(()=>fetch(n,c));if(u.ok){const d=await u.json();return F1(d)}else throw await q1("Generate Auth Token",u)}function Z4(t,{fid:e}){return`${O1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lp(t,e=!1){let r;const n=await qu(t.appConfig,o=>{if(!Q1(o))throw Fs.create("not-registered");const a=o.authToken;if(!e&&rR(a))return o;if(a.requestStatus===1)return r=eR(t,e),o;{if(!navigator.onLine)throw Fs.create("app-offline");const c=sR(o);return r=tR(t,c),c}});return r?await r:n.authToken}async function eR(t,e){let r=await Ny(t.appConfig);for(;r.authToken.requestStatus===1;)await B1(100),r=await Ny(t.appConfig);const n=r.authToken;return n.requestStatus===0?Lp(t,e):n}function Ny(t){return qu(t,e=>{if(!Q1(e))throw Fs.create("not-registered");const r=e.authToken;return iR(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function tR(t,e){try{const r=await X4(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await $c(t.appConfig,n),r}catch(r){if(V1(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await $1(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $c(t.appConfig,n)}throw r}}function Q1(t){return t!==void 0&&t.registrationStatus===2}function rR(t){return t.requestStatus===2&&!nR(t)}function nR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+C4}function sR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function iR(t){return t.requestStatus===1&&t.requestTime+D1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t){const e=t,{installationEntry:r,registrationPromise:n}=await Dp(e);return n?n.catch(console.error):Lp(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e=!1){const r=t;return await lR(r),(await Lp(r,e)).token}async function lR(t){const{registrationPromise:e}=await Dp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(t){if(!t||!t.options)throw Hd("App Configuration");if(!t.name)throw Hd("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw Hd(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Hd(t){return Fs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="installations",uR="installations-internal",dR=t=>{const e=t.getProvider("app").getImmediate(),r=cR(e),n=Gs(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},hR=t=>{const e=t.getProvider("app").getImmediate(),r=Gs(e,Y1).getImmediate();return{getId:()=>oR(r),getToken:i=>aR(r,i)}};function mR(){zr(new Ir(Y1,dR,"PUBLIC")),zr(new Ir(uR,hR,"PRIVATE"))}mR();dr(R1,Pp);dr(R1,Pp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc="analytics",fR="firebase_id",pR="origin",gR=60*1e3,xR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ht=new gu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zt=new Ws("analytics","Analytics",yR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(t){if(!t.startsWith(Mp)){const e=Zt.create("invalid-gtag-resource",{gtagURL:t});return Ht.warn(e.message),""}return t}function J1(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function bR(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function wR(t,e){const r=bR("firebase-js-sdk-policy",{createScriptURL:vR}),n=document.createElement("script"),i=`${Mp}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function _R(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function jR(t,e,r,n,i,o){const a=n[i];try{if(a)await e[a];else{const u=(await J1(r)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(c){Ht.error(c)}t("config",i,o)}async function NR(t,e,r,n,i){try{let o=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const c=await J1(r);for(const u of a){const d=c.find(f=>f.measurementId===u),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",n,i||{})}catch(o){Ht.error(o)}}function ER(t,e,r,n){async function i(o,...a){try{if(o==="event"){const[c,u]=a;await NR(t,e,r,c,u)}else if(o==="config"){const[c,u]=a;await jR(t,e,r,n,c,u)}else if(o==="consent"){const[c,u]=a;t("consent",c,u)}else if(o==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(o==="set"){const[c]=a;t("set",c)}else t(o,...a)}catch(c){Ht.error(c)}}return i}function SR(t,e,r,n,i){let o=function(...a){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=ER(o,t,e,r),{gtagCore:o,wrappedGtag:window[i]}}function TR(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Mp)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=30,kR=1e3;class CR{constructor(e={},r=kR){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const X1=new CR;function AR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function PR(t){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:AR(n)},o=xR.replace("{app-id}",r),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Zt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function RR(t,e=X1,r){const{appId:n,apiKey:i,measurementId:o}=t.options;if(!n)throw Zt.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:n};throw Zt.create("no-api-key")}const a=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new MR;return setTimeout(async()=>{c.abort()},gR),Z1({appId:n,apiKey:i,measurementId:o},a,c,e)}async function Z1(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=X1){var o;const{appId:a,measurementId:c}=t;try{await DR(n,e)}catch(u){if(c)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await PR(t);return i.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!LR(d)){if(i.deleteThrottleMetadata(a),c)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const m=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?ax(r,i.intervalMillis,IR):ax(r,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+m,backoffCount:r+1};return i.setThrottleMetadata(a,f),Ht.debug(`Calling attemptFetch again in ${m} millis`),Z1(t,f,n,i)}}function DR(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(o),n(Zt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LR(t){if(!(t instanceof Ar)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class MR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function VR(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const o=await e,a=Object.assign(Object.assign({},n),{send_to:o});t("event",r,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(){if(Lf())try{await Mf()}catch(t){return Ht.warn(Zt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ht.warn(Zt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function FR(t,e,r,n,i,o,a){var c;const u=RR(t);u.then(j=>{r[j.measurementId]=j.appId,t.options.measurementId&&j.measurementId!==t.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${j.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(j=>Ht.error(j)),e.push(u);const d=OR().then(j=>{if(j)return n.getId()}),[m,f]=await Promise.all([u,d]);TR(o)||wR(o,m.measurementId),i("js",new Date);const g=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return g[pR]="firebase",g.update=!0,f!=null&&(g[fR]=f),i("config",m.measurementId,g),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.app=e}_delete(){return delete Yo[this.app.options.appId],Promise.resolve()}}let Yo={},Ey=[];const Sy={};let Wd="dataLayer",UR="gtag",Ty,e2,Iy=!1;function zR(){const t=[];if(Df()&&t.push("This is a browser extension environment."),gw()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=Zt.create("invalid-analytics-context",{errorInfo:e});Ht.warn(r.message)}}function BR(t,e,r){zR();const n=t.options.appId;if(!n)throw Zt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zt.create("no-api-key");if(Yo[n]!=null)throw Zt.create("already-exists",{id:n});if(!Iy){_R(Wd);const{wrappedGtag:o,gtagCore:a}=SR(Yo,Ey,Sy,Wd,UR);e2=o,Ty=a,Iy=!0}return Yo[n]=FR(t,Ey,Sy,e,Ty,Wd,r),new qR(t)}function HR(t=Of()){t=Ae(t);const e=Gs(t,Kc);return e.isInitialized()?e.getImmediate():WR(t)}function WR(t,e={}){const r=Gs(t,Kc);if(r.isInitialized()){const i=r.getImmediate();if(ga(e,r.getOptions()))return i;throw Zt.create("already-initialized")}return r.initialize({options:e})}async function GR(){if(Df()||!gw()||!Lf())return!1;try{return await Mf()}catch{return!1}}function $R(t,e,r,n){t=Ae(t),VR(e2,Yo[t.app.options.appId],e,r,n).catch(i=>Ht.error(i))}const ky="@firebase/analytics",Cy="0.10.7";function KR(){zr(new Ir(Kc,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return BR(n,i,r)},"PUBLIC")),zr(new Ir("analytics-internal",t,"PRIVATE")),dr(ky,Cy),dr(ky,Cy,"esm2017");function t(e){try{const r=e.getProvider(Kc).getImmediate();return{logEvent:(n,i,o)=>$R(r,n,i,o)}}catch(r){throw Zt.create("interop-component-reg-failed",{reason:r})}}}KR();const QR={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},Vp=bw(QR),fe=p4(Vp),wt=_C(Vp);typeof window<"u"&&GR().then(t=>{t&&HR(Vp)});const t2=k.createContext(void 0),ut=()=>{const t=k.useContext(t2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Gd=async t=>{var n,i;if(!t)return null;const r=(await Vu(Nt(fe,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(r==null?void 0:r.displayName)||((n=t.email)==null?void 0:n.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(r==null?void 0:r.isAdmin)||!1,photoURL:t.photoURL||(r==null?void 0:r.photoURL),createdAt:(i=r==null?void 0:r.createdAt)==null?void 0:i.toDate()}},YR=({children:t})=>{const[e,r]=k.useState(null),[n,i]=k.useState(!0);k.useEffect(()=>{const g=uk(wt,async j=>{if(j){const C=await Gd(j);r(C)}else r(null);i(!1)});return()=>g()},[]);const f={currentUser:e,loading:n,register:async(g,j,C)=>{try{const P=await $w(wt,g,j),{user:R}=P;await Kw(R,{displayName:C}),await Sx(R);const _={uid:R.uid,email:R.email,displayName:C,emailVerified:R.emailVerified,isAdmin:!1,createdAt:zd(),updatedAt:zd()};await _y(Nt(fe,"users",R.uid),_);const w=await Gd(R);return r(w),R}catch(P){throw console.error("Erreur lors de l'inscription:",P),P}},login:async(g,j)=>{try{const C=await hm(wt,g,j),P=await Gd(C.user);return r(P),P}catch(C){throw console.error("Erreur de connexion:",C),C}},loginWithGoogle:async()=>{const g=new Xr;let j=null;try{j=(await Ak(wt,g)).user,console.log("[Google] Utilisateur connecté:",j);const P=Nt(fe,"users",j.uid),R=await Vu(P);console.log("[Google] Document utilisateur existe:",R.exists()),R.exists()||(await _y(P,{uid:j.uid,email:j.email,displayName:j.displayName,emailVerified:j.emailVerified,isAdmin:!1,createdAt:zd(),photoURL:j.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const _={uid:j.uid,email:j.email||"",displayName:j.displayName||"",emailVerified:j.emailVerified,isAdmin:R.exists()?R.data().isAdmin:!1,createdAt:j.metadata.creationTime?new Date(j.metadata.creationTime):void 0,photoURL:j.photoURL??void 0};return console.log("[Google] AppUser retourné:",_),_}catch(C){throw console.error("[Google] Erreur dans loginWithGoogle:",C,j),C}},logout:async()=>{try{await dk(wt),r(null)}catch(g){throw console.error("Erreur lors de la déconnexion:",g),g}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(wt.currentUser)try{await Sx(wt.currentUser)}catch(g){throw console.error("Erreur lors de l'envoi de l'email de vérification:",g),g}}};return s.jsx(t2.Provider,{value:f,children:t})},r2=k.createContext(void 0),to=()=>{const t=k.useContext(r2);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},JR=({children:t})=>{const[e,r]=k.useState([]),[n,i]=k.useState([]),[o,a]=k.useState([]),[c,u]=k.useState(!0);k.useEffect(()=>{(async()=>{u(!0);const y=await _r(Be(fe,"guideSections"));i(y.docs.map(A=>({id:A.id,...A.data()})));const v=await _r(Be(fe,"resources"));r(v.docs.map(A=>({id:A.id,...A.data()})));const N=await _r(Be(fe,"faq"));a(N.docs.map(A=>({id:A.id,...A.data()}))),u(!1)})()},[]);const d=async()=>{const x=await _r(Be(fe,"guideSections"));i(x.docs.map(N=>({id:N.id,...N.data()})));const y=await _r(Be(fe,"resources"));r(y.docs.map(N=>({id:N.id,...N.data()})));const v=await _r(Be(fe,"faq"));a(v.docs.map(N=>({id:N.id,...N.data()})))},E={resources:e,guideSections:n,faqItems:o,addResource:async x=>{await Zr(Be(fe,"resources"),x),await d()},updateResource:async(x,y)=>{await ki(Nt(fe,"resources",x),y),await d()},deleteResource:async x=>{await nc(Nt(fe,"resources",x)),await d()},addGuideSection:async x=>{await Zr(Be(fe,"guideSections"),x),await d()},updateGuideSection:async(x,y)=>{await ki(Nt(fe,"guideSections",x),y),await d()},deleteGuideSection:async x=>{await nc(Nt(fe,"guideSections",x)),await d()},addFAQItem:async x=>{await Zr(Be(fe,"faq"),x),await d()},updateFAQItem:async(x,y)=>{await ki(Nt(fe,"faq",x),y),await d()},deleteFAQItem:async x=>{await nc(Nt(fe,"faq",x)),await d()},getResourcesByPhase:x=>e.filter(y=>y.phase===x),getGuideSectionsByPhase:x=>n.filter(y=>y.phase===x).sort((y,v)=>y.order-v.order),getFAQItemsByPhase:x=>o.filter(y=>y.phase===x),searchResources:x=>{const y=x.toLowerCase();return e.filter(v=>v.title.toLowerCase().includes(y)||v.description.toLowerCase().includes(y)||v.category.toLowerCase().includes(y))}};return c?s.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):s.jsx(r2.Provider,{value:E,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(t,e)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:c="",children:u,...d},m)=>k.createElement("svg",{ref:m,...XR,width:i,height:i,stroke:n,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${ZR(t)}`,c].join(" "),...d},[...e.map(([f,g])=>k.createElement(f,g)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=$("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=$("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=$("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=$("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Op=$("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=$("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=$("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=$("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=$("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=$("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=$("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=$("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=$("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=$("Copyright",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=$("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=$("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=$("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=$("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=$("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=$("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=$("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=$("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=$("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=$("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=$("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=$("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=$("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=$("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=$("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=$("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=$("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=$("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=$("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=$("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=$("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=$("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=$("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=$("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=$("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=$("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=$("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=$("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=$("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=$("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=$("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=$("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=$("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=$("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=$("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=$("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=$("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=$("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=$("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),D5=()=>{var f,g;const{currentUser:t,logout:e,isAdmin:r}=ut(),[n,i]=k.useState(!1),[o,a]=k.useState(!1),[c,u]=k.useState(!1),d=Hs();k.useEffect(()=>{const j=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",j),()=>window.removeEventListener("scroll",j)},[]),k.useEffect(()=>{i(!1),a(!1)},[d]);const m=async()=>{try{await e()}catch(j){console.error("Logout failed",j)}};return s.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:s.jsxs("div",{className:"container mx-auto px-4 py-3",children:[s.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[s.jsx(Q,{to:"/",className:"flex items-center",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),s.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),s.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),s.jsx(Q,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),s.jsx(Q,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),r()&&s.jsx(Q,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),s.jsx("div",{className:"hidden md:flex items-center",children:t?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>a(!o),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),s.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),s.jsx(Ci,{className:"w-4 h-4"})]}),o&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[s.jsxs(Q,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(Am,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Profil"})]}),r()&&s.jsxs(Q,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(c2,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Administration"})]}),s.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(Ry,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Déconnexion"})]})]})]}):s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Q,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),s.jsx(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),s.jsx("button",{className:"md:hidden",onClick:()=>i(!n),children:n?s.jsx(Us,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):s.jsx(E5,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),n&&s.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:s.jsx("div",{className:"flex flex-col space-y-4",children:t?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium text-sm",children:(((f=t.displayName)==null?void 0:f.charAt(0))||((g=t.email)==null?void 0:g.charAt(0))||"U").toUpperCase()})}),s.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),s.jsxs(Q,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[s.jsx(Am,{className:"w-4 h-4 mr-2"}),"Profil"]}),s.jsx(Q,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),s.jsx(Q,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),s.jsx(Q,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),r()&&s.jsx(Q,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),s.jsxs("button",{onClick:m,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[s.jsx(Ry,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Déconnexion"})]})]}):s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsx(Q,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),s.jsx(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},L5=()=>s.jsx("div",{className:"bg-gray-100 py-3 border-t border-gray-200",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-wrap justify-center text-xs text-gray-500 gap-4",children:[s.jsx(Q,{to:"/legal/cgu",className:"hover:text-gray-700 hover:underline",children:"Conditions Générales d'Utilisation"}),s.jsx(Q,{to:"/legal/privacy-policy",className:"hover:text-gray-700 hover:underline",children:"Politique de Confidentialité"}),s.jsx(Q,{to:"/legal/legal-notice",className:"hover:text-gray-700 hover:underline",children:"Mentions Légales"}),s.jsx(Q,{to:"/legal/moderation-charter",className:"hover:text-gray-700 hover:underline",children:"Charte de Modération"}),s.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),localStorage.removeItem("cookieConsent"),window.location.reload()},className:"hover:text-gray-700 hover:underline cursor-pointer",children:"Paramètres des cookies"})]})})}),M5=()=>{const t=new Date().getFullYear();return s.jsxs("footer",{className:"bg-blue-900 text-white",children:[s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-1",children:[s.jsxs(Q,{to:"/",className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:s.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),s.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),s.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Q,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),s.jsx("li",{children:s.jsx(Q,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),s.jsx("li",{children:s.jsx(Q,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Q,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),s.jsx("li",{children:s.jsx(Q,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),s.jsx("li",{children:s.jsx(Q,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(Up,{className:"w-4 h-4 mr-2"}),s.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"https://www.linkedin.com/in/abdoul-ahad-mback%C3%A9-diouf-5b04b4213/",className:"text-blue-200 hover:text-white transition-colors",children:s.jsx(j5,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://github.com/AbdoulDiouf2",className:"text-blue-200 hover:text-white transition-colors",children:s.jsx(x5,{className:"w-5 h-5"})})]})]})]}),s.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),s.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",s.jsx(y5,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]}),s.jsx(L5,{})]})},Rl=({children:t})=>{const{currentUser:e,loading:r}=ut();return r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?s.jsx(s.Fragment,{children:t}):s.jsx(em,{to:"/login"})},Kr=({children:t})=>{const{currentUser:e,loading:r,isAdmin:n}=ut();return r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?n()?s.jsx(s.Fragment,{children:t}):s.jsx(em,{to:"/dashboard"}):s.jsx(em,{to:"/login"})},V5=()=>{const[t,e]=k.useState({essential:!0,analytics:!1,marketing:!1,acceptedAt:null}),[r,n]=k.useState(!1),[i,o]=k.useState(!1);k.useEffect(()=>{const f=localStorage.getItem("cookieConsent");if(f)try{const g=JSON.parse(f);e({...g,acceptedAt:g.acceptedAt?new Date(g.acceptedAt):null}),n(!1)}catch(g){console.error("Erreur lors de la lecture du consentement:",g),n(!0)}else n(!0)},[]);const a=f=>{e(g=>({...g,[f]:!g[f]}))},c=()=>{const f={essential:!0,analytics:!0,marketing:!0,acceptedAt:new Date};e(f),m(f),n(!1),o(!1)},u=()=>{const f={essential:!0,analytics:!1,marketing:!1,acceptedAt:new Date};e(f),m(f),n(!1),o(!1)},d=()=>{const f={...t,acceptedAt:new Date};e(f),m(f),n(!1),o(!1)},m=f=>{localStorage.setItem("cookieConsent",JSON.stringify(f)),f.analytics&&console.log("Analytics activé"),f.marketing&&console.log("Marketing activé")};return!r&&!i?null:s.jsxs(s.Fragment,{children:[i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),r&&!i&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-40",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Votre vie privée"}),s.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Nous utilisons des cookies pour améliorer votre expérience sur notre site, personnaliser le contenu et analyser notre trafic. Vous pouvez choisir d'accepter tous les cookies ou personnaliser vos préférences."}),s.jsx("div",{className:"mt-1",children:s.jsx(Q,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline text-sm",target:"_blank",children:"En savoir plus sur notre politique de confidentialité"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Personnaliser"}),s.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refuser"}),s.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Tout accepter"})]})]})})}),i&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-50 max-h-[80vh] overflow-y-auto",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Paramètres de confidentialité"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(Us,{size:24})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies essentiels"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-not-allowed right-0 z-10 border-gray-300 transition-all duration-300"}),s.jsx("label",{className:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-not-allowed transition-all duration-300"})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies sont nécessaires au fonctionnement du site et ne peuvent pas être désactivés. Ils sont généralement définis en réponse à des actions que vous effectuez, comme définir vos préférences de confidentialité, vous connecter ou remplir des formulaires."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies d'analyse"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:t.analytics,onChange:()=>a("analytics"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.analytics?"border-white":"border-gray-300"}`}),s.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.analytics?"bg-blue-600":"bg-gray-300"}`})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies nous permettent de compter les visites et les sources de trafic afin de mesurer et d'améliorer les performances de notre site. Ils nous aident à savoir quelles pages sont les plus et les moins populaires, et à voir comment les visiteurs se déplacent sur le site."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies marketing"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:t.marketing,onChange:()=>a("marketing"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.marketing?"border-white":"border-gray-300"}`}),s.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.marketing?"bg-blue-600":"bg-gray-300"}`})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies peuvent être définis via notre site par nos partenaires publicitaires. Ils peuvent être utilisés pour établir un profil de vos intérêts et vous proposer des publicités pertinentes sur d'autres sites."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),s.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Enregistrer mes préférences"})]})]})})]})},O5=()=>{const[t,e]=k.useState(!1),r=()=>{window.pageYOffset>300?e(!0):e(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return k.useEffect(()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)),[]),s.jsx(s.Fragment,{children:t&&s.jsx("button",{onClick:n,className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg z-50 transition-all duration-300 ease-in-out transform hover:scale-110 focus:outline-none","aria-label":"Retour en haut",title:"Retour en haut",children:s.jsx(n5,{size:20})})})},Ly=[{id:1,name:"ESIGELEC",logoUrl:"https://www.francemobilites.fr/sites/frenchmobility/files/images/2021/06/esigelec-rouen-2baselines_0.png",alt:"Logo ESIGELEC"},{id:2,name:"CPS Dakar",logoUrl:"https://www.linkedin.com/dms/prv/image/v2/D5606AQElmOjZWkdvVQ/messaging-image-720/B56ZbuZEzhHgAg-/0/1747756287373?m=AQKVAjHWySZCJgAAAZbuZodpjb5LvuiQx9ZVPlT0orYGHXGSu06cbQo20w&ne=1&v=beta&t=aV_zWSMv5x9jCsPpEsc7DAEo1kBvCNvQWpufEYl-iEo",alt:"Logo CPS Dakar"},{id:3,name:"ESMT",logoUrl:"https://burkina24.com/wp-content/uploads/2023/05/ESMT-logo.png",alt:"Logo ESMT"},{id:4,name:"College Sacré Coeur",logoUrl:"https://www.courssacrecoeur.info/images/logo.gif",alt:"Logo Collège Sacré Coeur"}],F5=()=>{const t=[...Ly,...Ly];return s.jsx("div",{className:"bg-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Les écoles partenaires"}),s.jsx("div",{className:"infinite-logo-container",children:s.jsx("div",{className:"infinite-logo-scroll",children:t.map((e,r)=>s.jsx("div",{className:"logo-item",children:s.jsx("div",{className:"flex items-center justify-center h-40 bg-white rounded-lg shadow-sm p-4",children:s.jsx("img",{src:e.logoUrl,alt:e.alt,className:"max-h50 max-w-full object-contain"})})},`${e.id}-${r}`))})})]})})},q5=()=>{const{currentUser:t}=ut();return s.jsxs("div",{className:"flex flex-col min-h-screen",children:[s.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[s.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[s.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide pour passer de CPS à l'ESIGELEC"}),s.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),s.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?s.jsxs(Q,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",s.jsx(Ay,{className:"ml-2 w-5 h-5"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",s.jsx(Ay,{className:"ml-2 w-5 h-5"})]}),s.jsx(Q,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),s.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:s.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(P5,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),s.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(i5,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),s.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(N5,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),s.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(cn,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),s.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),s.jsxs("div",{className:"flex flex-col space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),s.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Préparation dossier Campus France"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Candidature ESIGELEC"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),s.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Demande de visa étudiant"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Recherche de logement"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),s.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Transport vers la France"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),s.jsx("section",{className:"py-16 bg-gradient-to-r from-green-800 to-green-700 text-white",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),s.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?s.jsx(Q,{to:"/dashboard",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):s.jsxs(s.Fragment,{children:[s.jsx(Q,{to:"/register",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),s.jsx(Q,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})}),s.jsx(F5,{})]})},U5=()=>{const[t,e]=k.useState(""),[r,n]=k.useState(""),[i,o]=k.useState(!1),[a,c]=k.useState(""),[u,d]=k.useState(!1),[m,f]=k.useState(!1),g=gr(),{login:j,loginWithGoogle:C}=ut();Pa.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const P=async _=>{_.preventDefault();try{c(""),d(!0),await j(t,r),g("/dashboard")}catch(w){c("Identifiants invalides. Veuillez réessayer."),console.error(w)}finally{d(!1)}},R=async()=>{c(""),f(!0);try{await C(),g("/dashboard")}catch(_){let w="Erreur lors de la connexion avec Google.";_&&typeof _=="object"&&"message"in _&&(w+=`
${_.message}`),c(w),console.error(_)}finally{f(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",s.jsx(Q,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:s.jsx("div",{className:"flex",children:s.jsx("div",{children:s.jsx("p",{className:"text-sm text-red-700",children:a})})})}),s.jsxs("button",{type:"button",onClick:R,disabled:m,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${m?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:s.jsxs("g",{children:[s.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),s.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),s.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),s.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),m?"Connexion Google...":"Se connecter avec Google"]}),s.jsxs("form",{className:"space-y-6",onSubmit:P,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:_=>e(_.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:_=>n(_.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>o(_=>!_),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":i?"Masquer le mot de passe":"Afficher le mot de passe",children:i?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),s.jsx("div",{className:"text-sm",children:s.jsx(Q,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},z5=()=>{const[t,e]=k.useState(""),[r,n]=k.useState(""),[i,o]=k.useState(""),[a,c]=k.useState(""),[u,d]=k.useState(!1),[m,f]=k.useState(!1),[g,j]=k.useState(""),[C,P]=k.useState(!1),R=gr(),{register:_,loginWithGoogle:w}=ut(),T=async()=>{try{await w(),R("/dashboard")}catch{j("Erreur lors de l'inscription avec Google"),console.error()}},D=async L=>{if(L.preventDefault(),i!==a)return j("Les mots de passe ne correspondent pas");try{j(""),P(!0),await _(r,i,t),R("/dashboard")}catch{j("Erreur lors de la création du compte"),console.error()}finally{P(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",s.jsx(Q,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:s.jsx("div",{className:"flex",children:s.jsx("div",{children:s.jsx("p",{className:"text-sm text-red-700",children:g})})})}),s.jsxs("button",{type:"button",onClick:T,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:s.jsxs("g",{children:[s.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),s.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),s.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),s.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),s.jsxs("form",{className:"space-y-6",onSubmit:D,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:L=>e(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:L=>n(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:L=>o(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(L=>!L),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:L=>c(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>f(L=>!L),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":m?"Masquer le mot de passe":"Afficher le mot de passe",children:m?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",s.jsx(Q,{to:"/legal/CGU",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:C,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${C?"opacity-70 cursor-not-allowed":""}`,children:C?"Création en cours...":"Créer un compte"})})]})]})})]})},B5=()=>{const{currentUser:t}=ut(),{guideSections:e,resources:r,getGuideSectionsByPhase:n,faqItems:i}=to(),[o,a]=k.useState("post-cps"),[c,u]=k.useState([]),d=g=>{c.includes(g)?u(c.filter(j=>j!==g)):u([...c,g])},m=n?n(o):[],f=g=>{const j=n?n(g):[];if(!j||j.length===0)return 0;const C=j.filter(P=>c.includes(P.id));return Math.round(C.length/j.length*100)};return!r||!i||!e?s.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),s.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",s.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:s.jsxs("div",{className:"flex flex-wrap",children:[s.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),s.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),s.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[o==="post-cps"&&"Après votre CPS",o==="during-process"&&"Pendant vos démarches administratives",o==="pre-arrival"&&"Avant votre arrivée en France"]}),s.jsxs("p",{className:"text-gray-600",children:[o==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",o==="during-process"&&"Les démarches à effectuer pour préparer votre départ",o==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),s.jsx("div",{className:"divide-y divide-gray-200",children:m&&m.length>0?m.map(g=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:s.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[s.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:s.jsx("button",{onClick:()=>d(g.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(g.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:s.jsx(Ss,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:g.content}),Array.isArray(g.resources)&&g.resources.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),s.jsx("div",{className:"space-y-2",children:g.resources.map(j=>{const C=r.find(P=>P.id===j);return C?s.jsxs("a",{href:C.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Ye,{className:"w-4 h-4 mr-2"}),C.title]},C.id):null})})]})]})]})},g.id)):s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("post-cps"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("post-cps")}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("during-process"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("during-process")}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[f("pre-arrival"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${f("pre-arrival")}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),s.jsx(Q,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),s.jsx("div",{className:"space-y-3",children:(r||[]).slice(0,3).map(g=>s.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:s.jsx(Ye,{className:"w-5 h-5 text-blue-700"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:g.title}),s.jsx("p",{className:"text-xs text-gray-500",children:g.phase})]})]},g.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),s.jsx(Q,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),s.jsx("div",{className:"space-y-3",children:(i||[]).slice(0,2).map(g=>s.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:g.question}),s.jsx("p",{className:"text-xs text-gray-700",children:g.answer&&g.answer.length>100?`${g.answer.substring(0,100)}...`:g.answer})]},g.id))})]})]})]})})]})},H5=()=>{const{resources:t}=to(),[e,r]=k.useState(""),[n,i]=k.useState("all"),[o,a]=k.useState("all"),[c,u]=k.useState(!1),[d,m]=k.useState(!1),[f,g]=k.useState(null),[j,C]=k.useState(!1),P=[...new Set(t.map(L=>L.category))],R=L=>{if(L.includes("dropbox.com")){let V=L.replace("www.dropbox.com","dl.dropboxusercontent.com");return V.includes("?dl=0")?V=V.replace("?dl=0","?raw=1"):V.includes("?")?V+="&raw=1":V+="?raw=1",V}return L},_=L=>`https://docs.google.com/viewer?url=${encodeURIComponent(L)}&embedded=true`,w=L=>{L.preventDefault()},T=t.filter(L=>n!=="all"&&L.phase!==n||o!=="all"&&L.category!==o?!1:e?L.title.toLowerCase().includes(e.toLowerCase())||L.description.toLowerCase().includes(e.toLowerCase()):!0),D=L=>{switch(L){case"pdf":return s.jsx(o2,{className:"w-6 h-6 text-red-500"});case"image":return s.jsx(b5,{className:"w-6 h-6 text-green-500"});case"video":return s.jsx(A5,{className:"w-6 h-6 text-purple-500"});case"archive":return s.jsx(r5,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return s.jsx(Ye,{className:"w-6 h-6 text-blue-500"})}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),s.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:s.jsx("div",{className:"p-6",children:s.jsx("form",{onSubmit:w,children:s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[s.jsx("div",{className:"flex-grow",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ta,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:L=>r(L.target.value)})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Py,{className:"mr-2 h-4 w-4"}),n==="all"?"Toutes les phases":n==="post-cps"?"Post-CPS":n==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),s.jsx(Ci,{className:"h-4 w-4"})]}),c&&s.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("all"),u(!1)},children:"Toutes les phases"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("post-cps"),u(!1)},children:"Post-CPS"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("during-process"),u(!1)},children:"Pendant les démarches"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>m(!d),children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Py,{className:"mr-2 h-4 w-4"}),o==="all"?"Toutes les catégories":o]}),s.jsx(Ci,{className:"h-4 w-4"})]}),d&&s.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),m(!1)},children:"Toutes les catégories"}),P.map(L=>s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o===L?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(L),m(!1)},children:L},L))]})})]})]})]})})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.length>0?T.map(L=>s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{g(L),C(!0)},children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:D(L.fileType)}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.title})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:L.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:L.phase==="post-cps"?"Post-CPS":L.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:L.category}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.fileType==="pdf"?"bg-red-100 text-red-800":L.fileType==="doc"||L.fileType==="docx"||L.fileType==="txt"?"bg-blue-100 text-blue-800":L.fileType==="xls"||L.fileType==="xlsx"?"bg-green-100 text-green-800":L.fileType==="ppt"||L.fileType==="pptx"?"bg-orange-100 text-orange-800":L.fileType==="image"?"bg-purple-100 text-purple-800":L.fileType==="video"?"bg-pink-100 text-pink-800":L.fileType==="audio"?"bg-indigo-100 text-indigo-800":L.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:L.fileType.toUpperCase()})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[s.jsxs("span",{children:["Mis à jour le ",L.updatedDate]}),s.jsxs("a",{href:L.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:V=>V.stopPropagation(),children:[s.jsx(Qc,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Télécharger"})]})]})]})},L.id)):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:s.jsx(Ta,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),s.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),j&&f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.title}),s.jsx("p",{className:"text-sm text-gray-500",children:f.category})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[s.jsx(Fp,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),s.jsxs("a",{href:f.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[s.jsx(Qc,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),s.jsxs("button",{onClick:()=>C(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[s.jsx(Us,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),s.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:f.fileType==="pdf"?s.jsxs("div",{className:"flex flex-col items-center h-full",children:[s.jsx("div",{className:"h-full w-full",children:s.jsx("object",{data:R(f.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:s.jsx("iframe",{src:_(f.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${f.title} (Google Viewer)`,allowFullScreen:!0})})}),s.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",s.jsx("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:L=>L.stopPropagation(),children:"télécharger"}),"ou l'",s.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(f.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:L=>L.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):f.fileType==="image"?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("img",{src:R(f.fileUrl),alt:f.title,className:"max-w-full max-h-full object-contain rounded-md"})}):s.jsx("iframe",{src:R(f.fileUrl),className:"w-full h-full border-0 rounded-md",title:f.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},W5=()=>{const{faqItems:t,addFAQItem:e}=to(),{currentUser:r}=ut(),[n,i]=k.useState(""),[o,a]=k.useState("all"),[c,u]=k.useState(null),[d,m]=k.useState(!1),[f,g]=k.useState(!1),[j,C]=k.useState(!1),[P,R]=k.useState(""),[_,w]=k.useState("post-cps"),[T,D]=k.useState(""),[L,V,E]=t.reduce((v,N)=>(r&&(N.userId===r.uid||N.userEmail===r.email)&&(N.isAnswered?v[0].push(N):v[1].push(N)),N.isApproved&&N.isAnswered&&(o==="all"||N.phase===o)&&(!n||N.question.toLowerCase().includes(n.toLowerCase())||N.answer.toLowerCase().includes(n.toLowerCase())||N.category.toLowerCase().includes(n.toLowerCase()))&&v[2].push(N),v),[[],[],[]]),x=v=>{u(c===v?null:v)},y=v=>{v.preventDefault(),P.trim()&&(e({question:P,answer:"Cette question est en attente de réponse par notre équipe.",category:T||"général",phase:_,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:r==null?void 0:r.uid,userEmail:r==null?void 0:r.email}),R(""),D(""),g(!0),setTimeout(()=>{g(!1),m(!1)},5e3))};return k.useEffect(()=>{d||g(!1)},[d]),s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),s.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[s.jsx("div",{className:"flex-grow",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ta,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:n,onChange:v=>i(v.target.value)})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("select",{value:o,onChange:v=>a(v.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:j,children:[s.jsx("option",{value:"all",children:"Toutes les phases"}),s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]}),r&&s.jsx("button",{type:"button",onClick:()=>C(!j),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${j?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:j?"Toutes les questions":"Mes questions"}),s.jsxs("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Ts,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx(On,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),s.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),s.jsx("form",{onSubmit:y,className:"space-y-7",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),s.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:P,onChange:v=>R(v.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:_,onChange:v=>w(v.target.value),required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:T,onChange:v=>D(v.target.value)})]})]}),f?s.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ss,{className:"h-5 w-5 text-green-500 mr-2"}),s.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),s.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):s.jsxs("div",{className:"flex justify-end",children:[s.jsx("button",{type:"button",onClick:()=>m(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),j?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",s.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:L.length})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:L.length>0?L.map(v=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(On,{className:"h-4 w-4 text-green-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.question}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?s.jsx($d,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ci,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&s.jsxs("div",{className:"mt-4 ml-11",children:[s.jsx("p",{className:"text-gray-700",children:v.answer}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",s.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:V.length})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:V.length>0?V.map(v=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:s.jsx(On,{className:"h-4 w-4 text-yellow-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",v.createdDate]})]})]})]}),c===v.id?s.jsx($d,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ci,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&s.jsx("div",{className:"mt-4 ml-11",children:s.jsx("p",{className:"text-gray-700 italic",children:v.answer})})]},v.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:E.length>0?E.map(v=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>x(v.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(On,{className:"h-4 w-4 text-blue-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[v.question,j&&!v.isApproved&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:v.phase==="post-cps"?"Post-CPS":v.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),v.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:v.category})]})]})]}),c===v.id?s.jsx($d,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ci,{className:"h-5 w-5 text-gray-500"})]}),c===v.id&&s.jsxs("div",{className:"mt-4 ml-11",children:[s.jsx("p",{className:"text-gray-700",children:v.answer}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",v.updatedDate]})]})]},v.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})};function G5(t=20){const[e,r]=k.useState([]),[n,i]=k.useState(!0);return k.useEffect(()=>{(async()=>{i(!0);try{const a=yi(Be(fe,"adminActivityLog"),I1("date","desc"),Im(t)),c=await _r(a);r(c.docs.map(u=>({id:u.id,...u.data()})))}catch{r([])}i(!1)})()},[t]),{recentActivity:e,loading:n}}function $5(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},r={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},n=t.user||"Admin",i=e[t.type]||t.type.toLowerCase(),o=r[t.target]||t.target.toLowerCase();return`${n} ${i} ${o}`}const K5=()=>{const{currentUser:t}=ut(),{resources:e,guideSections:r,faqItems:n}=to(),{recentActivity:i,loading:o}=G5();return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),s.jsxs(Q,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[s.jsx(qp,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),s.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",s.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[s.jsxs(Q,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Jd,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),s.jsxs(Q,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Ye,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),s.jsxs(Q,{to:"/admin/dropbox",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(s2,{className:"-ml-1 mr-2 h-5 w-5"}),"Gestionnaire Dropbox"]}),s.jsxs(Q,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(cn,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),s.jsxs(Q,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx(l5,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx(Ye,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx(Jd,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx(On,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(n)&&n.filter(a=>a.isAnswered).length>5&&s.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),s.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(a=>a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(a=>a.isAnswered).length>0?n.filter(a=>a.isAnswered).map(a=>s.jsxs("li",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-grow pr-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),a.isApproved?s.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):s.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),s.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"})]}),s.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:s.jsx(Q,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},a.id)):s.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(n)&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:n.filter(a=>!a.isAnswered).length})]}),Array.isArray(n)&&n.filter(a=>!a.isAnswered).length>5&&s.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),s.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(a=>!a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(a=>!a.isAnswered).length>0?n.filter(a=>!a.isAnswered).map(a=>s.jsxs("li",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-grow pr-2",children:[s.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"}),a.userEmail&&s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",a.userEmail]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:s.jsx(Q,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},a.id)):s.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs(Q,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(Jd,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer le contenu"})]}),s.jsxs(Q,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(Ye,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer les ressources"})]}),s.jsxs(Q,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(On,{className:"h-5 w-5"})}),s.jsx("span",{children:"Modérer la FAQ"})]}),s.jsxs(Q,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(cn,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[s.jsxs(Q,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(Ts,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une section de guide"})]}),s.jsxs(Q,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(Ts,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une ressource"})]}),s.jsxs(Q,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(Ts,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),s.jsx("div",{className:`divide-y divide-gray-200 ${i.length>5?"max-h-80 overflow-y-auto":""}`,children:o?s.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):i.length===0?s.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):i.map(a=>{var c;return s.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(Ye,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:$5(a)}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleString()}),typeof((c=a.details)==null?void 0:c.title)=="string"&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",a.details.title]})]})]})},a.id)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="post-cps").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="post-cps").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="post-cps").length:0})]})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="during-process").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="during-process").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="during-process").length:0})]})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="pre-arrival").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="pre-arrival").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Jr({type:t,target:e,targetId:r,user:n,details:i}){await Zr(Be(fe,"adminActivityLog"),{type:t,target:e,targetId:r||null,user:n||null,date:new Date().toISOString(),details:i||null})}const Bp=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmButtonText:o="Confirmer",cancelButtonText:a="Annuler",type:c="danger"})=>{if(!t)return null;const d=(()=>{switch(c){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),m=f=>{f.target===f.currentTarget&&c!=="danger"&&e()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:m,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[s.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[s.jsx(Js,{className:`mr-2 h-5 w-5 ${d.icon}`}),s.jsx("h3",{className:"text-lg font-medium",children:n})]}),s.jsx("div",{className:"px-6 py-4",children:s.jsx("p",{className:"text-gray-700",children:i})}),s.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:a}),s.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{r(),e()},autoFocus:!0,children:o})]})]})})};class Qa{constructor(e=0,r="Network Error"){this.status=e,this.text=r}}const Q5=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},st={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Q5()},Hp=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},Y5=(t,e="https://api.emailjs.com")=>{if(!t)return;const r=Hp(t);st.publicKey=r.publicKey,st.blockHeadless=r.blockHeadless,st.storageProvider=r.storageProvider,st.blockList=r.blockList,st.limitRate=r.limitRate,st.origin=r.origin||e},m2=async(t,e,r={})=>{const n=await fetch(st.origin+t,{method:"POST",headers:r,body:e}),i=await n.text(),o=new Qa(n.status,i);if(n.ok)return o;throw o},f2=(t,e,r)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},J5=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},p2=t=>t.webdriver||!t.languages||t.languages.length===0,g2=()=>new Qa(451,"Unavailable For Headless Browser"),X5=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Z5=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},e3=(t,e)=>t instanceof FormData?t.get(e):t[e],x2=(t,e)=>{if(Z5(t))return!1;X5(t.list,t.watchVariable);const r=e3(e,t.watchVariable);return typeof r!="string"?!1:t.list.includes(r)},y2=()=>new Qa(403,"Forbidden"),t3=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},r3=async(t,e,r)=>{const n=Number(await r.get(t)||0);return e-Date.now()+n},v2=async(t,e,r)=>{if(!e.throttle||!r)return!1;t3(e.throttle,e.id);const n=e.id||t;return await r3(n,e.throttle,r)>0?!0:(await r.set(n,Date.now().toString()),!1)},b2=()=>new Qa(429,"Too Many Requests"),n3=async(t,e,r,n)=>{const i=Hp(n),o=i.publicKey||st.publicKey,a=i.blockHeadless||st.blockHeadless,c=i.storageProvider||st.storageProvider,u={...st.blockList,...i.blockList},d={...st.limitRate,...i.limitRate};return a&&p2(navigator)?Promise.reject(g2()):(f2(o,t,e),J5(r),r&&x2(u,r)?Promise.reject(y2()):await v2(location.pathname,d,c)?Promise.reject(b2()):m2("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"}))},s3=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},i3=t=>typeof t=="string"?document.querySelector(t):t,o3=async(t,e,r,n)=>{const i=Hp(n),o=i.publicKey||st.publicKey,a=i.blockHeadless||st.blockHeadless,c=st.storageProvider||i.storageProvider,u={...st.blockList,...i.blockList},d={...st.limitRate,...i.limitRate};if(a&&p2(navigator))return Promise.reject(g2());const m=i3(r);f2(o,t,e),s3(m);const f=new FormData(m);return x2(u,f)?Promise.reject(y2()):await v2(location.pathname,d,c)?Promise.reject(b2()):(f.append("lib_version","4.4.1"),f.append("service_id",t),f.append("template_id",e),f.append("user_id",o),m2("/api/v1.0/email/send-form",f))},Pm={init:Y5,send:n3,sendForm:o3,EmailJSResponseStatus:Qa},a3={async sendFaqAnswerNotification(t,e,r){try{const n=Nt(fe,"faqItems",t),i=await Vu(n);if(!i.exists())return console.error("FAQ item not found:",t),!1;const o=i.data();if(!o.userEmail)return console.log("No user email associated with this FAQ item"),!1;const a=Be(fe,"users"),c=yi(a,T1("email","==",o.userEmail)),u=await _r(c);let d="Utilisateur";u.empty||(d=u.docs[0].data().displayName||"Utilisateur");const m={to_email:o.userEmail,to_name:d,question:e,answer:r,app_name:"ESIG-prep-guide",faq_url:`${window.location.origin}/Esig-prep-guide/faq`};return await l3(m)}catch(n){return console.error("Error sending FAQ answer notification:",n),!1}}},Dr={SERVICE_ID:"service_vhvuugn",TEMPLATE_ID:"template_93nn8cu",PUBLIC_KEY:"l4eGBb6GgLVODJBOf"},l3=async t=>{var e;if(console.log("Configuration EmailJS utilisée:",{SERVICE_ID:Dr.SERVICE_ID,TEMPLATE_ID:Dr.TEMPLATE_ID,PUBLIC_KEY:"Configuré (commence par "+Dr.PUBLIC_KEY.substring(0,3)+"...)"}),console.log("Préparation de l'envoi d'email avec les données:",t),!t.to_email)return console.error("Erreur: email du destinataire manquant"),!1;try{const r={to_email:t.to_email,to_name:t.to_name||"Utilisateur",question:t.question,answer:t.answer,app_name:t.app_name||"ESIG-prep-guide",faq_url:t.faq_url||window.location.origin+"/Esig-prep-guide/faq"};console.log("Paramètres du template:",r),console.log("Tentative d'envoi d'email via EmailJS..."),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&Pm.init({publicKey:Dr.PUBLIC_KEY,blockHeadless:!1,limitRate:{id:"faq_responses",throttle:3e3}}),console.log("Envoi via EmailJS avec les paramètres:",{serviceId:Dr.SERVICE_ID,templateId:Dr.TEMPLATE_ID,template_params:r,user_id:((e=Dr.PUBLIC_KEY)==null?void 0:e.substring(0,3))+"..."});const i=await Pm.send(Dr.SERVICE_ID,Dr.TEMPLATE_ID,r,Dr.PUBLIC_KEY);return console.log("Résultat de l'envoi d'email:",i.status,i.text),i.status===200}catch(r){return console.error("Détails de l'erreur lors de l'envoi d'email:"),r instanceof Error?(console.error("Message d'erreur:",r.message),console.error("Nom de l'erreur:",r.name),console.error("Stack trace:",r.stack)):console.error("Erreur inconnue:",r),!1}},c3=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(null),[i,o]=k.useState(null);return{isSending:t,sendSuccess:r,errorMessage:i,sendFaqAnswerNotification:async(c,u,d)=>{e(!0),n(null),o(null);try{const m=await a3.sendFaqAnswerNotification(c,u,d);return n(m),m}catch(m){const f=m instanceof Error?m.message:"Une erreur est survenue lors de l'envoi de la notification";return o(f),console.error("Failed to send FAQ answer notification:",m),!1}finally{e(!1)}}}},u3=()=>{const[t]=cw(),e=gr(),{currentUser:r}=ut(),{sendFaqAnswerNotification:n}=c3(),{guideSections:i,addGuideSection:o,updateGuideSection:a,deleteGuideSection:c,resources:u,faqItems:d,addFAQItem:m,updateFAQItem:f,deleteFAQItem:g}=to(),j=t.get("new")==="section",C=t.get("new")==="faq",P=j?null:t.get("edit")&&i.some(U=>U.id===t.get("edit"))?t.get("edit"):null,R=C?null:t.get("edit")&&d.some(U=>U.id===t.get("edit"))?t.get("edit"):null,[_,w]=k.useState(""),[T,D]=k.useState("post-cps"),[L,V]=k.useState(""),[E,x]=k.useState(1),[y,v]=k.useState([]),[N,A]=k.useState(""),[S,re]=k.useState(""),[ae,ce]=k.useState(""),[Z,q]=k.useState("post-cps"),[W,J]=k.useState(!0),[le,ee]=k.useState(!1),[me,Ge]=k.useState(!1),[dt,Gt]=k.useState("section"),[$t,ht]=k.useState(!1),[nr,B]=k.useState(null);k.useEffect(()=>{if(P){const U=i.find(ue=>ue.id===P);U&&(w(U.title),D(U.phase),V(U.content),x(U.order),v(Array.isArray(U.resources)?U.resources:[]))}else if(j){w(""),D("post-cps"),V("");const U=i.filter(ue=>ue.phase==="post-cps");x(U.length>0?Math.max(...U.map(ue=>ue.order))+1:1),v([])}if(R){const U=d.find(ue=>ue.id===R);U&&(A(U.question),re(U.answer),ce(U.category||""),q(U.phase),J(!!U.isApproved),ee(!!U.isAnswered))}else C&&(A(""),re(""),ce(""),q("post-cps"),J(!0),ee(!1))},[P,j,i,R,C,d]);const Ie=()=>{re(""),ee(!1)},$e=U=>{const ue=U.trim()!==""&&U!=="Cette question est en attente de réponse par notre équipe.";ee(ue)},Tt=U=>{if(U.preventDefault(),C||R)if(R){const ue=S.trim()!==""&&S!=="Cette question est en attente de réponse par notre équipe.";ee(ue);const mt=d.find(Wr=>Wr.id===R),Vt=(mt==null?void 0:mt.isAnswered)||!1;f(R,{question:N,answer:S,category:ae,phase:Z,isApproved:W,isAnswered:ue}),ue&&!Vt&&R&&(ht(!0),B(null),n(R,N,S).then(Wr=>{Wr?(console.log("Email de notification envoyé avec succès"),B("success"),setTimeout(()=>{ht(!1)},5e3)):(console.error("Échec de l'envoi de l'email de notification"),B("error"),setTimeout(()=>{ht(!1)},5e3))}).catch(Wr=>{console.error("Erreur lors de l'envoi de l'email de notification:",Wr),B("error"),setTimeout(()=>{ht(!1)},5e3)})),Jr({type:"Modification",target:"FAQ",targetId:R,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{question:N}})}else{const ue=S.trim()!==""&&S!=="Cette question est en attente de réponse par notre équipe.";ee(ue),m({question:N,answer:S,category:ae,phase:Z,isApproved:W,isAnswered:ue,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Jr({type:"Ajout",target:"FAQ",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{question:N}})}else P?(a(P,{title:_,phase:T,content:L,order:E,resources:y}),Jr({type:"Modification",target:"Section",targetId:P,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:_}})):(o({title:_,phase:T,content:L,order:E,resources:y}),Jr({type:"Ajout",target:"Section",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:_}}));e("/admin")},sr=U=>{Gt(U),Ge(!0)},Oe=()=>{dt==="section"&&P?(c(P),Jr({type:"Suppression",target:"Section",targetId:P,user:r==null?void 0:r.uid,details:{title:_}}),e("/admin/content")):dt==="faq"&&R&&(g(R),Jr({type:"Suppression",target:"FAQ",targetId:R,user:r==null?void 0:r.uid,details:{question:N}}),e("/admin/content")),Ge(!1)},Mt=U=>{y.includes(U)?v(y.filter(ue=>ue!==U)):v([...y,U])},Hr=u.filter(U=>U.phase===T),It={"post-cps":i.filter(U=>U.phase==="post-cps").sort((U,ue)=>U.order-ue.order),"during-process":i.filter(U=>U.phase==="during-process").sort((U,ue)=>U.order-ue.order),"pre-arrival":i.filter(U=>U.phase==="pre-arrival").sort((U,ue)=>U.order-ue.order)};return s.jsxs("div",{className:"bg-gray-50 min-h-screen relative",children:[$t&&s.jsxs("div",{className:`fixed top-6 right-6 p-4 rounded-md shadow-md z-50 flex items-center transition-all duration-300 ease-in-out ${nr==="success"?"bg-green-100 border-l-4 border-green-500":nr==="error"?"bg-red-100 border-l-4 border-red-500":"bg-blue-100 border-l-4 border-blue-500"}`,children:[nr==="success"?s.jsx(a5,{className:"w-5 h-5 text-green-600 mr-3"}):nr==="error"?s.jsx(t5,{className:"w-5 h-5 text-red-600 mr-3"}):s.jsx(Up,{className:"w-5 h-5 text-blue-600 mr-3 animate-pulse"}),s.jsx("div",{children:nr==="success"?s.jsx("p",{className:"text-green-800 font-medium",children:"Email de notification envoyé avec succès!"}):nr==="error"?s.jsx("p",{className:"text-red-800 font-medium",children:"Échec de l'envoi de l'email de notification."}):s.jsx("p",{className:"text-blue-800 font-medium",children:"Envoi de la notification par email..."})})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:j?"Ajouter une nouvelle section":C?"Ajouter une question FAQ":R?"Modifier la FAQ":P?"Modifier la section":"Édition"}),s.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:C||R?s.jsx("form",{onSubmit:Tt,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),s.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:N,onChange:U=>A(U.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),R&&s.jsx("button",{type:"button",onClick:Ie,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),s.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:S,onChange:U=>{re(U.target.value),$e(U.target.value)},required:!0}),s.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${le?"bg-green-500":"bg-yellow-500"} mr-2`}),s.jsx("span",{className:"text-gray-600",children:le?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:ae,onChange:U=>ce(U.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Z,onChange:U=>q(U.target.value),required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:W,onChange:U=>J(U.target.checked)}),s.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:R&&s.jsxs("button",{type:"button",onClick:()=>sr("faq"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(Ia,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Cm,{className:"mr-2 h-4 w-4"}),C?"Ajouter":"Enregistrer"]})]})]})]})}):s.jsx("form",{onSubmit:Tt,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),s.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:_,onChange:U=>w(U.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:T,onChange:U=>{const ue=U.target.value;D(ue);const mt=i.filter(Vt=>Vt.phase===ue);x(mt.length>0?Math.max(...mt.map(Vt=>Vt.order))+1:1),v([])},required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),s.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:U=>x(parseInt(U.target.value)),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),s.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:U=>V(U.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(Hr)&&Hr.length>0?s.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:Hr.map(U=>s.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[s.jsx("input",{type:"checkbox",id:`resource-${U.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(U.id),onChange:()=>Mt(U.id)}),s.jsx("label",{htmlFor:`resource-${U.id}`,className:"ml-3 block text-sm text-gray-700",children:U.title})]},U.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:P&&s.jsxs("button",{type:"button",onClick:()=>sr("section"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(Ia,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Cm,{className:"mr-2 h-4 w-4"}),j?"Ajouter":"Enregistrer"]})]})]})]})})})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),s.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(It["post-cps"])&&It["post-cps"].length>0?s.jsx("ul",{className:"space-y-2",children:It["post-cps"].map(U=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===U.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),s.jsx("span",{className:"flex-grow",children:U.title}),s.jsx(Yd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(It["during-process"])&&It["during-process"].length>0?s.jsx("ul",{className:"space-y-2",children:It["during-process"].map(U=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===U.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),s.jsx("span",{className:"flex-grow",children:U.title}),s.jsx(Yd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(It["pre-arrival"])&&It["pre-arrival"].length>0?s.jsx("ul",{className:"space-y-2",children:It["pre-arrival"].map(U=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/content?edit=${U.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===U.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:U.order}),s.jsx("span",{className:"flex-grow",children:U.title}),s.jsx(Yd,{className:"w-4 h-4 text-gray-400"})]})},U.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{className:"mt-8 border-t pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),s.jsxs("button",{onClick:()=>e("/admin/content?new=faq"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const U={};return d.forEach(ue=>{const mt=ue.category||"Non catégorisé";U[mt]||(U[mt]=[]),U[mt].push(ue)}),Object.entries(U).map(([ue,mt])=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:ue}),mt.length>0?s.jsx("ul",{className:"space-y-2",children:mt.map(Vt=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/content?edit=${Vt.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${R===Vt.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("span",{className:"flex-grow",children:Vt.question}),!Vt.isAnswered&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),Vt.isApproved?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuvée"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuvée"})]})},Vt.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},ue))})()]})]})]})})]})}),s.jsx(Bp,{isOpen:me,onClose:()=>Ge(!1),onConfirm:Oe,title:`Confirmer la suppression de ${dt==="section"?"la section":"la question FAQ"}`,message:dt==="section"?`Êtes-vous sûr de vouloir supprimer la section "${_}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${N}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})};var d3="rpc",h3="upload",m3="download",Zd="app",eh="user",th="team",f3="noauth",p3="cookie",Yc="dropboxapi.com",My="dropbox.com",Rm={api:"api",notify:"bolt",content:"api-content"},I={};I.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};I.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};I.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};I.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};I.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};I.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};I.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};I.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};I.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};I.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};I.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};I.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};I.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};I.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};I.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};I.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};I.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};I.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};I.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};I.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};I.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};I.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};I.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};I.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};I.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};I.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};I.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};I.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};I.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};I.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};I.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};I.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};I.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};I.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};I.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};I.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};I.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};I.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};I.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};I.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};I.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};I.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};I.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};I.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};I.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};I.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};I.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};I.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};I.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};I.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};I.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};I.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};I.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};I.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};I.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};I.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};I.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};I.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};I.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};I.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};I.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};I.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};I.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};I.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};I.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};I.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};I.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};I.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};I.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};I.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};I.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};I.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};I.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};I.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};I.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};I.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};I.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};I.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};I.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};I.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};I.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};I.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};I.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};I.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};I.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};I.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};I.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};I.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};I.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};I.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};I.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};I.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};I.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};I.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};I.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};I.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};I.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};I.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};I.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};I.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};I.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};I.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};I.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};I.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};I.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};I.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};I.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};I.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};I.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};I.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};I.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};I.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};I.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};I.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};I.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};I.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};I.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};I.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};I.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};I.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};I.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};I.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};I.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};I.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};I.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};I.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};I.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};I.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};I.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};I.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};I.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};I.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};I.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};I.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};I.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};I.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};I.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};I.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};I.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};I.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};I.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};I.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};I.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};I.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};I.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};I.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};I.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};I.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};I.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};I.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function g3(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var rh=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yc,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return n?(r!==Yc&&Rm[e]!==void 0&&(e=Rm[e],n="-"),"https://".concat(e).concat(n).concat(r,"/2/")):"https://".concat(r,"/2/")},x3=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:My;return e!==My&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},Vy=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yc,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",n="api";return e!==Yc&&(n=Rm[n],r="-"),"https://".concat(n).concat(r).concat(e,"/oauth2/token")};function Oy(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,g3)}function y3(t){return new Date(Date.now()+t*1e3)}function Fy(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof E2>"u"||typeof window<"u"}function nh(){return typeof window<"u"}function sh(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Dl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function sc(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sc=function(r){return typeof r}:sc=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sc(t)}function v3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ka(t,e)}function w3(t){var e=w2();return function(){var n=Ca(t),i;if(e){var o=Ca(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return _3(this,i)}}function _3(t,e){return e&&(sc(e)==="object"||typeof e=="function")?e:j3(t)}function j3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dm(t){var e=typeof Map=="function"?new Map:void 0;return Dm=function(n){if(n===null||!N3(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return ic(n,arguments,Ca(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),ka(i,n)},Dm(t)}function ic(t,e,r){return w2()?ic=Reflect.construct:ic=function(i,o,a){var c=[null];c.push.apply(c,o);var u=Function.bind.apply(i,c),d=new u;return a&&ka(d,a.prototype),d},ic.apply(null,arguments)}function w2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function N3(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ka(t,e){return ka=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},ka(t,e)}function Ca(t){return Ca=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ca(t)}var E3=function(t){b3(r,t);var e=w3(r);function r(n,i,o){var a;return v3(this,r),a=e.call(this,"Response failed with a ".concat(n," code")),a.name="DropboxResponseError",a.status=n,a.headers=i,a.error=o,a}return r}(Dm(Error));function S3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _2=function t(e,r,n){S3(this,t),this.status=e,this.headers=r,this.result=n};function j2(t){return t.text().then(function(e){var r;try{r=JSON.parse(e)}catch{r=e}throw new E3(t.status,t.headers,r)})}function Jc(t){return t.ok?t.text().then(function(e){var r;try{r=JSON.parse(e)}catch{r=e}return new _2(t.status,t.headers,r)}):j2(t)}function T3(t){return t.ok?new Promise(function(e){Fy()?t.blob().then(function(r){return e(r)}):t.buffer().then(function(r){return e(r)})}).then(function(e){var r=JSON.parse(t.headers.get("dropbox-api-result"));return Fy()?r.fileBlob=e:r.fileBinary=e,new _2(t.status,t.headers,r)}):j2(t)}function I3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function C3(t,e,r){return e&&k3(t.prototype,e),t}var Ll,hs,ih,A3=300*1e3,qy=128,P3=["legacy","offline","online"],R3=["code","token"],D3=["none","user","team"],L3=function(){function t(e){I3(this,t),e=e||{},nh()?(Ll=window.fetch.bind(window),hs=window.crypto||window.msCrypto):sh()?(Ll=self.fetch.bind(self),hs=self.crypto):(Ll=require("node-fetch"),hs=require("crypto")),typeof TextEncoder>"u"?ih=require("util").TextEncoder:ih=TextEncoder,this.fetch=e.fetch||Ll,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return C3(t,[{key:"setAccessToken",value:function(r){this.accessToken=r}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(r){this.clientId=r}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(r){this.clientSecret=r}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(r){this.refreshToken=r}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(r){this.accessTokenExpiresAt=r}},{key:"setCodeVerifier",value:function(r){this.codeVerifier=r}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var r=this,n=new ih,i=n.encode(this.codeVerifier),o;if(nh()||sh())return hs.subtle.digest("SHA-256",i).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));o=Dl(u).substr(0,128),r.codeChallenge=o});var a=hs.createHash("sha256").update(i).digest();return o=Dl(a),this.codeChallenge=o,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var r;if(nh()||sh()){var n=new Uint8Array(qy),i=hs.getRandomValues(n),o=btoa(i);r=Dl(o).substr(0,128)}else{var a=hs.randomBytes(qy);r=Dl(a).substr(0,128)}return this.codeVerifier=r,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(r,n){var i=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,m=this.getClientId(),f=x3(this.domain);if(!m)throw new Error("A client id is required. You can set the client id using .setClientId().");if(o!=="code"&&!r)throw new Error("A redirect uri is required.");if(!R3.includes(o))throw new Error("Authorization type must be code or token");if(a&&!P3.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!D3.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var g;return o==="code"?g="".concat(f,"?response_type=code&client_id=").concat(m):g="".concat(f,"?response_type=token&client_id=").concat(m),r&&(g+="&redirect_uri=".concat(r)),n&&(g+="&state=".concat(n)),a&&(g+="&token_access_type=".concat(a)),c&&(g+="&scope=".concat(c.join(" "))),u!=="none"&&(g+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return g+="&code_challenge_method=S256",g+="&code_challenge=".concat(i.codeChallenge),g}):Promise.resolve(g)}},{key:"getAccessTokenFromCode",value:function(r,n){var i=this.getClientId(),o=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=Vy(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(n),a+="&client_id=".concat(i),o)a+="&client_secret=".concat(o);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}r&&(a+="&redirect_uri=".concat(r));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return Jc(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var r=this.getRefreshToken()&&this.getClientId(),n=!this.getAccessTokenExpiresAt()||new Date(Date.now()+A3)>=this.getAccessTokenExpiresAt(),i=!this.getAccessToken();return(n||i)&&r?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.getClientId(),o=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");if(n&&!(n instanceof Array))throw new Error("Scope must be an array of strings");var a=Vy(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:i,refresh_token:this.getRefreshToken()};o&&(u.client_secret=o),n&&(u.scope=n.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(i),o&&(a+="&client_secret=".concat(o)),n&&(a+="&scope=".concat(n.join(" ")));return this.fetch(a,c).then(function(d){return Jc(d)}).then(function(d){r.setAccessToken(d.result.access_token),r.setAccessTokenExpiresAt(y3(d.result.expires_in))})}}]),t}();function M3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V3(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O3(t,e,r){return e&&V3(t.prototype,e),t}var F3=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,cr=function(){function t(e){M3(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new L3(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,I)}return O3(t,[{key:"request",value:function(r,n,i,o,a){switch(a){case d3:return this.rpcRequest(r,n,i,o);case m3:return this.downloadRequest(r,n,i,o);case h3:return this.uploadRequest(r,n,i,o);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(r,n,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:n?JSON.stringify(n):null,headers:{}};return n&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(i,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(rh(o,a.domain,a.domainDelimiter)+r,c)}).then(function(c){return Jc(c)})}},{key:"downloadRequest",value:function(r,n,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":Oy(n)}};return a.setAuthHeaders(i,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(rh(o,a.domain,a.domainDelimiter)+r,c)}).then(function(c){return T3(c)})}},{key:"uploadRequest",value:function(r,n,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=n.contents;delete n.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":Oy(n)}};return a.setAuthHeaders(i,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(rh(o,a.domain,a.domainDelimiter)+r,c)}).then(function(c){return Jc(c)})}},{key:"setAuthHeaders",value:function(r,n){if(r.split(",").length>1){var i=r.replace(" ","").split(",");i.includes(eh)&&this.auth.getAccessToken()?r=eh:i.includes(th)&&this.auth.getAccessToken()?r=th:i.includes(Zd)&&(r=Zd)}switch(r){case Zd:if(this.auth.clientId&&this.auth.clientSecret){var o=F3("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));n.headers.Authorization="Basic ".concat(o)}break;case th:case eh:this.auth.getAccessToken()&&(n.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case f3:case p3:break;default:throw new Error("Unhandled auth type: ".concat(r))}}},{key:"setCommonHeaders",value:function(r){var n=this;if(this.selectUser&&(r.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(r.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(r.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var i=Object.keys(this.customHeaders);i.forEach(function(o){r.headers[o]=n.customHeaders[o]})}}}]),t}();const q3="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function Wp({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:r=!1}){const[n,i]=k.useState(null),[o,a]=k.useState(!1),[c,u]=k.useState(null),[d,m]=k.useState({isOpen:!1,type:null,title:"",message:""}),f=C=>{C.target.files&&C.target.files.length>0&&i(C.target.files[0])},g=()=>{m(C=>({...C,isOpen:!1}))},j=async()=>{if(!n)return;a(!0);const C=new cr({accessToken:q3});let P=!1,R="";try{const _=await C.filesUpload({path:"/"+encodeURIComponent(n.name),contents:n,autorename:!0});P=!0,R=_.result.path_display||_.result.path_lower||"/"+n.name,console.log("Upload réussi!",_);try{const T=(await C.sharingCreateSharedLinkWithSettings({path:R})).result.url.replace("?dl=0","?raw=1");u(T),t&&t(T),m({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox et est prêt à être utilisé.",fileName:n.name,url:T})}catch(w){console.error("Erreur lors de la création du lien partageable:",w),m({isOpen:!0,type:"warning",title:"Upload réussi avec avertissement",message:"Le fichier a été uploadé avec succès, mais la création du lien a échoué. Vous ne pourrez pas y accéder directement.",fileName:n.name})}}catch(_){console.error("Erreur lors de l'upload:",_),m({isOpen:!0,type:"error",title:"Échec de l'upload",message:_ instanceof Error?`${_.message} (${_.constructor.name})`:String(_),fileName:n.name})}a(!1),P&&!d.isOpen&&m({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox.",fileName:n.name})};return s.jsxs("div",{className:r?"flex items-center":"space-y-3",children:[s.jsx("div",{className:r?"flex-grow mr-2":"mb-2",children:s.jsx("input",{type:"file",onChange:f,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),s.jsx("button",{onClick:j,disabled:!n||o,className:`${r?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:o?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(u2,{className:"w-4 h-4 mr-2"}),e]})}),c&&!r&&s.jsx("div",{className:"mt-2 text-sm text-gray-600",children:s.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})}),d.isOpen&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto overflow-hidden",children:[s.jsxs("div",{className:`py-4 px-5 flex items-center ${d.type==="success"?"bg-green-50":d.type==="error"?"bg-red-50":"bg-yellow-50"}`,children:[s.jsxs("div",{className:"flex-shrink-0 mr-3",children:[d.type==="success"&&s.jsx(Ss,{className:"h-6 w-6 text-green-500"}),d.type==="error"&&s.jsx(R5,{className:"h-6 w-6 text-red-500"}),d.type==="warning"&&s.jsx(Js,{className:"h-6 w-6 text-yellow-500"})]}),s.jsx("h3",{className:`text-lg font-medium ${d.type==="success"?"text-green-800":d.type==="error"?"text-red-800":"text-yellow-800"}`,children:d.title}),s.jsx("button",{onClick:g,className:"ml-auto bg-transparent text-gray-400 hover:text-gray-600",children:s.jsx(Us,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700",children:d.message})}),d.fileName&&s.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md mb-4",children:[s.jsx(Ye,{className:"h-5 w-5 text-gray-500 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",title:d.fileName,children:d.fileName})]}),d.url&&s.jsx("div",{className:"mb-4",children:s.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-100 rounded-md hover:bg-blue-100 transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Accéder au fichier"]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium rounded-md transition-colors",children:"Fermer"})})]})]})})]})}const Uy="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function U3({onSelect:t,showTitle:e=!0}){const[r,n]=k.useState([]),[i,o]=k.useState(!0),[a,c]=k.useState(null),[u,d]=k.useState(""),[m,f]=k.useState([]),[g,j]=k.useState(""),C=k.useCallback(V=>{var x;const E=((x=V.split(".").pop())==null?void 0:x.toLowerCase())||"";return["pdf"].includes(E)?"pdf":["doc","docx"].includes(E)?"docx":["xls","xlsx"].includes(E)?"xlsx":["ppt","pptx"].includes(E)?"pptx":["txt"].includes(E)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(E)?"image":["mp4","webm","mkv","avi","mov"].includes(E)?"video":["mp3","wav","ogg"].includes(E)?"audio":["zip","rar","7z","tar","gz"].includes(E)?"zip":"link"},[]),P=V=>{if(V===0)return"0 Bytes";const E=1024,x=["Bytes","KB","MB","GB","TB"],y=Math.floor(Math.log(V)/Math.log(E));return parseFloat((V/Math.pow(E,y)).toFixed(2))+" "+x[y]},R=k.useCallback(async(V="")=>{o(!0),c(null);try{const x=await new cr({accessToken:Uy,fetch}).filesListFolder({path:V,include_deleted:!1}),y=[];for(const v of x.result.entries)if(v[".tag"]==="file"||v[".tag"]==="folder"){const N=v[".tag"]==="folder",A={id:v.id||v.path_lower||"",name:v.name,path:v.path_lower||"",fileType:N?"folder":C(v.name),size:N?0:v.size||0,isFolder:N};y.push(A)}y.sort((v,N)=>v.isFolder&&!N.isFolder?-1:!v.isFolder&&N.isFolder?1:v.name.localeCompare(N.name)),n(y),d(V)}catch(E){console.error("Erreur lors du chargement des fichiers Dropbox:",E),c("Impossible de charger les fichiers depuis Dropbox. Veuillez réessayer.")}finally{o(!1)}},[n,d,o,c,C]),_=async V=>{var E;if(V.url)return V.url;try{const x=new cr({accessToken:Uy,fetch});let y;try{y=await x.sharingCreateSharedLinkWithSettings({path:V.path})}catch(N){const A=N;if(A.status===409&&((E=A.error)!=null&&E.shared_link_already_exists))try{const S=await x.sharingListSharedLinks({path:V.path,direct_only:!0});if(S.result.links&&S.result.links.length>0)y={result:S.result.links[0]};else throw new Error("Aucun lien partagé trouvé")}catch(S){throw console.error("Erreur lors de la récupération des liens existants:",S),S}else throw A}const v=y.result.url.replace("?dl=0","?raw=1");return n(N=>N.map(A=>A.id===V.id?{...A,url:v}:A)),v}catch(x){return console.error("Erreur lors de la création du lien partageable:",x),c("Impossible de créer un lien pour ce fichier. Vérifiez les permissions dans Dropbox."),null}},w=V=>{f([...m,u]),R(V.path)},T=async V=>{if(V.isFolder){w(V);return}const E=await _(V);E&&t(E,V.name,V.fileType)},D=()=>{if(m.length>0){const V=m[m.length-1];f(m.slice(0,-1)),R(V)}},L=g?r.filter(V=>V.name.toLowerCase().includes(g.toLowerCase())):r;return k.useEffect(()=>{R()},[R]),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&s.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[s.jsx("button",{onClick:D,disabled:m.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:g,onChange:V=>j(V.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>R(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),a&&s.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[s.jsx("p",{children:a}),s.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accès Dropbox est configuré correctement dans vos variables d'environnement."}),s.jsx("button",{onClick:()=>R(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Réessayer"})]}),i?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):L.length>0?s.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.jsx("ul",{className:"space-y-1",children:L.map(V=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>T(V),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[s.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:V.isFolder?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):V.fileType==="pdf"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):V.fileType==="image"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:V.name}),!V.isFolder&&s.jsx("div",{className:"text-xs text-gray-500",children:P(V.size)})]})]})},V.id))})}):s.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouvé."})]})]})}const z3=()=>{const[t]=cw(),e=gr(),{currentUser:r}=ut(),{resources:n,addResource:i,updateResource:o,deleteResource:a}=to(),c=t.get("new")==="resource",u=t.get("edit"),[d,m]=k.useState(""),[f,g]=k.useState(""),[j,C]=k.useState("post-cps"),[P,R]=k.useState(""),[_,w]=k.useState(""),[T,D]=k.useState("link"),[L,V]=k.useState(!1),[E,x]=k.useState(!1),[y,v]=k.useState(""),[N,A]=k.useState([]),[S,re]=k.useState(!1),[ae,ce]=k.useState(null),[Z,q]=k.useState(""),[W,J]=k.useState(!1),le=["visa","logement","inscription","documents-administratifs","assurance","transport","finances","santé","cours-préparatoires","vie-étudiante","culture-française","emploi-stage","outils-informatiques","bourses","calendrier-académique","restauration","bibliothèque","sport","associations-étudiantes","procédures-campus-france"],ee=[...new Set([...le,...n.map(B=>B.category).filter(Boolean)])],me=async()=>{const B="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";re(!0),q("");try{const sr=(await new cr({accessToken:B}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(Oe=>Oe[".tag"]==="file").map(Oe=>({id:Oe.id,name:Oe.name,path_lower:Oe.path_lower||"",path_display:Oe.path_display||Oe.name,size:"size"in Oe?Oe.size:void 0,client_modified:"client_modified"in Oe?Oe.client_modified:void 0,is_downloadable:!0}));A(sr)}catch(Ie){console.error("Erreur lors de la récupération des fichiers:",Ie),Ie instanceof Error?q(`Erreur lors de la récupération des fichiers: ${Ie.message}`):q(`Erreur lors de la récupération des fichiers: ${String(Ie)}`)}finally{re(!1)}},Ge=async B=>{var $e;const Ie="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";try{const Tt=new cr({accessToken:Ie});let sr="";try{sr=(await Tt.sharingCreateSharedLinkWithSettings({path:B.path_lower})).result.url}catch(Hr){const It=Hr;if(It.status===409||It.error&&It.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const U=await Tt.sharingListSharedLinks({path:B.path_lower,direct_only:!0});if(U.result.links&&U.result.links.length>0)sr=U.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw Hr}const Oe=sr.replace("?dl=0","?raw=1");ce({...B,shared_link:{url:Oe}}),w(Oe),v(B.name),q("");const Mt=(($e=B.name.split(".").pop())==null?void 0:$e.toLowerCase())||"";return Mt==="pdf"?D("pdf"):["doc","docx"].includes(Mt)?D("docx"):["xls","xlsx"].includes(Mt)?D("xlsx"):["ppt","pptx"].includes(Mt)?D("pptx"):Mt==="txt"?D("txt"):["jpg","jpeg","png","gif","webp","svg"].includes(Mt)?D("image"):["mp4","webm","avi","mov"].includes(Mt)?D("video"):["mp3","wav","ogg"].includes(Mt)?D("audio"):["zip","rar","tar","gz"].includes(Mt)?D("zip"):D("link"),Oe}catch(Tt){console.error("Erreur lors de la création du lien de partage:",Tt),Tt instanceof Error?q(`Erreur lors de la création du lien de partage: ${Tt.message}`):q(`Erreur lors de la création du lien de partage: ${String(Tt)}`)}};k.useEffect(()=>{if(u){const B=n.find(Ie=>Ie.id===u);B&&(m(B.title),g(B.description),C(B.phase),R(B.category),w(B.fileUrl),D(B.fileType))}else c&&(m(""),g(""),C("post-cps"),R(""),w(""),D("link"),me())},[u,c,n]),k.useEffect(()=>{if(u){const B=n.find(Ie=>Ie.id===u);B&&(m(B.title),g(B.description),C(B.phase),R(B.category),w(B.fileUrl),D(B.fileType))}else c&&(m(""),g(""),C("post-cps"),R(""),w(""),D("link"))},[u,c,n]);const dt=B=>{B.preventDefault(),u?(o(u,{title:d,description:f,phase:j,category:P,fileUrl:_,fileType:T}),Jr({type:"Modification",target:"Ressource",targetId:u,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:d}})):(i({title:d,description:f,phase:j,category:P,fileUrl:_,fileType:T,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Jr({type:"Ajout",target:"Ressource",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:d}})),e("/admin")},Gt=()=>{V(!0)},$t=()=>{u&&(a(u),Jr({type:"Suppression",target:"Ressource",targetId:u,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:d}}),e("/admin"))},ht={"post-cps":n.filter(B=>B.phase==="post-cps"),"during-process":n.filter(B=>B.phase==="during-process"),"pre-arrival":n.filter(B=>B.phase==="pre-arrival")},nr=B=>{switch(B){case"pdf":case"doc":case"docx":case"txt":return s.jsx(Ye,{className:"w-5 h-5 text-blue-600"});case"image":return s.jsx(m5,{className:"w-5 h-5 text-green-600"});case"link":return s.jsx(Qd,{className:"w-5 h-5 text-purple-600"});default:return s.jsx(f5,{className:"w-5 h-5 text-gray-600"})}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),s.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsx("form",{onSubmit:dt,className:"space-y-7",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),s.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:B=>m(B.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:B=>g(B.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:j,onChange:B=>C(B.target.value),required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:B=>R(B.target.value),required:!0}),s.jsx("datalist",{id:"categories",children:ee.map((B,Ie)=>s.jsx("option",{value:B},Ie))})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),s.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:T,onChange:B=>D(B.target.value),required:!0,children:[s.jsxs("optgroup",{label:"Documents",children:[s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"doc",children:"Word (.doc)"}),s.jsx("option",{value:"docx",children:"Word (.docx)"}),s.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),s.jsxs("optgroup",{label:"Tableurs",children:[s.jsx("option",{value:"xls",children:"Excel (.xls)"}),s.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),s.jsxs("optgroup",{label:"Présentations",children:[s.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),s.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),s.jsxs("optgroup",{label:"Médias",children:[s.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),s.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),s.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),s.jsxs("optgroup",{label:"Autres",children:[s.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),s.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:T==="link"?"URL du lien":"URL du fichier"}),T!=="link"&&s.jsxs("div",{className:"rounded-md bg-blue-50 p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(C5,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),s.jsx("div",{className:"mt-2 text-sm text-blue-700 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),s.jsx(Wp,{onSuccess:B=>{w(B),v(B.split("/").pop()||"")},buttonText:"Uploader le fichier vers Dropbox"})]}),T==="link"&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex flex-col space-y-4 mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(o2,{className:"w-4 h-4 text-blue-600 mr-2"}),"Fichiers Dropbox"]}),s.jsx("button",{type:"button",onClick:()=>{J(!W),W||me()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",children:W?s.jsxs(s.Fragment,{children:[s.jsx(Us,{className:"w-3 h-3 mr-1"}),"Masquer"]}):s.jsxs(s.Fragment,{children:[s.jsx(Kd,{className:"w-3 h-3 mr-1"}),"Explorer"]})})]}),W&&s.jsxs("div",{className:"mt-2 border rounded-md",children:[s.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 border-b",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Fichiers disponibles"}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("button",{type:"button",onClick:me,className:"inline-flex items-center p-1 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100",disabled:S,children:[S?s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}):s.jsx(zp,{className:"w-3 h-3"}),s.jsx("span",{className:"ml-1",children:"Actualiser"})]})})]}),Z&&s.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(c5,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:Z})]})}),S?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):N.length>0?s.jsx("div",{className:"max-h-60 overflow-y-auto",children:s.jsx("ul",{className:"divide-y",children:N.map(B=>s.jsx("li",{children:s.jsxs("div",{className:`flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer ${(ae==null?void 0:ae.id)===B.id?"bg-blue-50":""}`,onClick:()=>ce(B),children:[s.jsxs("div",{className:"flex items-center flex-grow pr-3 truncate",children:[s.jsx(Ye,{className:"w-4 h-4 text-blue-600 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"truncate",children:[s.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:B.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[B.size?`${Math.round(B.size/1024)} Ko`:"",B.client_modified?` • ${new Date(B.client_modified).toLocaleDateString()}`:""]})]})]}),s.jsxs("button",{type:"button",className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex items-center",onClick:Ie=>{Ie.stopPropagation(),Ge(B)},children:[s.jsx(Fp,{className:"w-3 h-3 mr-1"}),"Utiliser"]})]})},B.id))})}):s.jsx("div",{className:"py-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:N.length===0&&!Z?"Cliquez sur Actualiser pour afficher vos fichiers.":"Aucun fichier trouvé."})})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex-1 flex items-center justify-center gap-2 p-2 border border-blue-200 rounded-md bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm transition-colors",children:[s.jsx(Kd,{className:"w-4 h-4 text-blue-600"}),"Parcourir Dropbox"]})}),ae&&ae.shared_link&&s.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-100 rounded-md",children:[s.jsxs("div",{className:"flex items-center text-sm text-green-800 mb-2",children:[s.jsx(Ss,{className:"w-4 h-4 mr-2 text-green-600"}),"Fichier sélectionné : ",ae.name]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:ae.shared_link.url,className:"flex-1 text-xs py-1 px-2 bg-white border rounded-l-md focus:outline-none"}),s.jsx("button",{type:"button",className:"bg-blue-600 text-white py-1 px-2 rounded-r-md text-xs",onClick:()=>{navigator.clipboard.writeText(ae.shared_link.url)},children:s.jsx(Qc,{className:"w-3 h-3"})})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:s.jsx(Qd,{className:"w-5 h-5 text-gray-500"})}),s.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (Dropbox/Google Drive/etc.)",value:_,onChange:B=>w(B.target.value),required:!0}),y&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",y]})]})]}),T!=="link"&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:s.jsx(Qd,{className:"w-5 h-5 text-gray-500"})}),s.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (générée automatiquement)",value:_,onChange:B=>w(B.target.value),required:!0})]}),s.jsx("button",{type:"button",onClick:()=>x(!0),className:"ml-2 p-2.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md transition-colors",title:"Parcourir les fichiers existants",children:s.jsx(Kd,{className:"w-5 h-5"})})]}),y&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",y]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:u&&s.jsxs("button",{type:"button",onClick:Gt,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[s.jsx(Ia,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Cm,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),s.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(ht["post-cps"])&&ht["post-cps"].length>0?s.jsx("ul",{className:"space-y-2",children:ht["post-cps"].map(B=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${B.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===B.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:nr(B.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:B.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:B.category})]})]})},B.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(ht["during-process"])&&ht["during-process"].length>0?s.jsx("ul",{className:"space-y-2",children:ht["during-process"].map(B=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${B.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===B.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:nr(B.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:B.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:B.category})]})]})},B.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(ht["pre-arrival"])&&ht["pre-arrival"].length>0?s.jsx("ul",{className:"space-y-2",children:ht["pre-arrival"].map(B=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${B.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===B.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:nr(B.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:B.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:B.category})]})]})},B.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),s.jsx(Bp,{isOpen:L,onClose:()=>V(!1),onConfirm:$t,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${d}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),E&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sélectionner un fichier Dropbox"}),s.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-grow overflow-y-auto",children:s.jsx(U3,{onSelect:(B,Ie,$e)=>{w(B),v(Ie),D($e==="pdf"?"pdf":$e==="docx"?"docx":$e==="xlsx"?"xlsx":$e==="pptx"?"pptx":$e==="txt"?"txt":$e==="image"?"image":$e==="video"?"video":$e==="audio"?"audio":$e==="zip"?"zip":"link"),x(!1)},showTitle:!1})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},N2=({open:t,onClose:e,onSubmit:r,loading:n=!1,error:i})=>{const[o,a]=k.useState(""),c=u=>{u.preventDefault(),r(o)};return Pa.useEffect(()=>{t||a("")},[t]),t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:"×"}),s.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),s.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[s.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:o,onChange:u=>a(u.target.value),disabled:n,autoFocus:!0}),i&&s.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||o==="",children:"Valider"})]})]})}):null},B3=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,o]=k.useState(null),[a,c]=k.useState(null),[u,d]=k.useState([]),[m,f]=k.useState(!0),[g,j]=k.useState(null),{currentUser:C}=ut(),P=gr(),R=async()=>{f(!0),j(null);try{const T=await _r(Be(fe,"users")),D=[];T.forEach(L=>{D.push(L.data())}),d(D)}catch{j("Erreur lors du chargement des utilisateurs.")}finally{f(!1)}};k.useEffect(()=>{R()},[]);const _=async(T,D)=>{e(!0),c({uid:T,isAdmin:D}),o(null)},w=async T=>{if(!a)return;if(n(!0),o(null),T!=="ngiryallahrek"){o("Mot de passe incorrect."),n(!1);return}const D=u.find(L=>L.uid===a.uid);if(D!=null&&D.isSuperAdmin&&D.uid!==(C==null?void 0:C.uid)){o("Impossible de modifier le rôle d'un admin principal."),n(!1);return}try{await ki(Nt(fe,"users",a.uid),{isAdmin:!a.isAdmin}),d(L=>L.map(V=>V.uid===a.uid?{...V,isAdmin:!a.isAdmin}:V)),e(!1),c(null)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{n(!1)}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>P("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:m?s.jsx("div",{children:"Chargement..."}):g?s.jsx("div",{className:"text-red-600",children:g}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-100",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2",children:"Nom"}),s.jsx("th",{className:"px-4 py-2",children:"Email"}),s.jsx("th",{className:"px-4 py-2",children:"Admin"}),s.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(T=>s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>P(`/admin/users/${T.uid}`),children:[T.photoURL?s.jsx("img",{src:T.photoURL,alt:T.displayName||T.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):s.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:s.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),T.displayName||T.email,T.isSuperAdmin&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),T.uid===(C==null?void 0:C.uid)&&s.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),s.jsx("td",{className:"px-4 py-2",children:T.email}),s.jsxs("td",{className:"px-4 py-2",children:[T.isAdmin?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(ar,{className:"w-4 h-4 mr-1"})," Admin"]}):s.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),T.isSuperAdmin&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),s.jsxs("td",{className:"px-4 py-2",children:[T.uid!==(C==null?void 0:C.uid)&&!T.isSuperAdmin&&s.jsx("button",{onClick:()=>_(T.uid,T.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${T.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:T.isAdmin?s.jsxs(s.Fragment,{children:[s.jsx(d2,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):s.jsxs(s.Fragment,{children:[s.jsx(h2,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),T.uid!==(C==null?void 0:C.uid)&&T.isSuperAdmin&&s.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},T.uid))})]})})}),s.jsx(N2,{open:t,onClose:()=>{e(!1),c(null),o(null)},onSubmit:w,loading:r,error:i})]})},H3=()=>{const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,o]=k.useState(null),[a,c]=k.useState(!1),{uid:u}=rS(),d=gr(),{currentUser:m}=ut(),[f,g]=k.useState(null),[j,C]=k.useState(!0),[P,R]=k.useState(null),[_,w]=k.useState(!1);k.useEffect(()=>{u&&(async()=>{C(!0),R(null);try{const v=Nt(fe,"users",u),N=await Vu(v);N.exists()?g(N.data()):R("Utilisateur introuvable.")}catch{R("Erreur lors du chargement du profil utilisateur.")}finally{C(!1)}})()},[u]);const T=async()=>{e(!0),o(null)},D=async y=>{if(f){if(n(!0),o(null),y!=="ngiryallahrek"){o("Mot de passe incorrect."),n(!1);return}w(!0);try{await ki(Nt(fe,"users",f.uid),{isAdmin:!f.isAdmin}),g({...f,isAdmin:!f.isAdmin}),e(!1)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{w(!1),n(!1)}}},L=()=>{if(f){if(f.uid===(m==null?void 0:m.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}c(!0)}},V=async()=>{if(f){w(!0);try{await nc(Nt(fe,"users",f.uid)),d("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{w(!1)}}},E=y=>{f&&g({...f,[y.target.name]:y.target.value})},x=async()=>{if(f){w(!0);try{await ki(Nt(fe,"users",f.uid),{displayName:f.displayName,photoURL:f.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{w(!1)}}};return j?s.jsx("div",{className:"p-8",children:"Chargement..."}):P?s.jsx("div",{className:"p-8 text-red-600",children:P}):f?s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[s.jsx("div",{className:"relative mb-6",children:f.photoURL?s.jsx("img",{src:f.photoURL,alt:f.displayName||f.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):s.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:s.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(f==null?void 0:f.displayName)||"",onChange:E,disabled:_||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid)}),(f==null?void 0:f.isSuperAdmin)&&s.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),s.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(f==null?void 0:f.photoURL)||"",onChange:E,disabled:_}),s.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",f.email]}),s.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",f.emailVerified?"Oui":"Non"]}),s.jsxs("div",{className:"mb-6 w-full text-center",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",f.isAdmin?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[s.jsx(ar,{className:"w-5 h-5 mr-1"})," Admin"]}):s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[f.uid!==(m==null?void 0:m.uid)&&s.jsx("button",{onClick:T,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${f.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:_||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),children:f.isAdmin?s.jsxs(s.Fragment,{children:[s.jsx(d2,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):s.jsxs(s.Fragment,{children:[s.jsx(h2,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),f.uid!==(m==null?void 0:m.uid)&&s.jsxs("button",{onClick:L,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:_||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),children:[s.jsx(Ia,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),s.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:x,disabled:_||(f==null?void 0:f.isSuperAdmin)&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid),title:f!=null&&f.isSuperAdmin&&(f==null?void 0:f.uid)!==(m==null?void 0:m.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),s.jsx(N2,{open:t,onClose:()=>{e(!1),o(null)},onSubmit:D,loading:r,error:i}),s.jsx(Bp,{isOpen:a,onClose:()=>c(!1),onConfirm:V,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(f==null?void 0:f.displayName)||(f==null?void 0:f.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},W3=()=>{const[t,e]=k.useState([]),[r,n]=k.useState(!0),[i,o]=k.useState(""),[a,c]=k.useState("all"),[u,d]=k.useState("all"),[m,f]=k.useState("all"),[g,j]=k.useState(!1),[C,P]=k.useState(null),[R,_]=k.useState(!0),w=20,T=x=>{const y=new Date(x);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(y)},D=()=>{const x=new Date;let y=null;switch(m){case"today":y=new Date(x.setHours(0,0,0,0));break;case"week":y=new Date,y.setDate(x.getDate()-7);break;case"month":y=new Date,y.setMonth(x.getMonth()-1);break;default:y=null}return y},L=async(x=!0)=>{try{x?(n(!0),P(null)):j(!0);let y=yi(Be(fe,"adminActivityLog"),I1("date","desc"));const v=D();v&&(y=yi(y,T1("date",">=",v.toISOString()))),y=yi(y,Im(w));const N=await _r(y);_(N.docs.length===w),N.docs.length>0?P(N.docs[N.docs.length-1]):(P(null),_(!1));let S=N.docs.map(re=>({id:re.id,...re.data()}));if(a!=="all"&&(S=S.filter(re=>re.type===a)),u!=="all"&&(S=S.filter(re=>re.target===u)),i){const re=i.toLowerCase();S=S.filter(ae=>{var ce;return((ce=ae.user)==null?void 0:ce.toLowerCase().includes(re))||ae.target.toLowerCase().includes(re)||ae.type.toLowerCase().includes(re)||ae.details&&JSON.stringify(ae.details).toLowerCase().includes(re)})}e(x?S:re=>[...re,...S])}catch(y){console.error("Error fetching activities:",y)}finally{n(!1),j(!1)}};k.useEffect(()=>{L()},[]),k.useEffect(()=>{L()},[a,u,m]);const V=x=>{let y="bg-blue-100 text-blue-800";switch(x.toLowerCase()){case"ajout":y="bg-green-100 text-green-800";break;case"suppression":y="bg-red-100 text-red-800";break;case"modification":y="bg-yellow-100 text-yellow-800";break}return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y}`,children:x})},E=x=>{let y="bg-gray-100 text-gray-800";switch(x.toLowerCase()){case"ressource":y="bg-purple-100 text-purple-800";break;case"section":y="bg-indigo-100 text-indigo-800";break;case"faq":y="bg-blue-100 text-blue-800";break;case"utilisateur":y="bg-pink-100 text-pink-800";break}return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y}`,children:x})};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Q,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:s.jsx(Wt,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),s.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ta,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:i,onChange:x=>o(x.target.value)})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:x=>c(x.target.value),children:[s.jsx("option",{value:"all",children:"Toutes les actions"}),s.jsx("option",{value:"Ajout",children:"Ajout"}),s.jsx("option",{value:"Modification",children:"Modification"}),s.jsx("option",{value:"Suppression",children:"Suppression"})]})}),s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:x=>d(x.target.value),children:[s.jsx("option",{value:"all",children:"Toutes les cibles"}),s.jsx("option",{value:"Ressource",children:"Ressources"}),s.jsx("option",{value:"Section",children:"Sections"}),s.jsx("option",{value:"FAQ",children:"FAQ"}),s.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:x=>f(x.target.value),children:[s.jsx("option",{value:"all",children:"Toute période"}),s.jsx("option",{value:"today",children:"Aujourd'hui"}),s.jsx("option",{value:"week",children:"7 derniers jours"}),s.jsx("option",{value:"month",children:"30 derniers jours"})]})}),s.jsx("button",{onClick:()=>L(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s.jsx(zp,{className:"h-5 w-5"})})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),r?s.jsx("div",{className:"p-8 flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):s.jsx("div",{className:"divide-y divide-gray-200",children:t.map(x=>s.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[s.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[V(x.type),s.jsx("span",{className:"mx-2",children:"•"}),E(x.target)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(n2,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:T(x.date)})]})]}),s.jsx("div",{className:"flex items-start",children:x.user&&s.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[s.jsx(Am,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:x.user})]})}),x.details&&s.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),s.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(x.details).map(([y,v])=>s.jsxs("div",{className:"flex",children:[s.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[y,":"]}),s.jsx("dd",{className:"text-gray-900",children:typeof v=="object"?JSON.stringify(v):String(v)})]},y))})]}),x.targetId&&s.jsxs("div",{className:"mt-1 text-sm",children:[s.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",x.targetId]})]},x.id))}),R&&!r&&s.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:s.jsx("button",{onClick:()=>L(!1),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g?s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},G3=()=>{const t=gr(),{currentUser:e}=ut();return s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:s.jsxs("p",{className:"text-blue-800",children:[s.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),s.jsx("li",{children:s.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),s.jsx("li",{children:s.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),s.jsx("li",{children:s.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),s.jsx("li",{children:s.jsx("a",{href:"#dropbox",className:"text-blue-600 hover:underline",children:"5. Gestionnaire Dropbox"})}),s.jsx("li",{children:s.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"6. Gestion des utilisateurs"})}),s.jsx("li",{children:s.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"7. Journal d'activité"})}),s.jsx("li",{children:s.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"8. Conseils et bonnes pratiques"})})]})]}),s.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(T5,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),s.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),s.jsx("li",{children:"Nombre de sections du guide"}),s.jsx("li",{children:"Nombre de questions FAQ"}),s.jsx("li",{children:"Nombre de ressources disponibles"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),s.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),s.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Op,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),s.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),s.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),s.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),s.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),s.jsx("li",{children:"Modifiez les informations dans le formulaire"}),s.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),s.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),s.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),s.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),s.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),s.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(qp,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"La gestion des FAQ vous permet de répondre aux questions fréquemment posées par les utilisateurs. Les questions peuvent être soumises par les utilisateurs ou créées directement par les administrateurs."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Création et édition de questions/réponses"}),s.jsx("li",{children:"Approbation des questions soumises par les utilisateurs"}),s.jsx("li",{children:"Catégorisation des questions par thème"}),s.jsx("li",{children:"Organisation des FAQ par phase du processus d'immigration"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Traitement des questions utilisateurs:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:'Les questions soumises apparaissent dans la liste avec un statut "En attente de réponse"'}),s.jsx("li",{children:"Pour répondre, sélectionnez la question dans la liste"}),s.jsx("li",{children:"Rédigez votre réponse dans le champ prévu"}),s.jsx("li",{children:"Assignez une catégorie appropriée"}),s.jsx("li",{children:'Cochez "Approuvé" si la question doit être visible publiquement'}),s.jsx("li",{children:'Cliquez sur "Enregistrer" pour publier votre réponse'})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création manuelle de FAQ:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:'Vous pouvez également créer des questions manuellement en cliquant sur "Ajouter une FAQ" et en remplissant tous les champs du formulaire. Cela est utile pour anticiper les questions courantes que les utilisateurs pourraient avoir.'}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Répondez de manière claire et concise"}),s.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),s.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),s.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),s.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),s.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"La section Gestion des ressources vous permet d'ajouter, de modifier et de supprimer des ressources utiles pour les utilisateurs. Ces ressources peuvent être des documents PDF, des liens vers des sites externes, ou d'autres types de supports informatifs."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Ajouter de nouvelles ressources (fichiers PDF, liens, etc.)"}),s.jsx("li",{children:"Catégoriser les ressources par thème et par phase"}),s.jsx("li",{children:"Modifier les informations des ressources existantes"}),s.jsx("li",{children:"Supprimer les ressources obsolètes"}),s.jsx("li",{children:"Prévisualiser les ressources avant publication"}),s.jsx("li",{children:"Explorer et sélectionner des fichiers Dropbox pour vos ressources"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Utilisez des noms de fichiers clairs et descriptifs"}),s.jsx("li",{children:"Ajoutez toujours une description concise mais informative"}),s.jsx("li",{children:"Vérifiez que les liens externes fonctionnent correctement"}),s.jsx("li",{children:"Organisez les ressources par catégories logiques"}),s.jsx("li",{children:"Mettez régulièrement à jour les ressources pour garantir leur pertinence"}),s.jsx("li",{children:"Mettez à jour ou supprimez les ressources obsolètes"}),s.jsx("li",{children:"Utilisez des catégories cohérentes pour faciliter la navigation"})]})]})]}),s.jsxs("div",{id:"dropbox",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(s2,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestionnaire Dropbox"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le Gestionnaire Dropbox vous permet d'interagir directement avec votre compte Dropbox pour gérer vos fichiers, tester la connectivité, créer des liens de partage et uploader de nouveaux documents. Cette fonctionnalité facilite l'intégration de ressources stockées sur Dropbox dans votre guide."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Tester la connectivité avec votre compte Dropbox"}),s.jsx("li",{children:"Lister tous les fichiers présents dans votre compte Dropbox"}),s.jsx("li",{children:"Rechercher des fichiers spécifiques dans votre bibliothèque"}),s.jsx("li",{children:"Uploader de nouveaux fichiers directement depuis l'interface"}),s.jsx("li",{children:"Générer des liens de partage pour vos fichiers"}),s.jsx("li",{children:"Supprimer des fichiers inutilisés depuis l'interface"}),s.jsx("li",{children:"Voir les métadonnées des fichiers (taille, date de modification)"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Étapes pour utiliser le Gestionnaire Dropbox:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Accédez au Gestionnaire Dropbox depuis le tableau de bord"}),s.jsx("li",{children:"Vérifiez le statut de connexion à votre compte Dropbox"}),s.jsx("li",{children:'Si nécessaire, testez la connectivité en cliquant sur le bouton "Tester la connexion"'}),s.jsx("li",{children:"Parcourez la liste des fichiers disponibles ou utilisez la recherche pour trouver un fichier spécifique"}),s.jsx("li",{children:"Pour uploader un nouveau fichier, utilisez la section d'upload dédiée"}),s.jsx("li",{children:"Pour générer un lien de partage, cliquez sur l'icône de lien à côté du fichier souhaité"}),s.jsx("li",{children:"Pour supprimer un fichier, cliquez sur l'icône de corbeille et confirmez votre action"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Intégration avec la Gestion des ressources:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Une fois que vous avez généré un lien de partage pour un fichier Dropbox, vous pouvez l'utiliser dans la Gestion des ressources:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Copiez le lien généré depuis le Gestionnaire Dropbox"}),s.jsx("li",{children:'Dans la Gestion des ressources, créez une nouvelle ressource de type "Lien externe"'}),s.jsx("li",{children:"Collez le lien Dropbox dans le champ URL de la ressource"}),s.jsx("li",{children:"Complétez les autres informations (titre, description, catégorie, etc.)"}),s.jsx("li",{children:"Enregistrez la ressource pour la rendre disponible aux utilisateurs"})]}),s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Astuce:"}),s.jsx("p",{className:"text-blue-800",children:`Vous pouvez également parcourir et sélectionner directement vos fichiers Dropbox lors de la création d'une ressource en utilisant la fonction "Explorer Dropbox" dans le gestionnaire de ressources.`})]}),s.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Attention:"}),s.jsx("p",{className:"text-yellow-800",children:"La suppression d'un fichier Dropbox est définitive. Assurez-vous qu'aucune ressource n'utilise ce fichier avant de le supprimer. Si un fichier est supprimé, les liens pointant vers ce fichier ne fonctionneront plus."})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),s.jsxs("p",{className:"text-gray-700",children:['Accédez au Gestionnaire Dropbox en cliquant sur "Gestionnaire Dropbox" dans le tableau de bord administrateur ou en naviguant directement vers ',s.jsx("span",{className:"text-blue-600",children:"/admin/dropbox"}),"."]})]})]}),s.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Gestion des utilisateurs"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),s.jsx("li",{children:"Consultation des profils utilisateurs"}),s.jsx("li",{children:"Attribution/retrait des droits d'administration"}),s.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),s.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),s.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),s.jsx("li",{children:"Confirmez l'action"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),s.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),s.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),s.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),s.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),s.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(e5,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Journal d'activité"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Connexions et inscriptions"}),s.jsx("li",{children:"Création, modification et suppression de contenu"}),s.jsx("li",{children:"Ajout et modification de ressources"}),s.jsx("li",{children:"Gestion des FAQ"}),s.jsx("li",{children:"Modifications des droits utilisateurs"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Type d'activité"}),s.jsx("li",{children:"Utilisateur (email)"}),s.jsx("li",{children:"Période (date de début et date de fin)"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Suivre les modifications apportées au contenu"}),s.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),s.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),s.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),s.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),s.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),s.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),s.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(c2,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),s.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),s.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),s.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),s.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),s.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),s.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),s.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),s.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),s.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),s.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),s.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(Q,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},$3=()=>{const t=gr(),{currentUser:e}=ut(),[r,n]=k.useState("idle"),[i,o]=k.useState([]),[a,c]=k.useState(!1),[u,d]=k.useState(null),[m,f]=k.useState(""),[g,j]=k.useState(""),[C,P]=k.useState(!1),[R,_]=k.useState(null),[w,T]=k.useState(1),[D]=k.useState(10);k.useEffect(()=>{e!=null&&e.uid||t("/login")},[e,t]);const L=k.useCallback(async()=>{n("loading"),f("");const Z="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";try{const W=await new cr({accessToken:Z}).usersGetCurrentAccount();W&&W.status===200?(n("success"),V()):(n("error"),f("Erreur lors de la connexion à Dropbox"))}catch(q){console.error("Erreur lors de la connexion à Dropbox:",q),n("error"),q instanceof Error?f(`Erreur lors de la connexion à Dropbox: ${q.message}`):f(`Erreur lors de la connexion à Dropbox: ${String(q)}`)}},[]),V=k.useCallback(async()=>{const Z="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";c(!0),f("");try{const le=(await new cr({accessToken:Z}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(ee=>ee[".tag"]==="file").map(ee=>({id:ee.id,name:ee.name,path_lower:ee.path_lower||"",path_display:ee.path_display||ee.name,size:"size"in ee?ee.size:void 0,client_modified:"client_modified"in ee?ee.client_modified:void 0,is_downloadable:!0}));o(le)}catch(q){console.error("Erreur lors de la récupération des fichiers:",q),q instanceof Error?f(`Erreur lors de la récupération des fichiers: ${q.message}`):f(`Erreur lors de la récupération des fichiers: ${String(q)}`)}finally{c(!1)}},[o,f,c]),E=k.useCallback(async Z=>{const q="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";try{const W=new cr({accessToken:q});let J="";try{J=(await W.sharingCreateSharedLinkWithSettings({path:Z.path_lower})).result.url}catch(ee){const me=ee;if(me.status===409||me.error&&me.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const Ge=await W.sharingListSharedLinks({path:Z.path_lower,direct_only:!0});if(Ge.result.links&&Ge.result.links.length>0)J=Ge.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw ee}const le=J.replace("?dl=0","?raw=1");return d({...Z,shared_link:{url:le}}),o(ee=>ee.map(me=>me.id===Z.id?{...me,shared_link:{url:le}}:me)),f(""),le}catch(W){console.error("Erreur lors de la création du lien de partage:",W),W instanceof Error?f(`Erreur lors de la création du lien de partage: ${W.message}`):f(`Erreur lors de la création du lien de partage: ${String(W)}`)}},[]),x=k.useCallback(async Z=>{const q="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";try{await new cr({accessToken:q}).filesDeleteV2({path:Z}),o(J=>J.filter(le=>le.path_lower!==Z)),u&&u.path_lower===Z&&d(null),_(null)}catch(W){console.error("Erreur lors de la suppression du fichier:",W),W instanceof Error?f(`Erreur lors de la suppression du fichier: ${W.message}`):f(`Erreur lors de la suppression du fichier: ${String(W)}`)}},[u]),y=Z=>{if(Z===void 0||Z===0)return"0 Bytes";const q=1024,W=["Bytes","KB","MB","GB","TB"],J=Math.floor(Math.log(Z)/Math.log(q));return parseFloat((Z/Math.pow(q,J)).toFixed(2))+" "+W[J]},v=g?i.filter(Z=>Z.name.toLowerCase().includes(g.toLowerCase())):i,N=w*D,A=N-D,S=v.slice(A,N),re=Math.ceil(v.length/D);k.useEffect(()=>{L()},[L]);const ae=k.useCallback(()=>{P(!0),setTimeout(()=>{P(!1)},3e3),V()},[V]),ce=Z=>T(Z);return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsxs(Q,{to:"/admin",className:"flex items-center text-blue-600 mb-4 hover:text-blue-800 transition-colors",children:[s.jsx(Wt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestionnaire Dropbox"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gérez vos fichiers Dropbox, testez la connectivité et générez des liens de partage."})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Statut de connexion"}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${r==="success"?"bg-green-500":r==="error"?"bg-red-500":r==="loading"?"bg-yellow-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm",children:r==="success"?"Connecté à Dropbox":r==="error"?"Erreur de connexion":r==="loading"?"Vérification de la connexion...":"Statut inconnu"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:r==="loading",children:r==="loading"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Test en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ss,{className:"w-4 h-4 mr-2"}),"Tester la connexion"]})}),s.jsx("button",{onClick:V,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Actualisation..."]}):s.jsxs(s.Fragment,{children:[s.jsx(zp,{className:"w-4 h-4 mr-2"}),"Rafraîchir la liste"]})})]}),m&&s.jsxs("div",{className:"mt-4 bg-red-50 text-red-700 p-3 rounded-md flex items-start",children:[s.jsx(Js,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Erreur"}),s.jsx("p",{className:"text-sm",children:m})]})]}),C&&s.jsxs("div",{className:"mt-4 bg-green-50 text-green-700 p-3 rounded-md flex items-center",children:[s.jsx(Ss,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:"Fichier uploadé avec succès! La liste des fichiers a été actualisée."})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Upload un nouveau fichier"}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(u2,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Sélectionnez un fichier à uploader sur Dropbox"})]}),s.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Le fichier sera uploadé directement sur votre compte Dropbox et apparaitra dans la liste ci-dessous."}),s.jsx(Wp,{onSuccess:ae,buttonText:"Sélectionner un fichier"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Fichiers disponibles"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ta,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"text",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64",placeholder:"Rechercher un fichier...",value:g,onChange:Z=>j(Z.target.value)})]})]}),a?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):v.length>0?s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom du fichier"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taille"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de modification"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(Z=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ye,{className:"flex-shrink-0 h-5 w-5 text-blue-600 mr-2"}),s.jsx("div",{className:"text-sm text-gray-900 font-medium truncate max-w-xs",children:Z.name})]})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-500",children:y(Z.size)})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-500",children:Z.client_modified?new Date(Z.client_modified).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>E(Z),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Générer un lien de partage",children:s.jsx(Fp,{className:"h-4 w-4"})}),R===Z.id?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>x(Z.path_lower),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Confirmer la suppression",children:s.jsx(Ss,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>_(null),className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-50 transition-colors",title:"Annuler",children:s.jsx(Us,{className:"h-4 w-4"})})]}):s.jsx("button",{onClick:()=>_(Z.id),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le fichier",children:s.jsx(Ia,{className:"h-4 w-4"})})]})})]},Z.id))})]}),re>1&&s.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[s.jsx("button",{onClick:()=>ce(Math.max(1,w-1)),disabled:w===1,className:`px-3 py-1 rounded-md ${w===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Précédent"}),Array.from({length:re},(Z,q)=>q+1).map(Z=>s.jsx("button",{onClick:()=>ce(Z),className:`w-8 h-8 rounded-md ${w===Z?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:Z},Z)),s.jsx("button",{onClick:()=>ce(Math.min(re,w+1)),disabled:w===re,className:`px-3 py-1 rounded-md ${w===re?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Suivant"})]})]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(Ye,{className:"h-12 w-12 text-gray-400"})}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Aucun fichier trouvé"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Uploadez un fichier ou vérifiez vos paramètres de connexion Dropbox."})]}),u&&u.shared_link&&s.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-md font-medium text-blue-800",children:"Lien de partage généré"}),s.jsx("button",{onClick:()=>d(null),className:"text-blue-700 hover:text-blue-900",children:s.jsx(Us,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(Ye,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("p",{className:"text-blue-700",children:u.name})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:u.shared_link.url,className:"flex-grow p-2 border border-blue-300 rounded-l-md bg-white text-sm focus:outline-none"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(u.shared_link.url),alert("Lien copié dans le presse-papier!")},className:"p-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors",children:s.jsx(Qc,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"mt-2 text-xs text-blue-700",children:"Ce lien peut être utilisé pour ajouter ce fichier comme ressource."})]})]})]})},K3=()=>{const[t,e]=k.useState(""),[r,n]=k.useState(null),[i,o]=k.useState(!0),[a,c]=k.useState(""),[u,d]=k.useState("test1234"),[m,f]=k.useState("idle"),[g,j]=k.useState(""),[C,P]=k.useState([]),[R,_]=k.useState(!1),[w,T]=k.useState(null),[D,L]=k.useState(""),V=async()=>{try{(await _r(Be(fe,"test"))).empty?(await Zr(Be(fe,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(N){const A=N;console.error("Erreur Firestore:",A),e(`Erreur Firestore: ${A.message}`)}},E=async()=>{const N="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";f("loading"),j("");try{const S=await new cr({accessToken:N}).usersGetCurrentAccount();f("success"),e(re=>re+`

Connexion Dropbox réussie! Compte: `+S.result.name.display_name+" (Email: "+S.result.email+")"),await x()}catch(A){console.error("Erreur de connexion Dropbox:",A),f("error"),A instanceof Error?(j(`Erreur de connexion Dropbox: ${A.message}`),e(S=>S+`

Erreur de connexion Dropbox: `+A.message)):(j(`Erreur de connexion Dropbox: ${String(A)}`),e(S=>S+`

Erreur de connexion Dropbox: `+String(A)))}},x=async()=>{const N="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";_(!0),e(A=>A+`

Chargement des fichiers Dropbox...`);try{const ae=(await new cr({accessToken:N}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(ce=>ce[".tag"]==="file").map(ce=>({id:ce.id,name:ce.name,path_lower:ce.path_lower||"",path_display:ce.path_display||ce.name,size:"size"in ce?ce.size:void 0,client_modified:"client_modified"in ce?ce.client_modified:void 0,is_downloadable:!0}));P(ae),e(ce=>ce+`

${ae.length} fichiers trouvés dans Dropbox.`)}catch(A){console.error("Erreur lors de la récupération des fichiers:",A),A instanceof Error?e(S=>S+`

Erreur lors de la récupération des fichiers: `+A.message):e(S=>S+`

Erreur lors de la récupération des fichiers: `+String(A))}finally{_(!1)}},y=async N=>{const A="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";e(S=>S+`

Création d'un lien de partage pour ${N.name}...`);try{const ae=(await new cr({accessToken:A}).sharingCreateSharedLinkWithSettings({path:N.path_lower})).result.url.replace("?dl=0","?raw=1");return L(ae),e(ce=>ce+`

Lien de partage créé avec succès: ${ae}`),T({...N,shared_link:{url:ae}}),ae}catch(S){console.error("Erreur lors de la création du lien de partage:",S),S instanceof Error?e(re=>re+`

Erreur lors de la création du lien de partage: `+S.message):e(re=>re+`

Erreur lors de la création du lien de partage: `+String(S))}},v=async()=>{try{const N=await $w(wt,a,u);n(N.user),await hm(wt,a,u),e(A=>A+`
Authentification réussie!`)}catch(N){const A=N;if(A.code==="auth/email-already-in-use"){const S=await hm(wt,a,u);n(S.user),e(re=>re+`
Connexion réussie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",N),e(S=>S+`
Erreur d'authentification: ${A.message}`)}};return k.useEffect(()=>{const N=wt.onAuthStateChanged(A=>{n(A),A&&c(A.email||""),o(!1)});return()=>N()},[]),i?s.jsx("div",{className:"p-4",children:"Chargement..."}):s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),s.jsxs("p",{children:["Utilisateur: ",r?r.email:"Non connecté"]}),s.jsxs("p",{children:["UID: ",(r==null?void 0:r.uid)||"N/A"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),s.jsx("button",{onClick:V,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),s.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Zr(Be(fe,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Zr(Be(fe,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Zr(Be(fe,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Zr(Be(fe,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(N){e("Erreur lors de l'initialisation : "+N.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Email:"}),s.jsx("input",{type:"email",value:a,onChange:N=>c(N.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),s.jsx("input",{type:"password",value:u,onChange:N=>d(N.target.value),className:"border p-2 w-full max-w-md"})]}),s.jsx("button",{onClick:v,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:r?"Se connecter":"Créer un compte"})]}),s.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),s.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Dropbox"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"1. Tester la connectivité Dropbox"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vérifiez d'abord si vos identifiants Dropbox sont correctement configurés et si la connexion fonctionne."}),s.jsx("button",{onClick:E,className:`flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors ${m==="loading"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:m==="loading",children:m==="loading"?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Vérification en cours..."]}):"Tester la connectivité Dropbox"}),m==="success"&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:"✅ Connexion Dropbox établie avec succès!"}),m==="error"&&s.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:["❌ ",g]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"2. Explorer les fichiers Dropbox"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Afficher la liste des fichiers disponibles dans votre compte Dropbox et créer des liens partageables."}),s.jsx("button",{onClick:x,className:"flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors bg-blue-600 hover:bg-blue-700 mb-4",disabled:R||m!=="success",children:R?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Chargement des fichiers..."]}):"Lister les fichiers Dropbox"}),C.length>0&&s.jsxs("div",{className:"border rounded-md overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-medium text-sm text-gray-700 border-b",children:["Fichiers disponibles dans Dropbox (",C.length,")"]}),s.jsx("div",{className:"divide-y max-h-60 overflow-auto",children:C.map(N=>s.jsxs("div",{className:`px-4 py-3 flex items-center justify-between hover:bg-blue-50 cursor-pointer ${(w==null?void 0:w.id)===N.id?"bg-blue-50":""}`,onClick:()=>T(N),children:[s.jsxs("div",{className:"flex-1 mr-4 truncate",children:[s.jsx("div",{className:"font-medium text-gray-800",children:N.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[N.size?`${Math.round(N.size/1024)} Ko`:"",N.client_modified?` • Modifié le ${new Date(N.client_modified).toLocaleDateString()}`:""]})]}),s.jsx("button",{className:"px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md text-xs",onClick:A=>{A.stopPropagation(),y(N)},children:"Créer un lien"})]},N.id))})]}),w&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-200",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Fichier sélectionné : ",w.name]}),w.shared_link?s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:w.shared_link.url,className:"flex-1 py-2 px-3 bg-white border rounded-l-md focus:outline-none text-sm"}),s.jsx("button",{className:"bg-blue-600 text-white py-2 px-3 rounded-r-md text-sm",onClick:()=>{navigator.clipboard.writeText(w.shared_link.url),e(N=>N+`

Lien copié dans le presse-papier!`)},children:"Copier"})]}):s.jsx("button",{className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",onClick:()=>y(w),children:"Générer un lien partageable"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"3. Tester l'upload de fichiers"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Uploadez un nouveau fichier vers votre compte Dropbox."}),s.jsx(Wp,{buttonText:"Uploader un fichier test",onSuccess:N=>{e(A=>A+`

Fichier uploadé avec succès! URL: ${N}`),x()}})]})]})]})},Q3=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:s.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),s.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),s.jsxs(Q,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[s.jsx(v5,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),Y3=({open:t,onClose:e,onSubmit:r,loading:n=!1,error:i,label:o})=>{const[a,c]=k.useState(""),u=d=>{d.preventDefault(),r(a)};return Pa.useEffect(()=>{t||c("")},[t]),t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:"×"}),s.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:o||"Confirmez avec votre mot de passe"}),s.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[s.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:n,autoFocus:!0}),i&&s.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||a==="",children:"Valider"})]})]})}):null},J3=()=>{var Z,q;const[t,e]=k.useState(!1),[r,n]=k.useState(!1),[i,o]=k.useState(null),[a,c]=k.useState(null),[u,d]=k.useState(null),[m,f]=k.useState(""),{currentUser:g}=ut(),[j,C]=k.useState((g==null?void 0:g.displayName)||""),[P,R]=k.useState((g==null?void 0:g.photoURL)||""),[_]=k.useState((g==null?void 0:g.email)||""),[w,T]=k.useState(""),[D,L]=k.useState(!1),[V,E]=k.useState(null),[x,y]=k.useState(null),[v,N]=k.useState(null);if(!g)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:s.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const A=wt.currentUser,S=A==null?void 0:A.providerData.some(W=>W.providerId==="password"),re=async W=>{if(W.preventDefault(),E(null),y(null),!S){N("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:j,photoURL:P}),c("profile"),e(!0)},ae=async W=>{if(W.preventDefault(),E(null),y(null),!S){N("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}f(w),c("password"),e(!0)},ce=async W=>{const J=wt.currentUser;if(!J)return;n(!0),o(null);const le=$s.credential(J.email||"",W);try{await sk(J,le),a==="profile"&&u?(await Kw(J,{displayName:u.displayName,photoURL:u.photoURL}),C(u.displayName),R(u.photoURL),y("Profil mis à jour !")):a==="password"&&m&&(await ok(J,m),T(""),y("Mot de passe mis à jour !")),e(!1),c(null),d(null),f("")}catch{o("Mot de passe incorrect.")}finally{n(!1),L(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:s.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[s.jsxs("div",{className:"relative mb-5",children:[P?s.jsx("img",{src:P,alt:j||_,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):s.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((Z=j==null?void 0:j.charAt(0))==null?void 0:Z.toUpperCase())||((q=_==null?void 0:_.charAt(0))==null?void 0:q.toUpperCase())}),(g==null?void 0:g.emailVerified)&&s.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(g==null?void 0:g.isAdmin)&&s.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[s.jsx(ar,{className:"w-4 h-4"})," Admin"]})]}),s.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:j||_}),s.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:_}),s.jsxs("form",{onSubmit:re,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),s.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:j,onChange:W=>C(W.target.value),placeholder:"Nom affiché",disabled:D})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),s.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:P,onChange:W=>R(W.target.value),placeholder:"URL de la photo",disabled:D})]})]}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:D,children:"Sauvegarder le profil"})]}),s.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),S?s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:ae,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),s.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:W=>T(W.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:D}),s.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:D||w.length<6,children:"Mettre à jour le mot de passe"})]}),s.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{E(null),y(null);try{await dm(wt,_),y("Un email de réinitialisation a été envoyé à votre adresse.")}catch{E("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):s.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[s.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),s.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{E(null),y(null);try{await dm(wt,_),y("Un email de réinitialisation a été envoyé à votre adresse.")}catch{E("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(V||x)&&s.jsx("div",{className:`mt-6 text-center text-sm font-medium ${V?"text-red-600":"text-green-600"}`,children:V||x}),v&&s.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:v}),s.jsx(Y3,{open:t,onClose:()=>{e(!1),o(null),c(null)},onSubmit:ce,loading:r,error:i,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},X3=()=>{const[t,e]=k.useState(""),[r,n]=k.useState(""),[i,o]=k.useState(""),[a,c]=k.useState(!1),u=gr(),d=async m=>{m.preventDefault(),o(""),n(""),c(!0);try{await dm(wt,t),n("Un email de réinitialisation a été envoyé.")}catch{o("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[r&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:r}),i&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:i}),s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:m=>e(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})},Z3=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(Op,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Conditions Générales d'Utilisation"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Ce document définit les règles d'utilisation de notre plateforme. Nous vous invitons à le lire attentivement."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:`Les présentes Conditions Générales d'Utilisation (ci-après dénommées "CGU") encadrent l'utilisation de la plateforme ESIG-prep-guide (ci-après dénommée "la Plateforme") mise à disposition par [Votre Nom/Organisation], à destination des étudiants et futurs étudiants de l'ESIGELEC.`}),s.jsx("p",{children:"En utilisant la Plateforme, vous acceptez sans réserve les présentes CGU. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser la Plateforme."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Description du service"})]}),s.jsx("p",{children:"La Plateforme ESIG-prep-guide est un outil d'aide et d'accompagnement destiné aux étudiants et futurs étudiants de l'ESIGELEC. Elle fournit des informations, des ressources et des guides pour faciliter les démarches liées aux études à l'ESIGELEC."}),s.jsx("p",{children:"La Plateforme propose notamment :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des guides d'information pour les différentes phases du parcours étudiant (post-admission, pendant les démarches, pré-arrivée)"}),s.jsx("li",{children:"Une bibliothèque de ressources documentaires"}),s.jsx("li",{children:"Une section FAQ permettant aux utilisateurs de poser des questions et de consulter les réponses"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Xd,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Accès au service"})]}),s.jsx("p",{children:"La Plateforme est accessible gratuitement à tout utilisateur disposant d'un accès à Internet. Tous les frais liés à l'accès à la Plateforme (matériel informatique, logiciels, connexion Internet, etc.) sont à la charge de l'utilisateur."}),s.jsx("p",{children:"Certaines fonctionnalités de la Plateforme nécessitent une inscription préalable. L'utilisateur s'engage à fournir des informations exactes et à jour lors de son inscription."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Propriété intellectuelle"})]}),s.jsx("p",{children:"L'ensemble des éléments constituant la Plateforme (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive de [Votre Nom/Organisation] ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments de la Plateforme, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),s.jsx("p",{children:"Les marques et logos présents sur la Plateforme sont la propriété de leurs détenteurs respectifs. Toute reproduction sans autorisation préalable est interdite."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Js,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Responsabilités"})]}),s.jsx("p",{children:"Les informations fournies sur la Plateforme le sont à titre informatif. [Votre Nom/Organisation] s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur la Plateforme."}),s.jsx("p",{children:"[Votre Nom/Organisation] ne saurait être tenu responsable :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des éventuelles interruptions de la Plateforme pour des raisons de maintenance ou autres"}),s.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),s.jsx("li",{children:"Des conséquences de l'utilisation de la Plateforme"}),s.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur la Plateforme"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Xd,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Obligations de l'utilisateur"})]}),s.jsx("p",{children:"En utilisant la Plateforme, l'utilisateur s'engage à :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Ne pas utiliser la Plateforme à des fins illégales ou interdites par les présentes CGU"}),s.jsx("li",{children:"Ne pas tenter de perturber le bon fonctionnement de la Plateforme"}),s.jsx("li",{children:"Ne pas diffuser de contenu illégal, préjudiciable, menaçant, injurieux, harcelant, diffamatoire, vulgaire, obscène, contraire aux bonnes mœurs, portant atteinte à la vie privée d'une personne ou contrevenant aux lois en vigueur"}),s.jsx("li",{children:"Ne pas collecter ou stocker des données personnelles concernant d'autres utilisateurs"}),s.jsx("li",{children:"Ne pas usurper l'identité d'une autre personne ou entité"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Modification des CGU"})]}),s.jsx("p",{children:"[Votre Nom/Organisation] se réserve le droit de modifier les présentes CGU à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié. L'utilisation continue de la Plateforme après modification des CGU vaut acceptation des nouvelles conditions."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Droit applicable et juridiction compétente"})]}),s.jsx("p",{children:"Les présentes CGU sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Xd,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),s.jsx("p",{children:"Pour toute question relative aux présentes CGU, vous pouvez contacter [Votre Nom/Organisation] à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(ar,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document légal important"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ces conditions générales d'utilisation constituent un contrat juridiquement contraignant entre vous et notre service. En utilisant notre plateforme, vous acceptez ces conditions."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),eD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(gs,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Politique de Confidentialité"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Nous accordons une grande importance à la protection de vos données personnelles. Ce document détaille comment nous les collectons et les utilisons."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(gs,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:'La présente Politique de Confidentialité décrit comment la plateforme ESIG-prep-guide (ci-après "la Plateforme") collecte, utilise et protège vos données personnelles lorsque vous utilisez notre service.'}),s.jsx("p",{children:"Nous respectons votre vie privée et nous nous engageons à protéger vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD) et aux autres lois applicables en matière de protection des données."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Responsable du traitement"})]}),s.jsx("p",{children:"Le responsable du traitement de vos données personnelles est [Votre Nom/Organisation], joignable à l'adresse email suivante : [Votre adresse email]."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(i2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Quelles données collectons-nous ?"})]}),s.jsx("p",{children:"Nous pouvons collecter les types de données personnelles suivants :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Données d'identification"})," : nom, prénom, adresse email, identifiant utilisateur"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données de connexion"})," : adresse IP, type de navigateur, système d'exploitation, date et heure de connexion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données d'utilisation"})," : interactions avec la Plateforme, questions posées, ressources consultées"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données de profil"})," : préférences, centres d'intérêt en lien avec votre utilisation de la Plateforme"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Comment collectons-nous vos données ?"})]}),s.jsx("p",{children:"Nous collectons vos données de différentes manières :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Directement auprès de vous"})," : lorsque vous créez un compte, complétez un formulaire, posez une question, ou interagissez avec notre Plateforme"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Automatiquement"})," : à travers des cookies et technologies similaires lorsque vous naviguez sur notre Plateforme"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Auprès de tiers"})," : lorsque vous vous connectez via des services tiers comme Google"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Pourquoi utilisons-nous vos données ?"})]}),s.jsx("p",{children:"Nous utilisons vos données personnelles pour les finalités suivantes :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Vous permettre de créer et de gérer votre compte utilisateur"}),s.jsx("li",{children:"Vous fournir les services et fonctionnalités de la Plateforme"}),s.jsx("li",{children:"Répondre à vos questions et demandes"}),s.jsx("li",{children:"Personnaliser votre expérience sur la Plateforme"}),s.jsx("li",{children:"Améliorer et développer notre Plateforme"}),s.jsx("li",{children:"Assurer la sécurité de la Plateforme et prévenir les fraudes"}),s.jsx("li",{children:"Respecter nos obligations légales"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Base légale du traitement"})]}),s.jsx("p",{children:"Nous traitons vos données personnelles sur les bases légales suivantes :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Exécution du contrat"})," : le traitement est nécessaire à l'exécution du contrat auquel vous êtes partie (les Conditions Générales d'Utilisation)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Consentement"})," : vous avez donné votre consentement au traitement de vos données à caractère personnel pour une ou plusieurs finalités spécifiques"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Intérêts légitimes"})," : le traitement est nécessaire aux fins des intérêts légitimes poursuivis par nous ou par un tiers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Obligation légale"})," : le traitement est nécessaire au respect d'une obligation légale à laquelle nous sommes soumis"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Durée de conservation"})]}),s.jsx("p",{children:"Nous conservons vos données personnelles uniquement pendant la durée nécessaire à la réalisation des finalités pour lesquelles elles ont été collectées, y compris pour satisfaire aux exigences légales, comptables ou de déclaration."}),s.jsx("p",{children:"Vos données de compte utilisateur sont conservées tant que votre compte est actif. En cas de suppression de votre compte, vos données personnelles sont supprimées ou anonymisées dans un délai raisonnable."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Partage de vos données"})]}),s.jsx("p",{children:"Nous pouvons partager vos données personnelles avec :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Nos prestataires de services"})," : qui nous aident à fournir nos services (hébergement, maintenance, analyses, etc.)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Des tiers avec votre consentement"})," : lorsque vous nous avez autorisés à le faire"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Les autorités compétentes"})," : lorsque nous sommes légalement tenus de le faire"]})]}),s.jsx("p",{children:"Nous ne vendons pas vos données personnelles à des tiers."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(a2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Transfert de données hors UE"})]}),s.jsx("p",{children:"Certains de nos prestataires de services peuvent être basés en dehors de l'Espace Économique Européen (EEE). Lorsque nous transférons vos données personnelles en dehors de l'EEE, nous nous assurons qu'elles bénéficient d'un niveau de protection similaire en mettant en œuvre des garanties appropriées (clauses contractuelles types, décisions d'adéquation, etc.)."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ar,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"10. Vos droits"})]}),s.jsx("p",{children:"Conformément au RGPD, vous disposez des droits suivants concernant vos données personnelles :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Droit d'accès"})," : vous pouvez demander une copie des données personnelles que nous détenons à votre sujet"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit de rectification"})," : vous pouvez demander la correction de données inexactes ou incomplètes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à l'effacement"})," : vous pouvez demander la suppression de vos données personnelles dans certaines circonstances"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à la limitation du traitement"})," : vous pouvez demander la limitation du traitement de vos données personnelles"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à la portabilité des données"})," : vous pouvez demander le transfert de vos données personnelles à un autre responsable du traitement"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit d'opposition"})," : vous pouvez vous opposer au traitement de vos données personnelles dans certaines circonstances"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit de retirer votre consentement"})," : lorsque le traitement est basé sur votre consentement"]})]}),s.jsx("p",{children:"Pour exercer ces droits, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),s.jsx("p",{children:"Si vous estimez, après nous avoir contactés, que vos droits ne sont pas respectés, vous avez le droit d'introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés (CNIL)."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(w5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"11. Sécurité des données"})]}),s.jsx("p",{children:"Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données personnelles contre tout traitement non autorisé ou illégal et contre toute perte, destruction ou dommage accidentels."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(l2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"12. Cookies et technologies similaires"})]}),s.jsx("p",{children:"Notre Plateforme utilise des cookies et des technologies similaires pour améliorer votre expérience et recueillir des informations sur l'utilisation de la Plateforme. Vous pouvez gérer vos préférences en matière de cookies via notre bannière de consentement aux cookies."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"13. Modification de la politique de confidentialité"})]}),s.jsx("p",{children:"Nous pouvons modifier cette politique de confidentialité de temps à autre. Toute modification sera publiée sur cette page et, si les modifications sont importantes, nous vous fournirons une notification plus visible."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"14. Contact"})]}),s.jsx("p",{children:"Pour toute question concernant cette politique de confidentialité ou vos données personnelles, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(d5,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Protection de vos données personnelles"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au Règlement Général sur la Protection des Données (RGPD), vous pouvez à tout moment exercer vos droits d'accès, de rectification, d'effacement, de limitation, de portabilité et d'opposition aux données vous concernant."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),tD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(s5,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Mentions Légales"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Informations légales relatives à l'éditeur du site et aux conditions d'hébergement."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(o5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Éditeur du site"})]}),s.jsx("p",{children:'Le site ESIG-prep-guide (ci-après "le Site") est édité par :'}),s.jsxs("p",{children:[s.jsx("strong",{children:"Nom :"})," Abdoul Ahad Mbacké Diouf",s.jsx("br",{}),s.jsx("strong",{children:"Adresse :"})," [Votre adresse postale]",s.jsx("br",{}),s.jsx("strong",{children:"Email :"})," [Votre adresse email]",s.jsx("br",{}),s.jsx("strong",{children:"Téléphone :"})," [Votre numéro de téléphone]"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Directeur de la publication :"})," Abdoul Ahad Mbacké Diouf"]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(l2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Hébergement"})]}),s.jsx("p",{children:"Le Site est hébergé par :"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Société :"})," GitHub Pages (GitHub Inc.)",s.jsx("br",{}),s.jsx("strong",{children:"Adresse :"})," 88 Colin P Kelly Jr St, San Francisco, CA 94107, États-Unis",s.jsx("br",{}),s.jsx("strong",{children:"Site web :"})," ",s.jsx("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"https://pages.github.com/"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(u5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Propriété intellectuelle"})]}),s.jsx("p",{children:"L'ensemble des éléments constituant le Site (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive d'Abdoul Ahad Mbacké Diouf ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments du Site, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),s.jsx("p",{children:"Toute exploitation non autorisée du Site ou de l'un quelconque des éléments qu'il contient sera considérée comme constitutive d'une contrefaçon et poursuivie conformément aux dispositions des articles L.335-2 et suivants du Code de Propriété Intellectuelle."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Js,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Responsabilité"})]}),s.jsx("p",{children:"Les informations fournies sur le Site le sont à titre informatif. Abdoul Ahad Mbacké Diouf s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur le Site."}),s.jsx("p",{children:"Abdoul Ahad Mbacké Diouf ne saurait être tenu responsable :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des éventuelles interruptions du Site pour des raisons de maintenance ou autres"}),s.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),s.jsx("li",{children:"Des conséquences de l'utilisation du Site"}),s.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur le Site"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(a2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Liens hypertextes"})]}),s.jsx("p",{children:"Le Site peut contenir des liens hypertextes vers d'autres sites internet. Abdoul Ahad Mbacké Diouf n'exerce aucun contrôle sur ces sites et n'assume aucune responsabilité quant à leur contenu."}),s.jsx("p",{children:"La création de liens hypertextes vers le Site est autorisée sous réserve :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Que les liens ne soient pas utilisés à des fins commerciales ou publicitaires"}),s.jsx("li",{children:"Qu'ils n'induisent pas de confusion sur l'origine des services ou contenus du Site"}),s.jsx("li",{children:"Qu'ils ne portent pas atteinte aux intérêts d'Abdoul Ahad Mbacké Diouf"})]}),s.jsx("p",{children:"Abdoul Ahad Mbacké Diouf se réserve le droit de demander la suppression de tout lien hypertexte pointant vers le Site qui ne respecterait pas ces conditions."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Up,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Protection des données personnelles"})]}),s.jsxs("p",{children:["Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, vous disposez de droits concernant vos données personnelles. Pour en savoir plus, veuillez consulter notre ",s.jsx(Q,{to:"/legal/privacy-policy",children:"Politique de Confidentialité"}),"."]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(I5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Droit applicable et juridiction compétente"})]}),s.jsx("p",{children:"Les présentes mentions légales sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(S5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Contact"})]}),s.jsx("p",{children:"Pour toute question relative aux présentes mentions légales, vous pouvez contacter Abdoul Ahad Mbacké Diouf à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(_5,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Informations obligatoires"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément à l'article 6 de la loi n° 2004-575 du 21 juin 2004 pour la confiance dans l'économie numérique, il est précisé aux utilisateurs du site ESIG-prep-guide l'identité des différents intervenants dans le cadre de sa réalisation et de son suivi."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),rD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(Dy,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Charte de Modération"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Règles de bonne conduite pour les interactions sur notre plateforme ESIG-prep-guide."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(On,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:'La présente Charte de Modération définit les règles de bonne conduite applicables aux interactions sur la plateforme ESIG-prep-guide (ci-après "la Plateforme"), notamment en ce qui concerne les questions posées dans la section FAQ et tout autre contenu généré par les utilisateurs.'}),s.jsx("p",{children:"Cette charte vise à garantir un environnement respectueux et constructif pour tous les utilisateurs de la Plateforme."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Dy,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Principes généraux"})]}),s.jsx("p",{children:"Tous les contenus publiés sur la Plateforme doivent respecter les principes suivants :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Respect mutuel entre les utilisateurs"}),s.jsx("li",{children:"Pertinence par rapport aux thématiques de la Plateforme"}),s.jsx("li",{children:"Exactitude et véracité des informations partagées"}),s.jsx("li",{children:"Respect des lois et règlements en vigueur"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Js,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Contenus prohibés"})]}),s.jsx("p",{children:"Sont formellement interdits les contenus :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"À caractère injurieux, diffamatoire, raciste, xénophobe, homophobe, sexiste ou discriminatoire"}),s.jsx("li",{children:"Incitant à la haine, à la violence ou au harcèlement envers une personne ou un groupe"}),s.jsx("li",{children:"À caractère pornographique, obscène ou choquant"}),s.jsx("li",{children:"Violant les droits de propriété intellectuelle d'autrui"}),s.jsx("li",{children:"Comportant des informations personnelles d'un tiers sans son consentement"}),s.jsx("li",{children:"Faisant la promotion d'activités illégales"}),s.jsx("li",{children:"Comportant des liens vers des sites malveillants ou frauduleux"}),s.jsx("li",{children:"Consistant en du spam ou des messages répétitifs"}),s.jsx("li",{children:"Hors sujet ou sans rapport avec les thématiques de la Plateforme"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(h5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Procédure de modération"})]}),s.jsx("p",{children:"La modération des contenus sur la Plateforme s'effectue de la manière suivante :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Modération a priori"})," : les questions posées dans la section FAQ sont examinées par l'équipe de modération avant leur publication"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Signalement"})," : les utilisateurs peuvent signaler tout contenu qu'ils jugent inapproprié"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Suppression"})," : les contenus ne respectant pas la présente charte peuvent être supprimés sans préavis"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Sanctions"})," : en cas de violations répétées, des mesures peuvent être prises à l'encontre des utilisateurs concernés (avertissement, suspension temporaire, suppression du compte)"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qp,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Bonnes pratiques recommandées"})]}),s.jsx("p",{children:"Pour contribuer positivement à la Plateforme, nous encourageons les utilisateurs à :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Formuler des questions claires et précises"}),s.jsx("li",{children:"Utiliser un langage correct et respectueux"}),s.jsx("li",{children:"Vérifier que leur question n'a pas déjà été posée"}),s.jsx("li",{children:"Catégoriser correctement leur question (phase, catégorie)"}),s.jsx("li",{children:"Fournir les informations nécessaires à la compréhension de leur question"}),s.jsx("li",{children:"Partager leur expérience de manière constructive"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Rôle des modérateurs"})]}),s.jsx("p",{children:"Les modérateurs de la Plateforme ont pour mission de :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Veiller au respect de la présente charte"}),s.jsx("li",{children:"Examiner les contenus signalés par les utilisateurs"}),s.jsx("li",{children:"Prendre les mesures appropriées en cas de non-respect des règles"}),s.jsx("li",{children:"Répondre aux questions des utilisateurs concernant la modération"}),s.jsx("li",{children:"Faire évoluer la présente charte si nécessaire"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(g5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Contestation d'une décision de modération"})]}),s.jsx("p",{children:"Si vous contestez une décision de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),s.jsx("p",{children:"Votre demande sera examinée dans les meilleurs délais."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ye,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Modification de la charte"})]}),s.jsx("p",{children:"La présente charte peut être modifiée à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(On,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),s.jsx("p",{children:"Pour toute question concernant cette charte de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(n2,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Règles de la communauté"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Cette charte de modération vise à maintenir un environnement d'échanges respectueux et constructif. En utilisant notre plateforme, vous vous engagez à respecter ces règles pour le bénéfice de tous les utilisateurs."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),nD=()=>{const{currentUser:t,isAdmin:e}=ut();return!t||!e()?s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(gs,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Accès restreint"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Cette page est réservée aux administrateurs de la plateforme."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto border border-gray-100",children:[s.jsx("div",{className:"bg-red-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-6",children:s.jsx(gs,{className:"h-10 w-10 text-red-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accès administrateur requis"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Le registre RGPD est un document à usage interne destiné uniquement aux administrateurs. Veuillez vous connecter avec un compte disposant des privilèges administrateur pour y accéder."}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(Q,{to:"/login",className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:[s.jsx(gs,{className:"w-4 h-4"}),"Se connecter"]})})]})})]}):s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(ar,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Registre de Traitement RGPD"}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex items-center text-red-200 bg-red-700 px-4 py-2 rounded-md inline-block mt-2 shadow-sm",children:[s.jsx(gs,{className:"w-5 h-5 mr-2"}),"Document confidentiel à usage interne uniquement"]})}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Q,{to:"/admin",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Wt,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-5xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-4 rounded-lg border border-red-200",children:[s.jsx(gs,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),s.jsx("h2",{className:"text-xl font-bold text-red-800 m-0",children:"CONFIDENTIEL - Registre des activités de traitement"})]})}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mb-8",children:s.jsx("p",{className:"text-blue-800 font-medium",children:"Conformément à l'article 30 du Règlement Général sur la Protection des Données (RGPD), ce registre recense l'ensemble des traitements de données à caractère personnel mis en œuvre par ESIG-prep-guide en tant que responsable de traitement."})}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-6",children:[s.jsx(cn,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"1. Identité du responsable de traitement"})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Nom :"}),s.jsx("span",{children:"Abdoul Ahad Mbacké Diouf"})]}),s.jsxs("p",{className:"flex items-start mt-3",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Adresse :"}),s.jsx("span",{children:"[Votre adresse postale]"})]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Email :"}),s.jsx("span",{children:"[Votre adresse email]"})]}),s.jsxs("p",{className:"flex items-start mt-3",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Téléphone :"}),s.jsx("span",{children:"[Votre numéro de téléphone]"})]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Délégué à la protection des données :"}),s.jsx("span",{children:'[Nom du DPO ou "Non désigné"]'})]})})]})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(i2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 1: Gestion des comptes utilisateurs"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des comptes utilisateurs et authentification"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Création et gestion de compte"}),s.jsx("li",{children:"Authentification des utilisateurs"}),s.jsx("li",{children:"Récupération de mot de passe"}),s.jsx("li",{children:"Vérification d'email"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Exécution contractuelle (CGU) et consentement"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Identifiants: nom, prénom, adresse email"}),s.jsx("li",{children:"Données de compte: mot de passe (hashé), rôle"}),s.jsx("li",{children:"Données de connexion: timestamp, adresse IP"}),s.jsx("li",{children:"Données de profil: photo (facultatif)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs de la plateforme"}),s.jsx("li",{children:"En externe: Firebase (sous-traitant pour l'authentification)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Aussi longtemps que le compte est actif + 1 an après suppression pour des raisons techniques et légales"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Authentification sécurisée (Firebase Auth)"}),s.jsx("li",{children:"Mots de passe hashés"}),s.jsx("li",{children:"Accès restreint aux données administrateur"}),s.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(Op,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 2: Gestion des questions FAQ"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des questions posées par les utilisateurs"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Recueil des questions des utilisateurs"}),s.jsx("li",{children:"Modération et publication des questions"}),s.jsx("li",{children:"Réponse aux questions"}),s.jsx("li",{children:"Constitution d'une base de connaissances"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Consentement et intérêt légitime"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Identifiants: ID utilisateur, email"}),s.jsx("li",{children:"Contenu: question posée, catégorie, phase"}),s.jsx("li",{children:"Métadonnées: date de soumission, statut de la question"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs et modérateurs"}),s.jsx("li",{children:"En externe: Firebase (sous-traitant pour le stockage des données)"}),s.jsx("li",{children:"Public: questions approuvées et répondues"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsxs("td",{className:"border border-gray-300 p-3",children:[s.jsx("p",{children:"Questions publiées: durée de vie de la plateforme"}),s.jsx("p",{children:"Questions refusées: 1 an après refus"})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Accès restreint aux données complètes (admin uniquement)"}),s.jsx("li",{children:"Modération avant publication"}),s.jsx("li",{children:"Règles de sécurité Firebase"}),s.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(p5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 3: Gestion des ressources documentaires"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion et mise à disposition des ressources documentaires"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Publication de documents informatifs"}),s.jsx("li",{children:"Catégorisation des ressources"}),s.jsx("li",{children:"Accès contrôlé aux ressources"}),s.jsx("li",{children:"Suivi statistique des consultations"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Exécution contractuelle (CGU) et intérêt légitime"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Métadonnées des ressources: titre, description, catégorie, phase"}),s.jsx("li",{children:"Données d'accès: identifiant utilisateur, timestamp d'accès"}),s.jsx("li",{children:"Statistiques anonymisées: nombre de consultations"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme, administrateurs"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs"}),s.jsx("li",{children:"En externe: Firebase (stockage des métadonnées), Dropbox (stockage des fichiers)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsxs("td",{className:"border border-gray-300 p-3",children:[s.jsx("p",{children:"Métadonnées des ressources: durée de vie de la plateforme"}),s.jsx("p",{children:"Données d'accès individuelles: 1 an"})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Authentification requise pour l'accès aux ressources"}),s.jsx("li",{children:"Gestion des droits d'accès"}),s.jsx("li",{children:"Transmission sécurisée via HTTPS"}),s.jsx("li",{children:"Sécurité des liens de téléchargement"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA, Dropbox - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(k5,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Mise à jour du registre"})]}),s.jsx("p",{className:"text-gray-700",children:"Ce registre est mis à jour régulièrement pour refléter l'évolution des traitements de données effectués."}),s.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(Js,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document obligatoire"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au RGPD, ce registre des activités de traitement doit être conservé à jour et présenté sur demande à la CNIL. Il constitue un élément essentiel de la conformité au RGPD."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})]})})})]})};function sD(){return s.jsx(YR,{children:s.jsx(JR,{children:s.jsx(ES,{basename:"/Esig-prep-guide",children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[s.jsx(D5,{}),s.jsx("main",{className:"flex-grow",children:s.jsxs(xS,{children:[s.jsx(ke,{path:"/",element:s.jsx(q5,{})}),s.jsx(ke,{path:"/login",element:s.jsx(U5,{})}),s.jsx(ke,{path:"/register",element:s.jsx(z5,{})}),s.jsx(ke,{path:"/reset-password",element:s.jsx(X3,{})}),s.jsx(ke,{path:"/test-firebase",element:s.jsx(K3,{})}),s.jsx(ke,{path:"/legal/cgu",element:s.jsx(Z3,{})}),s.jsx(ke,{path:"/legal/privacy-policy",element:s.jsx(eD,{})}),s.jsx(ke,{path:"/legal/legal-notice",element:s.jsx(tD,{})}),s.jsx(ke,{path:"/legal/moderation-charter",element:s.jsx(rD,{})}),s.jsx(ke,{path:"/legal/rgpd-registry",element:s.jsx(Kr,{children:s.jsx(nD,{})})}),s.jsx(ke,{path:"/dashboard",element:s.jsx(Rl,{children:s.jsx(B5,{})})}),s.jsx(ke,{path:"/resources",element:s.jsx(Rl,{children:s.jsx(H5,{})})}),s.jsx(ke,{path:"/faq",element:s.jsx(Rl,{children:s.jsx(W5,{})})}),s.jsx(ke,{path:"/profile",element:s.jsx(Rl,{children:s.jsx(J3,{})})}),s.jsx(ke,{path:"/admin",element:s.jsx(Kr,{children:s.jsx(K5,{})})}),s.jsx(ke,{path:"/admin/content",element:s.jsx(Kr,{children:s.jsx(u3,{})})}),s.jsx(ke,{path:"/admin/resources",element:s.jsx(Kr,{children:s.jsx(z3,{})})}),s.jsx(ke,{path:"/admin/users",element:s.jsx(Kr,{children:s.jsx(B3,{})})}),s.jsx(ke,{path:"/admin/users/:uid",element:s.jsx(Kr,{children:s.jsx(H3,{})})}),s.jsx(ke,{path:"/admin/activity",element:s.jsx(Kr,{children:s.jsx(W3,{})})}),s.jsx(ke,{path:"/admin/tutorial",element:s.jsx(Kr,{children:s.jsx(G3,{})})}),s.jsx(ke,{path:"/admin/dropbox",element:s.jsx(Kr,{children:s.jsx($3,{})})}),s.jsx(ke,{path:"*",element:s.jsx(Q3,{})})]})}),s.jsx(M5,{}),s.jsx(V5,{}),s.jsx(O5,{})]})})})})}Pm.init("l4eGBb6GgLVODJBOf");oh.createRoot(document.getElementById("root")).render(s.jsx(Pa.StrictMode,{children:s.jsx(sD,{})}))});export default iD();
