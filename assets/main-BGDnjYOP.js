var d2=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var v6=d2((S6,Oj)=>{function h2(t,e){for(var s=0;s<e.length;s++){const r=e[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function m2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wy={exports:{}},fu={},Qy={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ga=Symbol.for("react.element"),p2=Symbol.for("react.portal"),f2=Symbol.for("react.fragment"),g2=Symbol.for("react.strict_mode"),x2=Symbol.for("react.profiler"),y2=Symbol.for("react.provider"),v2=Symbol.for("react.context"),b2=Symbol.for("react.forward_ref"),w2=Symbol.for("react.suspense"),_2=Symbol.for("react.memo"),j2=Symbol.for("react.lazy"),Wg=Symbol.iterator;function N2(t){return t===null||typeof t!="object"?null:(t=Wg&&t[Wg]||t["@@iterator"],typeof t=="function"?t:null)}var Ky={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yy=Object.assign,Jy={};function oo(t,e,s){this.props=t,this.context=e,this.refs=Jy,this.updater=s||Ky}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xy(){}Xy.prototype=oo.prototype;function Wm(t,e,s){this.props=t,this.context=e,this.refs=Jy,this.updater=s||Ky}var Qm=Wm.prototype=new Xy;Qm.constructor=Wm;Yy(Qm,oo.prototype);Qm.isPureReactComponent=!0;var Qg=Array.isArray,Zy=Object.prototype.hasOwnProperty,Km={current:null},ev={key:!0,ref:!0,__self:!0,__source:!0};function tv(t,e,s){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Zy.call(e,r)&&!ev.hasOwnProperty(r)&&(i[r]=e[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Ga,type:t,key:o,ref:a,props:i,_owner:Km.current}}function E2(t,e){return{$$typeof:Ga,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ym(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ga}function S2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Kg=/\/+/g;function _d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?S2(""+t.key):e.toString(36)}function Zl(t,e,s,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ga:case p2:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+_d(a,0):r,Qg(i)?(s="",t!=null&&(s=t.replace(Kg,"$&/")+"/"),Zl(i,e,s,"",function(d){return d})):i!=null&&(Ym(i)&&(i=E2(i,s+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Kg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Qg(t))for(var c=0;c<t.length;c++){o=t[c];var u=r+_d(o,c);a+=Zl(o,e,s,u,i)}else if(u=N2(t),typeof u=="function")for(t=u.call(t),c=0;!(o=t.next()).done;)o=o.value,u=r+_d(o,c++),a+=Zl(o,e,s,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Il(t,e,s){if(t==null)return t;var r=[],i=0;return Zl(t,r,"","",function(o){return e.call(s,o,i++)}),r}function T2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},ec={transition:null},k2={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:ec,ReactCurrentOwner:Km};function sv(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:Il,forEach:function(t,e,s){Il(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!Ym(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=oo;pe.Fragment=f2;pe.Profiler=x2;pe.PureComponent=Wm;pe.StrictMode=g2;pe.Suspense=w2;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k2;pe.act=sv;pe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yy({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Km.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Zy.call(e,u)&&!ev.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=s;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Ga,type:t.type,key:i,ref:o,props:r,_owner:a}};pe.createContext=function(t){return t={$$typeof:v2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:y2,_context:t},t.Consumer=t};pe.createElement=tv;pe.createFactory=function(t){var e=tv.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:b2,render:t}};pe.isValidElement=Ym;pe.lazy=function(t){return{$$typeof:j2,_payload:{_status:-1,_result:t},_init:T2}};pe.memo=function(t,e){return{$$typeof:_2,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=ec.transition;ec.transition={};try{t()}finally{ec.transition=e}};pe.unstable_act=sv;pe.useCallback=function(t,e){return Ft.current.useCallback(t,e)};pe.useContext=function(t){return Ft.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};pe.useEffect=function(t,e){return Ft.current.useEffect(t,e)};pe.useId=function(){return Ft.current.useId()};pe.useImperativeHandle=function(t,e,s){return Ft.current.useImperativeHandle(t,e,s)};pe.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Ft.current.useMemo(t,e)};pe.useReducer=function(t,e,s){return Ft.current.useReducer(t,e,s)};pe.useRef=function(t){return Ft.current.useRef(t)};pe.useState=function(t){return Ft.current.useState(t)};pe.useSyncExternalStore=function(t,e,s){return Ft.current.useSyncExternalStore(t,e,s)};pe.useTransition=function(){return Ft.current.useTransition()};pe.version="18.3.1";Qy.exports=pe;var T=Qy.exports;const Ha=m2(T),I2=h2({__proto__:null,default:Ha},[T]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2=T,C2=Symbol.for("react.element"),P2=Symbol.for("react.fragment"),R2=Object.prototype.hasOwnProperty,D2=A2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L2={key:!0,ref:!0,__self:!0,__source:!0};function rv(t,e,s){var r,i={},o=null,a=null;s!==void 0&&(o=""+s),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)R2.call(e,r)&&!L2.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:C2,type:t,key:o,ref:a,props:i,_owner:D2.current}}fu.Fragment=P2;fu.jsx=rv;fu.jsxs=rv;Wy.exports=fu;var n=Wy.exports,_h={},nv={exports:{}},ns={},iv={exports:{}},ov={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,Y){var te=F.length;F.push(Y);e:for(;0<te;){var ie=te-1>>>1,de=F[ie];if(0<i(de,Y))F[ie]=Y,F[te]=de,te=ie;else break e}}function s(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var Y=F[0],te=F.pop();if(te!==Y){F[0]=te;e:for(var ie=0,de=F.length,fe=de>>>1;ie<fe;){var He=2*(ie+1)-1,Dt=F[He],ut=He+1,G=F[ut];if(0>i(Dt,te))ut<de&&0>i(G,Dt)?(F[ie]=G,F[ut]=te,ie=ut):(F[ie]=Dt,F[He]=te,ie=He);else if(ut<de&&0>i(G,te))F[ie]=G,F[ut]=te,ie=ut;else break e}}return Y}function i(F,Y){var te=F.sortIndex-Y.sortIndex;return te!==0?te:F.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],m=1,p=null,g=3,y=!1,E=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(F){for(var Y=s(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=F)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=s(d)}}function D(F){if(A=!1,C(F),!E)if(s(u)!==null)E=!0,Ie(L);else{var Y=s(d);Y!==null&&H(D,Y.startTime-F)}}function L(F,Y){E=!1,A&&(A=!1,b(x),x=-1),y=!0;var te=g;try{for(C(Y),p=s(u);p!==null&&(!(p.expirationTime>Y)||F&&!N());){var ie=p.callback;if(typeof ie=="function"){p.callback=null,g=p.priorityLevel;var de=ie(p.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?p.callback=de:p===s(u)&&r(u),C(Y)}else r(u);p=s(u)}if(p!==null)var fe=!0;else{var He=s(d);He!==null&&H(D,He.startTime-Y),fe=!1}return fe}finally{p=null,g=te,y=!1}}var O=!1,j=null,x=-1,v=5,k=-1;function N(){return!(t.unstable_now()-k<v)}function I(){if(j!==null){var F=t.unstable_now();k=F;var Y=!0;try{Y=j(!0,F)}finally{Y?S():(O=!1,j=null)}}else O=!1}var S;if(typeof w=="function")S=function(){w(I)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,xe=se.port2;se.port1.onmessage=I,S=function(){xe.postMessage(null)}}else S=function(){R(I,0)};function Ie(F){j=F,O||(O=!0,S())}function H(F,Y){x=R(function(){F(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,Ie(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(F){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var te=g;g=Y;try{return F()}finally{g=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,Y){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var te=g;g=F;try{return Y()}finally{g=te}},t.unstable_scheduleCallback=function(F,Y,te){var ie=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ie+te:ie):te=ie,F){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=te+de,F={id:m++,callback:Y,priorityLevel:F,startTime:te,expirationTime:de,sortIndex:-1},te>ie?(F.sortIndex=te,e(d,F),s(u)===null&&F===s(d)&&(A?(b(x),x=-1):A=!0,H(D,te-ie))):(F.sortIndex=de,e(u,F),E||y||(E=!0,Ie(L))),F},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(F){var Y=g;return function(){var te=g;g=Y;try{return F.apply(this,arguments)}finally{g=te}}}})(ov);iv.exports=ov;var M2=iv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2=T,rs=M2;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var av=new Set,ha={};function ri(t,e){Wi(t,e),Wi(t+"Capture",e)}function Wi(t,e){for(ha[t]=e,t=0;t<e.length;t++)av.add(e[t])}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jh=Object.prototype.hasOwnProperty,O2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yg={},Jg={};function F2(t){return jh.call(Jg,t)?!0:jh.call(Yg,t)?!1:O2.test(t)?Jg[t]=!0:(Yg[t]=!0,!1)}function q2(t,e,s,r){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U2(t,e,s,r){if(e===null||typeof e>"u"||q2(t,e,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,s,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Xm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jm,Xm);yt[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jm,Xm);yt[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jm,Xm);yt[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zm(t,e,s,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U2(e,s,i,r)&&(s=null),r||i===null?F2(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,r=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?t.setAttributeNS(r,e,s):t.setAttribute(e,s))))}var vr=V2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Al=Symbol.for("react.element"),_i=Symbol.for("react.portal"),ji=Symbol.for("react.fragment"),ep=Symbol.for("react.strict_mode"),Nh=Symbol.for("react.profiler"),lv=Symbol.for("react.provider"),cv=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),Eh=Symbol.for("react.suspense"),Sh=Symbol.for("react.suspense_list"),sp=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),uv=Symbol.for("react.offscreen"),Xg=Symbol.iterator;function Co(t){return t===null||typeof t!="object"?null:(t=Xg&&t[Xg]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,jd;function qo(t){if(jd===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);jd=e&&e[1]||""}return`
`+jd+t}var Nd=!1;function Ed(t,e){if(!t||Nd)return"";Nd=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,c=o.length-1;1<=a&&0<=c&&i[a]!==o[c];)c--;for(;1<=a&&0<=c;a--,c--)if(i[a]!==o[c]){if(a!==1||c!==1)do if(a--,c--,0>c||i[a]!==o[c]){var u=`
`+i[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Nd=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?qo(t):""}function z2(t){switch(t.tag){case 5:return qo(t.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return t=Ed(t.type,!1),t;case 11:return t=Ed(t.type.render,!1),t;case 1:return t=Ed(t.type,!0),t;default:return""}}function Th(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ji:return"Fragment";case _i:return"Portal";case Nh:return"Profiler";case ep:return"StrictMode";case Eh:return"Suspense";case Sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cv:return(t.displayName||"Context")+".Consumer";case lv:return(t._context.displayName||"Context")+".Provider";case tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sp:return e=t.displayName||null,e!==null?e:Th(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return Th(t(e))}catch{}}return null}function B2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Th(e);case 8:return e===ep?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function en(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $2(t){var e=dv(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,o=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=$2(t))}function hv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),r="";return t&&(r=dv(t)?t.checked?"true":"false":t.value),t=r,t!==s?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function kh(t,e){var s=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Zg(t,e){var s=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;s=en(e.value!=null?e.value:s),t._wrapperState={initialChecked:r,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function mv(t,e){e=e.checked,e!=null&&Zm(t,"checked",e,!1)}function Ih(t,e){mv(t,e);var s=en(e.value),r=e.type;if(s!=null)r==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ah(t,e.type,s):e.hasOwnProperty("defaultValue")&&Ah(t,e.type,en(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function e0(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Ah(t,e,s){(e!=="number"||_c(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Uo=Array.isArray;function Li(t,e,s,r){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&r&&(t[s].defaultSelected=!0)}else{for(s=""+en(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function t0(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error($(92));if(Uo(s)){if(1<s.length)throw Error($(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:en(s)}}function pv(t,e){var s=en(e.value),r=en(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),r!=null&&(t.defaultValue=""+r)}function s0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ph(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Pl,gv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Pl=Pl||document.createElement("div"),Pl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Pl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ma(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G2=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){G2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function xv(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function yv(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=xv(s,e[s],r);s==="float"&&(s="cssFloat"),r?t.setProperty(s,i):t[s]=i}}var H2=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(t,e){if(e){if(H2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Dh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lh=null;function rp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Mh=null,Mi=null,Vi=null;function r0(t){if(t=Ka(t)){if(typeof Mh!="function")throw Error($(280));var e=t.stateNode;e&&(e=bu(e),Mh(t.stateNode,t.type,e))}}function vv(t){Mi?Vi?Vi.push(t):Vi=[t]:Mi=t}function bv(){if(Mi){var t=Mi,e=Vi;if(Vi=Mi=null,r0(t),e)for(t=0;t<e.length;t++)r0(e[t])}}function wv(t,e){return t(e)}function _v(){}var Sd=!1;function jv(t,e,s){if(Sd)return t(e,s);Sd=!0;try{return wv(t,e,s)}finally{Sd=!1,(Mi!==null||Vi!==null)&&(_v(),bv())}}function pa(t,e){var s=t.stateNode;if(s===null)return null;var r=bu(s);if(r===null)return null;s=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error($(231,e,typeof s));return s}var Vh=!1;if(dr)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){Vh=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{Vh=!1}function W2(t,e,s,r,i,o,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(m){this.onError(m)}}var Yo=!1,jc=null,Nc=!1,Oh=null,Q2={onError:function(t){Yo=!0,jc=t}};function K2(t,e,s,r,i,o,a,c,u){Yo=!1,jc=null,W2.apply(Q2,arguments)}function Y2(t,e,s,r,i,o,a,c,u){if(K2.apply(this,arguments),Yo){if(Yo){var d=jc;Yo=!1,jc=null}else throw Error($(198));Nc||(Nc=!0,Oh=d)}}function ni(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Nv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function n0(t){if(ni(t)!==t)throw Error($(188))}function J2(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error($(188));return e!==t?null:t}for(var s=t,r=e;;){var i=s.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===s)return n0(i),t;if(o===r)return n0(i),e;o=o.sibling}throw Error($(188))}if(s.return!==r.return)s=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===s){a=!0,s=i,r=o;break}if(c===r){a=!0,r=i,s=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===s){a=!0,s=o,r=i;break}if(c===r){a=!0,r=o,s=i;break}c=c.sibling}if(!a)throw Error($(189))}}if(s.alternate!==r)throw Error($(190))}if(s.tag!==3)throw Error($(188));return s.stateNode.current===s?t:e}function Ev(t){return t=J2(t),t!==null?Sv(t):null}function Sv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Sv(t);if(e!==null)return e;t=t.sibling}return null}var Tv=rs.unstable_scheduleCallback,i0=rs.unstable_cancelCallback,X2=rs.unstable_shouldYield,Z2=rs.unstable_requestPaint,Qe=rs.unstable_now,eN=rs.unstable_getCurrentPriorityLevel,np=rs.unstable_ImmediatePriority,kv=rs.unstable_UserBlockingPriority,Ec=rs.unstable_NormalPriority,tN=rs.unstable_LowPriority,Iv=rs.unstable_IdlePriority,gu=null,Fs=null;function sN(t){if(Fs&&typeof Fs.onCommitFiberRoot=="function")try{Fs.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var Ss=Math.clz32?Math.clz32:iN,rN=Math.log,nN=Math.LN2;function iN(t){return t>>>=0,t===0?32:31-(rN(t)/nN|0)|0}var Rl=64,Dl=4194304;function zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var s=t.pendingLanes;if(s===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=s&268435455;if(a!==0){var c=a&~i;c!==0?r=zo(c):(o&=a,o!==0&&(r=zo(o)))}else a=s&~i,a!==0?r=zo(a):o!==0&&(r=zo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)s=31-Ss(e),i=1<<s,r|=t[s],e&=~i;return r}function oN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function aN(t,e){for(var s=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ss(o),c=1<<a,u=i[a];u===-1?(!(c&s)||c&r)&&(i[a]=oN(c,e)):u<=e&&(t.expiredLanes|=c),o&=~c}}function Fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Av(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Td(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Wa(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ss(e),t[e]=s}function lN(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-Ss(s),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,s&=~o}}function ip(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var r=31-Ss(s),i=1<<r;i&e|t[r]&e&&(t[r]|=e),s&=~i}}var Ne=0;function Cv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Pv,op,Rv,Dv,Lv,qh=!1,Ll=[],Br=null,$r=null,Gr=null,fa=new Map,ga=new Map,Pr=[],cN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o0(t,e){switch(t){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(e.pointerId)}}function Ro(t,e,s,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:s,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Ka(e),e!==null&&op(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uN(t,e,s,r,i){switch(e){case"focusin":return Br=Ro(Br,t,e,s,r,i),!0;case"dragenter":return $r=Ro($r,t,e,s,r,i),!0;case"mouseover":return Gr=Ro(Gr,t,e,s,r,i),!0;case"pointerover":var o=i.pointerId;return fa.set(o,Ro(fa.get(o)||null,t,e,s,r,i)),!0;case"gotpointercapture":return o=i.pointerId,ga.set(o,Ro(ga.get(o)||null,t,e,s,r,i)),!0}return!1}function Mv(t){var e=Nn(t.target);if(e!==null){var s=ni(e);if(s!==null){if(e=s.tag,e===13){if(e=Nv(s),e!==null){t.blockedOn=e,Lv(t.priority,function(){Rv(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var r=new s.constructor(s.type,s);Lh=r,s.target.dispatchEvent(r),Lh=null}else return e=Ka(s),e!==null&&op(e),t.blockedOn=s,!1;e.shift()}return!0}function a0(t,e,s){tc(t)&&s.delete(e)}function dN(){qh=!1,Br!==null&&tc(Br)&&(Br=null),$r!==null&&tc($r)&&($r=null),Gr!==null&&tc(Gr)&&(Gr=null),fa.forEach(a0),ga.forEach(a0)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,rs.unstable_scheduleCallback(rs.unstable_NormalPriority,dN)))}function xa(t){function e(i){return Do(i,t)}if(0<Ll.length){Do(Ll[0],t);for(var s=1;s<Ll.length;s++){var r=Ll[s];r.blockedOn===t&&(r.blockedOn=null)}}for(Br!==null&&Do(Br,t),$r!==null&&Do($r,t),Gr!==null&&Do(Gr,t),fa.forEach(e),ga.forEach(e),s=0;s<Pr.length;s++)r=Pr[s],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pr.length&&(s=Pr[0],s.blockedOn===null);)Mv(s),s.blockedOn===null&&Pr.shift()}var Oi=vr.ReactCurrentBatchConfig,Tc=!0;function hN(t,e,s,r){var i=Ne,o=Oi.transition;Oi.transition=null;try{Ne=1,ap(t,e,s,r)}finally{Ne=i,Oi.transition=o}}function mN(t,e,s,r){var i=Ne,o=Oi.transition;Oi.transition=null;try{Ne=4,ap(t,e,s,r)}finally{Ne=i,Oi.transition=o}}function ap(t,e,s,r){if(Tc){var i=Uh(t,e,s,r);if(i===null)Vd(t,e,r,kc,s),o0(t,r);else if(uN(i,t,e,s,r))r.stopPropagation();else if(o0(t,r),e&4&&-1<cN.indexOf(t)){for(;i!==null;){var o=Ka(i);if(o!==null&&Pv(o),o=Uh(t,e,s,r),o===null&&Vd(t,e,r,kc,s),o===i)break;i=o}i!==null&&r.stopPropagation()}else Vd(t,e,r,null,s)}}var kc=null;function Uh(t,e,s,r){if(kc=null,t=rp(r),t=Nn(t),t!==null)if(e=ni(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Nv(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kc=t,null}function Vv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(eN()){case np:return 1;case kv:return 4;case Ec:case tN:return 16;case Iv:return 536870912;default:return 16}default:return 16}}var Or=null,lp=null,sc=null;function Ov(){if(sc)return sc;var t,e=lp,s=e.length,r,i="value"in Or?Or.value:Or.textContent,o=i.length;for(t=0;t<s&&e[t]===i[t];t++);var a=s-t;for(r=1;r<=a&&e[s-r]===i[o-r];r++);return sc=i.slice(t,1<r?1-r:void 0)}function rc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function l0(){return!1}function is(t){function e(s,r,i,o,a){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(s=t[c],this[c]=s?s(o):o[c]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ml:l0,this.isPropagationStopped=l0,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cp=is(ao),Qa=Ue({},ao,{view:0,detail:0}),pN=is(Qa),kd,Id,Lo,xu=Ue({},Qa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lo&&(Lo&&t.type==="mousemove"?(kd=t.screenX-Lo.screenX,Id=t.screenY-Lo.screenY):Id=kd=0,Lo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),c0=is(xu),fN=Ue({},xu,{dataTransfer:0}),gN=is(fN),xN=Ue({},Qa,{relatedTarget:0}),Ad=is(xN),yN=Ue({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),vN=is(yN),bN=Ue({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wN=is(bN),_N=Ue({},ao,{data:0}),u0=is(_N),jN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=EN[t])?!!e[t]:!1}function up(){return SN}var TN=Ue({},Qa,{key:function(t){if(t.key){var e=jN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?rc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kN=is(TN),IN=Ue({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d0=is(IN),AN=Ue({},Qa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),CN=is(AN),PN=Ue({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),RN=is(PN),DN=Ue({},xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LN=is(DN),MN=[9,13,27,32],dp=dr&&"CompositionEvent"in window,Jo=null;dr&&"documentMode"in document&&(Jo=document.documentMode);var VN=dr&&"TextEvent"in window&&!Jo,Fv=dr&&(!dp||Jo&&8<Jo&&11>=Jo),h0=" ",m0=!1;function qv(t,e){switch(t){case"keyup":return MN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ni=!1;function ON(t,e){switch(t){case"compositionend":return Uv(e);case"keypress":return e.which!==32?null:(m0=!0,h0);case"textInput":return t=e.data,t===h0&&m0?null:t;default:return null}}function FN(t,e){if(Ni)return t==="compositionend"||!dp&&qv(t,e)?(t=Ov(),sc=lp=Or=null,Ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fv&&e.locale!=="ko"?null:e.data;default:return null}}var qN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qN[t.type]:e==="textarea"}function zv(t,e,s,r){vv(r),e=Ic(e,"onChange"),0<e.length&&(s=new cp("onChange","change",null,s,r),t.push({event:s,listeners:e}))}var Xo=null,ya=null;function UN(t){Zv(t,0)}function yu(t){var e=Ti(t);if(hv(e))return t}function zN(t,e){if(t==="change")return e}var Bv=!1;if(dr){var Cd;if(dr){var Pd="oninput"in document;if(!Pd){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Pd=typeof f0.oninput=="function"}Cd=Pd}else Cd=!1;Bv=Cd&&(!document.documentMode||9<document.documentMode)}function g0(){Xo&&(Xo.detachEvent("onpropertychange",$v),ya=Xo=null)}function $v(t){if(t.propertyName==="value"&&yu(ya)){var e=[];zv(e,ya,t,rp(t)),jv(UN,e)}}function BN(t,e,s){t==="focusin"?(g0(),Xo=e,ya=s,Xo.attachEvent("onpropertychange",$v)):t==="focusout"&&g0()}function $N(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(ya)}function GN(t,e){if(t==="click")return yu(e)}function HN(t,e){if(t==="input"||t==="change")return yu(e)}function WN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Is=typeof Object.is=="function"?Object.is:WN;function va(t,e){if(Is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),r=Object.keys(e);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!jh.call(e,i)||!Is(t[i],e[i]))return!1}return!0}function x0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function y0(t,e){var s=x0(t);t=0;for(var r;s;){if(s.nodeType===3){if(r=t+s.textContent.length,t<=e&&r>=e)return{node:s,offset:e-t};t=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=x0(s)}}function Gv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Gv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Hv(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=_c(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QN(t){var e=Hv(),s=t.focusedElem,r=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Gv(s.ownerDocument.documentElement,s)){if(r!==null&&hp(s)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=y0(s,o);var a=y0(s,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KN=dr&&"documentMode"in document&&11>=document.documentMode,Ei=null,zh=null,Zo=null,Bh=!1;function v0(t,e,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Bh||Ei==null||Ei!==_c(r)||(r=Ei,"selectionStart"in r&&hp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zo&&va(Zo,r)||(Zo=r,r=Ic(zh,"onSelect"),0<r.length&&(e=new cp("onSelect","select",null,e,s),t.push({event:e,listeners:r}),e.target=Ei)))}function Vl(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Si={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},Rd={},Wv={};dr&&(Wv=document.createElement("div").style,"AnimationEvent"in window||(delete Si.animationend.animation,delete Si.animationiteration.animation,delete Si.animationstart.animation),"TransitionEvent"in window||delete Si.transitionend.transition);function vu(t){if(Rd[t])return Rd[t];if(!Si[t])return t;var e=Si[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Wv)return Rd[t]=e[s];return t}var Qv=vu("animationend"),Kv=vu("animationiteration"),Yv=vu("animationstart"),Jv=vu("transitionend"),Xv=new Map,b0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function on(t,e){Xv.set(t,e),ri(e,[t])}for(var Dd=0;Dd<b0.length;Dd++){var Ld=b0[Dd],YN=Ld.toLowerCase(),JN=Ld[0].toUpperCase()+Ld.slice(1);on(YN,"on"+JN)}on(Qv,"onAnimationEnd");on(Kv,"onAnimationIteration");on(Yv,"onAnimationStart");on("dblclick","onDoubleClick");on("focusin","onFocus");on("focusout","onBlur");on(Jv,"onTransitionEnd");Wi("onMouseEnter",["mouseout","mouseover"]);Wi("onMouseLeave",["mouseout","mouseover"]);Wi("onPointerEnter",["pointerout","pointerover"]);Wi("onPointerLeave",["pointerout","pointerover"]);ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function w0(t,e,s){var r=t.type||"unknown-event";t.currentTarget=s,Y2(r,e,void 0,t),t.currentTarget=null}function Zv(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var r=t[s],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==o&&i.isPropagationStopped())break e;w0(i,c,d),o=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==o&&i.isPropagationStopped())break e;w0(i,c,d),o=u}}}if(Nc)throw t=Oh,Nc=!1,Oh=null,t}function Ce(t,e){var s=e[Qh];s===void 0&&(s=e[Qh]=new Set);var r=t+"__bubble";s.has(r)||(eb(e,t,2,!1),s.add(r))}function Md(t,e,s){var r=0;e&&(r|=4),eb(s,t,r,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function ba(t){if(!t[Ol]){t[Ol]=!0,av.forEach(function(s){s!=="selectionchange"&&(XN.has(s)||Md(s,!1,t),Md(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,Md("selectionchange",!1,e))}}function eb(t,e,s,r){switch(Vv(e)){case 1:var i=hN;break;case 4:i=mN;break;default:i=ap}s=i.bind(null,e,s,t),i=void 0,!Vh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Vd(t,e,s,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;a=a.return}for(;c!==null;){if(a=Nn(c),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}c=c.parentNode}}r=r.return}jv(function(){var d=o,m=rp(s),p=[];e:{var g=Xv.get(t);if(g!==void 0){var y=cp,E=t;switch(t){case"keypress":if(rc(s)===0)break e;case"keydown":case"keyup":y=kN;break;case"focusin":E="focus",y=Ad;break;case"focusout":E="blur",y=Ad;break;case"beforeblur":case"afterblur":y=Ad;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=c0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=CN;break;case Qv:case Kv:case Yv:y=vN;break;case Jv:y=RN;break;case"scroll":y=pN;break;case"wheel":y=LN;break;case"copy":case"cut":case"paste":y=wN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=d0}var A=(e&4)!==0,R=!A&&t==="scroll",b=A?g!==null?g+"Capture":null:g;A=[];for(var w=d,C;w!==null;){C=w;var D=C.stateNode;if(C.tag===5&&D!==null&&(C=D,b!==null&&(D=pa(w,b),D!=null&&A.push(wa(w,D,C)))),R)break;w=w.return}0<A.length&&(g=new y(g,E,null,s,m),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&s!==Lh&&(E=s.relatedTarget||s.fromElement)&&(Nn(E)||E[hr]))break e;if((y||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,y?(E=s.relatedTarget||s.toElement,y=d,E=E?Nn(E):null,E!==null&&(R=ni(E),E!==R||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=d),y!==E)){if(A=c0,D="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=d0,D="onPointerLeave",b="onPointerEnter",w="pointer"),R=y==null?g:Ti(y),C=E==null?g:Ti(E),g=new A(D,w+"leave",y,s,m),g.target=R,g.relatedTarget=C,D=null,Nn(m)===d&&(A=new A(b,w+"enter",E,s,m),A.target=C,A.relatedTarget=R,D=A),R=D,y&&E)t:{for(A=y,b=E,w=0,C=A;C;C=xi(C))w++;for(C=0,D=b;D;D=xi(D))C++;for(;0<w-C;)A=xi(A),w--;for(;0<C-w;)b=xi(b),C--;for(;w--;){if(A===b||b!==null&&A===b.alternate)break t;A=xi(A),b=xi(b)}A=null}else A=null;y!==null&&_0(p,g,y,A,!1),E!==null&&R!==null&&_0(p,R,E,A,!0)}}e:{if(g=d?Ti(d):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var L=zN;else if(p0(g))if(Bv)L=HN;else{L=$N;var O=BN}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=GN);if(L&&(L=L(t,d))){zv(p,L,s,m);break e}O&&O(t,g,d),t==="focusout"&&(O=g._wrapperState)&&O.controlled&&g.type==="number"&&Ah(g,"number",g.value)}switch(O=d?Ti(d):window,t){case"focusin":(p0(O)||O.contentEditable==="true")&&(Ei=O,zh=d,Zo=null);break;case"focusout":Zo=zh=Ei=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,v0(p,s,m);break;case"selectionchange":if(KN)break;case"keydown":case"keyup":v0(p,s,m)}var j;if(dp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ni?qv(t,s)&&(x="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(x="onCompositionStart");x&&(Fv&&s.locale!=="ko"&&(Ni||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ni&&(j=Ov()):(Or=m,lp="value"in Or?Or.value:Or.textContent,Ni=!0)),O=Ic(d,x),0<O.length&&(x=new u0(x,t,null,s,m),p.push({event:x,listeners:O}),j?x.data=j:(j=Uv(s),j!==null&&(x.data=j)))),(j=VN?ON(t,s):FN(t,s))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(m=new u0("onBeforeInput","beforeinput",null,s,m),p.push({event:m,listeners:d}),m.data=j))}Zv(p,e)})}function wa(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Ic(t,e){for(var s=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=pa(t,s),o!=null&&r.unshift(wa(t,o,i)),o=pa(t,e),o!=null&&r.push(wa(t,o,i))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _0(t,e,s,r,i){for(var o=e._reactName,a=[];s!==null&&s!==r;){var c=s,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,i?(u=pa(s,o),u!=null&&a.unshift(wa(s,u,c))):i||(u=pa(s,o),u!=null&&a.push(wa(s,u,c)))),s=s.return}a.length!==0&&t.push({event:e,listeners:a})}var ZN=/\r\n?/g,eE=/\u0000|\uFFFD/g;function j0(t){return(typeof t=="string"?t:""+t).replace(ZN,`
`).replace(eE,"")}function Fl(t,e,s){if(e=j0(e),j0(t)!==e&&s)throw Error($(425))}function Ac(){}var $h=null,Gh=null;function Hh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wh=typeof setTimeout=="function"?setTimeout:void 0,tE=typeof clearTimeout=="function"?clearTimeout:void 0,N0=typeof Promise=="function"?Promise:void 0,sE=typeof queueMicrotask=="function"?queueMicrotask:typeof N0<"u"?function(t){return N0.resolve(null).then(t).catch(rE)}:Wh;function rE(t){setTimeout(function(){throw t})}function Od(t,e){var s=e,r=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){t.removeChild(i),xa(e);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);xa(e)}function Hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function E0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),Vs="__reactFiber$"+lo,_a="__reactProps$"+lo,hr="__reactContainer$"+lo,Qh="__reactEvents$"+lo,nE="__reactListeners$"+lo,iE="__reactHandles$"+lo;function Nn(t){var e=t[Vs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[hr]||s[Vs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=E0(t);t!==null;){if(s=t[Vs])return s;t=E0(t)}return e}t=s,s=t.parentNode}return null}function Ka(t){return t=t[Vs]||t[hr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function bu(t){return t[_a]||null}var Kh=[],ki=-1;function an(t){return{current:t}}function Re(t){0>ki||(t.current=Kh[ki],Kh[ki]=null,ki--)}function ke(t,e){ki++,Kh[ki]=t.current,t.current=e}var tn={},Ct=an(tn),$t=an(!1),On=tn;function Qi(t,e){var s=t.type.contextTypes;if(!s)return tn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in s)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gt(t){return t=t.childContextTypes,t!=null}function Cc(){Re($t),Re(Ct)}function S0(t,e,s){if(Ct.current!==tn)throw Error($(168));ke(Ct,e),ke($t,s)}function tb(t,e,s){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error($(108,B2(t)||"Unknown",i));return Ue({},s,r)}function Pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||tn,On=Ct.current,ke(Ct,t),ke($t,$t.current),!0}function T0(t,e,s){var r=t.stateNode;if(!r)throw Error($(169));s?(t=tb(t,e,On),r.__reactInternalMemoizedMergedChildContext=t,Re($t),Re(Ct),ke(Ct,t)):Re($t),ke($t,s)}var Js=null,wu=!1,Fd=!1;function sb(t){Js===null?Js=[t]:Js.push(t)}function oE(t){wu=!0,sb(t)}function ln(){if(!Fd&&Js!==null){Fd=!0;var t=0,e=Ne;try{var s=Js;for(Ne=1;t<s.length;t++){var r=s[t];do r=r(!0);while(r!==null)}Js=null,wu=!1}catch(i){throw Js!==null&&(Js=Js.slice(t+1)),Tv(np,ln),i}finally{Ne=e,Fd=!1}}return null}var Ii=[],Ai=0,Rc=null,Dc=0,as=[],ls=0,Fn=null,tr=1,sr="";function vn(t,e){Ii[Ai++]=Dc,Ii[Ai++]=Rc,Rc=t,Dc=e}function rb(t,e,s){as[ls++]=tr,as[ls++]=sr,as[ls++]=Fn,Fn=t;var r=tr;t=sr;var i=32-Ss(r)-1;r&=~(1<<i),s+=1;var o=32-Ss(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,tr=1<<32-Ss(e)+i|s<<i|r,sr=o+t}else tr=1<<o|s<<i|r,sr=t}function mp(t){t.return!==null&&(vn(t,1),rb(t,1,0))}function pp(t){for(;t===Rc;)Rc=Ii[--Ai],Ii[Ai]=null,Dc=Ii[--Ai],Ii[Ai]=null;for(;t===Fn;)Fn=as[--ls],as[ls]=null,sr=as[--ls],as[ls]=null,tr=as[--ls],as[ls]=null}var ts=null,Zt=null,Le=!1,_s=null;function nb(t,e){var s=cs(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function k0(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ts=t,Zt=Hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ts=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Fn!==null?{id:tr,overflow:sr}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=cs(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,ts=t,Zt=null,!0):!1;default:return!1}}function Yh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jh(t){if(Le){var e=Zt;if(e){var s=e;if(!k0(t,e)){if(Yh(t))throw Error($(418));e=Hr(s.nextSibling);var r=ts;e&&k0(t,e)?nb(r,s):(t.flags=t.flags&-4097|2,Le=!1,ts=t)}}else{if(Yh(t))throw Error($(418));t.flags=t.flags&-4097|2,Le=!1,ts=t}}}function I0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ts=t}function ql(t){if(t!==ts)return!1;if(!Le)return I0(t),Le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hh(t.type,t.memoizedProps)),e&&(e=Zt)){if(Yh(t))throw ib(),Error($(418));for(;e;)nb(t,e),e=Hr(e.nextSibling)}if(I0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Zt=Hr(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=ts?Hr(t.stateNode.nextSibling):null;return!0}function ib(){for(var t=Zt;t;)t=Hr(t.nextSibling)}function Ki(){Zt=ts=null,Le=!1}function fp(t){_s===null?_s=[t]:_s.push(t)}var aE=vr.ReactCurrentBatchConfig;function Mo(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error($(309));var r=s.stateNode}if(!r)throw Error($(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var c=i.refs;a===null?delete c[o]:c[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error($(284));if(!s._owner)throw Error($(290,t))}return t}function Ul(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A0(t){var e=t._init;return e(t._payload)}function ob(t){function e(b,w){if(t){var C=b.deletions;C===null?(b.deletions=[w],b.flags|=16):C.push(w)}}function s(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=Yr(b,w),b.index=0,b.sibling=null,b}function o(b,w,C){return b.index=C,t?(C=b.alternate,C!==null?(C=C.index,C<w?(b.flags|=2,w):C):(b.flags|=2,w)):(b.flags|=1048576,w)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,C,D){return w===null||w.tag!==6?(w=Hd(C,b.mode,D),w.return=b,w):(w=i(w,C),w.return=b,w)}function u(b,w,C,D){var L=C.type;return L===ji?m(b,w,C.props.children,D,C.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ar&&A0(L)===w.type)?(D=i(w,C.props),D.ref=Mo(b,w,C),D.return=b,D):(D=uc(C.type,C.key,C.props,null,b.mode,D),D.ref=Mo(b,w,C),D.return=b,D)}function d(b,w,C,D){return w===null||w.tag!==4||w.stateNode.containerInfo!==C.containerInfo||w.stateNode.implementation!==C.implementation?(w=Wd(C,b.mode,D),w.return=b,w):(w=i(w,C.children||[]),w.return=b,w)}function m(b,w,C,D,L){return w===null||w.tag!==7?(w=Pn(C,b.mode,D,L),w.return=b,w):(w=i(w,C),w.return=b,w)}function p(b,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Hd(""+w,b.mode,C),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Al:return C=uc(w.type,w.key,w.props,null,b.mode,C),C.ref=Mo(b,null,w),C.return=b,C;case _i:return w=Wd(w,b.mode,C),w.return=b,w;case Ar:var D=w._init;return p(b,D(w._payload),C)}if(Uo(w)||Co(w))return w=Pn(w,b.mode,C,null),w.return=b,w;Ul(b,w)}return null}function g(b,w,C,D){var L=w!==null?w.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return L!==null?null:c(b,w,""+C,D);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Al:return C.key===L?u(b,w,C,D):null;case _i:return C.key===L?d(b,w,C,D):null;case Ar:return L=C._init,g(b,w,L(C._payload),D)}if(Uo(C)||Co(C))return L!==null?null:m(b,w,C,D,null);Ul(b,C)}return null}function y(b,w,C,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(C)||null,c(w,b,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Al:return b=b.get(D.key===null?C:D.key)||null,u(w,b,D,L);case _i:return b=b.get(D.key===null?C:D.key)||null,d(w,b,D,L);case Ar:var O=D._init;return y(b,w,C,O(D._payload),L)}if(Uo(D)||Co(D))return b=b.get(C)||null,m(w,b,D,L,null);Ul(w,D)}return null}function E(b,w,C,D){for(var L=null,O=null,j=w,x=w=0,v=null;j!==null&&x<C.length;x++){j.index>x?(v=j,j=null):v=j.sibling;var k=g(b,j,C[x],D);if(k===null){j===null&&(j=v);break}t&&j&&k.alternate===null&&e(b,j),w=o(k,w,x),O===null?L=k:O.sibling=k,O=k,j=v}if(x===C.length)return s(b,j),Le&&vn(b,x),L;if(j===null){for(;x<C.length;x++)j=p(b,C[x],D),j!==null&&(w=o(j,w,x),O===null?L=j:O.sibling=j,O=j);return Le&&vn(b,x),L}for(j=r(b,j);x<C.length;x++)v=y(j,b,x,C[x],D),v!==null&&(t&&v.alternate!==null&&j.delete(v.key===null?x:v.key),w=o(v,w,x),O===null?L=v:O.sibling=v,O=v);return t&&j.forEach(function(N){return e(b,N)}),Le&&vn(b,x),L}function A(b,w,C,D){var L=Co(C);if(typeof L!="function")throw Error($(150));if(C=L.call(C),C==null)throw Error($(151));for(var O=L=null,j=w,x=w=0,v=null,k=C.next();j!==null&&!k.done;x++,k=C.next()){j.index>x?(v=j,j=null):v=j.sibling;var N=g(b,j,k.value,D);if(N===null){j===null&&(j=v);break}t&&j&&N.alternate===null&&e(b,j),w=o(N,w,x),O===null?L=N:O.sibling=N,O=N,j=v}if(k.done)return s(b,j),Le&&vn(b,x),L;if(j===null){for(;!k.done;x++,k=C.next())k=p(b,k.value,D),k!==null&&(w=o(k,w,x),O===null?L=k:O.sibling=k,O=k);return Le&&vn(b,x),L}for(j=r(b,j);!k.done;x++,k=C.next())k=y(j,b,x,k.value,D),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?x:k.key),w=o(k,w,x),O===null?L=k:O.sibling=k,O=k);return t&&j.forEach(function(I){return e(b,I)}),Le&&vn(b,x),L}function R(b,w,C,D){if(typeof C=="object"&&C!==null&&C.type===ji&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Al:e:{for(var L=C.key,O=w;O!==null;){if(O.key===L){if(L=C.type,L===ji){if(O.tag===7){s(b,O.sibling),w=i(O,C.props.children),w.return=b,b=w;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ar&&A0(L)===O.type){s(b,O.sibling),w=i(O,C.props),w.ref=Mo(b,O,C),w.return=b,b=w;break e}s(b,O);break}else e(b,O);O=O.sibling}C.type===ji?(w=Pn(C.props.children,b.mode,D,C.key),w.return=b,b=w):(D=uc(C.type,C.key,C.props,null,b.mode,D),D.ref=Mo(b,w,C),D.return=b,b=D)}return a(b);case _i:e:{for(O=C.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===C.containerInfo&&w.stateNode.implementation===C.implementation){s(b,w.sibling),w=i(w,C.children||[]),w.return=b,b=w;break e}else{s(b,w);break}else e(b,w);w=w.sibling}w=Wd(C,b.mode,D),w.return=b,b=w}return a(b);case Ar:return O=C._init,R(b,w,O(C._payload),D)}if(Uo(C))return E(b,w,C,D);if(Co(C))return A(b,w,C,D);Ul(b,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,w!==null&&w.tag===6?(s(b,w.sibling),w=i(w,C),w.return=b,b=w):(s(b,w),w=Hd(C,b.mode,D),w.return=b,b=w),a(b)):s(b,w)}return R}var Yi=ob(!0),ab=ob(!1),Lc=an(null),Mc=null,Ci=null,gp=null;function xp(){gp=Ci=Mc=null}function yp(t){var e=Lc.current;Re(Lc),t._currentValue=e}function Xh(t,e,s){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===s)break;t=t.return}}function Fi(t,e){Mc=t,gp=Ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function ps(t){var e=t._currentValue;if(gp!==t)if(t={context:t,memoizedValue:e,next:null},Ci===null){if(Mc===null)throw Error($(308));Ci=t,Mc.dependencies={lanes:0,firstContext:t}}else Ci=Ci.next=t;return e}var En=null;function vp(t){En===null?En=[t]:En.push(t)}function lb(t,e,s,r){var i=e.interleaved;return i===null?(s.next=s,vp(e)):(s.next=i.next,i.next=s),e.interleaved=s,mr(t,r)}function mr(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Cr=!1;function bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Wr(t,e,s){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mr(t,s)}return i=r.interleaved,i===null?(e.next=e,vp(r)):(e.next=i.next,i.next=e),r.interleaved=e,mr(t,s)}function nc(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,ip(t,s)}}function C0(t,e){var s=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,o=null;if(s=s.firstBaseUpdate,s!==null){do{var a={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};o===null?i=o=a:o=o.next=a,s=s.next}while(s!==null);o===null?i=o=e:o=o.next=e}else i=o=e;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Vc(t,e,s,r){var i=t.updateQueue;Cr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?o=d:a.next=d,a=u;var m=t.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==a&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=u))}if(o!==null){var p=i.baseState;a=0,m=d=u=null,c=o;do{var g=c.lane,y=c.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var E=t,A=c;switch(g=e,y=s,A.tag){case 1:if(E=A.payload,typeof E=="function"){p=E.call(y,p,g);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=A.payload,g=typeof E=="function"?E.call(y,p,g):E,g==null)break e;p=Ue({},p,g);break e;case 2:Cr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[c]:g.push(c))}else y={eventTime:y,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=y,u=p):m=m.next=y,a|=g;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;g=c,c=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(m===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=m,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Un|=a,t.lanes=a,t.memoizedState=p}}function P0(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error($(191,i));i.call(r)}}}var Ya={},qs=an(Ya),ja=an(Ya),Na=an(Ya);function Sn(t){if(t===Ya)throw Error($(174));return t}function wp(t,e){switch(ke(Na,e),ke(ja,t),ke(qs,Ya),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ph(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ph(e,t)}Re(qs),ke(qs,e)}function Ji(){Re(qs),Re(ja),Re(Na)}function ub(t){Sn(Na.current);var e=Sn(qs.current),s=Ph(e,t.type);e!==s&&(ke(ja,t),ke(qs,s))}function _p(t){ja.current===t&&(Re(qs),Re(ja))}var Oe=an(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qd=[];function jp(){for(var t=0;t<qd.length;t++)qd[t]._workInProgressVersionPrimary=null;qd.length=0}var ic=vr.ReactCurrentDispatcher,Ud=vr.ReactCurrentBatchConfig,qn=0,qe=null,st=null,ot=null,Fc=!1,ea=!1,Ea=0,lE=0;function jt(){throw Error($(321))}function Np(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!Is(t[s],e[s]))return!1;return!0}function Ep(t,e,s,r,i,o){if(qn=o,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?hE:mE,t=s(r,i),ea){o=0;do{if(ea=!1,Ea=0,25<=o)throw Error($(301));o+=1,ot=st=null,e.updateQueue=null,ic.current=pE,t=s(r,i)}while(ea)}if(ic.current=qc,e=st!==null&&st.next!==null,qn=0,ot=st=qe=null,Fc=!1,e)throw Error($(300));return t}function Sp(){var t=Ea!==0;return Ea=0,t}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?qe.memoizedState=ot=t:ot=ot.next=t,ot}function fs(){if(st===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ot===null?qe.memoizedState:ot.next;if(e!==null)ot=e,st=t;else{if(t===null)throw Error($(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ot===null?qe.memoizedState=ot=t:ot=ot.next=t}return ot}function Sa(t,e){return typeof e=="function"?e(t):e}function zd(t){var e=fs(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var r=st,i=r.baseQueue,o=s.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,s.pending=null}if(i!==null){o=i.next,r=r.baseState;var c=a=null,u=null,d=o;do{var m=d.lane;if((qn&m)===m)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,a=r):u=u.next=p,qe.lanes|=m,Un|=m}d=d.next}while(d!==null&&d!==o);u===null?a=r:u.next=c,Is(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,s.lastRenderedState=r}if(t=s.interleaved,t!==null){i=t;do o=i.lane,qe.lanes|=o,Un|=o,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Bd(t){var e=fs(),s=e.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=t;var r=s.dispatch,i=s.pending,o=e.memoizedState;if(i!==null){s.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Is(o,e.memoizedState)||(Bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),s.lastRenderedState=o}return[o,r]}function db(){}function hb(t,e){var s=qe,r=fs(),i=e(),o=!Is(r.memoizedState,i);if(o&&(r.memoizedState=i,Bt=!0),r=r.queue,Tp(fb.bind(null,s,r,t),[t]),r.getSnapshot!==e||o||ot!==null&&ot.memoizedState.tag&1){if(s.flags|=2048,Ta(9,pb.bind(null,s,r,i,e),void 0,null),lt===null)throw Error($(349));qn&30||mb(s,e,i)}return i}function mb(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function pb(t,e,s,r){e.value=s,e.getSnapshot=r,gb(e)&&xb(t)}function fb(t,e,s){return s(function(){gb(e)&&xb(t)})}function gb(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Is(t,s)}catch{return!0}}function xb(t){var e=mr(t,1);e!==null&&Ts(e,t,1,-1)}function R0(t){var e=Ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:t},e.queue=t,t=t.dispatch=dE.bind(null,qe,t),[e.memoizedState,t]}function Ta(t,e,s,r){return t={tag:t,create:e,destroy:s,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(r=s.next,s.next=t,t.next=r,e.lastEffect=t)),t}function yb(){return fs().memoizedState}function oc(t,e,s,r){var i=Ms();qe.flags|=t,i.memoizedState=Ta(1|e,s,void 0,r===void 0?null:r)}function _u(t,e,s,r){var i=fs();r=r===void 0?null:r;var o=void 0;if(st!==null){var a=st.memoizedState;if(o=a.destroy,r!==null&&Np(r,a.deps)){i.memoizedState=Ta(e,s,o,r);return}}qe.flags|=t,i.memoizedState=Ta(1|e,s,o,r)}function D0(t,e){return oc(8390656,8,t,e)}function Tp(t,e){return _u(2048,8,t,e)}function vb(t,e){return _u(4,2,t,e)}function bb(t,e){return _u(4,4,t,e)}function wb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _b(t,e,s){return s=s!=null?s.concat([t]):null,_u(4,4,wb.bind(null,e,t),s)}function kp(){}function jb(t,e){var s=fs();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&Np(e,r[1])?r[0]:(s.memoizedState=[t,e],t)}function Nb(t,e){var s=fs();e=e===void 0?null:e;var r=s.memoizedState;return r!==null&&e!==null&&Np(e,r[1])?r[0]:(t=t(),s.memoizedState=[t,e],t)}function Eb(t,e,s){return qn&21?(Is(s,e)||(s=Av(),qe.lanes|=s,Un|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=s)}function cE(t,e){var s=Ne;Ne=s!==0&&4>s?s:4,t(!0);var r=Ud.transition;Ud.transition={};try{t(!1),e()}finally{Ne=s,Ud.transition=r}}function Sb(){return fs().memoizedState}function uE(t,e,s){var r=Kr(t);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Tb(t))kb(e,s);else if(s=lb(t,e,s,r),s!==null){var i=Ot();Ts(s,t,r,i),Ib(s,e,r)}}function dE(t,e,s){var r=Kr(t),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Tb(t))kb(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,c=o(a,s);if(i.hasEagerState=!0,i.eagerState=c,Is(c,a)){var u=e.interleaved;u===null?(i.next=i,vp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}s=lb(t,e,i,r),s!==null&&(i=Ot(),Ts(s,t,r,i),Ib(s,e,r))}}function Tb(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function kb(t,e){ea=Fc=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Ib(t,e,s){if(s&4194240){var r=e.lanes;r&=t.pendingLanes,s|=r,e.lanes=s,ip(t,s)}}var qc={readContext:ps,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},hE={readContext:ps,useCallback:function(t,e){return Ms().memoizedState=[t,e===void 0?null:e],t},useContext:ps,useEffect:D0,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,oc(4194308,4,wb.bind(null,e,t),s)},useLayoutEffect:function(t,e){return oc(4194308,4,t,e)},useInsertionEffect:function(t,e){return oc(4,2,t,e)},useMemo:function(t,e){var s=Ms();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var r=Ms();return e=s!==void 0?s(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=uE.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Ms();return t={current:t},e.memoizedState=t},useState:R0,useDebugValue:kp,useDeferredValue:function(t){return Ms().memoizedState=t},useTransition:function(){var t=R0(!1),e=t[0];return t=cE.bind(null,t[1]),Ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var r=qe,i=Ms();if(Le){if(s===void 0)throw Error($(407));s=s()}else{if(s=e(),lt===null)throw Error($(349));qn&30||mb(r,e,s)}i.memoizedState=s;var o={value:s,getSnapshot:e};return i.queue=o,D0(fb.bind(null,r,o,t),[t]),r.flags|=2048,Ta(9,pb.bind(null,r,o,s,e),void 0,null),s},useId:function(){var t=Ms(),e=lt.identifierPrefix;if(Le){var s=sr,r=tr;s=(r&~(1<<32-Ss(r)-1)).toString(32)+s,e=":"+e+"R"+s,s=Ea++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=lE++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mE={readContext:ps,useCallback:jb,useContext:ps,useEffect:Tp,useImperativeHandle:_b,useInsertionEffect:vb,useLayoutEffect:bb,useMemo:Nb,useReducer:zd,useRef:yb,useState:function(){return zd(Sa)},useDebugValue:kp,useDeferredValue:function(t){var e=fs();return Eb(e,st.memoizedState,t)},useTransition:function(){var t=zd(Sa)[0],e=fs().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:Sb,unstable_isNewReconciler:!1},pE={readContext:ps,useCallback:jb,useContext:ps,useEffect:Tp,useImperativeHandle:_b,useInsertionEffect:vb,useLayoutEffect:bb,useMemo:Nb,useReducer:Bd,useRef:yb,useState:function(){return Bd(Sa)},useDebugValue:kp,useDeferredValue:function(t){var e=fs();return st===null?e.memoizedState=t:Eb(e,st.memoizedState,t)},useTransition:function(){var t=Bd(Sa)[0],e=fs().memoizedState;return[t,e]},useMutableSource:db,useSyncExternalStore:hb,useId:Sb,unstable_isNewReconciler:!1};function bs(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Zh(t,e,s,r){e=t.memoizedState,s=s(r,e),s=s==null?e:Ue({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ju={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var r=Ot(),i=Kr(t),o=ar(r,i);o.payload=e,s!=null&&(o.callback=s),e=Wr(t,o,i),e!==null&&(Ts(e,t,i,r),nc(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var r=Ot(),i=Kr(t),o=ar(r,i);o.tag=1,o.payload=e,s!=null&&(o.callback=s),e=Wr(t,o,i),e!==null&&(Ts(e,t,i,r),nc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Ot(),r=Kr(t),i=ar(s,r);i.tag=2,e!=null&&(i.callback=e),e=Wr(t,i,r),e!==null&&(Ts(e,t,r,s),nc(e,t,r))}};function L0(t,e,s,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!va(s,r)||!va(i,o):!0}function Ab(t,e,s){var r=!1,i=tn,o=e.contextType;return typeof o=="object"&&o!==null?o=ps(o):(i=Gt(e)?On:Ct.current,r=e.contextTypes,o=(r=r!=null)?Qi(t,i):tn),e=new e(s,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function M0(t,e,s,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,r),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function em(t,e,s,r){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},bp(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ps(o):(o=Gt(e)?On:Ct.current,i.context=Qi(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Zh(t,e,o,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ju.enqueueReplaceState(i,i.state,null),Vc(t,s,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,e){try{var s="",r=e;do s+=z2(r),r=r.return;while(r);var i=s}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function $d(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function tm(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var fE=typeof WeakMap=="function"?WeakMap:Map;function Cb(t,e,s){s=ar(-1,s),s.tag=3,s.payload={element:null};var r=e.value;return s.callback=function(){zc||(zc=!0,dm=r),tm(t,e)},s}function Pb(t,e,s){s=ar(-1,s),s.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;s.payload=function(){return r(i)},s.callback=function(){tm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(s.callback=function(){tm(t,e),typeof r!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),s}function V0(t,e,s){var r=t.pingCache;if(r===null){r=t.pingCache=new fE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(s)||(i.add(s),t=IE.bind(null,t,e,s),e.then(t,t))}function O0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function F0(t,e,s,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=ar(-1,1),e.tag=2,Wr(s,e,1))),s.lanes|=1),t)}var gE=vr.ReactCurrentOwner,Bt=!1;function Vt(t,e,s,r){e.child=t===null?ab(e,null,s,r):Yi(e,t.child,s,r)}function q0(t,e,s,r,i){s=s.render;var o=e.ref;return Fi(e,i),r=Ep(t,e,s,r,o,i),s=Sp(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pr(t,e,i)):(Le&&s&&mp(e),e.flags|=1,Vt(t,e,r,i),e.child)}function U0(t,e,s,r,i){if(t===null){var o=s.type;return typeof o=="function"&&!Mp(o)&&o.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=o,Rb(t,e,o,r,i)):(t=uc(s.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(s=s.compare,s=s!==null?s:va,s(a,r)&&t.ref===e.ref)return pr(t,e,i)}return e.flags|=1,t=Yr(o,r),t.ref=e.ref,t.return=e,e.child=t}function Rb(t,e,s,r,i){if(t!==null){var o=t.memoizedProps;if(va(o,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,pr(t,e,i)}return sm(t,e,s,r,i)}function Db(t,e,s){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ke(Ri,Yt),Yt|=s;else{if(!(s&1073741824))return t=o!==null?o.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ke(Ri,Yt),Yt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:s,ke(Ri,Yt),Yt|=r}else o!==null?(r=o.baseLanes|s,e.memoizedState=null):r=s,ke(Ri,Yt),Yt|=r;return Vt(t,e,i,s),e.child}function Lb(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function sm(t,e,s,r,i){var o=Gt(s)?On:Ct.current;return o=Qi(e,o),Fi(e,i),s=Ep(t,e,s,r,o,i),r=Sp(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,pr(t,e,i)):(Le&&r&&mp(e),e.flags|=1,Vt(t,e,s,i),e.child)}function z0(t,e,s,r,i){if(Gt(s)){var o=!0;Pc(e)}else o=!1;if(Fi(e,i),e.stateNode===null)ac(t,e),Ab(e,s,r),em(e,s,r,i),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=s.contextType;typeof d=="object"&&d!==null?d=ps(d):(d=Gt(s)?On:Ct.current,d=Qi(e,d));var m=s.getDerivedStateFromProps,p=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&M0(e,a,r,d),Cr=!1;var g=e.memoizedState;a.state=g,Vc(e,r,a,i),u=e.memoizedState,c!==r||g!==u||$t.current||Cr?(typeof m=="function"&&(Zh(e,s,m,r),u=e.memoizedState),(c=Cr||L0(e,s,c,r,g,u,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,cb(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:bs(e.type,c),a.props=d,p=e.pendingProps,g=a.context,u=s.contextType,typeof u=="object"&&u!==null?u=ps(u):(u=Gt(s)?On:Ct.current,u=Qi(e,u));var y=s.getDerivedStateFromProps;(m=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==p||g!==u)&&M0(e,a,r,u),Cr=!1,g=e.memoizedState,a.state=g,Vc(e,r,a,i);var E=e.memoizedState;c!==p||g!==E||$t.current||Cr?(typeof y=="function"&&(Zh(e,s,y,r),E=e.memoizedState),(d=Cr||L0(e,s,d,r,g,E,u)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,E,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,E,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),a.props=r,a.state=E,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return rm(t,e,s,r,o,i)}function rm(t,e,s,r,i,o){Lb(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&T0(e,s,!1),pr(t,e,o);r=e.stateNode,gE.current=e;var c=a&&typeof s.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Yi(e,t.child,null,o),e.child=Yi(e,null,c,o)):Vt(t,e,c,o),e.memoizedState=r.state,i&&T0(e,s,!0),e.child}function Mb(t){var e=t.stateNode;e.pendingContext?S0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S0(t,e.context,!1),wp(t,e.containerInfo)}function B0(t,e,s,r,i){return Ki(),fp(i),e.flags|=256,Vt(t,e,s,r),e.child}var nm={dehydrated:null,treeContext:null,retryLane:0};function im(t){return{baseLanes:t,cachePool:null,transitions:null}}function Vb(t,e,s){var r=e.pendingProps,i=Oe.current,o=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(i&2)!==0),c?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ke(Oe,i&1),t===null)return Jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Su(a,r,0,null),t=Pn(t,r,s,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=im(s),e.memoizedState=nm,t):Ip(e,a));if(i=t.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return xE(t,e,a,r,c,i,s);if(o){o=r.fallback,a=e.mode,i=t.child,c=i.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Yr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?o=Yr(c,o):(o=Pn(o,a,s,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?im(s):{baseLanes:a.baseLanes|s,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~s,e.memoizedState=nm,r}return o=t.child,t=o.sibling,r=Yr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=s),r.return=e,r.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=r,e.memoizedState=null,r}function Ip(t,e){return e=Su({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zl(t,e,s,r){return r!==null&&fp(r),Yi(e,t.child,null,s),t=Ip(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xE(t,e,s,r,i,o,a){if(s)return e.flags&256?(e.flags&=-257,r=$d(Error($(422))),zl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Su({mode:"visible",children:r.children},i,0,null),o=Pn(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yi(e,t.child,null,a),e.child.memoizedState=im(a),e.memoizedState=nm,o);if(!(e.mode&1))return zl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,o=Error($(419)),r=$d(o,r,void 0),zl(t,e,a,r)}if(c=(a&t.childLanes)!==0,Bt||c){if(r=lt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,mr(t,i),Ts(r,t,i,-1))}return Lp(),r=$d(Error($(421))),zl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AE.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Zt=Hr(i.nextSibling),ts=e,Le=!0,_s=null,t!==null&&(as[ls++]=tr,as[ls++]=sr,as[ls++]=Fn,tr=t.id,sr=t.overflow,Fn=e),e=Ip(e,r.children),e.flags|=4096,e)}function $0(t,e,s){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xh(t.return,e,s)}function Gd(t,e,s,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=s,o.tailMode=i)}function Ob(t,e,s){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Vt(t,e,r.children,s),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$0(t,s,e);else if(t.tag===19)$0(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ke(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&Oc(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Gd(e,!1,i,s,o);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oc(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Gd(e,!0,s,null,o);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ac(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function pr(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Un|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,s=Yr(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Yr(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function yE(t,e,s){switch(e.tag){case 3:Mb(e),Ki();break;case 5:ub(e);break;case 1:Gt(e.type)&&Pc(e);break;case 4:wp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ke(Lc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ke(Oe,Oe.current&1),e.flags|=128,null):s&e.child.childLanes?Vb(t,e,s):(ke(Oe,Oe.current&1),t=pr(t,e,s),t!==null?t.sibling:null);ke(Oe,Oe.current&1);break;case 19:if(r=(s&e.childLanes)!==0,t.flags&128){if(r)return Ob(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ke(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Db(t,e,s)}return pr(t,e,s)}var Fb,om,qb,Ub;Fb=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};om=function(){};qb=function(t,e,s,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sn(qs.current);var o=null;switch(s){case"input":i=kh(t,i),r=kh(t,r),o=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),o=[];break;case"textarea":i=Ch(t,i),r=Ch(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}Rh(s,r);var a;s=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var c=i[d];for(a in c)c.hasOwnProperty(a)&&(s||(s={}),s[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ha.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var u=r[d];if(c=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(s||(s={}),s[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(s||(s={}),s[a]=u[a])}else s||(o||(o=[]),o.push(d,s)),s=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(o=o||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ha.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ce("scroll",t),o||c===u||(o=[])):(o=o||[]).push(d,u))}s&&(o=o||[]).push("style",s);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Ub=function(t,e,s,r){s!==r&&(e.flags|=4)};function Vo(t,e){if(!Le)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,r=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=s,e}function vE(t,e,s){var r=e.pendingProps;switch(pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Gt(e.type)&&Cc(),Nt(e),null;case 3:return r=e.stateNode,Ji(),Re($t),Re(Ct),jp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_s!==null&&(pm(_s),_s=null))),om(t,e),Nt(e),null;case 5:_p(e);var i=Sn(Na.current);if(s=e.type,t!==null&&e.stateNode!=null)qb(t,e,s,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error($(166));return Nt(e),null}if(t=Sn(qs.current),ql(e)){r=e.stateNode,s=e.type;var o=e.memoizedProps;switch(r[Vs]=e,r[_a]=o,t=(e.mode&1)!==0,s){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(i=0;i<Bo.length;i++)Ce(Bo[i],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Zg(r,o),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ce("invalid",r);break;case"textarea":t0(r,o),Ce("invalid",r)}Rh(s,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="children"?typeof c=="string"?r.textContent!==c&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,c,t),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(o.suppressHydrationWarning!==!0&&Fl(r.textContent,c,t),i=["children",""+c]):ha.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ce("scroll",r)}switch(s){case"input":Cl(r),e0(r,o,!0);break;case"textarea":Cl(r),s0(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fv(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(s,{is:r.is}):(t=a.createElement(s),s==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,s),t[Vs]=e,t[_a]=r,Fb(t,e,!1,!1),e.stateNode=t;e:{switch(a=Dh(s,r),s){case"dialog":Ce("cancel",t),Ce("close",t),i=r;break;case"iframe":case"object":case"embed":Ce("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bo.length;i++)Ce(Bo[i],t);i=r;break;case"source":Ce("error",t),i=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),i=r;break;case"details":Ce("toggle",t),i=r;break;case"input":Zg(t,r),i=kh(t,r),Ce("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":t0(t,r),i=Ch(t,r),Ce("invalid",t);break;default:i=r}Rh(s,i),c=i;for(o in c)if(c.hasOwnProperty(o)){var u=c[o];o==="style"?yv(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&gv(t,u)):o==="children"?typeof u=="string"?(s!=="textarea"||u!=="")&&ma(t,u):typeof u=="number"&&ma(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ha.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ce("scroll",t):u!=null&&Zm(t,o,u,a))}switch(s){case"input":Cl(t),e0(t,r,!1);break;case"textarea":Cl(t),s0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+en(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Li(t,!!r.multiple,o,!1):r.defaultValue!=null&&Li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ac)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Ub(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error($(166));if(s=Sn(Na.current),Sn(qs.current),ql(e)){if(r=e.stateNode,s=e.memoizedProps,r[Vs]=e,(o=r.nodeValue!==s)&&(t=ts,t!==null))switch(t.tag){case 3:Fl(r.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fl(r.nodeValue,s,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Vs]=e,e.stateNode=r}return Nt(e),null;case 13:if(Re(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Le&&Zt!==null&&e.mode&1&&!(e.flags&128))ib(),Ki(),e.flags|=98560,o=!1;else if(o=ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error($(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($(317));o[Vs]=e}else Ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),o=!1}else _s!==null&&(pm(_s),_s=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?rt===0&&(rt=3):Lp())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Ji(),om(t,e),t===null&&ba(e.stateNode.containerInfo),Nt(e),null;case 10:return yp(e.type._context),Nt(e),null;case 17:return Gt(e.type)&&Cc(),Nt(e),null;case 19:if(Re(Oe),o=e.memoizedState,o===null)return Nt(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Vo(o,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oc(t),a!==null){for(e.flags|=128,Vo(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=s,s=e.child;s!==null;)o=s,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return ke(Oe,Oe.current&1|2),e.child}t=t.sibling}o.tail!==null&&Qe()>Zi&&(e.flags|=128,r=!0,Vo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(a),t!==null){if(e.flags|=128,r=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Vo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Le)return Nt(e),null}else 2*Qe()-o.renderingStartTime>Zi&&s!==1073741824&&(e.flags|=128,r=!0,Vo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(s=o.last,s!==null?s.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Qe(),e.sibling=null,s=Oe.current,ke(Oe,r?s&1|2:s&1),e):(Nt(e),null);case 22:case 23:return Dp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yt&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function bE(t,e){switch(pp(e),e.tag){case 1:return Gt(e.type)&&Cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ji(),Re($t),Re(Ct),jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _p(e),null;case 13:if(Re(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Re(Oe),null;case 4:return Ji(),null;case 10:return yp(e.type._context),null;case 22:case 23:return Dp(),null;case 24:return null;default:return null}}var Bl=!1,kt=!1,wE=typeof WeakSet=="function"?WeakSet:Set,X=null;function Pi(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){$e(t,e,r)}else s.current=null}function am(t,e,s){try{s()}catch(r){$e(t,e,r)}}var G0=!1;function _E(t,e){if($h=Tc,t=Hv(),hp(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{s.nodeType,o.nodeType}catch{s=null;break e}var a=0,c=-1,u=-1,d=0,m=0,p=t,g=null;t:for(;;){for(var y;p!==s||i!==0&&p.nodeType!==3||(c=a+i),p!==o||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===s&&++d===i&&(c=a),g===o&&++m===r&&(u=a),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}s=c===-1||u===-1?null:{start:c,end:u}}else s=null}s=s||{start:0,end:0}}else s=null;for(Gh={focusedElem:t,selectionRange:s},Tc=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var A=E.memoizedProps,R=E.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:bs(e.type,A),R);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(D){$e(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return E=G0,G0=!1,E}function ta(t,e,s){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&am(e,s,o)}i=i.next}while(i!==r)}}function Nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var r=s.create;s.destroy=r()}s=s.next}while(s!==e)}}function lm(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function zb(t){var e=t.alternate;e!==null&&(t.alternate=null,zb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[_a],delete e[Qh],delete e[nE],delete e[iE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bb(t){return t.tag===5||t.tag===3||t.tag===4}function H0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cm(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(cm(t,e,s),t=t.sibling;t!==null;)cm(t,e,s),t=t.sibling}function um(t,e,s){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(um(t,e,s),t=t.sibling;t!==null;)um(t,e,s),t=t.sibling}var mt=null,ws=!1;function kr(t,e,s){for(s=s.child;s!==null;)$b(t,e,s),s=s.sibling}function $b(t,e,s){if(Fs&&typeof Fs.onCommitFiberUnmount=="function")try{Fs.onCommitFiberUnmount(gu,s)}catch{}switch(s.tag){case 5:kt||Pi(s,e);case 6:var r=mt,i=ws;mt=null,kr(t,e,s),mt=r,ws=i,mt!==null&&(ws?(t=mt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):mt.removeChild(s.stateNode));break;case 18:mt!==null&&(ws?(t=mt,s=s.stateNode,t.nodeType===8?Od(t.parentNode,s):t.nodeType===1&&Od(t,s),xa(t)):Od(mt,s.stateNode));break;case 4:r=mt,i=ws,mt=s.stateNode.containerInfo,ws=!0,kr(t,e,s),mt=r,ws=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&am(s,e,a),i=i.next}while(i!==r)}kr(t,e,s);break;case 1:if(!kt&&(Pi(s,e),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){$e(s,e,c)}kr(t,e,s);break;case 21:kr(t,e,s);break;case 22:s.mode&1?(kt=(r=kt)||s.memoizedState!==null,kr(t,e,s),kt=r):kr(t,e,s);break;default:kr(t,e,s)}}function W0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new wE),e.forEach(function(r){var i=CE.bind(null,t,r);s.has(r)||(s.add(r),r.then(i,i))})}}function vs(t,e){var s=e.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var o=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:mt=c.stateNode,ws=!1;break e;case 3:mt=c.stateNode.containerInfo,ws=!0;break e;case 4:mt=c.stateNode.containerInfo,ws=!0;break e}c=c.return}if(mt===null)throw Error($(160));$b(o,a,i),mt=null,ws=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){$e(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gb(e,t),e=e.sibling}function Gb(t,e){var s=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vs(e,t),Ds(t),r&4){try{ta(3,t,t.return),Nu(3,t)}catch(A){$e(t,t.return,A)}try{ta(5,t,t.return)}catch(A){$e(t,t.return,A)}}break;case 1:vs(e,t),Ds(t),r&512&&s!==null&&Pi(s,s.return);break;case 5:if(vs(e,t),Ds(t),r&512&&s!==null&&Pi(s,s.return),t.flags&32){var i=t.stateNode;try{ma(i,"")}catch(A){$e(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=s!==null?s.memoizedProps:o,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&o.type==="radio"&&o.name!=null&&mv(i,o),Dh(c,a);var d=Dh(c,o);for(a=0;a<u.length;a+=2){var m=u[a],p=u[a+1];m==="style"?yv(i,p):m==="dangerouslySetInnerHTML"?gv(i,p):m==="children"?ma(i,p):Zm(i,m,p,d)}switch(c){case"input":Ih(i,o);break;case"textarea":pv(i,o);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Li(i,!!o.multiple,y,!1):g!==!!o.multiple&&(o.defaultValue!=null?Li(i,!!o.multiple,o.defaultValue,!0):Li(i,!!o.multiple,o.multiple?[]:"",!1))}i[_a]=o}catch(A){$e(t,t.return,A)}}break;case 6:if(vs(e,t),Ds(t),r&4){if(t.stateNode===null)throw Error($(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(A){$e(t,t.return,A)}}break;case 3:if(vs(e,t),Ds(t),r&4&&s!==null&&s.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(A){$e(t,t.return,A)}break;case 4:vs(e,t),Ds(t);break;case 13:vs(e,t),Ds(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Pp=Qe())),r&4&&W0(t);break;case 22:if(m=s!==null&&s.memoizedState!==null,t.mode&1?(kt=(d=kt)||m,vs(e,t),kt=d):vs(e,t),Ds(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(X=t,m=t.child;m!==null;){for(p=X=m;X!==null;){switch(g=X,y=g.child,g.tag){case 0:case 11:case 14:case 15:ta(4,g,g.return);break;case 1:Pi(g,g.return);var E=g.stateNode;if(typeof E.componentWillUnmount=="function"){r=g,s=g.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(A){$e(r,s,A)}}break;case 5:Pi(g,g.return);break;case 22:if(g.memoizedState!==null){K0(p);continue}}y!==null?(y.return=g,X=y):K0(p)}m=m.sibling}e:for(m=null,p=t;;){if(p.tag===5){if(m===null){m=p;try{i=p.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(c=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=xv("display",a))}catch(A){$e(t,t.return,A)}}}else if(p.tag===6){if(m===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(A){$e(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;m===p&&(m=null),p=p.return}m===p&&(m=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:vs(e,t),Ds(t),r&4&&W0(t);break;case 21:break;default:vs(e,t),Ds(t)}}function Ds(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Bb(s)){var r=s;break e}s=s.return}throw Error($(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ma(i,""),r.flags&=-33);var o=H0(t);um(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,c=H0(t);cm(t,c,a);break;default:throw Error($(161))}}catch(u){$e(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jE(t,e,s){X=t,Hb(t)}function Hb(t,e,s){for(var r=(t.mode&1)!==0;X!==null;){var i=X,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Bl;if(!a){var c=i.alternate,u=c!==null&&c.memoizedState!==null||kt;c=Bl;var d=kt;if(Bl=a,(kt=u)&&!d)for(X=i;X!==null;)a=X,u=a.child,a.tag===22&&a.memoizedState!==null?Y0(i):u!==null?(u.return=a,X=u):Y0(i);for(;o!==null;)X=o,Hb(o),o=o.sibling;X=i,Bl=c,kt=d}Q0(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,X=o):Q0(t)}}function Q0(t){for(;X!==null;){var e=X;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||Nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(s===null)r.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:bs(e.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&P0(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}P0(e,a,s)}break;case 5:var c=e.stateNode;if(s===null&&e.flags&4){s=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&s.focus();break;case"img":u.src&&(s.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var p=m.dehydrated;p!==null&&xa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}kt||e.flags&512&&lm(e)}catch(g){$e(e,e.return,g)}}if(e===t){X=null;break}if(s=e.sibling,s!==null){s.return=e.return,X=s;break}X=e.return}}function K0(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var s=e.sibling;if(s!==null){s.return=e.return,X=s;break}X=e.return}}function Y0(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Nu(4,e)}catch(u){$e(e,s,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){$e(e,i,u)}}var o=e.return;try{lm(e)}catch(u){$e(e,o,u)}break;case 5:var a=e.return;try{lm(e)}catch(u){$e(e,a,u)}}}catch(u){$e(e,e.return,u)}if(e===t){X=null;break}var c=e.sibling;if(c!==null){c.return=e.return,X=c;break}X=e.return}}var NE=Math.ceil,Uc=vr.ReactCurrentDispatcher,Ap=vr.ReactCurrentOwner,ds=vr.ReactCurrentBatchConfig,we=0,lt=null,Xe=null,gt=0,Yt=0,Ri=an(0),rt=0,ka=null,Un=0,Eu=0,Cp=0,sa=null,Ut=null,Pp=0,Zi=1/0,Ys=null,zc=!1,dm=null,Qr=null,$l=!1,Fr=null,Bc=0,ra=0,hm=null,lc=-1,cc=0;function Ot(){return we&6?Qe():lc!==-1?lc:lc=Qe()}function Kr(t){return t.mode&1?we&2&&gt!==0?gt&-gt:aE.transition!==null?(cc===0&&(cc=Av()),cc):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Vv(t.type)),t):1}function Ts(t,e,s,r){if(50<ra)throw ra=0,hm=null,Error($(185));Wa(t,s,r),(!(we&2)||t!==lt)&&(t===lt&&(!(we&2)&&(Eu|=s),rt===4&&Rr(t,gt)),Ht(t,r),s===1&&we===0&&!(e.mode&1)&&(Zi=Qe()+500,wu&&ln()))}function Ht(t,e){var s=t.callbackNode;aN(t,e);var r=Sc(t,t===lt?gt:0);if(r===0)s!==null&&i0(s),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(s!=null&&i0(s),e===1)t.tag===0?oE(J0.bind(null,t)):sb(J0.bind(null,t)),sE(function(){!(we&6)&&ln()}),s=null;else{switch(Cv(r)){case 1:s=np;break;case 4:s=kv;break;case 16:s=Ec;break;case 536870912:s=Iv;break;default:s=Ec}s=ew(s,Wb.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Wb(t,e){if(lc=-1,cc=0,we&6)throw Error($(327));var s=t.callbackNode;if(qi()&&t.callbackNode!==s)return null;var r=Sc(t,t===lt?gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$c(t,r);else{e=r;var i=we;we|=2;var o=Kb();(lt!==t||gt!==e)&&(Ys=null,Zi=Qe()+500,Cn(t,e));do try{TE();break}catch(c){Qb(t,c)}while(!0);xp(),Uc.current=o,we=i,Xe!==null?e=0:(lt=null,gt=0,e=rt)}if(e!==0){if(e===2&&(i=Fh(t),i!==0&&(r=i,e=mm(t,i))),e===1)throw s=ka,Cn(t,0),Rr(t,r),Ht(t,Qe()),s;if(e===6)Rr(t,r);else{if(i=t.current.alternate,!(r&30)&&!EE(i)&&(e=$c(t,r),e===2&&(o=Fh(t),o!==0&&(r=o,e=mm(t,o))),e===1))throw s=ka,Cn(t,0),Rr(t,r),Ht(t,Qe()),s;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error($(345));case 2:bn(t,Ut,Ys);break;case 3:if(Rr(t,r),(r&130023424)===r&&(e=Pp+500-Qe(),10<e)){if(Sc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wh(bn.bind(null,t,Ut,Ys),e);break}bn(t,Ut,Ys);break;case 4:if(Rr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Ss(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=Qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*NE(r/1960))-r,10<r){t.timeoutHandle=Wh(bn.bind(null,t,Ut,Ys),r);break}bn(t,Ut,Ys);break;case 5:bn(t,Ut,Ys);break;default:throw Error($(329))}}}return Ht(t,Qe()),t.callbackNode===s?Wb.bind(null,t):null}function mm(t,e){var s=sa;return t.current.memoizedState.isDehydrated&&(Cn(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Ut,Ut=s,e!==null&&pm(e)),t}function pm(t){Ut===null?Ut=t:Ut.push.apply(Ut,t)}function EE(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],o=i.getSnapshot;i=i.value;try{if(!Is(o(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rr(t,e){for(e&=~Cp,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Ss(e),r=1<<s;t[s]=-1,e&=~r}}function J0(t){if(we&6)throw Error($(327));qi();var e=Sc(t,0);if(!(e&1))return Ht(t,Qe()),null;var s=$c(t,e);if(t.tag!==0&&s===2){var r=Fh(t);r!==0&&(e=r,s=mm(t,r))}if(s===1)throw s=ka,Cn(t,0),Rr(t,e),Ht(t,Qe()),s;if(s===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bn(t,Ut,Ys),Ht(t,Qe()),null}function Rp(t,e){var s=we;we|=1;try{return t(e)}finally{we=s,we===0&&(Zi=Qe()+500,wu&&ln())}}function zn(t){Fr!==null&&Fr.tag===0&&!(we&6)&&qi();var e=we;we|=1;var s=ds.transition,r=Ne;try{if(ds.transition=null,Ne=1,t)return t()}finally{Ne=r,ds.transition=s,we=e,!(we&6)&&ln()}}function Dp(){Yt=Ri.current,Re(Ri)}function Cn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,tE(s)),Xe!==null)for(s=Xe.return;s!==null;){var r=s;switch(pp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cc();break;case 3:Ji(),Re($t),Re(Ct),jp();break;case 5:_p(r);break;case 4:Ji();break;case 13:Re(Oe);break;case 19:Re(Oe);break;case 10:yp(r.type._context);break;case 22:case 23:Dp()}s=s.return}if(lt=t,Xe=t=Yr(t.current,null),gt=Yt=e,rt=0,ka=null,Cp=Eu=Un=0,Ut=sa=null,En!==null){for(e=0;e<En.length;e++)if(s=En[e],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,o=s.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}s.pending=r}En=null}return t}function Qb(t,e){do{var s=Xe;try{if(xp(),ic.current=qc,Fc){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fc=!1}if(qn=0,ot=st=qe=null,ea=!1,Ea=0,Ap.current=null,s===null||s.return===null){rt=1,ka=e,Xe=null;break}e:{var o=t,a=s.return,c=s,u=e;if(e=gt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,m=c,p=m.tag;if(!(m.mode&1)&&(p===0||p===11||p===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var y=O0(a);if(y!==null){y.flags&=-257,F0(y,a,c,o,e),y.mode&1&&V0(o,d,e),e=y,u=d;var E=e.updateQueue;if(E===null){var A=new Set;A.add(u),e.updateQueue=A}else E.add(u);break e}else{if(!(e&1)){V0(o,d,e),Lp();break e}u=Error($(426))}}else if(Le&&c.mode&1){var R=O0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),F0(R,a,c,o,e),fp(Xi(u,c));break e}}o=u=Xi(u,c),rt!==4&&(rt=2),sa===null?sa=[o]:sa.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=Cb(o,u,e);C0(o,b);break e;case 1:c=u;var w=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Qr===null||!Qr.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var D=Pb(o,c,e);C0(o,D);break e}}o=o.return}while(o!==null)}Jb(s)}catch(L){e=L,Xe===s&&s!==null&&(Xe=s=s.return);continue}break}while(!0)}function Kb(){var t=Uc.current;return Uc.current=qc,t===null?qc:t}function Lp(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||!(Un&268435455)&&!(Eu&268435455)||Rr(lt,gt)}function $c(t,e){var s=we;we|=2;var r=Kb();(lt!==t||gt!==e)&&(Ys=null,Cn(t,e));do try{SE();break}catch(i){Qb(t,i)}while(!0);if(xp(),we=s,Uc.current=r,Xe!==null)throw Error($(261));return lt=null,gt=0,rt}function SE(){for(;Xe!==null;)Yb(Xe)}function TE(){for(;Xe!==null&&!X2();)Yb(Xe)}function Yb(t){var e=Zb(t.alternate,t,Yt);t.memoizedProps=t.pendingProps,e===null?Jb(t):Xe=e,Ap.current=null}function Jb(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=bE(s,e),s!==null){s.flags&=32767,Xe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rt=6,Xe=null;return}}else if(s=vE(s,e,Yt),s!==null){Xe=s;return}if(e=e.sibling,e!==null){Xe=e;return}Xe=e=t}while(e!==null);rt===0&&(rt=5)}function bn(t,e,s){var r=Ne,i=ds.transition;try{ds.transition=null,Ne=1,kE(t,e,s,r)}finally{ds.transition=i,Ne=r}return null}function kE(t,e,s,r){do qi();while(Fr!==null);if(we&6)throw Error($(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var o=s.lanes|s.childLanes;if(lN(t,o),t===lt&&(Xe=lt=null,gt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||$l||($l=!0,ew(Ec,function(){return qi(),null})),o=(s.flags&15990)!==0,s.subtreeFlags&15990||o){o=ds.transition,ds.transition=null;var a=Ne;Ne=1;var c=we;we|=4,Ap.current=null,_E(t,s),Gb(s,t),QN(Gh),Tc=!!$h,Gh=$h=null,t.current=s,jE(s),Z2(),we=c,Ne=a,ds.transition=o}else t.current=s;if($l&&($l=!1,Fr=t,Bc=i),o=t.pendingLanes,o===0&&(Qr=null),sN(s.stateNode),Ht(t,Qe()),e!==null)for(r=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(zc)throw zc=!1,t=dm,dm=null,t;return Bc&1&&t.tag!==0&&qi(),o=t.pendingLanes,o&1?t===hm?ra++:(ra=0,hm=t):ra=0,ln(),null}function qi(){if(Fr!==null){var t=Cv(Bc),e=ds.transition,s=Ne;try{if(ds.transition=null,Ne=16>t?16:t,Fr===null)var r=!1;else{if(t=Fr,Fr=null,Bc=0,we&6)throw Error($(331));var i=we;for(we|=4,X=t.current;X!==null;){var o=X,a=o.child;if(X.flags&16){var c=o.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(X=d;X!==null;){var m=X;switch(m.tag){case 0:case 11:case 15:ta(8,m,o)}var p=m.child;if(p!==null)p.return=m,X=p;else for(;X!==null;){m=X;var g=m.sibling,y=m.return;if(zb(m),m===d){X=null;break}if(g!==null){g.return=y,X=g;break}X=y}}}var E=o.alternate;if(E!==null){var A=E.child;if(A!==null){E.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}X=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ta(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,X=b;break e}X=o.return}}var w=t.current;for(X=w;X!==null;){a=X;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,X=C;else e:for(a=w;X!==null;){if(c=X,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Nu(9,c)}}catch(L){$e(c,c.return,L)}if(c===a){X=null;break e}var D=c.sibling;if(D!==null){D.return=c.return,X=D;break e}X=c.return}}if(we=i,ln(),Fs&&typeof Fs.onPostCommitFiberRoot=="function")try{Fs.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{Ne=s,ds.transition=e}}return!1}function X0(t,e,s){e=Xi(s,e),e=Cb(t,e,1),t=Wr(t,e,1),e=Ot(),t!==null&&(Wa(t,1,e),Ht(t,e))}function $e(t,e,s){if(t.tag===3)X0(t,t,s);else for(;e!==null;){if(e.tag===3){X0(e,t,s);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qr===null||!Qr.has(r))){t=Xi(s,t),t=Pb(e,t,1),e=Wr(e,t,1),t=Ot(),e!==null&&(Wa(e,1,t),Ht(e,t));break}}e=e.return}}function IE(t,e,s){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&s,lt===t&&(gt&s)===s&&(rt===4||rt===3&&(gt&130023424)===gt&&500>Qe()-Pp?Cn(t,0):Cp|=s),Ht(t,e)}function Xb(t,e){e===0&&(t.mode&1?(e=Dl,Dl<<=1,!(Dl&130023424)&&(Dl=4194304)):e=1);var s=Ot();t=mr(t,e),t!==null&&(Wa(t,e,s),Ht(t,s))}function AE(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Xb(t,s)}function CE(t,e){var s=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error($(314))}r!==null&&r.delete(e),Xb(t,s)}var Zb;Zb=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||$t.current)Bt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Bt=!1,yE(t,e,s);Bt=!!(t.flags&131072)}else Bt=!1,Le&&e.flags&1048576&&rb(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ac(t,e),t=e.pendingProps;var i=Qi(e,Ct.current);Fi(e,s),i=Ep(null,e,r,t,i,s);var o=Sp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(o=!0,Pc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bp(e),i.updater=ju,e.stateNode=i,i._reactInternals=e,em(e,r,t,s),e=rm(null,e,r,!0,o,s)):(e.tag=0,Le&&o&&mp(e),Vt(null,e,i,s),e=e.child),e;case 16:r=e.elementType;e:{switch(ac(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=RE(r),t=bs(r,t),i){case 0:e=sm(null,e,r,t,s);break e;case 1:e=z0(null,e,r,t,s);break e;case 11:e=q0(null,e,r,t,s);break e;case 14:e=U0(null,e,r,bs(r.type,t),s);break e}throw Error($(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),sm(t,e,r,i,s);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),z0(t,e,r,i,s);case 3:e:{if(Mb(e),t===null)throw Error($(387));r=e.pendingProps,o=e.memoizedState,i=o.element,cb(t,e),Vc(e,r,null,s);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Xi(Error($(423)),e),e=B0(t,e,r,s,i);break e}else if(r!==i){i=Xi(Error($(424)),e),e=B0(t,e,r,s,i);break e}else for(Zt=Hr(e.stateNode.containerInfo.firstChild),ts=e,Le=!0,_s=null,s=ab(e,null,r,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ki(),r===i){e=pr(t,e,s);break e}Vt(t,e,r,s)}e=e.child}return e;case 5:return ub(e),t===null&&Jh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Hh(r,i)?a=null:o!==null&&Hh(r,o)&&(e.flags|=32),Lb(t,e),Vt(t,e,a,s),e.child;case 6:return t===null&&Jh(e),null;case 13:return Vb(t,e,s);case 4:return wp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yi(e,null,r,s):Vt(t,e,r,s),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),q0(t,e,r,i,s);case 7:return Vt(t,e,e.pendingProps,s),e.child;case 8:return Vt(t,e,e.pendingProps.children,s),e.child;case 12:return Vt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,ke(Lc,r._currentValue),r._currentValue=a,o!==null)if(Is(o.value,a)){if(o.children===i.children&&!$t.current){e=pr(t,e,s);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var c=o.dependencies;if(c!==null){a=o.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=ar(-1,s&-s),u.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?u.next=u:(u.next=m.next,m.next=u),d.pending=u}}o.lanes|=s,u=o.alternate,u!==null&&(u.lanes|=s),Xh(o.return,s,e),c.lanes|=s;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error($(341));a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Xh(a,s,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Vt(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fi(e,s),i=ps(i),r=r(i),e.flags|=1,Vt(t,e,r,s),e.child;case 14:return r=e.type,i=bs(r,e.pendingProps),i=bs(r.type,i),U0(t,e,r,i,s);case 15:return Rb(t,e,e.type,e.pendingProps,s);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bs(r,i),ac(t,e),e.tag=1,Gt(r)?(t=!0,Pc(e)):t=!1,Fi(e,s),Ab(e,r,i),em(e,r,i,s),rm(null,e,r,!0,t,s);case 19:return Ob(t,e,s);case 22:return Db(t,e,s)}throw Error($(156,e.tag))};function ew(t,e){return Tv(t,e)}function PE(t,e,s,r){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function cs(t,e,s,r){return new PE(t,e,s,r)}function Mp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RE(t){if(typeof t=="function")return Mp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tp)return 11;if(t===sp)return 14}return 2}function Yr(t,e){var s=t.alternate;return s===null?(s=cs(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function uc(t,e,s,r,i,o){var a=2;if(r=t,typeof t=="function")Mp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ji:return Pn(s.children,i,o,e);case ep:a=8,i|=8;break;case Nh:return t=cs(12,s,e,i|2),t.elementType=Nh,t.lanes=o,t;case Eh:return t=cs(13,s,e,i),t.elementType=Eh,t.lanes=o,t;case Sh:return t=cs(19,s,e,i),t.elementType=Sh,t.lanes=o,t;case uv:return Su(s,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lv:a=10;break e;case cv:a=9;break e;case tp:a=11;break e;case sp:a=14;break e;case Ar:a=16,r=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=cs(a,s,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Pn(t,e,s,r){return t=cs(7,t,r,e),t.lanes=s,t}function Su(t,e,s,r){return t=cs(22,t,r,e),t.elementType=uv,t.lanes=s,t.stateNode={isHidden:!1},t}function Hd(t,e,s){return t=cs(6,t,null,e),t.lanes=s,t}function Wd(t,e,s){return e=cs(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function DE(t,e,s,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vp(t,e,s,r,i,o,a,c,u){return t=new DE(t,e,s,c,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=cs(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(o),t}function LE(t,e,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_i,key:r==null?null:""+r,children:t,containerInfo:e,implementation:s}}function tw(t){if(!t)return tn;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var s=t.type;if(Gt(s))return tb(t,s,e)}return e}function sw(t,e,s,r,i,o,a,c,u){return t=Vp(s,r,!0,t,i,o,a,c,u),t.context=tw(null),s=t.current,r=Ot(),i=Kr(s),o=ar(r,i),o.callback=e??null,Wr(s,o,i),t.current.lanes=i,Wa(t,i,r),Ht(t,r),t}function Tu(t,e,s,r){var i=e.current,o=Ot(),a=Kr(i);return s=tw(s),e.context===null?e.context=s:e.pendingContext=s,e=ar(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Wr(i,e,a),t!==null&&(Ts(t,i,a,o),nc(t,i,a)),a}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Z0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Op(t,e){Z0(t,e),(t=t.alternate)&&Z0(t,e)}function ME(){return null}var rw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fp(t){this._internalRoot=t}ku.prototype.render=Fp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));Tu(t,e,null,null)};ku.prototype.unmount=Fp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zn(function(){Tu(null,t,null,null)}),e[hr]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dv();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Pr.length&&e!==0&&e<Pr[s].priority;s++);Pr.splice(s,0,t),s===0&&Mv(t)}};function qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ex(){}function VE(t,e,s,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Gc(a);o.call(d)}}var a=sw(e,r,t,0,null,!1,!1,"",ex);return t._reactRootContainer=a,t[hr]=a.current,ba(t.nodeType===8?t.parentNode:t),zn(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var d=Gc(u);c.call(d)}}var u=Vp(t,0,!1,null,null,!1,!1,"",ex);return t._reactRootContainer=u,t[hr]=u.current,ba(t.nodeType===8?t.parentNode:t),zn(function(){Tu(e,u,s,r)}),u}function Au(t,e,s,r,i){var o=s._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var c=i;i=function(){var u=Gc(a);c.call(u)}}Tu(e,a,t,i)}else a=VE(s,e,t,i,r);return Gc(a)}Pv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=zo(e.pendingLanes);s!==0&&(ip(e,s|1),Ht(e,Qe()),!(we&6)&&(Zi=Qe()+500,ln()))}break;case 13:zn(function(){var r=mr(t,1);if(r!==null){var i=Ot();Ts(r,t,1,i)}}),Op(t,1)}};op=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var s=Ot();Ts(e,t,134217728,s)}Op(t,134217728)}};Rv=function(t){if(t.tag===13){var e=Kr(t),s=mr(t,e);if(s!==null){var r=Ot();Ts(s,t,e,r)}Op(t,e)}};Dv=function(){return Ne};Lv=function(t,e){var s=Ne;try{return Ne=t,e()}finally{Ne=s}};Mh=function(t,e,s){switch(e){case"input":if(Ih(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var r=s[e];if(r!==t&&r.form===t.form){var i=bu(r);if(!i)throw Error($(90));hv(r),Ih(r,i)}}}break;case"textarea":pv(t,s);break;case"select":e=s.value,e!=null&&Li(t,!!s.multiple,e,!1)}};wv=Rp;_v=zn;var OE={usingClientEntryPoint:!1,Events:[Ka,Ti,bu,vv,bv,Rp]},Oo={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FE={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ev(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||ME,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gl.isDisabled&&Gl.supportsFiber)try{gu=Gl.inject(FE),Fs=Gl}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OE;ns.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(e))throw Error($(200));return LE(t,e,null,s)};ns.createRoot=function(t,e){if(!qp(t))throw Error($(299));var s=!1,r="",i=rw;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Vp(t,1,!1,null,null,s,!1,r,i),t[hr]=e.current,ba(t.nodeType===8?t.parentNode:t),new Fp(e)};ns.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=Ev(e),t=t===null?null:t.stateNode,t};ns.flushSync=function(t){return zn(t)};ns.hydrate=function(t,e,s){if(!Iu(e))throw Error($(200));return Au(null,t,e,!0,s)};ns.hydrateRoot=function(t,e,s){if(!qp(t))throw Error($(405));var r=s!=null&&s.hydratedSources||null,i=!1,o="",a=rw;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),e=sw(e,null,t,1,s??null,i,!1,o,a),t[hr]=e.current,ba(t),r)for(t=0;t<r.length;t++)s=r[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new ku(e)};ns.render=function(t,e,s){if(!Iu(e))throw Error($(200));return Au(null,t,e,!1,s)};ns.unmountComponentAtNode=function(t){if(!Iu(t))throw Error($(40));return t._reactRootContainer?(zn(function(){Au(null,null,t,!1,function(){t._reactRootContainer=null,t[hr]=null})}),!0):!1};ns.unstable_batchedUpdates=Rp;ns.unstable_renderSubtreeIntoContainer=function(t,e,s,r){if(!Iu(s))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return Au(t,e,s,!1,r)};ns.version="18.3.1-next-f1338f8080-20240426";function nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nw)}catch(t){console.error(t)}}nw(),nv.exports=ns;var qE=nv.exports,tx=qE;_h.createRoot=tx.createRoot,_h.hydrateRoot=tx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ia(){return Ia=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Ia.apply(this,arguments)}var qr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qr||(qr={}));const sx="popstate";function UE(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:c}=r.location;return fm("",{pathname:o,search:a,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(r,i){return typeof i=="string"?i:Hc(i)}return BE(e,s,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function iw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zE(){return Math.random().toString(36).substr(2,8)}function rx(t,e){return{usr:t.state,key:t.key,idx:e}}function fm(t,e,s,r){return s===void 0&&(s=null),Ia({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?co(e):e,{state:s,key:e&&e.key||r||zE()})}function Hc(t){let{pathname:e="/",search:s="",hash:r=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function co(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function BE(t,e,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,c=qr.Pop,u=null,d=m();d==null&&(d=0,a.replaceState(Ia({},a.state,{idx:d}),""));function m(){return(a.state||{idx:null}).idx}function p(){c=qr.Pop;let R=m(),b=R==null?null:R-d;d=R,u&&u({action:c,location:A.location,delta:b})}function g(R,b){c=qr.Push;let w=fm(A.location,R,b);d=m()+1;let C=rx(w,d),D=A.createHref(w);try{a.pushState(C,"",D)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(D)}o&&u&&u({action:c,location:A.location,delta:1})}function y(R,b){c=qr.Replace;let w=fm(A.location,R,b);d=m();let C=rx(w,d),D=A.createHref(w);a.replaceState(C,"",D),o&&u&&u({action:c,location:A.location,delta:0})}function E(R){let b=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof R=="string"?R:Hc(R);return w=w.replace(/ $/,"%20"),Ye(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let A={get action(){return c},get location(){return t(i,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(sx,p),u=R,()=>{i.removeEventListener(sx,p),u=null}},createHref(R){return e(i,R)},createURL:E,encodeLocation(R){let b=E(R);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:g,replace:y,go(R){return a.go(R)}};return A}var nx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nx||(nx={}));function $E(t,e,s){return s===void 0&&(s="/"),GE(t,e,s,!1)}function GE(t,e,s,r){let i=typeof e=="string"?co(e):e,o=Up(i.pathname||"/",s);if(o==null)return null;let a=ow(t);HE(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=rS(o);c=tS(a[u],d,r)}return c}function ow(t,e,s,r){e===void 0&&(e=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(o,a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(Ye(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Jr([r,u.relativePath]),m=s.concat(u);o.children&&o.children.length>0&&(Ye(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ow(o.children,e,m,d)),!(o.path==null&&!o.index)&&e.push({path:d,score:ZE(d,o.index),routesMeta:m})};return t.forEach((o,a)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))i(o,a);else for(let u of aw(o.path))i(o,a,u)}),e}function aw(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,i=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=aw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?o:[o,u].join("/"))),i&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function HE(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:eS(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const WE=/^:[\w-]+$/,QE=3,KE=2,YE=1,JE=10,XE=-2,ix=t=>t==="*";function ZE(t,e){let s=t.split("/"),r=s.length;return s.some(ix)&&(r+=XE),e&&(r+=KE),s.filter(i=>!ix(i)).reduce((i,o)=>i+(WE.test(o)?QE:o===""?YE:JE),r)}function eS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function tS(t,e,s){let{routesMeta:r}=t,i={},o="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,m=o==="/"?e:e.slice(o.length)||"/",p=ox({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},m),g=u.route;if(!p&&d&&s&&!r[r.length-1].route.index&&(p=ox({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Jr([o,p.pathname]),pathnameBase:aS(Jr([o,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(o=Jr([o,p.pathnameBase]))}return a}function ox(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=sS(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((d,m,p)=>{let{paramName:g,isOptional:y}=m;if(g==="*"){let A=c[p]||"";a=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const E=c[p];return y&&!E?d[g]=void 0:d[g]=(E||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:a,pattern:t}}function sS(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),iw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function rS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return iw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Up(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function nS(t,e){e===void 0&&(e="/");let{pathname:s,search:r="",hash:i=""}=typeof t=="string"?co(t):t;return{pathname:s?s.startsWith("/")?s:iS(s,e):e,search:lS(r),hash:cS(i)}}function iS(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Qd(t,e,s,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function oS(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function zp(t,e){let s=oS(t);return e?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function Bp(t,e,s,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=co(t):(i=Ia({},t),Ye(!i.pathname||!i.pathname.includes("?"),Qd("?","pathname","search",i)),Ye(!i.pathname||!i.pathname.includes("#"),Qd("#","pathname","hash",i)),Ye(!i.search||!i.search.includes("#"),Qd("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,c;if(a==null)c=s;else{let p=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}c=p>=0?e[p]:"/"}let u=nS(i,c),d=a&&a!=="/"&&a.endsWith("/"),m=(o||a===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(d||m)&&(u.pathname+="/"),u}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),aS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function uS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lw=["post","put","patch","delete"];new Set(lw);const dS=["get",...lw];new Set(dS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},Aa.apply(this,arguments)}const $p=T.createContext(null),hS=T.createContext(null),cn=T.createContext(null),Cu=T.createContext(null),br=T.createContext({outlet:null,matches:[],isDataRoute:!1}),cw=T.createContext(null);function mS(t,e){let{relative:s}=e===void 0?{}:e;uo()||Ye(!1);let{basename:r,navigator:i}=T.useContext(cn),{hash:o,pathname:a,search:c}=dw(t,{relative:s}),u=a;return r!=="/"&&(u=a==="/"?r:Jr([r,a])),i.createHref({pathname:u,search:c,hash:o})}function uo(){return T.useContext(Cu)!=null}function ii(){return uo()||Ye(!1),T.useContext(Cu).location}function uw(t){T.useContext(cn).static||T.useLayoutEffect(t)}function os(){let{isDataRoute:t}=T.useContext(br);return t?TS():pS()}function pS(){uo()||Ye(!1);let t=T.useContext($p),{basename:e,future:s,navigator:r}=T.useContext(cn),{matches:i}=T.useContext(br),{pathname:o}=ii(),a=JSON.stringify(zp(i,s.v7_relativeSplatPath)),c=T.useRef(!1);return uw(()=>{c.current=!0}),T.useCallback(function(d,m){if(m===void 0&&(m={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=Bp(d,JSON.parse(a),o,m.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Jr([e,p.pathname])),(m.replace?r.replace:r.push)(p,m.state,m)},[e,r,a,o,t])}function fS(){let{matches:t}=T.useContext(br),e=t[t.length-1];return e?e.params:{}}function dw(t,e){let{relative:s}=e===void 0?{}:e,{future:r}=T.useContext(cn),{matches:i}=T.useContext(br),{pathname:o}=ii(),a=JSON.stringify(zp(i,r.v7_relativeSplatPath));return T.useMemo(()=>Bp(t,JSON.parse(a),o,s==="path"),[t,a,o,s])}function gS(t,e){return xS(t,e)}function xS(t,e,s,r){uo()||Ye(!1);let{navigator:i,static:o}=T.useContext(cn),{matches:a}=T.useContext(br),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let m=ii(),p;if(e){var g;let b=typeof e=="string"?co(e):e;d==="/"||(g=b.pathname)!=null&&g.startsWith(d)||Ye(!1),p=b}else p=m;let y=p.pathname||"/",E=y;if(d!=="/"){let b=d.replace(/^\//,"").split("/");E="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let A=!o&&s&&s.matches&&s.matches.length>0?s.matches:$E(t,{pathname:E}),R=_S(A&&A.map(b=>Object.assign({},b,{params:Object.assign({},u,b.params),pathname:Jr([d,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Jr([d,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,s,r);return e&&R?T.createElement(Cu.Provider,{value:{location:Aa({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:qr.Pop}},R):R}function yS(){let t=SS(),e=uS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),s?T.createElement("pre",{style:i},s):null,null)}const vS=T.createElement(yS,null);class bS extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?T.createElement(br.Provider,{value:this.props.routeContext},T.createElement(cw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function wS(t){let{routeContext:e,match:s,children:r}=t,i=T.useContext($p);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),T.createElement(br.Provider,{value:e},r)}function _S(t,e,s,r){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),r===void 0&&(r=null),t==null){var o;if(!s)return null;if(s.errors)t=s.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,c=(i=s)==null?void 0:i.errors;if(c!=null){let m=a.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);m>=0||Ye(!1),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(s&&r&&r.v7_partialHydration)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:g,errors:y}=s,E=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||E){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,g)=>{let y,E=!1,A=null,R=null;s&&(y=c&&p.route.id?c[p.route.id]:void 0,A=p.route.errorElement||vS,u&&(d<0&&g===0?(E=!0,R=null):d===g&&(E=!0,R=p.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,g+1)),w=()=>{let C;return y?C=A:E?C=R:p.route.Component?C=T.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=m,T.createElement(wS,{match:p,routeContext:{outlet:m,matches:b,isDataRoute:s!=null},children:C})};return s&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?T.createElement(bS,{location:s.location,revalidation:s.revalidation,component:A,error:y,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var hw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hw||{}),Wc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Wc||{});function jS(t){let e=T.useContext($p);return e||Ye(!1),e}function NS(t){let e=T.useContext(hS);return e||Ye(!1),e}function ES(t){let e=T.useContext(br);return e||Ye(!1),e}function mw(t){let e=ES(),s=e.matches[e.matches.length-1];return s.route.id||Ye(!1),s.route.id}function SS(){var t;let e=T.useContext(cw),s=NS(Wc.UseRouteError),r=mw(Wc.UseRouteError);return e!==void 0?e:(t=s.errors)==null?void 0:t[r]}function TS(){let{router:t}=jS(hw.UseNavigateStable),e=mw(Wc.UseNavigateStable),s=T.useRef(!1);return uw(()=>{s.current=!0}),T.useCallback(function(i,o){o===void 0&&(o={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Aa({fromRouteId:e},o)))},[t,e])}function kS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gm(t){let{to:e,replace:s,state:r,relative:i}=t;uo()||Ye(!1);let{future:o,static:a}=T.useContext(cn),{matches:c}=T.useContext(br),{pathname:u}=ii(),d=os(),m=Bp(e,zp(c,o.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(m);return T.useEffect(()=>d(JSON.parse(p),{replace:s,state:r,relative:i}),[d,p,i,s,r]),null}function Se(t){Ye(!1)}function IS(t){let{basename:e="/",children:s=null,location:r,navigationType:i=qr.Pop,navigator:o,static:a=!1,future:c}=t;uo()&&Ye(!1);let u=e.replace(/^\/*/,"/"),d=T.useMemo(()=>({basename:u,navigator:o,static:a,future:Aa({v7_relativeSplatPath:!1},c)}),[u,c,o,a]);typeof r=="string"&&(r=co(r));let{pathname:m="/",search:p="",hash:g="",state:y=null,key:E="default"}=r,A=T.useMemo(()=>{let R=Up(m,u);return R==null?null:{location:{pathname:R,search:p,hash:g,state:y,key:E},navigationType:i}},[u,m,p,g,y,E,i]);return A==null?null:T.createElement(cn.Provider,{value:d},T.createElement(Cu.Provider,{children:s,value:A}))}function AS(t){let{children:e,location:s}=t;return gS(xm(e),s)}new Promise(()=>{});function xm(t,e){e===void 0&&(e=[]);let s=[];return T.Children.forEach(t,(r,i)=>{if(!T.isValidElement(r))return;let o=[...e,i];if(r.type===T.Fragment){s.push.apply(s,xm(r.props.children,o));return}r.type!==Se&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=xm(r.props.children,o)),s.push(a)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ym(){return ym=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])}return t},ym.apply(this,arguments)}function CS(t,e){if(t==null)return{};var s={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function PS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RS(t,e){return t.button===0&&(!e||e==="_self")&&!PS(t)}function vm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function DS(t,e){let s=vm(t);return e&&e.forEach((r,i)=>{s.has(i)||e.getAll(i).forEach(o=>{s.append(i,o)})}),s}const LS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MS="6";try{window.__reactRouterVersion=MS}catch{}const VS="startTransition",ax=I2[VS];function OS(t){let{basename:e,children:s,future:r,window:i}=t,o=T.useRef();o.current==null&&(o.current=UE({window:i,v5Compat:!0}));let a=o.current,[c,u]=T.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},m=T.useCallback(p=>{d&&ax?ax(()=>u(p)):u(p)},[u,d]);return T.useLayoutEffect(()=>a.listen(m),[a,m]),T.useEffect(()=>kS(r),[r]),T.createElement(IS,{basename:e,children:s,location:c.location,navigationType:c.action,navigator:a,future:r})}const FS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q=T.forwardRef(function(e,s){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:c,target:u,to:d,preventScrollReset:m,viewTransition:p}=e,g=CS(e,LS),{basename:y}=T.useContext(cn),E,A=!1;if(typeof d=="string"&&qS.test(d)&&(E=d,FS))try{let C=new URL(window.location.href),D=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=Up(D.pathname,y);D.origin===C.origin&&L!=null?d=L+D.search+D.hash:A=!0}catch{}let R=mS(d,{relative:i}),b=US(d,{replace:a,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:p});function w(C){r&&r(C),C.defaultPrevented||b(C)}return T.createElement("a",ym({},g,{href:E||R,onClick:A||o?r:w,ref:s,target:u}))});var lx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(lx||(lx={}));var cx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(cx||(cx={}));function US(t,e){let{target:s,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:c}=e===void 0?{}:e,u=os(),d=ii(),m=dw(t,{relative:a});return T.useCallback(p=>{if(RS(p,s)){p.preventDefault();let g=r!==void 0?r:Hc(d)===Hc(m);u(t,{replace:g,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[d,u,m,r,i,s,t,o,a,c])}function pw(t){let e=T.useRef(vm(t)),s=T.useRef(!1),r=ii(),i=T.useMemo(()=>DS(r.search,s.current?null:e.current),[r.search]),o=os(),a=T.useCallback((c,u)=>{const d=vm(typeof c=="function"?c(i):c);s.current=!0,o("?"+d,u)},[o,i]);return[i,a]}var ux={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},zS=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const i=t[s++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[s++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[s++],a=t[s++],c=t[s++],u=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[s++],a=t[s++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},gw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,c=a?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,m=o>>2,p=(o&3)<<4|c>>4;let g=(c&15)<<2|d>>6,y=d&63;u||(y=64,a||(g=64)),r.push(s[m],s[p],s[g],s[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=s[t.charAt(i++)],c=i<t.length?s[t.charAt(i)]:0;++i;const d=i<t.length?s[t.charAt(i)]:64;++i;const p=i<t.length?s[t.charAt(i)]:64;if(++i,o==null||c==null||d==null||p==null)throw new BS;const g=o<<2|c>>4;if(r.push(g),d!==64){const y=c<<4&240|d>>2;if(r.push(y),p!==64){const E=d<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(t){const e=fw(t);return gw.encodeByteArray(e,!0)},Qc=function(t){return $S(t).replace(/\./g,"")},xw=function(t){try{return gw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=()=>GS().__FIREBASE_DEFAULTS__,WS=()=>{if(typeof process>"u"||typeof ux>"u")return;const t=ux.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},QS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&xw(t[1]);return e&&JSON.parse(e)},Pu=()=>{try{return HS()||WS()||QS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yw=t=>{var e,s;return(s=(e=Pu())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},KS=t=>{const e=yw(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},vw=()=>{var t;return(t=Pu())===null||t===void 0?void 0:t.config},bw=t=>{var e;return(e=Pu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qc(JSON.stringify(s)),Qc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function ZS(){var t;const e=(t=Pu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gp(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tT(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function sT(){return!ZS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hp(){try{return typeof indexedDB=="object"}catch{return!1}}function Wp(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(s){e(s)}})}function ww(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="FirebaseError";class Ps extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=rT,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oi.prototype.create)}}class oi{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?nT(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ps(i,c,r)}}function nT(t,e){return t.replace(iT,(s,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iT=/\{\$([^}]+)}/g;function oT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ca(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const i of s){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(dx(o)&&dx(a)){if(!Ca(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function dx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $o(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Go(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function aT(t,e){const s=new lT(t,e);return s.subscribe.bind(s)}class lT{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let i;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");cT(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:r},i.next===void 0&&(i.next=Kd),i.error===void 0&&(i.error=Kd),i.complete===void 0&&(i.complete=Kd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cT(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1e3,dT=2,hT=4*60*60*1e3,mT=.5;function hx(t,e=uT,s=dT){const r=e*Math.pow(s,t),i=Math.round(mT*r*(Math.random()-.5)*2);return Math.min(hT,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class As{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new YS;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gT(e))try{this.getOrInitializeService({instanceIdentifier:wn})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=wn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wn){return this.instances.has(e)}getOptions(e=wn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(e,s){var r;const i=this.normalizeInstanceIdentifier(s),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const i of r)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fT(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wn){return this.component?this.component.multipleInstances?e:wn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fT(t){return t===wn?void 0:t}function gT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new pT(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const yT={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},vT=ve.INFO,bT={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},wT=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bT[e];if(i)console[i](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ru{constructor(e){this.name=e,this._logLevel=vT,this._logHandler=wT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const _T=(t,e)=>e.some(s=>t instanceof s);let mx,px;function jT(){return mx||(mx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NT(){return px||(px=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _w=new WeakMap,bm=new WeakMap,jw=new WeakMap,Yd=new WeakMap,Qp=new WeakMap;function ET(t){const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{s(Xr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(s=>{s instanceof IDBCursor&&_w.set(s,t)}).catch(()=>{}),Qp.set(e,t),e}function ST(t){if(bm.has(t))return;const e=new Promise((s,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{s(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});bm.set(t,e)}let wm={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return bm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jw.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Xr(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TT(t){wm=t(wm)}function kT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(Jd(this),e,...s);return jw.set(r,e.sort?e.sort():[e]),Xr(r)}:NT().includes(t)?function(...e){return t.apply(Jd(this),e),Xr(_w.get(this))}:function(...e){return Xr(t.apply(Jd(this),e))}}function IT(t){return typeof t=="function"?kT(t):(t instanceof IDBTransaction&&ST(t),_T(t,jT())?new Proxy(t,wm):t)}function Xr(t){if(t instanceof IDBRequest)return ET(t);if(Yd.has(t))return Yd.get(t);const e=IT(t);return e!==t&&(Yd.set(t,e),Qp.set(e,t)),e}const Jd=t=>Qp.get(t);function Nw(t,e,{blocked:s,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),c=Xr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Xr(a.result),u.oldVersion,u.newVersion,Xr(a.transaction),u)}),s&&a.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const AT=["get","getKey","getAll","getAllKeys","count"],CT=["put","add","delete","clear"],Xd=new Map;function fx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xd.get(e))return Xd.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,i=CT.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(i||AT.includes(s)))return;const o=async function(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[s](...c),i&&u.done]))[0]};return Xd.set(e,o),o}TT(t=>({...t,get:(e,s,r)=>fx(e,s)||t.get(e,s,r),has:(e,s)=>!!fx(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(RT(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function RT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const _m="@firebase/app",gx="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr=new Ru("@firebase/app"),DT="@firebase/app-compat",LT="@firebase/analytics-compat",MT="@firebase/analytics",VT="@firebase/app-check-compat",OT="@firebase/app-check",FT="@firebase/auth",qT="@firebase/auth-compat",UT="@firebase/database",zT="@firebase/database-compat",BT="@firebase/functions",$T="@firebase/functions-compat",GT="@firebase/installations",HT="@firebase/installations-compat",WT="@firebase/messaging",QT="@firebase/messaging-compat",KT="@firebase/performance",YT="@firebase/performance-compat",JT="@firebase/remote-config",XT="@firebase/remote-config-compat",ZT="@firebase/storage",ek="@firebase/storage-compat",tk="@firebase/firestore",sk="@firebase/vertexai-preview",rk="@firebase/firestore-compat",nk="firebase",ik="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="[DEFAULT]",ok={[_m]:"fire-core",[DT]:"fire-core-compat",[MT]:"fire-analytics",[LT]:"fire-analytics-compat",[OT]:"fire-app-check",[VT]:"fire-app-check-compat",[FT]:"fire-auth",[qT]:"fire-auth-compat",[UT]:"fire-rtdb",[zT]:"fire-rtdb-compat",[BT]:"fire-fn",[$T]:"fire-fn-compat",[GT]:"fire-iid",[HT]:"fire-iid-compat",[WT]:"fire-fcm",[QT]:"fire-fcm-compat",[KT]:"fire-perf",[YT]:"fire-perf-compat",[JT]:"fire-rc",[XT]:"fire-rc-compat",[ZT]:"fire-gcs",[ek]:"fire-gcs-compat",[tk]:"fire-fst",[rk]:"fire-fst-compat",[sk]:"fire-vertex","fire-js":"fire-js",[nk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new Map,ak=new Map,Nm=new Map;function xx(t,e){try{t.container.addComponent(e)}catch(s){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function $s(t){const e=t.name;if(Nm.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;Nm.set(e,t);for(const s of Kc.values())xx(s,t);for(const s of ak.values())xx(s,t);return!0}function ai(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function js(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new oi("app","Firebase",lk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=ik;function Ew(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Zr.create("bad-app-name",{appName:String(i)});if(s||(s=vw()),!s)throw Zr.create("no-options");const o=Kc.get(i);if(o){if(Ca(s,o.options)&&Ca(r,o.config))return o;throw Zr.create("duplicate-app",{appName:i})}const a=new xT(i);for(const u of Nm.values())a.addComponent(u);const c=new ck(s,r,a);return Kc.set(i,c),c}function Kp(t=jm){const e=Kc.get(t);if(!e&&t===jm&&vw())return Ew();if(!e)throw Zr.create("no-app",{appName:t});return e}function hs(t,e,s){var r;let i=(r=ok[t])!==null&&r!==void 0?r:t;s&&(i+=`-${s}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(c.join(" "));return}$s(new As(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk="firebase-heartbeat-database",dk=1,Pa="firebase-heartbeat-store";let Zd=null;function Sw(){return Zd||(Zd=Nw(uk,dk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pa)}catch(s){console.warn(s)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),Zd}async function hk(t){try{const s=(await Sw()).transaction(Pa),r=await s.objectStore(Pa).get(Tw(t));return await s.done,r}catch(e){if(e instanceof Ps)fr.warn(e.message);else{const s=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fr.warn(s.message)}}}async function yx(t,e){try{const r=(await Sw()).transaction(Pa,"readwrite");await r.objectStore(Pa).put(e,Tw(t)),await r.done}catch(s){if(s instanceof Ps)fr.warn(s.message);else{const r=Zr.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});fr.warn(r.message)}}}function Tw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=1024,pk=30*24*60*60*1e3;class fk{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new xk(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s,r;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=vx();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=pk}),this._storage.overwrite(this._heartbeatsCache))}catch(i){fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=vx(),{heartbeatsToSend:r,unsentEntries:i}=gk(this._heartbeatsCache.heartbeats),o=Qc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return fr.warn(s),""}}}function vx(){return new Date().toISOString().substring(0,10)}function gk(t,e=mk){const s=[];let r=t.slice();for(const i of t){const o=s.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),bx(s)>e){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),bx(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class xk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hp()?Wp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await hk(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return yx(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bx(t){return Qc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yk(t){$s(new As("platform-logger",e=>new PT(e),"PRIVATE")),$s(new As("heartbeat",e=>new fk(e),"PRIVATE")),hs(_m,gx,t),hs(_m,gx,"esm2017"),hs("fire-js","")}yk("");function Yp(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(s[r[i]]=t[r[i]]);return s}function kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vk=kw,Iw=new oi("auth","Firebase",kw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=new Ru("@firebase/auth");function bk(t,...e){Yc.logLevel<=ve.WARN&&Yc.warn(`Auth (${ho}): ${t}`,...e)}function dc(t,...e){Yc.logLevel<=ve.ERROR&&Yc.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t,...e){throw Xp(t,...e)}function ks(t,...e){return Xp(t,...e)}function Jp(t,e,s){const r=Object.assign(Object.assign({},vk()),{[e]:s});return new oi("auth","Firebase",r).create(e,{appName:t.name})}function lr(t){return Jp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wk(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&gs(t,"argument-error"),Jp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xp(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return Iw.create(t,...e)}function oe(t,e,...s){if(!t)throw Xp(e,...s)}function rr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dc(e),new Error(e)}function gr(t,e){t||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _k(){return wx()==="http:"||wx()==="https:"}function wx(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_k()||Gp()||"connection"in navigator)?navigator.onLine:!0}function Nk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,s){this.shortDelay=e,this.longDelay=s,gr(s>e,"Short delay should be less than long delay!"),this.isMobile=XS()||eT()}get(){return jk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t,e){gr(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new Xa(3e4,6e4);function wr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rs(t,e,s,r,i={}){return Cw(t,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const c=Ja(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Aw.fetch()(Pw(t,t.config.apiHost,s,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))})}async function Cw(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ek),e);try{const i=new kk(t),o=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Hl(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const c=o.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Hl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Hl(t,"user-disabled",a);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Jp(t,m,d);gs(t,m)}}catch(i){if(i instanceof Ps)throw i;gs(t,"network-request-failed",{message:String(i)})}}async function Za(t,e,s,r,i={}){const o=await Rs(t,e,s,r,i);return"mfaPendingCredential"in o&&gs(t,"multi-factor-auth-required",{_serverResponse:o}),o}function Pw(t,e,s,r){const i=`${e}${s}?${r}`;return t.config.emulator?Zp(t.config,i):`${t.config.apiScheme}://${i}`}function Tk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(ks(this.auth,"network-request-failed")),Sk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Hl(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const i=ks(t,e,r);return i.customData._tokenResponse=s,i}function _x(t){return t!==void 0&&t.enterprise!==void 0}class Ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return Tk(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ak(t,e){return Rs(t,"GET","/v2/recaptchaConfig",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(t,e){return Rs(t,"POST","/v1/accounts:delete",e)}async function Rw(t,e){return Rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Pk(t,e=!1){const s=Me(t),r=await s.getIdToken(e),i=ef(r);oe(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:na(eh(i.auth_time)),issuedAtTime:na(eh(i.iat)),expirationTime:na(eh(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function eh(t){return Number(t)*1e3}function ef(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{const i=xw(s);return i?JSON.parse(i):(dc("Failed to decode base64 JWT payload"),null)}catch(i){return dc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jx(t){const e=ef(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bn(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Ps&&Rk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Rk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=na(this.lastLoginAt),this.creationTime=na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){var e;const s=t.auth,r=await t.getIdToken(),i=await Bn(t,Rw(s,{idToken:r}));oe(i==null?void 0:i.users.length,s,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Dw(o.providerUserInfo):[],c=Mk(t.providerData,a),u=t.isAnonymous,d=!(t.email&&o.passwordHash)&&!(c!=null&&c.length),m=u?d:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Sm(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,p)}async function Lk(t){const e=Me(t);await Jc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Mk(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Dw(t){return t.map(e=>{var{providerId:s}=e,r=Yp(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e){const s=await Cw(t,{},async()=>{const r=Ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=Pw(t,i,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Aw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function Ok(t,e){return Rs(t,"POST","/v2/accounts:revokeToken",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const s=jx(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:i,expiresIn:o}=await Vk(e,s);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:i,expirationTime:o}=s,a=new Ui;return r&&(oe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(oe(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ui,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor(e){var{uid:s,auth:r,stsTokenManager:i}=e,o=Yp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Sm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await Bn(this,this.stsTokenManager.getToken(this.auth,e));return oe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return Pk(this,e)}reload(){return Lk(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Jc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(js(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await Bn(this,Ck(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,i,o,a,c,u,d,m;const p=(r=s.displayName)!==null&&r!==void 0?r:void 0,g=(i=s.email)!==null&&i!==void 0?i:void 0,y=(o=s.phoneNumber)!==null&&o!==void 0?o:void 0,E=(a=s.photoURL)!==null&&a!==void 0?a:void 0,A=(c=s.tenantId)!==null&&c!==void 0?c:void 0,R=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=s.createdAt)!==null&&d!==void 0?d:void 0,w=(m=s.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:C,emailVerified:D,isAnonymous:L,providerData:O,stsTokenManager:j}=s;oe(C&&j,e,"internal-error");const x=Ui.fromJSON(this.name,j);oe(typeof C=="string",e,"internal-error"),Ir(p,e.name),Ir(g,e.name),oe(typeof D=="boolean",e,"internal-error"),oe(typeof L=="boolean",e,"internal-error"),Ir(y,e.name),Ir(E,e.name),Ir(A,e.name),Ir(R,e.name),Ir(b,e.name),Ir(w,e.name);const v=new nr({uid:C,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:L,photoURL:E,phoneNumber:y,tenantId:A,stsTokenManager:x,createdAt:b,lastLoginAt:w});return O&&Array.isArray(O)&&(v.providerData=O.map(k=>Object.assign({},k))),R&&(v._redirectEventId=R),v}static async _fromIdTokenResponse(e,s,r=!1){const i=new Ui;i.updateFromServerResponse(s);const o=new nr({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Jc(o),o}static async _fromGetAccountInfoResponse(e,s,r){const i=s.users[0];oe(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?Dw(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Ui;c.updateFromIdToken(r);const u=new nr({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Sm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=new Map;function ir(t){gr(t instanceof Function,"Expected a class definition");let e=Nx.get(t);return e?(gr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Nx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Lw.type="NONE";const Ex=Lw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t,e,s){return`firebase:${t}:${e}:${s}`}class zi{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=hc(this.userKey,i.apiKey,o),this.fullPersistenceKey=hc("persistence",i.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new zi(ir(Ex),e,r);const i=(await Promise.all(s.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=i[0]||ir(Ex);const a=hc(r,e.config.apiKey,e.name);let c=null;for(const d of s)try{const m=await d._get(a);if(m){const p=nr._fromJSON(e,m);d!==o&&(c=p),o=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new zi(o,e,r):(o=u[0],c&&await o._set(a,c.toJSON()),await Promise.all(s.map(async d=>{if(d!==o)try{await d._remove(a)}catch{}})),new zi(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uw(e))return"Blackberry";if(zw(e))return"Webos";if(Vw(e))return"Safari";if((e.includes("chrome/")||Ow(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Mw(t=Pt()){return/firefox\//i.test(t)}function Vw(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ow(t=Pt()){return/crios\//i.test(t)}function Fw(t=Pt()){return/iemobile/i.test(t)}function qw(t=Pt()){return/android/i.test(t)}function Uw(t=Pt()){return/blackberry/i.test(t)}function zw(t=Pt()){return/webos/i.test(t)}function tf(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Fk(t=Pt()){var e;return tf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function qk(){return tT()&&document.documentMode===10}function Bw(t=Pt()){return tf(t)||qw(t)||zw(t)||Uw(t)||/windows phone/i.test(t)||Fw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $w(t,e=[]){let s;switch(t){case"Browser":s=Sx(Pt());break;case"Worker":s=`${Sx(Pt())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=o=>new Promise((a,c)=>{try{const u=e(o);a(u)}catch(u){c(u)}});r.onAbort=s,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e={}){return Rs(t,"GET","/v2/passwordPolicy",wr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=6;class $k{constructor(e){var s,r,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=a.minPasswordLength)!==null&&s!==void 0?s:Bk,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,i,o,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,s,r,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tx(this),this.idTokenSubscription=new Tx(this),this.beforeStateQueue=new Uk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Iw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=ir(s)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Rw(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(js(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,c=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Jc(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Nk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(js(this.app))return Promise.reject(lr(this));const s=e?Me(e):null;return s&&oe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return js(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return js(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zk(this),s=new $k(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oi("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await Ok(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&ir(e)||this._popupRedirectResolver;oe(s,this,"argument-error"),this.redirectPersistenceManager=await zi.create(this,[ir(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,i){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(c,this,"internal-error"),c.then(()=>{a||o(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,r,i);return()=>{a=!0,u()}}else{const u=e.addObserver(s);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$w(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&bk(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function _r(t){return Me(t)}class Tx{constructor(e){this.auth=e,this.observer=null,this.addObserver=aT(s=>this.observer=s)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hk(t){Du=t}function Gw(t){return Du.loadJS(t)}function Wk(){return Du.recaptchaEnterpriseScript}function Qk(){return Du.gapiScript}function Kk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Yk="recaptcha-enterprise",Jk="NO_RECAPTCHA";class Xk{constructor(e){this.type=Yk,this.auth=_r(e)}async verify(e="verify",s=!1){async function r(o){if(!s){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,c)=>{Ak(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Ik(u);return o.tenantId==null?o._agentRecaptchaConfig=d:o._tenantRecaptchaConfigs[o.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function i(o,a,c){const u=window.grecaptcha;_x(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(d=>{a(d)}).catch(()=>{a(Jk)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,a)=>{r(this.auth).then(c=>{if(!s&&_x(window.grecaptcha))i(c,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Wk();u.length!==0&&(u+=c),Gw(u).then(()=>{i(c,o,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function kx(t,e,s,r=!1){const i=new Xk(t);let o;try{o=await i.verify(s)}catch{o=await i.verify(s,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Xc(t,e,s,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await kx(t,e,s,s==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await kx(t,e,s,s==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t,e){const s=ai(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),o=s.getOptions();if(Ca(o,e??{}))return i;gs(i,"already-initialized")}return s.initialize({options:e})}function eI(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(ir);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function tI(t,e,s){const r=_r(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=Hw(e),{host:a,port:c}=sI(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${o}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),rI()}function Hw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sI(t){const e=Hw(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:Ix(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:Ix(a)}}}function Ix(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function rI(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,s){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function nI(t,e){return Rs(t,"POST","/v1/accounts:update",e)}async function iI(t,e){return Rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oI(t,e){return Za(t,"POST","/v1/accounts:signInWithPassword",wr(t,e))}async function Ww(t,e){return Rs(t,"POST","/v1/accounts:sendOobCode",wr(t,e))}async function aI(t,e){return Ww(t,e)}async function lI(t,e){return Ww(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,e))}async function uI(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends sf{constructor(e,s,r,i=null){super("password",r),this._email=e,this._password=s,this._tenantId=i}static _fromEmailAndPassword(e,s){return new Ra(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new Ra(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,s,"signInWithPassword",oI);case"emailLink":return cI(e,{email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Xc(e,r,"signUpPassword",iI);case"emailLink":return uI(e,{idToken:s,email:this._email,oobCode:this._password});default:gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(t,e){return Za(t,"POST","/v1/accounts:signInWithIdp",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="http://localhost";class $n extends sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new $n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):gs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=s,o=Yp(s,["providerId","signInMethod"]);if(!r||!i)return null;const a=new $n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const s=this.buildRequest();return Bi(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,Bi(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,Bi(e,s)}buildRequest(){const e={requestUri:dI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Ja(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mI(t){const e=$o(Go(t)).link,s=e?$o(Go(e)).deep_link_id:null,r=$o(Go(t)).deep_link_id;return(r?$o(Go(r)).link:null)||r||s||e||t}class rf{constructor(e){var s,r,i,o,a,c;const u=$o(Go(e)),d=(s=u.apiKey)!==null&&s!==void 0?s:null,m=(r=u.oobCode)!==null&&r!==void 0?r:null,p=hI((i=u.mode)!==null&&i!==void 0?i:null);oe(d&&m&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=m,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const s=mI(e);try{return new rf(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.providerId=li.PROVIDER_ID}static credential(e,s){return Ra._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=rf.parseLink(s);return oe(r,"argument-error"),Ra._fromEmailAndCode(e,r.code,r.tenantId)}}li.PROVIDER_ID="password";li.EMAIL_PASSWORD_SIGN_IN_METHOD="password";li.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends nf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends el{constructor(){super("facebook.com")}static credential(e){return $n._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Dr.credential(e.oauthAccessToken)}catch{return null}}}Dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return $n._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return Zs.credential(s,r)}catch{return null}}}Zs.GOOGLE_SIGN_IN_METHOD="google.com";Zs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends el{constructor(){super("github.com")}static credential(e){return $n._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends el{constructor(){super("twitter.com")}static credential(e,s){return $n._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return Lr.credential(s,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(t,e){return Za(t,"POST","/v1/accounts:signUp",wr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,i=!1){const o=await nr._fromIdTokenResponse(e,r,i),a=Ax(r);return new Gn({user:o,providerId:a,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const i=Ax(r);return new Gn({user:e,providerId:i,_tokenResponse:r,operationType:s})}}function Ax(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc extends Ps{constructor(e,s,r,i){var o;super(s.code,s.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Zc.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,i){return new Zc(e,s,r,i)}}function Qw(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Zc._fromErrorAndOperation(t,o,e,r):o})}async function fI(t,e,s=!1){const r=await Bn(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return Gn._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(t,e,s=!1){const{auth:r}=t;if(js(r.app))return Promise.reject(lr(r));const i="reauthenticate";try{const o=await Bn(t,Qw(r,i,e,t),s);oe(o.idToken,r,"internal-error");const a=ef(o.idToken);oe(a,r,"internal-error");const{sub:c}=a;return oe(t.uid===c,r,"user-mismatch"),Gn._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&gs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(t,e,s=!1){if(js(t.app))return Promise.reject(lr(t));const r="signIn",i=await Qw(t,r,e),o=await Gn._fromIdTokenResponse(t,r,i);return s||await t._updateCurrentUser(o.user),o}async function gI(t,e){return Yw(_r(t),e)}async function xI(t,e){return Kw(Me(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jw(t){const e=_r(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Tm(t,e,s){const r=_r(t);await Xc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",lI)}async function Xw(t,e,s){if(js(t.app))return Promise.reject(lr(t));const r=_r(t),a=await Xc(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pI).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Jw(t),u}),c=await Gn._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Zw(t,e,s){return js(t.app)?Promise.reject(lr(t)):gI(Me(t),li.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Jw(t),r})}async function Cx(t,e){const s=Me(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:o}=await aI(s.auth,i);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e){return Rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const r=Me(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},a=await Bn(r,yI(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function vI(t,e){return bI(Me(t),null,e)}async function bI(t,e,s){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(o.password=s);const a=await Bn(t,nI(r,o));await t._updateTokensIfNecessary(a,!0)}function wI(t,e,s,r){return Me(t).onIdTokenChanged(e,s,r)}function _I(t,e,s){return Me(t).beforeAuthStateChanged(e,s)}function jI(t,e,s,r){return Me(t).onAuthStateChanged(e,s,r)}function NI(t){return Me(t).signOut()}const eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(eu,"1"),this.storage.removeItem(eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=1e3,SI=10;class s1 extends t1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),i=this.localCache[s];r!==i&&e(s,i,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!s&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);qk()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SI):i()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},EI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}s1.type="LOCAL";const TI=s1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1 extends t1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}r1.type="SESSION";const n1=r1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const r=new Lu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:i,data:o}=s.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(a).map(async d=>d(s.origin,o)),u=await kI(c);s.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((c,u)=>{const d=of("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(g.data.response);break;default:clearTimeout(m),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:s},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function AI(t){Us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function CI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PI(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RI(){return i1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="firebaseLocalStorageDb",DI=1,tu="firebaseLocalStorage",a1="fbase_key";class tl{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Mu(t,e){return t.transaction([tu],e?"readwrite":"readonly").objectStore(tu)}function LI(){const t=indexedDB.deleteDatabase(o1);return new tl(t).toPromise()}function km(){const t=indexedDB.open(o1,DI);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(tu,{keyPath:a1})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(tu)?e(r):(r.close(),await LI(),e(await km()))})})}async function Px(t,e,s){const r=Mu(t,!0).put({[a1]:e,value:s});return new tl(r).toPromise()}async function MI(t,e){const s=Mu(t,!1).get(e),r=await new tl(s).toPromise();return r===void 0?null:r.value}function Rx(t,e){const s=Mu(t,!0).delete(e);return new tl(s).toPromise()}const VI=800,OI=3;class l1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await km(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>OI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return i1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lu._getInstance(RI()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await CI(),!this.activeServiceWorker)return;this.sender=new II(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await km();return await Px(e,eu,"1"),await Rx(e,eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>Px(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>MI(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Rx(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Mu(i,!1).getAll();return new tl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}l1.type="LOCAL";const FI=l1;new Xa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t,e){return e?ir(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bi(e,this._buildIdpRequest())}_linkToIdToken(e,s){return Bi(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return Bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function qI(t){return Yw(t.auth,new af(t),t.bypassAuthState)}function UI(t){const{auth:e,user:s}=t;return oe(s,e,"internal-error"),Kw(s,new af(t),t.bypassAuthState)}async function zI(t){const{auth:e,user:s}=t;return oe(s,e,"internal-error"),fI(s,new af(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e,s,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:i,tenantId:o,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:s,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qI;case"linkViaPopup":case"linkViaRedirect":return zI;case"reauthViaPopup":case"reauthViaRedirect":return UI;default:gs(this.auth,"internal-error")}}resolve(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=new Xa(2e3,1e4);async function Dx(t,e,s){if(js(t.app))return Promise.reject(ks(t,"operation-not-supported-in-this-environment"));const r=_r(t);wk(t,e,nf);const i=c1(r,s);return new Tn(r,"signInViaPopup",e,i).executeNotNull()}class Tn extends u1{constructor(e,s,r,i,o){super(e,s,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Tn.currentPopupAction&&Tn.currentPopupAction.cancel(),Tn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){gr(this.filter.length===1,"Popup operations only handle one event");const e=of();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(ks(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ks(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ks(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BI.get())};e()}}Tn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="pendingRedirect",mc=new Map;class GI extends u1{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=mc.get(this.auth._key());if(!e){try{const r=await HI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}mc.set(this.auth._key(),e)}return this.bypassAuthState||mc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HI(t,e){const s=KI(e),r=QI(t);if(!await r._isAvailable())return!1;const i=await r._get(s)==="true";return await r._remove(s),i}function WI(t,e){mc.set(t._key(),e)}function QI(t){return ir(t._redirectPersistence)}function KI(t){return hc($I,t.config.apiKey,t.name)}async function YI(t,e,s=!1){if(js(t.app))return Promise.reject(lr(t));const r=_r(t),i=c1(r,e),a=await new GI(r,i,s).execute();return a&&!s&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=10*60*1e3;class XI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZI(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!d1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(ks(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lx(e))}saveEventToCache(e){this.cachedEventUids.add(Lx(e)),this.lastProcessedEventTime=Date.now()}}function Lx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function d1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZI(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return d1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t,e={}){return Rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sA=/^https?/;async function rA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eA(t);for(const s of e)try{if(nA(s))return}catch{}gs(t,"unauthorized-domain")}function nA(t){const e=Em(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&a.hostname===r}if(!sA.test(s))return!1;if(tA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=new Xa(3e4,6e4);function Mx(){const t=Us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function oA(t){return new Promise((e,s)=>{var r,i,o;function a(){Mx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mx(),s(ks(t,"network-request-failed"))},timeout:iA.get()})}if(!((i=(r=Us().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Us().gapi)===null||o===void 0)&&o.load)a();else{const c=Kk("iframefcb");return Us()[c]=()=>{gapi.load?a():s(ks(t,"network-request-failed"))},Gw(`${Qk()}?onload=${c}`).catch(u=>s(u))}}).catch(e=>{throw pc=null,e})}let pc=null;function aA(t){return pc=pc||oA(t),pc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=new Xa(5e3,15e3),cA="__/auth/iframe",uA="emulator/auth/iframe",dA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mA(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Zp(e,uA):`https://${t.config.authDomain}/${cA}`,r={apiKey:e.apiKey,appName:t.name,v:ho},i=hA.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${Ja(r).slice(1)}`}async function pA(t){const e=await aA(t),s=Us().gapi;return oe(s,t,"internal-error"),e.open({where:document.body,url:mA(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dA,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=ks(t,"network-request-failed"),c=Us().setTimeout(()=>{o(a)},lA.get());function u(){Us().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gA=500,xA=600,yA="_blank",vA="http://localhost";class Vx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bA(t,e,s,r=gA,i=xA){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},fA),{width:r.toString(),height:i.toString(),top:o,left:a}),d=Pt().toLowerCase();s&&(c=Ow(d)?yA:s),Mw(d)&&(e=e||vA,u.scrollbars="yes");const m=Object.entries(u).reduce((g,[y,E])=>`${g}${y}=${E},`,"");if(Fk(d)&&c!=="_self")return wA(e||"",c),new Vx(null);const p=window.open(e||"",c,m);oe(p,t,"popup-blocked");try{p.focus()}catch{}return new Vx(p)}function wA(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="__/auth/handler",jA="emulator/auth/handler",NA=encodeURIComponent("fac");async function Ox(t,e,s,r,i,o){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:ho,eventId:i};if(e instanceof nf){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",oT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))a[m]=p}if(e instanceof el){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),d=u?`#${NA}=${encodeURIComponent(u)}`:"";return`${EA(t)}?${Ja(c).slice(1)}${d}`}function EA({config:t}){return t.emulator?Zp(t,jA):`https://${t.authDomain}/${_A}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="webStorageSupport";class SA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=n1,this._completeRedirectFn=YI,this._overrideRedirectResult=WI}async _openPopup(e,s,r,i){var o;gr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Ox(e,s,r,Em(),i);return bA(e,a,of())}async _openRedirect(e,s,r,i){await this._originValidation(e);const o=await Ox(e,s,r,Em(),i);return AI(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:o}=this.eventManagers[s];return i?Promise.resolve(i):(gr(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await pA(e),r=new XI(e);return s.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(th,{type:th},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[th];a!==void 0&&s(!!a),gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=rA(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Bw()||Vw()||tf()}}const TA=SA;var Fx="@firebase/auth",qx="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AA(t){$s(new As("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;oe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$w(t)},d=new Gk(r,i,o,u);return eI(d,s),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),$s(new As("auth-internal",e=>{const s=_r(e.getProvider("auth").getImmediate());return(r=>new kA(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Fx,qx,IA(t)),hs(Fx,qx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=5*60,PA=bw("authIdTokenMaxAge")||CA;let Ux=null;const RA=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>PA)return;const i=s==null?void 0:s.token;Ux!==i&&(Ux=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DA(t=Kp()){const e=ai(t,"auth");if(e.isInitialized())return e.getImmediate();const s=Zk(t,{popupRedirectResolver:TA,persistence:[FI,TI,n1]}),r=bw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=RA(o.toString());_I(s,a,()=>a(s.currentUser)),wI(s,c=>a(c))}}const i=yw("auth");return i&&tI(s,`http://${i}`),s}function LA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Hk({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=ks("internal-error");o.customData=i,s(o)},r.type="text/javascript",r.charset="UTF-8",LA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AA("Browser");var MA="firebase",VA="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(MA,VA,"app");var zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Rn,h1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,x){function v(){}v.prototype=x.prototype,j.D=x.prototype,j.prototype=new v,j.prototype.constructor=j,j.C=function(k,N,I){for(var S=Array(arguments.length-2),se=2;se<arguments.length;se++)S[se-2]=arguments[se];return x.prototype[N].apply(k,S)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(j,x,v){v||(v=0);var k=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)k[N]=x.charCodeAt(v++)|x.charCodeAt(v++)<<8|x.charCodeAt(v++)<<16|x.charCodeAt(v++)<<24;else for(N=0;16>N;++N)k[N]=x[v++]|x[v++]<<8|x[v++]<<16|x[v++]<<24;x=j.g[0],v=j.g[1],N=j.g[2];var I=j.g[3],S=x+(I^v&(N^I))+k[0]+3614090360&4294967295;x=v+(S<<7&4294967295|S>>>25),S=I+(N^x&(v^N))+k[1]+3905402710&4294967295,I=x+(S<<12&4294967295|S>>>20),S=N+(v^I&(x^v))+k[2]+606105819&4294967295,N=I+(S<<17&4294967295|S>>>15),S=v+(x^N&(I^x))+k[3]+3250441966&4294967295,v=N+(S<<22&4294967295|S>>>10),S=x+(I^v&(N^I))+k[4]+4118548399&4294967295,x=v+(S<<7&4294967295|S>>>25),S=I+(N^x&(v^N))+k[5]+1200080426&4294967295,I=x+(S<<12&4294967295|S>>>20),S=N+(v^I&(x^v))+k[6]+2821735955&4294967295,N=I+(S<<17&4294967295|S>>>15),S=v+(x^N&(I^x))+k[7]+4249261313&4294967295,v=N+(S<<22&4294967295|S>>>10),S=x+(I^v&(N^I))+k[8]+1770035416&4294967295,x=v+(S<<7&4294967295|S>>>25),S=I+(N^x&(v^N))+k[9]+2336552879&4294967295,I=x+(S<<12&4294967295|S>>>20),S=N+(v^I&(x^v))+k[10]+4294925233&4294967295,N=I+(S<<17&4294967295|S>>>15),S=v+(x^N&(I^x))+k[11]+2304563134&4294967295,v=N+(S<<22&4294967295|S>>>10),S=x+(I^v&(N^I))+k[12]+1804603682&4294967295,x=v+(S<<7&4294967295|S>>>25),S=I+(N^x&(v^N))+k[13]+4254626195&4294967295,I=x+(S<<12&4294967295|S>>>20),S=N+(v^I&(x^v))+k[14]+2792965006&4294967295,N=I+(S<<17&4294967295|S>>>15),S=v+(x^N&(I^x))+k[15]+1236535329&4294967295,v=N+(S<<22&4294967295|S>>>10),S=x+(N^I&(v^N))+k[1]+4129170786&4294967295,x=v+(S<<5&4294967295|S>>>27),S=I+(v^N&(x^v))+k[6]+3225465664&4294967295,I=x+(S<<9&4294967295|S>>>23),S=N+(x^v&(I^x))+k[11]+643717713&4294967295,N=I+(S<<14&4294967295|S>>>18),S=v+(I^x&(N^I))+k[0]+3921069994&4294967295,v=N+(S<<20&4294967295|S>>>12),S=x+(N^I&(v^N))+k[5]+3593408605&4294967295,x=v+(S<<5&4294967295|S>>>27),S=I+(v^N&(x^v))+k[10]+38016083&4294967295,I=x+(S<<9&4294967295|S>>>23),S=N+(x^v&(I^x))+k[15]+3634488961&4294967295,N=I+(S<<14&4294967295|S>>>18),S=v+(I^x&(N^I))+k[4]+3889429448&4294967295,v=N+(S<<20&4294967295|S>>>12),S=x+(N^I&(v^N))+k[9]+568446438&4294967295,x=v+(S<<5&4294967295|S>>>27),S=I+(v^N&(x^v))+k[14]+3275163606&4294967295,I=x+(S<<9&4294967295|S>>>23),S=N+(x^v&(I^x))+k[3]+4107603335&4294967295,N=I+(S<<14&4294967295|S>>>18),S=v+(I^x&(N^I))+k[8]+1163531501&4294967295,v=N+(S<<20&4294967295|S>>>12),S=x+(N^I&(v^N))+k[13]+2850285829&4294967295,x=v+(S<<5&4294967295|S>>>27),S=I+(v^N&(x^v))+k[2]+4243563512&4294967295,I=x+(S<<9&4294967295|S>>>23),S=N+(x^v&(I^x))+k[7]+1735328473&4294967295,N=I+(S<<14&4294967295|S>>>18),S=v+(I^x&(N^I))+k[12]+2368359562&4294967295,v=N+(S<<20&4294967295|S>>>12),S=x+(v^N^I)+k[5]+4294588738&4294967295,x=v+(S<<4&4294967295|S>>>28),S=I+(x^v^N)+k[8]+2272392833&4294967295,I=x+(S<<11&4294967295|S>>>21),S=N+(I^x^v)+k[11]+1839030562&4294967295,N=I+(S<<16&4294967295|S>>>16),S=v+(N^I^x)+k[14]+4259657740&4294967295,v=N+(S<<23&4294967295|S>>>9),S=x+(v^N^I)+k[1]+2763975236&4294967295,x=v+(S<<4&4294967295|S>>>28),S=I+(x^v^N)+k[4]+1272893353&4294967295,I=x+(S<<11&4294967295|S>>>21),S=N+(I^x^v)+k[7]+4139469664&4294967295,N=I+(S<<16&4294967295|S>>>16),S=v+(N^I^x)+k[10]+3200236656&4294967295,v=N+(S<<23&4294967295|S>>>9),S=x+(v^N^I)+k[13]+681279174&4294967295,x=v+(S<<4&4294967295|S>>>28),S=I+(x^v^N)+k[0]+3936430074&4294967295,I=x+(S<<11&4294967295|S>>>21),S=N+(I^x^v)+k[3]+3572445317&4294967295,N=I+(S<<16&4294967295|S>>>16),S=v+(N^I^x)+k[6]+76029189&4294967295,v=N+(S<<23&4294967295|S>>>9),S=x+(v^N^I)+k[9]+3654602809&4294967295,x=v+(S<<4&4294967295|S>>>28),S=I+(x^v^N)+k[12]+3873151461&4294967295,I=x+(S<<11&4294967295|S>>>21),S=N+(I^x^v)+k[15]+530742520&4294967295,N=I+(S<<16&4294967295|S>>>16),S=v+(N^I^x)+k[2]+3299628645&4294967295,v=N+(S<<23&4294967295|S>>>9),S=x+(N^(v|~I))+k[0]+4096336452&4294967295,x=v+(S<<6&4294967295|S>>>26),S=I+(v^(x|~N))+k[7]+1126891415&4294967295,I=x+(S<<10&4294967295|S>>>22),S=N+(x^(I|~v))+k[14]+2878612391&4294967295,N=I+(S<<15&4294967295|S>>>17),S=v+(I^(N|~x))+k[5]+4237533241&4294967295,v=N+(S<<21&4294967295|S>>>11),S=x+(N^(v|~I))+k[12]+1700485571&4294967295,x=v+(S<<6&4294967295|S>>>26),S=I+(v^(x|~N))+k[3]+2399980690&4294967295,I=x+(S<<10&4294967295|S>>>22),S=N+(x^(I|~v))+k[10]+4293915773&4294967295,N=I+(S<<15&4294967295|S>>>17),S=v+(I^(N|~x))+k[1]+2240044497&4294967295,v=N+(S<<21&4294967295|S>>>11),S=x+(N^(v|~I))+k[8]+1873313359&4294967295,x=v+(S<<6&4294967295|S>>>26),S=I+(v^(x|~N))+k[15]+4264355552&4294967295,I=x+(S<<10&4294967295|S>>>22),S=N+(x^(I|~v))+k[6]+2734768916&4294967295,N=I+(S<<15&4294967295|S>>>17),S=v+(I^(N|~x))+k[13]+1309151649&4294967295,v=N+(S<<21&4294967295|S>>>11),S=x+(N^(v|~I))+k[4]+4149444226&4294967295,x=v+(S<<6&4294967295|S>>>26),S=I+(v^(x|~N))+k[11]+3174756917&4294967295,I=x+(S<<10&4294967295|S>>>22),S=N+(x^(I|~v))+k[2]+718787259&4294967295,N=I+(S<<15&4294967295|S>>>17),S=v+(I^(N|~x))+k[9]+3951481745&4294967295,j.g[0]=j.g[0]+x&4294967295,j.g[1]=j.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,j.g[2]=j.g[2]+N&4294967295,j.g[3]=j.g[3]+I&4294967295}r.prototype.u=function(j,x){x===void 0&&(x=j.length);for(var v=x-this.blockSize,k=this.B,N=this.h,I=0;I<x;){if(N==0)for(;I<=v;)i(this,j,I),I+=this.blockSize;if(typeof j=="string"){for(;I<x;)if(k[N++]=j.charCodeAt(I++),N==this.blockSize){i(this,k),N=0;break}}else for(;I<x;)if(k[N++]=j[I++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=x},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var x=1;x<j.length-8;++x)j[x]=0;var v=8*this.o;for(x=j.length-8;x<j.length;++x)j[x]=v&255,v/=256;for(this.u(j),j=Array(16),x=v=0;4>x;++x)for(var k=0;32>k;k+=8)j[v++]=this.g[x]>>>k&255;return j};function o(j,x){var v=c;return Object.prototype.hasOwnProperty.call(v,j)?v[j]:v[j]=x(j)}function a(j,x){this.h=x;for(var v=[],k=!0,N=j.length-1;0<=N;N--){var I=j[N]|0;k&&I==x||(v[N]=I,k=!1)}this.g=v}var c={};function u(j){return-128<=j&&128>j?o(j,function(x){return new a([x|0],0>x?-1:0)}):new a([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return p;if(0>j)return R(d(-j));for(var x=[],v=1,k=0;j>=v;k++)x[k]=j/v|0,v*=4294967296;return new a(x,0)}function m(j,x){if(j.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j.charAt(0)=="-")return R(m(j.substring(1),x));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(x,8)),k=p,N=0;N<j.length;N+=8){var I=Math.min(8,j.length-N),S=parseInt(j.substring(N,N+I),x);8>I?(I=d(Math.pow(x,I)),k=k.j(I).add(d(S))):(k=k.j(v),k=k.add(d(S)))}return k}var p=u(0),g=u(1),y=u(16777216);t=a.prototype,t.m=function(){if(A(this))return-R(this).m();for(var j=0,x=1,v=0;v<this.g.length;v++){var k=this.i(v);j+=(0<=k?k:4294967296+k)*x,x*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(E(this))return"0";if(A(this))return"-"+R(this).toString(j);for(var x=d(Math.pow(j,6)),v=this,k="";;){var N=D(v,x).g;v=b(v,N.j(x));var I=((0<v.g.length?v.g[0]:v.h)>>>0).toString(j);if(v=N,E(v))return I+k;for(;6>I.length;)I="0"+I;k=I+k}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function E(j){if(j.h!=0)return!1;for(var x=0;x<j.g.length;x++)if(j.g[x]!=0)return!1;return!0}function A(j){return j.h==-1}t.l=function(j){return j=b(this,j),A(j)?-1:E(j)?0:1};function R(j){for(var x=j.g.length,v=[],k=0;k<x;k++)v[k]=~j.g[k];return new a(v,~j.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(j){for(var x=Math.max(this.g.length,j.g.length),v=[],k=0,N=0;N<=x;N++){var I=k+(this.i(N)&65535)+(j.i(N)&65535),S=(I>>>16)+(this.i(N)>>>16)+(j.i(N)>>>16);k=S>>>16,I&=65535,S&=65535,v[N]=S<<16|I}return new a(v,v[v.length-1]&-2147483648?-1:0)};function b(j,x){return j.add(R(x))}t.j=function(j){if(E(this)||E(j))return p;if(A(this))return A(j)?R(this).j(R(j)):R(R(this).j(j));if(A(j))return R(this.j(R(j)));if(0>this.l(y)&&0>j.l(y))return d(this.m()*j.m());for(var x=this.g.length+j.g.length,v=[],k=0;k<2*x;k++)v[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<j.g.length;N++){var I=this.i(k)>>>16,S=this.i(k)&65535,se=j.i(N)>>>16,xe=j.i(N)&65535;v[2*k+2*N]+=S*xe,w(v,2*k+2*N),v[2*k+2*N+1]+=I*xe,w(v,2*k+2*N+1),v[2*k+2*N+1]+=S*se,w(v,2*k+2*N+1),v[2*k+2*N+2]+=I*se,w(v,2*k+2*N+2)}for(k=0;k<x;k++)v[k]=v[2*k+1]<<16|v[2*k];for(k=x;k<2*x;k++)v[k]=0;return new a(v,0)};function w(j,x){for(;(j[x]&65535)!=j[x];)j[x+1]+=j[x]>>>16,j[x]&=65535,x++}function C(j,x){this.g=j,this.h=x}function D(j,x){if(E(x))throw Error("division by zero");if(E(j))return new C(p,p);if(A(j))return x=D(R(j),x),new C(R(x.g),R(x.h));if(A(x))return x=D(j,R(x)),new C(R(x.g),x.h);if(30<j.g.length){if(A(j)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var v=g,k=x;0>=k.l(j);)v=L(v),k=L(k);var N=O(v,1),I=O(k,1);for(k=O(k,2),v=O(v,2);!E(k);){var S=I.add(k);0>=S.l(j)&&(N=N.add(v),I=S),k=O(k,1),v=O(v,1)}return x=b(j,N.j(x)),new C(N,x)}for(N=p;0<=j.l(x);){for(v=Math.max(1,Math.floor(j.m()/x.m())),k=Math.ceil(Math.log(v)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),I=d(v),S=I.j(x);A(S)||0<S.l(j);)v-=k,I=d(v),S=I.j(x);E(I)&&(I=g),N=N.add(I),j=b(j,S)}return new C(N,j)}t.A=function(j){return D(this,j).h},t.and=function(j){for(var x=Math.max(this.g.length,j.g.length),v=[],k=0;k<x;k++)v[k]=this.i(k)&j.i(k);return new a(v,this.h&j.h)},t.or=function(j){for(var x=Math.max(this.g.length,j.g.length),v=[],k=0;k<x;k++)v[k]=this.i(k)|j.i(k);return new a(v,this.h|j.h)},t.xor=function(j){for(var x=Math.max(this.g.length,j.g.length),v=[],k=0;k<x;k++)v[k]=this.i(k)^j.i(k);return new a(v,this.h^j.h)};function L(j){for(var x=j.g.length+1,v=[],k=0;k<x;k++)v[k]=j.i(k)<<1|j.i(k-1)>>>31;return new a(v,j.h)}function O(j,x){var v=x>>5;x%=32;for(var k=j.g.length-v,N=[],I=0;I<k;I++)N[I]=0<x?j.i(I+v)>>>x|j.i(I+v+1)<<32-x:j.i(I+v);return new a(N,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,h1=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,Rn=a}).apply(typeof zx<"u"?zx:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var m1,p1,Ho,f1,fc,Im,g1,x1,y1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,f){return l==Array.prototype||l==Object.prototype||(l[h]=f.value),l};function s(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var h=0;h<l.length;++h){var f=l[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=s(this);function i(l,h){if(h)e:{var f=r;l=l.split(".");for(var _=0;_<l.length-1;_++){var M=l[_];if(!(M in f))break e;f=f[M]}l=l[l.length-1],_=f[l],h=h(_),h!=_&&h!=null&&e(f,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var f=0,_=!1,M={next:function(){if(!_&&f<l.length){var V=f++;return{value:h(V,l[V]),done:!1}}return _=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function m(l,h,f){return l.call.apply(l.bind,arguments)}function p(l,h,f){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,_),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,g.apply(null,arguments)}function y(l,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function E(l,h){function f(){}f.prototype=h.prototype,l.aa=h.prototype,l.prototype=new f,l.prototype.constructor=l,l.Qb=function(_,M,V){for(var W=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)W[Ee-2]=arguments[Ee];return h.prototype[M].apply(_,W)}}function A(l){const h=l.length;if(0<h){const f=Array(h);for(let _=0;_<h;_++)f[_]=l[_];return f}return[]}function R(l,h){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(u(_)){const M=l.length||0,V=_.length||0;l.length=M+V;for(let W=0;W<V;W++)l[M+W]=_[W]}else l.push(_)}}class b{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(l){return/^[\s\xa0]*$/.test(l)}function C(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function D(l){return D[" "](l),l}D[" "]=function(){};var L=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function O(l,h,f){for(const _ in l)h.call(f,l[_],_,l)}function j(l,h){for(const f in l)h.call(void 0,l[f],f,l)}function x(l){const h={};for(const f in l)h[f]=l[f];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,h){let f,_;for(let M=1;M<arguments.length;M++){_=arguments[M];for(f in _)l[f]=_[f];for(let V=0;V<v.length;V++)f=v[V],Object.prototype.hasOwnProperty.call(_,f)&&(l[f]=_[f])}}function N(l){var h=1;l=l.split(":");const f=[];for(;0<h&&l.length;)f.push(l.shift()),h--;return l.length&&f.push(l.join(":")),f}function I(l){c.setTimeout(()=>{throw l},0)}function S(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class se{constructor(){this.h=this.g=null}add(h,f){const _=xe.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var xe=new b(()=>new Ie,l=>l.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let H,F=!1,Y=new se,te=()=>{const l=c.Promise.resolve(void 0);H=()=>{l.then(ie)}};var ie=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(f){I(f)}var h=xe;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}F=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var He=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const f=()=>{};c.addEventListener("test",f,h),c.removeEventListener("test",f,h)}catch{}return l}();function Dt(l,h){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var f=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(L){e:{try{D(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else f=="mouseover"?h=l.fromElement:f=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ut[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Dt.aa.h.call(this)}}E(Dt,fe);var ut={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),Z=0;function me(l,h,f,_,M){this.listener=l,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=M,this.key=++Z,this.da=this.fa=!1}function q(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function he(l){this.src=l,this.g={},this.h=0}he.prototype.add=function(l,h,f,_,M){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var W=Ve(l,h,_,M);return-1<W?(h=l[W],f||(h.fa=!1)):(h=new me(h,this.src,V,!!_,M),h.fa=f,l.push(h)),h};function ne(l,h){var f=h.type;if(f in l.g){var _=l.g[f],M=Array.prototype.indexOf.call(_,h,void 0),V;(V=0<=M)&&Array.prototype.splice.call(_,M,1),V&&(q(h),l.g[f].length==0&&(delete l.g[f],l.h--))}}function Ve(l,h,f,_){for(var M=0;M<l.length;++M){var V=l[M];if(!V.da&&V.listener==h&&V.capture==!!f&&V.ha==_)return M}return-1}var De="closure_lm_"+(1e6*Math.random()|0),tt={};function Ws(l,h,f,_,M){if(Array.isArray(h)){for(var V=0;V<h.length;V++)Ws(l,h[V],f,_,M);return null}return f=Nr(f),l&&l[G]?l.K(h,f,d(_)?!!_.capture:!!_,M):hn(l,h,f,!1,_,M)}function hn(l,h,f,_,M,V){if(!h)throw Error("Invalid event type");var W=d(M)?!!M.capture:!!M,Ee=dt(l);if(Ee||(l[De]=Ee=new he(l)),f=Ee.add(h,f,_,W,V),f.proxy)return f;if(_=mn(),f.proxy=_,_.src=l,_.listener=f,l.addEventListener)He||(M=W),M===void 0&&(M=!1),l.addEventListener(h.toString(),_,M);else if(l.attachEvent)l.attachEvent(z(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function mn(){function l(f){return h.call(l.src,l.listener,f)}const h=ye;return l}function hi(l,h,f,_,M){if(Array.isArray(h))for(var V=0;V<h.length;V++)hi(l,h[V],f,_,M);else _=d(_)?!!_.capture:!!_,f=Nr(f),l&&l[G]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],f=Ve(V,f,_,M),-1<f&&(q(V[f]),Array.prototype.splice.call(V,f,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=dt(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ve(h,f,_,M)),(f=-1<l?h[l]:null)&&Qt(f))}function Qt(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[G])ne(h.i,l);else{var f=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(f,_,l.capture):h.detachEvent?h.detachEvent(z(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=dt(h))?(ne(f,l),f.h==0&&(f.src=null,h[De]=null)):q(l)}}}function z(l){return l in tt?tt[l]:tt[l]="on"+l}function ye(l,h){if(l.da)l=!0;else{h=new Dt(h,this);var f=l.listener,_=l.ha||l.src;l.fa&&Qt(l),l=f.call(_,h)}return l}function dt(l){return l=l[De],l instanceof he?l:null}var vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nr(l){return typeof l=="function"?l:(l[vt]||(l[vt]=function(h){return l.handleEvent(h)}),l[vt])}function bt(){de.call(this),this.i=new he(this),this.M=this,this.F=null}E(bt,de),bt.prototype[G]=!0,bt.prototype.removeEventListener=function(l,h,f,_){hi(this,l,h,f,_)};function Lt(l,h){var f,_=l.F;if(_)for(f=[];_;_=_.F)f.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new fe(h,l);else if(h instanceof fe)h.target=h.target||l;else{var M=h;h=new fe(_,l),k(h,M)}if(M=!0,f)for(var V=f.length-1;0<=V;V--){var W=h.g=f[V];M=pl(W,_,!0,h)&&M}if(W=h.g=l,M=pl(W,_,!0,h)&&M,M=pl(W,_,!1,h)&&M,f)for(V=0;V<f.length;V++)W=h.g=f[V],M=pl(W,_,!1,h)&&M}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var f=l.g[h],_=0;_<f.length;_++)q(f[_]);delete l.g[h],l.h--}}this.F=null},bt.prototype.K=function(l,h,f,_){return this.i.add(String(l),h,!1,f,_)},bt.prototype.L=function(l,h,f,_){return this.i.add(String(l),h,!0,f,_)};function pl(l,h,f,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,V=0;V<h.length;++V){var W=h[V];if(W&&!W.da&&W.capture==f){var Ee=W.listener,ht=W.ha||W.src;W.fa&&ne(l.i,W),M=Ee.call(ht,_)!==!1&&M}}return M&&!_.defaultPrevented}function Xf(l,h,f){if(typeof l=="function")f&&(l=g(l,f));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Zf(l){l.g=Xf(()=>{l.g=null,l.i&&(l.i=!1,Zf(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Fj extends de{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Zf(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xo(l){de.call(this),this.h=l,this.g={}}E(xo,de);var eg=[];function tg(l){O(l.g,function(h,f){this.g.hasOwnProperty(f)&&Qt(h)},l),l.g={}}xo.prototype.N=function(){xo.aa.N.call(this),tg(this)},xo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=c.JSON.stringify,qj=c.JSON.parse,Uj=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function ad(){}ad.prototype.h=null;function sg(l){return l.h||(l.h=l.i())}function rg(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ld(){fe.call(this,"d")}E(ld,fe);function cd(){fe.call(this,"c")}E(cd,fe);var pn={},ng=null;function fl(){return ng=ng||new bt}pn.La="serverreachability";function ig(l){fe.call(this,pn.La,l)}E(ig,fe);function vo(l){const h=fl();Lt(h,new ig(h))}pn.STAT_EVENT="statevent";function og(l,h){fe.call(this,pn.STAT_EVENT,l),this.stat=h}E(og,fe);function Mt(l){const h=fl();Lt(h,new og(h,l))}pn.Ma="timingevent";function ag(l,h){fe.call(this,pn.Ma,l),this.size=h}E(ag,fe);function bo(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function zj(l,h,f,_,M,V){l.info(function(){if(l.g)if(V)for(var W="",Ee=V.split("&"),ht=0;ht<Ee.length;ht++){var _e=Ee[ht].split("=");if(1<_e.length){var wt=_e[0];_e=_e[1];var _t=wt.split("_");W=2<=_t.length&&_t[1]=="type"?W+(wt+"="+_e+"&"):W+(wt+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+_+") [attempt "+M+"]: "+h+`
`+f+`
`+W})}function Bj(l,h,f,_,M,V,W){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+M+"]: "+h+`
`+f+`
`+V+" "+W})}function mi(l,h,f,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Gj(l,f)+(_?" "+_:"")})}function $j(l,h){l.info(function(){return"TIMEOUT: "+h})}wo.prototype.info=function(){};function Gj(l,h){if(!l.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(l=0;l<f.length;l++)if(Array.isArray(f[l])){var _=f[l];if(!(2>_.length)){var M=_[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return od(f)}catch{return h}}var gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ud;function xl(){}E(xl,ad),xl.prototype.g=function(){return new XMLHttpRequest},xl.prototype.i=function(){return{}},ud=new xl;function Er(l,h,f,_){this.j=l,this.i=h,this.l=f,this.R=_||1,this.U=new xo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cg}function cg(){this.i=null,this.g="",this.h=!1}var ug={},dd={};function hd(l,h,f){l.L=1,l.v=wl(Qs(h)),l.m=f,l.P=!0,dg(l,null)}function dg(l,h){l.F=Date.now(),yl(l),l.A=Qs(l.v);var f=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),Eg(f.i,"t",_),l.C=0,f=l.j.J,l.h=new cg,l.g=Bg(l.j,f?h:null,!l.m),0<l.O&&(l.M=new Fj(g(l.Y,l,l.g),l.O)),h=l.U,f=l.g,_=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(eg[0]=M.toString()),M=eg);for(var V=0;V<M.length;V++){var W=Ws(f,M[V],_||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),vo(),zj(l.i,l.u,l.A,l.l,l.R,l.m)}Er.prototype.ca=function(l){l=l.target;const h=this.M;h&&Ks(l)==3?h.j():this.Y(l)},Er.prototype.Y=function(l){try{if(l==this.g)e:{const _t=Ks(this.g);var h=this.g.Ba();const gi=this.g.Z();if(!(3>_t)&&(_t!=3||this.g&&(this.h.h||this.g.oa()||Pg(this.g)))){this.J||_t!=4||h==7||(h==8||0>=gi?vo(3):vo(2)),md(this);var f=this.g.Z();this.X=f;t:if(hg(this)){var _=Pg(this.g);l="";var M=_.length,V=Ks(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),_o(this);var W="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(V&&h==M-1)});_.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=f==200,Bj(this.i,this.u,this.A,this.l,this.R,_t,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,ht=this.g;if((Ee=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ee)){var _e=Ee;break t}}_e=null}if(f=_e)mi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pd(this,f);else{this.o=!1,this.s=3,Mt(12),fn(this),_o(this);break e}}if(this.P){f=!0;let ys;for(;!this.J&&this.C<W.length;)if(ys=Hj(this,W),ys==dd){_t==4&&(this.s=4,Mt(14),f=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ys==ug){this.s=4,Mt(15),mi(this.i,this.l,W,"[Invalid Chunk]"),f=!1;break}else mi(this.i,this.l,ys,null),pd(this,ys);if(hg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_t!=4||W.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)mi(this.i,this.l,W,"[Invalid Chunked Response]"),fn(this),_o(this);else if(0<W.length&&!this.W){this.W=!0;var wt=this.j;wt.g==this&&wt.ba&&!wt.M&&(wt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),bd(wt),wt.M=!0,Mt(11))}}else mi(this.i,this.l,W,null),pd(this,W);_t==4&&fn(this),this.o&&!this.J&&(_t==4?Fg(this.j,this):(this.o=!1,yl(this)))}else c2(this.g),f==400&&0<W.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),fn(this),_o(this)}}}catch{}finally{}};function hg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Hj(l,h){var f=l.C,_=h.indexOf(`
`,f);return _==-1?dd:(f=Number(h.substring(f,_)),isNaN(f)?ug:(_+=1,_+f>h.length?dd:(h=h.slice(_,_+f),l.C=_+f,h)))}Er.prototype.cancel=function(){this.J=!0,fn(this)};function yl(l){l.S=Date.now()+l.I,mg(l,l.I)}function mg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=bo(g(l.ba,l),h)}function md(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Er.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($j(this.i,this.A),this.L!=2&&(vo(),Mt(17)),fn(this),this.s=2,_o(this)):mg(this,this.S-l)};function _o(l){l.j.G==0||l.J||Fg(l.j,l)}function fn(l){md(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,tg(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function pd(l,h){try{var f=l.j;if(f.G!=0&&(f.g==l||fd(f.h,l))){if(!l.K&&fd(f.h,l)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var M=_;if(M[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<l.F)Sl(f),Nl(f);else break e;vd(f),Mt(18)}}else f.za=M[1],0<f.za-f.T&&37500>M[2]&&f.F&&f.v==0&&!f.C&&(f.C=bo(g(f.Za,f),6e3));if(1>=gg(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else xn(f,11)}else if((l.K||f.g==l)&&Sl(f),!w(h))for(M=f.Da.g.parse(h),h=0;h<M.length;h++){let _e=M[h];if(f.T=_e[0],_e=_e[1],f.G==2)if(_e[0]=="c"){f.K=_e[1],f.ia=_e[2];const wt=_e[3];wt!=null&&(f.la=wt,f.j.info("VER="+f.la));const _t=_e[4];_t!=null&&(f.Aa=_t,f.j.info("SVER="+f.Aa));const gi=_e[5];gi!=null&&typeof gi=="number"&&0<gi&&(_=1.5*gi,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const ys=l.g;if(ys){const kl=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var V=_.h;V.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(gd(V,V.h),V.h=null))}if(_.D){const wd=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&(_.ya=wd,Ae(_.I,_.D,wd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-l.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var W=l;if(_.qa=zg(_,_.J?_.ia:null,_.W),W.K){xg(_.h,W);var Ee=W,ht=_.L;ht&&(Ee.I=ht),Ee.B&&(md(Ee),yl(Ee)),_.g=W}else Vg(_);0<f.i.length&&El(f)}else _e[0]!="stop"&&_e[0]!="close"||xn(f,7);else f.G==3&&(_e[0]=="stop"||_e[0]=="close"?_e[0]=="stop"?xn(f,7):yd(f):_e[0]!="noop"&&f.l&&f.l.ta(_e),f.v=0)}}vo(4)}catch{}}var Wj=class{constructor(l,h){this.g=l,this.map=h}};function pg(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function gg(l){return l.h?1:l.g?l.g.size:0}function fd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function gd(l,h){l.g?l.g.add(h):l.h=h}function xg(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}pg.prototype.cancel=function(){if(this.i=yg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function yg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const f of l.g.values())h=h.concat(f.D);return h}return A(l.i)}function Qj(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],f=l.length,_=0;_<f;_++)h.push(l[_]);return h}h=[],f=0;for(_ in l)h[f++]=l[_];return h}function Kj(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var f=0;f<l;f++)h.push(f);return h}h=[],f=0;for(const _ in l)h[f++]=_;return h}}}function vg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var f=Kj(l),_=Qj(l),M=_.length,V=0;V<M;V++)h.call(void 0,_[V],f&&f[V],l)}var bg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Yj(l,h){if(l){l=l.split("&");for(var f=0;f<l.length;f++){var _=l[f].indexOf("="),M=null;if(0<=_){var V=l[f].substring(0,_);M=l[f].substring(_+1)}else V=l[f];h(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function gn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof gn){this.h=l.h,vl(this,l.j),this.o=l.o,this.g=l.g,bl(this,l.s),this.l=l.l;var h=l.i,f=new Eo;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),wg(this,f),this.m=l.m}else l&&(h=String(l).match(bg))?(this.h=!1,vl(this,h[1]||"",!0),this.o=jo(h[2]||""),this.g=jo(h[3]||"",!0),bl(this,h[4]),this.l=jo(h[5]||"",!0),wg(this,h[6]||"",!0),this.m=jo(h[7]||"")):(this.h=!1,this.i=new Eo(null,this.h))}gn.prototype.toString=function(){var l=[],h=this.j;h&&l.push(No(h,_g,!0),":");var f=this.g;return(f||h=="file")&&(l.push("//"),(h=this.o)&&l.push(No(h,_g,!0),"@"),l.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&l.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(No(f,f.charAt(0)=="/"?Zj:Xj,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",No(f,t2)),l.join("")};function Qs(l){return new gn(l)}function vl(l,h,f){l.j=f?jo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function bl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function wg(l,h,f){h instanceof Eo?(l.i=h,s2(l.i,l.h)):(f||(h=No(h,e2)),l.i=new Eo(h,l.h))}function Ae(l,h,f){l.i.set(h,f)}function wl(l){return Ae(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function jo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function No(l,h,f){return typeof l=="string"?(l=encodeURI(l).replace(h,Jj),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Jj(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var _g=/[#\/\?@]/g,Xj=/[#\?:]/g,Zj=/[#\?]/g,e2=/[#\?@]/g,t2=/#/g;function Eo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Sr(l){l.g||(l.g=new Map,l.h=0,l.i&&Yj(l.i,function(h,f){l.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Eo.prototype,t.add=function(l,h){Sr(this),this.i=null,l=pi(this,l);var f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(h),this.h+=1,this};function jg(l,h){Sr(l),h=pi(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Ng(l,h){return Sr(l),h=pi(l,h),l.g.has(h)}t.forEach=function(l,h){Sr(this),this.g.forEach(function(f,_){f.forEach(function(M){l.call(h,M,_,this)},this)},this)},t.na=function(){Sr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){const M=l[_];for(let V=0;V<M.length;V++)f.push(h[_])}return f},t.V=function(l){Sr(this);let h=[];if(typeof l=="string")Ng(this,l)&&(h=h.concat(this.g.get(pi(this,l))));else{l=Array.from(this.g.values());for(let f=0;f<l.length;f++)h=h.concat(l[f])}return h},t.set=function(l,h){return Sr(this),this.i=null,l=pi(this,l),Ng(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Eg(l,h,f){jg(l,h),0<f.length&&(l.i=null,l.g.set(pi(l,h),A(f)),l.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];const V=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var M=V;W[_]!==""&&(M+="="+encodeURIComponent(String(W[_]))),l.push(M)}}return this.i=l.join("&")};function pi(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function s2(l,h){h&&!l.j&&(Sr(l),l.i=null,l.g.forEach(function(f,_){var M=_.toLowerCase();_!=M&&(jg(this,_),Eg(this,M,f))},l)),l.j=h}function r2(l,h){const f=new wo;if(c.Image){const _=new Image;_.onload=y(Tr,f,"TestLoadImage: loaded",!0,h,_),_.onerror=y(Tr,f,"TestLoadImage: error",!1,h,_),_.onabort=y(Tr,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=y(Tr,f,"TestLoadImage: timeout",!1,h,_),c.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function n2(l,h){const f=new wo,_=new AbortController,M=setTimeout(()=>{_.abort(),Tr(f,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(V=>{clearTimeout(M),V.ok?Tr(f,"TestPingServer: ok",!0,h):Tr(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Tr(f,"TestPingServer: error",!1,h)})}function Tr(l,h,f,_,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),_(f)}catch{}}function i2(){this.g=new Uj}function o2(l,h,f){const _=f||"";try{vg(l,function(M,V){let W=M;d(M)&&(W=od(M)),h.push(_+V+"="+encodeURIComponent(W))})}catch(M){throw h.push(_+"type="+encodeURIComponent("_badmap")),M}}function So(l){this.l=l.Ub||null,this.j=l.eb||!1}E(So,ad),So.prototype.g=function(){return new _l(this.l,this.j)},So.prototype.i=function(l){return function(){return l}}({});function _l(l,h){bt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(_l,bt),t=_l.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ko(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,To(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ko(this)),this.g&&(this.readyState=3,ko(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?To(this):ko(this),this.readyState==3&&Sg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,To(this))},t.Qa=function(l){this.g&&(this.response=l,To(this))},t.ga=function(){this.g&&To(this)};function To(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ko(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=h.next();return l.join(`\r
`)};function ko(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Tg(l){let h="";return O(l,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function xd(l,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Tg(f),typeof l=="string"?f!=null&&encodeURIComponent(String(f)):Ae(l,h,f))}function Be(l){bt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Be,bt);var a2=/^https?$/i,l2=["POST","PUT"];t=Be.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ud.g(),this.v=this.o?sg(this.o):sg(ud),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){kg(this,V);return}if(l=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var M in _)f.set(M,_[M]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const V of _.keys())f.set(V,_.get(V));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(V=>V.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(l2,h,void 0))||_||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of f)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cg(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){kg(this,V)}};function kg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Ig(l),jl(l)}function Ig(l){l.A||(l.A=!0,Lt(l,"complete"),Lt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Lt(this,"complete"),Lt(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ag(this):this.bb())},t.bb=function(){Ag(this)};function Ag(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Ks(l)!=4||l.Z()!=2)){if(l.u&&Ks(l)==4)Xf(l.Ea,0,l);else if(Lt(l,"readystatechange"),Ks(l)==4){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=W===0){var M=String(l.D).match(bg)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),_=!a2.test(M?M.toLowerCase():"")}f=_}if(f)Lt(l,"complete"),Lt(l,"success");else{l.m=6;try{var V=2<Ks(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Ig(l)}}finally{jl(l)}}}}function jl(l,h){if(l.g){Cg(l);const f=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Lt(l,"ready");try{f.onreadystatechange=_}catch{}}}function Cg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Ks(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Ks(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),qj(h)}};function Pg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function c2(l){const h={};l=(l.g&&2<=Ks(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(w(l[_]))continue;var f=N(l[_]);const M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const V=h[M]||[];h[M]=V,V.push(f)}j(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Io(l,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||h}function Rg(l){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Io("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Io("baseRetryDelayMs",5e3,l),this.cb=Io("retryDelaySeedMs",1e4,l),this.Wa=Io("forwardChannelMaxRetries",2,l),this.wa=Io("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new pg(l&&l.concurrentRequestLimit),this.Da=new i2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rg.prototype,t.la=8,t.G=1,t.connect=function(l,h,f,_){Mt(0),this.W=l,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=zg(this,null,this.W),El(this)};function yd(l){if(Dg(l),l.G==3){var h=l.U++,f=Qs(l.I);if(Ae(f,"SID",l.K),Ae(f,"RID",h),Ae(f,"TYPE","terminate"),Ao(l,f),h=new Er(l,l.j,h),h.L=2,h.v=wl(Qs(f)),f=!1,c.navigator&&c.navigator.sendBeacon)try{f=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&c.Image&&(new Image().src=h.v,f=!0),f||(h.g=Bg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),yl(h)}Ug(l)}function Nl(l){l.g&&(bd(l),l.g.cancel(),l.g=null)}function Dg(l){Nl(l),l.u&&(c.clearTimeout(l.u),l.u=null),Sl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function El(l){if(!fg(l.h)&&!l.s){l.s=!0;var h=l.Ga;H||te(),F||(H(),F=!0),Y.add(h,l),l.B=0}}function u2(l,h){return gg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=bo(g(l.Ga,l,h),qg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Er(this,this.j,l);let V=this.o;if(this.S&&(V?(V=x(V),k(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Mg(this,M,h),f=Qs(this.I),Ae(f,"RID",l),Ae(f,"CVER",22),this.D&&Ae(f,"X-HTTP-Session-Id",this.D),Ao(this,f),V&&(this.O?h="headers="+encodeURIComponent(String(Tg(V)))+"&"+h:this.m&&xd(f,this.m,V)),gd(this.h,M),this.Ua&&Ae(f,"TYPE","init"),this.P?(Ae(f,"$req",h),Ae(f,"SID","null"),M.T=!0,hd(M,f,null)):hd(M,f,h),this.G=2}}else this.G==3&&(l?Lg(this,l):this.i.length==0||fg(this.h)||Lg(this))};function Lg(l,h){var f;h?f=h.l:f=l.U++;const _=Qs(l.I);Ae(_,"SID",l.K),Ae(_,"RID",f),Ae(_,"AID",l.T),Ao(l,_),l.m&&l.o&&xd(_,l.m,l.o),f=new Er(l,l.j,f,l.B+1),l.m===null&&(f.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Mg(l,f,1e3),f.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),gd(l.h,f),hd(f,_,h)}function Ao(l,h){l.H&&O(l.H,function(f,_){Ae(h,_,f)}),l.l&&vg({},function(f,_){Ae(h,_,f)})}function Mg(l,h,f){f=Math.min(l.i.length,f);var _=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let V=-1;for(;;){const W=["count="+f];V==-1?0<f?(V=M[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let Ee=!0;for(let ht=0;ht<f;ht++){let _e=M[ht].g;const wt=M[ht].map;if(_e-=V,0>_e)V=Math.max(0,M[ht].g-100),Ee=!1;else try{o2(wt,W,"req"+_e+"_")}catch{_&&_(wt)}}if(Ee){_=W.join("&");break e}}}return l=l.i.splice(0,f),h.D=l,_}function Vg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;H||te(),F||(H(),F=!0),Y.add(h,l),l.v=0}}function vd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=bo(g(l.Fa,l),qg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Og(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=bo(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),Nl(this),Og(this))};function bd(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Og(l){l.g=new Er(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Qs(l.qa);Ae(h,"RID","rpc"),Ae(h,"SID",l.K),Ae(h,"AID",l.T),Ae(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ae(h,"TO",l.ja),Ae(h,"TYPE","xmlhttp"),Ao(l,h),l.m&&l.o&&xd(h,l.m,l.o),l.L&&(l.g.I=l.L);var f=l.g;l=l.ia,f.L=1,f.v=wl(Qs(h)),f.m=null,f.P=!0,dg(f,l)}t.Za=function(){this.C!=null&&(this.C=null,Nl(this),vd(this),Mt(19))};function Sl(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Fg(l,h){var f=null;if(l.g==h){Sl(l),bd(l),l.g=null;var _=2}else if(fd(l.h,h))f=h.D,xg(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;_=fl(),Lt(_,new ag(_,f)),El(l)}else Vg(l);else if(M=h.s,M==3||M==0&&0<h.X||!(_==1&&u2(l,h)||_==2&&vd(l)))switch(f&&0<f.length&&(h=l.h,h.i=h.i.concat(f)),M){case 1:xn(l,5);break;case 4:xn(l,10);break;case 3:xn(l,6);break;default:xn(l,2)}}}function qg(l,h){let f=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(f*=2),f*h}function xn(l,h){if(l.j.info("Error code "+h),h==2){var f=g(l.fb,l),_=l.Xa;const M=!_;_=new gn(_||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||vl(_,"https"),wl(_),M?r2(_.toString(),f):n2(_.toString(),f)}else Mt(2);l.G=0,l.l&&l.l.sa(h),Ug(l),Dg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Ug(l){if(l.G=0,l.ka=[],l.l){const h=yg(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function zg(l,h,f){var _=f instanceof gn?Qs(f):new gn(f);if(_.g!="")h&&(_.g=h+"."+_.g),bl(_,_.s);else{var M=c.location;_=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var V=new gn(null);_&&vl(V,_),h&&(V.g=h),M&&bl(V,M),f&&(V.l=f),_=V}return f=l.D,h=l.ya,f&&h&&Ae(_,f,h),Ae(_,"VER",l.la),Ao(l,_),_}function Bg(l,h,f){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Be(new So({eb:f})):new Be(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $g(){}t=$g.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(l,h){return new Kt(l,h)};function Kt(l,h){bt.call(this),this.g=new Rg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!w(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new fi(this)}E(Kt,bt),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){yd(this.g)},Kt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.u&&(f={},f.__data__=od(l),l=f);h.i.push(new Wj(h.Ya++,l)),h.G==3&&El(h)},Kt.prototype.N=function(){this.g.l=null,delete this.j,yd(this.g),delete this.g,Kt.aa.N.call(this)};function Gg(l){ld.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const f in h){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}E(Gg,ld);function Hg(){cd.call(this),this.status=1}E(Hg,cd);function fi(l){this.g=l}E(fi,$g),fi.prototype.ua=function(){Lt(this.g,"a")},fi.prototype.ta=function(l){Lt(this.g,new Gg(l))},fi.prototype.sa=function(l){Lt(this.g,new Hg)},fi.prototype.ra=function(){Lt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,y1=function(){return new Tl},x1=function(){return fl()},g1=pn,Im={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,fc=gl,lg.COMPLETE="complete",f1=lg,rg.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Ho=rg,p1=So,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,m1=Be}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const Bx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let St=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};St.UNAUTHENTICATED=new St(null),St.GOOGLE_CREDENTIALS=new St("google-credentials-uid"),St.FIRST_PARTY=new St("first-party-uid"),St.MOCK_USER=new St("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Ru("@firebase/firestore");function Fo(){return Hn.logLevel}function ee(t,...e){if(Hn.logLevel<=ve.DEBUG){const s=e.map(lf);Hn.debug(`Firestore (${mo}): ${t}`,...s)}}function xr(t,...e){if(Hn.logLevel<=ve.ERROR){const s=e.map(lf);Hn.error(`Firestore (${mo}): ${t}`,...s)}}function Wn(t,...e){if(Hn.logLevel<=ve.WARN){const s=e.map(lf);Hn.warn(`Firestore (${mo}): ${t}`,...s)}}function lf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t="Unexpected state"){const e=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: `+t;throw xr(e),new Error(e)}function Te(t,e){t||ae()}function ue(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Ps{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(St.UNAUTHENTICATED))}shutdown(){}}class OA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class FA{constructor(e){this.t=e,this.currentUser=St.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){let r=this.i;const i=u=>this.i!==r?(r=this.i,s(u)):Promise.resolve();let o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),a()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string"),new v1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string"),new St(e)}}class qA{constructor(e,s,r){this.l=e,this.h=s,this.P=r,this.type="FirstParty",this.user=St.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UA{constructor(e,s,r){this.l=e,this.h=s,this.P=r}getToken(){return Promise.resolve(new qA(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(St.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){const r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(Te(typeof s.token=="string"),this.R=s.token,new zA(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=$A(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<s&&(r+=e.charAt(i[o]%e.length))}return r}}function je(t,e){return t<e?-1:t>e?1:0}function eo(t,e,s){return t.length===e.length&&t.every((r,i)=>s(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new J(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*s));return new et(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new et(0,0))}static max(){return new ce(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,s,r){s===void 0?s=0:s>e.length&&ae(),r===void 0?r=e.length-s:r>e.length-s&&ae(),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Da.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Da?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let i=0;i<r;i++){const o=e.get(i),a=s.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Pe extends Da{construct(e,s,r){return new Pe(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(i=>i.length>0))}return new Pe(s)}static emptyPath(){return new Pe([])}}const GA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class at extends Da{construct(e,s,r){return new at(e,s,r)}static isValidIdentifier(e){return GA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new at(["__name__"])}static fromServerFormat(e){const s=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let a=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new J(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new J(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new at(s)}static emptyPath(){return new at([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Pe.fromString(e))}static fromName(e){return new re(Pe.fromString(e).popFirst(5))}static empty(){return new re(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Pe.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Pe(e.slice()))}}function HA(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new et(s+1,0):new et(s,r));return new sn(i,re.empty(),e)}function WA(t){return new sn(t.readTime,t.key,-1)}class sn{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new sn(ce.min(),re.empty(),-1)}static max(){return new sn(ce.max(),re.empty(),-1)}}function QA(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=re.comparator(t.documentKey,e.documentKey),s!==0?s:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==KA)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(s,o).next(r,i)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof B?s:B.resolve(s)}catch(s){return B.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):B.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):B.reject(s)}static resolve(e){return new B((s,r)=>{s(e)})}static reject(e){return new B((s,r)=>{r(e)})}static waitFor(e){return new B((s,r)=>{let i=0,o=0,a=!1;e.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&s()},u=>r(u))}),a=!0,o===i&&s()})}static or(e){let s=B.resolve(!1);for(const r of e)s=s.next(i=>i?B.resolve(i):r());return s}static forEach(e,s){const r=[];return e.forEach((i,o)=>{r.push(s.call(this,i,o))}),this.waitFor(r)}static mapArray(e,s){return new B((r,i)=>{const o=e.length,a=new Array(o);let c=0;for(let u=0;u<o;u++){const d=u;s(e[d]).next(m=>{a[d]=m,++c,c===o&&r(a)},m=>i(m))}})}static doWhile(e,s){return new B((r,i)=>{const o=()=>{e()===!0?s().next(()=>{o()},i):r()};o()})}}function JA(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this.ie(r),this.se=r=>s.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}uf.oe=-1;function Vu(t){return t==null}function su(t){return t===0&&1/t==-1/0}function XA(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function ci(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function w1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,s){this.comparator=e,this.root=s||pt.EMPTY}insert(e,s){return new ze(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,r)=>(e(s,r),!1))}toString(){const e=[];return this.inorderTraversal((s,r)=>(e.push(`${s}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,s,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=s?r(e.key,s):1,s&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,s,r,i,o){this.key=e,this.value=s,this.color=r??pt.RED,this.left=i??pt.EMPTY,this.right=o??pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,i,o){return new pt(e??this.key,s??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,s,r),null):o===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return pt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();const e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1;pt.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,s,r,i,o){return this}insert(e,s,r){return new pt(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,r)=>(e(s),!1))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Gx(this.data.getIterator())}getIteratorFrom(e){return new Gx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(r=>{s=s.add(r)}),s}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new xt(this.comparator);return s.data=e,s}}class Gx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.fields=e,e.sort(at.comparator)}static empty(){return new es([])}unionWith(e){let s=new xt(at.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new es(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _1("Invalid base64 string: "+o):o}}(e);return new ct(s)}static fromUint8Array(e){const s=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new ct(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let i=0;i<s.length;i++)r[i]=s.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const ZA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rn(t){if(Te(!!t),typeof t=="string"){let e=0;const s=ZA.exec(t);if(Te(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qn(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function hf(t){const e=t.mapValue.fields.__previous_value__;return df(e)?hf(e):e}function La(t){const e=rn(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,s,r,i,o,a,c,u,d){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class to{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new to("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?df(t)?4:sC(t)?9007199254740991:tC(t)?10:11:ae()}function Gs(t,e){if(t===e)return!0;const s=Kn(t);if(s!==Kn(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return La(t).isEqual(La(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=rn(i.timestampValue),c=rn(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Qn(i.bytesValue).isEqual(Qn(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return We(i.geoPointValue.latitude)===We(o.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return We(i.integerValue)===We(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=We(i.doubleValue),c=We(o.doubleValue);return a===c?su(a)===su(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return eo(t.arrayValue.values||[],e.arrayValue.values||[],Gs);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},c=o.mapValue.fields||{};if($x(a)!==$x(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Gs(a[u],c[u])))return!1;return!0}(t,e);default:return ae()}}function Ma(t,e){return(t.values||[]).find(s=>Gs(s,e))!==void 0}function so(t,e){if(t===e)return 0;const s=Kn(t),r=Kn(e);if(s!==r)return je(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(o,a){const c=We(o.integerValue||o.doubleValue),u=We(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return Hx(t.timestampValue,e.timestampValue);case 4:return Hx(La(t),La(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(o,a){const c=Qn(o),u=Qn(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const c=o.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const m=je(c[d],u[d]);if(m!==0)return m}return je(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const c=je(We(o.latitude),We(a.latitude));return c!==0?c:je(We(o.longitude),We(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Wx(t.arrayValue,e.arrayValue);case 10:return function(o,a){var c,u,d,m;const p=o.fields||{},g=a.fields||{},y=(c=p.value)===null||c===void 0?void 0:c.arrayValue,E=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=je(((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0,((m=E==null?void 0:E.values)===null||m===void 0?void 0:m.length)||0);return A!==0?A:Wx(y,E)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Kl.mapValue&&a===Kl.mapValue)return 0;if(o===Kl.mapValue)return 1;if(a===Kl.mapValue)return-1;const c=o.fields||{},u=Object.keys(c),d=a.fields||{},m=Object.keys(d);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const g=je(u[p],m[p]);if(g!==0)return g;const y=so(c[u[p]],d[m[p]]);if(y!==0)return y}return je(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ae()}}function Hx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const s=rn(t),r=rn(e),i=je(s.seconds,r.seconds);return i!==0?i:je(s.nanos,r.nanos)}function Wx(t,e){const s=t.values||[],r=e.values||[];for(let i=0;i<s.length&&i<r.length;++i){const o=so(s[i],r[i]);if(o)return o}return je(s.length,r.length)}function ro(t){return Am(t)}function Am(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=rn(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Qn(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return re.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=Am(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Am(s.fields[a])}`;return i+"}"}(t.mapValue):ae()}function Qx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cm(t){return!!t&&"integerValue"in t}function mf(t){return!!t&&"arrayValue"in t}function Kx(t){return!!t&&"nullValue"in t}function Yx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function tC(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function ia(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ci(t.mapValue.fields,(s,r)=>e.mapValue.fields[s]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=ia(t.arrayValue.values[s]);return e}return Object.assign({},t)}function sC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!gc(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(s)}setAll(e){let s=at.emptyPath(),r={},i=[];e.forEach((a,c)=>{if(!s.isImmediateParentOf(c)){const u=this.getFieldsMap(s);this.applyChanges(u,r,i),r={},i=[],s=c.popLast()}a?r[c.lastSegment()]=ia(a):i.push(c.lastSegment())});const o=this.getFieldsMap(s);this.applyChanges(o,r,i)}delete(e){const s=this.field(e.popLast());gc(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Gs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=s.mapValue.fields[e.get(r)];gc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,r){ci(s,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new zt(ia(this.value))}}function j1(t){const e=[];return ci(t.fields,(s,r)=>{const i=new at([s]);if(gc(r)){const o=j1(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,s,r,i,o,a,c){this.key=e,this.documentType=s,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new It(e,0,ce.min(),ce.min(),ce.min(),zt.empty(),0)}static newFoundDocument(e,s,r,i){return new It(e,1,s,ce.min(),r,i,0)}static newNoDocument(e,s){return new It(e,2,s,ce.min(),ce.min(),zt.empty(),0)}static newUnknownDocument(e,s){return new It(e,3,s,ce.min(),ce.min(),zt.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof It&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new It(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,s){this.position=e,this.inclusive=s}}function Jx(t,e,s){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(a.referenceValue),s.key):r=so(a,s.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Gs(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,s="asc"){this.field=e,this.dir=s}}function rC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N1=class{};class Ze extends N1{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new iC(e,s,r):s==="array-contains"?new lC(e,r):s==="in"?new cC(e,r):s==="not-in"?new uC(e,r):s==="array-contains-any"?new dC(e,r):new Ze(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new oC(e,r):new aC(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(so(s,this.value)):s!==null&&Kn(this.value)===Kn(s)&&this.matchesComparison(so(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cs extends N1{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new Cs(e,s)}matches(e){return E1(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function E1(t){return t.op==="and"}function S1(t){return nC(t)&&E1(t)}function nC(t){for(const e of t.filters)if(e instanceof Cs)return!1;return!0}function Pm(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+ro(t.value);if(S1(t))return t.filters.map(e=>Pm(e)).join(",");{const e=t.filters.map(s=>Pm(s)).join(",");return`${t.op}(${e})`}}function T1(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Gs(r.value,i.value)}(t,e):t instanceof Cs?function(r,i){return i instanceof Cs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,c)=>o&&T1(a,i.filters[c]),!0):!1}(t,e):void ae()}function k1(t){return t instanceof Ze?function(s){return`${s.field.canonicalString()} ${s.op} ${ro(s.value)}`}(t):t instanceof Cs?function(s){return s.op.toString()+" {"+s.getFilters().map(k1).join(" ,")+"}"}(t):"Filter"}class iC extends Ze{constructor(e,s,r){super(e,s,r),this.key=re.fromName(r.referenceValue)}matches(e){const s=re.comparator(e.key,this.key);return this.matchesComparison(s)}}class oC extends Ze{constructor(e,s){super(e,"in",s),this.keys=I1("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class aC extends Ze{constructor(e,s){super(e,"not-in",s),this.keys=I1("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function I1(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>re.fromName(r.referenceValue))}class lC extends Ze{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return mf(s)&&Ma(s.arrayValue,this.value)}}class cC extends Ze{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Ma(this.value.arrayValue,s)}}class uC extends Ze{constructor(e,s){super(e,"not-in",s)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!Ma(this.value.arrayValue,s)}}class dC extends Ze{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!mf(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>Ma(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e,s=null,r=[],i=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}}function Zx(t,e=null,s=[],r=[],i=null,o=null,a=null){return new hC(t,e,s,r,i,o,a)}function pf(t){const e=ue(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(r=>Pm(r)).join(","),s+="|ob:",s+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Vu(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>ro(r)).join(",")),e.ue=s}return e.ue}function ff(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!rC(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!T1(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xx(t.startAt,e.startAt)&&Xx(t.endAt,e.endAt)}function Rm(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,s=null,r=[],i=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mC(t,e,s,r,i,o,a,c){return new po(t,e,s,r,i,o,a,c)}function gf(t){return new po(t)}function ey(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function A1(t){return t.collectionGroup!==null}function oa(t){const e=ue(t);if(e.ce===null){e.ce=[];const s=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),s.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new xt(at.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(o=>{s.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Va(o,r))}),s.has(at.keyField().canonicalString())||e.ce.push(new Va(at.keyField(),r))}return e.ce}function zs(t){const e=ue(t);return e.le||(e.le=pC(e,oa(t))),e.le}function pC(t,e){if(t.limitType==="F")return Zx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Va(i.field,o)});const s=t.endAt?new ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ru(t.startAt.position,t.startAt.inclusive):null;return Zx(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function Dm(t,e){const s=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function nu(t,e,s){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Ou(t,e){return ff(zs(t),zs(e))&&t.limitType===e.limitType}function C1(t){return`${pf(zs(t))}|lt:${t.limitType}`}function vi(t){return`Query(target=${function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(i=>k1(i)).join(", ")}]`),Vu(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map(i=>ro(i)).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map(i=>ro(i)).join(",")),`Target(${r})`}(zs(t))}; limitType=${t.limitType})`}function Fu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of oa(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,c,u){const d=Jx(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,oa(r),i)||r.endAt&&!function(a,c,u){const d=Jx(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,oa(r),i))}(t,e)}function fC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function P1(t){return(e,s)=>{let r=!1;for(const i of oa(t)){const o=gC(i,e,s);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function gC(t,e,s){const r=t.field.isKeyField()?re.comparator(e.key,s.key):function(o,a,c){const u=a.data.field(o),d=c.data.field(o);return u!==null&&d!==null?so(u,d):ae()}(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(s,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return w1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new ze(re.comparator);function yr(){return xC}const R1=new ze(re.comparator);function Wo(...t){let e=R1;for(const s of t)e=e.insert(s.key,s);return e}function D1(t){let e=R1;return t.forEach((s,r)=>e=e.insert(s,r.overlayedDocument)),e}function kn(){return aa()}function L1(){return aa()}function aa(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const yC=new ze(re.comparator),vC=new xt(re.comparator);function ge(...t){let e=vC;for(const s of t)e=e.add(s);return e}const bC=new xt(je);function wC(){return bC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function M1(t){return{integerValue:""+t}}function _C(t,e){return XA(e)?M1(e):xf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(){this._=void 0}}function jC(t,e,s){return t instanceof Oa?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&df(o)&&(o=hf(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(s,e):t instanceof Fa?O1(t,e):t instanceof qa?F1(t,e):function(i,o){const a=V1(i,o),c=ty(a)+ty(i.Pe);return Cm(a)&&Cm(i.Pe)?M1(c):xf(i.serializer,c)}(t,e)}function NC(t,e,s){return t instanceof Fa?O1(t,e):t instanceof qa?F1(t,e):s}function V1(t,e){return t instanceof iu?function(r){return Cm(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Oa extends qu{}class Fa extends qu{constructor(e){super(),this.elements=e}}function O1(t,e){const s=q1(e);for(const r of t.elements)s.some(i=>Gs(i,r))||s.push(r);return{arrayValue:{values:s}}}class qa extends qu{constructor(e){super(),this.elements=e}}function F1(t,e){let s=q1(e);for(const r of t.elements)s=s.filter(i=>!Gs(i,r));return{arrayValue:{values:s}}}class iu extends qu{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function ty(t){return We(t.integerValue||t.doubleValue)}function q1(t){return mf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,s){this.field=e,this.transform=s}}function SC(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fa&&i instanceof Fa||r instanceof qa&&i instanceof qa?eo(r.elements,i.elements,Gs):r instanceof iu&&i instanceof iu?Gs(r.Pe,i.Pe):r instanceof Oa&&i instanceof Oa}(t.transform,e.transform)}class TC{constructor(e,s){this.version=e,this.transformResults=s}}class ms{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new ms}static exists(e){return new ms(void 0,e)}static updateTime(e){return new ms(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Uu{}function U1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yf(t.key,ms.none()):new nl(t.key,t.data,ms.none());{const s=t.data,r=zt.empty();let i=new xt(at.comparator);for(let o of e.fields)if(!i.has(o)){let a=s.field(o);a===null&&o.length>1&&(o=o.popLast(),a=s.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new un(t.key,r,new es(i.toArray()),ms.none())}}function kC(t,e,s){t instanceof nl?function(i,o,a){const c=i.value.clone(),u=ry(i.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,s):t instanceof un?function(i,o,a){if(!xc(i.precondition,o))return void o.convertToUnknownDocument(a.version);const c=ry(i.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(z1(i)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,s):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,s)}function la(t,e,s,r){return t instanceof nl?function(o,a,c,u){if(!xc(o.precondition,a))return c;const d=o.value.clone(),m=ny(o.fieldTransforms,u,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,s,r):t instanceof un?function(o,a,c,u){if(!xc(o.precondition,a))return c;const d=ny(o.fieldTransforms,u,a),m=a.data;return m.setAll(z1(o)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,s,r):function(o,a,c){return xc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,s)}function IC(t,e){let s=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=V1(r.transform,i||null);o!=null&&(s===null&&(s=zt.empty()),s.set(r.field,o))}return s||null}function sy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&eo(r,i,(o,a)=>SC(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Uu{constructor(e,s,r,i=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class un extends Uu{constructor(e,s,r,i,o=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function z1(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}}),e}function ry(t,e,s){const r=new Map;Te(t.length===s.length);for(let i=0;i<s.length;i++){const o=t[i],a=o.transform,c=e.data.field(o.field);r.set(o.field,NC(a,c,s[i]))}return r}function ny(t,e,s){const r=new Map;for(const i of t){const o=i.transform,a=s.data.field(i.field);r.set(i.field,jC(o,a,e))}return r}class yf extends Uu{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class AC extends Uu{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,s,r,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&kC(o,e,r[i])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=la(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=la(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=L1();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let c=this.applyToLocalView(a,o.mutatedFields);c=s.has(i.key)?null:c;const u=U1(a,c);u!==null&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),ge())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(s,r)=>sy(s,r))&&eo(this.baseMutations,e.baseMutations,(s,r)=>sy(s,r))}}class vf{constructor(e,s,r,i){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(e,s,r){Te(e.mutations.length===r.length);let i=function(){return yC}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new vf(e,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,be;function DC(t){switch(t){default:return ae();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function B1(t){if(t===void 0)return xr("GRPC error has no .code"),U.UNKNOWN;switch(t){case Je.OK:return U.OK;case Je.CANCELLED:return U.CANCELLED;case Je.UNKNOWN:return U.UNKNOWN;case Je.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Je.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Je.INTERNAL:return U.INTERNAL;case Je.UNAVAILABLE:return U.UNAVAILABLE;case Je.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Je.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Je.NOT_FOUND:return U.NOT_FOUND;case Je.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Je.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Je.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Je.ABORTED:return U.ABORTED;case Je.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Je.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Je.DATA_LOSS:return U.DATA_LOSS;default:return ae()}}(be=Je||(Je={}))[be.OK=0]="OK",be[be.CANCELLED=1]="CANCELLED",be[be.UNKNOWN=2]="UNKNOWN",be[be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",be[be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",be[be.NOT_FOUND=5]="NOT_FOUND",be[be.ALREADY_EXISTS=6]="ALREADY_EXISTS",be[be.PERMISSION_DENIED=7]="PERMISSION_DENIED",be[be.UNAUTHENTICATED=16]="UNAUTHENTICATED",be[be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",be[be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",be[be.ABORTED=10]="ABORTED",be[be.OUT_OF_RANGE=11]="OUT_OF_RANGE",be[be.UNIMPLEMENTED=12]="UNIMPLEMENTED",be[be.INTERNAL=13]="INTERNAL",be[be.UNAVAILABLE=14]="UNAVAILABLE",be[be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Rn([4294967295,4294967295],0);function iy(t){const e=LC().encode(t),s=new h1;return s.update(e),new Uint8Array(s.digest())}function oy(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Rn([s,r],0),new Rn([i,o],0)]}class bf{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new Qo(`Invalid padding: ${s}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Rn.fromNumber(this.Ie)}Ee(e,s,r){let i=e.add(s.multiply(Rn.fromNumber(r)));return i.compare(MC)===1&&(i=new Rn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=iy(e),[r,i]=oy(s);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,s,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new bf(o,i,s);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const s=iy(e),[r,i]=oy(s);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,s,r,i,o){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const i=new Map;return i.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new zu(ce.min(),i,new ze(je),yr(),ge())}}class il{constructor(e,s,r,i,o){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new il(r,s,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,s,r,i){this.Re=e,this.removedTargetIds=s,this.key=r,this.Ve=i}}class $1{constructor(e,s){this.targetId=e,this.me=s}}class G1{constructor(e,s,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=i}}class ay{constructor(){this.fe=0,this.ge=cy(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),s=ge(),r=ge();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:ae()}}),new il(this.pe,this.ye,e,s,r)}Ce(){this.we=!1,this.ge=cy()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Te(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VC{constructor(e){this.Le=e,this.Be=new Map,this.ke=yr(),this.qe=ly(),this.Qe=new ze(je)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const r=this.Ge(s);switch(e.state){case 0:this.ze(s)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),r.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((r,i)=>{this.ze(i)&&s(i)})}He(e){const s=e.targetId,r=e.me.count,i=this.Je(s);if(i){const o=i.target;if(Rm(o))if(r===0){const a=new re(o.path);this.Ue(s,a,It.newNoDocument(a,ce.min()))}else Te(r===1);else{const a=this.Ye(s);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(s);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,d)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=s;let a,c;try{a=Qn(r).toUint8Array()}catch(u){if(u instanceof _1)return Wn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new bf(a,i,o)}catch(u){return Wn(u instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,s,r){return s.me.count===r-this.nt(e,s.targetId)?0:2}nt(e,s){const r=this.Le.getRemoteKeysForTarget(s);let i=0;return r.forEach(o=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(s,o,null),i++)}),i}rt(e){const s=new Map;this.Be.forEach((o,a)=>{const c=this.Je(a);if(c){if(o.current&&Rm(c.target)){const u=new re(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,It.newNoDocument(u,e))}o.be&&(s.set(a,o.ve()),o.Ce())}});let r=ge();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new zu(e,s,this.Qe,this.ke,r);return this.ke=yr(),this.qe=ly(),this.Qe=new ze(je),i}$e(e,s){if(!this.ze(e))return;const r=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,r),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),r&&(this.ke=this.ke.insert(s,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new ay,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new xt(je),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||ee("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ay),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function ly(){return new ze(re.comparator)}function cy(){return new ze(re.comparator)}const OC={asc:"ASCENDING",desc:"DESCENDING"},FC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qC={and:"AND",or:"OR"};class UC{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Lm(t,e){return t.useProto3Json||Vu(e)?e:{value:e}}function ou(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zC(t,e){return ou(t,e.toTimestamp())}function Bs(t){return Te(!!t),ce.fromTimestamp(function(s){const r=rn(s);return new et(r.seconds,r.nanos)}(t))}function wf(t,e){return Mm(t,e).canonicalString()}function Mm(t,e){const s=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?s:s.child(e)}function W1(t){const e=Pe.fromString(t);return Te(X1(e)),e}function Vm(t,e){return wf(t.databaseId,e.path)}function sh(t,e){const s=W1(e);if(s.get(1)!==t.databaseId.projectId)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new J(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new re(K1(s))}function Q1(t,e){return wf(t.databaseId,e)}function BC(t){const e=W1(t);return e.length===4?Pe.emptyPath():K1(e)}function Om(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K1(t){return Te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uy(t,e,s){return{name:Vm(t,e),fields:s.value.mapValue.fields}}function $C(t,e){let s;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,m){return d.useProto3Json?(Te(m===void 0||typeof m=="string"),ct.fromBase64String(m||"")):(Te(m===void 0||m instanceof Buffer||m instanceof Uint8Array),ct.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const m=d.code===void 0?U.UNKNOWN:B1(d.code);return new J(m,d.message||"")}(a);s=new G1(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=sh(t,r.document.name),o=Bs(r.document.updateTime),a=r.document.createTime?Bs(r.document.createTime):ce.min(),c=new zt({mapValue:{fields:r.document.fields}}),u=It.newFoundDocument(i,o,a,c),d=r.targetIds||[],m=r.removedTargetIds||[];s=new yc(d,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=sh(t,r.document),o=r.readTime?Bs(r.readTime):ce.min(),a=It.newNoDocument(i,o),c=r.removedTargetIds||[];s=new yc([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=sh(t,r.document),o=r.removedTargetIds||[];s=new yc([],o,i,null)}else{if(!("filter"in e))return ae();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new RC(i,o),c=r.targetId;s=new $1(c,a)}}return s}function GC(t,e){let s;if(e instanceof nl)s={update:uy(t,e.key,e.value)};else if(e instanceof yf)s={delete:Vm(t,e.key)};else if(e instanceof un)s={update:uy(t,e.key,e.data),updateMask:e4(e.fieldMask)};else{if(!(e instanceof AC))return ae();s={verify:Vm(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const c=a.transform;if(c instanceof Oa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof qa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof iu)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ae()}(0,r))),e.precondition.isNone||(s.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:zC(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(t,e.precondition)),s}function HC(t,e){return t&&t.length>0?(Te(e!==void 0),t.map(s=>function(i,o){let a=i.updateTime?Bs(i.updateTime):Bs(o);return a.isEqual(ce.min())&&(a=Bs(o)),new TC(a,i.transformResults||[])}(s,e))):[]}function WC(t,e){return{documents:[Q1(t,e.path)]}}function QC(t,e){const s={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=Q1(t,i);const o=function(d){if(d.length!==0)return J1(Cs.create(d,"and"))}(e.filters);o&&(s.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:bi(g.field),direction:JC(g.dir)}}(m))}(e.orderBy);a&&(s.structuredQuery.orderBy=a);const c=Lm(t,e.limit);return c!==null&&(s.structuredQuery.limit=c),e.startAt&&(s.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:s,parent:i}}function KC(t){let e=BC(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){Te(r===1);const m=s.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let o=[];s.where&&(o=function(p){const g=Y1(p);return g instanceof Cs&&S1(g)?g.getFilters():[g]}(s.where));let a=[];s.orderBy&&(a=function(p){return p.map(g=>function(E){return new Va(wi(E.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(g))}(s.orderBy));let c=null;s.limit&&(c=function(p){let g;return g=typeof p=="object"?p.value:p,Vu(g)?null:g}(s.limit));let u=null;s.startAt&&(u=function(p){const g=!!p.before,y=p.values||[];return new ru(y,g)}(s.startAt));let d=null;return s.endAt&&(d=function(p){const g=!p.before,y=p.values||[];return new ru(y,g)}(s.endAt)),mC(e,i,a,o,c,"F",u,d)}function YC(t,e){const s=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function Y1(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=wi(s.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wi(s.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wi(s.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wi(s.unaryFilter.field);return Ze.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(s){return Ze.create(wi(s.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return Cs.create(s.compositeFilter.filters.map(r=>Y1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae()}}(s.compositeFilter.op))}(t):ae()}function JC(t){return OC[t]}function XC(t){return FC[t]}function ZC(t){return qC[t]}function bi(t){return{fieldPath:t.canonicalString()}}function wi(t){return at.fromServerFormat(t.fieldPath)}function J1(t){return t instanceof Ze?function(s){if(s.op==="=="){if(Yx(s.value))return{unaryFilter:{field:bi(s.field),op:"IS_NAN"}};if(Kx(s.value))return{unaryFilter:{field:bi(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Yx(s.value))return{unaryFilter:{field:bi(s.field),op:"IS_NOT_NAN"}};if(Kx(s.value))return{unaryFilter:{field:bi(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bi(s.field),op:XC(s.op),value:s.value}}}(t):t instanceof Cs?function(s){const r=s.getFilters().map(i=>J1(i));return r.length===1?r[0]:{compositeFilter:{op:ZC(s.op),filters:r}}}(t):ae()}function e4(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function X1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,s,r,i,o=ce.min(),a=ce.min(),c=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.ct=e}}function s4(t){const e=KC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.un=new n4}addToCollectionParentIndex(e,s){return this.un.add(s),B.resolve()}getCollectionParents(e,s){return B.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return B.resolve()}deleteFieldIndex(e,s){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,s){return B.resolve()}getDocumentsMatchingTarget(e,s){return B.resolve(null)}getIndexType(e,s){return B.resolve(0)}getFieldIndexes(e,s){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,s){return B.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,s){return B.resolve(sn.min())}updateCollectionGroup(e,s,r){return B.resolve()}updateIndexEntries(e,s){return B.resolve()}}class n4{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s]||new xt(Pe.comparator),o=!i.has(r);return this.index[s]=i.add(r),o}has(e){const s=e.lastSegment(),r=e.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new no(0)}static kn(){return new no(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.changes=new fo(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?B.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,s,r,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,s))).next(i=>(r!==null&&la(r.mutation,i,es.empty(),et.now()),i))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,s,r=ge()){const i=kn();return this.populateOverlays(e,i,s).next(()=>this.computeViews(e,s,i,r).next(o=>{let a=Wo();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,s){const r=kn();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,ge()))}populateOverlays(e,s,r){const i=[];return r.forEach(o=>{s.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,c)=>{s.set(a,c)})})}computeViews(e,s,r,i){let o=yr();const a=aa(),c=function(){return aa()}();return s.forEach((u,d)=>{const m=r.get(d.key);i.has(d.key)&&(m===void 0||m.mutation instanceof un)?o=o.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),la(m.mutation,d,m.mutation.getFieldMask(),et.now())):a.set(d.key,es.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((d,m)=>a.set(d,m)),s.forEach((d,m)=>{var p;return c.set(d,new o4(m,(p=a.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,s){const r=aa();let i=new ze((a,c)=>a-c),o=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=s.get(u);if(d===null)return;let m=r.get(u)||es.empty();m=c.applyToLocalView(d,m),r.set(u,m);const p=(i.get(c.batchId)||ge()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const a=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,m=u.value,p=L1();m.forEach(g=>{if(!o.has(g)){const y=U1(s.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return B.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,s,r,i){return function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):A1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,i):this.getDocumentsMatchingCollectionQuery(e,s,r,i)}getNextDocuments(e,s,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,i-o.size):B.resolve(kn());let c=-1,u=o;return a.next(d=>B.forEach(d,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{u=u.insert(m,g)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,u,d,ge())).next(m=>({batchId:c,changes:D1(m)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new re(s)).next(r=>{let i=Wo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,s,r,i){const o=s.collectionGroup;let a=Wo();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{const d=function(p,g){return new po(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(s,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(m=>{m.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,s,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,o,i))).next(a=>{o.forEach((u,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,It.newInvalidDocument(m)))});let c=Wo();return a.forEach((u,d)=>{const m=o.get(u);m!==void 0&&la(m.mutation,d,es.empty(),et.now()),Fu(s,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return B.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(i){return{id:i.id,version:i.version,createTime:Bs(i.createTime)}}(s)),B.resolve()}getNamedQuery(e,s){return B.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(i){return{name:i.name,query:s4(i.bundledQuery),readTime:Bs(i.readTime)}}(s)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.overlays=new ze(re.comparator),this.Ir=new Map}getOverlay(e,s){return B.resolve(this.overlays.get(s))}getOverlays(e,s){const r=kn();return B.forEach(s,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,s,r){return r.forEach((i,o)=>{this.ht(e,s,o)}),B.resolve()}removeOverlaysForBatchId(e,s,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,s,r){const i=kn(),o=s.length+1,a=new re(s.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!s.isPrefixOf(d.path))break;d.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return B.resolve(i)}getOverlaysForCollectionGroup(e,s,r,i){let o=new ze((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===s&&d.largestBatchId>r){let m=o.get(d.largestBatchId);m===null&&(m=kn(),o=o.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const c=kn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,m)=>c.set(d,m)),!(c.size()>=i)););return B.resolve(c)}ht(e,s,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new PC(s,r));let o=this.Ir.get(s);o===void 0&&(o=ge(),this.Ir.set(s,o)),this.Ir.set(s,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.Tr=new xt(it.Er),this.dr=new xt(it.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const r=new it(e,s);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,s){e.forEach(r=>this.addReference(r,s))}removeReference(e,s){this.Vr(new it(e,s))}mr(e,s){e.forEach(r=>this.removeReference(r,s))}gr(e){const s=new re(new Pe([])),r=new it(s,e),i=new it(s,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new re(new Pe([])),r=new it(s,e),i=new it(s,e+1);let o=ge();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const s=new it(e,0),r=this.Tr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class it{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return re.comparator(e.key,s.key)||je(e.wr,s.wr)}static Ar(e,s){return je(e.wr,s.wr)||re.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new xt(it.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new CC(o,s,r,i);this.mutationQueue.push(a);for(const c of i)this.br=this.br.add(new it(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,s){return B.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,i=this.vr(r),o=i<0?0:i;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new it(s,0),i=new it(s,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{const c=this.Dr(a.wr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new xt(je);return s.forEach(i=>{const o=new it(i,0),a=new it(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],c=>{r=r.add(c.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,i=r.length+1;let o=r;re.isDocumentKey(o)||(o=o.child(""));const a=new it(new re(o),0);let c=new xt(je);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(u.wr)),!0)},a),B.resolve(this.Cr(c))}Cr(e){const s=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&s.push(i)}),s}removeMutationBatch(e,s){Te(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(s.mutations,i=>{const o=new it(i.key,s.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,s){const r=new it(s,0),i=this.br.firstAfterOrEqual(r);return B.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.Mr=e,this.docs=function(){return new ze(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return B.resolve(r?r.document.mutableCopy():It.newInvalidDocument(s))}getEntries(e,s){let r=yr();return s.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():It.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,s,r,i){let o=yr();const a=s.path,c=new re(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:m}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||QA(WA(m),r)<=0||(i.has(m.key)||Fu(s,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,s,r,i){ae()}Or(e,s){return B.forEach(this.docs,r=>s(r))}newChangeBuffer(e){return new m4(this)}getSize(e){return B.resolve(this.size)}}class m4 extends i4{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),B.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.persistence=e,this.Nr=new fo(s=>pf(s),ff),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _f,this.targetCount=0,this.kr=no.Bn()}forEachTarget(e,s){return this.Nr.forEach((r,i)=>s(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.Lr&&(this.Lr=s),B.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new no(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,B.resolve()}updateTargetData(e,s){return this.Kn(s),B.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,s,r){let i=0;const o=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=s&&r.get(c.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),B.waitFor(o).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,s){const r=this.Nr.get(s)||null;return B.resolve(r)}addMatchingKeys(e,s,r){return this.Br.Rr(s,r),B.resolve()}removeMatchingKeys(e,s,r){this.Br.mr(s,r);const i=this.persistence.referenceDelegate,o=[];return i&&s.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),B.resolve()}getMatchingKeysForTargetId(e,s){const r=this.Br.yr(s);return B.resolve(r)}containsKey(e,s){return B.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(e,s){this.qr={},this.overlays={},this.Qr=new uf(0),this.Kr=!1,this.Kr=!0,this.$r=new u4,this.referenceDelegate=e(this),this.Ur=new p4(this),this.indexManager=new r4,this.remoteDocumentCache=function(i){return new h4(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new t4(s),this.Gr=new l4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new c4,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.qr[e.toKey()];return r||(r=new d4(s,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,r){ee("MemoryPersistence","Starting transaction:",e);const i=new g4(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,s){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,s)))}}class g4 extends YA{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Jr=new _f,this.Yr=null}static Zr(e){return new jf(e)}get Xr(){if(this.Yr)return this.Yr;throw ae()}addReference(e,s,r){return this.Jr.addReference(r,s),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,s,r){return this.Jr.removeReference(r,s),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),B.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const i=re.fromPath(r);return this.ei(e,i).next(o=>{o||s.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(r=>{r?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return B.or([()=>B.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,s,r,i){this.targetId=e,this.fromCache=s,this.$i=r,this.Ui=i}static Wi(e,s){let r=ge(),i=ge();for(const o of s.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Nf(e,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sT()?8:JA(Pt())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,r,i){const o={result:null};return this.Yi(e,s).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,s,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new x4;return this.Xi(e,s,a).next(c=>{if(o.result=c,this.zi)return this.es(e,s,a,c.size)})}).next(()=>o.result)}es(e,s,r,i){return r.documentReadCount<this.ji?(Fo()<=ve.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",vi(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Fo()<=ve.DEBUG&&ee("QueryEngine","Query:",vi(s),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Fo()<=ve.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",vi(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zs(s))):B.resolve())}Yi(e,s){if(ey(s))return B.resolve(null);let r=zs(s);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(s.limit!==null&&i===1&&(s=nu(s,null,"F"),r=zs(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=ge(...o);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(s,c);return this.ns(s,d,a,u.readTime)?this.Yi(e,nu(s,null,"F")):this.rs(e,d,s,u)}))})))}Zi(e,s,r,i){return ey(s)||i.isEqual(ce.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const a=this.ts(s,o);return this.ns(s,a,r,i)?B.resolve(null):(Fo()<=ve.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),vi(s)),this.rs(e,a,s,HA(i,-1)).next(c=>c))})}ts(e,s){let r=new xt(P1(e));return s.forEach((i,o)=>{Fu(e,o)&&(r=r.add(o))}),r}ns(e,s,r,i){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const o=e.limitType==="F"?s.last():s.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,s,r){return Fo()<=ve.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",vi(s)),this.Ji.getDocumentsMatchingQuery(e,s,sn.min(),r)}rs(e,s,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(s.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,s,r,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new ze(je),this._s=new fo(o=>pf(o),ff),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function b4(t,e,s,r){return new v4(t,e,s,r)}async function Z1(t,e){const s=ue(t);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let i;return s.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,s.ls(e),s.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let u=ge();for(const d of i){a.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}for(const d of o){c.push(d.batchId);for(const m of d.mutations)u=u.add(m.key)}return s.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function w4(t,e){const s=ue(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=s.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,m){const p=d.batch,g=p.keys();let y=B.resolve();return g.forEach(E=>{y=y.next(()=>m.getEntry(u,E)).next(A=>{const R=d.docVersions.get(E);Te(R!==null),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),m.addEntry(A)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(s,r,e,o).next(()=>o.apply(r)).next(()=>s.mutationQueue.performConsistencyCheck(r)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>s.localDocuments.getDocuments(r,i))})}function e_(t){const e=ue(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function _4(t,e){const s=ue(t),r=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const c=[];e.targetChanges.forEach((m,p)=>{const g=i.get(p);if(!g)return;c.push(s.Ur.removeMatchingKeys(o,m.removedDocuments,p).next(()=>s.Ur.addMatchingKeys(o,m.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ct.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):m.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(m.resumeToken,r)),i=i.insert(p,y),function(A,R,b){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,y,m)&&c.push(s.Ur.updateTargetData(o,y))});let u=yr(),d=ge();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(s.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(j4(o,a,e.documentUpdates).next(m=>{u=m.Ps,d=m.Is})),!r.isEqual(ce.min())){const m=s.Ur.getLastRemoteSnapshotVersion(o).next(p=>s.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>s.localDocuments.getLocalViewOfDocuments(o,u,d)).next(()=>u)}).then(o=>(s.os=i,o))}function j4(t,e,s){let r=ge(),i=ge();return s.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=yr();return s.forEach((c,u)=>{const d=o.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):ee("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:i}})}function N4(t,e){const s=ue(t);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E4(t,e){const s=ue(t);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return s.Ur.getTargetData(r,e).next(o=>o?(i=o,B.resolve(i)):s.Ur.allocateTargetId(r).next(a=>(i=new Ur(e,a,"TargetPurposeListen",r.currentSequenceNumber),s.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=s.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(r.targetId,r),s._s.set(e,r.targetId)),r})}async function Fm(t,e,s){const r=ue(t),i=r.os.get(e),o=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!rl(a))throw a;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function dy(t,e,s){const r=ue(t);let i=ce.min(),o=ge();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,m){const p=ue(u),g=p._s.get(m);return g!==void 0?B.resolve(p.os.get(g)):p.Ur.getTargetData(d,m)}(r,a,zs(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,s?i:ce.min(),s?o:ge())).next(c=>(S4(r,fC(e),c),{documents:c,Ts:o})))}function S4(t,e,s){let r=t.us.get(e)||ce.min();s.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class hy{constructor(){this.activeTargetIds=wC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T4{constructor(){this.so=new hy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,r){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hy,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yl=null;function rh(){return Yl===null?Yl=function(){return 268435456+Math.round(2147483648*Math.random())}():Yl++,"0x"+Yl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class C4 extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const r=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+s.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(s,r,i,o,a){const c=rh(),u=this.xo(s,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${s}' ${c}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,a),this.No(s,u,d,i).then(m=>(ee("RestConnection",`Received RPC '${s}' ${c}: `,m),m),m=>{throw Wn("RestConnection",`RPC '${s}' ${c} failed with error: `,m,"url: ",u,"request:",i),m})}Lo(s,r,i,o,a,c){return this.Mo(s,r,i,o,a)}Oo(s,r,i){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mo}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>s[a]=o),i&&i.headers.forEach((o,a)=>s[a]=o)}xo(s,r){const i=I4[s];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,r,i){const o=rh();return new Promise((a,c)=>{const u=new m1;u.setWithCredentials(!0),u.listenOnce(f1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fc.NO_ERROR:const m=u.getResponseJson();ee(Et,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case fc.TIMEOUT:ee(Et,`RPC '${e}' ${o} timed out`),c(new J(U.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const p=u.getStatus();if(ee(Et,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const E=function(R){const b=R.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(b)>=0?b:U.UNKNOWN}(y.status);c(new J(E,y.message))}else c(new J(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new J(U.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{ee(Et,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);ee(Et,`RPC '${e}' ${o} sending request:`,i),u.send(s,"POST",d,r,15)})}Bo(e,s,r){const i=rh(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=y1(),c=x1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new p1({})),this.Oo(u.initMessageHeaders,s,r),u.encodeInitMessageHeaders=!0;const m=o.join("");ee(Et,`Creating RPC '${e}' stream ${i}: ${m}`,u);const p=a.createWebChannel(m,u);let g=!1,y=!1;const E=new A4({Io:R=>{y?ee(Et,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(g||(ee(Et,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ee(Et,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},To:()=>p.close()}),A=(R,b,w)=>{R.listen(b,C=>{try{w(C)}catch(D){setTimeout(()=>{throw D},0)}})};return A(p,Ho.EventType.OPEN,()=>{y||(ee(Et,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),A(p,Ho.EventType.CLOSE,()=>{y||(y=!0,ee(Et,`RPC '${e}' stream ${i} transport closed`),E.So())}),A(p,Ho.EventType.ERROR,R=>{y||(y=!0,Wn(Et,`RPC '${e}' stream ${i} transport errored:`,R),E.So(new J(U.UNAVAILABLE,"The operation could not be completed")))}),A(p,Ho.EventType.MESSAGE,R=>{var b;if(!y){const w=R.data[0];Te(!!w);const C=w,D=C.error||((b=C[0])===null||b===void 0?void 0:b.error);if(D){ee(Et,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let O=function(v){const k=Je[v];if(k!==void 0)return B1(k)}(L),j=D.message;O===void 0&&(O=U.INTERNAL,j="Unknown error status: "+L+" with message "+D.message),y=!0,E.So(new J(O,j)),p.close()}else ee(Et,`RPC '${e}' stream ${i} received:`,w),E.bo(w)}}),A(c,g1.STAT_EVENT,R=>{R.stat===Im.PROXY?ee(Et,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Im.NOPROXY&&ee(Et,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){return new UC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,s,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=s,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,s,r,i,o,a,c,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new t_(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===U.RESOURCE_EXHAUSTED?(xr(s.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===s&&this.P_(r,i)},r=>{e(()=>{const i=new J(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,s){const r=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P4 extends s_{constructor(e,s,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,a),this.serializer=o}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=$C(this.serializer,e),r=function(o){if(!("targetChange"in o))return ce.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ce.min():a.readTime?Bs(a.readTime):ce.min()}(e);return this.listener.d_(s,r)}A_(e){const s={};s.database=Om(this.serializer),s.addTarget=function(o,a){let c;const u=a.target;if(c=Rm(u)?{documents:WC(o,u)}:{query:QC(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=H1(o,a.resumeToken);const d=Lm(o,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ce.min())>0){c.readTime=ou(o,a.snapshotVersion.toTimestamp());const d=Lm(o,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=YC(this.serializer,e);r&&(s.labels=r),this.a_(s)}R_(e){const s={};s.database=Om(this.serializer),s.removeTarget=e,this.a_(s)}}class R4 extends s_{constructor(e,s,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return Te(!!e.streamToken),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=HC(e.writeResults,e.commitTime),r=Bs(e.commitTime);return this.listener.g_(r,s)}p_(){const e={};e.database=Om(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(r=>GC(this.serializer,r))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4 extends class{}{constructor(e,s,r,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Mm(s,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(U.UNKNOWN,o.toString())})}Lo(e,s,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Mm(s,r),i,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new J(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class L4{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(xr(s),this.D_=!1):ee("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,s,r,i,o){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{ui(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ue(u);d.L_.add(4),await ol(d),d.q_.set("Unknown"),d.L_.delete(4),await $u(d)}(this))})}),this.q_=new L4(r,i)}}async function $u(t){if(ui(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function r_(t,e){const s=ue(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),kf(s)?Tf(s):go(s).r_()&&Sf(s,e))}function Ef(t,e){const s=ue(t),r=go(s);s.N_.delete(e),r.r_()&&n_(s,e),s.N_.size===0&&(r.r_()?r.o_():ui(s)&&s.q_.set("Unknown"))}function Sf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}go(t).A_(e)}function n_(t,e){t.Q_.xe(e),go(t).R_(e)}function Tf(t){t.Q_=new VC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),go(t).start(),t.q_.v_()}function kf(t){return ui(t)&&!go(t).n_()&&t.N_.size>0}function ui(t){return ue(t).L_.size===0}function i_(t){t.Q_=void 0}async function V4(t){t.q_.set("Online")}async function O4(t){t.N_.forEach((e,s)=>{Sf(t,e)})}async function F4(t,e){i_(t),kf(t)?(t.q_.M_(e),Tf(t)):t.q_.set("Unknown")}async function q4(t,e,s){if(t.q_.set("Online"),e instanceof G1&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const c of o.targetIds)i.N_.has(c)&&(await i.remoteSyncer.rejectListen(c,a),i.N_.delete(c),i.Q_.removeTarget(c))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await au(t,r)}else if(e instanceof yc?t.Q_.Ke(e):e instanceof $1?t.Q_.He(e):t.Q_.We(e),!s.isEqual(ce.min()))try{const r=await e_(t.localStore);s.compareTo(r)>=0&&await function(o,a){const c=o.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const m=o.N_.get(d);m&&o.N_.set(d,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const m=o.N_.get(u);if(!m)return;o.N_.set(u,m.withResumeToken(ct.EMPTY_BYTE_STRING,m.snapshotVersion)),n_(o,u);const p=new Ur(m.target,u,d,m.sequenceNumber);Sf(o,p)}),o.remoteSyncer.applyRemoteEvent(c)}(t,s)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await au(t,r)}}async function au(t,e,s){if(!rl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),s||(s=()=>e_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await $u(t)})}function o_(t,e){return e().catch(s=>au(t,s,e))}async function Gu(t){const e=ue(t),s=nn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U4(e);)try{const i=await N4(e.localStore,r);if(i===null){e.O_.length===0&&s.o_();break}r=i.batchId,z4(e,i)}catch(i){await au(e,i)}a_(e)&&l_(e)}function U4(t){return ui(t)&&t.O_.length<10}function z4(t,e){t.O_.push(e);const s=nn(t);s.r_()&&s.V_&&s.m_(e.mutations)}function a_(t){return ui(t)&&!nn(t).n_()&&t.O_.length>0}function l_(t){nn(t).start()}async function B4(t){nn(t).p_()}async function $4(t){const e=nn(t);for(const s of t.O_)e.m_(s.mutations)}async function G4(t,e,s){const r=t.O_.shift(),i=vf.from(r,e,s);await o_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gu(t)}async function H4(t,e){e&&nn(t).V_&&await async function(r,i){if(function(a){return DC(a)&&a!==U.ABORTED}(i.code)){const o=r.O_.shift();nn(r).s_(),await o_(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Gu(r)}}(t,e),a_(t)&&l_(t)}async function py(t,e){const s=ue(t);s.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ui(s);s.L_.add(3),await ol(s),r&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await $u(s)}async function W4(t,e){const s=ue(t);e?(s.L_.delete(2),await $u(s)):e||(s.L_.add(2),await ol(s),s.q_.set("Unknown"))}function go(t){return t.K_||(t.K_=function(s,r,i){const o=ue(s);return o.w_(),new P4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:V4.bind(null,t),Ro:O4.bind(null,t),mo:F4.bind(null,t),d_:q4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),kf(t)?Tf(t):t.q_.set("Unknown")):(await t.K_.stop(),i_(t))})),t.K_}function nn(t){return t.U_||(t.U_=function(s,r,i){const o=ue(s);return o.w_(),new R4(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:B4.bind(null,t),mo:H4.bind(null,t),f_:$4.bind(null,t),g_:G4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gu(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,s,r,i,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,i,o){const a=Date.now()+r,c=new If(e,s,a,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(t,e){if(xr("AsyncQueue",`${e}: ${t}`),rl(t))return new J(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.comparator=e?(s,r)=>e(s,r)||re.comparator(s.key,r.key):(s,r)=>re.comparator(s.key,r.key),this.keyedMap=Wo(),this.sortedSet=new ze(this.comparator)}static emptySet(e){return new $i(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,r)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof $i)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new $i;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(){this.W_=new ze(re.comparator)}track(e){const s=e.doc.key,r=this.W_.get(s);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(s,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(s):e.type===1&&r.type===2?this.W_=this.W_.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):ae():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,r)=>{e.push(r)}),e}}class io{constructor(e,s,r,i,o,a,c,u,d){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,s,r,i,o){const a=[];return s.forEach(c=>{a.push({type:0,doc:c})}),new io(e,s,$i.emptySet(s),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ou(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class K4{constructor(){this.queries=gy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,r){const i=ue(s),o=i.queries;i.queries=gy(),o.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new J(U.ABORTED,"Firestore shutting down"))}}function gy(){return new fo(t=>C1(t),Ou)}async function c_(t,e){const s=ue(t);let r=3;const i=e.query;let o=s.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Q4,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await s.onListen(i,!0);break;case 1:o.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(a){const c=Af(a,`Initialization of query '${vi(e.query)}' failed`);return void e.onError(c)}s.queries.set(i,o),o.j_.push(e),e.Z_(s.onlineState),o.z_&&e.X_(o.z_)&&Cf(s)}async function u_(t,e){const s=ue(t),r=e.query;let i=3;const o=s.queries.get(r);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function Y4(t,e){const s=ue(t);let r=!1;for(const i of e){const o=i.query,a=s.queries.get(o);if(a){for(const c of a.j_)c.X_(i)&&(r=!0);a.z_=i}}r&&Cf(s)}function J4(t,e,s){const r=ue(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(s);r.queries.delete(e)}function Cf(t){t.Y_.forEach(e=>{e.next()})}var qm,xy;(xy=qm||(qm={})).ea="default",xy.Cache="cache";class d_{constructor(e,s,r){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new io(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const r=s!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.key=e}}class m_{constructor(e){this.key=e}}class X4{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=P1(e),this.Ra=new $i(this.Aa)}get Va(){return this.Ta}ma(e,s){const r=s?s.fa:new fy,i=s?s.Ra:this.Ra;let o=s?s.mutatedKeys:this.mutatedKeys,a=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,p)=>{const g=i.get(m),y=Fu(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let R=!1;g&&y?g.data.isEqual(y.data)?E!==A&&(r.track({type:3,doc:y}),R=!0):this.ga(g,y)||(r.track({type:2,doc:y}),R=!0,(u&&this.Aa(y,u)>0||d&&this.Aa(y,d)<0)&&(c=!0)):!g&&y?(r.track({type:0,doc:y}),R=!0):g&&!y&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(y?(a=a.add(y),o=A?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Ra:a,fa:r,ns:c,mutatedKeys:o}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((m,p)=>function(y,E){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return A(y)-A(E)}(m.type,p.type)||this.Aa(m.doc,p.doc)),this.pa(r),i=i!=null&&i;const c=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new io(this.query,e.Ra,o,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const s=[];return e.forEach(r=>{this.da.has(r)||s.push(new m_(r))}),this.da.forEach(r=>{e.has(r)||s.push(new h_(r))}),s}ba(e){this.Ta=e.Ts,this.da=ge();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return io.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Z4{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class eP{constructor(e){this.key=e,this.va=!1}}class tP{constructor(e,s,r,i,o,a){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new fo(c=>C1(c),Ou),this.Ma=new Map,this.xa=new Set,this.Oa=new ze(re.comparator),this.Na=new Map,this.La=new _f,this.Ba={},this.ka=new Map,this.qa=no.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sP(t,e,s=!0){const r=v_(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await p_(r,e,s,!0),i}async function rP(t,e){const s=v_(t);await p_(s,e,!0,!1)}async function p_(t,e,s,r){const i=await E4(t.localStore,zs(e)),o=i.targetId,a=s?t.sharedClientState.addLocalQueryTarget(o):"not-current";let c;return r&&(c=await nP(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&s&&r_(t.remoteStore,i),c}async function nP(t,e,s,r,i){t.Ka=(p,g,y)=>async function(A,R,b,w){let C=R.view.ma(b);C.ns&&(C=await dy(A.localStore,R.query,!1).then(({documents:j})=>R.view.ma(j,C)));const D=w&&w.targetChanges.get(R.targetId),L=w&&w.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(C,A.isPrimaryClient,D,L);return vy(A,R.targetId,O.wa),O.snapshot}(t,p,g,y);const o=await dy(t.localStore,e,!0),a=new X4(e,o.Ts),c=a.ma(o.documents),u=il.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",i),d=a.applyChanges(c,t.isPrimaryClient,u);vy(t,s,d.wa);const m=new Z4(e,s,a);return t.Fa.set(e,m),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),d.snapshot}async function iP(t,e,s){const r=ue(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!Ou(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),s&&Ef(r.remoteStore,i.targetId),Um(r,i.targetId)}).catch(sl)):(Um(r,i.targetId),await Fm(r.localStore,i.targetId,!0))}async function oP(t,e){const s=ue(t),r=s.Fa.get(e),i=s.Ma.get(r.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),Ef(s.remoteStore,r.targetId))}async function aP(t,e,s){const r=pP(t);try{const i=await function(a,c){const u=ue(a),d=et.now(),m=c.reduce((y,E)=>y.add(E.key),ge());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=yr(),A=ge();return u.cs.getEntries(y,m).next(R=>{E=R,E.forEach((b,w)=>{w.isValidDocument()||(A=A.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(R=>{p=R;const b=[];for(const w of c){const C=IC(w,p.get(w.key).overlayedDocument);C!=null&&b.push(new un(w.key,C,j1(C.value.mapValue),ms.exists(!0)))}return u.mutationQueue.addMutationBatch(y,d,b,c)}).next(R=>{g=R;const b=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,R.batchId,b)})}).then(()=>({batchId:g.batchId,changes:D1(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new ze(je)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,s),await al(r,i.changes),await Gu(r.remoteStore)}catch(i){const o=Af(i,"Failed to persist write");s.reject(o)}}async function f_(t,e){const s=ue(t);try{const r=await _4(s.localStore,e);e.targetChanges.forEach((i,o)=>{const a=s.Na.get(o);a&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Te(a.va):i.removedDocuments.size>0&&(Te(a.va),a.va=!1))}),await al(s,r,e)}catch(r){await sl(r)}}function yy(t,e,s){const r=ue(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.Fa.forEach((o,a)=>{const c=a.view.Z_(e);c.snapshot&&i.push(c.snapshot)}),function(a,c){const u=ue(a);u.onlineState=c;let d=!1;u.queries.forEach((m,p)=>{for(const g of p.j_)g.Z_(c)&&(d=!0)}),d&&Cf(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lP(t,e,s){const r=ue(t);r.sharedClientState.updateQueryState(e,"rejected",s);const i=r.Na.get(e),o=i&&i.key;if(o){let a=new ze(re.comparator);a=a.insert(o,It.newNoDocument(o,ce.min()));const c=ge().add(o),u=new zu(ce.min(),new Map,new ze(je),a,c);await f_(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),Pf(r)}else await Fm(r.localStore,e,!1).then(()=>Um(r,e,s)).catch(sl)}async function cP(t,e){const s=ue(t),r=e.batch.batchId;try{const i=await w4(s.localStore,e);x_(s,r,null),g_(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await al(s,i)}catch(i){await sl(i)}}async function uP(t,e,s){const r=ue(t);try{const i=await function(a,c){const u=ue(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(Te(p!==null),m=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>u.localDocuments.getDocuments(d,m))})}(r.localStore,e);x_(r,e,s),g_(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await al(r,i)}catch(i){await sl(i)}}function g_(t,e){(t.ka.get(e)||[]).forEach(s=>{s.resolve()}),t.ka.delete(e)}function x_(t,e,s){const r=ue(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(s?o.reject(s):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Um(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),s&&t.Ca.$a(r,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||y_(t,r)})}function y_(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(Ef(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),Pf(t))}function vy(t,e,s){for(const r of s)r instanceof h_?(t.La.addReference(r.key,e),dP(t,r)):r instanceof m_?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||y_(t,r.key)):ae()}function dP(t,e){const s=e.key,r=s.path.canonicalString();t.Oa.get(s)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+s),t.xa.add(r),Pf(t))}function Pf(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new re(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new eP(s)),t.Oa=t.Oa.insert(s,r),r_(t.remoteStore,new Ur(zs(gf(s.path)),r,"TargetPurposeLimboResolution",uf.oe))}}async function al(t,e,s){const r=ue(t),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,s).then(d=>{var m;if((d||s)&&r.isPrimaryClient){const p=d?!d.fromCache:(m=s==null?void 0:s.targetChanges.get(u.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=Nf.Wi(u.targetId,d);o.push(p)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(u,d){const m=ue(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(d,g=>B.forEach(g.$i,y=>m.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>B.forEach(g.Ui,y=>m.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!rl(p))throw p;ee("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const y=m.os.get(g),E=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(E);m.os=m.os.insert(g,A)}}}(r.localStore,o))}async function hP(t,e){const s=ue(t);if(!s.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await Z1(s.localStore,e);s.currentUser=e,function(o,a){o.ka.forEach(c=>{c.forEach(u=>{u.reject(new J(U.CANCELLED,a))})}),o.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(s,r.hs)}}function mP(t,e){const s=ue(t),r=s.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const o=s.Ma.get(e);if(!o)return i;for(const a of o){const c=s.Fa.get(a);i=i.unionWith(c.view.Va)}return i}}function v_(t){const e=ue(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=f_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.Ca.d_=Y4.bind(null,e.eventManager),e.Ca.$a=J4.bind(null,e.eventManager),e}function pP(t){const e=ue(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class by{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Bu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,s){return null}createIndexBackfillerScheduler(e,s){return null}createLocalStore(e){return b4(this.persistence,new y4,e.initialUser,this.serializer)}createPersistence(e){return new f4(jf.Zr,this.serializer)}createSharedClientState(e){return new T4}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class fP{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hP.bind(null,this.syncEngine),await W4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K4}()}createDatastore(e){const s=Bu(e.databaseInfo.databaseId),r=function(o){return new C4(o)}(e.databaseInfo);return function(o,a,c,u){return new D4(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return function(r,i,o,a,c){return new M4(r,i,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,s=>yy(this.syncEngine,s,0),function(){return my.D()?new my:new k4}())}createSyncEngine(e,s){return function(i,o,a,c,u,d,m){const p=new tP(i,o,a,c,u,d);return m&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(i){const o=ue(i);ee("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await ol(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,s){this.muted||setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,s,r,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=St.UNAUTHENTICATED,this.clientId=cf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Af(s,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ih(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Z1(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wy(t,e){t.asyncQueue.verifyOperationInProgress();const s=await yP(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(r=>py(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>py(e.remoteStore,i)),t._onlineComponents=e}function xP(t){return t.name==="FirebaseError"?t.code===U.FAILED_PRECONDITION||t.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function yP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await ih(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!xP(s))throw s;Wn("Error using user provided cache. Falling back to memory cache: "+s),await ih(t,new by)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await ih(t,new by);return t._offlineComponents}async function w_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await wy(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await wy(t,new fP))),t._onlineComponents}function vP(t){return w_(t).then(e=>e.syncEngine)}async function __(t){const e=await w_(t),s=e.eventManager;return s.onListen=sP.bind(null,e.syncEngine),s.onUnlisten=iP.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),s}function bP(t,e,s={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new b_({next:g=>{a.enqueueAndForget(()=>u_(o,p));const y=g.docs.has(c);!y&&g.fromCache?d.reject(new J(U.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?d.reject(new J(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new d_(gf(c.path),m,{includeMetadataChanges:!0,_a:!0});return c_(o,p)}(await __(t),t.asyncQueue,e,s,r)),r.promise}function wP(t,e,s={}){const r=new cr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,c,u,d){const m=new b_({next:g=>{a.enqueueAndForget(()=>u_(o,p)),g.fromCache&&u.source==="server"?d.reject(new J(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new d_(c,m,{includeMetadataChanges:!0,_a:!0});return c_(o,p)}(await __(t),t.asyncQueue,e,s,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(t,e,s){if(!s)throw new J(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function E_(t,e,s,r){if(e===!0&&r===!0)throw new J(U.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function jy(t){if(!re.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ny(t){if(re.isDocumentKey(t))throw new J(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function xs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Hu(t);throw new J(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function _P(t,e){if(e<=0)throw new J(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(U.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,s,r,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ey({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ey(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new b1;switch(r.type){case"firstParty":return new UA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=_y.get(s);r&&(ee("ComponentProvider","Removing Datastore"),_y.delete(s),r.terminate())}(this),Promise.resolve()}}function S_(t,e,s,r={}){var i;const o=(t=xs(t,Wu))._getSettings(),a=`${e}:${s}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=St.MOCK_USER;else{c=JS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new J(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new St(d)}t._authCredentials=new OA(new v1(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jr(this.firestore,e,this._query)}}class At{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}}class ur extends jr{constructor(e,s,r){super(e,s,gf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new re(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function Ge(t,e,...s){if(t=Me(t),N_("collection","path",e),t instanceof Wu){const r=Pe.fromString(e,...s);return Ny(r),new ur(t,null,r)}{if(!(t instanceof At||t instanceof ur))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...s));return Ny(r),new ur(t.firestore,null,r)}}function Fe(t,e,...s){if(t=Me(t),arguments.length===1&&(e=cf.newId()),N_("doc","path",e),t instanceof Wu){const r=Pe.fromString(e,...s);return jy(r),new At(t,null,new re(r))}{if(!(t instanceof At||t instanceof ur))throw new J(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...s));return jy(r),new At(t.firestore,t instanceof ur?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new t_(this,"async_queue_retry"),this.Eu=()=>{const s=nh();s&&ee("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()};const e=nh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const s=nh();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const s=new cr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!rl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const s=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw xr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=s,s}enqueueAfterDelay(e,s,r){this.du(),this.Tu.indexOf(e)>-1&&(s=0);const i=If.createAndSchedule(this,e,s,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&ae()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const s of this.lu)if(s.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.lu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const s=this.lu.indexOf(e);this.lu.splice(s,1)}}class dn extends Wu{constructor(e,s,r,i){super(e,s,r,i),this.type="firestore",this._queue=function(){return new jP}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||k_(this),this._firestoreClient.terminate()}}function T_(t,e){const s=typeof t=="object"?t:Kp(),r=typeof t=="string"?t:"(default)",i=ai(s,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=KS("firestore");o&&S_(i,...o)}return i}function Qu(t){return t._firestoreClient||k_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function k_(t){var e,s,r;const i=t._freezeSettings(),o=function(c,u,d,m){return new eC(c,u,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,j_(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new gP(t._authCredentials,t._appCheckCredentials,t._queue,o),!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(ct.fromBase64String(e))}catch(s){throw new J(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Yn(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new J(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new J(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new J(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=/^__.*__$/;class EP{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new un(e,this.data,this.fieldMask,s,this.fieldTransforms):new nl(e,this.data,s,this.fieldTransforms)}}class I_{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new un(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function A_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}class Rf{constructor(e,s,r,i,o,a){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return lu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(A_(this.wu)&&NP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class SP{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Bu(e)}Nu(e,s,r,i=!1){return new Rf({wu:e,methodName:s,Ou:r,path:at.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ju(t){const e=t._freezeSettings(),s=Bu(t._databaseId);return new SP(t._databaseId,!!e.ignoreUndefinedProperties,s)}function C_(t,e,s,r,i,o={}){const a=t.Nu(o.merge||o.mergeFields?2:0,e,s,i);Lf("Data must be an object, but it was:",a,r);const c=P_(r,a);let u,d;if(o.merge)u=new es(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const p of o.mergeFields){const g=zm(e,p,s);if(!a.contains(g))throw new J(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);D_(m,g)||m.push(g)}u=new es(m),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new EP(new zt(c),u,d)}class Xu extends cl{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xu}}class Df extends cl{_toFieldTransform(e){return new EC(e.path,new Oa)}isEqual(e){return e instanceof Df}}function TP(t,e,s,r){const i=t.Nu(1,e,s);Lf("Data must be an object, but it was:",i,r);const o=[],a=zt.empty();ci(r,(u,d)=>{const m=Mf(e,u,s);d=Me(d);const p=i.Cu(m);if(d instanceof Xu)o.push(m);else{const g=ul(d,p);g!=null&&(o.push(m),a.set(m,g))}});const c=new es(o);return new I_(a,c,i.fieldTransforms)}function kP(t,e,s,r,i,o){const a=t.Nu(1,e,s),c=[zm(e,r,s)],u=[i];if(o.length%2!=0)throw new J(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)c.push(zm(e,o[g])),u.push(o[g+1]);const d=[],m=zt.empty();for(let g=c.length-1;g>=0;--g)if(!D_(d,c[g])){const y=c[g];let E=u[g];E=Me(E);const A=a.Cu(y);if(E instanceof Xu)d.push(y);else{const R=ul(E,A);R!=null&&(d.push(y),m.set(y,R))}}const p=new es(d);return new I_(m,p,a.fieldTransforms)}function IP(t,e,s,r=!1){return ul(s,t.Nu(r?4:3,e))}function ul(t,e){if(R_(t=Me(t)))return Lf("Unsupported field value:",e,t),P_(t,e);if(t instanceof cl)return function(r,i){if(!A_(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const c of r){let u=ul(c,i.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _C(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=et.fromDate(r);return{timestampValue:ou(i.serializer,o)}}if(r instanceof et){const o=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ou(i.serializer,o)}}if(r instanceof Ku)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yn)return{bytesValue:H1(i.serializer,r._byteString)};if(r instanceof At){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Yu)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return xf(c.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Hu(r)}`)}(t,e)}function P_(t,e){const s={};return w1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(t,(r,i)=>{const o=ul(i,e.bu(r));o!=null&&(s[r]=o)}),{mapValue:{fields:s}}}function R_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Ku||t instanceof Yn||t instanceof At||t instanceof cl||t instanceof Yu)}function Lf(t,e,s){if(!R_(s)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(s)){const r=Hu(s);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function zm(t,e,s){if((e=Me(e))instanceof ll)return e._internalPath;if(typeof e=="string")return Mf(t,e);throw lu("Field path arguments must be of type string or ",t,!1,void 0,s)}const AP=new RegExp("[~\\*/\\[\\]]");function Mf(t,e,s){if(e.search(AP)>=0)throw lu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new ll(...e.split("."))._internalPath}catch{throw lu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function lu(t,e,s,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${e}() called with invalid data`;s&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${r}`),a&&(u+=` in document ${i}`),u+=")"),new J(U.INVALID_ARGUMENT,c+t+u)}function D_(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,s,r,i,o){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Zu("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class CP extends L_{data(){return super.data()}}function Zu(t,e){return typeof e=="string"?Mf(t,e):e instanceof ll?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vf{}class ed extends Vf{}function In(t,e,...s){let r=[];e instanceof Vf&&r.push(e),r=r.concat(s),function(o){const a=o.filter(u=>u instanceof td).length,c=o.filter(u=>u instanceof dl).length;if(a>1||a>0&&c>0)throw new J(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class dl extends ed{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new dl(e,s,r)}_apply(e){const s=this._parse(e);return M_(e._query,s),new jr(e.firestore,e.converter,Dm(e._query,s))}_parse(e){const s=Ju(e.firestore);return function(o,a,c,u,d,m,p){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new J(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Ty(p,m);const y=[];for(const E of p)y.push(Sy(u,o,E));g={arrayValue:{values:y}}}else g=Sy(u,o,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Ty(p,m),g=IP(c,a,p,m==="in"||m==="not-in");return Ze.create(d,m,g)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Of(t,e,s){const r=e,i=Zu("where",t);return dl._create(i,r,s)}class td extends Vf{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new td(e,s)}_parse(e){const s=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return s.length===1?s[0]:Cs.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(i,o){let a=i;const c=o.getFlattenedFilters();for(const u of c)M_(a,u),a=Dm(a,u)}(e._query,s),new jr(e.firestore,e.converter,Dm(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sd extends ed{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new sd(e,s)}_apply(e){const s=function(i,o,a){if(i.startAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Va(o,a)}(e._query,this._field,this._direction);return new jr(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new po(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,s))}}function Ff(t,e="asc"){const s=e,r=Zu("orderBy",t);return sd._create(r,s)}class rd extends ed{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new rd(e,s,r)}_apply(e){return new jr(e.firestore,e.converter,nu(e._query,this._limit,this._limitType))}}function cu(t){return _P("limit",t),rd._create("limit",t,"F")}function Sy(t,e,s){if(typeof(s=Me(s))=="string"){if(s==="")throw new J(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A1(e)&&s.indexOf("/")!==-1)throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(Pe.fromString(s));if(!re.isDocumentKey(r))throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qx(t,new re(r))}if(s instanceof At)return Qx(t,s._key);throw new J(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(s)}.`)}function Ty(t,e){if(!Array.isArray(t)||t.length===0)throw new J(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function M_(t,e){const s=function(i,o){for(const a of i)for(const c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class V_{convertValue(e,s="none"){switch(Kn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw ae()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return ci(e,(i,o)=>{r[i]=this.convertValue(o,s)}),r}convertVectorValue(e){var s,r,i;const o=(i=(r=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>We(a.doubleValue));return new Yu(o)}convertGeoPoint(e){return new Ku(We(e.latitude),We(e.longitude))}convertArray(e,s){return(e.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(e,s){switch(s){case"previous":const r=hf(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const s=rn(e);return new et(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=Pe.fromString(e);Te(X1(r));const i=new to(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(s)||xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qf extends L_{constructor(e,s,r,i,o,a){super(e,s,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new ca(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Zu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class ca extends qf{data(e={}){return super.data(e)}}class F_{constructor(e,s,r,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new Di(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(r=>{e.call(s,new ca(this._firestore,this._userDataWriter,r.key,r,new Di(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new J(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(c=>{const u=new ca(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const u=new ca(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Di(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,m=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:RP(c.type),doc:u,oldIndex:d,newIndex:m}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function RP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t){t=xs(t,At);const e=xs(t.firestore,dn);return bP(Qu(e),t._key).then(s=>DP(e,t,s))}class q_ extends V_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,s)}}function Jt(t){t=xs(t,jr);const e=xs(t.firestore,dn),s=Qu(e),r=new q_(e);return PP(t._query),wP(s,t._query).then(i=>new F_(e,r,t,i))}function Mr(t,e,s){t=xs(t,At);const r=xs(t.firestore,dn),i=O_(t.converter,e,s);return hl(r,[C_(Ju(r),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,ms.none())])}function Dn(t,e,s,...r){t=xs(t,At);const i=xs(t.firestore,dn),o=Ju(i);let a;return a=typeof(e=Me(e))=="string"||e instanceof ll?kP(o,"updateDoc",t._key,e,s,r):TP(o,"updateDoc",t._key,e),hl(i,[a.toMutation(t._key,ms.exists(!0))])}function ua(t){return hl(xs(t.firestore,dn),[new yf(t._key,ms.none())])}function Os(t,e){const s=xs(t.firestore,dn),r=Fe(t),i=O_(t.converter,e);return hl(s,[C_(Ju(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ms.exists(!1))]).then(()=>r)}function hl(t,e){return function(r,i){const o=new cr;return r.asyncQueue.enqueueAndForget(async()=>aP(await vP(r),i,o)),o.promise}(Qu(t),e)}function DP(t,e,s){const r=s.docs.get(e._key),i=new q_(t);return new qf(t,i,e._key,r,new Di(s.hasPendingWrites,s.fromCache),e.converter)}function _n(){return new Df("serverTimestamp")}(function(e,s=!0){(function(i){mo=i})(ho),$s(new As("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),c=new dn(new FA(r.getProvider("auth-internal")),new BA(r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new J(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(d.options.projectId,m)}(a,i),a);return o=Object.assign({useFetchStreams:s},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),hs(Bx,"4.7.0",e),hs(Bx,"4.7.0","esm2017")})();const U_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:V_,Bytes:Yn,CollectionReference:ur,DocumentReference:At,DocumentSnapshot:qf,FieldPath:ll,FieldValue:cl,Firestore:dn,FirestoreError:J,GeoPoint:Ku,Query:jr,QueryCompositeFilterConstraint:td,QueryConstraint:ed,QueryDocumentSnapshot:ca,QueryFieldFilterConstraint:dl,QueryLimitConstraint:rd,QueryOrderByConstraint:sd,QuerySnapshot:F_,SnapshotMetadata:Di,Timestamp:et,VectorValue:Yu,_AutoId:cf,_ByteString:ct,_DatabaseId:to,_DocumentKey:re,_EmptyAuthCredentialsProvider:b1,_FieldPath:at,_cast:xs,_logWarn:Wn,_validateIsNotUsedTogether:E_,addDoc:Os,collection:Ge,connectFirestoreEmulator:S_,deleteDoc:ua,doc:Fe,ensureFirestoreConfigured:Qu,executeWrite:hl,getDoc:or,getDocs:Jt,getFirestore:T_,limit:cu,orderBy:Ff,query:In,serverTimestamp:_n,setDoc:Mr,updateDoc:Dn,where:Of},Symbol.toStringTag,{value:"Module"})),z_="@firebase/installations",Uf="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=1e4,$_=`w:${Uf}`,G_="FIS_v2",LP="https://firebaseinstallations.googleapis.com/v1",MP=60*60*1e3,VP="installations",OP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Jn=new oi(VP,OP,FP);function H_(t){return t instanceof Ps&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_({projectId:t}){return`${LP}/projects/${t}/installations`}function Q_(t){return{token:t.token,requestStatus:2,expiresIn:UP(t.expiresIn),creationTime:Date.now()}}async function K_(t,e){const r=(await e.json()).error;return Jn.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Y_({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qP(t,{refreshToken:e}){const s=Y_(t);return s.append("Authorization",zP(e)),s}async function J_(t){const e=await t();return e.status>=500&&e.status<600?t():e}function UP(t){return Number(t.replace("s","000"))}function zP(t){return`${G_} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const r=W_(t),i=Y_(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:s,authVersion:G_,appId:t.appId,sdkVersion:$_},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await J_(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||s,registrationStatus:2,refreshToken:d.refreshToken,authToken:Q_(d.authToken)}}else throw await K_("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=/^[cdef][\w-]{21}$/,Bm="";function HP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=WP(t);return GP.test(s)?s:Bm}catch{return Bm}}function WP(t){return $P(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map;function ej(t,e){const s=nd(t);tj(s,e),QP(s,e)}function tj(t,e){const s=Z_.get(t);if(s)for(const r of s)r(e)}function QP(t,e){const s=KP();s&&s.postMessage({key:t,fid:e}),YP()}let An=null;function KP(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=t=>{tj(t.data.key,t.data.fid)}),An}function YP(){Z_.size===0&&An&&(An.close(),An=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="firebase-installations-database",XP=1,Xn="firebase-installations-store";let oh=null;function zf(){return oh||(oh=Nw(JP,XP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xn)}}})),oh}async function uu(t,e){const s=nd(t),i=(await zf()).transaction(Xn,"readwrite"),o=i.objectStore(Xn),a=await o.get(s);return await o.put(e,s),await i.done,(!a||a.fid!==e.fid)&&ej(t,e.fid),e}async function sj(t){const e=nd(t),r=(await zf()).transaction(Xn,"readwrite");await r.objectStore(Xn).delete(e),await r.done}async function id(t,e){const s=nd(t),i=(await zf()).transaction(Xn,"readwrite"),o=i.objectStore(Xn),a=await o.get(s),c=e(a);return c===void 0?await o.delete(s):await o.put(c,s),await i.done,c&&(!a||a.fid!==c.fid)&&ej(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bf(t){let e;const s=await id(t.appConfig,r=>{const i=ZP(r),o=eR(t,i);return e=o.registrationPromise,o.installationEntry});return s.fid===Bm?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function ZP(t){const e=t||{fid:HP(),registrationStatus:0};return rj(e)}function eR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Jn.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=tR(t,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sR(t)}:{installationEntry:e}}async function tR(t,e){try{const s=await BP(t,e);return uu(t.appConfig,s)}catch(s){throw H_(s)&&s.customData.serverCode===409?await sj(t.appConfig):await uu(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function sR(t){let e=await ky(t.appConfig);for(;e.registrationStatus===1;)await X_(100),e=await ky(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await Bf(t);return r||s}return e}function ky(t){return id(t,e=>{if(!e)throw Jn.create("installation-not-found");return rj(e)})}function rj(t){return rR(t)?{fid:t.fid,registrationStatus:0}:t}function rR(t){return t.registrationStatus===1&&t.registrationTime+B_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR({appConfig:t,heartbeatServiceProvider:e},s){const r=iR(t,s),i=qP(t,s),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:$_,appId:t.appId}},c={method:"POST",headers:i,body:JSON.stringify(a)},u=await J_(()=>fetch(r,c));if(u.ok){const d=await u.json();return Q_(d)}else throw await K_("Generate Auth Token",u)}function iR(t,{fid:e}){return`${W_(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $f(t,e=!1){let s;const r=await id(t.appConfig,o=>{if(!nj(o))throw Jn.create("not-registered");const a=o.authToken;if(!e&&lR(a))return o;if(a.requestStatus===1)return s=oR(t,e),o;{if(!navigator.onLine)throw Jn.create("app-offline");const c=uR(o);return s=aR(t,c),c}});return s?await s:r.authToken}async function oR(t,e){let s=await Iy(t.appConfig);for(;s.authToken.requestStatus===1;)await X_(100),s=await Iy(t.appConfig);const r=s.authToken;return r.requestStatus===0?$f(t,e):r}function Iy(t){return id(t,e=>{if(!nj(e))throw Jn.create("not-registered");const s=e.authToken;return dR(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function aR(t,e){try{const s=await nR(t,e),r=Object.assign(Object.assign({},e),{authToken:s});return await uu(t.appConfig,r),s}catch(s){if(H_(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await sj(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uu(t.appConfig,r)}throw s}}function nj(t){return t!==void 0&&t.registrationStatus===2}function lR(t){return t.requestStatus===2&&!cR(t)}function cR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+MP}function uR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function dR(t){return t.requestStatus===1&&t.requestTime+B_<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(t){const e=t,{installationEntry:s,registrationPromise:r}=await Bf(e);return r?r.catch(console.error):$f(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e=!1){const s=t;return await pR(s),(await $f(s,e)).token}async function pR(t){const{registrationPromise:e}=await Bf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){if(!t||!t.options)throw ah("App Configuration");if(!t.name)throw ah("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw ah(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ah(t){return Jn.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="installations",gR="installations-internal",xR=t=>{const e=t.getProvider("app").getImmediate(),s=fR(e),r=ai(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},yR=t=>{const e=t.getProvider("app").getImmediate(),s=ai(e,ij).getImmediate();return{getId:()=>hR(s),getToken:i=>mR(s,i)}};function vR(){$s(new As(ij,xR,"PUBLIC")),$s(new As(gR,yR,"PRIVATE"))}vR();hs(z_,Uf);hs(z_,Uf,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du="analytics",bR="firebase_id",wR="origin",_R=60*1e3,jR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new Ru("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ss=new oi("analytics","Analytics",NR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t){if(!t.startsWith(Gf)){const e=ss.create("invalid-gtag-resource",{gtagURL:t});return Wt.warn(e.message),""}return t}function oj(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function SR(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function TR(t,e){const s=SR("firebase-js-sdk-policy",{createScriptURL:ER}),r=document.createElement("script"),i=`${Gf}?l=${t}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function IR(t,e,s,r,i,o){const a=r[i];try{if(a)await e[a];else{const u=(await oj(s)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(c){Wt.error(c)}t("config",i,o)}async function AR(t,e,s,r,i){try{let o=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const c=await oj(s);for(const u of a){const d=c.find(p=>p.measurementId===u),m=d&&e[d.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){Wt.error(o)}}function CR(t,e,s,r){async function i(o,...a){try{if(o==="event"){const[c,u]=a;await AR(t,e,s,c,u)}else if(o==="config"){const[c,u]=a;await IR(t,e,s,r,c,u)}else if(o==="consent"){const[c,u]=a;t("consent",c,u)}else if(o==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(o==="set"){const[c]=a;t("set",c)}else t(o,...a)}catch(c){Wt.error(c)}}return i}function PR(t,e,s,r,i){let o=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=CR(o,t,e,s),{gtagCore:o,wrappedGtag:window[i]}}function RR(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Gf)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=30,LR=1e3;class MR{constructor(e={},s=LR){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const aj=new MR;function VR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function OR(t){var e;const{appId:s,apiKey:r}=t,i={method:"GET",headers:VR(r)},o=jR.replace("{app-id}",s),a=await fetch(o,i);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw ss.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function FR(t,e=aj,s){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw ss.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw ss.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new zR;return setTimeout(async()=>{c.abort()},_R),lj({appId:r,apiKey:i,measurementId:o},a,c,e)}async function lj(t,{throttleEndTimeMillis:e,backoffCount:s},r,i=aj){var o;const{appId:a,measurementId:c}=t;try{await qR(r,e)}catch(u){if(c)return Wt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await OR(t);return i.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!UR(d)){if(i.deleteThrottleMetadata(a),c)return Wt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const m=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?hx(s,i.intervalMillis,DR):hx(s,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+m,backoffCount:s+1};return i.setThrottleMetadata(a,p),Wt.debug(`Calling attemptFetch again in ${m} millis`),lj(t,p,r,i)}}function qR(t,e){return new Promise((s,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(s,i);t.addEventListener(()=>{clearTimeout(o),r(ss.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UR(t){if(!(t instanceof Ps)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class zR{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function BR(t,e,s,r,i){if(i&&i.global){t("event",s,r);return}else{const o=await e,a=Object.assign(Object.assign({},r),{send_to:o});t("event",s,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $R(){if(Hp())try{await Wp()}catch(t){return Wt.warn(ss.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Wt.warn(ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function GR(t,e,s,r,i,o,a){var c;const u=FR(t);u.then(y=>{s[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Wt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Wt.error(y)),e.push(u);const d=$R().then(y=>{if(y)return r.getId()}),[m,p]=await Promise.all([u,d]);RR(o)||TR(o,m.measurementId),i("js",new Date);const g=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return g[wR]="firebase",g.update=!0,p!=null&&(g[bR]=p),i("config",m.measurementId,g),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.app=e}_delete(){return delete da[this.app.options.appId],Promise.resolve()}}let da={},Ay=[];const Cy={};let lh="dataLayer",WR="gtag",Py,cj,Ry=!1;function QR(){const t=[];if(Gp()&&t.push("This is a browser extension environment."),ww()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),s=ss.create("invalid-analytics-context",{errorInfo:e});Wt.warn(s.message)}}function KR(t,e,s){QR();const r=t.options.appId;if(!r)throw ss.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Wt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ss.create("no-api-key");if(da[r]!=null)throw ss.create("already-exists",{id:r});if(!Ry){kR(lh);const{wrappedGtag:o,gtagCore:a}=PR(da,Ay,Cy,lh,WR);cj=o,Py=a,Ry=!0}return da[r]=GR(t,Ay,Cy,e,Py,lh,s),new HR(t)}function YR(t=Kp()){t=Me(t);const e=ai(t,du);return e.isInitialized()?e.getImmediate():JR(t)}function JR(t,e={}){const s=ai(t,du);if(s.isInitialized()){const i=s.getImmediate();if(Ca(e,s.getOptions()))return i;throw ss.create("already-initialized")}return s.initialize({options:e})}async function XR(){if(Gp()||!ww()||!Hp())return!1;try{return await Wp()}catch{return!1}}function ZR(t,e,s,r){t=Me(t),BR(cj,da[t.app.options.appId],e,s,r).catch(i=>Wt.error(i))}const Dy="@firebase/analytics",Ly="0.10.7";function e5(){$s(new As(du,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return KR(r,i,s)},"PUBLIC")),$s(new As("analytics-internal",t,"PRIVATE")),hs(Dy,Ly),hs(Dy,Ly,"esm2017");function t(e){try{const s=e.getProvider(du).getImmediate();return{logEvent:(r,i,o)=>ZR(s,r,i,o)}}catch(s){throw ss.create("interop-component-reg-failed",{reason:s})}}}e5();const t5={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},Hf=Ew(t5),le=T_(Hf),Tt=DA(Hf);typeof window<"u"&&XR().then(t=>{t&&YR(Hf)});const uj=T.createContext(void 0),nt=()=>{const t=T.useContext(uj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ch=async t=>{var r,i;if(!t)return null;const s=(await or(Fe(le,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(s==null?void 0:s.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(s==null?void 0:s.isAdmin)||!1,photoURL:t.photoURL||(s==null?void 0:s.photoURL),createdAt:(i=s==null?void 0:s.createdAt)==null?void 0:i.toDate()}},s5=({children:t})=>{const[e,s]=T.useState(null),[r,i]=T.useState(!0);T.useEffect(()=>{const y=jI(Tt,async E=>{if(E){const A=Fe(le,"users",E.uid);if(!(await or(A)).exists()){const w={uid:E.uid,email:E.email||"",emailVerified:E.emailVerified,isAdmin:!1,createdAt:_n(),...E.displayName?{displayName:E.displayName}:{},...E.photoURL?{photoURL:E.photoURL}:{}};await Mr(A,w)}const b=await ch(E);s(b)}else s(null);i(!1)});return()=>y()},[]);const g={currentUser:e,loading:r,register:async(y,E,A)=>{try{const R=await Xw(Tt,y,E),{user:b}=R;await e1(b,{displayName:A}),await Cx(b);const w={uid:b.uid,email:b.email||"",emailVerified:b.emailVerified,isAdmin:!1,createdAt:_n(),updatedAt:_n(),...A?{displayName:A}:{},...b.photoURL?{photoURL:b.photoURL}:{}};await Mr(Fe(le,"users",b.uid),w);const C=await ch(b);return s(C),b}catch(R){throw console.error("Erreur lors de l'inscription:",R),R}},login:async(y,E)=>{try{const R=(await Zw(Tt,y,E)).user,b=Fe(le,"users",R.uid);(await or(b)).exists()||await Mr(b,{uid:R.uid,email:R.email,displayName:R.displayName,emailVerified:R.emailVerified,isAdmin:!1,createdAt:_n(),photoURL:R.photoURL??void 0});const C=await ch(R);return s(C),C}catch(A){throw console.error("Erreur de connexion:",A),A}},loginWithGoogle:async()=>{const y=new Zs;let E=null;try{E=(await Dx(Tt,y)).user,console.log("[Google] Utilisateur connecté:",E);const R=Fe(le,"users",E.uid),b=await or(R);console.log("[Google] Document utilisateur existe:",b.exists()),b.exists()||(await Mr(R,{uid:E.uid,email:E.email,displayName:E.displayName,emailVerified:E.emailVerified,isAdmin:!1,createdAt:_n(),photoURL:E.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const w={uid:E.uid,email:E.email||"",displayName:E.displayName||"",emailVerified:E.emailVerified,isAdmin:b.exists()?b.data().isAdmin:!1,createdAt:E.metadata.creationTime?new Date(E.metadata.creationTime):void 0,photoURL:E.photoURL??void 0};return console.log("[Google] AppUser retourné:",w),w}catch(A){throw console.error("[Google] Erreur dans loginWithGoogle:",A,E),A}},loginWithGithub:async()=>{const y=new er;let E=null;try{E=(await Dx(Tt,y)).user,console.log("[GitHub] Utilisateur connecté:",E);const R=Fe(le,"users",E.uid),b=await or(R);console.log("[GitHub] Document utilisateur existe:",b.exists()),b.exists()||(await Mr(R,{uid:E.uid,email:E.email,displayName:E.displayName,emailVerified:E.emailVerified,isAdmin:!1,createdAt:_n(),photoURL:E.photoURL??void 0}),console.log("[GitHub] Document utilisateur créé dans Firestore"));const w={uid:E.uid,email:E.email||"",displayName:E.displayName||"",emailVerified:E.emailVerified,isAdmin:b.exists()?b.data().isAdmin:!1,createdAt:E.metadata.creationTime?new Date(E.metadata.creationTime):void 0,photoURL:E.photoURL??void 0};return console.log("[GitHub] AppUser retourné:",w),w}catch(A){throw console.error("[GitHub] Erreur dans loginWithGithub:",A,E),A}},logout:async()=>{try{await NI(Tt),s(null)}catch(y){throw console.error("Erreur lors de la déconnexion:",y),y}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(Tt.currentUser)try{await Cx(Tt.currentUser)}catch(y){throw console.error("Erreur lors de l'envoi de l'email de vérification:",y),y}}};return n.jsx(uj.Provider,{value:g,children:t})},dj=T.createContext(void 0),di=()=>{const t=T.useContext(dj);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},r5=({children:t})=>{const[e,s]=T.useState([]),[r,i]=T.useState([]),[o,a]=T.useState([]),[c,u]=T.useState(!0);T.useEffect(()=>{(async()=>{u(!0);const v=await Jt(Ge(le,"guideSections"));i(v.docs.map(I=>({id:I.id,...I.data()})));const k=await Jt(Ge(le,"resources"));s(k.docs.map(I=>({id:I.id,...I.data()})));const N=await Jt(Ge(le,"faq"));a(N.docs.map(I=>({id:I.id,...I.data()}))),u(!1)})()},[]);const d=async()=>{const x=await Jt(Ge(le,"guideSections"));i(x.docs.map(N=>({id:N.id,...N.data()})));const v=await Jt(Ge(le,"resources"));s(v.docs.map(N=>({id:N.id,...N.data()})));const k=await Jt(Ge(le,"faq"));a(k.docs.map(N=>({id:N.id,...N.data()})))},j={resources:e,guideSections:r,faqItems:o,addResource:async x=>{await Os(Ge(le,"resources"),x),await d()},updateResource:async(x,v)=>{await Dn(Fe(le,"resources",x),v),await d()},deleteResource:async x=>{await ua(Fe(le,"resources",x)),await d()},addGuideSection:async x=>{await Os(Ge(le,"guideSections"),x),await d()},updateGuideSection:async(x,v)=>{await Dn(Fe(le,"guideSections",x),v),await d()},deleteGuideSection:async x=>{await ua(Fe(le,"guideSections",x)),await d()},addFAQItem:async x=>{await Os(Ge(le,"faq"),x),await d()},updateFAQItem:async(x,v)=>{await Dn(Fe(le,"faq",x),v),await d()},deleteFAQItem:async x=>{await ua(Fe(le,"faq",x)),await d()},getResourcesByPhase:x=>e.filter(v=>v.phase===x),getGuideSectionsByPhase:x=>r.filter(v=>v.phase===x).sort((v,k)=>v.order-k.order),getFAQItemsByPhase:x=>o.filter(v=>v.phase===x),searchResources:x=>{const v=x.toLowerCase();return e.filter(k=>k.title.toLowerCase().includes(v)||k.description.toLowerCase().includes(v)||k.category.toLowerCase().includes(v))}};return c?n.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):n.jsx(dj.Provider,{value:j,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var n5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const s=T.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:c="",children:u,...d},m)=>T.createElement("svg",{ref:m,...n5,width:i,height:i,stroke:r,strokeWidth:a?Number(o)*24/Number(i):o,className:["lucide",`lucide-${i5(t)}`,c].join(" "),...d},[...e.map(([p,g])=>T.createElement(p,g)),...Array.isArray(u)?u:[u]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=K("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=K("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=K("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=K("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=K("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=K("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=K("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=K("Copyright",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=K("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=K("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=K("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=K("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=K("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=K("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uh=K("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=K("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=K("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=K("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=K("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=K("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=K("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=K("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=K("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=K("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=K("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=K("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=K("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=K("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=K("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=K("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=K("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),q5=()=>{var p,g;const{currentUser:t,logout:e,isAdmin:s}=nt(),[r,i]=T.useState(!1),[o,a]=T.useState(!1),[c,u]=T.useState(!1),d=ii();T.useEffect(()=>{const y=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]),T.useEffect(()=>{i(!1),a(!1)},[d]);const m=async()=>{try{await e()}catch(y){console.error("Logout failed",y)}};return n.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:n.jsxs("div",{className:"container mx-auto px-4 py-3",children:[n.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[n.jsx(Q,{to:"/",className:"flex items-center",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:n.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),n.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),n.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&n.jsxs(n.Fragment,{children:[n.jsx(Q,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),n.jsx(Q,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),n.jsx(Q,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n.jsx(Q,{to:"/tutorial",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Tutoriel"}),n.jsx(Q,{to:"/help",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:n.jsxs("span",{className:"flex items-center",children:[n.jsx(ei,{className:"w-4 h-4 mr-1"}),"Aide"]})}),s()&&n.jsx(Q,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),n.jsx("div",{className:"hidden md:flex items-center",children:t?n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>a(!o),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),n.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),n.jsx(Mn,{className:"w-4 h-4"})]}),o&&n.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[n.jsxs(Q,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[n.jsx(hu,{className:"w-4 h-4 mr-2"}),n.jsx("span",{children:"Profil"})]}),s()&&n.jsxs(Q,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[n.jsx(vj,{className:"w-4 h-4 mr-2"}),n.jsx("span",{children:"Administration"})]}),n.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[n.jsx(Oy,{className:"w-4 h-4 mr-2"}),n.jsx("span",{children:"Déconnexion"})]})]})]}):n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Q,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),n.jsx(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),n.jsx("button",{className:"md:hidden",onClick:()=>i(!r),children:r?n.jsx(si,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):n.jsx(P5,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),r&&n.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:n.jsx("div",{className:"flex flex-col space-y-4",children:t?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:n.jsx("span",{className:"text-white font-medium text-sm",children:(((p=t.displayName)==null?void 0:p.charAt(0))||((g=t.email)==null?void 0:g.charAt(0))||"U").toUpperCase()})}),n.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),n.jsxs(Q,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[n.jsx(hu,{className:"w-4 h-4 mr-2"}),"Profil"]}),n.jsx(Q,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),n.jsx(Q,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),n.jsx(Q,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n.jsxs(Q,{to:"/tutorial",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[n.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Tutoriel"]}),n.jsxs(Q,{to:"/help",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[n.jsx(ei,{className:"w-4 h-4 mr-2"}),"Aide"]}),s()&&n.jsx(Q,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),n.jsxs("button",{onClick:m,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[n.jsx(Oy,{className:"w-4 h-4 mr-2"}),n.jsx("span",{children:"Déconnexion"})]})]}):n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsx(Q,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),n.jsx(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},U5=()=>n.jsx("div",{className:"bg-gray-100 py-3 border-t border-gray-200",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex flex-wrap justify-center text-xs text-gray-500 gap-4",children:[n.jsx(Q,{to:"/legal/cgu",className:"hover:text-gray-700 hover:underline",children:"Conditions Générales d'Utilisation"}),n.jsx(Q,{to:"/legal/privacy-policy",className:"hover:text-gray-700 hover:underline",children:"Politique de Confidentialité"}),n.jsx(Q,{to:"/legal/legal-notice",className:"hover:text-gray-700 hover:underline",children:"Mentions Légales"}),n.jsx(Q,{to:"/legal/moderation-charter",className:"hover:text-gray-700 hover:underline",children:"Charte de Modération"}),n.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),localStorage.removeItem("cookieConsent"),window.location.reload()},className:"hover:text-gray-700 hover:underline cursor-pointer",children:"Paramètres des cookies"})]})})}),z5=()=>{const t=new Date().getFullYear();return n.jsxs("footer",{className:"bg-blue-900 text-white",children:[n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"col-span-1 md:col-span-1",children:[n.jsxs(Q,{to:"/",className:"flex items-center",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:n.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),n.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),n.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(Q,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),n.jsx("li",{children:n.jsx(Q,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),n.jsx("li",{children:n.jsx(Q,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx(Q,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),n.jsx("li",{children:n.jsx(Q,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),n.jsx("li",{children:n.jsx(Q,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),n.jsxs("div",{className:"col-span-1",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Gi,{className:"w-4 h-4 mr-2"}),n.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),n.jsxs("div",{className:"flex space-x-4 mt-4",children:[n.jsx("a",{href:"https://www.linkedin.com/in/abdoul-ahad-mback%C3%A9-diouf-5b04b4213/",className:"text-blue-200 hover:text-white transition-colors",children:n.jsx(I5,{className:"w-5 h-5"})}),n.jsx("a",{href:"https://github.com/AbdoulDiouf2",className:"text-blue-200 hover:text-white transition-colors",children:n.jsx(j5,{className:"w-5 h-5"})})]})]})]}),n.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[n.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),n.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",n.jsx(N5,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]}),n.jsx(U5,{})]})},yi=({children:t})=>{const{currentUser:e,loading:s}=nt();return s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?n.jsx(n.Fragment,{children:t}):n.jsx(gm,{to:"/login"})},Ls=({children:t})=>{const{currentUser:e,loading:s,isAdmin:r}=nt();return s?n.jsx("div",{className:"flex justify-center items-center min-h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?n.jsx(n.Fragment,{children:t}):n.jsx(gm,{to:"/dashboard"}):n.jsx(gm,{to:"/login"})},B5=()=>{const[t,e]=T.useState({essential:!0,analytics:!1,marketing:!1,acceptedAt:null}),[s,r]=T.useState(!1),[i,o]=T.useState(!1);T.useEffect(()=>{const p=localStorage.getItem("cookieConsent");if(p)try{const g=JSON.parse(p);e({...g,acceptedAt:g.acceptedAt?new Date(g.acceptedAt):null}),r(!1)}catch(g){console.error("Erreur lors de la lecture du consentement:",g),r(!0)}else r(!0)},[]);const a=p=>{e(g=>({...g,[p]:!g[p]}))},c=()=>{const p={essential:!0,analytics:!0,marketing:!0,acceptedAt:new Date};e(p),m(p),r(!1),o(!1)},u=()=>{const p={essential:!0,analytics:!1,marketing:!1,acceptedAt:new Date};e(p),m(p),r(!1),o(!1)},d=()=>{const p={...t,acceptedAt:new Date};e(p),m(p),r(!1),o(!1)},m=p=>{localStorage.setItem("cookieConsent",JSON.stringify(p)),p.analytics&&console.log("Analytics activé"),p.marketing&&console.log("Marketing activé")};return!s&&!i?null:n.jsxs(n.Fragment,{children:[i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),s&&!i&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-40",children:n.jsx("div",{className:"container mx-auto",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[n.jsxs("div",{className:"flex-grow",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Votre vie privée"}),n.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Nous utilisons des cookies pour améliorer votre expérience sur notre site, personnaliser le contenu et analyser notre trafic. Vous pouvez choisir d'accepter tous les cookies ou personnaliser vos préférences."}),n.jsx("div",{className:"mt-1",children:n.jsx(Q,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline text-sm",target:"_blank",children:"En savoir plus sur notre politique de confidentialité"})})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsx("button",{onClick:()=>o(!0),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Personnaliser"}),n.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refuser"}),n.jsx("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Tout accepter"})]})]})})}),i&&n.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-50 max-h-[80vh] overflow-y-auto",children:n.jsxs("div",{className:"container mx-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Paramètres de confidentialité"}),n.jsx("button",{onClick:()=>o(!1),className:"text-gray-500 hover:text-gray-700",children:n.jsx(si,{size:24})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies essentiels"}),n.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[n.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-not-allowed right-0 z-10 border-gray-300 transition-all duration-300"}),n.jsx("label",{className:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-not-allowed transition-all duration-300"})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies sont nécessaires au fonctionnement du site et ne peuvent pas être désactivés. Ils sont généralement définis en réponse à des actions que vous effectuez, comme définir vos préférences de confidentialité, vous connecter ou remplir des formulaires."})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies d'analyse"}),n.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[n.jsx("input",{type:"checkbox",checked:t.analytics,onChange:()=>a("analytics"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.analytics?"border-white":"border-gray-300"}`}),n.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.analytics?"bg-blue-600":"bg-gray-300"}`})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies nous permettent de compter les visites et les sources de trafic afin de mesurer et d'améliorer les performances de notre site. Ils nous aident à savoir quelles pages sont les plus et les moins populaires, et à voir comment les visiteurs se déplacent sur le site."})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies marketing"}),n.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[n.jsx("input",{type:"checkbox",checked:t.marketing,onChange:()=>a("marketing"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.marketing?"border-white":"border-gray-300"}`}),n.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.marketing?"bg-blue-600":"bg-gray-300"}`})]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies peuvent être définis via notre site par nos partenaires publicitaires. Ils peuvent être utilisés pour établir un profil de vos intérêts et vous proposer des publicités pertinentes sur d'autres sites."})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),n.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Enregistrer mes préférences"})]})]})})]})},$5=()=>{const[t,e]=T.useState(!1),s=()=>{window.pageYOffset>300?e(!0):e(!1)},r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return T.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[]),n.jsx(n.Fragment,{children:t&&n.jsx("button",{onClick:r,className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg z-50 transition-all duration-300 ease-in-out transform hover:scale-110 focus:outline-none","aria-label":"Retour en haut",title:"Retour en haut",children:n.jsx(c5,{size:20})})})},qy=[{id:1,name:"ESIGELEC",logoUrl:"https://www.francemobilites.fr/sites/frenchmobility/files/images/2021/06/esigelec-rouen-2baselines_0.png",alt:"Logo ESIGELEC"},{id:2,name:"CPS Dakar",logoUrl:"https://www.linkedin.com/dms/prv/image/v2/D5606AQElmOjZWkdvVQ/messaging-image-720/B56ZbuZEzhHgAg-/0/1747756287373?m=AQKVAjHWySZCJgAAAZbuZodpjb5LvuiQx9ZVPlT0orYGHXGSu06cbQo20w&ne=1&v=beta&t=aV_zWSMv5x9jCsPpEsc7DAEo1kBvCNvQWpufEYl-iEo",alt:"Logo CPS Dakar"},{id:3,name:"ESMT",logoUrl:"https://burkina24.com/wp-content/uploads/2023/05/ESMT-logo.png",alt:"Logo ESMT"},{id:4,name:"College Sacré Coeur",logoUrl:"https://www.courssacrecoeur.info/images/logo.gif",alt:"Logo Collège Sacré Coeur"}],G5=()=>{const t=[...qy,...qy];return n.jsx("div",{className:"bg-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Les écoles partenaires"}),n.jsx("div",{className:"infinite-logo-container",children:n.jsx("div",{className:"infinite-logo-scroll",children:t.map((e,s)=>n.jsx("div",{className:"logo-item",children:n.jsx("div",{className:"flex items-center justify-center h-40 bg-white rounded-lg shadow-sm p-4",children:n.jsx("img",{src:e.logoUrl,alt:e.alt,className:"max-h50 max-w-full object-contain"})})},`${e.id}-${s}`))})})]})})},H5=()=>{const{currentUser:t}=nt();return n.jsxs("div",{className:"flex flex-col min-h-screen",children:[n.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[n.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[n.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide pour passer de CPS à l'ESIGELEC"}),n.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),n.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?n.jsxs(Q,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",n.jsx(My,{className:"ml-2 w-5 h-5"})]}):n.jsxs(n.Fragment,{children:[n.jsxs(Q,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",n.jsx(My,{className:"ml-2 w-5 h-5"})]}),n.jsx(Q,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),n.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:n.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),n.jsx("section",{className:"py-16 bg-white",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(O5,{className:"w-7 h-7 text-blue-900"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),n.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(d5,{className:"w-7 h-7 text-blue-900"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),n.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(C5,{className:"w-7 h-7 text-blue-900"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),n.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[n.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(us,{className:"w-7 h-7 text-blue-900"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),n.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),n.jsx("section",{className:"py-16 bg-gray-50",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),n.jsxs("div",{className:"flex flex-col space-y-6",children:[n.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:n.jsxs("div",{className:"flex flex-col md:flex-row",children:[n.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),n.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),n.jsx("div",{className:"md:w-2/3 p-6",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),n.jsx("span",{children:"Préparation dossier Campus France"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),n.jsx("span",{children:"Candidature ESIGELEC"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),n.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:n.jsxs("div",{className:"flex flex-col md:flex-row",children:[n.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),n.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),n.jsx("div",{className:"md:w-2/3 p-6",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),n.jsx("span",{children:"Demande de visa étudiant"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),n.jsx("span",{children:"Recherche de logement"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),n.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),n.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:n.jsxs("div",{className:"flex flex-col md:flex-row",children:[n.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[n.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),n.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),n.jsx("div",{className:"md:w-2/3 p-6",children:n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),n.jsx("span",{children:"Transport vers la France"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),n.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),n.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),n.jsx("section",{className:"py-16 bg-gradient-to-r from-green-800 to-green-700 text-white",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),n.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),n.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?n.jsx(Q,{to:"/dashboard",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):n.jsxs(n.Fragment,{children:[n.jsx(Q,{to:"/register",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),n.jsx(Q,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})}),n.jsx(G5,{})]})},W5=()=>{const[t,e]=T.useState(""),[s,r]=T.useState(""),[i,o]=T.useState(!1),[a,c]=T.useState(""),[u,d]=T.useState(!1),[m,p]=T.useState(!1),[g,y]=T.useState(!1),E=os(),{login:A,loginWithGoogle:R,loginWithGithub:b}=nt();Ha.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const w=async L=>{L.preventDefault();try{c(""),d(!0),await A(t,s),E("/dashboard")}catch(O){c("Identifiants invalides. Veuillez réessayer."),console.error(O)}finally{d(!1)}},C=async()=>{c(""),p(!0);try{await R(),E("/dashboard")}catch(L){let O="Erreur lors de la connexion avec Google.";L&&typeof L=="object"&&"message"in L&&(O+=`
${L.message}`),c(O),console.error(L)}finally{p(!1)}},D=async()=>{c(""),y(!0);try{await b(),E("/dashboard")}catch(L){let O="Erreur lors de la connexion avec GitHub.";L&&typeof L=="object"&&"message"in L&&(O+=`
${L.message}`),c(O),console.error(L)}finally{y(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:n.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",n.jsx(Q,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),n.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:n.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:n.jsx("div",{className:"flex",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm text-red-700",children:a})})})}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("button",{type:"button",onClick:C,disabled:m,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${m?"opacity-70 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:n.jsxs("g",{children:[n.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),n.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),n.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),n.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),m?"Connexion Google...":"Se connecter avec Google"]}),n.jsxs("button",{type:"button",onClick:D,disabled:g,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${g?"opacity-70 cursor-not-allowed":""}`,children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),g?"Connexion GitHub...":"Se connecter avec GitHub"]})]}),n.jsxs("form",{className:"space-y-6",onSubmit:w,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),n.jsx("div",{className:"mt-1",children:n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:L=>e(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),n.jsx("div",{className:"mt-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:L=>r(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),n.jsx("button",{type:"button",tabIndex:-1,onClick:()=>o(L=>!L),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":i?"Masquer le mot de passe":"Afficher le mot de passe",children:i?n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("div",{className:"text-sm",children:n.jsx(Q,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},Q5=()=>{const[t,e]=T.useState(""),[s,r]=T.useState(""),[i,o]=T.useState(""),[a,c]=T.useState(""),[u,d]=T.useState(!1),[m,p]=T.useState(!1),[g,y]=T.useState(""),[E,A]=T.useState(!1),[R,b]=T.useState(!1),[w,C]=T.useState(!1),D=os(),{register:L,loginWithGoogle:O,loginWithGithub:j}=nt(),x=async()=>{y(""),b(!0);try{await O(),D("/dashboard")}catch(N){y("Erreur lors de l'inscription avec Google"),console.error(N)}finally{b(!1)}},v=async()=>{y(""),C(!0);try{await j(),D("/dashboard")}catch(N){y("Erreur lors de l'inscription avec GitHub"),console.error(N)}finally{C(!1)}},k=async N=>{if(N.preventDefault(),i!==a)return y("Les mots de passe ne correspondent pas");try{y(""),A(!0),await L(s,i,t),D("/dashboard")}catch{y("Erreur lors de la création du compte"),console.error()}finally{A(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:n.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),n.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",n.jsx(Q,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),n.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:n.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:n.jsx("div",{className:"flex",children:n.jsx("div",{children:n.jsx("p",{className:"text-sm text-red-700",children:g})})})}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("button",{type:"button",onClick:x,disabled:R,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${R?"opacity-70 cursor-not-allowed":""}`,children:[n.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:n.jsxs("g",{children:[n.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),n.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),n.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),n.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),R?"Inscription Google en cours...":"S'inscrire avec Google"]}),n.jsxs("button",{type:"button",onClick:v,disabled:w,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"opacity-70 cursor-not-allowed":""}`,children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:n.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),w?"Inscription GitHub en cours...":"S'inscrire avec GitHub"]})]}),n.jsxs("form",{className:"space-y-6",onSubmit:k,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),n.jsx("div",{className:"mt-1",children:n.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:N=>e(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),n.jsx("div",{className:"mt-1",children:n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:N=>r(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),n.jsx("div",{className:"mt-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:N=>o(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),n.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(N=>!N),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),n.jsx("div",{className:"mt-1",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:m?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:N=>c(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),n.jsx("button",{type:"button",tabIndex:-1,onClick:()=>p(N=>!N),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":m?"Masquer le mot de passe":"Afficher le mot de passe",children:m?n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",n.jsx(Q,{to:"/legal/CGU",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:E,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${E?"opacity-70 cursor-not-allowed":""}`,children:E?"Création en cours...":"Créer un compte"})})]})]})})]})};async function K5(t){const e=Fe(le,"progressions",t),s=await or(e);return s.exists()?s.data().completedSections||[]:[]}async function Y5(t,e){const s=Fe(le,"progressions",t);try{await Mr(s,{completedSections:e},{merge:!0}),console.log("Progression enregistrée sur Firestore:",t,e)}catch(r){console.error("Erreur Firestore progression:",r)}}const J5=()=>{const{currentUser:t}=nt(),{guideSections:e,resources:s,getGuideSectionsByPhase:r,faqItems:i}=di(),[o,a]=T.useState("post-cps"),[c,u]=T.useState([]),[d,m]=T.useState(!0);T.useEffect(()=>{t!=null&&t.uid&&(m(!0),K5(t.uid).then(A=>u(A)).finally(()=>m(!1)))},[t==null?void 0:t.uid]);const p=async A=>{let R;c.includes(A)?R=c.filter(b=>b!==A):R=[...c,A],u(R),t!=null&&t.uid&&await Y5(t.uid,R)},g=r?r(o):[],y=A=>{const R=r?r(A):[];if(!R||R.length===0)return 0;const b=R.filter(w=>c.includes(w.id));return Math.round(b.length/R.length*100)},E=()=>{if(!e||e.length===0)return 0;const A=e.filter(R=>c.includes(R.id));return Math.round(A.length/e.length*100)};return!s||!i||!e||d?n.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),n.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",n.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2",children:[n.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:n.jsxs("div",{className:"flex flex-wrap",children:[n.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),n.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),n.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsxs("div",{className:"border-b border-gray-200 p-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[o==="post-cps"&&"Après votre CPS",o==="during-process"&&"Pendant vos démarches administratives",o==="pre-arrival"&&"Avant votre arrivée en France"]}),n.jsxs("p",{className:"text-gray-600",children:[o==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",o==="during-process"&&"Les démarches à effectuer pour préparer votre départ",o==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),n.jsx("div",{className:"divide-y divide-gray-200",children:g&&g.length>0?g.map(A=>n.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:n.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[n.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:n.jsx("button",{onClick:()=>p(A.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(A.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:n.jsx(Ln,{className:"w-5 h-5"})})}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:A.title}),n.jsx("p",{className:"text-gray-600 mb-4",children:A.content}),Array.isArray(A.resources)&&A.resources.length>0&&n.jsxs("div",{className:"mt-3",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),n.jsx("div",{className:"space-y-2",children:A.resources.map(R=>{const b=s.find(w=>w.id===R);return b?n.jsxs("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[n.jsx(Ke,{className:"w-4 h-4 mr-2"}),b.title]},b.id):null})})]})]})]})},A.id)):n.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Progression globale"}),n.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[E(),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:n.jsx("div",{className:"bg-blue-900 h-3 rounded-full transition-all duration-500",style:{width:`${E()}%`}})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[y("post-cps"),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${y("post-cps")}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[y("during-process"),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${y("during-process")}%`}})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),n.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[y("pre-arrival"),"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${y("pre-arrival")}%`}})})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),n.jsx(Q,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),n.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,3).map(A=>n.jsxs("a",{href:A.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[n.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:n.jsx(Ke,{className:"w-5 h-5 text-blue-700"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900",children:A.title}),n.jsx("p",{className:"text-xs text-gray-500",children:A.phase})]})]},A.id))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),n.jsx(Q,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),n.jsx("div",{className:"space-y-3",children:(i||[]).slice(0,2).map(A=>n.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:A.question}),n.jsx("p",{className:"text-xs text-gray-700",children:A.answer&&A.answer.length>100?`${A.answer.substring(0,100)}...`:A.answer})]},A.id))})]})]})]})})]})},X5=()=>{const{resources:t}=di(),[e,s]=T.useState(""),[r,i]=T.useState("all"),[o,a]=T.useState("all"),[c,u]=T.useState(!1),[d,m]=T.useState(!1),[p,g]=T.useState(null),[y,E]=T.useState(!1),A=[...new Set(t.map(L=>L.category))],R=L=>{if(L.includes("dropbox.com")){let O=L.replace("www.dropbox.com","dl.dropboxusercontent.com");return O.includes("?dl=0")?O=O.replace("?dl=0","?raw=1"):O.includes("?")?O+="&raw=1":O+="?raw=1",O}return L},b=L=>`https://docs.google.com/viewer?url=${encodeURIComponent(L)}&embedded=true`,w=L=>{L.preventDefault()},C=t.filter(L=>r!=="all"&&L.phase!==r||o!=="all"&&L.category!==o?!1:e?L.title.toLowerCase().includes(e.toLowerCase())||L.description.toLowerCase().includes(e.toLowerCase()):!0),D=L=>{switch(L){case"pdf":return n.jsx(fj,{className:"w-6 h-6 text-red-500"});case"image":return n.jsx(S5,{className:"w-6 h-6 text-green-500"});case"video":return n.jsx(V5,{className:"w-6 h-6 text-purple-500"});case"archive":return n.jsx(l5,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return n.jsx(Ke,{className:"w-6 h-6 text-blue-500"})}};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),n.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:n.jsx("div",{className:"p-6",children:n.jsx("form",{onSubmit:w,children:n.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[n.jsx("div",{className:"flex-grow",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ti,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:L=>s(L.target.value)})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Vy,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),n.jsx(Mn,{className:"h-4 w-4"})]}),c&&n.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:n.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("all"),u(!1)},children:"Toutes les phases"}),n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("post-cps"),u(!1)},children:"Post-CPS"}),n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("during-process"),u(!1)},children:"Pendant les démarches"}),n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>m(!d),children:[n.jsxs("span",{className:"flex items-center",children:[n.jsx(Vy,{className:"mr-2 h-4 w-4"}),o==="all"?"Toutes les catégories":o]}),n.jsx(Mn,{className:"h-4 w-4"})]}),d&&n.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:n.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),m(!1)},children:"Toutes les catégories"}),A.map(L=>n.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${o===L?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(L),m(!1)},children:L},L))]})})]})]})]})})})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.length>0?C.map(L=>n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{g(L),E(!0)},children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:D(L.fileType)}),n.jsx("div",{className:"ml-4",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:L.title})})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:L.description}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:L.phase==="post-cps"?"Post-CPS":L.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:L.category}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.fileType==="pdf"?"bg-red-100 text-red-800":L.fileType==="doc"||L.fileType==="docx"||L.fileType==="txt"?"bg-blue-100 text-blue-800":L.fileType==="xls"||L.fileType==="xlsx"?"bg-green-100 text-green-800":L.fileType==="ppt"||L.fileType==="pptx"?"bg-orange-100 text-orange-800":L.fileType==="image"?"bg-purple-100 text-purple-800":L.fileType==="video"?"bg-pink-100 text-pink-800":L.fileType==="audio"?"bg-indigo-100 text-indigo-800":L.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:L.fileType.toUpperCase()})]}),n.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[n.jsxs("span",{children:["Mis à jour le ",L.updatedDate]}),n.jsxs("a",{href:L.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:O=>O.stopPropagation(),children:[n.jsx(Ua,{className:"w-4 h-4 mr-1"}),n.jsx("span",{children:"Télécharger"})]})]})]})},L.id)):n.jsxs("div",{className:"col-span-full text-center py-12",children:[n.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:n.jsx(ti,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),n.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),y&&p&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>E(!1),children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col relative",onClick:L=>L.stopPropagation(),children:[n.jsx("button",{onClick:()=>E(!1),className:"absolute top-2 right-2 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors","aria-label":"Fermer",children:n.jsx(si,{className:"w-5 h-5"})}),n.jsxs("div",{className:"p-4 border-b flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.title}),n.jsx("p",{className:"text-sm text-gray-500",children:p.category})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto",children:[n.jsxs("a",{href:p.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full sm:w-auto bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[n.jsx(Vr,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),n.jsxs("a",{href:p.fileUrl,download:!0,className:"flex items-center justify-center w-full sm:w-auto bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[n.jsx(Ua,{className:"w-4 h-4 mr-1"}),"Télécharger"]})]})]}),n.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:p.fileType==="pdf"?n.jsxs("div",{className:"flex flex-col items-center h-full",children:[n.jsx("div",{className:"h-full w-full",children:n.jsx("object",{data:R(p.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:n.jsx("iframe",{src:b(p.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${p.title} (Google Viewer)`,allowFullScreen:!0})})}),n.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",n.jsx("a",{href:p.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:L=>L.stopPropagation(),children:"télécharger"}),"ou l'",n.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(p.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:L=>L.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):p.fileType==="image"?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("img",{src:R(p.fileUrl),alt:p.title,className:"max-w-full max-h-full object-contain rounded-md"})}):n.jsx("iframe",{src:R(p.fileUrl),className:"w-full h-full border-0 rounded-md",title:p.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},Z5=()=>{const{faqItems:t,addFAQItem:e}=di(),{currentUser:s}=nt(),[r,i]=T.useState(""),[o,a]=T.useState("all"),[c,u]=T.useState(null),[d,m]=T.useState(!1),[p,g]=T.useState(!1),[y,E]=T.useState(!1),[A,R]=T.useState(""),[b,w]=T.useState("post-cps"),[C,D]=T.useState(""),[L,O]=T.useState("phase"),[j,x,v]=t.reduce((I,S)=>(s&&(S.userId===s.uid||S.userEmail===s.email)&&(S.isAnswered?I[0].push(S):I[1].push(S)),S.isApproved&&S.isAnswered&&(o==="all"&&(S.questionType==="general"||S.questionType==="site"||S.questionType==="phase")||o==="general"&&S.questionType==="general"||o==="site"&&S.questionType==="site"||["post-cps","during-process","pre-arrival"].includes(o)&&S.questionType==="phase"&&S.phase===o)&&(!r||S.question.toLowerCase().includes(r.toLowerCase())||S.answer.toLowerCase().includes(r.toLowerCase())||S.category.toLowerCase().includes(r.toLowerCase()))&&I[2].push(S),I),[[],[],[]]),k=I=>{u(c===I?null:I)},N=I=>{I.preventDefault(),A.trim()&&(e({question:A,answer:"Cette question est en attente de réponse par notre équipe.",category:C||"général",phase:L==="phase"?b:void 0,questionType:L,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:s==null?void 0:s.uid,userEmail:s==null?void 0:s.email}),R(""),D(""),g(!0),setTimeout(()=>{g(!1),m(!1)},5e3))};return T.useEffect(()=>{d||g(!1)},[d]),n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),n.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[n.jsx("div",{className:"flex-grow",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ti,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:I=>i(I.target.value)})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[n.jsxs("select",{value:o,onChange:I=>a(I.target.value),className:"block w-full rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:y,children:[n.jsx("option",{value:"all",children:"Toutes les questions"}),n.jsx("option",{value:"post-cps",children:"Phase : Post-CPS"}),n.jsx("option",{value:"during-process",children:"Phase : Pendant les démarches"}),n.jsx("option",{value:"pre-arrival",children:"Phase : Pré-arrivée"}),n.jsx("option",{value:"site",children:"Fonctionnement du site"}),n.jsx("option",{value:"general",children:"Question générale"})]}),n.jsxs("div",{className:"flex flex-row space-x-2",children:[s&&n.jsx("button",{type:"button",onClick:()=>E(!y),className:`flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${y?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:y?"Toutes les questions":"Mes questions"}),n.jsxs("button",{type:"button",onClick:()=>m(!0),className:"flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(Vn,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]})]}),d&&n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[n.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(Ns,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),n.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),n.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),n.jsx("form",{onSubmit:N,className:"space-y-7",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),n.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:A,onChange:I=>R(I.target.value),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),n.jsxs("select",{id:"questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:I=>O(I.target.value),required:!0,children:[n.jsx("option",{value:"phase",children:"En lien avec une phase"}),n.jsx("option",{value:"site",children:"Fonctionnement du site"}),n.jsx("option",{value:"general",children:"Question générale"})]})]}),L==="phase"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),n.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:I=>w(I.target.value),required:L==="phase",children:[n.jsx("option",{value:"post-cps",children:"Post-CPS"}),n.jsx("option",{value:"during-process",children:"Pendant les démarches"}),n.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),n.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:C,onChange:I=>D(I.target.value)})]})]}),p?n.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ln,{className:"h-5 w-5 text-green-500 mr-2"}),n.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),n.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):n.jsxs("div",{className:"flex justify-end",children:[n.jsx("button",{type:"button",onClick:()=>m(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),n.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),y?n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",n.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:j.length})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:j.length>0?j.map(I=>n.jsxs("div",{className:"p-6",children:[n.jsxs("button",{onClick:()=>k(I.id),className:"flex justify-between items-start w-full text-left",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:n.jsx(Ns,{className:"h-4 w-4 text-green-700"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:I.question}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),I.category&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category})]})]})]}),c===I.id?n.jsx(vc,{className:"h-5 w-5 text-gray-500"}):n.jsx(Mn,{className:"h-5 w-5 text-gray-500"})]}),c===I.id&&n.jsxs("div",{className:"mt-4 ml-11",children:[n.jsx("p",{className:"text-gray-700",children:I.answer}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",I.updatedDate]})]})]},I.id)):n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",n.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:x.length})]})}),n.jsx("div",{className:"divide-y divide-gray-200",children:x.length>0?x.map(I=>n.jsxs("div",{className:"p-6",children:[n.jsxs("button",{onClick:()=>k(I.id),className:"flex justify-between items-start w-full text-left",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:n.jsx(Ns,{className:"h-4 w-4 text-yellow-700"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[I.question,n.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),I.category&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category}),n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",I.createdDate]})]})]})]}),c===I.id?n.jsx(vc,{className:"h-5 w-5 text-gray-500"}):n.jsx(Mn,{className:"h-5 w-5 text-gray-500"})]}),c===I.id&&n.jsx("div",{className:"mt-4 ml-11",children:n.jsx("p",{className:"text-gray-700 italic",children:I.answer})})]},I.id)):n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b",children:n.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),n.jsx("div",{className:"divide-y divide-gray-200",children:v.length>0?v.map(I=>n.jsxs("div",{className:"p-6",children:[n.jsxs("button",{onClick:()=>k(I.id),className:"flex justify-between items-start w-full text-left",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:n.jsx(Ns,{className:"h-4 w-4 text-blue-700"})})}),n.jsxs("div",{className:"ml-3",children:[n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[I.question,y&&!I.isApproved&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),I.category&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category})]})]})]}),c===I.id?n.jsx(vc,{className:"h-5 w-5 text-gray-500"}):n.jsx(Mn,{className:"h-5 w-5 text-gray-500"})]}),c===I.id&&n.jsxs("div",{className:"mt-4 ml-11",children:[n.jsx("p",{className:"text-gray-700",children:I.answer}),n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",I.updatedDate]})]})]},I.id)):n.jsx("div",{className:"p-6 text-center",children:n.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})},e3="modulepreload",t3=function(t){return"/Esig-prep-guide/"+t},Uy={},jj=function(e,s,r){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(s.map(u=>{if(u=t3(u),u in Uy)return;Uy[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":e3,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,y)=>{p.addEventListener("load",g),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return i.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};async function Nj(){const t=await Jt(Ge(le,"progressions")),e=[];return t.forEach(s=>{e.push({userId:s.id,completedSections:s.data().completedSections||[]})}),e}function s3(t=20){const[e,s]=T.useState([]),[r,i]=T.useState(!0);return T.useEffect(()=>{(async()=>{i(!0);try{const a=In(Ge(le,"adminActivityLog"),Ff("date","desc"),cu(t)),c=await Jt(a);s(c.docs.map(u=>({id:u.id,...u.data()})))}catch{s([])}i(!1)})()},[t]),{recentActivity:e,loading:r}}function r3(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},s={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",i=e[t.type]||t.type.toLowerCase(),o=s[t.target]||t.target.toLowerCase();return`${r} ${i} ${o}`}const n3=()=>{const{currentUser:t}=nt(),{resources:e,guideSections:s,faqItems:r}=di(),{recentActivity:i,loading:o}=s3(),[a,c]=T.useState([]),[u,d]=T.useState([]),[m,p]=T.useState(!0);T.useEffect(()=>{(async()=>{p(!0);const[E,A]=await Promise.all([Nj(),jj(async()=>{const{collection:b,getDocs:w}=await Promise.resolve().then(()=>U_);return{collection:b,getDocs:w}},void 0).then(({collection:b,getDocs:w})=>w(b(le,"users")))]),R=[];A.forEach(b=>{R.push({...b.data(),uid:b.id})}),c(E),d(R),p(!1)})()},[]);const g=y=>!s||s.length===0?0:Math.round(y.length/s.length*100);return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),n.jsxs(Q,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[n.jsx(ei,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),n.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",n.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[n.jsxs(Q,{to:"/admin/progressions",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[n.jsx(us,{className:"-ml-1 mr-2 h-5 w-5"}),"Progression des utilisateurs"]}),n.jsxs(Q,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(mh,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),n.jsxs(Q,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(Ke,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),n.jsxs(Q,{to:"/admin/dropbox",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(mj,{className:"-ml-1 mr-2 h-5 w-5"}),"Gestionnaire Dropbox"]}),n.jsxs(Q,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(us,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),n.jsxs(Q,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[n.jsx(p5,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[n.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[n.jsx(us,{className:"w-5 h-5 mr-2 text-blue-700"})," Statistiques de progression des utilisateurs"]}),m?n.jsx("div",{className:"text-center text-gray-500",children:"Chargement des statistiques..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[n.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:u.length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Utilisateurs inscrits"})]}),n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"text-3xl font-bold text-green-800 mb-1",children:[(()=>{const y=u.length,E=a.filter(A=>g(A.completedSections)===100).length;return y===0?0:Math.round(E/y*100)})(),"%"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"ont terminé toutes les sections"})]}),n.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[n.jsxs("div",{className:"text-3xl font-bold text-yellow-800 mb-1",children:[(()=>{if(a.length===0)return 0;const y=a.reduce((E,A)=>E+g(A.completedSections),0);return Math.round(y/a.length)})(),"%"]}),n.jsx("div",{className:"text-sm text-gray-600",children:"Progression moyenne"})]}),n.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-800 mb-1",children:a.filter(y=>g(y.completedSections)>=50).length}),n.jsx("div",{className:"text-sm text-gray-600",children:"utilisateurs à plus de 50%"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["pre-arrival","during-process","post-cps"].map(y=>{const E=s.filter(C=>C.phase===y),A=y==="pre-arrival"?"Pré-arrivée":y==="during-process"?"Pendant le processus":"Post-CPS",R=y==="pre-arrival"?"blue":y==="during-process"?"green":"purple",b=a.length===0||E.length===0?0:Math.round(a.reduce((C,D)=>C+Math.round(D.completedSections.filter(L=>E.some(O=>O.id===L)).length/E.length*100),0)/a.length),w=a.length===0||E.length===0?0:Math.round(a.filter(C=>E.every(D=>C.completedSections.includes(D.id))).length/a.length*100);return n.jsxs("div",{className:`p-4 bg-${R}-50 rounded-lg`,children:[n.jsxs("div",{className:`text-3xl font-bold text-${R}-800 mb-1`,children:[b,"%"]}),n.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Progression moyenne ",A]}),n.jsxs("div",{className:`text-lg font-bold text-${R}-800 mb-1`,children:[w,"%"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["ont terminé ",A]})]},y)})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:n.jsx(Ke,{className:"h-6 w-6"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:n.jsx(mh,{className:"h-6 w-6"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(s)?s.length:0})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:n.jsx(Ns,{className:"h-6 w-6"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),n.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[n.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(r)&&r.filter(y=>y.isAnswered).length>5&&n.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),n.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(y=>y.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(y=>y.isAnswered).length>0?r.filter(y=>y.isAnswered).map(y=>n.jsxs("li",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{className:"flex-grow pr-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-gray-800 line-clamp-1",children:y.question}),y.isApproved?n.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):n.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:y.phase==="post-cps"?"Post-CPS":y.phase==="during-process"?"Démarches":"Pré-arrivée"}),y.userEmail&&n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",y.userEmail]})]})]}),n.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:n.jsx(Q,{to:`/admin/content?edit=${y.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},y.id)):n.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[n.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&n.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(y=>!y.isAnswered).length})]}),Array.isArray(r)&&r.filter(y=>!y.isAnswered).length>5&&n.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),n.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(y=>!y.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(y=>!y.isAnswered).length>0?r.filter(y=>!y.isAnswered).map(y=>n.jsxs("li",{className:"flex items-center justify-between py-2",children:[n.jsxs("div",{className:"flex-grow pr-2",children:[n.jsx("span",{className:"text-gray-800 line-clamp-1",children:y.question}),n.jsxs("div",{className:"flex items-center mt-1",children:[n.jsx("span",{className:"text-xs text-gray-500",children:y.phase==="post-cps"?"Post-CPS":y.phase==="during-process"?"Démarches":"Pré-arrivée"}),y.userEmail&&n.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",y.userEmail]})]})]}),n.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:n.jsx(Q,{to:`/admin/content?edit=${y.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},y.id)):n.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs(Q,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:n.jsx(mh,{className:"h-5 w-5"})}),n.jsx("span",{children:"Gérer le contenu"})]}),n.jsxs(Q,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:n.jsx(Ke,{className:"h-5 w-5"})}),n.jsx("span",{children:"Gérer les ressources"})]}),n.jsxs(Q,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:n.jsx(Ns,{className:"h-5 w-5"})}),n.jsx("span",{children:"Modérer la FAQ"})]}),n.jsxs(Q,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:n.jsx(us,{className:"h-5 w-5"})}),n.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[n.jsxs(Q,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:n.jsx(Vn,{className:"h-5 w-5"})}),n.jsx("span",{children:"Ajouter une section de guide"})]}),n.jsxs(Q,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:n.jsx(Vn,{className:"h-5 w-5"})}),n.jsx("span",{children:"Ajouter une ressource"})]}),n.jsxs(Q,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:n.jsx(Vn,{className:"h-5 w-5"})}),n.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),n.jsx("div",{className:`divide-y divide-gray-200 ${i.length>5?"max-h-80 overflow-y-auto":""}`,children:o?n.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):i.length===0?n.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):i.map(y=>{var E;return n.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:n.jsx(Ke,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-gray-800",children:r3(y)}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(y.date).toLocaleString()}),typeof((E=y.details)==null?void 0:E.title)=="string"&&n.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",y.details.title]})]})]})},y.id)})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(y=>y.phase==="post-cps").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(y=>y.phase==="post-cps").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(y=>y.phase==="post-cps").length:0})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(y=>y.phase==="during-process").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(y=>y.phase==="during-process").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(y=>y.phase==="during-process").length:0})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(y=>y.phase==="pre-arrival").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(y=>y.phase==="pre-arrival").length:0})]})}),n.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),n.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(y=>y.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Xs({type:t,target:e,targetId:s,user:r,details:i}){await Os(Ge(le,"adminActivityLog"),{type:t,target:e,targetId:s||null,user:r||null,date:new Date().toISOString(),details:i||null})}const Qf=({isOpen:t,onClose:e,onConfirm:s,title:r,message:i,confirmButtonText:o="Confirmer",cancelButtonText:a="Annuler",type:c="danger"})=>{if(!t)return null;const d=(()=>{switch(c){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),m=p=>{p.target===p.currentTarget&&c!=="danger"&&e()};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:m,children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[n.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[n.jsx(Hs,{className:`mr-2 h-5 w-5 ${d.icon}`}),n.jsx("h3",{className:"text-lg font-medium",children:r})]}),n.jsx("div",{className:"px-6 py-4",children:n.jsx("p",{className:"text-gray-700",children:i})}),n.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[n.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:a}),n.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{s(),e()},autoFocus:!0,children:o})]})]})})};class ml{constructor(e=0,s="Network Error"){this.status=e,this.text=s}}const i3=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},ft={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:i3()},Kf=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},o3=(t,e="https://api.emailjs.com")=>{if(!t)return;const s=Kf(t);ft.publicKey=s.publicKey,ft.blockHeadless=s.blockHeadless,ft.storageProvider=s.storageProvider,ft.blockList=s.blockList,ft.limitRate=s.limitRate,ft.origin=s.origin||e},Ej=async(t,e,s={})=>{const r=await fetch(ft.origin+t,{method:"POST",headers:s,body:e}),i=await r.text(),o=new ml(r.status,i);if(r.ok)return o;throw o},Sj=(t,e,s)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},a3=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},Tj=t=>t.webdriver||!t.languages||t.languages.length===0,kj=()=>new ml(451,"Unavailable For Headless Browser"),l3=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},c3=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},u3=(t,e)=>t instanceof FormData?t.get(e):t[e],Ij=(t,e)=>{if(c3(t))return!1;l3(t.list,t.watchVariable);const s=u3(e,t.watchVariable);return typeof s!="string"?!1:t.list.includes(s)},Aj=()=>new ml(403,"Forbidden"),d3=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},h3=async(t,e,s)=>{const r=Number(await s.get(t)||0);return e-Date.now()+r},Cj=async(t,e,s)=>{if(!e.throttle||!s)return!1;d3(e.throttle,e.id);const r=e.id||t;return await h3(r,e.throttle,s)>0?!0:(await s.set(r,Date.now().toString()),!1)},Pj=()=>new ml(429,"Too Many Requests"),m3=async(t,e,s,r)=>{const i=Kf(r),o=i.publicKey||ft.publicKey,a=i.blockHeadless||ft.blockHeadless,c=i.storageProvider||ft.storageProvider,u={...ft.blockList,...i.blockList},d={...ft.limitRate,...i.limitRate};return a&&Tj(navigator)?Promise.reject(kj()):(Sj(o,t,e),a3(s),s&&Ij(u,s)?Promise.reject(Aj()):await Cj(location.pathname,d,c)?Promise.reject(Pj()):Ej("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:o,service_id:t,template_id:e,template_params:s}),{"Content-type":"application/json"}))},p3=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},f3=t=>typeof t=="string"?document.querySelector(t):t,g3=async(t,e,s,r)=>{const i=Kf(r),o=i.publicKey||ft.publicKey,a=i.blockHeadless||ft.blockHeadless,c=ft.storageProvider||i.storageProvider,u={...ft.blockList,...i.blockList},d={...ft.limitRate,...i.limitRate};if(a&&Tj(navigator))return Promise.reject(kj());const m=f3(s);Sj(o,t,e),p3(m);const p=new FormData(m);return Ij(u,p)?Promise.reject(Aj()):await Cj(location.pathname,d,c)?Promise.reject(Pj()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",e),p.append("user_id",o),Ej("/api/v1.0/email/send-form",p))},Yf={init:o3,send:m3,sendForm:g3,EmailJSResponseStatus:ml},x3={async sendFaqAnswerNotification(t,e,s){try{const r=Fe(le,"faq",t),i=await or(r);if(!i.exists())return console.error(`FAQ item not found (ID: ${t}) dans la collection 'faq'. Vérifiez le nom de collection.`),!1;const o=i.data();if(!o.userEmail)return console.log("No user email associated with this FAQ item"),!1;const a=Ge(le,"users"),c=In(a,Of("email","==",o.userEmail)),u=await Jt(c);let d="Utilisateur";u.empty||(d=u.docs[0].data().displayName||"Utilisateur");const m={to_email:o.userEmail,to_name:d,question:e,answer:s,app_name:"ESIG-prep-guide",faq_url:`${window.location.origin}/Esig-prep-guide/faq`};return await y3(m)}catch(r){return console.error("Error sending FAQ answer notification:",r),!1}}},Hi={SERVICE_ID:"service_vhvuugn",TEMPLATE_ID:"template_93nn8cu",PUBLIC_KEY:"l4eGBb6GgLVODJBOf"},y3=async t=>{console.log("Préparation de l'envoi d'email avec les données:",t);try{const e={to_email:t.to_email,to_name:t.to_name||"Utilisateur",question:t.question,answer:t.answer,app_name:t.app_name,faq_url:t.faq_url},s=await Yf.send(Hi.SERVICE_ID,Hi.TEMPLATE_ID,e,Hi.PUBLIC_KEY);return console.log("Résultat de l'envoi d'email:",s.status,s.text),s.status===200}catch(e){return console.error("Erreur lors de l'envoi d'email:",e),!1}},v3=()=>{const[t,e]=T.useState(!1),[s,r]=T.useState(null),[i,o]=T.useState(null);return{isSending:t,sendSuccess:s,errorMessage:i,sendFaqAnswerNotification:async(c,u,d)=>{e(!0),r(null),o(null);try{const m=await x3.sendFaqAnswerNotification(c,u,d);return r(m),m}catch(m){const p=m instanceof Error?m.message:"Une erreur est survenue lors de l'envoi de la notification";return o(p),console.error("Failed to send FAQ answer notification:",m),!1}finally{e(!1)}}}},b3=()=>{const[t]=pw(),e=os(),{currentUser:s}=nt(),{sendFaqAnswerNotification:r}=v3(),{guideSections:i,addGuideSection:o,updateGuideSection:a,deleteGuideSection:c,resources:u,faqItems:d,addFAQItem:m,updateFAQItem:p,deleteFAQItem:g}=di(),y=t.get("new")==="section",E=t.get("new")==="faq",A=y?null:t.get("edit")&&i.some(z=>z.id===t.get("edit"))?t.get("edit"):null,R=E?null:t.get("edit")&&d.some(z=>z.id===t.get("edit"))?t.get("edit"):null,[b,w]=T.useState(""),[C,D]=T.useState("post-cps"),[L,O]=T.useState(""),[j,x]=T.useState(1),[v,k]=T.useState([]),[N,I]=T.useState(""),[S,se]=T.useState(""),[xe,Ie]=T.useState(""),[H,F]=T.useState("post-cps"),[Y,te]=T.useState("phase"),[ie,de]=T.useState(!0),[fe,He]=T.useState(!1),[Dt,ut]=T.useState(!1),[G,Z]=T.useState("section"),[me,q]=T.useState(!1),[he,ne]=T.useState(null);T.useEffect(()=>{if(A){const z=i.find(ye=>ye.id===A);z&&(w(z.title),D(z.phase),O(z.content),x(z.order),k(Array.isArray(z.resources)?z.resources:[]))}else if(y){w(""),D("post-cps"),O("");const z=i.filter(ye=>ye.phase==="post-cps");x(z.length>0?Math.max(...z.map(ye=>ye.order))+1:1),k([])}if(R){const z=d.find(ye=>ye.id===R);z&&(I(z.question),se(z.answer),Ie(z.category||""),F(z.phase||"post-cps"),te(z.questionType||"phase"),de(!!z.isApproved),He(!!z.isAnswered))}else E&&(I(""),se(""),Ie(""),F("post-cps"),te("phase"),de(!0),He(!1))},[A,y,i,R,E,d]);const Ve=()=>{se(""),He(!1)},De=z=>{const ye=z.trim()!==""&&z!=="Cette question est en attente de réponse par notre équipe.";He(ye)},tt=z=>{if(z.preventDefault(),E||R)if(R){const ye=S.trim()!==""&&S!=="Cette question est en attente de réponse par notre équipe.";He(ye);const dt=d.find(Nr=>Nr.id===R),vt=(dt==null?void 0:dt.isAnswered)||!1;p(R,{question:N,answer:S,category:xe,phase:Y==="phase"?H:void 0,questionType:Y,isApproved:ie,isAnswered:ye}),ye&&!vt&&R&&(q(!0),ne(null),r(R,N,S).then(Nr=>{Nr?(console.log("Email de notification envoyé avec succès"),ne("success"),setTimeout(()=>{q(!1)},5e3)):(console.error("Échec de l'envoi de l'email de notification"),ne("error"),setTimeout(()=>{q(!1)},5e3))}).catch(Nr=>{console.error("Erreur lors de l'envoi de l'email de notification:",Nr),ne("error"),setTimeout(()=>{q(!1)},5e3)})),Xs({type:"Modification",target:"FAQ",targetId:R,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{question:N}})}else{const ye=S.trim()!==""&&S!=="Cette question est en attente de réponse par notre équipe.";He(ye),m({question:N,answer:S,category:xe,phase:Y==="phase"?H:void 0,questionType:Y,isApproved:ie,isAnswered:ye,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Xs({type:"Ajout",target:"FAQ",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{question:N}})}else A?(a(A,{title:b,phase:C,content:L,order:j,resources:v}),Xs({type:"Modification",target:"Section",targetId:A,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:b}})):(o({title:b,phase:C,content:L,order:j,resources:v}),Xs({type:"Ajout",target:"Section",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:b}}))},Ws=z=>{Z(z),ut(!0)},hn=()=>{G==="section"&&A?(c(A),Xs({type:"Suppression",target:"Section",targetId:A,user:s==null?void 0:s.uid,details:{title:b}}),e("/admin/content")):G==="faq"&&R&&(g(R),Xs({type:"Suppression",target:"FAQ",targetId:R,user:s==null?void 0:s.uid,details:{question:N}}),e("/admin/content")),ut(!1)},mn=z=>{v.includes(z)?k(v.filter(ye=>ye!==z)):k([...v,z])},hi=u.filter(z=>z.phase===C),Qt={"post-cps":i.filter(z=>z.phase==="post-cps").sort((z,ye)=>z.order-ye.order),"during-process":i.filter(z=>z.phase==="during-process").sort((z,ye)=>z.order-ye.order),"pre-arrival":i.filter(z=>z.phase==="pre-arrival").sort((z,ye)=>z.order-ye.order)};return n.jsxs("div",{className:"bg-gray-50 min-h-screen relative",children:[me&&n.jsxs("div",{className:`fixed top-6 right-6 p-4 rounded-md shadow-md z-50 flex items-center transition-all duration-300 ease-in-out ${he==="success"?"bg-green-100 border-l-4 border-green-500":he==="error"?"bg-red-100 border-l-4 border-red-500":"bg-blue-100 border-l-4 border-blue-500"}`,children:[he==="success"?n.jsx(m5,{className:"w-5 h-5 text-green-600 mr-3"}):he==="error"?n.jsx(a5,{className:"w-5 h-5 text-red-600 mr-3"}):n.jsx(Gi,{className:"w-5 h-5 text-blue-600 mr-3 animate-pulse"}),n.jsx("div",{children:he==="success"?n.jsx("p",{className:"text-green-800 font-medium",children:"Email de notification envoyé avec succès!"}):he==="error"?n.jsx("p",{className:"text-red-800 font-medium",children:"Échec de l'envoi de l'email de notification."}):n.jsx("p",{className:"text-blue-800 font-medium",children:"Envoi de la notification par email..."})})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:y?"Ajouter une nouvelle section":E?"Ajouter une question FAQ":R?"Modifier la FAQ":A?"Modifier la section":"Édition"}),n.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:E||R?n.jsx("form",{onSubmit:tt,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),n.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:N,onChange:z=>I(z.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),R&&n.jsx("button",{type:"button",onClick:Ve,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),n.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:S,onChange:z=>{se(z.target.value),De(z.target.value)},required:!0}),n.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[n.jsx("div",{className:`w-3 h-3 rounded-full ${fe?"bg-green-500":"bg-yellow-500"} mr-2`}),n.jsx("span",{className:"text-gray-600",children:fe?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"faq-questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),n.jsxs("select",{id:"faq-questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Y,onChange:z=>te(z.target.value),required:!0,children:[n.jsx("option",{value:"phase",children:"En lien avec une phase"}),n.jsx("option",{value:"site",children:"Fonctionnement du site"}),n.jsx("option",{value:"general",children:"Question générale"})]})]}),Y==="phase"&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),n.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:H,onChange:z=>F(z.target.value),required:Y==="phase",children:[n.jsx("option",{value:"post-cps",children:"Post-CPS"}),n.jsx("option",{value:"during-process",children:"Pendant les démarches"}),n.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),n.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:xe,onChange:z=>Ie(z.target.value),required:!0})]}),n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:ie,onChange:z=>de(z.target.checked)}),n.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[n.jsx("div",{children:R&&n.jsxs("button",{type:"button",onClick:()=>Ws("faq"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[n.jsx(za,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[n.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),n.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[n.jsx($m,{className:"mr-2 h-4 w-4"}),E?"Ajouter":"Enregistrer"]})]})]})]})}):n.jsx("form",{onSubmit:tt,children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),n.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:b,onChange:z=>w(z.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),n.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:C,onChange:z=>{const ye=z.target.value;D(ye);const dt=i.filter(vt=>vt.phase===ye);x(dt.length>0?Math.max(...dt.map(vt=>vt.order))+1:1),k([])},required:!0,children:[n.jsx("option",{value:"post-cps",children:"Post-CPS"}),n.jsx("option",{value:"during-process",children:"Pendant les démarches"}),n.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),n.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:j,onChange:z=>x(parseInt(z.target.value)),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),n.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:z=>O(z.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(hi)&&hi.length>0?n.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:hi.map(z=>n.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",id:`resource-${z.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:v.includes(z.id),onChange:()=>mn(z.id)}),n.jsx("label",{htmlFor:`resource-${z.id}`,className:"ml-3 block text-sm text-gray-700",children:z.title})]},z.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[n.jsx("div",{children:A&&n.jsxs("button",{type:"button",onClick:()=>Ws("section"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[n.jsx(za,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[n.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),n.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[n.jsx($m,{className:"mr-2 h-4 w-4"}),y?"Ajouter":"Enregistrer"]})]})]})]})})})}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),n.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[n.jsx(Vn,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Qt["post-cps"])&&Qt["post-cps"].length>0?n.jsx("ul",{className:"space-y-2",children:Qt["post-cps"].map(z=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${A===z.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),n.jsx("span",{className:"flex-grow",children:z.title}),n.jsx(hh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Qt["during-process"])&&Qt["during-process"].length>0?n.jsx("ul",{className:"space-y-2",children:Qt["during-process"].map(z=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${A===z.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),n.jsx("span",{className:"flex-grow",children:z.title}),n.jsx(hh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Qt["pre-arrival"])&&Qt["pre-arrival"].length>0?n.jsx("ul",{className:"space-y-2",children:Qt["pre-arrival"].map(z=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/content?edit=${z.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${A===z.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),n.jsx("span",{className:"flex-grow",children:z.title}),n.jsx(hh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),n.jsxs("div",{className:"mt-8 border-t pt-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),n.jsxs("button",{onClick:()=>e("/admin/content?new=faq"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[n.jsx(Vn,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const z={};return d.forEach(ye=>{const dt=ye.category||"Non catégorisé";z[dt]||(z[dt]=[]),z[dt].push(ye)}),Object.entries(z).map(([ye,dt])=>n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:ye}),dt.length>0?n.jsx("ul",{className:"space-y-2",children:dt.map(vt=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/content?edit=${vt.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${R===vt.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("span",{className:"flex-grow",children:vt.question}),!vt.isAnswered&&n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),vt.isApproved?n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuvée"}):n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuvée"})]})},vt.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},ye))})()]})]})]})})]})}),n.jsx(Qf,{isOpen:Dt,onClose:()=>ut(!1),onConfirm:hn,title:`Confirmer la suppression de ${G==="section"?"la section":"la question FAQ"}`,message:G==="section"?`Êtes-vous sûr de vouloir supprimer la section "${b}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${N}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})};var w3="rpc",_3="upload",j3="download",fh="app",gh="user",xh="team",N3="noauth",E3="cookie",mu="dropboxapi.com",zy="dropbox.com",Gm={api:"api",notify:"bolt",content:"api-content"},P={};P.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};P.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};P.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};P.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};P.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};P.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};P.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};P.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};P.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};P.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};P.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};P.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};P.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};P.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};P.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};P.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};P.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};P.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};P.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};P.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};P.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};P.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};P.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};P.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};P.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};P.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};P.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};P.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};P.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};P.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};P.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};P.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};P.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};P.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};P.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};P.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};P.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};P.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};P.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};P.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};P.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};P.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};P.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};P.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};P.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};P.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};P.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};P.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};P.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};P.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};P.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};P.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};P.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};P.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};P.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};P.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};P.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};P.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};P.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};P.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};P.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};P.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};P.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};P.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};P.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};P.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};P.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};P.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};P.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};P.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};P.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};P.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};P.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};P.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};P.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};P.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};P.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};P.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};P.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};P.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};P.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};P.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};P.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};P.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};P.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};P.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};P.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};P.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};P.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};P.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};P.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};P.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};P.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};P.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};P.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};P.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};P.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};P.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};P.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};P.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};P.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};P.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};P.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};P.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};P.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};P.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};P.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};P.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};P.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};P.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};P.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};P.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};P.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};P.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};P.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};P.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};P.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};P.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};P.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};P.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};P.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};P.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};P.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};P.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};P.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};P.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};P.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};P.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};P.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};P.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};P.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};P.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};P.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};P.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};P.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};P.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};P.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};P.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};P.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};P.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};P.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};P.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};P.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};P.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};P.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};P.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};P.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};P.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};P.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};P.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};P.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};P.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};P.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};P.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};P.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};P.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};P.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};P.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};P.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};P.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};P.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};P.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};P.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};P.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};P.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};P.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};P.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};P.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};P.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};P.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};P.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};P.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};P.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};P.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};P.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};P.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};P.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};P.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};P.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};P.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};P.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};P.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};P.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};P.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};P.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};P.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};P.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};P.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};P.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};P.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};P.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};P.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};P.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};P.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};P.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};P.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};P.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};P.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};P.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};P.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};P.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};P.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};P.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};P.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};P.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};P.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};P.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};P.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};P.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};P.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};P.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};P.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};P.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};P.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};P.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};P.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};P.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};P.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};P.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};P.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};P.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};P.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};P.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};P.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};P.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};P.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};P.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};P.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};P.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};P.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};P.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};P.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};P.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};P.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};P.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};P.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};P.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};P.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};P.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};P.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};P.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};P.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};P.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};P.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};P.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};P.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};P.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};P.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};P.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};P.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};P.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function S3(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var yh=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mu,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(s!==mu&&Gm[e]!==void 0&&(e=Gm[e],r="-"),"https://".concat(e).concat(r).concat(s,"/2/")):"https://".concat(s,"/2/")},T3=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zy;return e!==zy&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},By=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mu,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==mu&&(r=Gm[r],s="-"),"https://".concat(r).concat(s).concat(e,"/oauth2/token")};function $y(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,S3)}function k3(t){return new Date(Date.now()+t*1e3)}function Gy(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof Oj>"u"||typeof window<"u"}function vh(){return typeof window<"u"}function bh(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Jl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function bc(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bc=function(s){return typeof s}:bc=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},bc(t)}function I3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ba(t,e)}function C3(t){var e=Rj();return function(){var r=$a(t),i;if(e){var o=$a(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return P3(this,i)}}function P3(t,e){return e&&(bc(e)==="object"||typeof e=="function")?e:R3(t)}function R3(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hm(t){var e=typeof Map=="function"?new Map:void 0;return Hm=function(r){if(r===null||!D3(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return wc(r,arguments,$a(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Ba(i,r)},Hm(t)}function wc(t,e,s){return Rj()?wc=Reflect.construct:wc=function(i,o,a){var c=[null];c.push.apply(c,o);var u=Function.bind.apply(i,c),d=new u;return a&&Ba(d,a.prototype),d},wc.apply(null,arguments)}function Rj(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function D3(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ba(t,e){return Ba=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},Ba(t,e)}function $a(t){return $a=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},$a(t)}var L3=function(t){A3(s,t);var e=C3(s);function s(r,i,o){var a;return I3(this,s),a=e.call(this,"Response failed with a ".concat(r," code")),a.name="DropboxResponseError",a.status=r,a.headers=i,a.error=o,a}return s}(Hm(Error));function M3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Dj=function t(e,s,r){M3(this,t),this.status=e,this.headers=s,this.result=r};function Lj(t){return t.text().then(function(e){var s;try{s=JSON.parse(e)}catch{s=e}throw new L3(t.status,t.headers,s)})}function pu(t){return t.ok?t.text().then(function(e){var s;try{s=JSON.parse(e)}catch{s=e}return new Dj(t.status,t.headers,s)}):Lj(t)}function V3(t){return t.ok?new Promise(function(e){Gy()?t.blob().then(function(s){return e(s)}):t.buffer().then(function(s){return e(s)})}).then(function(e){var s=JSON.parse(t.headers.get("dropbox-api-result"));return Gy()?s.fileBlob=e:s.fileBinary=e,new Dj(t.status,t.headers,s)}):Lj(t)}function O3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F3(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q3(t,e,s){return e&&F3(t.prototype,e),t}var Xl,yn,wh,U3=300*1e3,Hy=128,z3=["legacy","offline","online"],B3=["code","token"],$3=["none","user","team"],G3=function(){function t(e){O3(this,t),e=e||{},vh()?(Xl=window.fetch.bind(window),yn=window.crypto||window.msCrypto):bh()?(Xl=self.fetch.bind(self),yn=self.crypto):(Xl=require("node-fetch"),yn=require("crypto")),typeof TextEncoder>"u"?wh=require("util").TextEncoder:wh=TextEncoder,this.fetch=e.fetch||Xl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return q3(t,[{key:"setAccessToken",value:function(s){this.accessToken=s}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(s){this.clientId=s}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(s){this.clientSecret=s}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(s){this.refreshToken=s}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(s){this.accessTokenExpiresAt=s}},{key:"setCodeVerifier",value:function(s){this.codeVerifier=s}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var s=this,r=new wh,i=r.encode(this.codeVerifier),o;if(vh()||bh())return yn.subtle.digest("SHA-256",i).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));o=Jl(u).substr(0,128),s.codeChallenge=o});var a=yn.createHash("sha256").update(i).digest();return o=Jl(a),this.codeChallenge=o,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var s;if(vh()||bh()){var r=new Uint8Array(Hy),i=yn.getRandomValues(r),o=btoa(i);s=Jl(o).substr(0,128)}else{var a=yn.randomBytes(Hy);s=Jl(a).substr(0,128)}return this.codeVerifier=s,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(s,r){var i=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,m=this.getClientId(),p=T3(this.domain);if(!m)throw new Error("A client id is required. You can set the client id using .setClientId().");if(o!=="code"&&!s)throw new Error("A redirect uri is required.");if(!B3.includes(o))throw new Error("Authorization type must be code or token");if(a&&!z3.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!$3.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var g;return o==="code"?g="".concat(p,"?response_type=code&client_id=").concat(m):g="".concat(p,"?response_type=token&client_id=").concat(m),s&&(g+="&redirect_uri=".concat(s)),r&&(g+="&state=".concat(r)),a&&(g+="&token_access_type=".concat(a)),c&&(g+="&scope=".concat(c.join(" "))),u!=="none"&&(g+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return g+="&code_challenge_method=S256",g+="&code_challenge=".concat(i.codeChallenge),g}):Promise.resolve(g)}},{key:"getAccessTokenFromCode",value:function(s,r){var i=this.getClientId(),o=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=By(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(r),a+="&client_id=".concat(i),o)a+="&client_secret=".concat(o);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}s&&(a+="&redirect_uri=".concat(s));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return pu(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var s=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+U3)>=this.getAccessTokenExpiresAt(),i=!this.getAccessToken();return(r||i)&&s?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var s=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.getClientId(),o=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var a=By(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:i,refresh_token:this.getRefreshToken()};o&&(u.client_secret=o),r&&(u.scope=r.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(i),o&&(a+="&client_secret=".concat(o)),r&&(a+="&scope=".concat(r.join(" ")));return this.fetch(a,c).then(function(d){return pu(d)}).then(function(d){s.setAccessToken(d.result.access_token),s.setAccessTokenExpiresAt(k3(d.result.expires_in))})}}]),t}();function H3(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W3(t,e){for(var s=0;s<e.length;s++){var r=e[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q3(t,e,s){return e&&W3(t.prototype,e),t}var K3=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,Es=function(){function t(e){H3(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new G3(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,P)}return Q3(t,[{key:"request",value:function(s,r,i,o,a){switch(a){case w3:return this.rpcRequest(s,r,i,o);case j3:return this.downloadRequest(s,r,i,o);case _3:return this.uploadRequest(s,r,i,o);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(s,r,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(i,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(yh(o,a.domain,a.domainDelimiter)+s,c)}).then(function(c){return pu(c)})}},{key:"downloadRequest",value:function(s,r,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":$y(r)}};return a.setAuthHeaders(i,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(yh(o,a.domain,a.domainDelimiter)+s,c)}).then(function(c){return V3(c)})}},{key:"uploadRequest",value:function(s,r,i,o){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=r.contents;delete r.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":$y(r)}};return a.setAuthHeaders(i,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(yh(o,a.domain,a.domainDelimiter)+s,c)}).then(function(c){return pu(c)})}},{key:"setAuthHeaders",value:function(s,r){if(s.split(",").length>1){var i=s.replace(" ","").split(",");i.includes(gh)&&this.auth.getAccessToken()?s=gh:i.includes(xh)&&this.auth.getAccessToken()?s=xh:i.includes(fh)&&(s=fh)}switch(s){case fh:if(this.auth.clientId&&this.auth.clientSecret){var o=K3("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(o)}break;case xh:case gh:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case N3:case E3:break;default:throw new Error("Unhandled auth type: ".concat(s))}}},{key:"setCommonHeaders",value:function(s){var r=this;if(this.selectUser&&(s.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(s.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(s.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var i=Object.keys(this.customHeaders);i.forEach(function(o){s.headers[o]=r.customHeaders[o]})}}}]),t}();async function zr(){try{let t;window.location.hostname.includes("netlify.app")?t="/.netlify/functions/dropbox-token":t="https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token",console.log(`Récupération du token Dropbox depuis: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Erreur: ${e.status}`);return(await e.json()).access_token}catch(t){throw console.error("Erreur lors de la récupération du token Dropbox:",t),t}}function Jf({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:s=!1}){const[r,i]=T.useState(null),[o,a]=T.useState(!1),[c,u]=T.useState(null),[d,m]=T.useState({isOpen:!1,type:null,title:"",message:""}),p=E=>{E.target.files&&E.target.files.length>0&&i(E.target.files[0])},g=()=>{m(E=>({...E,isOpen:!1}))},y=async()=>{if(!r)return;a(!0);const E=new Es({accessToken:await zr()});let A=!1,R="";try{const b=await E.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});A=!0,R=b.result.path_display||b.result.path_lower||"/"+r.name,console.log("Upload réussi!",b);try{const C=(await E.sharingCreateSharedLinkWithSettings({path:R})).result.url.replace("?dl=0","?raw=1");u(C),t&&t(C),m({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox et est prêt à être utilisé.",fileName:r.name,url:C})}catch(w){console.error("Erreur lors de la création du lien partageable:",w),m({isOpen:!0,type:"warning",title:"Upload réussi avec avertissement",message:"Le fichier a été uploadé avec succès, mais la création du lien a échoué. Vous ne pourrez pas y accéder directement.",fileName:r.name})}}catch(b){console.error("Erreur lors de l'upload:",b),m({isOpen:!0,type:"error",title:"Échec de l'upload",message:b instanceof Error?`${b.message} (${b.constructor.name})`:String(b),fileName:r.name})}a(!1),A&&!d.isOpen&&m({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox.",fileName:r.name})};return n.jsxs("div",{className:s?"flex items-center":"space-y-3",children:[n.jsx("div",{className:s?"flex-grow mr-2":"mb-2",children:n.jsx("input",{type:"file",onChange:p,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),n.jsx("button",{onClick:y,disabled:!r||o,className:`${s?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:o?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bj,{className:"w-4 h-4 mr-2"}),e]})}),c&&!s&&n.jsx("div",{className:"mt-2 text-sm text-gray-600",children:n.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})}),d.isOpen&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto overflow-hidden",children:[n.jsxs("div",{className:`py-4 px-5 flex items-center ${d.type==="success"?"bg-green-50":d.type==="error"?"bg-red-50":"bg-yellow-50"}`,children:[n.jsxs("div",{className:"flex-shrink-0 mr-3",children:[d.type==="success"&&n.jsx(Ln,{className:"h-6 w-6 text-green-500"}),d.type==="error"&&n.jsx(F5,{className:"h-6 w-6 text-red-500"}),d.type==="warning"&&n.jsx(Hs,{className:"h-6 w-6 text-yellow-500"})]}),n.jsx("h3",{className:`text-lg font-medium ${d.type==="success"?"text-green-800":d.type==="error"?"text-red-800":"text-yellow-800"}`,children:d.title}),n.jsx("button",{onClick:g,className:"ml-auto bg-transparent text-gray-400 hover:text-gray-600",children:n.jsx(si,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-5",children:[n.jsx("div",{className:"mb-4",children:n.jsx("p",{className:"text-gray-700",children:d.message})}),d.fileName&&n.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md mb-4",children:[n.jsx(Ke,{className:"h-5 w-5 text-gray-500 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",title:d.fileName,children:d.fileName})]}),d.url&&n.jsx("div",{className:"mb-4",children:n.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-100 rounded-md hover:bg-blue-100 transition-colors",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Accéder au fichier"]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium rounded-md transition-colors",children:"Fermer"})})]})]})})]})}function Y3({onSelect:t,showTitle:e=!0}){const[s,r]=T.useState([]),[i,o]=T.useState(!0),[a,c]=T.useState(null),[u,d]=T.useState(""),[m,p]=T.useState([]),[g,y]=T.useState(""),E=T.useCallback(j=>{var v;const x=((v=j.split(".").pop())==null?void 0:v.toLowerCase())||"";return["pdf"].includes(x)?"pdf":["doc","docx"].includes(x)?"docx":["xls","xlsx"].includes(x)?"xlsx":["ppt","pptx"].includes(x)?"pptx":["txt"].includes(x)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(x)?"image":["mp4","webm","mkv","avi","mov"].includes(x)?"video":["mp3","wav","ogg"].includes(x)?"audio":["zip","rar","7z","tar","gz"].includes(x)?"zip":"link"},[]),A=j=>{if(j===0)return"0 Bytes";const x=1024,v=["Bytes","KB","MB","GB","TB"],k=Math.floor(Math.log(j)/Math.log(x));return parseFloat((j/Math.pow(x,k)).toFixed(2))+" "+v[k]},R=async()=>{try{const j=await zr();return new Es({accessToken:j})}catch(j){return console.error("Échec de la création du client Dropbox:",j),c("Impossible de se connecter à Dropbox. Vérifiez votre connexion et les permissions."),null}},b=T.useCallback(async(j="")=>{o(!0),c(null);try{const x=await R();if(!x){o(!1);return}const v=await x.filesListFolder({path:j,include_deleted:!1}),k=[];for(const N of v.result.entries)if(N[".tag"]==="file"||N[".tag"]==="folder"){const I=N[".tag"]==="folder",S={id:N.id||N.path_lower||"",name:N.name,path:N.path_lower||"",fileType:I?"folder":E(N.name),size:I?0:N.size||0,isFolder:I};k.push(S)}k.sort((N,I)=>N.isFolder&&!I.isFolder?-1:!N.isFolder&&I.isFolder?1:N.name.localeCompare(I.name)),r(k),d(j)}catch(x){console.error("Erreur lors du chargement des fichiers Dropbox:",x),c("Impossible de charger les fichiers depuis Dropbox. Veuillez réessayer.")}finally{o(!1)}},[r,d,o,c,E]),w=async j=>{var x;if(j.url)return j.url;try{const v=await R();if(!v)return null;let k;try{k=await v.sharingCreateSharedLinkWithSettings({path:j.path})}catch(I){const S=I;if(S.status===409&&((x=S.error)!=null&&x.shared_link_already_exists))try{const se=await v.sharingListSharedLinks({path:j.path,direct_only:!0});if(se.result.links&&se.result.links.length>0)k={result:se.result.links[0]};else throw new Error("Aucun lien partagé trouvé")}catch(se){throw console.error("Erreur lors de la récupération des liens existants:",se),se}else throw S}const N=k.result.url.replace("?dl=0","?raw=1");return r(I=>I.map(S=>S.id===j.id?{...S,url:N}:S)),N}catch(v){return console.error("Erreur lors de la création du lien partageable:",v),c("Impossible de créer un lien pour ce fichier. Vérifiez les permissions dans Dropbox."),null}},C=j=>{p([...m,u]),b(j.path)},D=async j=>{if(j.isFolder){C(j);return}const x=await w(j);x&&t(x,j.name,j.fileType)},L=()=>{if(m.length>0){const j=m[m.length-1];p(m.slice(0,-1)),b(j)}},O=g?s.filter(j=>j.name.toLowerCase().includes(g.toLowerCase())):s;return T.useEffect(()=>{b()},[b]),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&n.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[n.jsx("button",{onClick:L,disabled:m.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:g,onChange:j=>y(j.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.jsx("button",{onClick:()=>b(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),n.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),a&&n.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[n.jsx("p",{children:a}),n.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accès Dropbox est configuré correctement dans vos variables d'environnement."}),n.jsx("button",{onClick:()=>b(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Réessayer"})]}),i?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):O.length>0?n.jsx("div",{className:"max-h-80 overflow-y-auto",children:n.jsx("ul",{className:"space-y-1",children:O.map(j=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>D(j),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[n.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:j.isFolder?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):j.fileType==="pdf"?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):j.fileType==="image"?n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),!j.isFolder&&n.jsx("div",{className:"text-xs text-gray-500",children:A(j.size)})]})]})},j.id))})}):n.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouvé."})]})]})}const J3=()=>{const[t]=pw(),e=os(),{currentUser:s}=nt(),{resources:r,addResource:i,updateResource:o,deleteResource:a}=di(),c=t.get("new")==="resource",u=t.get("edit"),[d,m]=T.useState(""),[p,g]=T.useState(""),[y,E]=T.useState("post-cps"),[A,R]=T.useState(""),[b,w]=T.useState(""),[C,D]=T.useState("link"),[L,O]=T.useState(!1),[j,x]=T.useState(!1),[v,k]=T.useState(""),[N,I]=T.useState([]),[S,se]=T.useState(!1),[xe,Ie]=T.useState(null),[H,F]=T.useState(""),[Y,te]=T.useState(!1),ie=["visa","logement","inscription","documents-administratifs","assurance","transport","finances","santé","cours-préparatoires","vie-étudiante","culture-française","emploi-stage","outils-informatiques","bourses","calendrier-académique","restauration","bibliothèque","sport","associations-étudiantes","procédures-campus-france"],de=[...new Set([...ie,...r.map(q=>q.category).filter(Boolean)])],fe=async()=>{se(!0),F("");try{const Ve=(await new Es({accessToken:await zr()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(De=>De[".tag"]==="file").map(De=>({id:De.id,name:De.name,path_lower:De.path_lower||"",path_display:De.path_display||De.name,size:"size"in De?De.size:void 0,client_modified:"client_modified"in De?De.client_modified:void 0,is_downloadable:!0}));I(Ve)}catch(q){console.error("Erreur lors de la récupération des fichiers:",q),q instanceof Error?F(`Erreur lors de la récupération des fichiers: ${q.message}`):F(`Erreur lors de la récupération des fichiers: ${String(q)}`)}finally{se(!1)}},He=async q=>{var he;try{const ne=new Es({accessToken:await zr()});let Ve="";try{Ve=(await ne.sharingCreateSharedLinkWithSettings({path:q.path_lower})).result.url}catch(Ws){const hn=Ws;if(hn.status===409||hn.error&&hn.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const mn=await ne.sharingListSharedLinks({path:q.path_lower,direct_only:!0});if(mn.result.links&&mn.result.links.length>0)Ve=mn.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw Ws}const De=Ve.replace("?dl=0","?raw=1");Ie({...q,shared_link:{url:De}}),w(De),k(q.name),F("");const tt=((he=q.name.split(".").pop())==null?void 0:he.toLowerCase())||"";return tt==="pdf"?D("pdf"):["doc","docx"].includes(tt)?D("docx"):["xls","xlsx"].includes(tt)?D("xlsx"):["ppt","pptx"].includes(tt)?D("pptx"):tt==="txt"?D("txt"):["jpg","jpeg","png","gif","webp","svg"].includes(tt)?D("image"):["mp4","webm","avi","mov"].includes(tt)?D("video"):["mp3","wav","ogg"].includes(tt)?D("audio"):["zip","rar","tar","gz"].includes(tt)?D("zip"):D("link"),De}catch(ne){console.error("Erreur lors de la création du lien de partage:",ne),ne instanceof Error?F(`Erreur lors de la création du lien de partage: ${ne.message}`):F(`Erreur lors de la création du lien de partage: ${String(ne)}`)}};T.useEffect(()=>{if(u){const q=r.find(he=>he.id===u);q&&(m(q.title),g(q.description),E(q.phase),R(q.category),w(q.fileUrl),D(q.fileType))}else c&&(m(""),g(""),E("post-cps"),R(""),w(""),D("link"),fe())},[u,c,r]);const Dt=q=>{q.preventDefault(),u?(o(u,{title:d,description:p,phase:y,category:A,fileUrl:b,fileType:C}),Xs({type:"Modification",target:"Ressource",targetId:u,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:d}})):(i({title:d,description:p,phase:y,category:A,fileUrl:b,fileType:C,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Xs({type:"Ajout",target:"Ressource",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:d}})),e("/admin")},ut=()=>{O(!0)},G=()=>{u&&(a(u),Xs({type:"Suppression",target:"Ressource",targetId:u,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:d}}),e("/admin"))},Z={"post-cps":r.filter(q=>q.phase==="post-cps"),"during-process":r.filter(q=>q.phase==="during-process"),"pre-arrival":r.filter(q=>q.phase==="pre-arrival")},me=q=>{switch(q){case"pdf":case"doc":case"docx":case"txt":return n.jsx(Ke,{className:"w-5 h-5 text-blue-600"});case"image":return n.jsx(v5,{className:"w-5 h-5 text-green-600"});case"link":return n.jsx(dh,{className:"w-5 h-5 text-purple-600"});default:return n.jsx(b5,{className:"w-5 h-5 text-gray-600"})}};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),n.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsx("form",{onSubmit:Dt,className:"space-y-7",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),n.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:q=>m(q.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),n.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:p,onChange:q=>g(q.target.value),required:!0})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),n.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:y,onChange:q=>E(q.target.value),required:!0,children:[n.jsx("option",{value:"post-cps",children:"Post-CPS"}),n.jsx("option",{value:"during-process",children:"Pendant les démarches"}),n.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),n.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:A,onChange:q=>R(q.target.value),required:!0}),n.jsx("datalist",{id:"categories",children:de.map((q,he)=>n.jsx("option",{value:q},he))})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),n.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:C,onChange:q=>D(q.target.value),required:!0,children:[n.jsxs("optgroup",{label:"Documents",children:[n.jsx("option",{value:"pdf",children:"PDF"}),n.jsx("option",{value:"doc",children:"Word (.doc)"}),n.jsx("option",{value:"docx",children:"Word (.docx)"}),n.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),n.jsxs("optgroup",{label:"Tableurs",children:[n.jsx("option",{value:"xls",children:"Excel (.xls)"}),n.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),n.jsxs("optgroup",{label:"Présentations",children:[n.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),n.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),n.jsxs("optgroup",{label:"Médias",children:[n.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),n.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),n.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),n.jsxs("optgroup",{label:"Autres",children:[n.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),n.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:C==="link"?"URL du lien":"URL du fichier"}),C!=="link"&&n.jsxs("div",{className:"rounded-md bg-blue-50 p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(M5,{className:"w-5 h-5 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),n.jsx("div",{className:"mt-2 text-sm text-blue-700 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),n.jsx(Jf,{onSuccess:q=>{w(q),k(q.split("/").pop()||"")},buttonText:"Uploader le fichier vers Dropbox"})]}),C==="link"&&n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex flex-col space-y-4 mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[n.jsx(fj,{className:"w-4 h-4 text-blue-600 mr-2"}),"Fichiers Dropbox"]}),n.jsx("button",{type:"button",onClick:()=>{te(!Y),Y||fe()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",children:Y?n.jsxs(n.Fragment,{children:[n.jsx(si,{className:"w-3 h-3 mr-1"}),"Masquer"]}):n.jsxs(n.Fragment,{children:[n.jsx(uh,{className:"w-3 h-3 mr-1"}),"Explorer"]})})]}),Y&&n.jsxs("div",{className:"mt-2 border rounded-md",children:[n.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 border-b",children:[n.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Fichiers disponibles"}),n.jsx("div",{className:"flex space-x-2",children:n.jsxs("button",{type:"button",onClick:fe,className:"inline-flex items-center p-1 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100",disabled:S,children:[S?n.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}):n.jsx(Wf,{className:"w-3 h-3"}),n.jsx("span",{className:"ml-1",children:"Actualiser"})]})})]}),H&&n.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(f5,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),n.jsx("span",{children:H})]})}),S?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):N.length>0?n.jsx("div",{className:"max-h-60 overflow-y-auto",children:n.jsx("ul",{className:"divide-y",children:N.map(q=>n.jsx("li",{children:n.jsxs("div",{className:`flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer ${(xe==null?void 0:xe.id)===q.id?"bg-blue-50":""}`,onClick:()=>Ie(q),children:[n.jsxs("div",{className:"flex items-center flex-grow pr-3 truncate",children:[n.jsx(Ke,{className:"w-4 h-4 text-blue-600 mr-2 flex-shrink-0"}),n.jsxs("div",{className:"truncate",children:[n.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:q.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[q.size?`${Math.round(q.size/1024)} Ko`:"",q.client_modified?` • ${new Date(q.client_modified).toLocaleDateString()}`:""]})]})]}),n.jsxs("button",{type:"button",className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex items-center",onClick:he=>{he.stopPropagation(),He(q)},children:[n.jsx(Vr,{className:"w-3 h-3 mr-1"}),"Utiliser"]})]})},q.id))})}):n.jsx("div",{className:"py-8 text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:N.length===0&&!H?"Cliquez sur Actualiser pour afficher vos fichiers.":"Aucun fichier trouvé."})})]}),n.jsx("div",{className:"flex items-center space-x-3",children:n.jsxs("button",{type:"button",onClick:()=>x(!0),className:"flex-1 flex items-center justify-center gap-2 p-2 border border-blue-200 rounded-md bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm transition-colors",children:[n.jsx(uh,{className:"w-4 h-4 text-blue-600"}),"Parcourir Dropbox"]})}),xe&&xe.shared_link&&n.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-100 rounded-md",children:[n.jsxs("div",{className:"flex items-center text-sm text-green-800 mb-2",children:[n.jsx(Ln,{className:"w-4 h-4 mr-2 text-green-600"}),"Fichier sélectionné : ",xe.name]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",readOnly:!0,value:xe.shared_link.url,className:"flex-1 text-xs py-1 px-2 bg-white border rounded-l-md focus:outline-none"}),n.jsx("button",{type:"button",className:"bg-blue-600 text-white py-1 px-2 rounded-r-md text-xs",onClick:()=>{navigator.clipboard.writeText(xe.shared_link.url)},children:n.jsx(Ua,{className:"w-3 h-3"})})]})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:n.jsx(dh,{className:"w-5 h-5 text-gray-500"})}),n.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (Dropbox/Google Drive/etc.)",value:b,onChange:q=>w(q.target.value),required:!0}),v&&n.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",v]})]})]}),C!=="link"&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:n.jsx(dh,{className:"w-5 h-5 text-gray-500"})}),n.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (générée automatiquement)",value:b,onChange:q=>w(q.target.value),required:!0})]}),n.jsx("button",{type:"button",onClick:()=>x(!0),className:"ml-2 p-2.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md transition-colors",title:"Parcourir les fichiers existants",children:n.jsx(uh,{className:"w-5 h-5"})})]}),v&&n.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",v]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{children:u&&n.jsxs("button",{type:"button",onClick:ut,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[n.jsx(za,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),n.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[n.jsx($m,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),n.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[n.jsx(Vn,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Z["post-cps"])&&Z["post-cps"].length>0?n.jsx("ul",{className:"space-y-2",children:Z["post-cps"].map(q=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===q.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:me(q.fileType)}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("span",{className:"block text-sm font-medium",children:q.title}),n.jsx("span",{className:"block text-xs text-gray-500",children:q.category})]})]})},q.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Z["during-process"])&&Z["during-process"].length>0?n.jsx("ul",{className:"space-y-2",children:Z["during-process"].map(q=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===q.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:me(q.fileType)}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("span",{className:"block text-sm font-medium",children:q.title}),n.jsx("span",{className:"block text-xs text-gray-500",children:q.category})]})]})},q.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Z["pre-arrival"])&&Z["pre-arrival"].length>0?n.jsx("ul",{className:"space-y-2",children:Z["pre-arrival"].map(q=>n.jsx("li",{children:n.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===q.id?"bg-blue-50 border border-blue-200":""}`,children:[n.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:me(q.fileType)}),n.jsxs("div",{className:"flex-grow",children:[n.jsx("span",{className:"block text-sm font-medium",children:q.title}),n.jsx("span",{className:"block text-xs text-gray-500",children:q.category})]})]})},q.id))}):n.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),n.jsx(Qf,{isOpen:L,onClose:()=>O(!1),onConfirm:G,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${d}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),j&&n.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:n.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sélectionner un fichier Dropbox"}),n.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:n.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsx("div",{className:"flex-grow overflow-y-auto",children:n.jsx(Y3,{onSelect:(q,he,ne)=>{w(q),k(he),D(ne==="pdf"?"pdf":ne==="docx"?"docx":ne==="xlsx"?"xlsx":ne==="pptx"?"pptx":ne==="txt"?"txt":ne==="image"?"image":ne==="video"?"video":ne==="audio"?"audio":ne==="zip"?"zip":"link"),x(!1)},showTitle:!1})}),n.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:n.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},Mj=({open:t,onClose:e,onSubmit:s,loading:r=!1,error:i})=>{const[o,a]=T.useState(""),c=u=>{u.preventDefault(),s(o)};return Ha.useEffect(()=>{t||a("")},[t]),t?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),n.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),n.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[n.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:o,onChange:u=>a(u.target.value),disabled:r,autoFocus:!0}),i&&n.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||o==="",children:"Valider"})]})]})}):null};var Vj={};async function X3(t){let e=[],s;do{const i=await(await fetch(`https://identitytoolkit.googleapis.com/v1/projects/${Vj.REACT_APP_FIREBASE_PROJECT_ID}/accounts:batchGet?key=${t}`+(s?`&nextPageToken=${s}`:""),{method:"GET"})).json();i&&i.users&&(e=e.concat(i.users)),s=i.nextPageToken}while(s);return e}const Z3=()=>{const[t,e]=T.useState(!1),[s,r]=T.useState(!1),[i,o]=T.useState(null),[a,c]=T.useState(null),[u,d]=T.useState([]),[m,p]=T.useState(!0),[g,y]=T.useState(null),[E,A]=T.useState([]),[R,b]=T.useState(!1),[w,C]=T.useState([]),{currentUser:D}=nt(),L=os(),O=Vj.REACT_APP_FIREBASE_API_KEY||"",j=async()=>{p(!0),y(null);try{const N=await Jt(Ge(le,"users")),I=[];N.forEach(S=>{I.push(S.data())}),d(I)}catch{y("Erreur lors du chargement des utilisateurs.")}finally{p(!1)}};T.useEffect(()=>{j()},[]),T.useEffect(()=>{(async()=>{b(!0);try{if(!O)return;const I=await X3(O);A(I)}catch{}finally{b(!1)}})()},[O]),T.useEffect(()=>{if(E.length&&u.length){const N=E.filter(I=>!u.some(S=>S.uid===I.localId));C(N)}},[E,u]);const x=async(N,I)=>{e(!0),c({uid:N,isAdmin:I}),o(null)},v=async N=>{if(!a)return;if(r(!0),o(null),N!=="ngiryallahrek"){o("Mot de passe incorrect."),r(!1);return}const I=u.find(S=>S.uid===a.uid);if(I!=null&&I.isSuperAdmin&&I.uid!==(D==null?void 0:D.uid)){o("Impossible de modifier le rôle d'un admin principal."),r(!1);return}try{await Dn(Fe(le,"users",a.uid),{isAdmin:!a.isAdmin}),d(S=>S.map(se=>se.uid===a.uid?{...se,isAdmin:!a.isAdmin}:se)),e(!1),c(null)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{r(!1)}},k=async N=>{try{await Mr(Fe(le,"users",N.localId),{uid:N.localId,email:N.email,displayName:N.displayName||"",isAdmin:!1,emailVerified:N.emailVerified||!1,photoURL:N.photoUrl||""}),j()}catch(I){alert("Erreur lors de la création du profil Firestore : "+I.message)}};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[n.jsxs("button",{onClick:()=>L("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[R?n.jsxs("div",{className:"mb-6 flex items-center text-yellow-600",children:[n.jsx(Hs,{className:"w-5 h-5 mr-2"})," Chargement des utilisateurs Firebase Auth..."]}):w.length>0&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:[n.jsxs("div",{className:"font-bold text-yellow-800 mb-2 flex items-center",children:[n.jsx(Hs,{className:"w-5 h-5 mr-2"})," Utilisateurs sans profil Firestore"]}),n.jsx("ul",{className:"mb-2 text-sm",children:w.map(N=>n.jsxs("li",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-mono text-gray-700",children:N.email}),n.jsx("button",{onClick:()=>k(N),className:"ml-2 px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",children:"Créer le profil Firestore"})]},N.localId))}),n.jsxs("div",{className:"text-xs text-yellow-700",children:["Ces utilisateurs existent dans l’authentification Firebase mais n’ont pas encore de document dans la collection ",n.jsx("b",{children:"users"}),"."]})]}),m?n.jsx("div",{children:"Chargement..."}):g?n.jsx("div",{className:"text-red-600",children:g}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-100",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-2",children:"Nom"}),n.jsx("th",{className:"px-4 py-2",children:"Email"}),n.jsx("th",{className:"px-4 py-2",children:"Admin"}),n.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(N=>n.jsxs("tr",{children:[n.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>L(`/admin/users/${N.uid}`),children:[N.photoURL?n.jsx("img",{src:N.photoURL,alt:N.displayName||N.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):n.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:n.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),N.displayName||N.email,N.isSuperAdmin&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),N.uid===(D==null?void 0:D.uid)&&n.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),n.jsx("td",{className:"px-4 py-2",children:N.email}),n.jsxs("td",{className:"px-4 py-2",children:[N.isAdmin?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[n.jsx(Xt,{className:"w-4 h-4 mr-1"})," Admin"]}):n.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),N.isSuperAdmin&&n.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),n.jsxs("td",{className:"px-4 py-2",children:[N.uid!==(D==null?void 0:D.uid)&&!N.isSuperAdmin&&n.jsx("button",{onClick:()=>x(N.uid,N.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${N.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:N.isAdmin?n.jsxs(n.Fragment,{children:[n.jsx(wj,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):n.jsxs(n.Fragment,{children:[n.jsx(_j,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),N.uid!==(D==null?void 0:D.uid)&&N.isSuperAdmin&&n.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},N.uid))})]})})]}),n.jsx(Mj,{open:t,onClose:()=>{e(!1),c(null),o(null)},onSubmit:v,loading:s,error:i})]})},e6=()=>{const[t,e]=T.useState(!1),[s,r]=T.useState(!1),[i,o]=T.useState(null),[a,c]=T.useState(!1),{uid:u}=fS(),d=os(),{currentUser:m}=nt(),[p,g]=T.useState(null),[y,E]=T.useState(!0),[A,R]=T.useState(null),[b,w]=T.useState(!1);T.useEffect(()=>{u&&(async()=>{E(!0),R(null);try{const k=Fe(le,"users",u),N=await or(k);N.exists()?g(N.data()):R("Utilisateur introuvable.")}catch{R("Erreur lors du chargement du profil utilisateur.")}finally{E(!1)}})()},[u]);const C=async()=>{e(!0),o(null)},D=async v=>{if(p){if(r(!0),o(null),v!=="ngiryallahrek"){o("Mot de passe incorrect."),r(!1);return}w(!0);try{await Dn(Fe(le,"users",p.uid),{isAdmin:!p.isAdmin}),g({...p,isAdmin:!p.isAdmin}),e(!1)}catch{o("Erreur lors de la mise à jour du statut administrateur.")}finally{w(!1),r(!1)}}},L=()=>{if(p){if(p.uid===(m==null?void 0:m.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}c(!0)}},O=async()=>{if(p){w(!0);try{await ua(Fe(le,"users",p.uid)),d("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{w(!1)}}},j=v=>{p&&g({...p,[v.target.name]:v.target.value})},x=async()=>{if(p){w(!0);try{await Dn(Fe(le,"users",p.uid),{displayName:p.displayName,photoURL:p.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{w(!1)}}};return y?n.jsx("div",{className:"p-8",children:"Chargement..."}):A?n.jsx("div",{className:"p-8 text-red-600",children:A}):p?n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[n.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[n.jsx("div",{className:"relative mb-6",children:p.photoURL?n.jsx("img",{src:p.photoURL,alt:p.displayName||p.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):n.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:n.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),n.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(p==null?void 0:p.displayName)||"",onChange:j,disabled:b||(p==null?void 0:p.isSuperAdmin)&&(p==null?void 0:p.uid)!==(m==null?void 0:m.uid)}),(p==null?void 0:p.isSuperAdmin)&&n.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),n.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(p==null?void 0:p.photoURL)||"",onChange:j,disabled:b}),n.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[n.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",p.email]}),n.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[n.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",p.emailVerified?"Oui":"Non"]}),n.jsxs("div",{className:"mb-6 w-full text-center",children:[n.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",p.isAdmin?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[n.jsx(Xt,{className:"w-5 h-5 mr-1"})," Admin"]}):n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[p.uid!==(m==null?void 0:m.uid)&&n.jsx("button",{onClick:C,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${p.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:b||(p==null?void 0:p.isSuperAdmin)&&(p==null?void 0:p.uid)!==(m==null?void 0:m.uid),children:p.isAdmin?n.jsxs(n.Fragment,{children:[n.jsx(wj,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):n.jsxs(n.Fragment,{children:[n.jsx(_j,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),p.uid!==(m==null?void 0:m.uid)&&n.jsxs("button",{onClick:L,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:b||(p==null?void 0:p.isSuperAdmin)&&(p==null?void 0:p.uid)!==(m==null?void 0:m.uid),children:[n.jsx(za,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),n.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:x,disabled:b||(p==null?void 0:p.isSuperAdmin)&&(p==null?void 0:p.uid)!==(m==null?void 0:m.uid),title:p!=null&&p.isSuperAdmin&&(p==null?void 0:p.uid)!==(m==null?void 0:m.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),n.jsx(Mj,{open:t,onClose:()=>{e(!1),o(null)},onSubmit:D,loading:s,error:i}),n.jsx(Qf,{isOpen:a,onClose:()=>c(!1),onConfirm:O,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(p==null?void 0:p.displayName)||(p==null?void 0:p.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},t6=()=>{const[t,e]=T.useState([]),[s,r]=T.useState(!0),[i,o]=T.useState(""),[a,c]=T.useState("all"),[u,d]=T.useState("all"),[m,p]=T.useState("all"),[g,y]=T.useState(!1),[E,A]=T.useState(null),[R,b]=T.useState(!0),w=20,C=x=>{const v=new Date(x);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)},D=()=>{const x=new Date;let v=null;switch(m){case"today":v=new Date(x.setHours(0,0,0,0));break;case"week":v=new Date,v.setDate(x.getDate()-7);break;case"month":v=new Date,v.setMonth(x.getMonth()-1);break;default:v=null}return v},L=async(x=!0)=>{try{x?(r(!0),A(null)):y(!0);let v=In(Ge(le,"adminActivityLog"),Ff("date","desc"));const k=D();k&&(v=In(v,Of("date",">=",k.toISOString()))),v=In(v,cu(w));const N=await Jt(v);b(N.docs.length===w),N.docs.length>0?A(N.docs[N.docs.length-1]):(A(null),b(!1));let S=N.docs.map(se=>({id:se.id,...se.data()}));if(a!=="all"&&(S=S.filter(se=>se.type===a)),u!=="all"&&(S=S.filter(se=>se.target===u)),i){const se=i.toLowerCase();S=S.filter(xe=>{var Ie;return((Ie=xe.user)==null?void 0:Ie.toLowerCase().includes(se))||xe.target.toLowerCase().includes(se)||xe.type.toLowerCase().includes(se)||xe.details&&JSON.stringify(xe.details).toLowerCase().includes(se)})}e(x?S:se=>[...se,...S])}catch(v){console.error("Error fetching activities:",v)}finally{r(!1),y(!1)}};T.useEffect(()=>{L()},[]),T.useEffect(()=>{L()},[a,u,m]);const O=x=>{let v="bg-blue-100 text-blue-800";switch(x.toLowerCase()){case"ajout":v="bg-green-100 text-green-800";break;case"suppression":v="bg-red-100 text-red-800";break;case"modification":v="bg-yellow-100 text-yellow-800";break}return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:x})},j=x=>{let v="bg-gray-100 text-gray-800";switch(x.toLowerCase()){case"ressource":v="bg-purple-100 text-purple-800";break;case"section":v="bg-indigo-100 text-indigo-800";break;case"faq":v="bg-blue-100 text-blue-800";break;case"utilisateur":v="bg-pink-100 text-pink-800";break}return n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:x})};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Q,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:n.jsx(Rt,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),n.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ti,{className:"h-5 w-5 text-gray-400"})}),n.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:i,onChange:x=>o(x.target.value)})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("div",{className:"relative flex-1",children:n.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:x=>c(x.target.value),children:[n.jsx("option",{value:"all",children:"Toutes les actions"}),n.jsx("option",{value:"Ajout",children:"Ajout"}),n.jsx("option",{value:"Modification",children:"Modification"}),n.jsx("option",{value:"Suppression",children:"Suppression"})]})}),n.jsx("div",{className:"relative flex-1",children:n.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:x=>d(x.target.value),children:[n.jsx("option",{value:"all",children:"Toutes les cibles"}),n.jsx("option",{value:"Ressource",children:"Ressources"}),n.jsx("option",{value:"Section",children:"Sections"}),n.jsx("option",{value:"FAQ",children:"FAQ"}),n.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("div",{className:"relative flex-1",children:n.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:m,onChange:x=>p(x.target.value),children:[n.jsx("option",{value:"all",children:"Toute période"}),n.jsx("option",{value:"today",children:"Aujourd'hui"}),n.jsx("option",{value:"week",children:"7 derniers jours"}),n.jsx("option",{value:"month",children:"30 derniers jours"})]})}),n.jsx("button",{onClick:()=>L(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:n.jsx(Wf,{className:"h-5 w-5"})})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"p-4 border-b border-gray-200",children:n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),s?n.jsx("div",{className:"p-8 flex justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?n.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):n.jsx("div",{className:"divide-y divide-gray-200",children:t.map(x=>n.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[n.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[O(x.type),n.jsx("span",{className:"mx-2",children:"•"}),j(x.target)]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[n.jsx(hj,{className:"h-4 w-4 mr-1"}),n.jsx("span",{children:C(x.date)})]})]}),n.jsx("div",{className:"flex items-start",children:x.user&&n.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[n.jsx(hu,{className:"h-4 w-4 mr-1"}),n.jsx("span",{children:x.user})]})}),x.details&&n.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[n.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),n.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(x.details).map(([v,k])=>n.jsxs("div",{className:"flex",children:[n.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[v,":"]}),n.jsx("dd",{className:"text-gray-900",children:typeof k=="object"?JSON.stringify(k):String(k)})]},v))})]}),x.targetId&&n.jsxs("div",{className:"mt-1 text-sm",children:[n.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",x.targetId]})]},x.id))}),R&&!s&&n.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:n.jsx("button",{onClick:()=>L(!1),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g?n.jsxs("span",{className:"flex items-center",children:[n.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},s6=()=>{const t=os(),{currentUser:e}=nt();return n.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[n.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:n.jsxs("p",{className:"text-blue-800",children:[n.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),n.jsx("li",{children:n.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),n.jsx("li",{children:n.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),n.jsx("li",{children:n.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),n.jsx("li",{children:n.jsx("a",{href:"#dropbox",className:"text-blue-600 hover:underline",children:"5. Gestionnaire Dropbox"})}),n.jsx("li",{children:n.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"6. Gestion des utilisateurs"})}),n.jsx("li",{children:n.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"7. Journal d'activité"})}),n.jsx("li",{children:n.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"8. Conseils et bonnes pratiques"})})]})]}),n.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(R5,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),n.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),n.jsx("li",{children:"Nombre de sections du guide"}),n.jsx("li",{children:"Nombre de questions FAQ"}),n.jsx("li",{children:"Nombre de ressources disponibles"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),n.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),n.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Zn,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),n.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),n.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),n.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),n.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),n.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),n.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),n.jsx("li",{children:"Modifiez les informations dans le formulaire"}),n.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),n.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),n.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),n.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),n.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),n.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(ei,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"La section FAQ est essentielle pour aider les utilisateurs à trouver rapidement des réponses à leurs questions. En tant qu'administrateur, vous pouvez gérer les questions existantes, ajouter de nouvelles questions et réponses, et approuver les questions soumises par les utilisateurs."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Processus de gestion des FAQ:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-4",children:[n.jsx("li",{children:"Consultation des questions en attente (non répondues)"}),n.jsx("li",{children:"Rédaction de réponses précises et informatives"}),n.jsx("li",{children:"Approbation des questions pour publication"}),n.jsx("li",{children:"Catégorisation par phase et par thématique"}),n.jsx("li",{children:"Mise à jour des réponses existantes si nécessaire"})]}),n.jsxs("p",{className:"text-gray-700 mb-4",children:[n.jsx("strong",{children:"Important:"})," Lorsqu'un utilisateur soumet une question, le système enregistre automatiquement son identifiant (uid) et son email. Ces informations vous permettent d'identifier la source de la question et de contacter l'utilisateur si nécessaire pour des précisions."]}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Répondez de manière claire et concise"}),n.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),n.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),n.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),n.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),n.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"La section Gestion des ressources vous permet d'ajouter, de modifier et de supprimer des ressources utiles pour les utilisateurs. Ces ressources peuvent être des documents PDF, des liens vers des sites externes, ou d'autres types de supports informatifs. Une organisation efficace par phase est essentielle pour l'expérience utilisateur."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation par phase:"}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[n.jsx("h5",{className:"font-medium text-blue-700 mb-1",children:"Phase Post-CPS"}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources concernant les étapes à suivre après avoir reçu une réponse positive du CPS (Concours Passerelle Spécial). Exemples: procédures d'inscription, documents à fournir, préparation académique."})]}),n.jsxs("div",{className:"bg-indigo-50 p-3 rounded-md",children:[n.jsx("h5",{className:"font-medium text-indigo-700 mb-1",children:"Phase During-Process"}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources liées aux démarches administratives en cours (visa, logement, assurances). Exemples: guides pour les démarches consulaires, check-lists pour les documents de visa, options de logement."})]}),n.jsxs("div",{className:"bg-purple-50 p-3 rounded-md",children:[n.jsx("h5",{className:"font-medium text-purple-700 mb-1",children:"Phase Pre-Arrival"}),n.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources pour préparer l'arrivée en France et à l'ESIG. Exemples: guides d'orientation du campus, informations sur les transports locaux, conseils pour l'installation."})]})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Ajouter de nouvelles ressources (fichiers PDF, liens, etc.)"}),n.jsx("li",{children:"Catégoriser les ressources par thème et par phase"}),n.jsx("li",{children:"Modifier les informations des ressources existantes"}),n.jsx("li",{children:"Supprimer les ressources obsolètes"}),n.jsx("li",{children:"Prévisualiser les ressources avant publication"}),n.jsx("li",{children:"Explorer et sélectionner des fichiers Dropbox pour vos ressources"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Structure des données de ressources:"}),n.jsx("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-700 text-sm font-mono",children:["id: string",n.jsx("br",{}),"title: string",n.jsx("br",{}),"description: string",n.jsx("br",{}),"phase: GuidePhase ('post-cps' | 'during-process' | 'pre-arrival')",n.jsx("br",{}),"category: string",n.jsx("br",{}),"fileUrl: string",n.jsx("br",{}),"fileType: 'pdf' | 'doc' | ... | 'link'",n.jsx("br",{}),"uploadDate: string",n.jsx("br",{}),"updatedDate: string"]})}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Utilisez des noms de fichiers clairs et descriptifs"}),n.jsx("li",{children:"Ajoutez toujours une description concise mais informative"}),n.jsx("li",{children:"Vérifiez que les liens externes fonctionnent correctement"}),n.jsx("li",{children:"Organisez les ressources par catégories logiques et cohérentes"}),n.jsx("li",{children:"Mettez régulièrement à jour les ressources pour garantir leur pertinence"}),n.jsx("li",{children:"Supprimez les ressources obsolètes pour éviter la confusion"}),n.jsx("li",{children:"Liez les ressources aux sections de guide appropriées"})]})]})]}),n.jsxs("div",{id:"dropbox",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(mj,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestionnaire Dropbox"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Le Gestionnaire Dropbox vous permet d'interagir directement avec votre compte Dropbox pour gérer vos fichiers, tester la connectivité, créer des liens de partage et uploader de nouveaux documents. Cette fonctionnalité facilite l'intégration de ressources stockées sur Dropbox dans votre guide."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Procédure de configuration:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 mb-4 text-gray-700",children:[n.jsx("li",{children:"Accédez à la page Gestionnaire Dropbox dans le panneau d'administration"}),n.jsx("li",{children:'Connectez votre compte Dropbox en utilisant le bouton "Connecter à Dropbox"'}),n.jsx("li",{children:"Autorisez l'application à accéder à votre Dropbox lorsque demandé"}),n.jsx("li",{children:"Une fois connecté, l'interface affichera vos fichiers et dossiers"}),n.jsx("li",{children:"Le système conserve votre jeton d'accès de manière sécurisée pour les futures connexions"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Tester la connectivité avec votre compte Dropbox"}),n.jsx("li",{children:"Lister tous les fichiers présents dans votre compte Dropbox"}),n.jsx("li",{children:"Naviguer dans la structure de dossiers"}),n.jsx("li",{children:"Rechercher des fichiers spécifiques par nom ou type"}),n.jsx("li",{children:"Uploader de nouveaux fichiers directement depuis l'interface"}),n.jsx("li",{children:"Générer des liens de partage publics pour vos fichiers"}),n.jsx("li",{children:"Copier les liens facilement pour les intégrer dans les ressources"}),n.jsx("li",{children:"Supprimer des fichiers inutilisés depuis l'interface"}),n.jsx("li",{children:"Voir les métadonnées des fichiers (taille, date de modification, etc.)"})]}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation avec le gestionnaire de ressources:"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Le Gestionnaire Dropbox est particulièrement utile pour créer et gérer les ressources du guide:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-700",children:[n.jsx("li",{children:"Uploader un fichier dans Dropbox via l'interface"}),n.jsx("li",{children:"Générer un lien de partage pour ce fichier"}),n.jsx("li",{children:"Copier ce lien lors de la création d'une nouvelle ressource dans le gestionnaire de ressources"}),n.jsx("li",{children:"Associer la ressource à la phase appropriée et aux sections du guide"})]})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Étapes pour utiliser le Gestionnaire Dropbox:"}),n.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Accédez au Gestionnaire Dropbox depuis le tableau de bord"}),n.jsx("li",{children:"Vérifiez le statut de connexion à votre compte Dropbox"}),n.jsx("li",{children:'Si nécessaire, testez la connectivité en cliquant sur le bouton "Tester la connexion"'}),n.jsx("li",{children:"Parcourez la liste des fichiers disponibles ou utilisez la recherche pour trouver un fichier spécifique"}),n.jsx("li",{children:"Pour uploader un nouveau fichier, utilisez la section d'upload dédiée"}),n.jsx("li",{children:"Pour générer un lien de partage, cliquez sur l'icône de lien à côté du fichier souhaité"}),n.jsx("li",{children:"Pour supprimer un fichier, cliquez sur l'icône de corbeille et confirmez votre action"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Intégration avec la Gestion des ressources:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Une fois que vous avez généré un lien de partage pour un fichier Dropbox, vous pouvez l'utiliser dans la Gestion des ressources:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Copiez le lien généré depuis le Gestionnaire Dropbox"}),n.jsx("li",{children:'Dans la Gestion des ressources, créez une nouvelle ressource de type "Lien externe"'}),n.jsx("li",{children:"Collez le lien Dropbox dans le champ URL de la ressource"}),n.jsx("li",{children:"Complétez les autres informations (titre, description, catégorie, etc.)"}),n.jsx("li",{children:"Enregistrez la ressource pour la rendre disponible aux utilisateurs"})]}),n.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Astuce:"}),n.jsx("p",{className:"text-blue-800",children:`Vous pouvez également parcourir et sélectionner directement vos fichiers Dropbox lors de la création d'une ressource en utilisant la fonction "Explorer Dropbox" dans le gestionnaire de ressources.`})]}),n.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[n.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Attention:"}),n.jsx("p",{className:"text-yellow-800",children:"La suppression d'un fichier Dropbox est définitive. Assurez-vous qu'aucune ressource n'utilise ce fichier avant de le supprimer. Si un fichier est supprimé, les liens pointant vers ce fichier ne fonctionneront plus."})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),n.jsxs("p",{className:"text-gray-700",children:['Accédez au Gestionnaire Dropbox en cliquant sur "Gestionnaire Dropbox" dans le tableau de bord administrateur ou en naviguant directement vers ',n.jsx("span",{className:"text-blue-600",children:"/admin/dropbox"}),"."]})]})]}),n.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(us,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Gestion des utilisateurs"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),n.jsx("li",{children:"Consultation des profils utilisateurs"}),n.jsx("li",{children:"Attribution/retrait des droits d'administration"}),n.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),n.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),n.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),n.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),n.jsx("li",{children:"Confirmez l'action"})]}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),n.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),n.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),n.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),n.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),n.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(o5,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Journal d'activité"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Connexions et inscriptions"}),n.jsx("li",{children:"Création, modification et suppression de contenu"}),n.jsx("li",{children:"Ajout et modification de ressources"}),n.jsx("li",{children:"Gestion des FAQ"}),n.jsx("li",{children:"Modifications des droits utilisateurs"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Type d'activité"}),n.jsx("li",{children:"Utilisateur (email)"}),n.jsx("li",{children:"Période (date de début et date de fin)"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Suivre les modifications apportées au contenu"}),n.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),n.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),n.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),n.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),n.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),n.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),n.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(vj,{className:"w-6 h-6 text-blue-700 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),n.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),n.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),n.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),n.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),n.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),n.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),n.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),n.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),n.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[n.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),n.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),n.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),n.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),n.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),n.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:n.jsxs("p",{className:"text-gray-800 italic text-sm",children:[n.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs(Q,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},r6=()=>{const{guideSections:t}=di(),[e,s]=T.useState([]),[r,i]=T.useState([]),[o,a]=T.useState(!0);T.useEffect(()=>{(async()=>{a(!0);const[m,p]=await Promise.all([Nj(),jj(async()=>{const{collection:y,getDocs:E}=await Promise.resolve().then(()=>U_);return{collection:y,getDocs:E}},void 0).then(({collection:y,getDocs:E})=>E(y(le,"users")))]),g=[];p.forEach(y=>{g.push({...y.data(),uid:y.id})}),s(m),i(g),a(!1)})()},[]);const c=d=>!t||t.length===0?0:Math.round(d.length/t.length*100),u=(d,m)=>{const p=t.filter(g=>g.phase===m);return Math.round(d.filter(g=>p.some(y=>y.id===g)).length/p.length*100)};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Q,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour au dashboard"]}),n.jsxs("span",{className:"flex items-center text-xl font-bold",children:[n.jsx(us,{className:"w-6 h-6 mr-2 text-white"})," Progression détaillée de tous les utilisateurs"]})]})}),n.jsx("div",{className:"w-full mx-auto p-4",children:o?n.jsx("div",{className:"text-center text-gray-500",children:"Chargement des progressions..."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Nom"}),n.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Email"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Progression globale"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pré-arrivée"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pendant le processus"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Post-CPS"}),n.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Sections validées"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.filter(d=>!d.isAdmin).map(d=>{const m=e.find(R=>R.userId===d.uid),p=m?m.completedSections.length:0,g=m?c(m.completedSections):0,y=m?u(m.completedSections,"pre-arrival"):0,E=m?u(m.completedSections,"during-process"):0,A=m?u(m.completedSections,"post-cps"):0;return n.jsxs("tr",{children:[n.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-900",children:d.displayName||"-"}),n.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-600",children:d.email}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:[n.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle",children:n.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${g}%`}})}),n.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[g,"%"]})]}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[n.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:n.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${y}%`}})}),n.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[y,"%"]}),n.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(R=>R.phase==="pre-arrival").map(R=>n.jsxs("li",{className:"flex items-center gap-1",children:[m&&m.completedSections.includes(R.id)?n.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):n.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),n.jsx("span",{children:R.title})]},R.id))})]}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[n.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:n.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${E}%`}})}),n.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[E,"%"]}),n.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(R=>R.phase==="during-process").map(R=>n.jsxs("li",{className:"flex items-center gap-1",children:[m&&m.completedSections.includes(R.id)?n.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):n.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),n.jsx("span",{children:R.title})]},R.id))})]}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[n.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:n.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${A}%`}})}),n.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[A,"%"]}),n.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(R=>R.phase==="post-cps").map(R=>n.jsxs("li",{className:"flex items-center gap-1",children:[m&&m.completedSections.includes(R.id)?n.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):n.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),n.jsx("span",{children:R.title})]},R.id))})]}),n.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm",children:[p," / ",t.length]})]},d.uid)})})]})})})]})},n6=()=>{const t=os(),{currentUser:e}=nt(),[s,r]=T.useState("idle"),[i,o]=T.useState([]),[a,c]=T.useState(!1),[u,d]=T.useState(null),[m,p]=T.useState(""),[g,y]=T.useState(""),[E,A]=T.useState(!1),[R,b]=T.useState(null),[w,C]=T.useState(1),[D]=T.useState(10);T.useEffect(()=>{e!=null&&e.uid||t("/login")},[e,t]);const L=T.useCallback(async()=>{r("loading"),p("");try{const F=await new Es({accessToken:await zr()}).usersGetCurrentAccount();F&&F.status===200?(r("success"),O()):(r("error"),p("Erreur lors de la connexion à Dropbox"))}catch(H){console.error("Erreur lors de la connexion à Dropbox:",H),r("error"),H instanceof Error?p(`Erreur lors de la connexion à Dropbox: ${H.message}`):p(`Erreur lors de la connexion à Dropbox: ${String(H)}`)}},[]),O=T.useCallback(async()=>{c(!0),p("");try{const te=(await new Es({accessToken:await zr()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(ie=>ie[".tag"]==="file").map(ie=>({id:ie.id,name:ie.name,path_lower:ie.path_lower||"",path_display:ie.path_display||ie.name,size:"size"in ie?ie.size:void 0,client_modified:"client_modified"in ie?ie.client_modified:void 0,is_downloadable:!0}));o(te)}catch(H){console.error("Erreur lors de la récupération des fichiers:",H),H instanceof Error?p(`Erreur lors de la récupération des fichiers: ${H.message}`):p(`Erreur lors de la récupération des fichiers: ${String(H)}`)}finally{c(!1)}},[]),j=T.useCallback(async H=>{try{const F=new Es({accessToken:await zr()});let Y="";try{Y=(await F.sharingCreateSharedLinkWithSettings({path:H.path_lower})).result.url}catch(ie){const de=ie;if(de.status===409||de.error&&de.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const fe=await F.sharingListSharedLinks({path:H.path_lower,direct_only:!0});if(fe.result.links&&fe.result.links.length>0)Y=fe.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw ie}const te=Y.replace("?dl=0","?raw=1");return d({...H,shared_link:{url:te}}),o(ie=>ie.map(de=>de.id===H.id?{...de,shared_link:{url:te}}:de)),p(""),te}catch(F){console.error("Erreur lors de la création du lien de partage:",F),F instanceof Error?p(`Erreur lors de la création du lien de partage: ${F.message}`):p(`Erreur lors de la création du lien de partage: ${String(F)}`)}},[]),x=T.useCallback(async H=>{try{await new Es({accessToken:await zr()}).filesDeleteV2({path:H}),o(Y=>Y.filter(te=>te.path_lower!==H)),u&&u.path_lower===H&&d(null),b(null)}catch(F){console.error("Erreur lors de la suppression du fichier:",F),F instanceof Error?p(`Erreur lors de la suppression du fichier: ${F.message}`):p(`Erreur lors de la suppression du fichier: ${String(F)}`)}},[u]),v=H=>{if(H===void 0||H===0)return"0 Bytes";const F=1024,Y=["Bytes","KB","MB","GB","TB"],te=Math.floor(Math.log(H)/Math.log(F));return parseFloat((H/Math.pow(F,te)).toFixed(2))+" "+Y[te]},k=g?i.filter(H=>H.name.toLowerCase().includes(g.toLowerCase())):i,N=w*D,I=N-D,S=k.slice(I,N),se=Math.ceil(k.length/D);T.useEffect(()=>{L()},[L]);const xe=T.useCallback(()=>{A(!0),setTimeout(()=>{A(!1)},3e3),O()},[O]),Ie=H=>C(H);return n.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[n.jsx("div",{className:"flex justify-between items-center mb-8",children:n.jsxs("div",{children:[n.jsxs(Q,{to:"/admin",className:"flex items-center text-blue-600 mb-4 hover:text-blue-800 transition-colors",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),n.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestionnaire Dropbox"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Gérez vos fichiers Dropbox, testez la connectivité et générez des liens de partage."})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Statut de connexion"}),n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${s==="success"?"bg-green-500":s==="error"?"bg-red-500":s==="loading"?"bg-yellow-500":"bg-gray-400"}`}),n.jsx("span",{className:"text-sm",children:s==="success"?"Connecté à Dropbox":s==="error"?"Erreur de connexion":s==="loading"?"Vérification de la connexion...":"Statut inconnu"})]}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsx("button",{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:s==="loading",children:s==="loading"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Test en cours..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Tester la connexion"]})}),n.jsx("button",{onClick:O,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:a,children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Actualisation..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Wf,{className:"w-4 h-4 mr-2"}),"Rafraîchir la liste"]})})]}),m&&n.jsxs("div",{className:"mt-4 bg-red-50 text-red-700 p-3 rounded-md flex items-start",children:[n.jsx(Hs,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Erreur"}),n.jsx("p",{className:"text-sm",children:m})]})]}),E&&n.jsxs("div",{className:"mt-4 bg-green-50 text-green-700 p-3 rounded-md flex items-center",children:[n.jsx(Ln,{className:"w-5 h-5 mr-2"}),n.jsx("p",{children:"Fichier uploadé avec succès! La liste des fichiers a été actualisée."})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Upload un nouveau fichier"}),n.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(bj,{className:"w-5 h-5 text-blue-600 mr-2"}),n.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Sélectionnez un fichier à uploader sur Dropbox"})]}),n.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Le fichier sera uploadé directement sur votre compte Dropbox et apparaitra dans la liste ci-dessous."}),n.jsx(Jf,{onSuccess:xe,buttonText:"Sélectionner un fichier"})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Fichiers disponibles"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(ti,{className:"h-4 w-4 text-gray-400"})}),n.jsx("input",{type:"text",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64",placeholder:"Rechercher un fichier...",value:g,onChange:H=>y(H.target.value)})]})]}),a?n.jsx("div",{className:"flex justify-center items-center py-16",children:n.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):k.length>0?n.jsxs("div",{className:"overflow-x-auto",children:[n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom du fichier"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taille"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de modification"}),n.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(H=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ke,{className:"flex-shrink-0 h-5 w-5 text-blue-600 mr-2"}),n.jsx("div",{className:"text-sm text-gray-900 font-medium truncate max-w-xs",children:H.name})]})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-500",children:v(H.size)})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsx("div",{className:"text-sm text-gray-500",children:H.client_modified?new Date(H.client_modified).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"})}),n.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>j(H),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Générer un lien de partage",children:n.jsx(Vr,{className:"h-4 w-4"})}),R===H.id?n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("button",{onClick:()=>x(H.path_lower),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Confirmer la suppression",children:n.jsx(Ln,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>b(null),className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-50 transition-colors",title:"Annuler",children:n.jsx(si,{className:"h-4 w-4"})})]}):n.jsx("button",{onClick:()=>b(H.id),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le fichier",children:n.jsx(za,{className:"h-4 w-4"})})]})})]},H.id))})]}),se>1&&n.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[n.jsx("button",{onClick:()=>Ie(Math.max(1,w-1)),disabled:w===1,className:`px-3 py-1 rounded-md ${w===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Précédent"}),Array.from({length:se},(H,F)=>F+1).map(H=>n.jsx("button",{onClick:()=>Ie(H),className:`w-8 h-8 rounded-md ${w===H?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:H},H)),n.jsx("button",{onClick:()=>Ie(Math.min(se,w+1)),disabled:w===se,className:`px-3 py-1 rounded-md ${w===se?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Suivant"})]})]}):n.jsxs("div",{className:"py-16 text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(Ke,{className:"h-12 w-12 text-gray-400"})}),n.jsx("p",{className:"text-gray-600 mb-2",children:"Aucun fichier trouvé"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Uploadez un fichier ou vérifiez vos paramètres de connexion Dropbox."})]}),u&&u.shared_link&&n.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-md font-medium text-blue-800",children:"Lien de partage généré"}),n.jsx("button",{onClick:()=>d(null),className:"text-blue-700 hover:text-blue-900",children:n.jsx(si,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"flex items-center mb-2",children:[n.jsx(Ke,{className:"h-5 w-5 text-blue-600 mr-2"}),n.jsx("p",{className:"text-blue-700",children:u.name})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",readOnly:!0,value:u.shared_link.url,className:"flex-grow p-2 border border-blue-300 rounded-l-md bg-white text-sm focus:outline-none"}),n.jsx("button",{onClick:()=>{navigator.clipboard.writeText(u.shared_link.url),alert("Lien copié dans le presse-papier!")},className:"p-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors",children:n.jsx(Ua,{className:"h-5 w-5"})})]}),n.jsx("p",{className:"mt-2 text-xs text-blue-700",children:"Ce lien peut être utilisé pour ajouter ce fichier comme ressource."})]})]})]})},i6=()=>{const[t,e]=T.useState(""),[s,r]=T.useState(null),[i,o]=T.useState(!0),[a,c]=T.useState(""),[u,d]=T.useState("test1234"),[m,p]=T.useState("idle"),[g,y]=T.useState(""),[E,A]=T.useState([]),[R,b]=T.useState(!1),[w,C]=T.useState(null),[D,L]=T.useState("idle"),[O,j]=T.useState(""),[x,v]=T.useState(""),[k,N]=T.useState("Test EmailJS depuis ESIG-prep-guide"),[I,S]=T.useState("Ceci est un email de test pour vérifier la configuration d'EmailJS."),[se,xe]=T.useState("idle"),[Ie,H]=T.useState(""),[F,Y]=T.useState(""),te=async()=>{xe("loading"),H(""),Y("");try{const G=["https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token.cjs",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token":"/Esig-prep-guide/.netlify/functions/dropbox-token",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token.cjs":"/Esig-prep-guide/.netlify/functions/dropbox-token.cjs"];console.log("Environnement :",{hostname:window.location.hostname,pathname:window.location.pathname,protocol:window.location.protocol,urls:G});let Z=!1,me="";for(const q of G)try{const he=await fetch(q);if(console.log(`Test ${q} - Status:`,he.status),he.ok){const ne=he.headers.get("content-type");if(ne&&ne.includes("application/json"))try{const Ve=await he.json();if(console.log(`Test ${q} - Data:`,Ve),Ve.access_token){H(Ve.access_token),xe("success"),Z=!0;break}else me=`Réponse reçue de ${q} mais pas d'access_token trouvé: ${JSON.stringify(Ve)}`}catch(Ve){const tt=(await he.clone().text()).substring(0,100)+"...";me=`Erreur de parsing JSON pour ${q}: ${tt}`,console.error("Erreur de parsing JSON:",Ve),console.log("Contenu de la réponse (début):",tt)}else{const Ve=await he.text(),De=Ve.substring(0,150)+"...";me=`Réponse reçue de ${q} mais pas au format JSON (${ne}): ${De}`,console.log("Réponse complète:",Ve)}}else{const ne=await he.text(),Ve=ne.length>150?ne.substring(0,150)+"...":ne;me=`Erreur HTTP ${he.status} pour ${q}: ${Ve}`}}catch(he){const ne=he instanceof Error?he.message:String(he);me=`Exception lors de l'appel à ${q}: ${ne}`}Z||(Y(me),xe("error"))}catch(G){console.error("Erreur lors du test de récupération de token:",G);const Z=G instanceof Error?G.message:String(G);Y(`Erreur générale: ${Z}`),xe("error")}},ie=async()=>{try{(await Jt(Ge(le,"test"))).empty?(await Os(Ge(le,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(G){const Z=G;console.error("Erreur Firestore:",Z),e(`Erreur Firestore: ${Z.message}`)}},de=async()=>{const G="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";p("loading"),y("");try{const me=await new Es({accessToken:G}).usersGetCurrentAccount();p("success"),e(q=>q+`

Connexion Dropbox réussie! Compte: `+me.result.name.display_name+" (Email: "+me.result.email+")"),await fe()}catch(Z){console.error("Erreur de connexion Dropbox:",Z),p("error"),Z instanceof Error?(y(`Erreur de connexion Dropbox: ${Z.message}`),e(me=>me+`

Erreur de connexion Dropbox: `+Z.message)):(y(`Erreur de connexion Dropbox: ${String(Z)}`),e(me=>me+`

Erreur de connexion Dropbox: `+String(Z)))}},fe=async()=>{const G="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";b(!0),e(Z=>Z+`

Chargement des fichiers Dropbox...`);try{const he=(await new Es({accessToken:G}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(ne=>ne[".tag"]==="file").map(ne=>({id:ne.id,name:ne.name,path_lower:ne.path_lower||"",path_display:ne.path_display||ne.name,size:"size"in ne?ne.size:void 0,client_modified:"client_modified"in ne?ne.client_modified:void 0,is_downloadable:!0}));A(he),e(ne=>ne+`

${he.length} fichiers trouvés dans Dropbox.`)}catch(Z){console.error("Erreur lors de la récupération des fichiers:",Z),Z instanceof Error?e(me=>me+`

Erreur lors de la récupération des fichiers: `+Z.message):e(me=>me+`

Erreur lors de la récupération des fichiers: `+String(Z))}finally{b(!1)}},He=async G=>{const Z="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";e(me=>me+`

Création d'un lien de partage pour ${G.name}...`);try{const he=(await new Es({accessToken:Z}).sharingCreateSharedLinkWithSettings({path:G.path_lower})).result.url.replace("?dl=0","?raw=1");return e(ne=>ne+`

Lien de partage créé avec succès: ${he}`),C({...G,shared_link:{url:he}}),he}catch(me){console.error("Erreur lors de la création du lien de partage:",me),me instanceof Error?e(q=>q+`

Erreur lors de la création du lien de partage: `+me.message):e(q=>q+`

Erreur lors de la création du lien de partage: `+String(me))}},Dt=async()=>{try{if(a)try{const G=await Xw(Tt,a,u);r(G.user),e(Z=>Z+`

Création de l'utilisateur réussie! UID: ${G.user.uid}`)}catch(G){console.log("Erreur lors de la création, tentative de connexion...",G);try{const Z=await Zw(Tt,a,u);r(Z.user),e(me=>me+`

Connexion réussie! UID: ${Z.user.uid}`)}catch(Z){const me=Z;console.error("Erreur d'authentification:",me),e(q=>q+`

Erreur d'authentification: ${me.message}`)}}else e(G=>G+`

Erreur: Veuillez entrer une adresse email.`)}catch(G){console.error("Erreur inattendue:",G),G instanceof Error?e(Z=>Z+`

Erreur inattendue: ${G.message}`):e(Z=>Z+`

Erreur inattendue: ${String(G)}`)}},ut=async()=>{if(!x){j("Veuillez entrer une adresse email de destination");return}L("loading"),j(""),e(G=>G+`

Envoi d'email en cours...`);try{const G={to_email:x,to_name:"Utilisateur de test",subject:k,message:I,app_name:"ESIG-prep-guide",faq_url:window.location.origin+"/faq"},Z=await Yf.send(Hi.SERVICE_ID,Hi.TEMPLATE_ID,G,Hi.PUBLIC_KEY);console.log("Email envoyé avec succès!",Z),L("success"),e(me=>me+`

Email envoyé avec succès! ID: ${Z.status}`)}catch(G){console.error("Erreur lors de l'envoi d'email:",G),L("error"),G instanceof Error?(j(`Erreur lors de l'envoi d'email: ${G.message}`),e(Z=>Z+`

Erreur lors de l'envoi d'email: ${G.message}`)):(j(`Erreur lors de l'envoi d'email: ${String(G)}`),e(Z=>Z+`

Erreur lors de l'envoi d'email: ${String(G)}`))}};return T.useEffect(()=>{const G=Tt.onAuthStateChanged(Z=>{r(Z),Z&&c(Z.email||""),o(!1)});return()=>G()},[]),i?n.jsx("div",{className:"p-4",children:"Chargement..."}):n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),n.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),n.jsxs("p",{children:["Utilisateur: ",s?s.email:"Non connecté"]}),n.jsxs("p",{children:["UID: ",(s==null?void 0:s.uid)||"N/A"]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),n.jsx("button",{onClick:ie,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),n.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Os(Ge(le,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Os(Ge(le,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Os(Ge(le,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Os(Ge(le,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(G){e("Erreur lors de l'initialisation : "+G.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-2",children:"Email:"}),n.jsx("input",{type:"email",value:a,onChange:G=>c(G.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),n.jsx("input",{type:"password",value:u,onChange:G=>d(G.target.value),className:"border p-2 w-full max-w-md"})]}),n.jsx("button",{onClick:Dt,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:s?"Se connecter":"Créer un compte"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'envoi d'email"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-2",children:"Adresse email de destination:"}),n.jsx("input",{type:"email",value:x,onChange:G=>v(G.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-2",children:"Sujet:"}),n.jsx("input",{type:"text",value:k,onChange:G=>N(G.target.value),className:"border p-2 w-full max-w-md"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block mb-2",children:"Message:"}),n.jsx("textarea",{value:I,onChange:G=>S(G.target.value),className:"border p-2 w-full max-w-md"})]}),n.jsx("button",{onClick:ut,className:"bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded",disabled:!x,children:"Envoyer l'email"}),D==="error"&&n.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:["❌ ",O]}),D==="success"&&n.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:"✅ Email envoyé avec succès!"})]}),n.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),n.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Dropbox"}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"1. Tester l'endpoint Netlify Function pour Dropbox Token"}),n.jsx("button",{onClick:te,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",disabled:se==="loading",children:se==="loading"?"Chargement...":"Tester l'endpoint Dropbox Token"}),se==="error"&&n.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:[n.jsx("h4",{className:"font-semibold mb-1",children:"❌ Erreur lors de la récupération du token"}),n.jsx("p",{className:"text-sm",children:F})]}),se==="success"&&n.jsxs("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:[n.jsx("h4",{className:"font-semibold mb-1",children:"✅ Access token récupéré avec succès !"}),n.jsxs("p",{className:"text-sm break-all",children:["Token: ",Ie.substring(0,20),"...",Ie.substring(Ie.length-10)]})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"2. Tester la connectivité Dropbox"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vérifiez d'abord si vos identifiants Dropbox sont correctement configurés et si la connexion fonctionne."}),n.jsx("button",{onClick:de,className:`flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors ${m==="loading"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:m==="loading",children:m==="loading"?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Vérification en cours..."]}):"Tester la connectivité Dropbox"}),m==="success"&&n.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:"✅ Connexion Dropbox établie avec succès!"}),m==="error"&&n.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:["❌ ",g]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"2. Explorer les fichiers Dropbox"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Afficher la liste des fichiers disponibles dans votre compte Dropbox et créer des liens partageables."}),n.jsx("button",{onClick:fe,className:"flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors bg-blue-600 hover:bg-blue-700 mb-4",disabled:R||m!=="success",children:R?n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Chargement des fichiers..."]}):"Lister les fichiers Dropbox"}),E.length>0&&n.jsxs("div",{className:"border rounded-md overflow-hidden",children:[n.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-medium text-sm text-gray-700 border-b",children:["Fichiers disponibles dans Dropbox (",E.length,")"]}),n.jsx("div",{className:"divide-y max-h-60 overflow-auto",children:E.map(G=>n.jsxs("div",{className:`px-4 py-3 flex items-center justify-between hover:bg-blue-50 cursor-pointer ${(w==null?void 0:w.id)===G.id?"bg-blue-50":""}`,onClick:()=>C(G),children:[n.jsxs("div",{className:"flex-1 mr-4 truncate",children:[n.jsx("div",{className:"font-medium text-gray-800",children:G.name}),n.jsxs("div",{className:"text-xs text-gray-500",children:[G.size?`${Math.round(G.size/1024)} Ko`:"",G.client_modified?` • Modifié le ${new Date(G.client_modified).toLocaleDateString()}`:""]})]}),n.jsx("button",{className:"px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md text-xs",onClick:Z=>{Z.stopPropagation(),He(G)},children:"Créer un lien"})]},G.id))})]}),w&&n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-200",children:[n.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Fichier sélectionné : ",w.name]}),w.shared_link?n.jsxs("div",{className:"flex items-center",children:[n.jsx("input",{type:"text",readOnly:!0,value:w.shared_link.url,className:"flex-1 py-2 px-3 bg-white border rounded-l-md focus:outline-none text-sm"}),n.jsx("button",{className:"bg-blue-600 text-white py-2 px-3 rounded-r-md text-sm",onClick:()=>{navigator.clipboard.writeText(w.shared_link.url),e(G=>G+`

Lien copié dans le presse-papier!`)},children:"Copier"})]}):n.jsx("button",{className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",onClick:()=>He(w),children:"Générer un lien partageable"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"3. Tester l'upload de fichiers"}),n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Uploadez un nouveau fichier vers votre compte Dropbox."}),n.jsx(Jf,{buttonText:"Uploader un fichier test",onSuccess:G=>{e(Z=>Z+`

Fichier uploadé avec succès! URL: ${G}`),fe()}})]})]})]})},o6=()=>n.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:n.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),n.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),n.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),n.jsxs(Q,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[n.jsx(E5,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),a6=({open:t,onClose:e,onSubmit:s,loading:r=!1,error:i,label:o})=>{const[a,c]=T.useState(""),u=d=>{d.preventDefault(),s(a)};return Ha.useEffect(()=>{t||c("")},[t]),t?n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[n.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),n.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:o||"Confirmez avec votre mot de passe"}),n.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[n.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:r,autoFocus:!0}),i&&n.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||a==="",children:"Valider"})]})]})}):null},l6=()=>{const[t,e]=T.useState(!1),[s,r]=T.useState(!1),[i,o]=T.useState(null),[a,c]=T.useState(null),[u,d]=T.useState(null),[m,p]=T.useState(""),{currentUser:g}=nt(),[y,E]=T.useState((g==null?void 0:g.displayName)||""),[A,R]=T.useState((g==null?void 0:g.photoURL)||""),[b]=T.useState((g==null?void 0:g.email)||""),[w,C]=T.useState(""),[D,L]=T.useState(!1),[O,j]=T.useState(null),[x,v]=T.useState(null),[k,N]=T.useState(null);if(!g)return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:n.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const I=Tt.currentUser,S=I==null?void 0:I.providerData.some(H=>H.providerId==="password"),se=async H=>{if(H.preventDefault(),j(null),v(null),!S){N("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:y,photoURL:A}),c("profile"),e(!0)},xe=async H=>{if(H.preventDefault(),j(null),v(null),!S){N("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}p(w),c("password"),e(!0)},Ie=async H=>{const F=Tt.currentUser;if(!F)return;r(!0),o(null);const Y=li.credential(F.email||"",H);try{await xI(F,Y),a==="profile"&&u?(await e1(F,{displayName:u.displayName,photoURL:u.photoURL}),E(u.displayName),R(u.photoURL),v("Profil mis à jour !")):a==="password"&&m&&(await vI(F,m),C(""),v("Mot de passe mis à jour !")),e(!1),c(null),d(null),p("")}catch{o("Mot de passe incorrect.")}finally{r(!1),L(!1)}};return n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs(Q,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[n.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),n.jsxs("span",{className:"flex items-center text-xl font-bold",children:[n.jsx(Xt,{className:"w-6 h-6 mr-2 text-white"})," Mon profil"]})]})}),n.jsx("div",{className:"w-full mx-auto p-4 flex justify-center",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp mt-8 mb-8",children:[n.jsxs("div",{className:"relative mb-5",children:[A?n.jsx("img",{src:A,alt:y||b,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):n.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:n.jsx("svg",{className:"w-16 h-16 text-blue-200",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14c4.418 0 8 1.79 8 4v2H4v-2c0-2.21 3.582-4 8-4zm0-4a4 4 0 110-8 4 4 0 010 8z"})})}),(g==null?void 0:g.emailVerified)&&n.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(g==null?void 0:g.isAdmin)&&n.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[n.jsx(Xt,{className:"w-4 h-4"})," Admin"]})]}),n.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:y||b}),n.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:b}),n.jsxs("form",{onSubmit:se,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),n.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:y,onChange:H=>E(H.target.value),placeholder:"Nom affiché",disabled:D})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),n.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:A,onChange:H=>R(H.target.value),placeholder:"URL de la photo",disabled:D})]})]}),n.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:D,children:"Sauvegarder le profil"})]}),n.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),S?n.jsxs(n.Fragment,{children:[n.jsxs("form",{onSubmit:xe,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[n.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),n.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:H=>C(H.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:D}),n.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:D||w.length<6,children:"Mettre à jour le mot de passe"})]}),n.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{j(null),v(null);try{await Tm(Tt,b),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{j("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):n.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[n.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),n.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{j(null),v(null);try{await Tm(Tt,b),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{j("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(O||x)&&n.jsx("div",{className:`mt-6 text-center text-sm font-medium ${O?"text-red-600":"text-green-600"}`,children:O||x}),k&&n.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:k}),n.jsx(a6,{open:t,onClose:()=>{e(!1),o(null),c(null)},onSubmit:Ie,loading:s,error:i,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})]})},c6=()=>{const t=os(),{currentUser:e}=nt();return n.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-8",children:n.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[n.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[n.jsx(Rt,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),n.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'utilisation - ESIG-prep-guide"})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bienvenue dans votre guide ESIG-prep-guide"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Cette plateforme a été conçue pour vous accompagner dans toutes les étapes de votre parcours, depuis l'admission à l'ESIG jusqu'à votre arrivée à Rouen. Découvrez comment utiliser efficacement les différentes fonctionnalités à votre disposition."}),e&&n.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:n.jsxs("p",{className:"text-blue-700",children:[n.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Sommaire"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx("a",{href:"#navigation",className:"text-blue-600 hover:underline",children:"1. Navigation par phase"})}),n.jsx("li",{children:n.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"2. Ressources documentaires"})}),n.jsx("li",{children:n.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Foire aux questions (FAQ)"})}),n.jsx("li",{children:n.jsx("a",{href:"#profile",className:"text-blue-600 hover:underline",children:"4. Gestion de votre profil"})}),n.jsx("li",{children:n.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"5. Conseils pratiques"})})]})]}),n.jsxs("div",{id:"navigation",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(A5,{className:"w-6 h-6 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"1. Navigation par phase"})]}),n.jsx("p",{className:"text-gray-700 mb-6",children:"Le parcours est organisé en trois phases distinctes pour vous guider pas à pas. Chaque phase contient des ressources spécifiques adaptées à votre progression."}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-5",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Phase Post-CPS"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les étudiants venant de recevoir leur admission au CPS. Vous y trouverez des informations sur les premières démarches à effectuer."}),n.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[n.jsx("li",{children:"Procédures d'inscription"}),n.jsx("li",{children:"Documents à fournir"}),n.jsx("li",{children:"Préparation académique"})]})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-5",children:[n.jsx("h4",{className:"font-semibold text-indigo-800 mb-2",children:"Phase During-Process"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les démarches administratives en cours (visa, logement, assurances)."}),n.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[n.jsx("li",{children:"Guides pour les démarches consulaires"}),n.jsx("li",{children:"Check-lists pour les documents de visa"}),n.jsx("li",{children:"Options de logement"}),n.jsx("li",{children:"Assurances et finances"})]})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-5",children:[n.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Phase Pre-Arrival"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Pour préparer votre arrivée en France et à l'ESIG."}),n.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[n.jsx("li",{children:"Guides d'orientation du campus"}),n.jsx("li",{children:"Transports locaux à Rouen"}),n.jsx("li",{children:"Conseils d'intégration"}),n.jsx("li",{children:"Démarches à l'arrivée"})]})]})]}),n.jsx("div",{className:"bg-yellow-50 p-4 rounded-md",children:n.jsxs("p",{className:"text-gray-800 flex items-center",children:[n.jsx(ei,{className:"w-5 h-5 text-yellow-600 mr-2"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Astuce :"})," Concentrez-vous d'abord sur la phase qui correspond à votre situation actuelle, mais n'hésitez pas à consulter les autres phases pour anticiper les prochaines étapes."]})]})})]}),n.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"2. Ressources documentaires"})]}),n.jsx("p",{className:"text-gray-700 mb-6",children:"La bibliothèque de ressources contient tous les documents essentiels pour vos démarches. Vous pouvez facilement explorer, prévisualiser et télécharger ces ressources."}),n.jsxs("div",{className:"space-y-5 mb-6",children:[n.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[n.jsx("div",{className:"flex-shrink-0 mr-4",children:n.jsx(ti,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Rechercher des ressources"}),n.jsx("p",{className:"text-gray-700",children:"Utilisez la barre de recherche pour trouver rapidement des documents en fonction de mots-clés. Vous pouvez également filtrer par catégorie ou par phase."})]})]}),n.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[n.jsx("div",{className:"flex-shrink-0 mr-4",children:n.jsx(Ke,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Prévisualiser les documents"}),n.jsx("p",{className:"text-gray-700",children:"Cliquez sur un document pour le prévisualiser directement dans l'interface sans avoir à le télécharger. Cela vous permet de vérifier rapidement si le document répond à vos besoins."})]})]}),n.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[n.jsx("div",{className:"flex-shrink-0 mr-4",children:n.jsx(Ua,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Télécharger des ressources"}),n.jsx("p",{className:"text-gray-700",children:"Pour conserver un document ou l'imprimer, utilisez le bouton de téléchargement. Les documents sont disponibles dans divers formats (PDF, Word, Excel, etc.)."})]})]})]}),n.jsxs("div",{className:"bg-gray-100 p-4 rounded-md",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Types de ressources disponibles"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Formulaires administratifs"}),n.jsx("li",{children:"Guides pratiques"}),n.jsx("li",{children:"Check-lists par étape"}),n.jsx("li",{children:"Modèles de documents"})]}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[n.jsx("li",{children:"Cartes et plans"}),n.jsx("li",{children:"Calendriers académiques"}),n.jsx("li",{children:"Ressources d'apprentissage"}),n.jsx("li",{children:"Liens vers des sites officiels"})]})]})]})]}),n.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Ns,{className:"w-6 h-6 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"3. Foire aux questions (FAQ)"})]}),n.jsx("p",{className:"text-gray-700 mb-6",children:"La section FAQ répond aux questions les plus fréquentes. Si vous ne trouvez pas la réponse à votre question, vous pouvez soumettre votre propre question qui sera traitée par l'équipe."}),n.jsxs("div",{className:"space-y-6 mb-6",children:[n.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Comment utiliser la FAQ ?"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[n.jsx("li",{children:"Explorez les questions existantes filtrées par catégorie ou phase"}),n.jsx("li",{children:"Utilisez la barre de recherche pour trouver rapidement une information spécifique"}),n.jsx("li",{children:"Cliquez sur une question pour afficher sa réponse complète"}),n.jsx("li",{children:"Si vous ne trouvez pas l'information recherchée, posez votre propre question"})]})]}),n.jsxs("div",{className:"bg-green-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"Comment poser une question ?"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[n.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),n.jsx("li",{children:"Rédigez votre question de manière claire et précise"}),n.jsx("li",{children:"Sélectionnez la catégorie et la phase appropriées"}),n.jsx("li",{children:"Soumettez votre question"}),n.jsx("li",{children:"Vous recevrez une confirmation que votre question a bien été enregistrée"}),n.jsx("li",{children:`Une fois traitée par l'équipe, vous verrez la réponse dans la section "Mes questions"`})]}),n.jsx("p",{className:"mt-3 text-gray-700 italic",children:"Note : Votre identifiant et votre email sont automatiquement enregistrés avec votre question pour permettre le suivi."})]}),n.jsxs("div",{className:"bg-indigo-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-indigo-700 mb-3",children:"Suivi de vos questions"}),n.jsx("p",{className:"text-gray-700 mb-3",children:`Vous pouvez suivre l'état de vos questions dans l'onglet "Mes questions" de la section FAQ. Les questions y sont organisées en deux catégories :`}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Questions répondues"})," : Questions qui ont reçu une réponse de l'équipe"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Questions en attente"})," : Questions soumises mais pas encore traitées"]})]})]})]})]}),n.jsxs("div",{id:"profile",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(hu,{className:"w-6 h-6 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"4. Gestion de votre profil"})]}),n.jsx("p",{className:"text-gray-700 mb-6",children:"Personnalisez votre profil pour une expérience adaptée à vos besoins. Vous pouvez modifier vos informations et gérer vos préférences à tout moment."}),n.jsxs("div",{className:"space-y-5 mb-6",children:[n.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Informations personnelles"}),n.jsx("p",{className:"text-gray-700",children:"Vous pouvez personnaliser votre nom d'utilisateur et ajouter une photo de profil pour mieux vous identifier sur la plateforme."})]}),n.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Sécurité du compte"}),n.jsx("p",{className:"text-gray-700",children:"Vérifiez votre adresse email pour sécuriser votre compte et activer toutes les fonctionnalités. Vous pouvez également modifier votre mot de passe depuis l'écran de profil."})]}),n.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Préférences de confidentialité"}),n.jsx("p",{className:"text-gray-700",children:"Gérez vos préférences concernant les cookies et l'utilisation de vos données via le panneau de préférences de confidentialité."})]})]}),n.jsxs("div",{className:"bg-yellow-50 p-5 rounded-md",children:[n.jsx("h4",{className:"font-semibold text-yellow-700 mb-2",children:"Accéder à votre profil"}),n.jsx("p",{className:"text-gray-700",children:'Pour accéder à votre profil, cliquez sur votre nom ou votre avatar dans le coin supérieur droit de la page, puis sélectionnez "Profil" dans le menu déroulant.'})]})]}),n.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("div",{className:"flex items-center mb-4",children:[n.jsx(Zn,{className:"w-6 h-6 text-blue-600 mr-2"}),n.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"5. Conseils pratiques"})]}),n.jsx("p",{className:"text-gray-700 mb-6",children:"Voici quelques conseils pour tirer le meilleur parti de la plateforme et faciliter votre parcours."}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[n.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour la préparation"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[n.jsx("li",{children:"Commencez par explorer la phase qui correspond à votre situation actuelle"}),n.jsx("li",{children:"Consultez les check-lists pour vous assurer de n'oublier aucune étape importante"}),n.jsx("li",{children:"Téléchargez et conservez les documents officiels dans un dossier dédié"}),n.jsx("li",{children:"Préparez vos questions à l'avance en notant vos incertitudes"})]})]}),n.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour les démarches"}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[n.jsx("li",{children:"Respectez scrupuleusement les délais indiqués pour chaque procédure"}),n.jsx("li",{children:"Conservez des copies numériques de tous vos documents importants"}),n.jsx("li",{children:"N'hésitez pas à poser des questions spécifiques via la FAQ"}),n.jsx("li",{children:"Consultez régulièrement la plateforme pour les mises à jour des informations"})]})]})]}),n.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Communauté et entraide"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous faites partie d'une communauté d'étudiants partageant le même parcours."}),n.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[n.jsx("li",{children:"Consultez les questions déjà posées par d'autres étudiants"}),n.jsx("li",{children:"Partagez votre expérience et vos conseils quand vous avez franchi une étape"}),n.jsx("li",{children:"Entrez en contact avec les étudiants des promotions précédentes pour des conseils personnalisés"}),n.jsx("li",{children:"N'hésitez pas à suggérer des améliorations ou de nouvelles ressources"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Prêt à démarrer votre parcours"}),n.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant de toutes les informations nécessaires pour utiliser efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),n.jsx("p",{className:"text-gray-700 mb-6",children:"Ce guide sera régulièrement mis à jour pour refléter les évolutions de la plateforme et les retours des utilisateurs."}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs(Q,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Rt,{className:"w-5 h-5 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},u6=()=>{var u;const{currentUser:t}=nt(),[e,s]=T.useState(null),[r,i]=T.useState(""),o=d=>{s(e===d?null:d)},c=[{id:"login",question:"Je n'arrive pas à me connecter à mon compte",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Plusieurs raisons peuvent expliquer un problème de connexion :"}),n.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[n.jsx("li",{children:"Vérifiez que votre adresse e-mail est correctement saisie"}),n.jsx("li",{children:"Assurez-vous que votre mot de passe est correct (attention aux majuscules/minuscules)"}),n.jsx("li",{children:`Si vous avez oublié votre mot de passe, utilisez l'option "Mot de passe oublié" sur la page de connexion`}),n.jsx("li",{children:"Vérifiez votre connexion internet"}),n.jsx("li",{children:"Si vous utilisez la connexion Google ou GitHub, assurez-vous d'être connecté à ces services"})]}),n.jsxs("p",{className:"mt-2",children:["Si le problème persiste, vous pouvez ",n.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline",children:"contacter l'équipe de support"}),"."]})]})},{id:"resources",question:"Comment accéder aux ressources documentaires ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Pour accéder aux ressources documentaires :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[n.jsx("li",{children:"Connectez-vous à votre compte"}),n.jsx("li",{children:'Cliquez sur "Ressources" dans le menu principal'}),n.jsx("li",{children:"Utilisez les filtres pour trouver des documents par phase (Post-CPS, During-Process, Pre-Arrival) ou par catégorie"}),n.jsx("li",{children:"Cliquez sur un document pour le prévisualiser"}),n.jsx("li",{children:"Utilisez le bouton de téléchargement pour sauvegarder le document sur votre appareil"})]}),n.jsx("p",{className:"mt-2",children:"Si vous ne trouvez pas une ressource spécifique, utilisez la barre de recherche en haut de la page Ressources."})]})},{id:"faq",question:"Comment poser une question dans la FAQ ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Pour poser une question dans la FAQ :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[n.jsx("li",{children:"Connectez-vous à votre compte"}),n.jsx("li",{children:"Accédez à la page FAQ via le menu principal"}),n.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),n.jsx("li",{children:"Rédigez votre question de manière claire et concise"}),n.jsx("li",{children:"Sélectionnez la catégorie et la phase appropriées"}),n.jsx("li",{children:"Soumettez votre question"})]}),n.jsx("p",{className:"mt-2",children:"Une fois soumise, votre question sera examinée par l'équipe d'administration qui y répondra dans les meilleurs délais. Vous recevrez une notification de confirmation immédiatement après la soumission."}),n.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Note : Votre identifiant (uid) et votre email sont automatiquement enregistrés avec votre question pour faciliter le suivi."})]})},{id:"phases",question:"Quelles sont les différentes phases du parcours ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Le parcours est divisé en trois phases principales :"}),n.jsxs("ul",{className:"space-y-3 mt-2",children:[n.jsxs("li",{className:"p-2 bg-blue-50 rounded-md",children:[n.jsx("span",{className:"font-semibold text-blue-800",children:"Phase Post-CPS :"}),n.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne les étapes juste après avoir reçu votre admission au CPS. Inclut les procédures d'inscription à l'ESIG, les documents à fournir, etc."})]}),n.jsxs("li",{className:"p-2 bg-indigo-50 rounded-md",children:[n.jsx("span",{className:"font-semibold text-indigo-800",children:"Phase During-Process :"}),n.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne toutes les démarches administratives : demande de visa, recherche de logement, assurances, préparation financière."})]}),n.jsxs("li",{className:"p-2 bg-purple-50 rounded-md",children:[n.jsx("span",{className:"font-semibold text-purple-800",children:"Phase Pre-Arrival :"}),n.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne la préparation à votre arrivée en France et à Rouen : orientation sur le campus, transports locaux, premiers jours en France."})]})]}),n.jsx("p",{className:"mt-3",children:"Chaque phase contient des ressources, des guides et des FAQ spécifiques pour vous accompagner."})]})},{id:"profile",question:"Comment modifier mon profil utilisateur ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"Pour modifier votre profil :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[n.jsx("li",{children:"Cliquez sur votre nom ou avatar dans le coin supérieur droit"}),n.jsx("li",{children:'Sélectionnez "Profil" dans le menu déroulant'}),n.jsx("li",{children:"Sur la page de profil, vous pouvez :"}),n.jsxs("ul",{className:"list-disc ml-8 mt-1 space-y-1",children:[n.jsx("li",{children:"Modifier votre nom d'affichage"}),n.jsx("li",{children:"Ajouter ou changer votre photo de profil"}),n.jsx("li",{children:"Vérifier votre adresse email"}),n.jsx("li",{children:"Modifier votre mot de passe"}),n.jsx("li",{children:"Gérer vos préférences de confidentialité"})]})]}),n.jsx("p",{className:"mt-2",children:`N'oubliez pas d'enregistrer vos modifications en cliquant sur le bouton "Enregistrer les modifications".`})]})},{id:"browser",question:"Quels navigateurs sont recommandés pour utiliser la plateforme ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"ESIG-prep-guide est optimisé pour fonctionner sur les navigateurs modernes. Nous recommandons :"}),n.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[n.jsx("li",{children:"Google Chrome (version 90+)"}),n.jsx("li",{children:"Mozilla Firefox (version 88+)"}),n.jsx("li",{children:"Microsoft Edge (version 90+)"}),n.jsx("li",{children:"Safari (version 14+)"})]}),n.jsx("p",{className:"mt-2",children:"Pour une expérience optimale, assurez-vous que votre navigateur est à jour. La plateforme est également responsive et s'adapte aux appareils mobiles et tablettes."}),n.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Note : Si vous rencontrez des problèmes d'affichage, essayez de vider le cache de votre navigateur ou d'utiliser un autre navigateur."})]})},{id:"cookies",question:"Comment sont utilisés les cookies sur la plateforme ?",answer:n.jsxs("div",{children:[n.jsx("p",{className:"mb-2",children:"ESIG-prep-guide utilise des cookies pour améliorer votre expérience utilisateur :"}),n.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[n.jsxs("li",{children:[n.jsx("span",{className:"font-medium",children:"Cookies essentiels"})," : Nécessaires au fonctionnement de la plateforme (authentification, sécurité)"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-medium",children:"Cookies de préférences"})," : Mémorisent vos préférences pour améliorer votre navigation"]}),n.jsxs("li",{children:[n.jsx("span",{className:"font-medium",children:"Cookies d'analyse"})," : Nous aident à comprendre comment vous utilisez la plateforme pour l'améliorer"]})]}),n.jsx("p",{className:"mt-2",children:"Vous pouvez gérer vos préférences concernant les cookies via la bannière de consentement ou dans les paramètres de votre profil."}),n.jsxs("p",{className:"mt-2",children:["Pour plus d'informations, consultez notre ",n.jsx(Q,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline",children:"Politique de confidentialité"}),"."]})]})}].filter(d=>d.question.toLowerCase().includes(r.toLowerCase()));return n.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx(ei,{className:"h-16 w-16 mx-auto mb-4"}),n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Centre d'aide"}),n.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Comment pouvons-nous vous aider aujourd'hui ?"}),n.jsx("div",{className:"max-w-xl mx-auto mt-6",children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",placeholder:"Rechercher dans l'aide...",className:"w-full px-4 py-3 rounded-full pl-12 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:r,onChange:d=>i(d.target.value)}),n.jsx(ti,{className:"absolute left-4 top-3.5 h-5 w-5 text-gray-400"})]})}),t&&n.jsx("div",{className:"mt-4 text-blue-100",children:n.jsxs("p",{children:["Bonjour ",t.displayName||((u=t.email)==null?void 0:u.split("@")[0])||"utilisateur",", comment pouvons-nous vous aider aujourd'hui?"]})})]})}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[n.jsx(Ns,{className:"h-12 w-12 text-blue-500 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"FAQ"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Trouvez rapidement des réponses aux questions fréquemment posées."}),n.jsx("a",{href:"#faq-section",className:"text-blue-600 hover:underline mt-auto",children:"Voir les questions fréquentes"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[n.jsx(Zn,{className:"h-12 w-12 text-green-500 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tutoriels"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Consultez nos guides détaillés pour vous aider à utiliser la plateforme."}),n.jsx(Q,{to:"/tutorial",className:"text-blue-600 hover:underline mt-auto",children:"Accéder aux tutoriels"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[n.jsx(Gi,{className:"h-12 w-12 text-purple-500 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nous contacter"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Besoin d'une assistance personnalisée ? Contactez notre équipe."}),n.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline mt-auto",children:"Voir les options de contact"})]})]}),n.jsxs("div",{id:"faq-section",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Ns,{className:"h-6 w-6 text-blue-500 mr-2"}),"Questions fréquemment posées"]}),n.jsx("div",{className:"divide-y divide-gray-200",children:c.length>0?c.map(d=>n.jsxs("div",{className:"py-4",children:[n.jsxs("button",{className:"flex justify-between items-center w-full text-left focus:outline-none",onClick:()=>o(d.id),children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.question}),e===d.id?n.jsx(vc,{className:"h-5 w-5 text-blue-500"}):n.jsx(Mn,{className:"h-5 w-5 text-blue-500"})]}),e===d.id&&n.jsx("div",{className:"mt-3 text-gray-700 bg-gray-50 p-4 rounded-md",children:d.answer})]},d.id)):n.jsxs("div",{className:"py-4 text-center",children:[n.jsxs("p",{className:"text-gray-500",children:['Aucun résultat pour "',r,'"']}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Essayez une autre recherche ou consultez les questions ci-dessous"})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Hs,{className:"h-6 w-6 text-yellow-500 mr-2"}),"Guide de dépannage courant"]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problèmes de chargement de page"}),n.jsx("p",{className:"text-gray-700 mb-2",children:"Si une page ne se charge pas correctement ou affiche une erreur :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[n.jsx("li",{children:"Rafraîchissez la page (F5 ou CTRL+R)"}),n.jsx("li",{children:"Vérifiez votre connexion internet"}),n.jsx("li",{children:"Essayez de vider le cache de votre navigateur"}),n.jsx("li",{children:"Si le problème persiste, déconnectez-vous puis reconnectez-vous"})]})]}),n.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problèmes de téléchargement de documents"}),n.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous ne parvenez pas à télécharger un document :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[n.jsx("li",{children:"Vérifiez que vous disposez de suffisamment d'espace sur votre appareil"}),n.jsx("li",{children:"Assurez-vous que votre navigateur n'a pas bloqué le téléchargement"}),n.jsx("li",{children:"Essayez d'utiliser un autre navigateur"}),n.jsx("li",{children:"Si vous utilisez un appareil mobile, essayez depuis un ordinateur"})]})]}),n.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Email de vérification non reçu"}),n.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous n'avez pas reçu l'email de vérification :"}),n.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[n.jsx("li",{children:"Vérifiez votre dossier de spam ou de courrier indésirable"}),n.jsx("li",{children:"Assurez-vous que l'adresse email saisie est correcte"}),n.jsx("li",{children:`Cliquez sur "Renvoyer l'email de vérification" dans votre profil`}),n.jsx("li",{children:"Si le problème persiste après plusieurs tentatives, contactez le support"})]})]})]})]}),n.jsxs("div",{id:"contact",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Gi,{className:"h-6 w-6 text-blue-500 mr-2"}),"Nous contacter"]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[n.jsx(Gi,{className:"h-8 w-8 text-blue-500 mb-3"}),n.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Par email"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Pour toute question ou demande d'assistance, vous pouvez nous contacter par email. Nous répondons généralement dans un délai de 24 à 48 heures."}),n.jsxs("a",{href:"mailto:support@esig-prep-guide.com",className:"inline-flex items-center text-blue-600 hover:underline",children:["abdoul.diouf2@groupe-esigelec.org",n.jsx(Vr,{className:"h-4 w-4 ml-1"})]})]}),n.jsxs("div",{className:"bg-purple-50 p-5 rounded-lg",children:[n.jsx(xj,{className:"h-8 w-8 text-purple-500 mb-3"}),n.jsx("h3",{className:"text-lg font-medium text-purple-800 mb-2",children:"Par téléphone"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"Pour une assistance immédiate, vous pouvez nous appeler pendant nos heures d'ouverture (Lundi au Vendredi, 13h - 14h / 17h - 20h GMT+0)."}),n.jsxs("a",{href:"tel:+33749051879",className:"inline-flex items-center text-purple-600 hover:underline",children:["+33 7 49 05 18 79",n.jsx(Vr,{className:"h-4 w-4 ml-1"})]})]})]}),n.jsxs("div",{className:"mt-6 bg-gray-50 p-5 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"FAQ Interactive"}),n.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous pouvez également poser vos questions directement via notre système de FAQ. Vous recevrez une réponse personnalisée de notre équipe."}),n.jsxs(Q,{to:"/faq",className:"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Accéder à la FAQ",n.jsx(d6,{className:"h-4 w-4 ml-1"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Zn,{className:"h-6 w-6 text-green-500 mr-2"}),"Ressources additionnelles"]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsx("a",{href:"https://www.esigelec.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:n.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Site officiel ESIGELEC"}),n.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Consultez le site officiel de l'ESIGELEC pour des informations actualisées sur l'école."}),n.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter le site",n.jsx(Vr,{className:"h-4 w-4 ml-1"})]})]})}),n.jsx("a",{href:"https://www.campusfrance.org/fr",target:"_blank",rel:"noopener noreferrer",className:"group",children:n.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Campus France"}),n.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Informations sur les études en France et les procédures de visa pour les étudiants internationaux."}),n.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter Campus France",n.jsx(Vr,{className:"h-4 w-4 ml-1"})]})]})}),n.jsx("a",{href:"https://france-visas.gouv.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:n.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"France-Visas"}),n.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Site officiel des visas pour la France avec informations détaillées sur les procédures."}),n.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter France-Visas",n.jsx(Vr,{className:"h-4 w-4 ml-1"})]})]})})]})]})]})]})},d6=({className:t})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:n.jsx("polyline",{points:"9 18 15 12 9 6"})}),h6=()=>{const[t,e]=T.useState(""),[s,r]=T.useState(""),[i,o]=T.useState(""),[a,c]=T.useState(!1),u=os(),d=async m=>{m.preventDefault(),o(""),r(""),c(!0);try{await Tm(Tt,t),r("Un email de réinitialisation a été envoyé.")}catch{o("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[n.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:n.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),n.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),n.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:n.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&n.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:s}),i&&n.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:i}),n.jsxs("form",{className:"space-y-6",onSubmit:d,children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),n.jsx("div",{className:"mt-1",children:n.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:m=>e(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),n.jsx("div",{children:n.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),n.jsx("div",{className:"mt-4 text-center",children:n.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})},m6=()=>n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(Zn,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Conditions Générales d'Utilisation"}),n.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Ce document définit les règles d'utilisation de notre plateforme. Nous vous invitons à le lire attentivement."}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:n.jsxs("div",{className:"prose max-w-none",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),n.jsx("p",{children:`Les présentes Conditions Générales d'Utilisation (ci-après dénommées "CGU") encadrent l'utilisation de la plateforme ESIG-prep-guide (ci-après dénommée "la Plateforme") mise à disposition par [Votre Nom/Organisation], à destination des étudiants et futurs étudiants de l'ESIGELEC.`}),n.jsx("p",{children:"En utilisant la Plateforme, vous acceptez sans réserve les présentes CGU. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser la Plateforme."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Description du service"})]}),n.jsx("p",{children:"La Plateforme ESIG-prep-guide est un outil d'aide et d'accompagnement destiné aux étudiants et futurs étudiants de l'ESIGELEC. Elle fournit des informations, des ressources et des guides pour faciliter les démarches liées aux études à l'ESIGELEC."}),n.jsx("p",{children:"La Plateforme propose notamment :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Des guides d'information pour les différentes phases du parcours étudiant (post-admission, pendant les démarches, pré-arrivée)"}),n.jsx("li",{children:"Une bibliothèque de ressources documentaires"}),n.jsx("li",{children:"Une section FAQ permettant aux utilisateurs de poser des questions et de consulter les réponses"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(ph,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Accès au service"})]}),n.jsx("p",{children:"La Plateforme est accessible gratuitement à tout utilisateur disposant d'un accès à Internet. Tous les frais liés à l'accès à la Plateforme (matériel informatique, logiciels, connexion Internet, etc.) sont à la charge de l'utilisateur."}),n.jsx("p",{children:"Certaines fonctionnalités de la Plateforme nécessitent une inscription préalable. L'utilisateur s'engage à fournir des informations exactes et à jour lors de son inscription."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Propriété intellectuelle"})]}),n.jsx("p",{children:"L'ensemble des éléments constituant la Plateforme (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive de [Votre Nom/Organisation] ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments de la Plateforme, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),n.jsx("p",{children:"Les marques et logos présents sur la Plateforme sont la propriété de leurs détenteurs respectifs. Toute reproduction sans autorisation préalable est interdite."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Hs,{className:"w-6 h-6 text-yellow-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Responsabilités"})]}),n.jsx("p",{children:"Les informations fournies sur la Plateforme le sont à titre informatif. [Votre Nom/Organisation] s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur la Plateforme."}),n.jsx("p",{children:"[Votre Nom/Organisation] ne saurait être tenu responsable :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Des éventuelles interruptions de la Plateforme pour des raisons de maintenance ou autres"}),n.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),n.jsx("li",{children:"Des conséquences de l'utilisation de la Plateforme"}),n.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur la Plateforme"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(ph,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Obligations de l'utilisateur"})]}),n.jsx("p",{children:"En utilisant la Plateforme, l'utilisateur s'engage à :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Ne pas utiliser la Plateforme à des fins illégales ou interdites par les présentes CGU"}),n.jsx("li",{children:"Ne pas tenter de perturber le bon fonctionnement de la Plateforme"}),n.jsx("li",{children:"Ne pas diffuser de contenu illégal, préjudiciable, menaçant, injurieux, harcelant, diffamatoire, vulgaire, obscène, contraire aux bonnes mœurs, portant atteinte à la vie privée d'une personne ou contrevenant aux lois en vigueur"}),n.jsx("li",{children:"Ne pas collecter ou stocker des données personnelles concernant d'autres utilisateurs"}),n.jsx("li",{children:"Ne pas usurper l'identité d'une autre personne ou entité"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Modification des CGU"})]}),n.jsx("p",{children:"[Votre Nom/Organisation] se réserve le droit de modifier les présentes CGU à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié. L'utilisation continue de la Plateforme après modification des CGU vaut acceptation des nouvelles conditions."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Droit applicable et juridiction compétente"})]}),n.jsx("p",{children:"Les présentes CGU sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(ph,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),n.jsx("p",{children:"Pour toute question relative aux présentes CGU, vous pouvez contacter [Votre Nom/Organisation] à l'adresse suivante : [Votre adresse email]."}),n.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[n.jsx(Xt,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document légal important"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ces conditions générales d'utilisation constituent un contrat juridiquement contraignant entre vous et notre service. En utilisant notre plateforme, vous acceptez ces conditions."})]})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),p6=()=>n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(jn,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Politique de Confidentialité"}),n.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Nous accordons une grande importance à la protection de vos données personnelles. Ce document détaille comment nous les collectons et les utilisons."}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:n.jsxs("div",{className:"prose max-w-none",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[n.jsx(jn,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),n.jsx("p",{children:'La présente Politique de Confidentialité décrit comment la plateforme ESIG-prep-guide (ci-après "la Plateforme") collecte, utilise et protège vos données personnelles lorsque vous utilisez notre service.'}),n.jsx("p",{children:"Nous respectons votre vie privée et nous nous engageons à protéger vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD) et aux autres lois applicables en matière de protection des données."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(us,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Responsable du traitement"})]}),n.jsx("p",{children:"Le responsable du traitement de vos données personnelles est [Votre Nom/Organisation], joignable à l'adresse email suivante : [Votre adresse email]."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(pj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Quelles données collectons-nous ?"})]}),n.jsx("p",{children:"Nous pouvons collecter les types de données personnelles suivants :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Données d'identification"})," : nom, prénom, adresse email, identifiant utilisateur"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Données de connexion"})," : adresse IP, type de navigateur, système d'exploitation, date et heure de connexion"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Données d'utilisation"})," : interactions avec la Plateforme, questions posées, ressources consultées"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Données de profil"})," : préférences, centres d'intérêt en lien avec votre utilisation de la Plateforme"]})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Comment collectons-nous vos données ?"})]}),n.jsx("p",{children:"Nous collectons vos données de différentes manières :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Directement auprès de vous"})," : lorsque vous créez un compte, complétez un formulaire, posez une question, ou interagissez avec notre Plateforme"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Automatiquement"})," : à travers des cookies et technologies similaires lorsque vous naviguez sur notre Plateforme"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Auprès de tiers"})," : lorsque vous vous connectez via des services tiers comme Google"]})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Pourquoi utilisons-nous vos données ?"})]}),n.jsx("p",{children:"Nous utilisons vos données personnelles pour les finalités suivantes :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Vous permettre de créer et de gérer votre compte utilisateur"}),n.jsx("li",{children:"Vous fournir les services et fonctionnalités de la Plateforme"}),n.jsx("li",{children:"Répondre à vos questions et demandes"}),n.jsx("li",{children:"Personnaliser votre expérience sur la Plateforme"}),n.jsx("li",{children:"Améliorer et développer notre Plateforme"}),n.jsx("li",{children:"Assurer la sécurité de la Plateforme et prévenir les fraudes"}),n.jsx("li",{children:"Respecter nos obligations légales"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Base légale du traitement"})]}),n.jsx("p",{children:"Nous traitons vos données personnelles sur les bases légales suivantes :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Exécution du contrat"})," : le traitement est nécessaire à l'exécution du contrat auquel vous êtes partie (les Conditions Générales d'Utilisation)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Consentement"})," : vous avez donné votre consentement au traitement de vos données à caractère personnel pour une ou plusieurs finalités spécifiques"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Intérêts légitimes"})," : le traitement est nécessaire aux fins des intérêts légitimes poursuivis par nous ou par un tiers"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Obligation légale"})," : le traitement est nécessaire au respect d'une obligation légale à laquelle nous sommes soumis"]})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Durée de conservation"})]}),n.jsx("p",{children:"Nous conservons vos données personnelles uniquement pendant la durée nécessaire à la réalisation des finalités pour lesquelles elles ont été collectées, y compris pour satisfaire aux exigences légales, comptables ou de déclaration."}),n.jsx("p",{children:"Vos données de compte utilisateur sont conservées tant que votre compte est actif. En cas de suppression de votre compte, vos données personnelles sont supprimées ou anonymisées dans un délai raisonnable."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(us,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Partage de vos données"})]}),n.jsx("p",{children:"Nous pouvons partager vos données personnelles avec :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Nos prestataires de services"})," : qui nous aident à fournir nos services (hébergement, maintenance, analyses, etc.)"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Des tiers avec votre consentement"})," : lorsque vous nous avez autorisés à le faire"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Les autorités compétentes"})," : lorsque nous sommes légalement tenus de le faire"]})]}),n.jsx("p",{children:"Nous ne vendons pas vos données personnelles à des tiers."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(gj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Transfert de données hors UE"})]}),n.jsx("p",{children:"Certains de nos prestataires de services peuvent être basés en dehors de l'Espace Économique Européen (EEE). Lorsque nous transférons vos données personnelles en dehors de l'EEE, nous nous assurons qu'elles bénéficient d'un niveau de protection similaire en mettant en œuvre des garanties appropriées (clauses contractuelles types, décisions d'adéquation, etc.)."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Xt,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"10. Vos droits"})]}),n.jsx("p",{children:"Conformément au RGPD, vous disposez des droits suivants concernant vos données personnelles :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Droit d'accès"})," : vous pouvez demander une copie des données personnelles que nous détenons à votre sujet"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit de rectification"})," : vous pouvez demander la correction de données inexactes ou incomplètes"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit à l'effacement"})," : vous pouvez demander la suppression de vos données personnelles dans certaines circonstances"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit à la limitation du traitement"})," : vous pouvez demander la limitation du traitement de vos données personnelles"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit à la portabilité des données"})," : vous pouvez demander le transfert de vos données personnelles à un autre responsable du traitement"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit d'opposition"})," : vous pouvez vous opposer au traitement de vos données personnelles dans certaines circonstances"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Droit de retirer votre consentement"})," : lorsque le traitement est basé sur votre consentement"]})]}),n.jsx("p",{children:"Pour exercer ces droits, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),n.jsx("p",{children:"Si vous estimez, après nous avoir contactés, que vos droits ne sont pas respectés, vous avez le droit d'introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés (CNIL)."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(T5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"11. Sécurité des données"})]}),n.jsx("p",{children:"Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données personnelles contre tout traitement non autorisé ou illégal et contre toute perte, destruction ou dommage accidentels."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(yj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"12. Cookies et technologies similaires"})]}),n.jsx("p",{children:"Notre Plateforme utilise des cookies et des technologies similaires pour améliorer votre expérience et recueillir des informations sur l'utilisation de la Plateforme. Vous pouvez gérer vos préférences en matière de cookies via notre bannière de consentement aux cookies."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"13. Modification de la politique de confidentialité"})]}),n.jsx("p",{children:"Nous pouvons modifier cette politique de confidentialité de temps à autre. Toute modification sera publiée sur cette page et, si les modifications sont importantes, nous vous fournirons une notification plus visible."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(us,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"14. Contact"})]}),n.jsx("p",{children:"Pour toute question concernant cette politique de confidentialité ou vos données personnelles, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),n.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[n.jsx(x5,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Protection de vos données personnelles"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au Règlement Général sur la Protection des Données (RGPD), vous pouvez à tout moment exercer vos droits d'accès, de rectification, d'effacement, de limitation, de portabilité et d'opposition aux données vous concernant."})]})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),f6=()=>n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(u5,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Mentions Légales"}),n.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Informations légales relatives à l'éditeur du site et aux conditions d'hébergement."}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:n.jsxs("div",{className:"prose max-w-none",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[n.jsx(h5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Éditeur du site"})]}),n.jsx("p",{children:'Le site ESIG-prep-guide (ci-après "le Site") est édité par :'}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nom :"})," Abdoul Ahad Mbacké Diouf",n.jsx("br",{}),n.jsx("strong",{children:"Adresse :"})," [Votre adresse postale]",n.jsx("br",{}),n.jsx("strong",{children:"Email :"})," [Votre adresse email]",n.jsx("br",{}),n.jsx("strong",{children:"Téléphone :"})," [Votre numéro de téléphone]"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Directeur de la publication :"})," Abdoul Ahad Mbacké Diouf"]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(yj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Hébergement"})]}),n.jsx("p",{children:"Le Site est hébergé par :"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Société :"})," GitHub Pages (GitHub Inc.)",n.jsx("br",{}),n.jsx("strong",{children:"Adresse :"})," 88 Colin P Kelly Jr St, San Francisco, CA 94107, États-Unis",n.jsx("br",{}),n.jsx("strong",{children:"Site web :"})," ",n.jsx("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"https://pages.github.com/"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(g5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Propriété intellectuelle"})]}),n.jsx("p",{children:"L'ensemble des éléments constituant le Site (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive d'Abdoul Ahad Mbacké Diouf ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments du Site, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),n.jsx("p",{children:"Toute exploitation non autorisée du Site ou de l'un quelconque des éléments qu'il contient sera considérée comme constitutive d'une contrefaçon et poursuivie conformément aux dispositions des articles L.335-2 et suivants du Code de Propriété Intellectuelle."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Hs,{className:"w-6 h-6 text-yellow-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Responsabilité"})]}),n.jsx("p",{children:"Les informations fournies sur le Site le sont à titre informatif. Abdoul Ahad Mbacké Diouf s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur le Site."}),n.jsx("p",{children:"Abdoul Ahad Mbacké Diouf ne saurait être tenu responsable :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Des éventuelles interruptions du Site pour des raisons de maintenance ou autres"}),n.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),n.jsx("li",{children:"Des conséquences de l'utilisation du Site"}),n.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur le Site"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(gj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Liens hypertextes"})]}),n.jsx("p",{children:"Le Site peut contenir des liens hypertextes vers d'autres sites internet. Abdoul Ahad Mbacké Diouf n'exerce aucun contrôle sur ces sites et n'assume aucune responsabilité quant à leur contenu."}),n.jsx("p",{children:"La création de liens hypertextes vers le Site est autorisée sous réserve :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Que les liens ne soient pas utilisés à des fins commerciales ou publicitaires"}),n.jsx("li",{children:"Qu'ils n'induisent pas de confusion sur l'origine des services ou contenus du Site"}),n.jsx("li",{children:"Qu'ils ne portent pas atteinte aux intérêts d'Abdoul Ahad Mbacké Diouf"})]}),n.jsx("p",{children:"Abdoul Ahad Mbacké Diouf se réserve le droit de demander la suppression de tout lien hypertexte pointant vers le Site qui ne respecterait pas ces conditions."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Gi,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Protection des données personnelles"})]}),n.jsxs("p",{children:["Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, vous disposez de droits concernant vos données personnelles. Pour en savoir plus, veuillez consulter notre ",n.jsx(Q,{to:"/legal/privacy-policy",children:"Politique de Confidentialité"}),"."]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(D5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Droit applicable et juridiction compétente"})]}),n.jsx("p",{children:"Les présentes mentions légales sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(xj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Contact"})]}),n.jsx("p",{children:"Pour toute question relative aux présentes mentions légales, vous pouvez contacter Abdoul Ahad Mbacké Diouf à l'adresse suivante : [Votre adresse email]."}),n.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[n.jsx(k5,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Informations obligatoires"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément à l'article 6 de la loi n° 2004-575 du 21 juin 2004 pour la confiance dans l'économie numérique, il est précisé aux utilisateurs du site ESIG-prep-guide l'identité des différents intervenants dans le cadre de sa réalisation et de son suivi."})]})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),g6=()=>n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(Fy,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Charte de Modération"}),n.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Règles de bonne conduite pour les interactions sur notre plateforme ESIG-prep-guide."}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:n.jsxs("div",{className:"prose max-w-none",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[n.jsx(Ns,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),n.jsx("p",{children:'La présente Charte de Modération définit les règles de bonne conduite applicables aux interactions sur la plateforme ESIG-prep-guide (ci-après "la Plateforme"), notamment en ce qui concerne les questions posées dans la section FAQ et tout autre contenu généré par les utilisateurs.'}),n.jsx("p",{children:"Cette charte vise à garantir un environnement respectueux et constructif pour tous les utilisateurs de la Plateforme."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Fy,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Principes généraux"})]}),n.jsx("p",{children:"Tous les contenus publiés sur la Plateforme doivent respecter les principes suivants :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Respect mutuel entre les utilisateurs"}),n.jsx("li",{children:"Pertinence par rapport aux thématiques de la Plateforme"}),n.jsx("li",{children:"Exactitude et véracité des informations partagées"}),n.jsx("li",{children:"Respect des lois et règlements en vigueur"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Hs,{className:"w-6 h-6 text-yellow-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Contenus prohibés"})]}),n.jsx("p",{children:"Sont formellement interdits les contenus :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"À caractère injurieux, diffamatoire, raciste, xénophobe, homophobe, sexiste ou discriminatoire"}),n.jsx("li",{children:"Incitant à la haine, à la violence ou au harcèlement envers une personne ou un groupe"}),n.jsx("li",{children:"À caractère pornographique, obscène ou choquant"}),n.jsx("li",{children:"Violant les droits de propriété intellectuelle d'autrui"}),n.jsx("li",{children:"Comportant des informations personnelles d'un tiers sans son consentement"}),n.jsx("li",{children:"Faisant la promotion d'activités illégales"}),n.jsx("li",{children:"Comportant des liens vers des sites malveillants ou frauduleux"}),n.jsx("li",{children:"Consistant en du spam ou des messages répétitifs"}),n.jsx("li",{children:"Hors sujet ou sans rapport avec les thématiques de la Plateforme"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(y5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Procédure de modération"})]}),n.jsx("p",{children:"La modération des contenus sur la Plateforme s'effectue de la manière suivante :"}),n.jsxs("ul",{children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Modération a priori"})," : les questions posées dans la section FAQ sont examinées par l'équipe de modération avant leur publication"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Signalement"})," : les utilisateurs peuvent signaler tout contenu qu'ils jugent inapproprié"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Suppression"})," : les contenus ne respectant pas la présente charte peuvent être supprimés sans préavis"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Sanctions"})," : en cas de violations répétées, des mesures peuvent être prises à l'encontre des utilisateurs concernés (avertissement, suspension temporaire, suppression du compte)"]})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(ei,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Bonnes pratiques recommandées"})]}),n.jsx("p",{children:"Pour contribuer positivement à la Plateforme, nous encourageons les utilisateurs à :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Formuler des questions claires et précises"}),n.jsx("li",{children:"Utiliser un langage correct et respectueux"}),n.jsx("li",{children:"Vérifier que leur question n'a pas déjà été posée"}),n.jsx("li",{children:"Catégoriser correctement leur question (phase, catégorie)"}),n.jsx("li",{children:"Fournir les informations nécessaires à la compréhension de leur question"}),n.jsx("li",{children:"Partager leur expérience de manière constructive"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(us,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Rôle des modérateurs"})]}),n.jsx("p",{children:"Les modérateurs de la Plateforme ont pour mission de :"}),n.jsxs("ul",{children:[n.jsx("li",{children:"Veiller au respect de la présente charte"}),n.jsx("li",{children:"Examiner les contenus signalés par les utilisateurs"}),n.jsx("li",{children:"Prendre les mesures appropriées en cas de non-respect des règles"}),n.jsx("li",{children:"Répondre aux questions des utilisateurs concernant la modération"}),n.jsx("li",{children:"Faire évoluer la présente charte si nécessaire"})]}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(_5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Contestation d'une décision de modération"})]}),n.jsx("p",{children:"Si vous contestez une décision de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),n.jsx("p",{children:"Votre demande sera examinée dans les meilleurs délais."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Modification de la charte"})]}),n.jsx("p",{children:"La présente charte peut être modifiée à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié."}),n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[n.jsx(Ns,{className:"w-6 h-6 text-blue-600"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),n.jsx("p",{children:"Pour toute question concernant cette charte de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),n.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[n.jsx(hj,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Règles de la communauté"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Cette charte de modération vise à maintenir un environnement d'échanges respectueux et constructif. En utilisant notre plateforme, vous vous engagez à respecter ces règles pour le bénéfice de tous les utilisateurs."})]})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),x6=()=>{const{currentUser:t,isAdmin:e}=nt();return!t||!e()?n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(jn,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Accès restreint"}),n.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Cette page est réservée aux administrateurs de la plateforme."}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto border border-gray-100",children:[n.jsx("div",{className:"bg-red-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-6",children:n.jsx(jn,{className:"h-10 w-10 text-red-500"})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accès administrateur requis"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Le registre RGPD est un document à usage interne destiné uniquement aux administrateurs. Veuillez vous connecter avec un compte disposant des privilèges administrateur pour y accéder."}),n.jsx("div",{className:"flex justify-center",children:n.jsxs(Q,{to:"/login",className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:[n.jsx(jn,{className:"w-4 h-4"}),"Se connecter"]})})]})})]}):n.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx("div",{className:"flex items-center justify-center mb-6",children:n.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:n.jsx(Xt,{className:"w-8 h-8 text-white"})})}),n.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Registre de Traitement RGPD"}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex items-center text-red-200 bg-red-700 px-4 py-2 rounded-md inline-block mt-2 shadow-sm",children:[n.jsx(jn,{className:"w-5 h-5 mr-2"}),"Document confidentiel à usage interne uniquement"]})}),n.jsx("div",{className:"flex justify-center mt-6",children:n.jsxs(Q,{to:"/admin",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})}),n.jsx("div",{className:"container mx-auto px-4 py-12",children:n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-5xl mx-auto border border-gray-100",children:n.jsxs("div",{className:"prose max-w-none",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-4 rounded-lg border border-red-200",children:[n.jsx(jn,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),n.jsx("h2",{className:"text-xl font-bold text-red-800 m-0",children:"CONFIDENTIEL - Registre des activités de traitement"})]})}),n.jsx("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mb-8",children:n.jsx("p",{className:"text-blue-800 font-medium",children:"Conformément à l'article 30 du Règlement Général sur la Protection des Données (RGPD), ce registre recense l'ensemble des traitements de données à caractère personnel mis en œuvre par ESIG-prep-guide en tant que responsable de traitement."})}),n.jsxs("div",{className:"mb-12",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-6",children:[n.jsx(us,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"1. Identité du responsable de traitement"})]}),n.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 shadow-sm",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"flex items-start",children:[n.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Nom :"}),n.jsx("span",{children:"Abdoul Ahad Mbacké Diouf"})]}),n.jsxs("p",{className:"flex items-start mt-3",children:[n.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Adresse :"}),n.jsx("span",{children:"[Votre adresse postale]"})]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"flex items-start",children:[n.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Email :"}),n.jsx("span",{children:"[Votre adresse email]"})]}),n.jsxs("p",{className:"flex items-start mt-3",children:[n.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Téléphone :"}),n.jsx("span",{children:"[Votre numéro de téléphone]"})]})]})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs("p",{className:"flex items-start",children:[n.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Délégué à la protection des données :"}),n.jsx("span",{children:'[Nom du DPO ou "Non désigné"]'})]})})]})]}),n.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[n.jsx(pj,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 1: Gestion des comptes utilisateurs"})]}),n.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:n.jsxs("tbody",{children:[n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des comptes utilisateurs et authentification"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Création et gestion de compte"}),n.jsx("li",{children:"Authentification des utilisateurs"}),n.jsx("li",{children:"Récupération de mot de passe"}),n.jsx("li",{children:"Vérification d'email"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Exécution contractuelle (CGU) et consentement"})})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Identifiants: nom, prénom, adresse email"}),n.jsx("li",{children:"Données de compte: mot de passe (hashé), rôle"}),n.jsx("li",{children:"Données de connexion: timestamp, adresse IP"}),n.jsx("li",{children:"Données de profil: photo (facultatif)"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"En interne: administrateurs de la plateforme"}),n.jsx("li",{children:"En externe: Firebase (sous-traitant pour l'authentification)"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Aussi longtemps que le compte est actif + 1 an après suppression pour des raisons techniques et légales"})})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Authentification sécurisée (Firebase Auth)"}),n.jsx("li",{children:"Mots de passe hashés"}),n.jsx("li",{children:"Accès restreint aux données administrateur"}),n.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),n.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[n.jsx(Zn,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 2: Gestion des questions FAQ"})]}),n.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:n.jsxs("tbody",{children:[n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des questions posées par les utilisateurs"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Recueil des questions des utilisateurs"}),n.jsx("li",{children:"Modération et publication des questions"}),n.jsx("li",{children:"Réponse aux questions"}),n.jsx("li",{children:"Constitution d'une base de connaissances"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Consentement et intérêt légitime"})})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Identifiants: ID utilisateur, email"}),n.jsx("li",{children:"Contenu: question posée, catégorie, phase"}),n.jsx("li",{children:"Métadonnées: date de soumission, statut de la question"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"En interne: administrateurs et modérateurs"}),n.jsx("li",{children:"En externe: Firebase (sous-traitant pour le stockage des données)"}),n.jsx("li",{children:"Public: questions approuvées et répondues"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),n.jsxs("td",{className:"border border-gray-300 p-3",children:[n.jsx("p",{children:"Questions publiées: durée de vie de la plateforme"}),n.jsx("p",{children:"Questions refusées: 1 an après refus"})]})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Accès restreint aux données complètes (admin uniquement)"}),n.jsx("li",{children:"Modération avant publication"}),n.jsx("li",{children:"Règles de sécurité Firebase"}),n.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),n.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[n.jsx(w5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 3: Gestion des ressources documentaires"})]}),n.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:n.jsxs("tbody",{children:[n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion et mise à disposition des ressources documentaires"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Publication de documents informatifs"}),n.jsx("li",{children:"Catégorisation des ressources"}),n.jsx("li",{children:"Accès contrôlé aux ressources"}),n.jsx("li",{children:"Suivi statistique des consultations"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Exécution contractuelle (CGU) et intérêt légitime"})})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Métadonnées des ressources: titre, description, catégorie, phase"}),n.jsx("li",{children:"Données d'accès: identifiant utilisateur, timestamp d'accès"}),n.jsx("li",{children:"Statistiques anonymisées: nombre de consultations"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),n.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme, administrateurs"})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"En interne: administrateurs"}),n.jsx("li",{children:"En externe: Firebase (stockage des métadonnées), Dropbox (stockage des fichiers)"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),n.jsxs("td",{className:"border border-gray-300 p-3",children:[n.jsx("p",{children:"Métadonnées des ressources: durée de vie de la plateforme"}),n.jsx("p",{children:"Données d'accès individuelles: 1 an"})]})]}),n.jsxs("tr",{children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[n.jsx("li",{children:"Authentification requise pour l'accès aux ressources"}),n.jsx("li",{children:"Gestion des droits d'accès"}),n.jsx("li",{children:"Transmission sécurisée via HTTPS"}),n.jsx("li",{children:"Sécurité des liens de téléchargement"})]})})]}),n.jsxs("tr",{className:"bg-gray-50",children:[n.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),n.jsx("td",{className:"border border-gray-300 p-3",children:n.jsx("p",{children:"Oui (Firebase - USA, Dropbox - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),n.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(L5,{className:"w-6 h-6 text-blue-600"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Mise à jour du registre"})]}),n.jsx("p",{className:"text-gray-700",children:"Ce registre est mis à jour régulièrement pour refléter l'évolution des traitements de données effectués."}),n.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[n.jsx(Hs,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document obligatoire"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au RGPD, ce registre des activités de traitement doit être conservé à jour et présenté sur demande à la CNIL. Il constitue un élément essentiel de la conformité au RGPD."})]})]}),n.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})]})})})]})};function y6(){return n.jsx(s5,{children:n.jsx(r5,{children:n.jsx(OS,{basename:"/Esig-prep-guide",children:n.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[n.jsx(q5,{}),n.jsx("main",{className:"flex-grow",children:n.jsxs(AS,{children:[n.jsx(Se,{path:"/",element:n.jsx(H5,{})}),n.jsx(Se,{path:"/login",element:n.jsx(W5,{})}),n.jsx(Se,{path:"/register",element:n.jsx(Q5,{})}),n.jsx(Se,{path:"/reset-password",element:n.jsx(h6,{})}),n.jsx(Se,{path:"/test-firebase",element:n.jsx(i6,{})}),n.jsx(Se,{path:"/legal/cgu",element:n.jsx(m6,{})}),n.jsx(Se,{path:"/legal/privacy-policy",element:n.jsx(p6,{})}),n.jsx(Se,{path:"/legal/legal-notice",element:n.jsx(f6,{})}),n.jsx(Se,{path:"/legal/moderation-charter",element:n.jsx(g6,{})}),n.jsx(Se,{path:"/legal/rgpd-registry",element:n.jsx(Ls,{children:n.jsx(x6,{})})}),n.jsx(Se,{path:"/dashboard",element:n.jsx(yi,{children:n.jsx(J5,{})})}),n.jsx(Se,{path:"/resources",element:n.jsx(yi,{children:n.jsx(X5,{})})}),n.jsx(Se,{path:"/faq",element:n.jsx(yi,{children:n.jsx(Z5,{})})}),n.jsx(Se,{path:"/profile",element:n.jsx(yi,{children:n.jsx(l6,{})})}),n.jsx(Se,{path:"/tutorial",element:n.jsx(yi,{children:n.jsx(c6,{})})}),n.jsx(Se,{path:"/help",element:n.jsx(yi,{children:n.jsx(u6,{})})}),n.jsx(Se,{path:"/admin",element:n.jsx(Ls,{children:n.jsx(n3,{})})}),n.jsx(Se,{path:"/admin/content",element:n.jsx(Ls,{children:n.jsx(b3,{})})}),n.jsx(Se,{path:"/admin/resources",element:n.jsx(Ls,{children:n.jsx(J3,{})})}),n.jsx(Se,{path:"/admin/users",element:n.jsx(Ls,{children:n.jsx(Z3,{})})}),n.jsx(Se,{path:"/admin/users/:uid",element:n.jsx(Ls,{children:n.jsx(e6,{})})}),n.jsx(Se,{path:"/admin/activity",element:n.jsx(Ls,{children:n.jsx(t6,{})})}),n.jsx(Se,{path:"/admin/progressions",element:n.jsx(Ls,{children:n.jsx(r6,{})})}),n.jsx(Se,{path:"/admin/tutorial",element:n.jsx(Ls,{children:n.jsx(s6,{})})}),n.jsx(Se,{path:"/admin/dropbox",element:n.jsx(Ls,{children:n.jsx(n6,{})})}),n.jsx(Se,{path:"*",element:n.jsx(o6,{})})]})}),n.jsx(z5,{}),n.jsx(B5,{}),n.jsx($5,{})]})})})})}Yf.init("l4eGBb6GgLVODJBOf");_h.createRoot(document.getElementById("root")).render(n.jsx(Ha.StrictMode,{children:n.jsx(y6,{})}))});export default v6();
