var l_=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var HD=l_((eL,q2)=>{function c_(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();function u_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bv={exports:{}},Zu={},$v={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),d_=Symbol.for("react.portal"),h_=Symbol.for("react.fragment"),m_=Symbol.for("react.strict_mode"),p_=Symbol.for("react.profiler"),f_=Symbol.for("react.provider"),x_=Symbol.for("react.context"),g_=Symbol.for("react.forward_ref"),y_=Symbol.for("react.suspense"),v_=Symbol.for("react.memo"),b_=Symbol.for("react.lazy"),Mg=Symbol.iterator;function w_(t){return t===null||typeof t!="object"?null:(t=Mg&&t[Mg]||t["@@iterator"],typeof t=="function"?t:null)}var Gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wv=Object.assign,Hv={};function Ua(t,e,r){this.props=t,this.context=e,this.refs=Hv,this.updater=r||Gv}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Qv(){}Qv.prototype=Ua.prototype;function Fp(t,e,r){this.props=t,this.context=e,this.refs=Hv,this.updater=r||Gv}var Op=Fp.prototype=new Qv;Op.constructor=Fp;Wv(Op,Ua.prototype);Op.isPureReactComponent=!0;var Vg=Array.isArray,Kv=Object.prototype.hasOwnProperty,qp={current:null},Yv={key:!0,ref:!0,__self:!0,__source:!0};function Jv(t,e,r){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Kv.call(e,n)&&!Yv.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:kl,type:t,key:a,ref:o,props:i,_owner:qp.current}}function j_(t,e){return{$$typeof:kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Up(t){return typeof t=="object"&&t!==null&&t.$$typeof===kl}function N_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Fg=/\/+/g;function lh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?N_(""+t.key):e.toString(36)}function Lc(t,e,r,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kl:case d_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+lh(o,0):n,Vg(i)?(r="",t!=null&&(r=t.replace(Fg,"$&/")+"/"),Lc(i,e,r,"",function(d){return d})):i!=null&&(Up(i)&&(i=j_(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Fg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Vg(t))for(var l=0;l<t.length;l++){a=t[l];var u=n+lh(a,l);o+=Lc(a,e,r,u,i)}else if(u=w_(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=n+lh(a,l++),o+=Lc(a,e,r,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dc(t,e,r){if(t==null)return t;var n=[],i=0;return Lc(t,n,"","",function(a){return e.call(r,a,i++)}),n}function __(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cs={current:null},Mc={transition:null},E_={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:Mc,ReactCurrentOwner:qp};function Xv(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:dc,forEach:function(t,e,r){dc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return dc(t,function(){e++}),e},toArray:function(t){return dc(t,function(e){return e})||[]},only:function(t){if(!Up(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Ua;Te.Fragment=h_;Te.Profiler=p_;Te.PureComponent=Fp;Te.StrictMode=m_;Te.Suspense=y_;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E_;Te.act=Xv;Te.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=qp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Kv.call(e,u)&&!Yv.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:kl,type:t.type,key:i,ref:a,props:n,_owner:o}};Te.createContext=function(t){return t={$$typeof:x_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:f_,_context:t},t.Consumer=t};Te.createElement=Jv;Te.createFactory=function(t){var e=Jv.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:g_,render:t}};Te.isValidElement=Up;Te.lazy=function(t){return{$$typeof:b_,_payload:{_status:-1,_result:t},_init:__}};Te.memo=function(t,e){return{$$typeof:v_,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Mc.transition;Mc.transition={};try{t()}finally{Mc.transition=e}};Te.unstable_act=Xv;Te.useCallback=function(t,e){return cs.current.useCallback(t,e)};Te.useContext=function(t){return cs.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return cs.current.useDeferredValue(t)};Te.useEffect=function(t,e){return cs.current.useEffect(t,e)};Te.useId=function(){return cs.current.useId()};Te.useImperativeHandle=function(t,e,r){return cs.current.useImperativeHandle(t,e,r)};Te.useInsertionEffect=function(t,e){return cs.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return cs.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return cs.current.useMemo(t,e)};Te.useReducer=function(t,e,r){return cs.current.useReducer(t,e,r)};Te.useRef=function(t){return cs.current.useRef(t)};Te.useState=function(t){return cs.current.useState(t)};Te.useSyncExternalStore=function(t,e,r){return cs.current.useSyncExternalStore(t,e,r)};Te.useTransition=function(){return cs.current.useTransition()};Te.version="18.3.1";$v.exports=Te;var g=$v.exports;const bi=u_(g),k_=c_({__proto__:null,default:bi},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_=g,C_=Symbol.for("react.element"),A_=Symbol.for("react.fragment"),T_=Object.prototype.hasOwnProperty,I_=S_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P_={key:!0,ref:!0,__self:!0,__source:!0};function Zv(t,e,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)T_.call(e,n)&&!P_.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:C_,type:t,key:a,ref:o,props:i,_owner:I_.current}}Zu.Fragment=A_;Zu.jsx=Zv;Zu.jsxs=Zv;Bv.exports=Zu;var s=Bv.exports,cm={},eb={exports:{}},Is={},tb={exports:{}},sb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,H){var F=V.length;V.push(H);e:for(;0<F;){var R=F-1>>>1,U=V[R];if(0<i(U,H))V[R]=H,V[F]=U,F=R;else break e}}function r(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var H=V[0],F=V.pop();if(F!==H){V[0]=F;e:for(var R=0,U=V.length,W=U>>>1;R<W;){var ne=2*(R+1)-1,pe=V[ne],Z=ne+1,J=V[Z];if(0>i(pe,F))Z<U&&0>i(J,pe)?(V[R]=J,V[Z]=F,R=Z):(V[R]=pe,V[ne]=F,R=ne);else if(Z<U&&0>i(J,F))V[R]=J,V[Z]=F,R=Z;else break e}}return H}function i(V,H){var F=V.sortIndex-H.sortIndex;return F!==0?F:V.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,x=3,j=!1,A=!1,D=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var H=r(d);H!==null;){if(H.callback===null)n(d);else if(H.startTime<=V)n(d),H.sortIndex=H.expirationTime,e(u,H);else break;H=r(d)}}function I(V){if(D=!1,_(V),!A)if(r(u)!==null)A=!0,de(M);else{var H=r(d);H!==null&&O(I,H.startTime-V)}}function M(V,H){A=!1,D&&(D=!1,y(f),f=-1),j=!0;var F=x;try{for(_(H),m=r(u);m!==null&&(!(m.expirationTime>H)||V&&!C());){var R=m.callback;if(typeof R=="function"){m.callback=null,x=m.priorityLevel;var U=R(m.expirationTime<=H);H=t.unstable_now(),typeof U=="function"?m.callback=U:m===r(u)&&n(u),_(H)}else n(u);m=r(u)}if(m!==null)var W=!0;else{var ne=r(d);ne!==null&&O(I,ne.startTime-H),W=!1}return W}finally{m=null,x=F,j=!1}}var q=!1,N=null,f=-1,v=5,E=-1;function C(){return!(t.unstable_now()-E<v)}function P(){if(N!==null){var V=t.unstable_now();E=V;var H=!0;try{H=N(!0,V)}finally{H?k():(q=!1,N=null)}}else q=!1}var k;if(typeof w=="function")k=function(){w(P)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ce=te.port2;te.port1.onmessage=P,k=function(){ce.postMessage(null)}}else k=function(){S(P,0)};function de(V){N=V,q||(q=!0,k())}function O(V,H){f=S(function(){V(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){A||j||(A=!0,de(M))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(V){switch(x){case 1:case 2:case 3:var H=3;break;default:H=x}var F=x;x=H;try{return V()}finally{x=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,H){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var F=x;x=V;try{return H()}finally{x=F}},t.unstable_scheduleCallback=function(V,H,F){var R=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?R+F:R):F=R,V){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=F+U,V={id:h++,callback:H,priorityLevel:V,startTime:F,expirationTime:U,sortIndex:-1},F>R?(V.sortIndex=F,e(d,V),r(u)===null&&V===r(d)&&(D?(y(f),f=-1):D=!0,O(I,F-R))):(V.sortIndex=U,e(u,V),A||j||(A=!0,de(M))),V},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(V){var H=x;return function(){var F=x;x=H;try{return V.apply(this,arguments)}finally{x=F}}}})(sb);tb.exports=sb;var R_=tb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_=g,As=R_;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rb=new Set,$o={};function Fi(t,e){Ca(t,e),Ca(t+"Capture",e)}function Ca(t,e){for($o[t]=e,t=0;t<e.length;t++)rb.add(e[t])}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),um=Object.prototype.hasOwnProperty,L_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Og={},qg={};function M_(t){return um.call(qg,t)?!0:um.call(Og,t)?!1:L_.test(t)?qg[t]=!0:(Og[t]=!0,!1)}function V_(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F_(t,e,r,n){if(e===null||typeof e>"u"||V_(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function us(t,e,r,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new us(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new us(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new us(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new us(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new us(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new us(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new us(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new us(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new us(t,5,!1,t.toLowerCase(),null,!1,!1)});var zp=/[\-:]([a-z])/g;function Bp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zp,Bp);Gt[e]=new us(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zp,Bp);Gt[e]=new us(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zp,Bp);Gt[e]=new us(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new us(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new us("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new us(t,1,!1,t.toLowerCase(),null,!0,!0)});function $p(t,e,r,n){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F_(e,r,i,n)&&(r=null),n||i===null?M_(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var en=D_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hc=Symbol.for("react.element"),na=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),dm=Symbol.for("react.profiler"),nb=Symbol.for("react.provider"),ib=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),hm=Symbol.for("react.suspense"),mm=Symbol.for("react.suspense_list"),Hp=Symbol.for("react.memo"),hn=Symbol.for("react.lazy"),ab=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,ch;function yo(t){if(ch===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ch=e&&e[1]||""}return`
`+ch+t}var uh=!1;function dh(t,e){if(!t||uh)return"";uh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{uh=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?yo(t):""}function O_(t){switch(t.tag){case 5:return yo(t.type);case 16:return yo("Lazy");case 13:return yo("Suspense");case 19:return yo("SuspenseList");case 0:case 2:case 15:return t=dh(t.type,!1),t;case 11:return t=dh(t.type.render,!1),t;case 1:return t=dh(t.type,!0),t;default:return""}}function pm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case na:return"Portal";case dm:return"Profiler";case Gp:return"StrictMode";case hm:return"Suspense";case mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ib:return(t.displayName||"Context")+".Consumer";case nb:return(t._context.displayName||"Context")+".Provider";case Wp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hp:return e=t.displayName||null,e!==null?e:pm(t.type)||"Memo";case hn:e=t._payload,t=t._init;try{return pm(t(e))}catch{}}return null}function q_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pm(e);case 8:return e===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ob(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function U_(t){var e=ob(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function mc(t){t._valueTracker||(t._valueTracker=U_(t))}function lb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=ob(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fm(t,e){var r=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Mn(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cb(t,e){e=e.checked,e!=null&&$p(t,"checked",e,!1)}function xm(t,e){cb(t,e);var r=Mn(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gm(t,e.type,r):e.hasOwnProperty("defaultValue")&&gm(t,e.type,Mn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Bg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function gm(t,e,r){(e!=="number"||iu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var vo=Array.isArray;function ga(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Mn(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ym(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $g(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(se(92));if(vo(r)){if(1<r.length)throw Error(se(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Mn(r)}}function ub(t,e){var r=Mn(e.value),n=Mn(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Gg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function db(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?db(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pc,hb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pc=pc||document.createElement("div"),pc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},z_=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(t){z_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),So[e]=So[t]})});function mb(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||So.hasOwnProperty(t)&&So[t]?(""+e).trim():e+"px"}function pb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=mb(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var B_=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(B_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function wm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jm=null;function Qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nm=null,ya=null,va=null;function Wg(t){if(t=Al(t)){if(typeof Nm!="function")throw Error(se(280));var e=t.stateNode;e&&(e=nd(e),Nm(t.stateNode,t.type,e))}}function fb(t){ya?va?va.push(t):va=[t]:ya=t}function xb(){if(ya){var t=ya,e=va;if(va=ya=null,Wg(t),e)for(t=0;t<e.length;t++)Wg(e[t])}}function gb(t,e){return t(e)}function yb(){}var hh=!1;function vb(t,e,r){if(hh)return t(e,r);hh=!0;try{return gb(t,e,r)}finally{hh=!1,(ya!==null||va!==null)&&(yb(),xb())}}function Wo(t,e){var r=t.stateNode;if(r===null)return null;var n=nd(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(se(231,e,typeof r));return r}var _m=!1;if(Gr)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){_m=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{_m=!1}function $_(t,e,r,n,i,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Co=!1,au=null,ou=!1,Em=null,G_={onError:function(t){Co=!0,au=t}};function W_(t,e,r,n,i,a,o,l,u){Co=!1,au=null,$_.apply(G_,arguments)}function H_(t,e,r,n,i,a,o,l,u){if(W_.apply(this,arguments),Co){if(Co){var d=au;Co=!1,au=null}else throw Error(se(198));ou||(ou=!0,Em=d)}}function Oi(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function bb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hg(t){if(Oi(t)!==t)throw Error(se(188))}function Q_(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(se(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Hg(i),t;if(a===n)return Hg(i),e;a=a.sibling}throw Error(se(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o)throw Error(se(189))}}if(r.alternate!==n)throw Error(se(190))}if(r.tag!==3)throw Error(se(188));return r.stateNode.current===r?t:e}function wb(t){return t=Q_(t),t!==null?jb(t):null}function jb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=jb(t);if(e!==null)return e;t=t.sibling}return null}var Nb=As.unstable_scheduleCallback,Qg=As.unstable_cancelCallback,K_=As.unstable_shouldYield,Y_=As.unstable_requestPaint,vt=As.unstable_now,J_=As.unstable_getCurrentPriorityLevel,Kp=As.unstable_ImmediatePriority,_b=As.unstable_UserBlockingPriority,lu=As.unstable_NormalPriority,X_=As.unstable_LowPriority,Eb=As.unstable_IdlePriority,ed=null,yr=null;function Z_(t){if(yr&&typeof yr.onCommitFiberRoot=="function")try{yr.onCommitFiberRoot(ed,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:sE,eE=Math.log,tE=Math.LN2;function sE(t){return t>>>=0,t===0?32:31-(eE(t)/tE|0)|0}var fc=64,xc=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cu(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~i;l!==0?n=bo(l):(a&=o,a!==0&&(n=bo(a)))}else o=r&~i,o!==0?n=bo(o):a!==0&&(n=bo(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-er(e),i=1<<r,n|=t[r],e&=~i;return n}function rE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nE(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-er(a),l=1<<o,u=i[o];u===-1?(!(l&r)||l&n)&&(i[o]=rE(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function km(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kb(){var t=fc;return fc<<=1,!(fc&4194240)&&(fc=64),t}function mh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Sl(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=r}function iE(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-er(r),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~a}}function Yp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-er(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var Ge=0;function Sb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Cb,Jp,Ab,Tb,Ib,Sm=!1,gc=[],Nn=null,_n=null,En=null,Ho=new Map,Qo=new Map,pn=[],aE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kg(t,e){switch(t){case"focusin":case"focusout":Nn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(e.pointerId)}}function co(t,e,r,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Al(e),e!==null&&Jp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function oE(t,e,r,n,i){switch(e){case"focusin":return Nn=co(Nn,t,e,r,n,i),!0;case"dragenter":return _n=co(_n,t,e,r,n,i),!0;case"mouseover":return En=co(En,t,e,r,n,i),!0;case"pointerover":var a=i.pointerId;return Ho.set(a,co(Ho.get(a)||null,t,e,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Qo.set(a,co(Qo.get(a)||null,t,e,r,n,i)),!0}return!1}function Pb(t){var e=ci(t.target);if(e!==null){var r=Oi(e);if(r!==null){if(e=r.tag,e===13){if(e=bb(r),e!==null){t.blockedOn=e,Ib(t.priority,function(){Ab(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Cm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);jm=n,r.target.dispatchEvent(n),jm=null}else return e=Al(r),e!==null&&Jp(e),t.blockedOn=r,!1;e.shift()}return!0}function Yg(t,e,r){Vc(t)&&r.delete(e)}function lE(){Sm=!1,Nn!==null&&Vc(Nn)&&(Nn=null),_n!==null&&Vc(_n)&&(_n=null),En!==null&&Vc(En)&&(En=null),Ho.forEach(Yg),Qo.forEach(Yg)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,Sm||(Sm=!0,As.unstable_scheduleCallback(As.unstable_NormalPriority,lE)))}function Ko(t){function e(i){return uo(i,t)}if(0<gc.length){uo(gc[0],t);for(var r=1;r<gc.length;r++){var n=gc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Nn!==null&&uo(Nn,t),_n!==null&&uo(_n,t),En!==null&&uo(En,t),Ho.forEach(e),Qo.forEach(e),r=0;r<pn.length;r++)n=pn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<pn.length&&(r=pn[0],r.blockedOn===null);)Pb(r),r.blockedOn===null&&pn.shift()}var ba=en.ReactCurrentBatchConfig,uu=!0;function cE(t,e,r,n){var i=Ge,a=ba.transition;ba.transition=null;try{Ge=1,Xp(t,e,r,n)}finally{Ge=i,ba.transition=a}}function uE(t,e,r,n){var i=Ge,a=ba.transition;ba.transition=null;try{Ge=4,Xp(t,e,r,n)}finally{Ge=i,ba.transition=a}}function Xp(t,e,r,n){if(uu){var i=Cm(t,e,r,n);if(i===null)Nh(t,e,n,du,r),Kg(t,n);else if(oE(i,t,e,r,n))n.stopPropagation();else if(Kg(t,n),e&4&&-1<aE.indexOf(t)){for(;i!==null;){var a=Al(i);if(a!==null&&Cb(a),a=Cm(t,e,r,n),a===null&&Nh(t,e,n,du,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Nh(t,e,n,null,r)}}var du=null;function Cm(t,e,r,n){if(du=null,t=Qp(n),t=ci(t),t!==null)if(e=Oi(t),e===null)t=null;else if(r=e.tag,r===13){if(t=bb(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return du=t,null}function Rb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J_()){case Kp:return 1;case _b:return 4;case lu:case X_:return 16;case Eb:return 536870912;default:return 16}default:return 16}}var yn=null,Zp=null,Fc=null;function Db(){if(Fc)return Fc;var t,e=Zp,r=e.length,n,i="value"in yn?yn.value:yn.textContent,a=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[a-n];n++);return Fc=i.slice(t,1<n?1-n:void 0)}function Oc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yc(){return!0}function Jg(){return!1}function Ps(t){function e(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yc:Jg,this.isPropagationStopped=Jg,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),e}var za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ef=Ps(za),Cl=ht({},za,{view:0,detail:0}),dE=Ps(Cl),ph,fh,ho,td=ht({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(ph=t.screenX-ho.screenX,fh=t.screenY-ho.screenY):fh=ph=0,ho=t),ph)},movementY:function(t){return"movementY"in t?t.movementY:fh}}),Xg=Ps(td),hE=ht({},td,{dataTransfer:0}),mE=Ps(hE),pE=ht({},Cl,{relatedTarget:0}),xh=Ps(pE),fE=ht({},za,{animationName:0,elapsedTime:0,pseudoElement:0}),xE=Ps(fE),gE=ht({},za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yE=Ps(gE),vE=ht({},za,{data:0}),Zg=Ps(vE),bE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jE[t])?!!e[t]:!1}function tf(){return NE}var _E=ht({},Cl,{key:function(t){if(t.key){var e=bE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Oc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tf,charCode:function(t){return t.type==="keypress"?Oc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Oc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EE=Ps(_E),kE=ht({},td,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e0=Ps(kE),SE=ht({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tf}),CE=Ps(SE),AE=ht({},za,{propertyName:0,elapsedTime:0,pseudoElement:0}),TE=Ps(AE),IE=ht({},td,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PE=Ps(IE),RE=[9,13,27,32],sf=Gr&&"CompositionEvent"in window,Ao=null;Gr&&"documentMode"in document&&(Ao=document.documentMode);var DE=Gr&&"TextEvent"in window&&!Ao,Lb=Gr&&(!sf||Ao&&8<Ao&&11>=Ao),t0=" ",s0=!1;function Mb(t,e){switch(t){case"keyup":return RE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var aa=!1;function LE(t,e){switch(t){case"compositionend":return Vb(e);case"keypress":return e.which!==32?null:(s0=!0,t0);case"textInput":return t=e.data,t===t0&&s0?null:t;default:return null}}function ME(t,e){if(aa)return t==="compositionend"||!sf&&Mb(t,e)?(t=Db(),Fc=Zp=yn=null,aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lb&&e.locale!=="ko"?null:e.data;default:return null}}var VE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VE[t.type]:e==="textarea"}function Fb(t,e,r,n){fb(n),e=hu(e,"onChange"),0<e.length&&(r=new ef("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var To=null,Yo=null;function FE(t){Kb(t,0)}function sd(t){var e=ca(t);if(lb(e))return t}function OE(t,e){if(t==="change")return e}var Ob=!1;if(Gr){var gh;if(Gr){var yh="oninput"in document;if(!yh){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),yh=typeof n0.oninput=="function"}gh=yh}else gh=!1;Ob=gh&&(!document.documentMode||9<document.documentMode)}function i0(){To&&(To.detachEvent("onpropertychange",qb),Yo=To=null)}function qb(t){if(t.propertyName==="value"&&sd(Yo)){var e=[];Fb(e,Yo,t,Qp(t)),vb(FE,e)}}function qE(t,e,r){t==="focusin"?(i0(),To=e,Yo=r,To.attachEvent("onpropertychange",qb)):t==="focusout"&&i0()}function UE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sd(Yo)}function zE(t,e){if(t==="click")return sd(e)}function BE(t,e){if(t==="input"||t==="change")return sd(e)}function $E(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ir=typeof Object.is=="function"?Object.is:$E;function Jo(t,e){if(ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!um.call(e,i)||!ir(t[i],e[i]))return!1}return!0}function a0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o0(t,e){var r=a0(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=a0(r)}}function Ub(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ub(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zb(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=iu(t.document)}return e}function rf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GE(t){var e=zb(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Ub(r.ownerDocument.documentElement,r)){if(n!==null&&rf(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=o0(r,a);var o=o0(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WE=Gr&&"documentMode"in document&&11>=document.documentMode,oa=null,Am=null,Io=null,Tm=!1;function l0(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Tm||oa==null||oa!==iu(n)||(n=oa,"selectionStart"in n&&rf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Io&&Jo(Io,n)||(Io=n,n=hu(Am,"onSelect"),0<n.length&&(e=new ef("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=oa)))}function vc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var la={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},vh={},Bb={};Gr&&(Bb=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function rd(t){if(vh[t])return vh[t];if(!la[t])return t;var e=la[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Bb)return vh[t]=e[r];return t}var $b=rd("animationend"),Gb=rd("animationiteration"),Wb=rd("animationstart"),Hb=rd("transitionend"),Qb=new Map,c0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zn(t,e){Qb.set(t,e),Fi(e,[t])}for(var bh=0;bh<c0.length;bh++){var wh=c0[bh],HE=wh.toLowerCase(),QE=wh[0].toUpperCase()+wh.slice(1);zn(HE,"on"+QE)}zn($b,"onAnimationEnd");zn(Gb,"onAnimationIteration");zn(Wb,"onAnimationStart");zn("dblclick","onDoubleClick");zn("focusin","onFocus");zn("focusout","onBlur");zn(Hb,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function u0(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,H_(n,e,void 0,t),t.currentTarget=null}function Kb(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;u0(i,l,d),a=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;u0(i,l,d),a=u}}}if(ou)throw t=Em,ou=!1,Em=null,t}function st(t,e){var r=e[Lm];r===void 0&&(r=e[Lm]=new Set);var n=t+"__bubble";r.has(n)||(Yb(e,t,2,!1),r.add(n))}function jh(t,e,r){var n=0;e&&(n|=4),Yb(r,t,n,e)}var bc="_reactListening"+Math.random().toString(36).slice(2);function Xo(t){if(!t[bc]){t[bc]=!0,rb.forEach(function(r){r!=="selectionchange"&&(KE.has(r)||jh(r,!1,t),jh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bc]||(e[bc]=!0,jh("selectionchange",!1,e))}}function Yb(t,e,r,n){switch(Rb(e)){case 1:var i=cE;break;case 4:i=uE;break;default:i=Xp}r=i.bind(null,e,r,t),i=void 0,!_m||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Nh(t,e,r,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ci(l),o===null)return;if(u=o.tag,u===5||u===6){n=a=o;continue e}l=l.parentNode}}n=n.return}vb(function(){var d=a,h=Qp(r),m=[];e:{var x=Qb.get(t);if(x!==void 0){var j=ef,A=t;switch(t){case"keypress":if(Oc(r)===0)break e;case"keydown":case"keyup":j=EE;break;case"focusin":A="focus",j=xh;break;case"focusout":A="blur",j=xh;break;case"beforeblur":case"afterblur":j=xh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=mE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=CE;break;case $b:case Gb:case Wb:j=xE;break;case Hb:j=TE;break;case"scroll":j=dE;break;case"wheel":j=PE;break;case"copy":case"cut":case"paste":j=yE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=e0}var D=(e&4)!==0,S=!D&&t==="scroll",y=D?x!==null?x+"Capture":null:x;D=[];for(var w=d,_;w!==null;){_=w;var I=_.stateNode;if(_.tag===5&&I!==null&&(_=I,y!==null&&(I=Wo(w,y),I!=null&&D.push(Zo(w,I,_)))),S)break;w=w.return}0<D.length&&(x=new j(x,A,null,r,h),m.push({event:x,listeners:D}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",x&&r!==jm&&(A=r.relatedTarget||r.fromElement)&&(ci(A)||A[Wr]))break e;if((j||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,j?(A=r.relatedTarget||r.toElement,j=d,A=A?ci(A):null,A!==null&&(S=Oi(A),A!==S||A.tag!==5&&A.tag!==6)&&(A=null)):(j=null,A=d),j!==A)){if(D=Xg,I="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(D=e0,I="onPointerLeave",y="onPointerEnter",w="pointer"),S=j==null?x:ca(j),_=A==null?x:ca(A),x=new D(I,w+"leave",j,r,h),x.target=S,x.relatedTarget=_,I=null,ci(h)===d&&(D=new D(y,w+"enter",A,r,h),D.target=_,D.relatedTarget=S,I=D),S=I,j&&A)t:{for(D=j,y=A,w=0,_=D;_;_=ea(_))w++;for(_=0,I=y;I;I=ea(I))_++;for(;0<w-_;)D=ea(D),w--;for(;0<_-w;)y=ea(y),_--;for(;w--;){if(D===y||y!==null&&D===y.alternate)break t;D=ea(D),y=ea(y)}D=null}else D=null;j!==null&&d0(m,x,j,D,!1),A!==null&&S!==null&&d0(m,S,A,D,!0)}}e:{if(x=d?ca(d):window,j=x.nodeName&&x.nodeName.toLowerCase(),j==="select"||j==="input"&&x.type==="file")var M=OE;else if(r0(x))if(Ob)M=BE;else{M=UE;var q=qE}else(j=x.nodeName)&&j.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(M=zE);if(M&&(M=M(t,d))){Fb(m,M,r,h);break e}q&&q(t,x,d),t==="focusout"&&(q=x._wrapperState)&&q.controlled&&x.type==="number"&&gm(x,"number",x.value)}switch(q=d?ca(d):window,t){case"focusin":(r0(q)||q.contentEditable==="true")&&(oa=q,Am=d,Io=null);break;case"focusout":Io=Am=oa=null;break;case"mousedown":Tm=!0;break;case"contextmenu":case"mouseup":case"dragend":Tm=!1,l0(m,r,h);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":l0(m,r,h)}var N;if(sf)e:{switch(t){case"compositionstart":var f="onCompositionStart";break e;case"compositionend":f="onCompositionEnd";break e;case"compositionupdate":f="onCompositionUpdate";break e}f=void 0}else aa?Mb(t,r)&&(f="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(f="onCompositionStart");f&&(Lb&&r.locale!=="ko"&&(aa||f!=="onCompositionStart"?f==="onCompositionEnd"&&aa&&(N=Db()):(yn=h,Zp="value"in yn?yn.value:yn.textContent,aa=!0)),q=hu(d,f),0<q.length&&(f=new Zg(f,t,null,r,h),m.push({event:f,listeners:q}),N?f.data=N:(N=Vb(r),N!==null&&(f.data=N)))),(N=DE?LE(t,r):ME(t,r))&&(d=hu(d,"onBeforeInput"),0<d.length&&(h=new Zg("onBeforeInput","beforeinput",null,r,h),m.push({event:h,listeners:d}),h.data=N))}Kb(m,e)})}function Zo(t,e,r){return{instance:t,listener:e,currentTarget:r}}function hu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wo(t,r),a!=null&&n.unshift(Zo(t,a,i)),a=Wo(t,e),a!=null&&n.push(Zo(t,a,i))),t=t.return}return n}function ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d0(t,e,r,n,i){for(var a=e._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,i?(u=Wo(r,a),u!=null&&o.unshift(Zo(r,u,l))):i||(u=Wo(r,a),u!=null&&o.push(Zo(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var YE=/\r\n?/g,JE=/\u0000|\uFFFD/g;function h0(t){return(typeof t=="string"?t:""+t).replace(YE,`
`).replace(JE,"")}function wc(t,e,r){if(e=h0(e),h0(t)!==e&&r)throw Error(se(425))}function mu(){}var Im=null,Pm=null;function Rm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,XE=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(t){return m0.resolve(null).then(t).catch(ek)}:Dm;function ek(t){setTimeout(function(){throw t})}function _h(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ko(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ko(e)}function kn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),gr="__reactFiber$"+Ba,el="__reactProps$"+Ba,Wr="__reactContainer$"+Ba,Lm="__reactEvents$"+Ba,tk="__reactListeners$"+Ba,sk="__reactHandles$"+Ba;function ci(t){var e=t[gr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Wr]||r[gr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=p0(t);t!==null;){if(r=t[gr])return r;t=p0(t)}return e}t=r,r=t.parentNode}return null}function Al(t){return t=t[gr]||t[Wr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ca(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function nd(t){return t[el]||null}var Mm=[],ua=-1;function Bn(t){return{current:t}}function nt(t){0>ua||(t.current=Mm[ua],Mm[ua]=null,ua--)}function Ze(t,e){ua++,Mm[ua]=t.current,t.current=e}var Vn={},ss=Bn(Vn),gs=Bn(!1),wi=Vn;function Aa(t,e){var r=t.type.contextTypes;if(!r)return Vn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ys(t){return t=t.childContextTypes,t!=null}function pu(){nt(gs),nt(ss)}function f0(t,e,r){if(ss.current!==Vn)throw Error(se(168));Ze(ss,e),Ze(gs,r)}function Jb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(se(108,q_(t)||"Unknown",i));return ht({},r,n)}function fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vn,wi=ss.current,Ze(ss,t),Ze(gs,gs.current),!0}function x0(t,e,r){var n=t.stateNode;if(!n)throw Error(se(169));r?(t=Jb(t,e,wi),n.__reactInternalMemoizedMergedChildContext=t,nt(gs),nt(ss),Ze(ss,t)):nt(gs),Ze(gs,r)}var Ir=null,id=!1,Eh=!1;function Xb(t){Ir===null?Ir=[t]:Ir.push(t)}function rk(t){id=!0,Xb(t)}function $n(){if(!Eh&&Ir!==null){Eh=!0;var t=0,e=Ge;try{var r=Ir;for(Ge=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Ir=null,id=!1}catch(i){throw Ir!==null&&(Ir=Ir.slice(t+1)),Nb(Kp,$n),i}finally{Ge=e,Eh=!1}}return null}var da=[],ha=0,xu=null,gu=0,Ls=[],Ms=0,ji=null,Dr=1,Lr="";function ii(t,e){da[ha++]=gu,da[ha++]=xu,xu=t,gu=e}function Zb(t,e,r){Ls[Ms++]=Dr,Ls[Ms++]=Lr,Ls[Ms++]=ji,ji=t;var n=Dr;t=Lr;var i=32-er(n)-1;n&=~(1<<i),r+=1;var a=32-er(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Dr=1<<32-er(e)+i|r<<i|n,Lr=a+t}else Dr=1<<a|r<<i|n,Lr=t}function nf(t){t.return!==null&&(ii(t,1),Zb(t,1,0))}function af(t){for(;t===xu;)xu=da[--ha],da[ha]=null,gu=da[--ha],da[ha]=null;for(;t===ji;)ji=Ls[--Ms],Ls[Ms]=null,Lr=Ls[--Ms],Ls[Ms]=null,Dr=Ls[--Ms],Ls[Ms]=null}var Ss=null,Es=null,ot=!1,Ys=null;function ew(t,e){var r=Vs(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function g0(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ss=t,Es=kn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ss=t,Es=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ji!==null?{id:Dr,overflow:Lr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Vs(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Ss=t,Es=null,!0):!1;default:return!1}}function Vm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fm(t){if(ot){var e=Es;if(e){var r=e;if(!g0(t,e)){if(Vm(t))throw Error(se(418));e=kn(r.nextSibling);var n=Ss;e&&g0(t,e)?ew(n,r):(t.flags=t.flags&-4097|2,ot=!1,Ss=t)}}else{if(Vm(t))throw Error(se(418));t.flags=t.flags&-4097|2,ot=!1,Ss=t}}}function y0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ss=t}function jc(t){if(t!==Ss)return!1;if(!ot)return y0(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rm(t.type,t.memoizedProps)),e&&(e=Es)){if(Vm(t))throw tw(),Error(se(418));for(;e;)ew(t,e),e=kn(e.nextSibling)}if(y0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Es=kn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Es=null}}else Es=Ss?kn(t.stateNode.nextSibling):null;return!0}function tw(){for(var t=Es;t;)t=kn(t.nextSibling)}function Ta(){Es=Ss=null,ot=!1}function of(t){Ys===null?Ys=[t]:Ys.push(t)}var nk=en.ReactCurrentBatchConfig;function mo(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(se(309));var n=r.stateNode}if(!n)throw Error(se(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(se(284));if(!r._owner)throw Error(se(290,t))}return t}function Nc(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function v0(t){var e=t._init;return e(t._payload)}function sw(t){function e(y,w){if(t){var _=y.deletions;_===null?(y.deletions=[w],y.flags|=16):_.push(w)}}function r(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=Tn(y,w),y.index=0,y.sibling=null,y}function a(y,w,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<w?(y.flags|=2,w):_):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,w,_,I){return w===null||w.tag!==6?(w=Ph(_,y.mode,I),w.return=y,w):(w=i(w,_),w.return=y,w)}function u(y,w,_,I){var M=_.type;return M===ia?h(y,w,_.props.children,I,_.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===hn&&v0(M)===w.type)?(I=i(w,_.props),I.ref=mo(y,w,_),I.return=y,I):(I=Wc(_.type,_.key,_.props,null,y.mode,I),I.ref=mo(y,w,_),I.return=y,I)}function d(y,w,_,I){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Rh(_,y.mode,I),w.return=y,w):(w=i(w,_.children||[]),w.return=y,w)}function h(y,w,_,I,M){return w===null||w.tag!==7?(w=xi(_,y.mode,I,M),w.return=y,w):(w=i(w,_),w.return=y,w)}function m(y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ph(""+w,y.mode,_),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hc:return _=Wc(w.type,w.key,w.props,null,y.mode,_),_.ref=mo(y,null,w),_.return=y,_;case na:return w=Rh(w,y.mode,_),w.return=y,w;case hn:var I=w._init;return m(y,I(w._payload),_)}if(vo(w)||oo(w))return w=xi(w,y.mode,_,null),w.return=y,w;Nc(y,w)}return null}function x(y,w,_,I){var M=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return M!==null?null:l(y,w,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hc:return _.key===M?u(y,w,_,I):null;case na:return _.key===M?d(y,w,_,I):null;case hn:return M=_._init,x(y,w,M(_._payload),I)}if(vo(_)||oo(_))return M!==null?null:h(y,w,_,I,null);Nc(y,_)}return null}function j(y,w,_,I,M){if(typeof I=="string"&&I!==""||typeof I=="number")return y=y.get(_)||null,l(w,y,""+I,M);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case hc:return y=y.get(I.key===null?_:I.key)||null,u(w,y,I,M);case na:return y=y.get(I.key===null?_:I.key)||null,d(w,y,I,M);case hn:var q=I._init;return j(y,w,_,q(I._payload),M)}if(vo(I)||oo(I))return y=y.get(_)||null,h(w,y,I,M,null);Nc(w,I)}return null}function A(y,w,_,I){for(var M=null,q=null,N=w,f=w=0,v=null;N!==null&&f<_.length;f++){N.index>f?(v=N,N=null):v=N.sibling;var E=x(y,N,_[f],I);if(E===null){N===null&&(N=v);break}t&&N&&E.alternate===null&&e(y,N),w=a(E,w,f),q===null?M=E:q.sibling=E,q=E,N=v}if(f===_.length)return r(y,N),ot&&ii(y,f),M;if(N===null){for(;f<_.length;f++)N=m(y,_[f],I),N!==null&&(w=a(N,w,f),q===null?M=N:q.sibling=N,q=N);return ot&&ii(y,f),M}for(N=n(y,N);f<_.length;f++)v=j(N,y,f,_[f],I),v!==null&&(t&&v.alternate!==null&&N.delete(v.key===null?f:v.key),w=a(v,w,f),q===null?M=v:q.sibling=v,q=v);return t&&N.forEach(function(C){return e(y,C)}),ot&&ii(y,f),M}function D(y,w,_,I){var M=oo(_);if(typeof M!="function")throw Error(se(150));if(_=M.call(_),_==null)throw Error(se(151));for(var q=M=null,N=w,f=w=0,v=null,E=_.next();N!==null&&!E.done;f++,E=_.next()){N.index>f?(v=N,N=null):v=N.sibling;var C=x(y,N,E.value,I);if(C===null){N===null&&(N=v);break}t&&N&&C.alternate===null&&e(y,N),w=a(C,w,f),q===null?M=C:q.sibling=C,q=C,N=v}if(E.done)return r(y,N),ot&&ii(y,f),M;if(N===null){for(;!E.done;f++,E=_.next())E=m(y,E.value,I),E!==null&&(w=a(E,w,f),q===null?M=E:q.sibling=E,q=E);return ot&&ii(y,f),M}for(N=n(y,N);!E.done;f++,E=_.next())E=j(N,y,f,E.value,I),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?f:E.key),w=a(E,w,f),q===null?M=E:q.sibling=E,q=E);return t&&N.forEach(function(P){return e(y,P)}),ot&&ii(y,f),M}function S(y,w,_,I){if(typeof _=="object"&&_!==null&&_.type===ia&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case hc:e:{for(var M=_.key,q=w;q!==null;){if(q.key===M){if(M=_.type,M===ia){if(q.tag===7){r(y,q.sibling),w=i(q,_.props.children),w.return=y,y=w;break e}}else if(q.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===hn&&v0(M)===q.type){r(y,q.sibling),w=i(q,_.props),w.ref=mo(y,q,_),w.return=y,y=w;break e}r(y,q);break}else e(y,q);q=q.sibling}_.type===ia?(w=xi(_.props.children,y.mode,I,_.key),w.return=y,y=w):(I=Wc(_.type,_.key,_.props,null,y.mode,I),I.ref=mo(y,w,_),I.return=y,y=I)}return o(y);case na:e:{for(q=_.key;w!==null;){if(w.key===q)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){r(y,w.sibling),w=i(w,_.children||[]),w.return=y,y=w;break e}else{r(y,w);break}else e(y,w);w=w.sibling}w=Rh(_,y.mode,I),w.return=y,y=w}return o(y);case hn:return q=_._init,S(y,w,q(_._payload),I)}if(vo(_))return A(y,w,_,I);if(oo(_))return D(y,w,_,I);Nc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(r(y,w.sibling),w=i(w,_),w.return=y,y=w):(r(y,w),w=Ph(_,y.mode,I),w.return=y,y=w),o(y)):r(y,w)}return S}var Ia=sw(!0),rw=sw(!1),yu=Bn(null),vu=null,ma=null,lf=null;function cf(){lf=ma=vu=null}function uf(t){var e=yu.current;nt(yu),t._currentValue=e}function Om(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function wa(t,e){vu=t,lf=ma=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fs=!0),t.firstContext=null)}function zs(t){var e=t._currentValue;if(lf!==t)if(t={context:t,memoizedValue:e,next:null},ma===null){if(vu===null)throw Error(se(308));ma=t,vu.dependencies={lanes:0,firstContext:t}}else ma=ma.next=t;return e}var ui=null;function df(t){ui===null?ui=[t]:ui.push(t)}function nw(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,df(e)):(r.next=i.next,i.next=r),e.interleaved=r,Hr(t,n)}function Hr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var mn=!1;function hf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function iw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Or(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Sn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Me&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Hr(t,r)}return i=n.interleaved,i===null?(e.next=e,df(n)):(e.next=i.next,i.next=e),n.interleaved=e,Hr(t,r)}function qc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yp(t,r)}}function b0(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=e:a=a.next=e}else i=a=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function bu(t,e,r,n){var i=t.updateQueue;mn=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=i.baseState;o=0,h=d=u=null,l=a;do{var x=l.lane,j=l.eventTime;if((n&x)===x){h!==null&&(h=h.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var A=t,D=l;switch(x=e,j=r,D.tag){case 1:if(A=D.payload,typeof A=="function"){m=A.call(j,m,x);break e}m=A;break e;case 3:A.flags=A.flags&-65537|128;case 0:if(A=D.payload,x=typeof A=="function"?A.call(j,m,x):A,x==null)break e;m=ht({},m,x);break e;case 2:mn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=i.effects,x===null?i.effects=[l]:x.push(l))}else j={eventTime:j,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=j,u=m):h=h.next=j,o|=x;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;x=l,l=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);_i|=o,t.lanes=o,t.memoizedState=m}}function w0(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(se(191,i));i.call(n)}}}var Tl={},vr=Bn(Tl),tl=Bn(Tl),sl=Bn(Tl);function di(t){if(t===Tl)throw Error(se(174));return t}function mf(t,e){switch(Ze(sl,e),Ze(tl,t),Ze(vr,Tl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:vm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=vm(e,t)}nt(vr),Ze(vr,e)}function Pa(){nt(vr),nt(tl),nt(sl)}function aw(t){di(sl.current);var e=di(vr.current),r=vm(e,t.type);e!==r&&(Ze(tl,t),Ze(vr,r))}function pf(t){tl.current===t&&(nt(vr),nt(tl))}var ct=Bn(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kh=[];function ff(){for(var t=0;t<kh.length;t++)kh[t]._workInProgressVersionPrimary=null;kh.length=0}var Uc=en.ReactCurrentDispatcher,Sh=en.ReactCurrentBatchConfig,Ni=0,dt=null,Et=null,It=null,ju=!1,Po=!1,rl=0,ik=0;function Qt(){throw Error(se(321))}function xf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!ir(t[r],e[r]))return!1;return!0}function gf(t,e,r,n,i,a){if(Ni=a,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uc.current=t===null||t.memoizedState===null?ck:uk,t=r(n,i),Po){a=0;do{if(Po=!1,rl=0,25<=a)throw Error(se(301));a+=1,It=Et=null,e.updateQueue=null,Uc.current=dk,t=r(n,i)}while(Po)}if(Uc.current=Nu,e=Et!==null&&Et.next!==null,Ni=0,It=Et=dt=null,ju=!1,e)throw Error(se(300));return t}function yf(){var t=rl!==0;return rl=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?dt.memoizedState=It=t:It=It.next=t,It}function Bs(){if(Et===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=It===null?dt.memoizedState:It.next;if(e!==null)It=e,Et=t;else{if(t===null)throw Error(se(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},It===null?dt.memoizedState=It=t:It=It.next=t}return It}function nl(t,e){return typeof e=="function"?e(t):e}function Ch(t){var e=Bs(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=Et,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((Ni&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=n):u=u.next=m,dt.lanes|=h,_i|=h}d=d.next}while(d!==null&&d!==a);u===null?o=n:u.next=l,ir(n,e.memoizedState)||(fs=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do a=i.lane,dt.lanes|=a,_i|=a,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Ah(t){var e=Bs(),r=e.queue;if(r===null)throw Error(se(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,a=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);ir(a,e.memoizedState)||(fs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,n]}function ow(){}function lw(t,e){var r=dt,n=Bs(),i=e(),a=!ir(n.memoizedState,i);if(a&&(n.memoizedState=i,fs=!0),n=n.queue,vf(dw.bind(null,r,n,t),[t]),n.getSnapshot!==e||a||It!==null&&It.memoizedState.tag&1){if(r.flags|=2048,il(9,uw.bind(null,r,n,i,e),void 0,null),Lt===null)throw Error(se(349));Ni&30||cw(r,e,i)}return i}function cw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function uw(t,e,r,n){e.value=r,e.getSnapshot=n,hw(e)&&mw(t)}function dw(t,e,r){return r(function(){hw(e)&&mw(t)})}function hw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ir(t,r)}catch{return!0}}function mw(t){var e=Hr(t,1);e!==null&&tr(e,t,1,-1)}function j0(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:t},e.queue=t,t=t.dispatch=lk.bind(null,dt,t),[e.memoizedState,t]}function il(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function pw(){return Bs().memoizedState}function zc(t,e,r,n){var i=xr();dt.flags|=t,i.memoizedState=il(1|e,r,void 0,n===void 0?null:n)}function ad(t,e,r,n){var i=Bs();n=n===void 0?null:n;var a=void 0;if(Et!==null){var o=Et.memoizedState;if(a=o.destroy,n!==null&&xf(n,o.deps)){i.memoizedState=il(e,r,a,n);return}}dt.flags|=t,i.memoizedState=il(1|e,r,a,n)}function N0(t,e){return zc(8390656,8,t,e)}function vf(t,e){return ad(2048,8,t,e)}function fw(t,e){return ad(4,2,t,e)}function xw(t,e){return ad(4,4,t,e)}function gw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yw(t,e,r){return r=r!=null?r.concat([t]):null,ad(4,4,gw.bind(null,e,t),r)}function bf(){}function vw(t,e){var r=Bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xf(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function bw(t,e){var r=Bs();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&xf(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function ww(t,e,r){return Ni&21?(ir(r,e)||(r=kb(),dt.lanes|=r,_i|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fs=!0),t.memoizedState=r)}function ak(t,e){var r=Ge;Ge=r!==0&&4>r?r:4,t(!0);var n=Sh.transition;Sh.transition={};try{t(!1),e()}finally{Ge=r,Sh.transition=n}}function jw(){return Bs().memoizedState}function ok(t,e,r){var n=An(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Nw(t))_w(e,r);else if(r=nw(t,e,r,n),r!==null){var i=os();tr(r,t,n,i),Ew(r,e,n)}}function lk(t,e,r){var n=An(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nw(t))_w(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(i.hasEagerState=!0,i.eagerState=l,ir(l,o)){var u=e.interleaved;u===null?(i.next=i,df(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}r=nw(t,e,i,n),r!==null&&(i=os(),tr(r,t,n,i),Ew(r,e,n))}}function Nw(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function _w(t,e){Po=ju=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Ew(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Yp(t,r)}}var Nu={readContext:zs,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},ck={readContext:zs,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:zs,useEffect:N0,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,zc(4194308,4,gw.bind(null,e,t),r)},useLayoutEffect:function(t,e){return zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return zc(4,2,t,e)},useMemo:function(t,e){var r=xr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=xr();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ok.bind(null,dt,t),[n.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:j0,useDebugValue:bf,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=j0(!1),e=t[0];return t=ak.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=dt,i=xr();if(ot){if(r===void 0)throw Error(se(407));r=r()}else{if(r=e(),Lt===null)throw Error(se(349));Ni&30||cw(n,e,r)}i.memoizedState=r;var a={value:r,getSnapshot:e};return i.queue=a,N0(dw.bind(null,n,a,t),[t]),n.flags|=2048,il(9,uw.bind(null,n,a,r,e),void 0,null),r},useId:function(){var t=xr(),e=Lt.identifierPrefix;if(ot){var r=Lr,n=Dr;r=(n&~(1<<32-er(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=rl++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=ik++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uk={readContext:zs,useCallback:vw,useContext:zs,useEffect:vf,useImperativeHandle:yw,useInsertionEffect:fw,useLayoutEffect:xw,useMemo:bw,useReducer:Ch,useRef:pw,useState:function(){return Ch(nl)},useDebugValue:bf,useDeferredValue:function(t){var e=Bs();return ww(e,Et.memoizedState,t)},useTransition:function(){var t=Ch(nl)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:lw,useId:jw,unstable_isNewReconciler:!1},dk={readContext:zs,useCallback:vw,useContext:zs,useEffect:vf,useImperativeHandle:yw,useInsertionEffect:fw,useLayoutEffect:xw,useMemo:bw,useReducer:Ah,useRef:pw,useState:function(){return Ah(nl)},useDebugValue:bf,useDeferredValue:function(t){var e=Bs();return Et===null?e.memoizedState=t:ww(e,Et.memoizedState,t)},useTransition:function(){var t=Ah(nl)[0],e=Bs().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:lw,useId:jw,unstable_isNewReconciler:!1};function Qs(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function qm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ht({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var od={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=os(),i=An(t),a=Or(n,i);a.payload=e,r!=null&&(a.callback=r),e=Sn(t,a,i),e!==null&&(tr(e,t,i,n),qc(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=os(),i=An(t),a=Or(n,i);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Sn(t,a,i),e!==null&&(tr(e,t,i,n),qc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=os(),n=An(t),i=Or(r,n);i.tag=2,e!=null&&(i.callback=e),e=Sn(t,i,n),e!==null&&(tr(e,t,n,r),qc(e,t,n))}};function _0(t,e,r,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Jo(r,n)||!Jo(i,a):!0}function kw(t,e,r){var n=!1,i=Vn,a=e.contextType;return typeof a=="object"&&a!==null?a=zs(a):(i=ys(e)?wi:ss.current,n=e.contextTypes,a=(n=n!=null)?Aa(t,i):Vn),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=od,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function E0(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&od.enqueueReplaceState(e,e.state,null)}function Um(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},hf(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=zs(a):(a=ys(e)?wi:ss.current,i.context=Aa(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(qm(t,e,a,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&od.enqueueReplaceState(i,i.state,null),bu(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var r="",n=e;do r+=O_(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Th(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function zm(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var hk=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,r){r=Or(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Eu||(Eu=!0,Xm=n),zm(t,e)},r}function Cw(t,e,r){r=Or(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){zm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){zm(t,e),typeof n!="function"&&(Cn===null?Cn=new Set([this]):Cn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function k0(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new hk;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=kk.bind(null,t,e,r),e.then(t,t))}function S0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function C0(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Or(-1,1),e.tag=2,Sn(r,e,1))),r.lanes|=1),t)}var mk=en.ReactCurrentOwner,fs=!1;function ns(t,e,r,n){e.child=t===null?rw(e,null,r,n):Ia(e,t.child,r,n)}function A0(t,e,r,n,i){r=r.render;var a=e.ref;return wa(e,i),n=gf(t,e,r,n,a,i),r=yf(),t!==null&&!fs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(ot&&r&&nf(e),e.flags|=1,ns(t,e,n,i),e.child)}function T0(t,e,r,n,i){if(t===null){var a=r.type;return typeof a=="function"&&!Cf(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,Aw(t,e,a,n,i)):(t=Wc(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:Jo,r(o,n)&&t.ref===e.ref)return Qr(t,e,i)}return e.flags|=1,t=Tn(a,n),t.ref=e.ref,t.return=e,e.child=t}function Aw(t,e,r,n,i){if(t!==null){var a=t.memoizedProps;if(Jo(a,n)&&t.ref===e.ref)if(fs=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(fs=!0);else return e.lanes=t.lanes,Qr(t,e,i)}return Bm(t,e,r,n,i)}function Tw(t,e,r){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ze(fa,_s),_s|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ze(fa,_s),_s|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ze(fa,_s),_s|=n}else a!==null?(n=a.baseLanes|r,e.memoizedState=null):n=r,Ze(fa,_s),_s|=n;return ns(t,e,i,r),e.child}function Iw(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Bm(t,e,r,n,i){var a=ys(r)?wi:ss.current;return a=Aa(e,a),wa(e,i),r=gf(t,e,r,n,a,i),n=yf(),t!==null&&!fs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Qr(t,e,i)):(ot&&n&&nf(e),e.flags|=1,ns(t,e,r,i),e.child)}function I0(t,e,r,n,i){if(ys(r)){var a=!0;fu(e)}else a=!1;if(wa(e,i),e.stateNode===null)Bc(t,e),kw(e,r,n),Um(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=zs(d):(d=ys(r)?wi:ss.current,d=Aa(e,d));var h=r.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==d)&&E0(e,o,n,d),mn=!1;var x=e.memoizedState;o.state=x,bu(e,n,o,i),u=e.memoizedState,l!==n||x!==u||gs.current||mn?(typeof h=="function"&&(qm(e,r,h,n),u=e.memoizedState),(l=mn||_0(e,r,l,n,x,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,iw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Qs(e.type,l),o.props=d,m=e.pendingProps,x=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=zs(u):(u=ys(r)?wi:ss.current,u=Aa(e,u));var j=r.getDerivedStateFromProps;(h=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||x!==u)&&E0(e,o,n,u),mn=!1,x=e.memoizedState,o.state=x,bu(e,n,o,i);var A=e.memoizedState;l!==m||x!==A||gs.current||mn?(typeof j=="function"&&(qm(e,r,j,n),A=e.memoizedState),(d=mn||_0(e,r,d,n,x,A,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,A,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,A,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=A),o.props=n,o.state=A,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),n=!1)}return $m(t,e,r,n,a,i)}function $m(t,e,r,n,i,a){Iw(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&x0(e,r,!1),Qr(t,e,a);n=e.stateNode,mk.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,a),e.child=Ia(e,null,l,a)):ns(t,e,l,a),e.memoizedState=n.state,i&&x0(e,r,!0),e.child}function Pw(t){var e=t.stateNode;e.pendingContext?f0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f0(t,e.context,!1),mf(t,e.containerInfo)}function P0(t,e,r,n,i){return Ta(),of(i),e.flags|=256,ns(t,e,r,n),e.child}var Gm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rw(t,e,r){var n=e.pendingProps,i=ct.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ze(ct,i&1),t===null)return Fm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ud(o,n,0,null),t=xi(t,n,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Wm(r),e.memoizedState=Gm,t):wf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pk(t,e,o,n,l,i,r);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Tn(i,u),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Tn(l,a):(a=xi(a,o,r,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Wm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Gm,n}return a=t.child,t=a.sibling,n=Tn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function wf(t,e){return e=ud({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _c(t,e,r,n){return n!==null&&of(n),Ia(e,t.child,null,r),t=wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pk(t,e,r,n,i,a,o){if(r)return e.flags&256?(e.flags&=-257,n=Th(Error(se(422))),_c(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=ud({mode:"visible",children:n.children},i,0,null),a=xi(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=Wm(o),e.memoizedState=Gm,a);if(!(e.mode&1))return _c(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(se(419)),n=Th(a,n,void 0),_c(t,e,o,n)}if(l=(o&t.childLanes)!==0,fs||l){if(n=Lt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Hr(t,i),tr(n,t,i,-1))}return Sf(),n=Th(Error(se(421))),_c(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sk.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Es=kn(i.nextSibling),Ss=e,ot=!0,Ys=null,t!==null&&(Ls[Ms++]=Dr,Ls[Ms++]=Lr,Ls[Ms++]=ji,Dr=t.id,Lr=t.overflow,ji=e),e=wf(e,n.children),e.flags|=4096,e)}function R0(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Om(t.return,e,r)}function Ih(t,e,r,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Dw(t,e,r){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(ns(t,e,n.children,r),n=ct.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0(t,r,e);else if(t.tag===19)R0(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ze(ct,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&wu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Ih(e,!1,i,r,a);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Ih(e,!0,r,null,a);break;case"together":Ih(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),_i|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,r=Tn(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Tn(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function fk(t,e,r){switch(e.tag){case 3:Pw(e),Ta();break;case 5:aw(e);break;case 1:ys(e.type)&&fu(e);break;case 4:mf(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ze(yu,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ze(ct,ct.current&1),e.flags|=128,null):r&e.child.childLanes?Rw(t,e,r):(Ze(ct,ct.current&1),t=Qr(t,e,r),t!==null?t.sibling:null);Ze(ct,ct.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Dw(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ze(ct,ct.current),n)break;return null;case 22:case 23:return e.lanes=0,Tw(t,e,r)}return Qr(t,e,r)}var Lw,Hm,Mw,Vw;Lw=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Hm=function(){};Mw=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,di(vr.current);var a=null;switch(r){case"input":i=fm(t,i),n=fm(t,n),a=[];break;case"select":i=ht({},i,{value:void 0}),n=ht({},n,{value:void 0}),a=[];break;case"textarea":i=ym(t,i),n=ym(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=mu)}bm(r,n);var o;r=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var u=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($o.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&st("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Vw=function(t,e,r,n){r!==n&&(e.flags|=4)};function po(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function xk(t,e,r){var n=e.pendingProps;switch(af(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return ys(e.type)&&pu(),Kt(e),null;case 3:return n=e.stateNode,Pa(),nt(gs),nt(ss),ff(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ys!==null&&(tp(Ys),Ys=null))),Hm(t,e),Kt(e),null;case 5:pf(e);var i=di(sl.current);if(r=e.type,t!==null&&e.stateNode!=null)Mw(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return Kt(e),null}if(t=di(vr.current),jc(e)){n=e.stateNode,r=e.type;var a=e.memoizedProps;switch(n[gr]=e,n[el]=a,t=(e.mode&1)!==0,r){case"dialog":st("cancel",n),st("close",n);break;case"iframe":case"object":case"embed":st("load",n);break;case"video":case"audio":for(i=0;i<wo.length;i++)st(wo[i],n);break;case"source":st("error",n);break;case"img":case"image":case"link":st("error",n),st("load",n);break;case"details":st("toggle",n);break;case"input":zg(n,a),st("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},st("invalid",n);break;case"textarea":$g(n,a),st("invalid",n)}bm(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&wc(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&wc(n.textContent,l,t),i=["children",""+l]):$o.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&st("scroll",n)}switch(r){case"input":mc(n),Bg(n,a,!0);break;case"textarea":mc(n),Gg(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=mu)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=db(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[gr]=e,t[el]=n,Lw(t,e,!1,!1),e.stateNode=t;e:{switch(o=wm(r,n),r){case"dialog":st("cancel",t),st("close",t),i=n;break;case"iframe":case"object":case"embed":st("load",t),i=n;break;case"video":case"audio":for(i=0;i<wo.length;i++)st(wo[i],t);i=n;break;case"source":st("error",t),i=n;break;case"img":case"image":case"link":st("error",t),st("load",t),i=n;break;case"details":st("toggle",t),i=n;break;case"input":zg(t,n),i=fm(t,n),st("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ht({},n,{value:void 0}),st("invalid",t);break;case"textarea":$g(t,n),i=ym(t,n),st("invalid",t);break;default:i=n}bm(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?pb(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&hb(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Go(t,u):typeof u=="number"&&Go(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($o.hasOwnProperty(a)?u!=null&&a==="onScroll"&&st("scroll",t):u!=null&&$p(t,a,u,o))}switch(r){case"input":mc(t),Bg(t,n,!1);break;case"textarea":mc(t),Gg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Mn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?ga(t,!!n.multiple,a,!1):n.defaultValue!=null&&ga(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=mu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)Vw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(r=di(sl.current),di(vr.current),jc(e)){if(n=e.stateNode,r=e.memoizedProps,n[gr]=e,(a=n.nodeValue!==r)&&(t=Ss,t!==null))switch(t.tag){case 3:wc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wc(n.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[gr]=e,e.stateNode=n}return Kt(e),null;case 13:if(nt(ct),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Es!==null&&e.mode&1&&!(e.flags&128))tw(),Ta(),e.flags|=98560,a=!1;else if(a=jc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(se(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(se(317));a[gr]=e}else Ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),a=!1}else Ys!==null&&(tp(Ys),Ys=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?kt===0&&(kt=3):Sf())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return Pa(),Hm(t,e),t===null&&Xo(e.stateNode.containerInfo),Kt(e),null;case 10:return uf(e.type._context),Kt(e),null;case 17:return ys(e.type)&&pu(),Kt(e),null;case 19:if(nt(ct),a=e.memoizedState,a===null)return Kt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)po(a,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wu(t),o!==null){for(e.flags|=128,po(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)a=r,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ze(ct,ct.current&1|2),e.child}t=t.sibling}a.tail!==null&&vt()>Da&&(e.flags|=128,n=!0,po(a,!1),e.lanes=4194304)}else{if(!n)if(t=wu(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),po(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ot)return Kt(e),null}else 2*vt()-a.renderingStartTime>Da&&r!==1073741824&&(e.flags|=128,n=!0,po(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vt(),e.sibling=null,r=ct.current,Ze(ct,n?r&1|2:r&1),e):(Kt(e),null);case 22:case 23:return kf(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?_s&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function gk(t,e){switch(af(e),e.tag){case 1:return ys(e.type)&&pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pa(),nt(gs),nt(ss),ff(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pf(e),null;case 13:if(nt(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ct),null;case 4:return Pa(),null;case 10:return uf(e.type._context),null;case 22:case 23:return kf(),null;case 24:return null;default:return null}}var Ec=!1,Xt=!1,yk=typeof WeakSet=="function"?WeakSet:Set,ue=null;function pa(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(t,e,n)}else r.current=null}function Qm(t,e,r){try{r()}catch(n){ft(t,e,n)}}var D0=!1;function vk(t,e){if(Im=uu,t=zb(),rf(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,x=null;t:for(;;){for(var j;m!==r||i!==0&&m.nodeType!==3||(l=o+i),m!==a||n!==0&&m.nodeType!==3||(u=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(j=m.firstChild)!==null;)x=m,m=j;for(;;){if(m===t)break t;if(x===r&&++d===i&&(l=o),x===a&&++h===n&&(u=o),(j=m.nextSibling)!==null)break;m=x,x=m.parentNode}m=j}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Pm={focusedElem:t,selectionRange:r},uu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var A=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(A!==null){var D=A.memoizedProps,S=A.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?D:Qs(e.type,D),S);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(I){ft(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return A=D0,D0=!1,A}function Ro(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Qm(e,r,a)}i=i.next}while(i!==n)}}function ld(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Km(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Fw(t){var e=t.alternate;e!==null&&(t.alternate=null,Fw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[el],delete e[Lm],delete e[tk],delete e[sk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ow(t){return t.tag===5||t.tag===3||t.tag===4}function L0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ow(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ym(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=mu));else if(n!==4&&(t=t.child,t!==null))for(Ym(t,e,r),t=t.sibling;t!==null;)Ym(t,e,r),t=t.sibling}function Jm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Jm(t,e,r),t=t.sibling;t!==null;)Jm(t,e,r),t=t.sibling}var Ft=null,Ks=!1;function un(t,e,r){for(r=r.child;r!==null;)qw(t,e,r),r=r.sibling}function qw(t,e,r){if(yr&&typeof yr.onCommitFiberUnmount=="function")try{yr.onCommitFiberUnmount(ed,r)}catch{}switch(r.tag){case 5:Xt||pa(r,e);case 6:var n=Ft,i=Ks;Ft=null,un(t,e,r),Ft=n,Ks=i,Ft!==null&&(Ks?(t=Ft,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ft.removeChild(r.stateNode));break;case 18:Ft!==null&&(Ks?(t=Ft,r=r.stateNode,t.nodeType===8?_h(t.parentNode,r):t.nodeType===1&&_h(t,r),Ko(t)):_h(Ft,r.stateNode));break;case 4:n=Ft,i=Ks,Ft=r.stateNode.containerInfo,Ks=!0,un(t,e,r),Ft=n,Ks=i;break;case 0:case 11:case 14:case 15:if(!Xt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Qm(r,e,o),i=i.next}while(i!==n)}un(t,e,r);break;case 1:if(!Xt&&(pa(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ft(r,e,l)}un(t,e,r);break;case 21:un(t,e,r);break;case 22:r.mode&1?(Xt=(n=Xt)||r.memoizedState!==null,un(t,e,r),Xt=n):un(t,e,r);break;default:un(t,e,r)}}function M0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new yk),e.forEach(function(n){var i=Ck.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Hs(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ft=l.stateNode,Ks=!1;break e;case 3:Ft=l.stateNode.containerInfo,Ks=!0;break e;case 4:Ft=l.stateNode.containerInfo,Ks=!0;break e}l=l.return}if(Ft===null)throw Error(se(160));qw(a,o,i),Ft=null,Ks=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){ft(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uw(e,t),e=e.sibling}function Uw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hs(e,t),pr(t),n&4){try{Ro(3,t,t.return),ld(3,t)}catch(D){ft(t,t.return,D)}try{Ro(5,t,t.return)}catch(D){ft(t,t.return,D)}}break;case 1:Hs(e,t),pr(t),n&512&&r!==null&&pa(r,r.return);break;case 5:if(Hs(e,t),pr(t),n&512&&r!==null&&pa(r,r.return),t.flags&32){var i=t.stateNode;try{Go(i,"")}catch(D){ft(t,t.return,D)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&cb(i,a),wm(l,o);var d=wm(l,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?pb(i,m):h==="dangerouslySetInnerHTML"?hb(i,m):h==="children"?Go(i,m):$p(i,h,m,d)}switch(l){case"input":xm(i,a);break;case"textarea":ub(i,a);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var j=a.value;j!=null?ga(i,!!a.multiple,j,!1):x!==!!a.multiple&&(a.defaultValue!=null?ga(i,!!a.multiple,a.defaultValue,!0):ga(i,!!a.multiple,a.multiple?[]:"",!1))}i[el]=a}catch(D){ft(t,t.return,D)}}break;case 6:if(Hs(e,t),pr(t),n&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(D){ft(t,t.return,D)}}break;case 3:if(Hs(e,t),pr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(D){ft(t,t.return,D)}break;case 4:Hs(e,t),pr(t);break;case 13:Hs(e,t),pr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(_f=vt())),n&4&&M0(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Xt=(d=Xt)||h,Hs(e,t),Xt=d):Hs(e,t),pr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ue=t,h=t.child;h!==null;){for(m=ue=h;ue!==null;){switch(x=ue,j=x.child,x.tag){case 0:case 11:case 14:case 15:Ro(4,x,x.return);break;case 1:pa(x,x.return);var A=x.stateNode;if(typeof A.componentWillUnmount=="function"){n=x,r=x.return;try{e=n,A.props=e.memoizedProps,A.state=e.memoizedState,A.componentWillUnmount()}catch(D){ft(n,r,D)}}break;case 5:pa(x,x.return);break;case 22:if(x.memoizedState!==null){F0(m);continue}}j!==null?(j.return=x,ue=j):F0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=mb("display",o))}catch(D){ft(t,t.return,D)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(D){ft(t,t.return,D)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Hs(e,t),pr(t),n&4&&M0(t);break;case 21:break;default:Hs(e,t),pr(t)}}function pr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ow(r)){var n=r;break e}r=r.return}throw Error(se(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Go(i,""),n.flags&=-33);var a=L0(t);Jm(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=L0(t);Ym(t,l,o);break;default:throw Error(se(161))}}catch(u){ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bk(t,e,r){ue=t,zw(t)}function zw(t,e,r){for(var n=(t.mode&1)!==0;ue!==null;){var i=ue,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Ec;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Xt;l=Ec;var d=Xt;if(Ec=o,(Xt=u)&&!d)for(ue=i;ue!==null;)o=ue,u=o.child,o.tag===22&&o.memoizedState!==null?O0(i):u!==null?(u.return=o,ue=u):O0(i);for(;a!==null;)ue=a,zw(a),a=a.sibling;ue=i,Ec=l,Xt=d}V0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ue=a):V0(t)}}function V0(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||ld(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xt)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Qs(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&w0(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}w0(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Ko(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Xt||e.flags&512&&Km(e)}catch(x){ft(e,e.return,x)}}if(e===t){ue=null;break}if(r=e.sibling,r!==null){r.return=e.return,ue=r;break}ue=e.return}}function F0(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ue=r;break}ue=e.return}}function O0(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ld(4,e)}catch(u){ft(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){ft(e,i,u)}}var a=e.return;try{Km(e)}catch(u){ft(e,a,u)}break;case 5:var o=e.return;try{Km(e)}catch(u){ft(e,o,u)}}}catch(u){ft(e,e.return,u)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var wk=Math.ceil,_u=en.ReactCurrentDispatcher,jf=en.ReactCurrentOwner,Fs=en.ReactCurrentBatchConfig,Me=0,Lt=null,jt=null,Bt=0,_s=0,fa=Bn(0),kt=0,al=null,_i=0,cd=0,Nf=0,Do=null,hs=null,_f=0,Da=1/0,Tr=null,Eu=!1,Xm=null,Cn=null,kc=!1,vn=null,ku=0,Lo=0,Zm=null,$c=-1,Gc=0;function os(){return Me&6?vt():$c!==-1?$c:$c=vt()}function An(t){return t.mode&1?Me&2&&Bt!==0?Bt&-Bt:nk.transition!==null?(Gc===0&&(Gc=kb()),Gc):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:Rb(t.type)),t):1}function tr(t,e,r,n){if(50<Lo)throw Lo=0,Zm=null,Error(se(185));Sl(t,r,n),(!(Me&2)||t!==Lt)&&(t===Lt&&(!(Me&2)&&(cd|=r),kt===4&&fn(t,Bt)),vs(t,n),r===1&&Me===0&&!(e.mode&1)&&(Da=vt()+500,id&&$n()))}function vs(t,e){var r=t.callbackNode;nE(t,e);var n=cu(t,t===Lt?Bt:0);if(n===0)r!==null&&Qg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Qg(r),e===1)t.tag===0?rk(q0.bind(null,t)):Xb(q0.bind(null,t)),ZE(function(){!(Me&6)&&$n()}),r=null;else{switch(Sb(n)){case 1:r=Kp;break;case 4:r=_b;break;case 16:r=lu;break;case 536870912:r=Eb;break;default:r=lu}r=Yw(r,Bw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Bw(t,e){if($c=-1,Gc=0,Me&6)throw Error(se(327));var r=t.callbackNode;if(ja()&&t.callbackNode!==r)return null;var n=cu(t,t===Lt?Bt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Su(t,n);else{e=n;var i=Me;Me|=2;var a=Gw();(Lt!==t||Bt!==e)&&(Tr=null,Da=vt()+500,fi(t,e));do try{_k();break}catch(l){$w(t,l)}while(!0);cf(),_u.current=a,Me=i,jt!==null?e=0:(Lt=null,Bt=0,e=kt)}if(e!==0){if(e===2&&(i=km(t),i!==0&&(n=i,e=ep(t,i))),e===1)throw r=al,fi(t,0),fn(t,n),vs(t,vt()),r;if(e===6)fn(t,n);else{if(i=t.current.alternate,!(n&30)&&!jk(i)&&(e=Su(t,n),e===2&&(a=km(t),a!==0&&(n=a,e=ep(t,a))),e===1))throw r=al,fi(t,0),fn(t,n),vs(t,vt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:ai(t,hs,Tr);break;case 3:if(fn(t,n),(n&130023424)===n&&(e=_f+500-vt(),10<e)){if(cu(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){os(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dm(ai.bind(null,t,hs,Tr),e);break}ai(t,hs,Tr);break;case 4:if(fn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-er(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=vt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wk(n/1960))-n,10<n){t.timeoutHandle=Dm(ai.bind(null,t,hs,Tr),n);break}ai(t,hs,Tr);break;case 5:ai(t,hs,Tr);break;default:throw Error(se(329))}}}return vs(t,vt()),t.callbackNode===r?Bw.bind(null,t):null}function ep(t,e){var r=Do;return t.current.memoizedState.isDehydrated&&(fi(t,e).flags|=256),t=Su(t,e),t!==2&&(e=hs,hs=r,e!==null&&tp(e)),t}function tp(t){hs===null?hs=t:hs.push.apply(hs,t)}function jk(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!ir(a(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fn(t,e){for(e&=~Nf,e&=~cd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-er(e),n=1<<r;t[r]=-1,e&=~n}}function q0(t){if(Me&6)throw Error(se(327));ja();var e=cu(t,0);if(!(e&1))return vs(t,vt()),null;var r=Su(t,e);if(t.tag!==0&&r===2){var n=km(t);n!==0&&(e=n,r=ep(t,n))}if(r===1)throw r=al,fi(t,0),fn(t,e),vs(t,vt()),r;if(r===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ai(t,hs,Tr),vs(t,vt()),null}function Ef(t,e){var r=Me;Me|=1;try{return t(e)}finally{Me=r,Me===0&&(Da=vt()+500,id&&$n())}}function Ei(t){vn!==null&&vn.tag===0&&!(Me&6)&&ja();var e=Me;Me|=1;var r=Fs.transition,n=Ge;try{if(Fs.transition=null,Ge=1,t)return t()}finally{Ge=n,Fs.transition=r,Me=e,!(Me&6)&&$n()}}function kf(){_s=fa.current,nt(fa)}function fi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,XE(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(af(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pu();break;case 3:Pa(),nt(gs),nt(ss),ff();break;case 5:pf(n);break;case 4:Pa();break;case 13:nt(ct);break;case 19:nt(ct);break;case 10:uf(n.type._context);break;case 22:case 23:kf()}r=r.return}if(Lt=t,jt=t=Tn(t.current,null),Bt=_s=e,kt=0,al=null,Nf=cd=_i=0,hs=Do=null,ui!==null){for(e=0;e<ui.length;e++)if(r=ui[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}ui=null}return t}function $w(t,e){do{var r=jt;try{if(cf(),Uc.current=Nu,ju){for(var n=dt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ju=!1}if(Ni=0,It=Et=dt=null,Po=!1,rl=0,jf.current=null,r===null||r.return===null){kt=1,al=e,jt=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Bt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var j=S0(o);if(j!==null){j.flags&=-257,C0(j,o,l,a,e),j.mode&1&&k0(a,d,e),e=j,u=d;var A=e.updateQueue;if(A===null){var D=new Set;D.add(u),e.updateQueue=D}else A.add(u);break e}else{if(!(e&1)){k0(a,d,e),Sf();break e}u=Error(se(426))}}else if(ot&&l.mode&1){var S=S0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),C0(S,o,l,a,e),of(Ra(u,l));break e}}a=u=Ra(u,l),kt!==4&&(kt=2),Do===null?Do=[a]:Do.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=Sw(a,u,e);b0(a,y);break e;case 1:l=u;var w=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Cn===null||!Cn.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var I=Cw(a,l,e);b0(a,I);break e}}a=a.return}while(a!==null)}Hw(r)}catch(M){e=M,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function Gw(){var t=_u.current;return _u.current=Nu,t===null?Nu:t}function Sf(){(kt===0||kt===3||kt===2)&&(kt=4),Lt===null||!(_i&268435455)&&!(cd&268435455)||fn(Lt,Bt)}function Su(t,e){var r=Me;Me|=2;var n=Gw();(Lt!==t||Bt!==e)&&(Tr=null,fi(t,e));do try{Nk();break}catch(i){$w(t,i)}while(!0);if(cf(),Me=r,_u.current=n,jt!==null)throw Error(se(261));return Lt=null,Bt=0,kt}function Nk(){for(;jt!==null;)Ww(jt)}function _k(){for(;jt!==null&&!K_();)Ww(jt)}function Ww(t){var e=Kw(t.alternate,t,_s);t.memoizedProps=t.pendingProps,e===null?Hw(t):jt=e,jf.current=null}function Hw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=gk(r,e),r!==null){r.flags&=32767,jt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,jt=null;return}}else if(r=xk(r,e,_s),r!==null){jt=r;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);kt===0&&(kt=5)}function ai(t,e,r){var n=Ge,i=Fs.transition;try{Fs.transition=null,Ge=1,Ek(t,e,r,n)}finally{Fs.transition=i,Ge=n}return null}function Ek(t,e,r,n){do ja();while(vn!==null);if(Me&6)throw Error(se(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(iE(t,a),t===Lt&&(jt=Lt=null,Bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||kc||(kc=!0,Yw(lu,function(){return ja(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Fs.transition,Fs.transition=null;var o=Ge;Ge=1;var l=Me;Me|=4,jf.current=null,vk(t,r),Uw(r,t),GE(Pm),uu=!!Im,Pm=Im=null,t.current=r,bk(r),Y_(),Me=l,Ge=o,Fs.transition=a}else t.current=r;if(kc&&(kc=!1,vn=t,ku=i),a=t.pendingLanes,a===0&&(Cn=null),Z_(r.stateNode),vs(t,vt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Eu)throw Eu=!1,t=Xm,Xm=null,t;return ku&1&&t.tag!==0&&ja(),a=t.pendingLanes,a&1?t===Zm?Lo++:(Lo=0,Zm=t):Lo=0,$n(),null}function ja(){if(vn!==null){var t=Sb(ku),e=Fs.transition,r=Ge;try{if(Fs.transition=null,Ge=16>t?16:t,vn===null)var n=!1;else{if(t=vn,vn=null,ku=0,Me&6)throw Error(se(331));var i=Me;for(Me|=4,ue=t.current;ue!==null;){var a=ue,o=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ue=d;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:Ro(8,h,a)}var m=h.child;if(m!==null)m.return=h,ue=m;else for(;ue!==null;){h=ue;var x=h.sibling,j=h.return;if(Fw(h),h===d){ue=null;break}if(x!==null){x.return=j,ue=x;break}ue=j}}}var A=a.alternate;if(A!==null){var D=A.child;if(D!==null){A.child=null;do{var S=D.sibling;D.sibling=null,D=S}while(D!==null)}}ue=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ue=o;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ro(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ue=y;break e}ue=a.return}}var w=t.current;for(ue=w;ue!==null;){o=ue;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ue=_;else e:for(o=w;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ld(9,l)}}catch(M){ft(l,l.return,M)}if(l===o){ue=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,ue=I;break e}ue=l.return}}if(Me=i,$n(),yr&&typeof yr.onPostCommitFiberRoot=="function")try{yr.onPostCommitFiberRoot(ed,t)}catch{}n=!0}return n}finally{Ge=r,Fs.transition=e}}return!1}function U0(t,e,r){e=Ra(r,e),e=Sw(t,e,1),t=Sn(t,e,1),e=os(),t!==null&&(Sl(t,1,e),vs(t,e))}function ft(t,e,r){if(t.tag===3)U0(t,t,r);else for(;e!==null;){if(e.tag===3){U0(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Cn===null||!Cn.has(n))){t=Ra(r,t),t=Cw(e,t,1),e=Sn(e,t,1),t=os(),e!==null&&(Sl(e,1,t),vs(e,t));break}}e=e.return}}function kk(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=os(),t.pingedLanes|=t.suspendedLanes&r,Lt===t&&(Bt&r)===r&&(kt===4||kt===3&&(Bt&130023424)===Bt&&500>vt()-_f?fi(t,0):Nf|=r),vs(t,e)}function Qw(t,e){e===0&&(t.mode&1?(e=xc,xc<<=1,!(xc&130023424)&&(xc=4194304)):e=1);var r=os();t=Hr(t,e),t!==null&&(Sl(t,e,r),vs(t,r))}function Sk(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Qw(t,r)}function Ck(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),Qw(t,r)}var Kw;Kw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||gs.current)fs=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return fs=!1,fk(t,e,r);fs=!!(t.flags&131072)}else fs=!1,ot&&e.flags&1048576&&Zb(e,gu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Bc(t,e),t=e.pendingProps;var i=Aa(e,ss.current);wa(e,r),i=gf(null,e,n,t,i,r);var a=yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ys(n)?(a=!0,fu(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,hf(e),i.updater=od,e.stateNode=i,i._reactInternals=e,Um(e,n,t,r),e=$m(null,e,n,!0,a,r)):(e.tag=0,ot&&a&&nf(e),ns(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Bc(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Tk(n),t=Qs(n,t),i){case 0:e=Bm(null,e,n,t,r);break e;case 1:e=I0(null,e,n,t,r);break e;case 11:e=A0(null,e,n,t,r);break e;case 14:e=T0(null,e,n,Qs(n.type,t),r);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qs(n,i),Bm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qs(n,i),I0(t,e,n,i,r);case 3:e:{if(Pw(e),t===null)throw Error(se(387));n=e.pendingProps,a=e.memoizedState,i=a.element,iw(t,e),bu(e,n,null,r);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ra(Error(se(423)),e),e=P0(t,e,n,r,i);break e}else if(n!==i){i=Ra(Error(se(424)),e),e=P0(t,e,n,r,i);break e}else for(Es=kn(e.stateNode.containerInfo.firstChild),Ss=e,ot=!0,Ys=null,r=rw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ta(),n===i){e=Qr(t,e,r);break e}ns(t,e,n,r)}e=e.child}return e;case 5:return aw(e),t===null&&Fm(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Rm(n,i)?o=null:a!==null&&Rm(n,a)&&(e.flags|=32),Iw(t,e),ns(t,e,o,r),e.child;case 6:return t===null&&Fm(e),null;case 13:return Rw(t,e,r);case 4:return mf(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ia(e,null,n,r):ns(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qs(n,i),A0(t,e,n,i,r);case 7:return ns(t,e,e.pendingProps,r),e.child;case 8:return ns(t,e,e.pendingProps.children,r),e.child;case 12:return ns(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Ze(yu,n._currentValue),n._currentValue=o,a!==null)if(ir(a.value,o)){if(a.children===i.children&&!gs.current){e=Qr(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=Or(-1,r&-r),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),Om(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(se(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Om(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ns(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,wa(e,r),i=zs(i),n=n(i),e.flags|=1,ns(t,e,n,r),e.child;case 14:return n=e.type,i=Qs(n,e.pendingProps),i=Qs(n.type,i),T0(t,e,n,i,r);case 15:return Aw(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Qs(n,i),Bc(t,e),e.tag=1,ys(n)?(t=!0,fu(e)):t=!1,wa(e,r),kw(e,n,i),Um(e,n,i,r),$m(null,e,n,!0,t,r);case 19:return Dw(t,e,r);case 22:return Tw(t,e,r)}throw Error(se(156,e.tag))};function Yw(t,e){return Nb(t,e)}function Ak(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(t,e,r,n){return new Ak(t,e,r,n)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tk(t){if(typeof t=="function")return Cf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wp)return 11;if(t===Hp)return 14}return 2}function Tn(t,e){var r=t.alternate;return r===null?(r=Vs(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Wc(t,e,r,n,i,a){var o=2;if(n=t,typeof t=="function")Cf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ia:return xi(r.children,i,a,e);case Gp:o=8,i|=8;break;case dm:return t=Vs(12,r,e,i|2),t.elementType=dm,t.lanes=a,t;case hm:return t=Vs(13,r,e,i),t.elementType=hm,t.lanes=a,t;case mm:return t=Vs(19,r,e,i),t.elementType=mm,t.lanes=a,t;case ab:return ud(r,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nb:o=10;break e;case ib:o=9;break e;case Wp:o=11;break e;case Hp:o=14;break e;case hn:o=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Vs(o,r,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function xi(t,e,r,n){return t=Vs(7,t,n,e),t.lanes=r,t}function ud(t,e,r,n){return t=Vs(22,t,n,e),t.elementType=ab,t.lanes=r,t.stateNode={isHidden:!1},t}function Ph(t,e,r){return t=Vs(6,t,null,e),t.lanes=r,t}function Rh(t,e,r){return e=Vs(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ik(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Af(t,e,r,n,i,a,o,l,u){return t=new Ik(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Vs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hf(a),t}function Pk(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:na,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Jw(t){if(!t)return Vn;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ys(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var r=t.type;if(ys(r))return Jb(t,r,e)}return e}function Xw(t,e,r,n,i,a,o,l,u){return t=Af(r,n,!0,t,i,a,o,l,u),t.context=Jw(null),r=t.current,n=os(),i=An(r),a=Or(n,i),a.callback=e??null,Sn(r,a,i),t.current.lanes=i,Sl(t,i,n),vs(t,n),t}function dd(t,e,r,n){var i=e.current,a=os(),o=An(i);return r=Jw(r),e.context===null?e.context=r:e.pendingContext=r,e=Or(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Sn(i,e,o),t!==null&&(tr(t,i,o,a),qc(t,i,o)),o}function Cu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Tf(t,e){z0(t,e),(t=t.alternate)&&z0(t,e)}function Rk(){return null}var Zw=typeof reportError=="function"?reportError:function(t){console.error(t)};function If(t){this._internalRoot=t}hd.prototype.render=If.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));dd(t,e,null,null)};hd.prototype.unmount=If.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ei(function(){dd(null,t,null,null)}),e[Wr]=null}};function hd(t){this._internalRoot=t}hd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<pn.length&&e!==0&&e<pn[r].priority;r++);pn.splice(r,0,t),r===0&&Pb(t)}};function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function md(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function B0(){}function Dk(t,e,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=Cu(o);a.call(d)}}var o=Xw(e,n,t,0,null,!1,!1,"",B0);return t._reactRootContainer=o,t[Wr]=o.current,Xo(t.nodeType===8?t.parentNode:t),Ei(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=Cu(u);l.call(d)}}var u=Af(t,0,!1,null,null,!1,!1,"",B0);return t._reactRootContainer=u,t[Wr]=u.current,Xo(t.nodeType===8?t.parentNode:t),Ei(function(){dd(e,u,r,n)}),u}function pd(t,e,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=Cu(o);l.call(u)}}dd(e,o,t,i)}else o=Dk(r,e,t,i,n);return Cu(o)}Cb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=bo(e.pendingLanes);r!==0&&(Yp(e,r|1),vs(e,vt()),!(Me&6)&&(Da=vt()+500,$n()))}break;case 13:Ei(function(){var n=Hr(t,1);if(n!==null){var i=os();tr(n,t,1,i)}}),Tf(t,1)}};Jp=function(t){if(t.tag===13){var e=Hr(t,134217728);if(e!==null){var r=os();tr(e,t,134217728,r)}Tf(t,134217728)}};Ab=function(t){if(t.tag===13){var e=An(t),r=Hr(t,e);if(r!==null){var n=os();tr(r,t,e,n)}Tf(t,e)}};Tb=function(){return Ge};Ib=function(t,e){var r=Ge;try{return Ge=t,e()}finally{Ge=r}};Nm=function(t,e,r){switch(e){case"input":if(xm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=nd(n);if(!i)throw Error(se(90));lb(n),xm(n,i)}}}break;case"textarea":ub(t,r);break;case"select":e=r.value,e!=null&&ga(t,!!r.multiple,e,!1)}};gb=Ef;yb=Ei;var Lk={usingClientEntryPoint:!1,Events:[Al,ca,nd,fb,xb,Ef]},fo={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mk={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wb(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||Rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sc.isDisabled&&Sc.supportsFiber)try{ed=Sc.inject(Mk),yr=Sc}catch{}}Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lk;Is.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pf(e))throw Error(se(200));return Pk(t,e,null,r)};Is.createRoot=function(t,e){if(!Pf(t))throw Error(se(299));var r=!1,n="",i=Zw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Af(t,1,!1,null,null,r,!1,n,i),t[Wr]=e.current,Xo(t.nodeType===8?t.parentNode:t),new If(e)};Is.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=wb(e),t=t===null?null:t.stateNode,t};Is.flushSync=function(t){return Ei(t)};Is.hydrate=function(t,e,r){if(!md(e))throw Error(se(200));return pd(null,t,e,!0,r)};Is.hydrateRoot=function(t,e,r){if(!Pf(t))throw Error(se(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Zw;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Xw(e,null,t,1,r??null,i,!1,a,o),t[Wr]=e.current,Xo(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new hd(e)};Is.render=function(t,e,r){if(!md(e))throw Error(se(200));return pd(null,t,e,!1,r)};Is.unmountComponentAtNode=function(t){if(!md(t))throw Error(se(40));return t._reactRootContainer?(Ei(function(){pd(null,null,t,!1,function(){t._reactRootContainer=null,t[Wr]=null})}),!0):!1};Is.unstable_batchedUpdates=Ef;Is.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!md(r))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return pd(t,e,r,!1,n)};Is.version="18.3.1-next-f1338f8080-20240426";function ej(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ej)}catch(t){console.error(t)}}ej(),eb.exports=Is;var Vk=eb.exports,$0=Vk;cm.createRoot=$0.createRoot,cm.hydrateRoot=$0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ol.apply(this,arguments)}var bn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(bn||(bn={}));const G0="popstate";function Fk(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:l="",hash:u=""}=qi(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),sp("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof a=="string"?a:Au(a))}function n(i,a){Rf(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return qk(e,r,n,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Ok(){return Math.random().toString(36).substr(2,8)}function W0(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,r,n){return r===void 0&&(r=null),ol({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qi(e):e,{state:r,key:e&&e.key||n||Ok()})}function Au(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function qi(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function qk(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=bn.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(ol({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=bn.Pop;let S=h(),y=S==null?null:S-d;d=S,u&&u({action:l,location:D.location,delta:y})}function x(S,y){l=bn.Push;let w=sp(D.location,S,y);r&&r(w,S),d=h()+1;let _=W0(w,d),I=D.createHref(w);try{o.pushState(_,"",I)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(I)}a&&u&&u({action:l,location:D.location,delta:1})}function j(S,y){l=bn.Replace;let w=sp(D.location,S,y);r&&r(w,S),d=h();let _=W0(w,d),I=D.createHref(w);o.replaceState(_,"",I),a&&u&&u({action:l,location:D.location,delta:0})}function A(S){let y=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof S=="string"?S:Au(S);return w=w.replace(/ $/,"%20"),bt(y,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,y)}let D={get action(){return l},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(G0,m),u=S,()=>{i.removeEventListener(G0,m),u=null}},createHref(S){return e(i,S)},createURL:A,encodeLocation(S){let y=A(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:x,replace:j,go(S){return o.go(S)}};return D}var H0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(H0||(H0={}));function Uk(t,e,r){return r===void 0&&(r="/"),zk(t,e,r,!1)}function zk(t,e,r,n){let i=typeof e=="string"?qi(e):e,a=Df(i.pathname||"/",r);if(a==null)return null;let o=tj(t);Bk(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=eS(a);l=Xk(o[u],d,n)}return l}function tj(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(bt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=In([n,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tj(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:Yk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of sj(a.path))i(a,o,u)}),e}function sj(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=sj(n.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function Bk(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Jk(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $k=/^:[\w-]+$/,Gk=3,Wk=2,Hk=1,Qk=10,Kk=-2,Q0=t=>t==="*";function Yk(t,e){let r=t.split("/"),n=r.length;return r.some(Q0)&&(n+=Kk),e&&(n+=Wk),r.filter(i=>!Q0(i)).reduce((i,a)=>i+($k.test(a)?Gk:a===""?Hk:Qk),n)}function Jk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Xk(t,e,r){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=K0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),x=u.route;if(!m&&d&&r&&!n[n.length-1].route.index&&(m=K0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:In([a,m.pathname]),pathnameBase:nS(In([a,m.pathnameBase])),route:x}),m.pathnameBase!=="/"&&(a=In([a,m.pathnameBase]))}return o}function K0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Zk(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,h,m)=>{let{paramName:x,isOptional:j}=h;if(x==="*"){let D=l[m]||"";o=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const A=l[m];return j&&!A?d[x]=void 0:d[x]=(A||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function Zk(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Rf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function eS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Df(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function tS(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?qi(t):t;return{pathname:r?r.startsWith("/")?r:sS(r,e):e,search:iS(n),hash:aS(i)}}function sS(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Dh(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rS(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Lf(t,e){let r=rS(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Mf(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=qi(t):(i=ol({},t),bt(!i.pathname||!i.pathname.includes("?"),Dh("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),Dh("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),Dh("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let m=e.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),m-=1;i.pathname=x.join("/")}l=m>=0?e[m]:"/"}let u=tS(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const In=t=>t.join("/").replace(/\/\/+/g,"/"),nS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),iS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,aS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function oS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rj=["post","put","patch","delete"];new Set(rj);const lS=["get",...rj];new Set(lS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ll.apply(this,arguments)}const Vf=g.createContext(null),cS=g.createContext(null),Gn=g.createContext(null),fd=g.createContext(null),tn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),nj=g.createContext(null);function uS(t,e){let{relative:r}=e===void 0?{}:e;$a()||bt(!1);let{basename:n,navigator:i}=g.useContext(Gn),{hash:a,pathname:o,search:l}=aj(t,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:In([n,o])),i.createHref({pathname:u,search:l,hash:a})}function $a(){return g.useContext(fd)!=null}function dr(){return $a()||bt(!1),g.useContext(fd).location}function ij(t){g.useContext(Gn).static||g.useLayoutEffect(t)}function at(){let{isDataRoute:t}=g.useContext(tn);return t?NS():dS()}function dS(){$a()||bt(!1);let t=g.useContext(Vf),{basename:e,future:r,navigator:n}=g.useContext(Gn),{matches:i}=g.useContext(tn),{pathname:a}=dr(),o=JSON.stringify(Lf(i,r.v7_relativeSplatPath)),l=g.useRef(!1);return ij(()=>{l.current=!0}),g.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=Mf(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:In([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,o,a,t])}function xd(){let{matches:t}=g.useContext(tn),e=t[t.length-1];return e?e.params:{}}function aj(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=g.useContext(Gn),{matches:i}=g.useContext(tn),{pathname:a}=dr(),o=JSON.stringify(Lf(i,n.v7_relativeSplatPath));return g.useMemo(()=>Mf(t,JSON.parse(o),a,r==="path"),[t,o,a,r])}function hS(t,e){return mS(t,e)}function mS(t,e,r,n){$a()||bt(!1);let{navigator:i,static:a}=g.useContext(Gn),{matches:o}=g.useContext(tn),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let h=dr(),m;if(e){var x;let y=typeof e=="string"?qi(e):e;d==="/"||(x=y.pathname)!=null&&x.startsWith(d)||bt(!1),m=y}else m=h;let j=m.pathname||"/",A=j;if(d!=="/"){let y=d.replace(/^\//,"").split("/");A="/"+j.replace(/^\//,"").split("/").slice(y.length).join("/")}let D=!a&&r&&r.matches&&r.matches.length>0?r.matches:Uk(t,{pathname:A}),S=yS(D&&D.map(y=>Object.assign({},y,{params:Object.assign({},u,y.params),pathname:In([d,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:In([d,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,r,n);return e&&S?g.createElement(fd.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:bn.Pop}},S):S}function pS(){let t=jS(),e=oS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),r?g.createElement("pre",{style:i},r):null,null)}const fS=g.createElement(pS,null);class xS extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?g.createElement(tn.Provider,{value:this.props.routeContext},g.createElement(nj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gS(t){let{routeContext:e,match:r,children:n}=t,i=g.useContext(Vf);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(tn.Provider,{value:e},n)}function yS(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var a;if(!r)return null;if(r.errors)t=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,l=(i=r)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||bt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:x,errors:j}=r,A=m.route.loader&&x[m.route.id]===void 0&&(!j||j[m.route.id]===void 0);if(m.route.lazy||A){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,x)=>{let j,A=!1,D=null,S=null;r&&(j=l&&m.route.id?l[m.route.id]:void 0,D=m.route.errorElement||fS,u&&(d<0&&x===0?(A=!0,S=null):d===x&&(A=!0,S=m.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,x+1)),w=()=>{let _;return j?_=D:A?_=S:m.route.Component?_=g.createElement(m.route.Component,null):m.route.element?_=m.route.element:_=h,g.createElement(gS,{match:m,routeContext:{outlet:h,matches:y,isDataRoute:r!=null},children:_})};return r&&(m.route.ErrorBoundary||m.route.errorElement||x===0)?g.createElement(xS,{location:r.location,revalidation:r.revalidation,component:D,error:j,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}var oj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(oj||{}),Tu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tu||{});function vS(t){let e=g.useContext(Vf);return e||bt(!1),e}function bS(t){let e=g.useContext(cS);return e||bt(!1),e}function wS(t){let e=g.useContext(tn);return e||bt(!1),e}function lj(t){let e=wS(),r=e.matches[e.matches.length-1];return r.route.id||bt(!1),r.route.id}function jS(){var t;let e=g.useContext(nj),r=bS(Tu.UseRouteError),n=lj(Tu.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function NS(){let{router:t}=vS(oj.UseNavigateStable),e=lj(Tu.UseNavigateStable),r=g.useRef(!1);return ij(()=>{r.current=!0}),g.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ll({fromRouteId:e},a)))},[t,e])}function _S(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cl(t){let{to:e,replace:r,state:n,relative:i}=t;$a()||bt(!1);let{future:a,static:o}=g.useContext(Gn),{matches:l}=g.useContext(tn),{pathname:u}=dr(),d=at(),h=Mf(e,Lf(l,a.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return g.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:i}),[d,m,i,r,n]),null}function ge(t){bt(!1)}function ES(t){let{basename:e="/",children:r=null,location:n,navigationType:i=bn.Pop,navigator:a,static:o=!1,future:l}=t;$a()&&bt(!1);let u=e.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:u,navigator:a,static:o,future:ll({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof n=="string"&&(n=qi(n));let{pathname:h="/",search:m="",hash:x="",state:j=null,key:A="default"}=n,D=g.useMemo(()=>{let S=Df(h,u);return S==null?null:{location:{pathname:S,search:m,hash:x,state:j,key:A},navigationType:i}},[u,h,m,x,j,A,i]);return D==null?null:g.createElement(Gn.Provider,{value:d},g.createElement(fd.Provider,{children:r,value:D}))}function kS(t){let{children:e,location:r}=t;return hS(rp(e),r)}new Promise(()=>{});function rp(t,e){e===void 0&&(e=[]);let r=[];return g.Children.forEach(t,(n,i)=>{if(!g.isValidElement(n))return;let a=[...e,i];if(n.type===g.Fragment){r.push.apply(r,rp(n.props.children,a));return}n.type!==ge&&bt(!1),!n.props.index||!n.props.children||bt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=rp(n.props.children,a)),r.push(o)}),r}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function np(){return np=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},np.apply(this,arguments)}function SS(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function CS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AS(t,e){return t.button===0&&(!e||e==="_self")&&!CS(t)}function ip(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function TS(t,e){let r=ip(t);return e&&e.forEach((n,i)=>{r.has(i)||e.getAll(i).forEach(a=>{r.append(i,a)})}),r}const IS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PS="6";try{window.__reactRouterVersion=PS}catch{}const RS="startTransition",Y0=k_[RS];function DS(t){let{basename:e,children:r,future:n,window:i}=t,a=g.useRef();a.current==null&&(a.current=Fk({window:i,v5Compat:!0}));let o=a.current,[l,u]=g.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=g.useCallback(m=>{d&&Y0?Y0(()=>u(m)):u(m)},[u,d]);return g.useLayoutEffect(()=>o.listen(h),[o,h]),g.useEffect(()=>_S(n),[n]),g.createElement(ES,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const LS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=g.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,x=SS(e,IS),{basename:j}=g.useContext(Gn),A,D=!1;if(typeof d=="string"&&MS.test(d)&&(A=d,LS))try{let _=new URL(window.location.href),I=d.startsWith("//")?new URL(_.protocol+d):new URL(d),M=Df(I.pathname,j);I.origin===_.origin&&M!=null?d=M+I.search+I.hash:D=!0}catch{}let S=uS(d,{relative:i}),y=VS(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});function w(_){n&&n(_),_.defaultPrevented||y(_)}return g.createElement("a",np({},x,{href:A||S,onClick:D||a?n:w,ref:r,target:u}))});var J0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(J0||(J0={}));var X0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(X0||(X0={}));function VS(t,e){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=at(),d=dr(),h=aj(t,{relative:o});return g.useCallback(m=>{if(AS(m,r)){m.preventDefault();let x=n!==void 0?n:Au(d)===Au(h);u(t,{replace:x,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,n,i,r,t,a,o,l])}function cj(t){let e=g.useRef(ip(t)),r=g.useRef(!1),n=dr(),i=g.useMemo(()=>TS(n.search,r.current?null:e.current),[n.search]),a=at(),o=g.useCallback((l,u)=>{const d=ip(typeof l=="function"?l(i):l);r.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var Z0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[r++]=i:i<2048?(e[r++]=i>>6|192,e[r++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=i>>18|240,e[r++]=i>>12&63|128,e[r++]=i>>6&63|128,e[r++]=i&63|128):(e[r++]=i>>12|224,e[r++]=i>>6&63|128,e[r++]=i&63|128)}return e},FS=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const i=t[r++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[r++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[r++],o=t[r++],l=t[r++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},dj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let x=(l&15)<<2|d>>6,j=d&63;u||(j=64,o||(x=64)),n.push(r[h],r[m],r[x],r[j])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=r[t.charAt(i++)],l=i<t.length?r[t.charAt(i)]:0;++i;const d=i<t.length?r[t.charAt(i)]:64;++i;const m=i<t.length?r[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||m==null)throw new OS;const x=a<<2|l>>4;if(n.push(x),d!==64){const j=l<<4&240|d>>2;if(n.push(j),m!==64){const A=d<<6&192|m;n.push(A)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qS=function(t){const e=uj(t);return dj.encodeByteArray(e,!0)},Iu=function(t){return qS(t).replace(/\./g,"")},hj=function(t){try{return dj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=()=>US().__FIREBASE_DEFAULTS__,BS=()=>{if(typeof process>"u"||typeof Z0>"u")return;const t=Z0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$S=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hj(t[1]);return e&&JSON.parse(e)},gd=()=>{try{return zS()||BS()||$S()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mj=t=>{var e,r;return(r=(e=gd())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},GS=t=>{const e=mj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},pj=()=>{var t;return(t=gd())===null||t===void 0?void 0:t.config},fj=t=>{var e;return(e=gd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Iu(JSON.stringify(r)),Iu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rs())}function KS(){var t;const e=(t=gd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ff(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JS(){const t=rs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XS(){return!KS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Of(){try{return typeof indexedDB=="object"}catch{return!1}}function qf(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}function xj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS="FirebaseError";class hr extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=ZS,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ui.prototype.create)}}class Ui{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?e4(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new hr(i,l,n)}}function e4(t,e){return t.replace(t4,(r,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const t4=/\{\$([^}]+)}/g;function s4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ul(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const i of r){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(ey(a)&&ey(o)){if(!ul(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!r.includes(i))return!1;return!0}function ey(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function No(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function r4(t,e){const r=new n4(t,e);return r.subscribe.bind(r)}class n4{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let i;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");i4(e,["next","error","complete"])?i=e:i={next:e,error:r,complete:n},i.next===void 0&&(i.next=Lh),i.error===void 0&&(i.error=Lh),i.complete===void 0&&(i.complete=Lh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function i4(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Lh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=1e3,o4=2,l4=4*60*60*1e3,c4=.5;function ty(t,e=a4,r=o4){const n=e*Math.pow(r,t),i=Math.round(c4*n*(Math.random()-.5)*2);return Math.min(l4,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class ar{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new WS;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:r});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h4(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,r){var n;const i=this.normalizeInstanceIdentifier(r),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const i of n)try{i(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:d4(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d4(t){return t===oi?void 0:t}function h4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new u4(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const p4={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},f4=Re.INFO,x4={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},g4=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=x4[e];if(i)console[i](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yd{constructor(e){this.name=e,this._logLevel=f4,this._logHandler=g4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const y4=(t,e)=>e.some(r=>t instanceof r);let sy,ry;function v4(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function b4(){return ry||(ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gj=new WeakMap,ap=new WeakMap,yj=new WeakMap,Mh=new WeakMap,Uf=new WeakMap;function w4(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(Pn(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&gj.set(r,t)}).catch(()=>{}),Uf.set(e,t),e}function j4(t){if(ap.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});ap.set(t,e)}let op={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return ap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Pn(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function N4(t){op=t(op)}function _4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Vh(this),e,...r);return yj.set(n,e.sort?e.sort():[e]),Pn(n)}:b4().includes(t)?function(...e){return t.apply(Vh(this),e),Pn(gj.get(this))}:function(...e){return Pn(t.apply(Vh(this),e))}}function E4(t){return typeof t=="function"?_4(t):(t instanceof IDBTransaction&&j4(t),y4(t,v4())?new Proxy(t,op):t)}function Pn(t){if(t instanceof IDBRequest)return w4(t);if(Mh.has(t))return Mh.get(t);const e=E4(t);return e!==t&&(Mh.set(t,e),Uf.set(e,t)),e}const Vh=t=>Uf.get(t);function vj(t,e,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=Pn(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Pn(o.result),u.oldVersion,u.newVersion,Pn(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const k4=["get","getKey","getAll","getAllKeys","count"],S4=["put","add","delete","clear"],Fh=new Map;function ny(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fh.get(e))return Fh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=S4.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||k4.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),i&&u.done]))[0]};return Fh.set(e,a),a}N4(t=>({...t,get:(e,r,n)=>ny(e,r)||t.get(e,r,n),has:(e,r)=>!!ny(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(A4(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function A4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lp="@firebase/app",iy="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new yd("@firebase/app"),T4="@firebase/app-compat",I4="@firebase/analytics-compat",P4="@firebase/analytics",R4="@firebase/app-check-compat",D4="@firebase/app-check",L4="@firebase/auth",M4="@firebase/auth-compat",V4="@firebase/database",F4="@firebase/database-compat",O4="@firebase/functions",q4="@firebase/functions-compat",U4="@firebase/installations",z4="@firebase/installations-compat",B4="@firebase/messaging",$4="@firebase/messaging-compat",G4="@firebase/performance",W4="@firebase/performance-compat",H4="@firebase/remote-config",Q4="@firebase/remote-config-compat",K4="@firebase/storage",Y4="@firebase/storage-compat",J4="@firebase/firestore",X4="@firebase/vertexai-preview",Z4="@firebase/firestore-compat",eC="firebase",tC="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",sC={[lp]:"fire-core",[T4]:"fire-core-compat",[P4]:"fire-analytics",[I4]:"fire-analytics-compat",[D4]:"fire-app-check",[R4]:"fire-app-check-compat",[L4]:"fire-auth",[M4]:"fire-auth-compat",[V4]:"fire-rtdb",[F4]:"fire-rtdb-compat",[O4]:"fire-fn",[q4]:"fire-fn-compat",[U4]:"fire-iid",[z4]:"fire-iid-compat",[B4]:"fire-fcm",[$4]:"fire-fcm-compat",[G4]:"fire-perf",[W4]:"fire-perf-compat",[H4]:"fire-rc",[Q4]:"fire-rc-compat",[K4]:"fire-gcs",[Y4]:"fire-gcs-compat",[J4]:"fire-fst",[Z4]:"fire-fst-compat",[X4]:"fire-vertex","fire-js":"fire-js",[eC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Map,rC=new Map,up=new Map;function ay(t,e){try{t.container.addComponent(e)}catch(r){Kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nr(t){const e=t.name;if(up.has(e))return Kr.debug(`There were multiple attempts to register component ${e}.`),!1;up.set(e,t);for(const r of Pu.values())ay(r,t);for(const r of rC.values())ay(r,t);return!0}function zi(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Xs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rn=new Ui("app","Firebase",nC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=tC;function bj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Rn.create("bad-app-name",{appName:String(i)});if(r||(r=pj()),!r)throw Rn.create("no-options");const a=Pu.get(i);if(a){if(ul(r,a.options)&&ul(n,a.config))return a;throw Rn.create("duplicate-app",{appName:i})}const o=new m4(i);for(const u of up.values())o.addComponent(u);const l=new iC(r,n,o);return Pu.set(i,l),l}function zf(t=cp){const e=Pu.get(t);if(!e&&t===cp&&pj())return bj();if(!e)throw Rn.create("no-app",{appName:t});return e}function Os(t,e,r){var n;let i=(n=sC[t])!==null&&n!==void 0?n:t;r&&(i+=`-${r}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kr.warn(l.join(" "));return}Nr(new ar(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="firebase-heartbeat-database",oC=1,dl="firebase-heartbeat-store";let Oh=null;function wj(){return Oh||(Oh=vj(aC,oC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(r){console.warn(r)}}}}).catch(t=>{throw Rn.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function lC(t){try{const r=(await wj()).transaction(dl),n=await r.objectStore(dl).get(jj(t));return await r.done,n}catch(e){if(e instanceof hr)Kr.warn(e.message);else{const r=Rn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kr.warn(r.message)}}}async function oy(t,e){try{const n=(await wj()).transaction(dl,"readwrite");await n.objectStore(dl).put(e,jj(t)),await n.done}catch(r){if(r instanceof hr)Kr.warn(r.message);else{const n=Rn.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Kr.warn(n.message)}}}function jj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=1024,uC=30*24*60*60*1e3;class dC{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new mC(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ly();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=uC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Kr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=ly(),{heartbeatsToSend:n,unsentEntries:i}=hC(this._heartbeatsCache.heartbeats),a=Iu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Kr.warn(r),""}}}function ly(){return new Date().toISOString().substring(0,10)}function hC(t,e=cC){const r=[];let n=t.slice();for(const i of t){const a=r.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),cy(r)>e){a.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),cy(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class mC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Of()?qf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await lC(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return oy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const i=await this.read();return oy(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function cy(t){return Iu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){Nr(new ar("platform-logger",e=>new C4(e),"PRIVATE")),Nr(new ar("heartbeat",e=>new dC(e),"PRIVATE")),Os(lp,iy,t),Os(lp,iy,"esm2017"),Os("fire-js","")}pC("");function Bf(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Nj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fC=Nj,_j=new Ui("auth","Firebase",Nj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new yd("@firebase/auth");function xC(t,...e){Ru.logLevel<=Re.WARN&&Ru.warn(`Auth (${Ga}): ${t}`,...e)}function Hc(t,...e){Ru.logLevel<=Re.ERROR&&Ru.error(`Auth (${Ga}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t,...e){throw Gf(t,...e)}function sr(t,...e){return Gf(t,...e)}function $f(t,e,r){const n=Object.assign(Object.assign({},fC()),{[e]:r});return new Ui("auth","Firebase",n).create(e,{appName:t.name})}function qr(t){return $f(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gC(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&$s(t,"argument-error"),$f(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gf(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return _j.create(t,...e)}function ve(t,e,...r){if(!t)throw Gf(e,...r)}function Mr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hc(e),new Error(e)}function Yr(t,e){t||Mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function yC(){return uy()==="http:"||uy()==="https:"}function uy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(yC()||Ff()||"connection"in navigator)?navigator.onLine:!0}function bC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,r){this.shortDelay=e,this.longDelay=r,Yr(r>e,"Short delay should be less than long delay!"),this.isMobile=QS()||YS()}get(){return vC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=new Pl(3e4,6e4);function sn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function mr(t,e,r,n,i={}){return kj(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Il(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),Ej.fetch()(Sj(t,t.config.apiHost,r,l),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},a))})}async function kj(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},wC),e);try{const i=new _C(t),a=await Promise.race([r(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Cc(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Cc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Cc(t,"user-disabled",o);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw $f(t,h,d);$s(t,h)}}catch(i){if(i instanceof hr)throw i;$s(t,"network-request-failed",{message:String(i)})}}async function Rl(t,e,r,n,i={}){const a=await mr(t,e,r,n,i);return"mfaPendingCredential"in a&&$s(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Sj(t,e,r,n){const i=`${e}${r}?${n}`;return t.config.emulator?Wf(t.config,i):`${t.config.apiScheme}://${i}`}function NC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _C{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(sr(this.auth,"network-request-failed")),jC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cc(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const i=sr(t,e,n);return i.customData._tokenResponse=r,i}function dy(t){return t!==void 0&&t.enterprise!==void 0}class EC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return NC(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function kC(t,e){return mr(t,"GET","/v2/recaptchaConfig",sn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(t,e){return mr(t,"POST","/v1/accounts:delete",e)}async function Cj(t,e){return mr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t,e=!1){return it(t).getIdToken(e)}async function AC(t,e=!1){const r=it(t),n=await r.getIdToken(e),i=Hf(n);ve(i&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Mo(qh(i.auth_time)),issuedAtTime:Mo(qh(i.iat)),expirationTime:Mo(qh(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function qh(t){return Number(t)*1e3}function Hf(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Hc("JWT malformed, contained fewer than 3 sections"),null;try{const i=hj(r);return i?JSON.parse(i):(Hc("Failed to decode base64 JWT payload"),null)}catch(i){return Hc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hy(t){const e=Hf(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof hr&&TC(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function TC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mo(this.lastLoginAt),this.creationTime=Mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Du(t){var e;const r=t.auth,n=await t.getIdToken(),i=await ki(t,Cj(r,{idToken:n}));ve(i==null?void 0:i.users.length,r,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Aj(a.providerUserInfo):[],l=RC(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new hp(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function PC(t){const e=it(t);await Du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RC(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Aj(t){return t.map(e=>{var{providerId:r}=e,n=Bf(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e){const r=await kj(t,{},async()=>{const n=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=Sj(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Ej.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function LC(t,e){return mr(t,"POST","/v2/accounts:revokeToken",sn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const r=hy(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:i,expiresIn:a}=await DC(e,r);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:i,expirationTime:a}=r,o=new Na;return n&&(ve(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ve(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return Mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor(e){var{uid:r,auth:n,stsTokenManager:i}=e,a=Bf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new IC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new hp(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await ki(this,this.stsTokenManager.getToken(this.auth,e));return ve(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return AC(this,e)}reload(){return PC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Vr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Du(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xs(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await ki(this,SC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,i,a,o,l,u,d,h;const m=(n=r.displayName)!==null&&n!==void 0?n:void 0,x=(i=r.email)!==null&&i!==void 0?i:void 0,j=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,A=(o=r.photoURL)!==null&&o!==void 0?o:void 0,D=(l=r.tenantId)!==null&&l!==void 0?l:void 0,S=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=r.createdAt)!==null&&d!==void 0?d:void 0,w=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:I,isAnonymous:M,providerData:q,stsTokenManager:N}=r;ve(_&&N,e,"internal-error");const f=Na.fromJSON(this.name,N);ve(typeof _=="string",e,"internal-error"),dn(m,e.name),dn(x,e.name),ve(typeof I=="boolean",e,"internal-error"),ve(typeof M=="boolean",e,"internal-error"),dn(j,e.name),dn(A,e.name),dn(D,e.name),dn(S,e.name),dn(y,e.name),dn(w,e.name);const v=new Vr({uid:_,auth:e,email:x,emailVerified:I,displayName:m,isAnonymous:M,photoURL:A,phoneNumber:j,tenantId:D,stsTokenManager:f,createdAt:y,lastLoginAt:w});return q&&Array.isArray(q)&&(v.providerData=q.map(E=>Object.assign({},E))),S&&(v._redirectEventId=S),v}static async _fromIdTokenResponse(e,r,n=!1){const i=new Na;i.updateFromServerResponse(r);const a=new Vr({uid:r.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Du(a),a}static async _fromGetAccountInfoResponse(e,r,n){const i=r.users[0];ve(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Aj(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new Na;l.updateFromIdToken(n);const u=new Vr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new hp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map;function Fr(t){Yr(t instanceof Function,"Expected a class definition");let e=my.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,my.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Tj.type="NONE";const py=Tj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e,r){return`firebase:${t}:${e}:${r}`}class _a{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Qc(this.userKey,i.apiKey,a),this.fullPersistenceKey=Qc("persistence",i.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new _a(Fr(py),e,n);const i=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Fr(py);const o=Qc(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){const m=Vr._fromJSON(e,h);d!==a&&(l=m),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new _a(a,e,n):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new _a(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ij(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mj(e))return"Blackberry";if(Vj(e))return"Webos";if(Pj(e))return"Safari";if((e.includes("chrome/")||Rj(e))&&!e.includes("edge/"))return"Chrome";if(Lj(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Ij(t=rs()){return/firefox\//i.test(t)}function Pj(t=rs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rj(t=rs()){return/crios\//i.test(t)}function Dj(t=rs()){return/iemobile/i.test(t)}function Lj(t=rs()){return/android/i.test(t)}function Mj(t=rs()){return/blackberry/i.test(t)}function Vj(t=rs()){return/webos/i.test(t)}function Qf(t=rs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MC(t=rs()){var e;return Qf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function VC(){return JS()&&document.documentMode===10}function Fj(t=rs()){return Qf(t)||Lj(t)||Vj(t)||Mj(t)||/windows phone/i.test(t)||Dj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t,e=[]){let r;switch(t){case"Browser":r=fy(rs());break;case"Worker":r=`${fy(rs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Ga}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const i of r)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OC(t,e={}){return mr(t,"GET","/v2/passwordPolicy",sn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=6;class UC{constructor(e){var r,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:qC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,i,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),i&&(r.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,r,n,i){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new xy(this),this.idTokenSubscription=new xy(this),this.beforeStateQueue=new FC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_j,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=Fr(r)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await _a.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Cj(this,{idToken:e}),n=await Vr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Xs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Du(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xs(this.app))return Promise.reject(qr(this));const r=e?it(e):null;return r&&ve(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xs(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xs(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await OC(this),r=new UC(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ui("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await LC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&Fr(e)||this._popupRedirectResolver;ve(r,this,"argument-error"),this.redirectPersistenceManager=await _a.create(this,[Fr(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,i){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,i);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Oj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(r["X-Firebase-AppCheck"]=i),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&xC(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function rn(t){return it(t)}class xy{constructor(e){this.auth=e,this.observer=null,this.addObserver=r4(r=>this.observer=r)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BC(t){vd=t}function qj(t){return vd.loadJS(t)}function $C(){return vd.recaptchaEnterpriseScript}function GC(){return vd.gapiScript}function WC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const HC="recaptcha-enterprise",QC="NO_RECAPTCHA";class KC{constructor(e){this.type=HC,this.auth=rn(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{kC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new EC(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(a,o,l){const u=window.grecaptcha;dy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(QC)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!r&&dy(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=$C();u.length!==0&&(u+=l),qj(u).then(()=>{i(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function gy(t,e,r,n=!1){const i=new KC(t);let a;try{a=await i.verify(r)}catch{a=await i.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Lu(t,e,r,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await gy(t,e,r,r==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await gy(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(t,e){const r=zi(t,"auth");if(r.isInitialized()){const i=r.getImmediate(),a=r.getOptions();if(ul(a,e??{}))return i;$s(i,"already-initialized")}return r.initialize({options:e})}function JC(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Fr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function XC(t,e,r){const n=rn(t);ve(n._canInitEmulator,n,"emulator-config-failed"),ve(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=Uj(e),{host:o,port:l}=ZC(e),u=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),eA()}function Uj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZC(t){const e=Uj(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:yy(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:yy(o)}}}function yy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function eA(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return Mr("not implemented")}_getIdTokenResponse(e){return Mr("not implemented")}_linkToIdToken(e,r){return Mr("not implemented")}_getReauthenticationResolver(e){return Mr("not implemented")}}async function tA(t,e){return mr(t,"POST","/v1/accounts:update",e)}async function sA(t,e){return mr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e){return Rl(t,"POST","/v1/accounts:signInWithPassword",sn(t,e))}async function zj(t,e){return mr(t,"POST","/v1/accounts:sendOobCode",sn(t,e))}async function nA(t,e){return zj(t,e)}async function iA(t,e){return zj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",sn(t,e))}async function oA(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",sn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Kf{constructor(e,r,n,i=null){super("password",n),this._email=e,this._password=r,this._tenantId=i}static _fromEmailAndPassword(e,r){return new hl(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new hl(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lu(e,r,"signInWithPassword",rA);case"emailLink":return aA(e,{email:this._email,oobCode:this._password});default:$s(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lu(e,n,"signUpPassword",sA);case"emailLink":return oA(e,{idToken:r,email:this._email,oobCode:this._password});default:$s(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e){return Rl(t,"POST","/v1/accounts:signInWithIdp",sn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="http://localhost";class Si extends Kf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$s("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=r,a=Bf(r,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Si(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Ea(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Ea(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Ea(e,r)}buildRequest(){const e={requestUri:lA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Il(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uA(t){const e=jo(No(t)).link,r=e?jo(No(e)).deep_link_id:null,n=jo(No(t)).deep_link_id;return(n?jo(No(n)).link:null)||n||r||e||t}class Yf{constructor(e){var r,n,i,a,o,l;const u=jo(No(e)),d=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,m=cA((i=u.mode)!==null&&i!==void 0?i:null);ve(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=uA(e);try{return new Yf(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.providerId=Bi.PROVIDER_ID}static credential(e,r){return hl._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Yf.parseLink(r);return ve(n,"argument-error"),hl._fromEmailAndCode(e,n.code,n.tenantId)}}Bi.PROVIDER_ID="password";Bi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Jf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Dl{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xn.credential(e.oauthAccessToken)}catch{return null}}}xn.FACEBOOK_SIGN_IN_METHOD="facebook.com";xn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Si._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Pr.credential(r,n)}catch{return null}}}Pr.GOOGLE_SIGN_IN_METHOD="google.com";Pr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Dl{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn extends Dl{constructor(){super("twitter.com")}static credential(e,r){return Si._fromParams({providerId:gn.PROVIDER_ID,signInMethod:gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return gn.credentialFromTaggedObject(e)}static credentialFromError(e){return gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return gn.credential(r,n)}catch{return null}}}gn.TWITTER_SIGN_IN_METHOD="twitter.com";gn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(t,e){return Rl(t,"POST","/v1/accounts:signUp",sn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,i=!1){const a=await Vr._fromIdTokenResponse(e,n,i),o=vy(n);return new Ci({user:a,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const i=vy(n);return new Ci({user:e,providerId:i,_tokenResponse:n,operationType:r})}}function vy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends hr{constructor(e,r,n,i){var a;super(r.code,r.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Mu.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,i){return new Mu(e,r,n,i)}}function Bj(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Mu._fromErrorAndOperation(t,a,e,n):a})}async function hA(t,e,r=!1){const n=await ki(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ci._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e,r=!1){const{auth:n}=t;if(Xs(n.app))return Promise.reject(qr(n));const i="reauthenticate";try{const a=await ki(t,Bj(n,i,e,t),r);ve(a.idToken,n,"internal-error");const o=Hf(a.idToken);ve(o,n,"internal-error");const{sub:l}=o;return ve(t.uid===l,n,"user-mismatch"),Ci._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&$s(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t,e,r=!1){if(Xs(t.app))return Promise.reject(qr(t));const n="signIn",i=await Bj(t,n,e),a=await Ci._fromIdTokenResponse(t,n,i);return r||await t._updateCurrentUser(a.user),a}async function mA(t,e){return Gj(rn(t),e)}async function pA(t,e){return $j(it(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wj(t){const e=rn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mp(t,e,r){const n=rn(t);await Lu(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",iA)}async function Hj(t,e,r){if(Xs(t.app))return Promise.reject(qr(t));const n=rn(t),o=await Lu(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",dA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Wj(t),u}),l=await Ci._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Qj(t,e,r){return Xs(t.app)?Promise.reject(qr(t)):mA(it(t),Bi.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Wj(t),n})}async function by(t,e){const r=it(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await nA(r.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return mr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=it(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await ki(n,fA(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function xA(t,e){return gA(it(t),null,e)}async function gA(t,e,r){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};r&&(a.password=r);const o=await ki(t,tA(n,a));await t._updateTokensIfNecessary(o,!0)}function yA(t,e,r,n){return it(t).onIdTokenChanged(e,r,n)}function vA(t,e,r){return it(t).beforeAuthStateChanged(e,r)}function bA(t,e,r,n){return it(t).onAuthStateChanged(e,r,n)}function wA(t){return it(t).signOut()}const Vu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Vu,"1"),this.storage.removeItem(Vu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=1e3,NA=10;class Jj extends Yj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),i=this.localCache[r];n!==i&&e(r,i,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);VC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,NA):i()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},jA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jj.type="LOCAL";const _A=Jj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj extends Yj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Xj.type="SESSION";const Zj=Xj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(i=>i.isListeningto(e));if(r)return r;const n=new bd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:i,data:a}=r.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async d=>d(r.origin,a)),u=await EA(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Xf("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(m){const x=m;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(x.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return window}function SA(t){br().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function CA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function TA(){return eN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firebaseLocalStorageDb",IA=1,Fu="firebaseLocalStorage",sN="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function wd(t,e){return t.transaction([Fu],e?"readwrite":"readonly").objectStore(Fu)}function PA(){const t=indexedDB.deleteDatabase(tN);return new Ll(t).toPromise()}function pp(){const t=indexedDB.open(tN,IA);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Fu,{keyPath:sN})}catch(i){r(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Fu)?e(n):(n.close(),await PA(),e(await pp()))})})}async function wy(t,e,r){const n=wd(t,!0).put({[sN]:e,value:r});return new Ll(n).toPromise()}async function RA(t,e){const r=wd(t,!1).get(e),n=await new Ll(r).toPromise();return n===void 0?null:n.value}function jy(t,e){const r=wd(t,!0).delete(e);return new Ll(r).toPromise()}const DA=800,LA=3;class rN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>LA)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bd._getInstance(TA()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await CA(),!this.activeServiceWorker)return;this.sender=new kA(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await wy(e,Vu,"1"),await jy(e,Vu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>wy(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>RA(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>jy(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=wd(i,!1).getAll();return new Ll(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),r.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),r.push(i));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rN.type="LOCAL";const MA=rN;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e){return e?Fr(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf extends Kf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Ea(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function VA(t){return Gj(t.auth,new Zf(t),t.bypassAuthState)}function FA(t){const{auth:e,user:r}=t;return ve(r,e,"internal-error"),$j(r,new Zf(t),t.bypassAuthState)}async function OA(t){const{auth:e,user:r}=t;return ve(r,e,"internal-error"),hA(r,new Zf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,r,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VA;case"linkViaPopup":case"linkViaRedirect":return OA;case"reauthViaPopup":case"reauthViaRedirect":return FA;default:$s(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Pl(2e3,1e4);async function Ny(t,e,r){if(Xs(t.app))return Promise.reject(sr(t,"operation-not-supported-in-this-environment"));const n=rn(t);gC(t,e,Jf);const i=nN(n,r);return new hi(n,"signInViaPopup",e,i).executeNotNull()}class hi extends iN{constructor(e,r,n,i,a){super(e,r,i,a),this.provider=n,this.authWindow=null,this.pollId=null,hi.currentPopupAction&&hi.currentPopupAction.cancel(),hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qA.get())};e()}}hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="pendingRedirect",Kc=new Map;class zA extends iN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Kc.get(this.auth._key());if(!e){try{const n=await BA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Kc.set(this.auth._key(),e)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BA(t,e){const r=WA(e),n=GA(t);if(!await n._isAvailable())return!1;const i=await n._get(r)==="true";return await n._remove(r),i}function $A(t,e){Kc.set(t._key(),e)}function GA(t){return Fr(t._redirectPersistence)}function WA(t){return Qc(UA,t.config.apiKey,t.name)}async function HA(t,e,r=!1){if(Xs(t.app))return Promise.reject(qr(t));const n=rn(t),i=nN(n,e),o=await new zA(n,i,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=10*60*1e3;class KA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YA(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!aN(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(sr(this.auth,i))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QA&&this.cachedEventUids.clear(),this.cachedEventUids.has(_y(e))}saveEventToCache(e){this.cachedEventUids.add(_y(e)),this.lastProcessedEventTime=Date.now()}}function _y(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JA(t,e={}){return mr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZA=/^https?/;async function eT(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JA(t);for(const r of e)try{if(tT(r))return}catch{}$s(t,"unauthorized-domain")}function tT(t){const e=dp(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!ZA.test(r))return!1;if(XA.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT=new Pl(3e4,6e4);function Ey(){const t=br().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rT(t){return new Promise((e,r)=>{var n,i,a;function o(){Ey(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ey(),r(sr(t,"network-request-failed"))},timeout:sT.get()})}if(!((i=(n=br().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=br().gapi)===null||a===void 0)&&a.load)o();else{const l=WC("iframefcb");return br()[l]=()=>{gapi.load?o():r(sr(t,"network-request-failed"))},qj(`${GC()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function nT(t){return Yc=Yc||rT(t),Yc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Pl(5e3,15e3),aT="__/auth/iframe",oT="emulator/auth/iframe",lT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cT=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uT(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Wf(e,oT):`https://${t.config.authDomain}/${aT}`,n={apiKey:e.apiKey,appName:t.name,v:Ga},i=cT.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Il(n).slice(1)}`}async function dT(t){const e=await nT(t),r=br().gapi;return ve(r,t,"internal-error"),e.open({where:document.body,url:uT(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lT,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=sr(t,"network-request-failed"),l=br().setTimeout(()=>{a(o)},iT.get());function u(){br().clearTimeout(l),i(n)}n.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mT=500,pT=600,fT="_blank",xT="http://localhost";class ky{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gT(t,e,r,n=mT,i=pT){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},hT),{width:n.toString(),height:i.toString(),top:a,left:o}),d=rs().toLowerCase();r&&(l=Rj(d)?fT:r),Ij(d)&&(e=e||xT,u.scrollbars="yes");const h=Object.entries(u).reduce((x,[j,A])=>`${x}${j}=${A},`,"");if(MC(d)&&l!=="_self")return yT(e||"",l),new ky(null);const m=window.open(e||"",l,h);ve(m,t,"popup-blocked");try{m.focus()}catch{}return new ky(m)}function yT(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="__/auth/handler",bT="emulator/auth/handler",wT=encodeURIComponent("fac");async function Sy(t,e,r,n,i,a){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Ga,eventId:i};if(e instanceof Jf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",s4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Dl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${wT}=${encodeURIComponent(u)}`:"";return`${jT(t)}?${Il(l).slice(1)}${d}`}function jT({config:t}){return t.emulator?Wf(t,bT):`https://${t.authDomain}/${vT}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class NT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zj,this._completeRedirectFn=HA,this._overrideRedirectResult=$A}async _openPopup(e,r,n,i){var a;Yr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Sy(e,r,n,dp(),i);return gT(e,o,Xf())}async _openRedirect(e,r,n,i){await this._originValidation(e);const a=await Sy(e,r,n,dp(),i);return SA(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:i,promise:a}=this.eventManagers[r];return i?Promise.resolve(i):(Yr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await dT(e),n=new KA(e);return r.register("authEvent",i=>(ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Uh,{type:Uh},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Uh];o!==void 0&&r(!!o),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=eT(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Fj()||Pj()||Qf()}}const _T=NT;var Cy="@firebase/auth",Ay="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ST(t){Nr(new ar("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Oj(t)},d=new zC(n,i,a,u);return JC(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nr(new ar("auth-internal",e=>{const r=rn(e.getProvider("auth").getImmediate());return(n=>new ET(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(Cy,Ay,kT(t)),Os(Cy,Ay,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT=5*60,AT=fj("authIdTokenMaxAge")||CT;let Ty=null;const TT=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>AT)return;const i=r==null?void 0:r.token;Ty!==i&&(Ty=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function IT(t=zf()){const e=zi(t,"auth");if(e.isInitialized())return e.getImmediate();const r=YC(t,{popupRedirectResolver:_T,persistence:[MA,_A,Zj]}),n=fj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=TT(a.toString());vA(r,o,()=>o(r.currentUser)),yA(r,l=>o(l))}}const i=mj("auth");return i&&XC(r,`http://${i}`),r}function PT(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}BC({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=sr("internal-error");a.customData=i,r(a)},n.type="text/javascript",n.charset="UTF-8",PT().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ST("Browser");var RT="firebase",DT="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(RT,DT,"app");var Iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,oN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,f){function v(){}v.prototype=f.prototype,N.D=f.prototype,N.prototype=new v,N.prototype.constructor=N,N.C=function(E,C,P){for(var k=Array(arguments.length-2),te=2;te<arguments.length;te++)k[te-2]=arguments[te];return f.prototype[C].apply(E,k)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,f,v){v||(v=0);var E=Array(16);if(typeof f=="string")for(var C=0;16>C;++C)E[C]=f.charCodeAt(v++)|f.charCodeAt(v++)<<8|f.charCodeAt(v++)<<16|f.charCodeAt(v++)<<24;else for(C=0;16>C;++C)E[C]=f[v++]|f[v++]<<8|f[v++]<<16|f[v++]<<24;f=N.g[0],v=N.g[1],C=N.g[2];var P=N.g[3],k=f+(P^v&(C^P))+E[0]+3614090360&4294967295;f=v+(k<<7&4294967295|k>>>25),k=P+(C^f&(v^C))+E[1]+3905402710&4294967295,P=f+(k<<12&4294967295|k>>>20),k=C+(v^P&(f^v))+E[2]+606105819&4294967295,C=P+(k<<17&4294967295|k>>>15),k=v+(f^C&(P^f))+E[3]+3250441966&4294967295,v=C+(k<<22&4294967295|k>>>10),k=f+(P^v&(C^P))+E[4]+4118548399&4294967295,f=v+(k<<7&4294967295|k>>>25),k=P+(C^f&(v^C))+E[5]+1200080426&4294967295,P=f+(k<<12&4294967295|k>>>20),k=C+(v^P&(f^v))+E[6]+2821735955&4294967295,C=P+(k<<17&4294967295|k>>>15),k=v+(f^C&(P^f))+E[7]+4249261313&4294967295,v=C+(k<<22&4294967295|k>>>10),k=f+(P^v&(C^P))+E[8]+1770035416&4294967295,f=v+(k<<7&4294967295|k>>>25),k=P+(C^f&(v^C))+E[9]+2336552879&4294967295,P=f+(k<<12&4294967295|k>>>20),k=C+(v^P&(f^v))+E[10]+4294925233&4294967295,C=P+(k<<17&4294967295|k>>>15),k=v+(f^C&(P^f))+E[11]+2304563134&4294967295,v=C+(k<<22&4294967295|k>>>10),k=f+(P^v&(C^P))+E[12]+1804603682&4294967295,f=v+(k<<7&4294967295|k>>>25),k=P+(C^f&(v^C))+E[13]+4254626195&4294967295,P=f+(k<<12&4294967295|k>>>20),k=C+(v^P&(f^v))+E[14]+2792965006&4294967295,C=P+(k<<17&4294967295|k>>>15),k=v+(f^C&(P^f))+E[15]+1236535329&4294967295,v=C+(k<<22&4294967295|k>>>10),k=f+(C^P&(v^C))+E[1]+4129170786&4294967295,f=v+(k<<5&4294967295|k>>>27),k=P+(v^C&(f^v))+E[6]+3225465664&4294967295,P=f+(k<<9&4294967295|k>>>23),k=C+(f^v&(P^f))+E[11]+643717713&4294967295,C=P+(k<<14&4294967295|k>>>18),k=v+(P^f&(C^P))+E[0]+3921069994&4294967295,v=C+(k<<20&4294967295|k>>>12),k=f+(C^P&(v^C))+E[5]+3593408605&4294967295,f=v+(k<<5&4294967295|k>>>27),k=P+(v^C&(f^v))+E[10]+38016083&4294967295,P=f+(k<<9&4294967295|k>>>23),k=C+(f^v&(P^f))+E[15]+3634488961&4294967295,C=P+(k<<14&4294967295|k>>>18),k=v+(P^f&(C^P))+E[4]+3889429448&4294967295,v=C+(k<<20&4294967295|k>>>12),k=f+(C^P&(v^C))+E[9]+568446438&4294967295,f=v+(k<<5&4294967295|k>>>27),k=P+(v^C&(f^v))+E[14]+3275163606&4294967295,P=f+(k<<9&4294967295|k>>>23),k=C+(f^v&(P^f))+E[3]+4107603335&4294967295,C=P+(k<<14&4294967295|k>>>18),k=v+(P^f&(C^P))+E[8]+1163531501&4294967295,v=C+(k<<20&4294967295|k>>>12),k=f+(C^P&(v^C))+E[13]+2850285829&4294967295,f=v+(k<<5&4294967295|k>>>27),k=P+(v^C&(f^v))+E[2]+4243563512&4294967295,P=f+(k<<9&4294967295|k>>>23),k=C+(f^v&(P^f))+E[7]+1735328473&4294967295,C=P+(k<<14&4294967295|k>>>18),k=v+(P^f&(C^P))+E[12]+2368359562&4294967295,v=C+(k<<20&4294967295|k>>>12),k=f+(v^C^P)+E[5]+4294588738&4294967295,f=v+(k<<4&4294967295|k>>>28),k=P+(f^v^C)+E[8]+2272392833&4294967295,P=f+(k<<11&4294967295|k>>>21),k=C+(P^f^v)+E[11]+1839030562&4294967295,C=P+(k<<16&4294967295|k>>>16),k=v+(C^P^f)+E[14]+4259657740&4294967295,v=C+(k<<23&4294967295|k>>>9),k=f+(v^C^P)+E[1]+2763975236&4294967295,f=v+(k<<4&4294967295|k>>>28),k=P+(f^v^C)+E[4]+1272893353&4294967295,P=f+(k<<11&4294967295|k>>>21),k=C+(P^f^v)+E[7]+4139469664&4294967295,C=P+(k<<16&4294967295|k>>>16),k=v+(C^P^f)+E[10]+3200236656&4294967295,v=C+(k<<23&4294967295|k>>>9),k=f+(v^C^P)+E[13]+681279174&4294967295,f=v+(k<<4&4294967295|k>>>28),k=P+(f^v^C)+E[0]+3936430074&4294967295,P=f+(k<<11&4294967295|k>>>21),k=C+(P^f^v)+E[3]+3572445317&4294967295,C=P+(k<<16&4294967295|k>>>16),k=v+(C^P^f)+E[6]+76029189&4294967295,v=C+(k<<23&4294967295|k>>>9),k=f+(v^C^P)+E[9]+3654602809&4294967295,f=v+(k<<4&4294967295|k>>>28),k=P+(f^v^C)+E[12]+3873151461&4294967295,P=f+(k<<11&4294967295|k>>>21),k=C+(P^f^v)+E[15]+530742520&4294967295,C=P+(k<<16&4294967295|k>>>16),k=v+(C^P^f)+E[2]+3299628645&4294967295,v=C+(k<<23&4294967295|k>>>9),k=f+(C^(v|~P))+E[0]+4096336452&4294967295,f=v+(k<<6&4294967295|k>>>26),k=P+(v^(f|~C))+E[7]+1126891415&4294967295,P=f+(k<<10&4294967295|k>>>22),k=C+(f^(P|~v))+E[14]+2878612391&4294967295,C=P+(k<<15&4294967295|k>>>17),k=v+(P^(C|~f))+E[5]+4237533241&4294967295,v=C+(k<<21&4294967295|k>>>11),k=f+(C^(v|~P))+E[12]+1700485571&4294967295,f=v+(k<<6&4294967295|k>>>26),k=P+(v^(f|~C))+E[3]+2399980690&4294967295,P=f+(k<<10&4294967295|k>>>22),k=C+(f^(P|~v))+E[10]+4293915773&4294967295,C=P+(k<<15&4294967295|k>>>17),k=v+(P^(C|~f))+E[1]+2240044497&4294967295,v=C+(k<<21&4294967295|k>>>11),k=f+(C^(v|~P))+E[8]+1873313359&4294967295,f=v+(k<<6&4294967295|k>>>26),k=P+(v^(f|~C))+E[15]+4264355552&4294967295,P=f+(k<<10&4294967295|k>>>22),k=C+(f^(P|~v))+E[6]+2734768916&4294967295,C=P+(k<<15&4294967295|k>>>17),k=v+(P^(C|~f))+E[13]+1309151649&4294967295,v=C+(k<<21&4294967295|k>>>11),k=f+(C^(v|~P))+E[4]+4149444226&4294967295,f=v+(k<<6&4294967295|k>>>26),k=P+(v^(f|~C))+E[11]+3174756917&4294967295,P=f+(k<<10&4294967295|k>>>22),k=C+(f^(P|~v))+E[2]+718787259&4294967295,C=P+(k<<15&4294967295|k>>>17),k=v+(P^(C|~f))+E[9]+3951481745&4294967295,N.g[0]=N.g[0]+f&4294967295,N.g[1]=N.g[1]+(C+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+C&4294967295,N.g[3]=N.g[3]+P&4294967295}n.prototype.u=function(N,f){f===void 0&&(f=N.length);for(var v=f-this.blockSize,E=this.B,C=this.h,P=0;P<f;){if(C==0)for(;P<=v;)i(this,N,P),P+=this.blockSize;if(typeof N=="string"){for(;P<f;)if(E[C++]=N.charCodeAt(P++),C==this.blockSize){i(this,E),C=0;break}}else for(;P<f;)if(E[C++]=N[P++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=f},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var f=1;f<N.length-8;++f)N[f]=0;var v=8*this.o;for(f=N.length-8;f<N.length;++f)N[f]=v&255,v/=256;for(this.u(N),N=Array(16),f=v=0;4>f;++f)for(var E=0;32>E;E+=8)N[v++]=this.g[f]>>>E&255;return N};function a(N,f){var v=l;return Object.prototype.hasOwnProperty.call(v,N)?v[N]:v[N]=f(N)}function o(N,f){this.h=f;for(var v=[],E=!0,C=N.length-1;0<=C;C--){var P=N[C]|0;E&&P==f||(v[C]=P,E=!1)}this.g=v}var l={};function u(N){return-128<=N&&128>N?a(N,function(f){return new o([f|0],0>f?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return m;if(0>N)return S(d(-N));for(var f=[],v=1,E=0;N>=v;E++)f[E]=N/v|0,v*=4294967296;return new o(f,0)}function h(N,f){if(N.length==0)throw Error("number format error: empty string");if(f=f||10,2>f||36<f)throw Error("radix out of range: "+f);if(N.charAt(0)=="-")return S(h(N.substring(1),f));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(f,8)),E=m,C=0;C<N.length;C+=8){var P=Math.min(8,N.length-C),k=parseInt(N.substring(C,C+P),f);8>P?(P=d(Math.pow(f,P)),E=E.j(P).add(d(k))):(E=E.j(v),E=E.add(d(k)))}return E}var m=u(0),x=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(D(this))return-S(this).m();for(var N=0,f=1,v=0;v<this.g.length;v++){var E=this.i(v);N+=(0<=E?E:4294967296+E)*f,f*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(A(this))return"0";if(D(this))return"-"+S(this).toString(N);for(var f=d(Math.pow(N,6)),v=this,E="";;){var C=I(v,f).g;v=y(v,C.j(f));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(N);if(v=C,A(v))return P+E;for(;6>P.length;)P="0"+P;E=P+E}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function A(N){if(N.h!=0)return!1;for(var f=0;f<N.g.length;f++)if(N.g[f]!=0)return!1;return!0}function D(N){return N.h==-1}t.l=function(N){return N=y(this,N),D(N)?-1:A(N)?0:1};function S(N){for(var f=N.g.length,v=[],E=0;E<f;E++)v[E]=~N.g[E];return new o(v,~N.h).add(x)}t.abs=function(){return D(this)?S(this):this},t.add=function(N){for(var f=Math.max(this.g.length,N.g.length),v=[],E=0,C=0;C<=f;C++){var P=E+(this.i(C)&65535)+(N.i(C)&65535),k=(P>>>16)+(this.i(C)>>>16)+(N.i(C)>>>16);E=k>>>16,P&=65535,k&=65535,v[C]=k<<16|P}return new o(v,v[v.length-1]&-2147483648?-1:0)};function y(N,f){return N.add(S(f))}t.j=function(N){if(A(this)||A(N))return m;if(D(this))return D(N)?S(this).j(S(N)):S(S(this).j(N));if(D(N))return S(this.j(S(N)));if(0>this.l(j)&&0>N.l(j))return d(this.m()*N.m());for(var f=this.g.length+N.g.length,v=[],E=0;E<2*f;E++)v[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<N.g.length;C++){var P=this.i(E)>>>16,k=this.i(E)&65535,te=N.i(C)>>>16,ce=N.i(C)&65535;v[2*E+2*C]+=k*ce,w(v,2*E+2*C),v[2*E+2*C+1]+=P*ce,w(v,2*E+2*C+1),v[2*E+2*C+1]+=k*te,w(v,2*E+2*C+1),v[2*E+2*C+2]+=P*te,w(v,2*E+2*C+2)}for(E=0;E<f;E++)v[E]=v[2*E+1]<<16|v[2*E];for(E=f;E<2*f;E++)v[E]=0;return new o(v,0)};function w(N,f){for(;(N[f]&65535)!=N[f];)N[f+1]+=N[f]>>>16,N[f]&=65535,f++}function _(N,f){this.g=N,this.h=f}function I(N,f){if(A(f))throw Error("division by zero");if(A(N))return new _(m,m);if(D(N))return f=I(S(N),f),new _(S(f.g),S(f.h));if(D(f))return f=I(N,S(f)),new _(S(f.g),f.h);if(30<N.g.length){if(D(N)||D(f))throw Error("slowDivide_ only works with positive integers.");for(var v=x,E=f;0>=E.l(N);)v=M(v),E=M(E);var C=q(v,1),P=q(E,1);for(E=q(E,2),v=q(v,2);!A(E);){var k=P.add(E);0>=k.l(N)&&(C=C.add(v),P=k),E=q(E,1),v=q(v,1)}return f=y(N,C.j(f)),new _(C,f)}for(C=m;0<=N.l(f);){for(v=Math.max(1,Math.floor(N.m()/f.m())),E=Math.ceil(Math.log(v)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),P=d(v),k=P.j(f);D(k)||0<k.l(N);)v-=E,P=d(v),k=P.j(f);A(P)&&(P=x),C=C.add(P),N=y(N,k)}return new _(C,N)}t.A=function(N){return I(this,N).h},t.and=function(N){for(var f=Math.max(this.g.length,N.g.length),v=[],E=0;E<f;E++)v[E]=this.i(E)&N.i(E);return new o(v,this.h&N.h)},t.or=function(N){for(var f=Math.max(this.g.length,N.g.length),v=[],E=0;E<f;E++)v[E]=this.i(E)|N.i(E);return new o(v,this.h|N.h)},t.xor=function(N){for(var f=Math.max(this.g.length,N.g.length),v=[],E=0;E<f;E++)v[E]=this.i(E)^N.i(E);return new o(v,this.h^N.h)};function M(N){for(var f=N.g.length+1,v=[],E=0;E<f;E++)v[E]=N.i(E)<<1|N.i(E-1)>>>31;return new o(v,N.h)}function q(N,f){var v=f>>5;f%=32;for(var E=N.g.length-v,C=[],P=0;P<E;P++)C[P]=0<f?N.i(P+v)>>>f|N.i(P+v+1)<<32-f:N.i(P+v);return new o(C,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,oN=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,gi=o}).apply(typeof Iy<"u"?Iy:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lN,cN,_o,uN,Jc,fp,dN,hN,mN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,b){return c==Array.prototype||c==Object.prototype||(c[p]=b.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var p=0;p<c.length;++p){var b=c[p];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var n=r(this);function i(c,p){if(p)e:{var b=n;c=c.split(".");for(var T=0;T<c.length-1;T++){var B=c[T];if(!(B in b))break e;b=b[B]}c=c[c.length-1],T=b[c],p=p(T),p!=T&&p!=null&&e(b,c,{configurable:!0,writable:!0,value:p})}}function a(c,p){c instanceof String&&(c+="");var b=0,T=!1,B={next:function(){if(!T&&b<c.length){var $=b++;return{value:p($,c[$]),done:!1}}return T=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(c){return c||function(){return a(this,function(p,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function d(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,b){return c.call.apply(c.bind,arguments)}function m(c,p,b){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,T),c.apply(p,B)}}return function(){return c.apply(p,arguments)}}function x(c,p,b){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,x.apply(null,arguments)}function j(c,p){var b=Array.prototype.slice.call(arguments,1);return function(){var T=b.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function A(c,p){function b(){}b.prototype=p.prototype,c.aa=p.prototype,c.prototype=new b,c.prototype.constructor=c,c.Qb=function(T,B,$){for(var ie=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)ie[Qe-2]=arguments[Qe];return p.prototype[B].apply(T,ie)}}function D(c){const p=c.length;if(0<p){const b=Array(p);for(let T=0;T<p;T++)b[T]=c[T];return b}return[]}function S(c,p){for(let b=1;b<arguments.length;b++){const T=arguments[b];if(u(T)){const B=c.length||0,$=T.length||0;c.length=B+$;for(let ie=0;ie<$;ie++)c[B+ie]=T[ie]}else c.push(T)}}class y{constructor(p,b){this.i=p,this.j=b,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function w(c){return/^[\s\xa0]*$/.test(c)}function _(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function I(c){return I[" "](c),c}I[" "]=function(){};var M=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function q(c,p,b){for(const T in c)p.call(b,c[T],T,c)}function N(c,p){for(const b in c)p.call(void 0,c[b],b,c)}function f(c){const p={};for(const b in c)p[b]=c[b];return p}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,p){let b,T;for(let B=1;B<arguments.length;B++){T=arguments[B];for(b in T)c[b]=T[b];for(let $=0;$<v.length;$++)b=v[$],Object.prototype.hasOwnProperty.call(T,b)&&(c[b]=T[b])}}function C(c){var p=1;c=c.split(":");const b=[];for(;0<p&&c.length;)b.push(c.shift()),p--;return c.length&&b.push(c.join(":")),b}function P(c){l.setTimeout(()=>{throw c},0)}function k(){var c=H;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class te{constructor(){this.h=this.g=null}add(p,b){const T=ce.get();T.set(p,b),this.h?this.h.next=T:this.g=T,this.h=T}}var ce=new y(()=>new de,c=>c.reset());class de{constructor(){this.next=this.g=this.h=null}set(p,b){this.h=p,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let O,V=!1,H=new te,F=()=>{const c=l.Promise.resolve(void 0);O=()=>{c.then(R)}};var R=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(b){P(b)}var p=ce;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}V=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const b=()=>{};l.addEventListener("test",b,p),l.removeEventListener("test",b,p)}catch{}return c}();function pe(c,p){if(W.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var b=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{I(p.nodeName);var B=!0;break e}catch{}B=!1}B||(p=null)}}else b=="mouseover"?p=c.fromElement:b=="mouseout"&&(p=c.toElement);this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Z[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&pe.aa.h.call(this)}}A(pe,W);var Z={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),ae=0;function _e(c,p,b,T,B){this.listener=c,this.proxy=null,this.src=p,this.type=b,this.capture=!!T,this.ha=B,this.key=++ae,this.da=this.fa=!1}function De(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ve(c){this.src=c,this.g={},this.h=0}Ve.prototype.add=function(c,p,b,T,B){var $=c.toString();c=this.g[$],c||(c=this.g[$]=[],this.h++);var ie=ze(c,p,T,B);return-1<ie?(p=c[ie],b||(p.fa=!1)):(p=new _e(p,this.src,$,!!T,B),p.fa=b,c.push(p)),p};function Ae(c,p){var b=p.type;if(b in c.g){var T=c.g[b],B=Array.prototype.indexOf.call(T,p,void 0),$;($=0<=B)&&Array.prototype.splice.call(T,B,1),$&&(De(p),c.g[b].length==0&&(delete c.g[b],c.h--))}}function ze(c,p,b,T){for(var B=0;B<c.length;++B){var $=c[B];if(!$.da&&$.listener==p&&$.capture==!!b&&$.ha==T)return B}return-1}var gt="closure_lm_"+(1e6*Math.random()|0),X={};function He(c,p,b,T,B){if(Array.isArray(p)){for(var $=0;$<p.length;$++)He(c,p[$],b,T,B);return null}return b=ye(b),c&&c[J]?c.K(p,b,d(T)?!!T.capture:!!T,B):$e(c,p,b,!1,T,B)}function $e(c,p,b,T,B,$){if(!p)throw Error("Invalid event type");var ie=d(B)?!!B.capture:!!B,Qe=qe(c);if(Qe||(c[gt]=Qe=new Ve(c)),b=Qe.add(p,b,T,ie,$),b.proxy)return b;if(T=ds(),b.proxy=T,T.src=c,T.listener=b,c.addEventListener)ne||(B=ie),B===void 0&&(B=!1),c.addEventListener(p.toString(),T,B);else if(c.attachEvent)c.attachEvent(xe(p.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return b}function ds(){function c(b){return p.call(c.src,c.listener,b)}const p=Ee;return c}function Je(c,p,b,T,B){if(Array.isArray(p))for(var $=0;$<p.length;$++)Je(c,p[$],b,T,B);else T=d(T)?!!T.capture:!!T,b=ye(b),c&&c[J]?(c=c.i,p=String(p).toString(),p in c.g&&($=c.g[p],b=ze($,b,T,B),-1<b&&(De($[b]),Array.prototype.splice.call($,b,1),$.length==0&&(delete c.g[p],c.h--)))):c&&(c=qe(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ze(p,b,T,B)),(b=-1<c?p[c]:null)&&G(b))}function G(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[J])Ae(p.i,c);else{var b=c.type,T=c.proxy;p.removeEventListener?p.removeEventListener(b,T,c.capture):p.detachEvent?p.detachEvent(xe(b),T):p.addListener&&p.removeListener&&p.removeListener(T),(b=qe(p))?(Ae(b,c),b.h==0&&(b.src=null,p[gt]=null)):De(c)}}}function xe(c){return c in X?X[c]:X[c]="on"+c}function Ee(c,p){if(c.da)c=!0;else{p=new pe(p,this);var b=c.listener,T=c.ha||c.src;c.fa&&G(c),c=b.call(T,p)}return c}function qe(c){return c=c[gt],c instanceof Ve?c:null}var We="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(c){return typeof c=="function"?c:(c[We]||(c[We]=function(p){return c.handleEvent(p)}),c[We])}function me(){U.call(this),this.i=new Ve(this),this.M=this,this.F=null}A(me,U),me.prototype[J]=!0,me.prototype.removeEventListener=function(c,p,b,T){Je(this,c,p,b,T)};function Ue(c,p){var b,T=c.F;if(T)for(b=[];T;T=T.F)b.push(T);if(c=c.M,T=p.type||p,typeof p=="string")p=new W(p,c);else if(p instanceof W)p.target=p.target||c;else{var B=p;p=new W(T,c),E(p,B)}if(B=!0,b)for(var $=b.length-1;0<=$;$--){var ie=p.g=b[$];B=Er(ie,T,!0,p)&&B}if(ie=p.g=c,B=Er(ie,T,!0,p)&&B,B=Er(ie,T,!1,p)&&B,b)for($=0;$<b.length;$++)ie=p.g=b[$],B=Er(ie,T,!1,p)&&B}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var b=c.g[p],T=0;T<b.length;T++)De(b[T]);delete c.g[p],c.h--}}this.F=null},me.prototype.K=function(c,p,b,T){return this.i.add(String(c),p,!1,b,T)},me.prototype.L=function(c,p,b,T){return this.i.add(String(c),p,!0,b,T)};function Er(c,p,b,T){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var B=!0,$=0;$<p.length;++$){var ie=p[$];if(ie&&!ie.da&&ie.capture==b){var Qe=ie.listener,Vt=ie.ha||ie.src;ie.fa&&Ae(c.i,ie),B=Qe.call(Vt,T)!==!1&&B}}return B&&!T.defaultPrevented}function Hi(c,p,b){if(typeof c=="function")b&&(c=x(c,b));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:l.setTimeout(c,p||0)}function Kn(c){c.g=Hi(()=>{c.g=null,c.i&&(c.i=!1,Kn(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class Hd extends U{constructor(p,b){super(),this.m=p,this.l=b,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Kn(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yn(c){U.call(this),this.h=c,this.g={}}A(Yn,U);var Jn=[];function kr(c){q(c.g,function(p,b){this.g.hasOwnProperty(b)&&G(p)},c),c.g={}}Yn.prototype.N=function(){Yn.aa.N.call(this),kr(this)},Yn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var an=l.JSON.stringify,Qd=l.JSON.parse,Kd=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Qi(){}Qi.prototype.h=null;function Ja(c){return c.h||(c.h=c.i())}function Ql(){}var Xn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ki(){W.call(this,"d")}A(Ki,W);function Zn(){W.call(this,"c")}A(Zn,W);var Sr={},Kl=null;function Yi(){return Kl=Kl||new me}Sr.La="serverreachability";function Yl(c){W.call(this,Sr.La,c)}A(Yl,W);function ei(c){const p=Yi();Ue(p,new Yl(p))}Sr.STAT_EVENT="statevent";function Jl(c,p){W.call(this,Sr.STAT_EVENT,c),this.stat=p}A(Jl,W);function _t(c){const p=Yi();Ue(p,new Jl(p,c))}Sr.Ma="timingevent";function Rs(c,p){W.call(this,Sr.Ma,c),this.size=p}A(Rs,W);function z(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},p)}function oe(){this.g=!0}oe.prototype.xa=function(){this.g=!1};function Ie(c,p,b,T,B,$){c.info(function(){if(c.g)if($)for(var ie="",Qe=$.split("&"),Vt=0;Vt<Qe.length;Vt++){var Fe=Qe[Vt].split("=");if(1<Fe.length){var Wt=Fe[0];Fe=Fe[1];var Ht=Wt.split("_");ie=2<=Ht.length&&Ht[1]=="type"?ie+(Wt+"="+Fe+"&"):ie+(Wt+"=redacted&")}}else ie=null;else ie=$;return"XMLHTTP REQ ("+T+") [attempt "+B+"]: "+p+`
`+b+`
`+ie})}function At(c,p,b,T,B,$,ie){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+B+"]: "+p+`
`+b+`
`+$+" "+ie})}function Ds(c,p,b,T){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+z2(c,b)+(T?" "+T:"")})}function U2(c,p){c.info(function(){return"TIMEOUT: "+p})}oe.prototype.info=function(){};function z2(c,p){if(!c.g)return p;if(!p)return null;try{var b=JSON.parse(p);if(b){for(c=0;c<b.length;c++)if(Array.isArray(b[c])){var T=b[c];if(!(2>T.length)){var B=T[1];if(Array.isArray(B)&&!(1>B.length)){var $=B[0];if($!="noop"&&$!="stop"&&$!="close")for(var ie=1;ie<B.length;ie++)B[ie]=""}}}}return an(b)}catch{return p}}var Xl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yd;function Zl(){}A(Zl,Qi),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},Yd=new Zl;function on(c,p,b,T){this.j=c,this.i=p,this.l=b,this.R=T||1,this.U=new Yn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xx}function Xx(){this.i=null,this.g="",this.h=!1}var Zx={},Jd={};function Xd(c,p,b){c.L=1,c.v=rc(Cr(p)),c.m=b,c.P=!0,eg(c,null)}function eg(c,p){c.F=Date.now(),ec(c),c.A=Cr(c.v);var b=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),pg(b.i,"t",T),c.C=0,b=c.j.J,c.h=new Xx,c.g=Pg(c.j,b?p:null,!c.m),0<c.O&&(c.M=new Hd(x(c.Y,c,c.g),c.O)),p=c.U,b=c.g,T=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Jn[0]=B.toString()),B=Jn);for(var $=0;$<B.length;$++){var ie=He(b,B[$],T||p.handleEvent,!1,p.h||p);if(!ie)break;p.g[ie.key]=ie}p=c.H?f(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),ei(),Ie(c.i,c.u,c.A,c.l,c.R,c.m)}on.prototype.ca=function(c){c=c.target;const p=this.M;p&&Ar(c)==3?p.j():this.Y(c)},on.prototype.Y=function(c){try{if(c==this.g)e:{const Ht=Ar(this.g);var p=this.g.Ba();const Zi=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||wg(this.g)))){this.J||Ht!=4||p==7||(p==8||0>=Zi?ei(3):ei(2)),Zd(this);var b=this.g.Z();this.X=b;t:if(tg(this)){var T=wg(this.g);c="";var B=T.length,$=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ti(this),Xa(this);var ie="";break t}this.h.i=new l.TextDecoder}for(p=0;p<B;p++)this.h.h=!0,c+=this.h.i.decode(T[p],{stream:!($&&p==B-1)});T.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=b==200,At(this.i,this.u,this.A,this.l,this.R,Ht,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Vt=this.g;if((Qe=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Qe)){var Fe=Qe;break t}}Fe=null}if(b=Fe)Ds(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,eh(this,b);else{this.o=!1,this.s=3,_t(12),ti(this),Xa(this);break e}}if(this.P){b=!0;let Ws;for(;!this.J&&this.C<ie.length;)if(Ws=B2(this,ie),Ws==Jd){Ht==4&&(this.s=4,_t(14),b=!1),Ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Ws==Zx){this.s=4,_t(15),Ds(this.i,this.l,ie,"[Invalid Chunk]"),b=!1;break}else Ds(this.i,this.l,Ws,null),eh(this,Ws);if(tg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ie.length!=0||this.h.h||(this.s=1,_t(16),b=!1),this.o=this.o&&b,!b)Ds(this.i,this.l,ie,"[Invalid Chunked Response]"),ti(this),Xa(this);else if(0<ie.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),ah(Wt),Wt.M=!0,_t(11))}}else Ds(this.i,this.l,ie,null),eh(this,ie);Ht==4&&ti(this),this.o&&!this.J&&(Ht==4?Cg(this.j,this):(this.o=!1,ec(this)))}else a_(this.g),b==400&&0<ie.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),ti(this),Xa(this)}}}catch{}finally{}};function tg(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function B2(c,p){var b=c.C,T=p.indexOf(`
`,b);return T==-1?Jd:(b=Number(p.substring(b,T)),isNaN(b)?Zx:(T+=1,T+b>p.length?Jd:(p=p.slice(T,T+b),c.C=T+b,p)))}on.prototype.cancel=function(){this.J=!0,ti(this)};function ec(c){c.S=Date.now()+c.I,sg(c,c.I)}function sg(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=z(x(c.ba,c),p)}function Zd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}on.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(U2(this.i,this.A),this.L!=2&&(ei(),_t(17)),ti(this),this.s=2,Xa(this)):sg(this,this.S-c)};function Xa(c){c.j.G==0||c.J||Cg(c.j,c)}function ti(c){Zd(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,kr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function eh(c,p){try{var b=c.j;if(b.G!=0&&(b.g==c||th(b.h,c))){if(!c.K&&th(b.h,c)&&b.G==3){try{var T=b.Da.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var B=T;if(B[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<c.F)lc(b),ac(b);else break e;ih(b),_t(18)}}else b.za=B[1],0<b.za-b.T&&37500>B[2]&&b.F&&b.v==0&&!b.C&&(b.C=z(x(b.Za,b),6e3));if(1>=ig(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ri(b,11)}else if((c.K||b.g==c)&&lc(b),!w(p))for(B=b.Da.g.parse(p),p=0;p<B.length;p++){let Fe=B[p];if(b.T=Fe[0],Fe=Fe[1],b.G==2)if(Fe[0]=="c"){b.K=Fe[1],b.ia=Fe[2];const Wt=Fe[3];Wt!=null&&(b.la=Wt,b.j.info("VER="+b.la));const Ht=Fe[4];Ht!=null&&(b.Aa=Ht,b.j.info("SVER="+b.Aa));const Zi=Fe[5];Zi!=null&&typeof Zi=="number"&&0<Zi&&(T=1.5*Zi,b.L=T,b.j.info("backChannelRequestTimeoutMs_="+T)),T=b;const Ws=c.g;if(Ws){const uc=Ws.g?Ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(uc){var $=T.h;$.g||uc.indexOf("spdy")==-1&&uc.indexOf("quic")==-1&&uc.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(sh($,$.h),$.h=null))}if(T.D){const oh=Ws.g?Ws.g.getResponseHeader("X-HTTP-Session-Id"):null;oh&&(T.ya=oh,tt(T.I,T.D,oh))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-c.F,b.j.info("Handshake RTT: "+b.R+"ms")),T=b;var ie=c;if(T.qa=Ig(T,T.J?T.ia:null,T.W),ie.K){ag(T.h,ie);var Qe=ie,Vt=T.L;Vt&&(Qe.I=Vt),Qe.B&&(Zd(Qe),ec(Qe)),T.g=ie}else kg(T);0<b.i.length&&oc(b)}else Fe[0]!="stop"&&Fe[0]!="close"||ri(b,7);else b.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?ri(b,7):nh(b):Fe[0]!="noop"&&b.l&&b.l.ta(Fe),b.v=0)}}ei(4)}catch{}}var $2=class{constructor(c,p){this.g=c,this.map=p}};function rg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ng(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ig(c){return c.h?1:c.g?c.g.size:0}function th(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function sh(c,p){c.g?c.g.add(p):c.h=p}function ag(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}rg.prototype.cancel=function(){if(this.i=og(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function og(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const b of c.g.values())p=p.concat(b.D);return p}return D(c.i)}function G2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var p=[],b=c.length,T=0;T<b;T++)p.push(c[T]);return p}p=[],b=0;for(T in c)p[b++]=c[T];return p}function W2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var p=[];c=c.length;for(var b=0;b<c;b++)p.push(b);return p}p=[],b=0;for(const T in c)p[b++]=T;return p}}}function lg(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var b=W2(c),T=G2(c),B=T.length,$=0;$<B;$++)p.call(void 0,T[$],b&&b[$],c)}var cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function H2(c,p){if(c){c=c.split("&");for(var b=0;b<c.length;b++){var T=c[b].indexOf("="),B=null;if(0<=T){var $=c[b].substring(0,T);B=c[b].substring(T+1)}else $=c[b];p($,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function si(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof si){this.h=c.h,tc(this,c.j),this.o=c.o,this.g=c.g,sc(this,c.s),this.l=c.l;var p=c.i,b=new to;b.i=p.i,p.g&&(b.g=new Map(p.g),b.h=p.h),ug(this,b),this.m=c.m}else c&&(p=String(c).match(cg))?(this.h=!1,tc(this,p[1]||"",!0),this.o=Za(p[2]||""),this.g=Za(p[3]||"",!0),sc(this,p[4]),this.l=Za(p[5]||"",!0),ug(this,p[6]||"",!0),this.m=Za(p[7]||"")):(this.h=!1,this.i=new to(null,this.h))}si.prototype.toString=function(){var c=[],p=this.j;p&&c.push(eo(p,dg,!0),":");var b=this.g;return(b||p=="file")&&(c.push("//"),(p=this.o)&&c.push(eo(p,dg,!0),"@"),c.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&c.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&c.push("/"),c.push(eo(b,b.charAt(0)=="/"?Y2:K2,!0))),(b=this.i.toString())&&c.push("?",b),(b=this.m)&&c.push("#",eo(b,X2)),c.join("")};function Cr(c){return new si(c)}function tc(c,p,b){c.j=b?Za(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function sc(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ug(c,p,b){p instanceof to?(c.i=p,Z2(c.i,c.h)):(b||(p=eo(p,J2)),c.i=new to(p,c.h))}function tt(c,p,b){c.i.set(p,b)}function rc(c){return tt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Za(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function eo(c,p,b){return typeof c=="string"?(c=encodeURI(c).replace(p,Q2),b&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Q2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var dg=/[#\/\?@]/g,K2=/[#\?:]/g,Y2=/[#\?]/g,J2=/[#\?@]/g,X2=/#/g;function to(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function ln(c){c.g||(c.g=new Map,c.h=0,c.i&&H2(c.i,function(p,b){c.add(decodeURIComponent(p.replace(/\+/g," ")),b)}))}t=to.prototype,t.add=function(c,p){ln(this),this.i=null,c=Ji(this,c);var b=this.g.get(c);return b||this.g.set(c,b=[]),b.push(p),this.h+=1,this};function hg(c,p){ln(c),p=Ji(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function mg(c,p){return ln(c),p=Ji(c,p),c.g.has(p)}t.forEach=function(c,p){ln(this),this.g.forEach(function(b,T){b.forEach(function(B){c.call(p,B,T,this)},this)},this)},t.na=function(){ln(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),b=[];for(let T=0;T<p.length;T++){const B=c[T];for(let $=0;$<B.length;$++)b.push(p[T])}return b},t.V=function(c){ln(this);let p=[];if(typeof c=="string")mg(this,c)&&(p=p.concat(this.g.get(Ji(this,c))));else{c=Array.from(this.g.values());for(let b=0;b<c.length;b++)p=p.concat(c[b])}return p},t.set=function(c,p){return ln(this),this.i=null,c=Ji(this,c),mg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function pg(c,p,b){hg(c,p),0<b.length&&(c.i=null,c.g.set(Ji(c,p),D(b)),c.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var b=0;b<p.length;b++){var T=p[b];const $=encodeURIComponent(String(T)),ie=this.V(T);for(T=0;T<ie.length;T++){var B=$;ie[T]!==""&&(B+="="+encodeURIComponent(String(ie[T]))),c.push(B)}}return this.i=c.join("&")};function Ji(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Z2(c,p){p&&!c.j&&(ln(c),c.i=null,c.g.forEach(function(b,T){var B=T.toLowerCase();T!=B&&(hg(this,T),pg(this,B,b))},c)),c.j=p}function e_(c,p){const b=new oe;if(l.Image){const T=new Image;T.onload=j(cn,b,"TestLoadImage: loaded",!0,p,T),T.onerror=j(cn,b,"TestLoadImage: error",!1,p,T),T.onabort=j(cn,b,"TestLoadImage: abort",!1,p,T),T.ontimeout=j(cn,b,"TestLoadImage: timeout",!1,p,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else p(!1)}function t_(c,p){const b=new oe,T=new AbortController,B=setTimeout(()=>{T.abort(),cn(b,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:T.signal}).then($=>{clearTimeout(B),$.ok?cn(b,"TestPingServer: ok",!0,p):cn(b,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),cn(b,"TestPingServer: error",!1,p)})}function cn(c,p,b,T,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),T(b)}catch{}}function s_(){this.g=new Kd}function r_(c,p,b){const T=b||"";try{lg(c,function(B,$){let ie=B;d(B)&&(ie=an(B)),p.push(T+$+"="+encodeURIComponent(ie))})}catch(B){throw p.push(T+"type="+encodeURIComponent("_badmap")),B}}function so(c){this.l=c.Ub||null,this.j=c.eb||!1}A(so,Qi),so.prototype.g=function(){return new nc(this.l,this.j)},so.prototype.i=function(c){return function(){return c}}({});function nc(c,p){me.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(nc,me),t=nc.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,no(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||l).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ro(this):no(this),this.readyState==3&&fg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ro(this))},t.Qa=function(c){this.g&&(this.response=c,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(c){c.readyState=4,c.l=null,c.j=null,c.v=null,no(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var b=p.next();!b.done;)b=b.value,c.push(b[0]+": "+b[1]),b=p.next();return c.join(`\r
`)};function no(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(nc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xg(c){let p="";return q(c,function(b,T){p+=T,p+=":",p+=b,p+=`\r
`}),p}function rh(c,p,b){e:{for(T in b){var T=!1;break e}T=!0}T||(b=xg(b),typeof c=="string"?b!=null&&encodeURIComponent(String(b)):tt(c,p,b))}function pt(c){me.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(pt,me);var n_=/^https?$/i,i_=["POST","PUT"];t=pt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,b,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yd.g(),this.v=this.o?Ja(this.o):Ja(Yd),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch($){gg(this,$);return}if(c=b||"",b=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var B in T)b.set(B,T[B]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())b.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(b.keys()).find($=>$.toLowerCase()=="content-type"),B=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(i_,p,void 0))||T||B||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ie]of b)this.g.setRequestHeader($,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bg(this),this.u=!0,this.g.send(c),this.u=!1}catch($){gg(this,$)}};function gg(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,yg(c),ic(c)}function yg(c){c.A||(c.A=!0,Ue(c,"complete"),Ue(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ue(this,"complete"),Ue(this,"abort"),ic(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ic(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vg(this):this.bb())},t.bb=function(){vg(this)};function vg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Ar(c)!=4||c.Z()!=2)){if(c.u&&Ar(c)==4)Hi(c.Ea,0,c);else if(Ue(c,"readystatechange"),Ar(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var b;if(!(b=p)){var T;if(T=ie===0){var B=String(c.D).match(cg)[1]||null;!B&&l.self&&l.self.location&&(B=l.self.location.protocol.slice(0,-1)),T=!n_.test(B?B.toLowerCase():"")}b=T}if(b)Ue(c,"complete"),Ue(c,"success");else{c.m=6;try{var $=2<Ar(c)?c.g.statusText:""}catch{$=""}c.l=$+" ["+c.Z()+"]",yg(c)}}finally{ic(c)}}}}function ic(c,p){if(c.g){bg(c);const b=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ue(c,"ready");try{b.onreadystatechange=T}catch{}}}function bg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Ar(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Qd(p)}};function wg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function a_(c){const p={};c=(c.g&&2<=Ar(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(w(c[T]))continue;var b=C(c[T]);const B=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const $=p[B]||[];p[B]=$,$.push(b)}N(p,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(c,p,b){return b&&b.internalChannelParams&&b.internalChannelParams[c]||p}function jg(c){this.Aa=0,this.i=[],this.j=new oe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,c),this.cb=io("retryDelaySeedMs",1e4,c),this.Wa=io("forwardChannelMaxRetries",2,c),this.wa=io("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new rg(c&&c.concurrentRequestLimit),this.Da=new s_,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jg.prototype,t.la=8,t.G=1,t.connect=function(c,p,b,T){_t(0),this.W=c,this.H=p||{},b&&T!==void 0&&(this.H.OSID=b,this.H.OAID=T),this.F=this.X,this.I=Ig(this,null,this.W),oc(this)};function nh(c){if(Ng(c),c.G==3){var p=c.U++,b=Cr(c.I);if(tt(b,"SID",c.K),tt(b,"RID",p),tt(b,"TYPE","terminate"),ao(c,b),p=new on(c,c.j,p),p.L=2,p.v=rc(Cr(b)),b=!1,l.navigator&&l.navigator.sendBeacon)try{b=l.navigator.sendBeacon(p.v.toString(),"")}catch{}!b&&l.Image&&(new Image().src=p.v,b=!0),b||(p.g=Pg(p.j,null),p.g.ea(p.v)),p.F=Date.now(),ec(p)}Tg(c)}function ac(c){c.g&&(ah(c),c.g.cancel(),c.g=null)}function Ng(c){ac(c),c.u&&(l.clearTimeout(c.u),c.u=null),lc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function oc(c){if(!ng(c.h)&&!c.s){c.s=!0;var p=c.Ga;O||F(),V||(O(),V=!0),H.add(p,c),c.B=0}}function o_(c,p){return ig(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=z(x(c.Ga,c,p),Ag(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new on(this,this.j,c);let $=this.o;if(this.S&&($?($=f($),E($,this.S)):$=this.S),this.m!==null||this.O||(B.H=$,$=null),this.P)e:{for(var p=0,b=0;b<this.i.length;b++){t:{var T=this.i[b];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,4096<p){p=b;break e}if(p===4096||b===this.i.length-1){p=b+1;break e}}p=1e3}else p=1e3;p=Eg(this,B,p),b=Cr(this.I),tt(b,"RID",c),tt(b,"CVER",22),this.D&&tt(b,"X-HTTP-Session-Id",this.D),ao(this,b),$&&(this.O?p="headers="+encodeURIComponent(String(xg($)))+"&"+p:this.m&&rh(b,this.m,$)),sh(this.h,B),this.Ua&&tt(b,"TYPE","init"),this.P?(tt(b,"$req",p),tt(b,"SID","null"),B.T=!0,Xd(B,b,null)):Xd(B,b,p),this.G=2}}else this.G==3&&(c?_g(this,c):this.i.length==0||ng(this.h)||_g(this))};function _g(c,p){var b;p?b=p.l:b=c.U++;const T=Cr(c.I);tt(T,"SID",c.K),tt(T,"RID",b),tt(T,"AID",c.T),ao(c,T),c.m&&c.o&&rh(T,c.m,c.o),b=new on(c,c.j,b,c.B+1),c.m===null&&(b.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Eg(c,b,1e3),b.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),sh(c.h,b),Xd(b,T,p)}function ao(c,p){c.H&&q(c.H,function(b,T){tt(p,T,b)}),c.l&&lg({},function(b,T){tt(p,T,b)})}function Eg(c,p,b){b=Math.min(c.i.length,b);var T=c.l?x(c.l.Na,c.l,c):null;e:{var B=c.i;let $=-1;for(;;){const ie=["count="+b];$==-1?0<b?($=B[0].g,ie.push("ofs="+$)):$=0:ie.push("ofs="+$);let Qe=!0;for(let Vt=0;Vt<b;Vt++){let Fe=B[Vt].g;const Wt=B[Vt].map;if(Fe-=$,0>Fe)$=Math.max(0,B[Vt].g-100),Qe=!1;else try{r_(Wt,ie,"req"+Fe+"_")}catch{T&&T(Wt)}}if(Qe){T=ie.join("&");break e}}}return c=c.i.splice(0,b),p.D=c,T}function kg(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;O||F(),V||(O(),V=!0),H.add(p,c),c.v=0}}function ih(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=z(x(c.Fa,c),Ag(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Sg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=z(x(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),ac(this),Sg(this))};function ah(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Sg(c){c.g=new on(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=Cr(c.qa);tt(p,"RID","rpc"),tt(p,"SID",c.K),tt(p,"AID",c.T),tt(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&tt(p,"TO",c.ja),tt(p,"TYPE","xmlhttp"),ao(c,p),c.m&&c.o&&rh(p,c.m,c.o),c.L&&(c.g.I=c.L);var b=c.g;c=c.ia,b.L=1,b.v=rc(Cr(p)),b.m=null,b.P=!0,eg(b,c)}t.Za=function(){this.C!=null&&(this.C=null,ac(this),ih(this),_t(19))};function lc(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Cg(c,p){var b=null;if(c.g==p){lc(c),ah(c),c.g=null;var T=2}else if(th(c.h,p))b=p.D,ag(c.h,p),T=1;else return;if(c.G!=0){if(p.o)if(T==1){b=p.m?p.m.length:0,p=Date.now()-p.F;var B=c.B;T=Yi(),Ue(T,new Rs(T,b)),oc(c)}else kg(c);else if(B=p.s,B==3||B==0&&0<p.X||!(T==1&&o_(c,p)||T==2&&ih(c)))switch(b&&0<b.length&&(p=c.h,p.i=p.i.concat(b)),B){case 1:ri(c,5);break;case 4:ri(c,10);break;case 3:ri(c,6);break;default:ri(c,2)}}}function Ag(c,p){let b=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(b*=2),b*p}function ri(c,p){if(c.j.info("Error code "+p),p==2){var b=x(c.fb,c),T=c.Xa;const B=!T;T=new si(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||tc(T,"https"),rc(T),B?e_(T.toString(),b):t_(T.toString(),b)}else _t(2);c.G=0,c.l&&c.l.sa(p),Tg(c),Ng(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Tg(c){if(c.G=0,c.ka=[],c.l){const p=og(c.h);(p.length!=0||c.i.length!=0)&&(S(c.ka,p),S(c.ka,c.i),c.h.i.length=0,D(c.i),c.i.length=0),c.l.ra()}}function Ig(c,p,b){var T=b instanceof si?Cr(b):new si(b);if(T.g!="")p&&(T.g=p+"."+T.g),sc(T,T.s);else{var B=l.location;T=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;var $=new si(null);T&&tc($,T),p&&($.g=p),B&&sc($,B),b&&($.l=b),T=$}return b=c.D,p=c.ya,b&&p&&tt(T,b,p),tt(T,"VER",c.la),ao(c,T),T}function Pg(c,p,b){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new pt(new so({eb:b})):new pt(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rg(){}t=Rg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cc(){}cc.prototype.g=function(c,p){return new js(c,p)};function js(c,p){me.call(this),this.g=new jg(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!w(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Xi(this)}A(js,me),js.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},js.prototype.close=function(){nh(this.g)},js.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var b={};b.__data__=c,c=b}else this.u&&(b={},b.__data__=an(c),c=b);p.i.push(new $2(p.Ya++,c)),p.G==3&&oc(p)},js.prototype.N=function(){this.g.l=null,delete this.j,nh(this.g),delete this.g,js.aa.N.call(this)};function Dg(c){Ki.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const b in p){c=b;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}A(Dg,Ki);function Lg(){Zn.call(this),this.status=1}A(Lg,Zn);function Xi(c){this.g=c}A(Xi,Rg),Xi.prototype.ua=function(){Ue(this.g,"a")},Xi.prototype.ta=function(c){Ue(this.g,new Dg(c))},Xi.prototype.sa=function(c){Ue(this.g,new Lg)},Xi.prototype.ra=function(){Ue(this.g,"b")},cc.prototype.createWebChannel=cc.prototype.g,js.prototype.send=js.prototype.o,js.prototype.open=js.prototype.m,js.prototype.close=js.prototype.close,mN=function(){return new cc},hN=function(){return Yi()},dN=Sr,fp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xl.NO_ERROR=0,Xl.TIMEOUT=8,Xl.HTTP_ERROR=6,Jc=Xl,Jx.COMPLETE="complete",uN=Jx,Ql.EventType=Xn,Xn.OPEN="a",Xn.CLOSE="b",Xn.ERROR="c",Xn.MESSAGE="d",me.prototype.listen=me.prototype.K,_o=Ql,cN=so,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,lN=pt}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const Py="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new yd("@firebase/firestore");function xo(){return Ai.logLevel}function he(t,...e){if(Ai.logLevel<=Re.DEBUG){const r=e.map(ex);Ai.debug(`Firestore (${Wa}): ${t}`,...r)}}function Jr(t,...e){if(Ai.logLevel<=Re.ERROR){const r=e.map(ex);Ai.error(`Firestore (${Wa}): ${t}`,...r)}}function Ti(t,...e){if(Ai.logLevel<=Re.WARN){const r=e.map(ex);Ai.warn(`Firestore (${Wa}): ${t}`,...r)}}function ex(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: `+t;throw Jr(e),new Error(e)}function Ye(t,e){t||we()}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends hr{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Jt.UNAUTHENTICATED))}shutdown(){}}class LT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class MT{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){let n=this.i;const i=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let a=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ur,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ur)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ye(typeof n.accessToken=="string"),new pN(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new Jt(e)}}class VT{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FT{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new VT(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const n=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ye(typeof r.token=="string"),this.R=r.token,new OT(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=UT(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<r&&(n+=e.charAt(i[a]%e.length))}return n}}function Oe(t,e){return t<e?-1:t>e?1:0}function La(t,e,r){return t.length===e.length&&t.every((n,i)=>r(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new et(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new et(0,0))}static max(){return new je(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,r,n){r===void 0?r=0:r>e.length&&we(),n===void 0?n=e.length-r:n>e.length-r&&we(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let i=0;i<n;i++){const a=e.get(i),o=r.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class rt extends ml{construct(e,r,n){return new rt(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new le(Q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(i=>i.length>0))}return new rt(r)}static emptyPath(){return new rt([])}}const zT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends ml{construct(e,r,n){return new Dt(e,r,n)}static isValidIdentifier(e){return zT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const r=[];let n="",i=0;const a=()=>{if(n.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new le(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new le(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new le(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(r)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(rt.fromString(e))}static fromName(e){return new fe(rt.fromString(e).popFirst(5))}static empty(){return new fe(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return rt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new rt(e.slice()))}}function BT(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=je.fromTimestamp(n===1e9?new et(r+1,0):new et(r,n));return new Fn(i,fe.empty(),e)}function $T(t){return new Fn(t.readTime,t.key,-1)}class Fn{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Fn(je.min(),fe.empty(),-1)}static max(){return new Fn(je.max(),fe.empty(),-1)}}function GT(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=fe.comparator(t.documentKey,e.documentKey),r!==0?r:Oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==WT)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ee((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,i)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ee?r:ee.resolve(r)}catch(r){return ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.reject(r)}static resolve(e){return new ee((r,n)=>{r(e)})}static reject(e){return new ee((r,n)=>{n(e)})}static waitFor(e){return new ee((r,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&r()},u=>n(u))}),o=!0,a===i&&r()})}static or(e){let r=ee.resolve(!1);for(const n of e)r=r.next(i=>i?ee.resolve(i):n());return r}static forEach(e,r){const n=[];return e.forEach((i,a)=>{n.push(r.call(this,i,a))}),this.waitFor(n)}static mapArray(e,r){return new ee((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;r(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>i(h))}})}static doWhile(e,r){return new ee((n,i)=>{const a=()=>{e()===!0?r().next(()=>{a()},i):n()};a()})}}function QT(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sx.oe=-1;function jd(t){return t==null}function Ou(t){return t===0&&1/t==-1/0}function KT(t){return typeof t=="number"&&Number.isInteger(t)&&!Ou(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function $i(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function xN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,r){this.comparator=e,this.root=r||Ot.EMPTY}insert(e,r){return new mt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return r+n.left.size;i<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tc(this.root,e,this.comparator,!0)}}class Tc{constructor(e,r,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,r,n,i,a){this.key=e,this.value=r,this.color=n??Ot.RED,this.left=i??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,i,a){return new Ot(e??this.key,r??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,r,n),null):a===0?i.copy(null,r,null,null,null):i.copy(null,null,null,null,i.right.insert(e,r,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,i=this;if(r(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,r),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),r(e,i.key)===0){if(i.right.isEmpty())return Ot.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,r))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,r,n,i,a){return this}insert(e,r,n){return new Ot(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;r(i.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Dy(this.data.getIterator())}getIteratorFrom(e){return new Dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof $t)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new $t(this.comparator);return r.data=e,r}}class Dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new ks([])}unionWith(e){let r=new $t(Dt.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ks(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new gN("Invalid base64 string: "+a):a}}(e);return new Mt(r)}static fromUint8Array(e){const r=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Mt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const YT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function On(t){if(Ye(!!t),typeof t=="string"){let e=0;const r=YT.exec(t);if(Ye(!!r),r[1]){let i=r[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function nx(t){const e=t.mapValue.fields.__previous_value__;return rx(e)?nx(e):e}function pl(t){const e=On(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,r,n,i,a,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Ma{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rx(t)?4:ZT(t)?9007199254740991:XT(t)?10:11:we()}function _r(t,e){if(t===e)return!0;const r=Pi(t);if(r!==Pi(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pl(t).isEqual(pl(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=On(i.timestampValue),l=On(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Ii(i.bytesValue).isEqual(Ii(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yt(i.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yt(i.integerValue)===yt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=yt(i.doubleValue),l=yt(a.doubleValue);return o===l?Ou(o)===Ou(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Ry(o)!==Ry(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!_r(o[u],l[u])))return!1;return!0}(t,e);default:return we()}}function fl(t,e){return(t.values||[]).find(r=>_r(r,e))!==void 0}function Va(t,e){if(t===e)return 0;const r=Pi(t),n=Pi(e);if(r!==n)return Oe(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Oe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=yt(a.integerValue||a.doubleValue),u=yt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ly(t.timestampValue,e.timestampValue);case 4:return Ly(pl(t),pl(e));case 5:return Oe(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ii(a),u=Ii(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Oe(l[d],u[d]);if(h!==0)return h}return Oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Oe(yt(a.latitude),yt(o.latitude));return l!==0?l:Oe(yt(a.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return My(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const m=a.fields||{},x=o.fields||{},j=(l=m.value)===null||l===void 0?void 0:l.arrayValue,A=(u=x.value)===null||u===void 0?void 0:u.arrayValue,D=Oe(((d=j==null?void 0:j.values)===null||d===void 0?void 0:d.length)||0,((h=A==null?void 0:A.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:My(j,A)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Ic.mapValue&&o===Ic.mapValue)return 0;if(a===Ic.mapValue)return 1;if(o===Ic.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const x=Oe(u[m],h[m]);if(x!==0)return x;const j=Va(l[u[m]],d[h[m]]);if(j!==0)return j}return Oe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function Ly(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Oe(t,e);const r=On(t),n=On(e),i=Oe(r.seconds,n.seconds);return i!==0?i:Oe(r.nanos,n.nanos)}function My(t,e){const r=t.values||[],n=e.values||[];for(let i=0;i<r.length&&i<n.length;++i){const a=Va(r[i],n[i]);if(a)return a}return Oe(r.length,n.length)}function Fa(t){return xp(t)}function xp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=On(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ii(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return fe.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",i=!0;for(const a of r.values||[])i?i=!1:n+=",",n+=xp(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${xp(r.fields[o])}`;return i+"}"}(t.mapValue):we()}function Vy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function gp(t){return!!t&&"integerValue"in t}function ix(t){return!!t&&"arrayValue"in t}function Fy(t){return!!t&&"nullValue"in t}function Oy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xc(t){return!!t&&"mapValue"in t}function XT(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $i(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Vo(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Vo(t.arrayValue.values[r]);return e}return Object.assign({},t)}function ZT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e){this.value=e}static empty(){return new ms({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Xc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(r)}setAll(e){let r=Dt.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,i),n={},i=[],r=l.popLast()}o?n[l.lastSegment()]=Vo(o):i.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,i)}delete(e){const r=this.field(e.popLast());Xc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=r.mapValue.fields[e.get(n)];Xc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=i),r=i}return r.mapValue.fields}applyChanges(e,r,n){$i(r,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new ms(Vo(this.value))}}function yN(t){const e=[];return $i(t.fields,(r,n)=>{const i=new Dt([r]);if(Xc(n)){const a=yN(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,r,n,i,a,o,l){this.key=e,this.documentType=r,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,je.min(),je.min(),je.min(),ms.empty(),0)}static newFoundDocument(e,r,n,i){return new Zt(e,1,r,je.min(),n,i,0)}static newNoDocument(e,r){return new Zt(e,2,r,je.min(),je.min(),ms.empty(),0)}static newUnknownDocument(e,r){return new Zt(e,3,r,je.min(),je.min(),ms.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ms.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ms.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,r){this.position=e,this.inclusive=r}}function qy(t,e,r){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=fe.comparator(fe.fromName(o.referenceValue),r.key):n=Va(o,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Uy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!_r(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,r="asc"){this.field=e,this.dir=r}}function e5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vN=class{};class Nt extends vN{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new s5(e,r,n):r==="array-contains"?new i5(e,n):r==="in"?new a5(e,n):r==="not-in"?new o5(e,n):r==="array-contains-any"?new l5(e,n):new Nt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new r5(e,n):new n5(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Va(r,this.value)):r!==null&&Pi(this.value)===Pi(r)&&this.matchesComparison(Va(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class or extends vN{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new or(e,r)}matches(e){return bN(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bN(t){return t.op==="and"}function wN(t){return t5(t)&&bN(t)}function t5(t){for(const e of t.filters)if(e instanceof or)return!1;return!0}function yp(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(wN(t))return t.filters.map(e=>yp(e)).join(",");{const e=t.filters.map(r=>yp(r)).join(",");return`${t.op}(${e})`}}function jN(t,e){return t instanceof Nt?function(n,i){return i instanceof Nt&&n.op===i.op&&n.field.isEqual(i.field)&&_r(n.value,i.value)}(t,e):t instanceof or?function(n,i){return i instanceof or&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&jN(o,i.filters[l]),!0):!1}(t,e):void we()}function NN(t){return t instanceof Nt?function(r){return`${r.field.canonicalString()} ${r.op} ${Fa(r.value)}`}(t):t instanceof or?function(r){return r.op.toString()+" {"+r.getFilters().map(NN).join(" ,")+"}"}(t):"Filter"}class s5 extends Nt{constructor(e,r,n){super(e,r,n),this.key=fe.fromName(n.referenceValue)}matches(e){const r=fe.comparator(e.key,this.key);return this.matchesComparison(r)}}class r5 extends Nt{constructor(e,r){super(e,"in",r),this.keys=_N("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class n5 extends Nt{constructor(e,r){super(e,"not-in",r),this.keys=_N("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function _N(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>fe.fromName(n.referenceValue))}class i5 extends Nt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ix(r)&&fl(r.arrayValue,this.value)}}class a5 extends Nt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&fl(this.value.arrayValue,r)}}class o5 extends Nt{constructor(e,r){super(e,"not-in",r)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!fl(this.value.arrayValue,r)}}class l5 extends Nt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ix(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>fl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,r=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function zy(t,e=null,r=[],n=[],i=null,a=null,o=null){return new c5(t,e,r,n,i,a,o)}function ax(t){const e=Ne(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>yp(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),jd(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Fa(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Fa(n)).join(",")),e.ue=r}return e.ue}function ox(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!e5(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!jN(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uy(t.startAt,e.startAt)&&Uy(t.endAt,e.endAt)}function vp(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,r=null,n=[],i=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function u5(t,e,r,n,i,a,o,l){return new Ha(t,e,r,n,i,a,o,l)}function lx(t){return new Ha(t)}function By(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function EN(t){return t.collectionGroup!==null}function Fo(t){const e=Ne(t);if(e.ce===null){e.ce=[];const r=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new $t(Dt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.ce.push(new xl(a,n))}),r.has(Dt.keyField().canonicalString())||e.ce.push(new xl(Dt.keyField(),n))}return e.ce}function wr(t){const e=Ne(t);return e.le||(e.le=d5(e,Fo(t))),e.le}function d5(t,e){if(t.limitType==="F")return zy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new xl(i.field,a)});const r=t.endAt?new qu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new qu(t.startAt.position,t.startAt.inclusive):null;return zy(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function bp(t,e){const r=t.filters.concat([e]);return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Uu(t,e,r){return new Ha(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Nd(t,e){return ox(wr(t),wr(e))&&t.limitType===e.limitType}function kN(t){return`${ax(wr(t))}|lt:${t.limitType}`}function ta(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(i=>NN(i)).join(", ")}]`),jd(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(i=>Fa(i)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(i=>Fa(i)).join(",")),`Target(${n})`}(wr(t))}; limitType=${t.limitType})`}function _d(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):fe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Fo(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,u){const d=qy(o,l,u);return o.inclusive?d<=0:d<0}(n.startAt,Fo(n),i)||n.endAt&&!function(o,l,u){const d=qy(o,l,u);return o.inclusive?d>=0:d>0}(n.endAt,Fo(n),i))}(t,e)}function h5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SN(t){return(e,r)=>{let n=!1;for(const i of Fo(t)){const a=m5(i,e,r);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function m5(t,e,r){const n=t.field.isKeyField()?fe.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Va(u,d):we()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,r]);i.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[r]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$i(this.inner,(r,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return xN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new mt(fe.comparator);function Xr(){return p5}const CN=new mt(fe.comparator);function Eo(...t){let e=CN;for(const r of t)e=e.insert(r.key,r);return e}function AN(t){let e=CN;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function mi(){return Oo()}function TN(){return Oo()}function Oo(){return new Qa(t=>t.toString(),(t,e)=>t.isEqual(e))}const f5=new mt(fe.comparator),x5=new $t(fe.comparator);function Pe(...t){let e=x5;for(const r of t)e=e.add(r);return e}const g5=new $t(Oe);function y5(){return g5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ou(e)?"-0":e}}function IN(t){return{integerValue:""+t}}function PN(t,e){return KT(e)?IN(e):cx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(){this._=void 0}}function v5(t,e,r){return t instanceof gl?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&rx(a)&&(a=nx(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(r,e):t instanceof yl?DN(t,e):t instanceof vl?LN(t,e):function(i,a){const o=RN(i,a),l=$y(o)+$y(i.Pe);return gp(o)&&gp(i.Pe)?IN(l):cx(i.serializer,l)}(t,e)}function b5(t,e,r){return t instanceof yl?DN(t,e):t instanceof vl?LN(t,e):r}function RN(t,e){return t instanceof bl?function(n){return gp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class gl extends Ed{}class yl extends Ed{constructor(e){super(),this.elements=e}}function DN(t,e){const r=MN(e);for(const n of t.elements)r.some(i=>_r(i,n))||r.push(n);return{arrayValue:{values:r}}}class vl extends Ed{constructor(e){super(),this.elements=e}}function LN(t,e){let r=MN(e);for(const n of t.elements)r=r.filter(i=>!_r(i,n));return{arrayValue:{values:r}}}class bl extends Ed{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function $y(t){return yt(t.integerValue||t.doubleValue)}function MN(t){return ix(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,r){this.field=e,this.transform=r}}function w5(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof yl&&i instanceof yl||n instanceof vl&&i instanceof vl?La(n.elements,i.elements,_r):n instanceof bl&&i instanceof bl?_r(n.Pe,i.Pe):n instanceof gl&&i instanceof gl}(t.transform,e.transform)}class j5{constructor(e,r){this.version=e,this.transformResults=r}}class qs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new qs}static exists(e){return new qs(void 0,e)}static updateTime(e){return new qs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kd{}function FN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ux(t.key,qs.none()):new Fl(t.key,t.data,qs.none());{const r=t.data,n=ms.empty();let i=new $t(Dt.comparator);for(let a of e.fields)if(!i.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Wn(t.key,n,new ks(i.toArray()),qs.none())}}function N5(t,e,r){t instanceof Fl?function(i,a,o){const l=i.value.clone(),u=Wy(i.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Wn?function(i,a,o){if(!Zc(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Wy(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(ON(i)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function qo(t,e,r,n){return t instanceof Fl?function(a,o,l,u){if(!Zc(a.precondition,o))return l;const d=a.value.clone(),h=Hy(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof Wn?function(a,o,l,u){if(!Zc(a.precondition,o))return l;const d=Hy(a.fieldTransforms,u,o),h=o.data;return h.setAll(ON(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,r,n):function(a,o,l){return Zc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function _5(t,e){let r=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=RN(n.transform,i||null);a!=null&&(r===null&&(r=ms.empty()),r.set(n.field,a))}return r||null}function Gy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&La(n,i,(a,o)=>w5(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends kd{constructor(e,r,n,i=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Wn extends kd{constructor(e,r,n,i,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ON(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Wy(t,e,r){const n=new Map;Ye(t.length===r.length);for(let i=0;i<r.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,b5(o,l,r[i]))}return n}function Hy(t,e,r){const n=new Map;for(const i of t){const a=i.transform,o=r.data.field(i.field);n.set(i.field,v5(a,o,e))}return n}class ux extends kd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E5 extends kd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,r,n,i){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&N5(a,e,n[i])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=qo(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=qo(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=TN();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(i.key)?null:l;const u=FN(o,l);u!==null&&n.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Pe())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(r,n)=>Gy(r,n))&&La(this.baseMutations,e.baseMutations,(r,n)=>Gy(r,n))}}class dx{constructor(e,r,n,i){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=i}static from(e,r,n){Ye(e.mutations.length===n.length);let i=function(){return f5}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new dx(e,r,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Le;function A5(t){switch(t){default:return we();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function qN(t){if(t===void 0)return Jr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case wt.OK:return Q.OK;case wt.CANCELLED:return Q.CANCELLED;case wt.UNKNOWN:return Q.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Q.INTERNAL;case wt.UNAVAILABLE:return Q.UNAVAILABLE;case wt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case wt.NOT_FOUND:return Q.NOT_FOUND;case wt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case wt.ABORTED:return Q.ABORTED;case wt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case wt.DATA_LOSS:return Q.DATA_LOSS;default:return we()}}(Le=wt||(wt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I5=new gi([4294967295,4294967295],0);function Qy(t){const e=T5().encode(t),r=new oN;return r.update(e),new Uint8Array(r.digest())}function Ky(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new gi([r,n],0),new gi([i,a],0)]}class hx{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ko(`Invalid padding: ${r}`);if(n<0)throw new ko(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ko(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=gi.fromNumber(this.Ie)}Ee(e,r,n){let i=e.add(r.multiply(gi.fromNumber(n)));return i.compare(I5)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=Qy(e),[n,i]=Ky(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,r,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new hx(a,i,r);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const r=Qy(e),[n,i]=Ky(r);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,r,n,i,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Sd(je.min(),i,new mt(Oe),Xr(),Pe())}}class Ol{constructor(e,r,n,i,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Ol(n,r,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,r,n,i){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=i}}class UN{constructor(e,r){this.targetId=e,this.me=r}}class zN{constructor(e,r,n=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=i}}class Yy{constructor(){this.fe=0,this.ge=Xy(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),r=Pe(),n=Pe();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:r=r.add(i);break;case 1:n=n.add(i);break;default:we()}}),new Ol(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=Xy()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class P5{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xr(),this.qe=Jy(),this.Qe=new mt(Oe)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:we()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,i)=>{this.ze(i)&&r(i)})}He(e){const r=e.targetId,n=e.me.count,i=this.Je(r);if(i){const a=i.target;if(vp(a))if(n===0){const o=new fe(a.path);this.Ue(r,o,Zt.newNoDocument(o,je.min()))}else Ye(n===1);else{const o=this.Ye(r);if(o!==n){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,d)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=r;let o,l;try{o=Ii(n).toUint8Array()}catch(u){if(u instanceof gN)return Ti("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hx(o,i,a)}catch(u){return Ti(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let i=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(r,a,null),i++)}),i}rt(e){const r=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&vp(l.target)){const u=new fe(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Zt.newNoDocument(u,e))}a.be&&(r.set(o,a.ve()),a.Ce())}});let n=Pe();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Sd(e,r,this.Qe,this.ke,n);return this.ke=Xr(),this.qe=Jy(),this.Qe=new mt(Oe),i}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,r)?i.Fe(r,1):i.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new Yy,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new $t(Oe),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||he("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yy),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function Jy(){return new mt(fe.comparator)}function Xy(){return new mt(fe.comparator)}const R5={asc:"ASCENDING",desc:"DESCENDING"},D5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L5={and:"AND",or:"OR"};class M5{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function wp(t,e){return t.useProto3Json||jd(e)?e:{value:e}}function zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function V5(t,e){return zu(t,e.toTimestamp())}function jr(t){return Ye(!!t),je.fromTimestamp(function(r){const n=On(r);return new et(n.seconds,n.nanos)}(t))}function mx(t,e){return jp(t,e).canonicalString()}function jp(t,e){const r=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?r:r.child(e)}function $N(t){const e=rt.fromString(t);return Ye(KN(e)),e}function Np(t,e){return mx(t.databaseId,e.path)}function zh(t,e){const r=$N(e);if(r.get(1)!==t.databaseId.projectId)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new fe(WN(r))}function GN(t,e){return mx(t.databaseId,e)}function F5(t){const e=$N(t);return e.length===4?rt.emptyPath():WN(e)}function _p(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WN(t){return Ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zy(t,e,r){return{name:Np(t,e),fields:r.value.mapValue.fields}}function O5(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ye(h===void 0||typeof h=="string"),Mt.fromBase64String(h||"")):(Ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Mt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Q.UNKNOWN:qN(d.code);return new le(h,d.message||"")}(o);r=new zN(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=zh(t,n.document.name),a=jr(n.document.updateTime),o=n.document.createTime?jr(n.document.createTime):je.min(),l=new ms({mapValue:{fields:n.document.fields}}),u=Zt.newFoundDocument(i,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new eu(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=zh(t,n.document),a=n.readTime?jr(n.readTime):je.min(),o=Zt.newNoDocument(i,a),l=n.removedTargetIds||[];r=new eu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=zh(t,n.document),a=n.removedTargetIds||[];r=new eu([],a,i,null)}else{if(!("filter"in e))return we();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new C5(i,a),l=n.targetId;r=new UN(l,o)}}return r}function q5(t,e){let r;if(e instanceof Fl)r={update:Zy(t,e.key,e.value)};else if(e instanceof ux)r={delete:Np(t,e.key)};else if(e instanceof Wn)r={update:Zy(t,e.key,e.data),updateMask:K5(e.fieldMask)};else{if(!(e instanceof E5))return we();r={verify:Np(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw we()}(0,n))),e.precondition.isNone||(r.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:V5(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we()}(t,e.precondition)),r}function U5(t,e){return t&&t.length>0?(Ye(e!==void 0),t.map(r=>function(i,a){let o=i.updateTime?jr(i.updateTime):jr(a);return o.isEqual(je.min())&&(o=jr(a)),new j5(o,i.transformResults||[])}(r,e))):[]}function z5(t,e){return{documents:[GN(t,e.path)]}}function B5(t,e){const r={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=GN(t,i);const a=function(d){if(d.length!==0)return QN(or.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(x){return{field:sa(x.field),direction:W5(x.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=wp(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:r,parent:i}}function $5(t){let e=F5(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let i=null;if(n>0){Ye(n===1);const h=r.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(m){const x=HN(m);return x instanceof or&&wN(x)?x.getFilters():[x]}(r.where));let o=[];r.orderBy&&(o=function(m){return m.map(x=>function(A){return new xl(ra(A.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(x))}(r.orderBy));let l=null;r.limit&&(l=function(m){let x;return x=typeof m=="object"?m.value:m,jd(x)?null:x}(r.limit));let u=null;r.startAt&&(u=function(m){const x=!!m.before,j=m.values||[];return new qu(j,x)}(r.startAt));let d=null;return r.endAt&&(d=function(m){const x=!m.before,j=m.values||[];return new qu(j,x)}(r.endAt)),u5(e,i,o,a,l,"F",u,d)}function G5(t,e){const r=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function HN(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=ra(r.unaryFilter.field);return Nt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=ra(r.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ra(r.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ra(r.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(r){return Nt.create(ra(r.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return or.create(r.compositeFilter.filters.map(n=>HN(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(r.compositeFilter.op))}(t):we()}function W5(t){return R5[t]}function H5(t){return D5[t]}function Q5(t){return L5[t]}function sa(t){return{fieldPath:t.canonicalString()}}function ra(t){return Dt.fromServerFormat(t.fieldPath)}function QN(t){return t instanceof Nt?function(r){if(r.op==="=="){if(Oy(r.value))return{unaryFilter:{field:sa(r.field),op:"IS_NAN"}};if(Fy(r.value))return{unaryFilter:{field:sa(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Oy(r.value))return{unaryFilter:{field:sa(r.field),op:"IS_NOT_NAN"}};if(Fy(r.value))return{unaryFilter:{field:sa(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(r.field),op:H5(r.op),value:r.value}}}(t):t instanceof or?function(r){const n=r.getFilters().map(i=>QN(i));return n.length===1?n[0]:{compositeFilter:{op:Q5(r.op),filters:n}}}(t):we()}function K5(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function KN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,r,n,i,a=je.min(),o=je.min(),l=Mt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new wn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.ct=e}}function J5(t){const e=$5({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X5{constructor(){this.un=new Z5}addToCollectionParentIndex(e,r){return this.un.add(r),ee.resolve()}getCollectionParents(e,r){return ee.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return ee.resolve()}deleteFieldIndex(e,r){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,r){return ee.resolve()}getDocumentsMatchingTarget(e,r){return ee.resolve(null)}getIndexType(e,r){return ee.resolve(0)}getFieldIndexes(e,r){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,r){return ee.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,r){return ee.resolve(Fn.min())}updateCollectionGroup(e,r,n){return ee.resolve()}updateIndexEntries(e,r){return ee.resolve()}}class Z5{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r]||new $t(rt.comparator),a=!i.has(n);return this.index[r]=i.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),i=this.index[r];return i&&i.has(n)}getEntries(e){return(this.index[e]||new $t(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Oa(0)}static kn(){return new Oa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.changes=new Qa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?ee.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,r,n,i){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,r))).next(i=>(n!==null&&qo(n.mutation,i,ks.empty(),et.now()),i))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Pe()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Pe()){const i=mi();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,n).next(a=>{let o=Eo();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=mi();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Pe()))}populateOverlays(e,r,n){const i=[];return n.forEach(a=>{r.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,n,i){let a=Xr();const o=Oo(),l=function(){return Oo()}();return r.forEach((u,d)=>{const h=n.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Wn)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),qo(h.mutation,d,h.mutation.getFieldMask(),et.now())):o.set(d.key,ks.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>{var m;return l.set(d,new tI(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,r){const n=Oo();let i=new mt((o,l)=>o-l),a=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||ks.empty();h=l.applyToLocalView(d,h),n.set(u,h);const m=(i.get(l.batchId)||Pe()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=TN();h.forEach(x=>{if(!a.has(x)){const j=FN(r.get(x),n.get(x));j!==null&&m.set(x,j),a=a.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return ee.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,i){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):EN(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,i):this.getDocumentsMatchingCollectionQuery(e,r,n,i)}getNextDocuments(e,r,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,i-a.size):ee.resolve(mi());let l=-1,u=a;return o.next(d=>ee.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(x=>{u=u.insert(h,x)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Pe())).next(h=>({batchId:l,changes:AN(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new fe(r)).next(n=>{let i=Eo();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,r,n,i){const a=r.collectionGroup;let o=Eo();return this.indexManager.getCollectionParents(e,a).next(l=>ee.forEach(l,u=>{const d=function(m,x){return new Ha(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(h=>{h.forEach((m,x)=>{o=o.insert(m,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,i))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let l=Eo();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&qo(h.mutation,d,ks.empty(),et.now()),_d(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return ee.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(i){return{id:i.id,version:i.version,createTime:jr(i.createTime)}}(r)),ee.resolve()}getNamedQuery(e,r){return ee.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(i){return{name:i.name,query:J5(i.bundledQuery),readTime:jr(i.readTime)}}(r)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.overlays=new mt(fe.comparator),this.Ir=new Map}getOverlay(e,r){return ee.resolve(this.overlays.get(r))}getOverlays(e,r){const n=mi();return ee.forEach(r,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((i,a)=>{this.ht(e,r,a)}),ee.resolve()}removeOverlaysForBatchId(e,r,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),ee.resolve()}getOverlaysForCollection(e,r,n){const i=mi(),a=r.length+1,o=new fe(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>n&&i.set(u.getKey(),u)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,r,n,i){let a=new mt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=mi(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=mi(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return ee.resolve(l)}ht(e,r,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new S5(r,n));let a=this.Ir.get(r);a===void 0&&(a=Pe(),this.Ir.set(r,a)),this.Ir.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Tr=new $t(Tt.Er),this.dr=new $t(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Tt(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Tt(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new fe(new rt([])),n=new Tt(r,e),i=new Tt(r,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new fe(new rt([])),n=new Tt(r,e),i=new Tt(r,e+1);let a=Pe();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Tt(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Tt{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return fe.comparator(e.key,r.key)||Oe(e.wr,r.wr)}static Ar(e,r){return Oe(e.wr,r.wr)||fe.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new $t(Tt.Er)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k5(a,r,n,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Tt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(o)}lookupMutationBatch(e,r){return ee.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,i=this.vr(n),a=i<0?0:i;return ee.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Tt(r,0),i=new Tt(r,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const l=this.Dr(o.wr);a.push(l)}),ee.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new $t(Oe);return r.forEach(i=>{const a=new Tt(i,0),o=new Tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),ee.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,i=n.length+1;let a=n;fe.isDocumentKey(a)||(a=a.child(""));const o=new Tt(new fe(a),0);let l=new $t(Oe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},o),ee.resolve(this.Cr(l))}Cr(e){const r=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&r.push(i)}),r}removeMutationBatch(e,r){Ye(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return ee.forEach(r.mutations,i=>{const a=new Tt(i.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Tt(r,0),i=this.br.firstAfterOrEqual(n);return ee.resolve(r.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.Mr=e,this.docs=function(){return new mt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return ee.resolve(n?n.document.mutableCopy():Zt.newInvalidDocument(r))}getEntries(e,r){let n=Xr();return r.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Zt.newInvalidDocument(i))}),ee.resolve(n)}getDocumentsMatchingQuery(e,r,n,i){let a=Xr();const o=r.path,l=new fe(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||GT($T(h),n)<=0||(i.has(h.key)||_d(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return ee.resolve(a)}getAllFromCollectionGroup(e,r,n,i){we()}Or(e,r){return ee.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new lI(this)}getSize(e){return ee.resolve(this.size)}}class lI extends eI{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?r.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),ee.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.persistence=e,this.Nr=new Qa(r=>ax(r),ox),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new px,this.targetCount=0,this.kr=Oa.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,i)=>r(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),ee.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new Oa(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,ee.resolve()}updateTargetData(e,r){return this.Kn(r),ee.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,r,n){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ee.waitFor(a).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return ee.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),ee.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const i=this.persistence.referenceDelegate,a=[];return i&&r.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),ee.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),ee.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return ee.resolve(n)}containsKey(e,r){return ee.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,r){this.qr={},this.overlays={},this.Qr=new sx(0),this.Kr=!1,this.Kr=!0,this.$r=new iI,this.referenceDelegate=e(this),this.Ur=new cI(this),this.indexManager=new X5,this.remoteDocumentCache=function(i){return new oI(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new Y5(r),this.Gr=new rI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nI,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new aI(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){he("MemoryPersistence","Starting transaction:",e);const i=new dI(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,r){return ee.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class dI extends HT{constructor(e){super(),this.currentSequenceNumber=e}}class fx{constructor(e){this.persistence=e,this.Jr=new px,this.Yr=null}static Zr(e){return new fx(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),ee.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),ee.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),ee.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Xr,n=>{const i=fe.fromPath(n);return this.ei(e,i).next(a=>{a||r.removeEntry(i,je.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return ee.or([()=>ee.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,r,n,i){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=i}static Wi(e,r){let n=Pe(),i=Pe();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new xx(e,r.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XS()?8:QT(rs())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,i){const a={result:null};return this.Yi(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,r,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new hI;return this.Xi(e,r,o).next(l=>{if(a.result=l,this.zi)return this.es(e,r,o,l.size)})}).next(()=>a.result)}es(e,r,n,i){return n.documentReadCount<this.ji?(xo()<=Re.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",ta(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ee.resolve()):(xo()<=Re.DEBUG&&he("QueryEngine","Query:",ta(r),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(xo()<=Re.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",ta(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(r))):ee.resolve())}Yi(e,r){if(By(r))return ee.resolve(null);let n=wr(r);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(r.limit!==null&&i===1&&(r=Uu(r,null,"F"),n=wr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Pe(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(r,l);return this.ns(r,d,o,u.readTime)?this.Yi(e,Uu(r,null,"F")):this.rs(e,d,r,u)}))})))}Zi(e,r,n,i){return By(r)||i.isEqual(je.min())?ee.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(r,a);return this.ns(r,o,n,i)?ee.resolve(null):(xo()<=Re.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ta(r)),this.rs(e,o,r,BT(i,-1)).next(l=>l))})}ts(e,r){let n=new $t(SN(e));return r.forEach((i,a)=>{_d(e,a)&&(n=n.add(a))}),n}ns(e,r,n,i){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,r,n){return xo()<=Re.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",ta(r)),this.Ji.getDocumentsMatchingQuery(e,r,Fn.min(),n)}rs(e,r,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e,r,n,i){this.persistence=e,this.ss=r,this.serializer=i,this.os=new mt(Oe),this._s=new Qa(a=>ax(a),ox),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function fI(t,e,r,n){return new pI(t,e,r,n)}async function YN(t,e){const r=Ne(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let i;return r.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let u=Pe();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function xI(t,e){const r=Ne(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=r.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,x=m.keys();let j=ee.resolve();return x.forEach(A=>{j=j.next(()=>h.getEntry(u,A)).next(D=>{const S=d.docVersions.get(A);Ye(S!==null),D.version.compareTo(S)<0&&(m.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),h.addEntry(D)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Pe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,i))})}function JN(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function gI(t,e){const r=Ne(t),n=e.snapshotVersion;let i=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});i=r.os;const l=[];e.targetChanges.forEach((h,m)=>{const x=i.get(m);if(!x)return;l.push(r.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>r.Ur.addMatchingKeys(a,h.addedDocuments,m)));let j=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?j=j.withResumeToken(Mt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):h.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(h.resumeToken,n)),i=i.insert(m,j),function(D,S,y){return D.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(x,j,h)&&l.push(r.Ur.updateTargetData(a,j))});let u=Xr(),d=Pe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(yI(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!n.isEqual(je.min())){const h=r.Ur.getLastRemoteSnapshotVersion(a).next(m=>r.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return ee.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(r.os=i,a))}function yI(t,e,r){let n=Pe(),i=Pe();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=Xr();return r.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):he("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function vI(t,e){const r=Ne(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function bI(t,e){const r=Ne(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return r.Ur.getTargetData(n,e).next(a=>a?(i=a,ee.resolve(i)):r.Ur.allocateTargetId(n).next(o=>(i=new wn(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=r.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function Ep(t,e,r){const n=Ne(t),i=n.os.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vl(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function ev(t,e,r){const n=Ne(t);let i=je.min(),a=Pe();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=Ne(u),x=m._s.get(h);return x!==void 0?ee.resolve(m.os.get(x)):m.Ur.getTargetData(d,h)}(n,o,wr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?i:je.min(),r?a:Pe())).next(l=>(wI(n,h5(e),l),{documents:l,Ts:a})))}function wI(t,e,r){let n=t.us.get(e)||je.min();r.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class tv{constructor(){this.activeTargetIds=y5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jI{constructor(){this.so=new tv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new tv,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pc=null;function Bh(){return Pc===null?Pc=function(){return 268435456+Math.round(2147483648*Math.random())}():Pc++,"0x"+Pc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class kI extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(r,n,i,a,o){const l=Bh(),u=this.xo(r,n.toUriEncodedString());he("RestConnection",`Sending RPC '${r}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(r,u,d,i).then(h=>(he("RestConnection",`Received RPC '${r}' ${l}: `,h),h),h=>{throw Ti("RestConnection",`RPC '${r}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(r,n,i,a,o,l){return this.Mo(r,n,i,a,o)}Oo(r,n,i){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>r[o]=a),i&&i.headers.forEach((a,o)=>r[o]=a)}xo(r,n){const i=_I[r];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,i){const a=Bh();return new Promise((o,l)=>{const u=new lN;u.setWithCredentials(!0),u.listenOnce(uN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Jc.NO_ERROR:const h=u.getResponseJson();he(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Jc.TIMEOUT:he(Yt,`RPC '${e}' ${a} timed out`),l(new le(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Jc.HTTP_ERROR:const m=u.getStatus();if(he(Yt,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x==null?void 0:x.error;if(j&&j.status&&j.message){const A=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(j.status);l(new le(A,j.message))}else l(new le(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new le(Q.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{he(Yt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);he(Yt,`RPC '${e}' ${a} sending request:`,i),u.send(r,"POST",d,n,15)})}Bo(e,r,n){const i=Bh(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mN(),l=hN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new cN({})),this.Oo(u.initMessageHeaders,r,n),u.encodeInitMessageHeaders=!0;const h=a.join("");he(Yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let x=!1,j=!1;const A=new EI({Io:S=>{j?he(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(he(Yt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),x=!0),he(Yt,`RPC '${e}' stream ${i} sending:`,S),m.send(S))},To:()=>m.close()}),D=(S,y,w)=>{S.listen(y,_=>{try{w(_)}catch(I){setTimeout(()=>{throw I},0)}})};return D(m,_o.EventType.OPEN,()=>{j||(he(Yt,`RPC '${e}' stream ${i} transport opened.`),A.yo())}),D(m,_o.EventType.CLOSE,()=>{j||(j=!0,he(Yt,`RPC '${e}' stream ${i} transport closed`),A.So())}),D(m,_o.EventType.ERROR,S=>{j||(j=!0,Ti(Yt,`RPC '${e}' stream ${i} transport errored:`,S),A.So(new le(Q.UNAVAILABLE,"The operation could not be completed")))}),D(m,_o.EventType.MESSAGE,S=>{var y;if(!j){const w=S.data[0];Ye(!!w);const _=w,I=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(I){he(Yt,`RPC '${e}' stream ${i} received error:`,I);const M=I.status;let q=function(v){const E=wt[v];if(E!==void 0)return qN(E)}(M),N=I.message;q===void 0&&(q=Q.INTERNAL,N="Unknown error status: "+M+" with message "+I.message),j=!0,A.So(new le(q,N)),m.close()}else he(Yt,`RPC '${e}' stream ${i} received:`,w),A.bo(w)}}),D(l,dN.STAT_EVENT,S=>{S.stat===fp.PROXY?he(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===fp.NOPROXY&&he(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.wo()},0),A}}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return new M5(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,r,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,r-n);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,r,n,i,a,o,l,u){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new XN(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Q.RESOURCE_EXHAUSTED?(Jr(r.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===r&&this.P_(n,i)},n=>{e(()=>{const i=new le(Q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SI extends ZN{constructor(e,r,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=O5(this.serializer,e),n=function(a){if(!("targetChange"in a))return je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?jr(o.readTime):je.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=_p(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=vp(u)?{documents:z5(a,u)}:{query:B5(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=BN(a,o.resumeToken);const d=wp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(je.min())>0){l.readTime=zu(a,o.snapshotVersion.toTimestamp());const d=wp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=G5(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=_p(this.serializer),r.removeTarget=e,this.a_(r)}}class CI extends ZN{constructor(e,r,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=U5(e.writeResults,e.commitTime),n=jr(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=_p(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>q5(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends class{}{constructor(e,r,n,i){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,jp(r,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Q.UNKNOWN,a.toString())})}Lo(e,r,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,jp(r,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class TI{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jr(r),this.D_=!1):he("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,r,n,i,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{Gi(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Ne(u);d.L_.add(4),await ql(d),d.q_.set("Unknown"),d.L_.delete(4),await Ad(d)}(this))})}),this.q_=new TI(n,i)}}async function Ad(t){if(Gi(t))for(const e of t.B_)await e(!0)}async function ql(t){for(const e of t.B_)await e(!1)}function e1(t,e){const r=Ne(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),bx(r)?vx(r):Ka(r).r_()&&yx(r,e))}function gx(t,e){const r=Ne(t),n=Ka(r);r.N_.delete(e),n.r_()&&t1(r,e),r.N_.size===0&&(n.r_()?n.o_():Gi(r)&&r.q_.set("Unknown"))}function yx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ka(t).A_(e)}function t1(t,e){t.Q_.xe(e),Ka(t).R_(e)}function vx(t){t.Q_=new P5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ka(t).start(),t.q_.v_()}function bx(t){return Gi(t)&&!Ka(t).n_()&&t.N_.size>0}function Gi(t){return Ne(t).L_.size===0}function s1(t){t.Q_=void 0}async function PI(t){t.q_.set("Online")}async function RI(t){t.N_.forEach((e,r)=>{yx(t,e)})}async function DI(t,e){s1(t),bx(t)?(t.q_.M_(e),vx(t)):t.q_.set("Unknown")}async function LI(t,e,r){if(t.q_.set("Online"),e instanceof zN&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(n){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Bu(t,n)}else if(e instanceof eu?t.Q_.Ke(e):e instanceof UN?t.Q_.He(e):t.Q_.We(e),!r.isEqual(je.min()))try{const n=await JN(t.localStore);r.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),t1(a,u);const m=new wn(h.target,u,d,h.sequenceNumber);yx(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){he("RemoteStore","Failed to raise snapshot:",n),await Bu(t,n)}}async function Bu(t,e,r){if(!Vl(e))throw e;t.L_.add(1),await ql(t),t.q_.set("Offline"),r||(r=()=>JN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Ad(t)})}function r1(t,e){return e().catch(r=>Bu(t,r,e))}async function Td(t){const e=Ne(t),r=qn(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;MI(e);)try{const i=await vI(e.localStore,n);if(i===null){e.O_.length===0&&r.o_();break}n=i.batchId,VI(e,i)}catch(i){await Bu(e,i)}n1(e)&&i1(e)}function MI(t){return Gi(t)&&t.O_.length<10}function VI(t,e){t.O_.push(e);const r=qn(t);r.r_()&&r.V_&&r.m_(e.mutations)}function n1(t){return Gi(t)&&!qn(t).n_()&&t.O_.length>0}function i1(t){qn(t).start()}async function FI(t){qn(t).p_()}async function OI(t){const e=qn(t);for(const r of t.O_)e.m_(r.mutations)}async function qI(t,e,r){const n=t.O_.shift(),i=dx.from(n,e,r);await r1(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Td(t)}async function UI(t,e){e&&qn(t).V_&&await async function(n,i){if(function(o){return A5(o)&&o!==Q.ABORTED}(i.code)){const a=n.O_.shift();qn(n).s_(),await r1(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Td(n)}}(t,e),n1(t)&&i1(t)}async function rv(t,e){const r=Ne(t);r.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const n=Gi(r);r.L_.add(3),await ql(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Ad(r)}async function zI(t,e){const r=Ne(t);e?(r.L_.delete(2),await Ad(r)):e||(r.L_.add(2),await ql(r),r.q_.set("Unknown"))}function Ka(t){return t.K_||(t.K_=function(r,n,i){const a=Ne(r);return a.w_(),new SI(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:PI.bind(null,t),Ro:RI.bind(null,t),mo:DI.bind(null,t),d_:LI.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),bx(t)?vx(t):t.q_.set("Unknown")):(await t.K_.stop(),s1(t))})),t.K_}function qn(t){return t.U_||(t.U_=function(r,n,i){const a=Ne(r);return a.w_(),new CI(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:FI.bind(null,t),mo:UI.bind(null,t),f_:OI.bind(null,t),g_:qI.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Td(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,r,n,i,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,i,a){const o=Date.now()+n,l=new wx(e,r,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jx(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),Vl(t))return new le(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e){this.comparator=e?(r,n)=>e(r,n)||fe.comparator(r.key,n.key):(r,n)=>fe.comparator(r.key,n.key),this.keyedMap=Eo(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new ka(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const i=r.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new ka;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.W_=new mt(fe.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class qa{constructor(e,r,n,i,a,o,l,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,i,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new qa(e,r,ka.emptySet(r),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(r[i].type!==n[i].type||!r[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $I{constructor(){this.queries=iv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const i=Ne(r),a=i.queries;i.queries=iv(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(n)})})(this,new le(Q.ABORTED,"Firestore shutting down"))}}function iv(){return new Qa(t=>kN(t),Nd)}async function a1(t,e){const r=Ne(t);let n=3;const i=e.query;let a=r.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new BI,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await r.onListen(i,!0);break;case 1:a.z_=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(o){const l=jx(o,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(l)}r.queries.set(i,a),a.j_.push(e),e.Z_(r.onlineState),a.z_&&e.X_(a.z_)&&Nx(r)}async function o1(t,e){const r=Ne(t),n=e.query;let i=3;const a=r.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function GI(t,e){const r=Ne(t);let n=!1;for(const i of e){const a=i.query,o=r.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(n=!0);o.z_=i}}n&&Nx(r)}function WI(t,e,r){const n=Ne(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(r);n.queries.delete(e)}function Nx(t){t.Y_.forEach(e=>{e.next()})}var kp,av;(av=kp||(kp={})).ea="default",av.Cache="cache";class l1{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new qa(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e){this.key=e}}class u1{constructor(e){this.key=e}}class HI{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=SN(e),this.Ra=new ka(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new nv,i=r?r.Ra:this.Ra;let a=r?r.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const x=i.get(h),j=_d(this.query,m)?m:null,A=!!x&&this.mutatedKeys.has(x.key),D=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let S=!1;x&&j?x.data.isEqual(j.data)?A!==D&&(n.track({type:3,doc:j}),S=!0):this.ga(x,j)||(n.track({type:2,doc:j}),S=!0,(u&&this.Aa(j,u)>0||d&&this.Aa(j,d)<0)&&(l=!0)):!x&&j?(n.track({type:0,doc:j}),S=!0):x&&!j&&(n.track({type:1,doc:x}),S=!0,(u||d)&&(l=!0)),S&&(j?(o=o.add(j),a=D?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(j,A){const D=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return D(j)-D(A)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(n),i=i!=null&&i;const l=r&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new qa(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new nv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new u1(n))}),this.da.forEach(n=>{e.has(n)||r.push(new c1(n))}),r}ba(e){this.Ta=e.Ts,this.da=Pe();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return qa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class QI{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class KI{constructor(e){this.key=e,this.va=!1}}class YI{constructor(e,r,n,i,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qa(l=>kN(l),Nd),this.Ma=new Map,this.xa=new Set,this.Oa=new mt(fe.comparator),this.Na=new Map,this.La=new px,this.Ba={},this.ka=new Map,this.qa=Oa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JI(t,e,r=!0){const n=x1(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await d1(n,e,r,!0),i}async function XI(t,e){const r=x1(t);await d1(r,e,!0,!1)}async function d1(t,e,r,n){const i=await bI(t.localStore,wr(e)),a=i.targetId,o=r?t.sharedClientState.addLocalQueryTarget(a):"not-current";let l;return n&&(l=await ZI(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&r&&e1(t.remoteStore,i),l}async function ZI(t,e,r,n,i){t.Ka=(m,x,j)=>async function(D,S,y,w){let _=S.view.ma(y);_.ns&&(_=await ev(D.localStore,S.query,!1).then(({documents:N})=>S.view.ma(N,_)));const I=w&&w.targetChanges.get(S.targetId),M=w&&w.targetMismatches.get(S.targetId)!=null,q=S.view.applyChanges(_,D.isPrimaryClient,I,M);return lv(D,S.targetId,q.wa),q.snapshot}(t,m,x,j);const a=await ev(t.localStore,e,!0),o=new HI(e,a.Ts),l=o.ma(a.documents),u=Ol.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);lv(t,r,d.wa);const h=new QI(e,r,o);return t.Fa.set(e,h),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),d.snapshot}async function eP(t,e,r){const n=Ne(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!Nd(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ep(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&gx(n.remoteStore,i.targetId),Sp(n,i.targetId)}).catch(Ml)):(Sp(n,i.targetId),await Ep(n.localStore,i.targetId,!0))}async function tP(t,e){const r=Ne(t),n=r.Fa.get(e),i=r.Ma.get(n.targetId);r.isPrimaryClient&&i.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),gx(r.remoteStore,n.targetId))}async function sP(t,e,r){const n=cP(t);try{const i=await function(o,l){const u=Ne(o),d=et.now(),h=l.reduce((j,A)=>j.add(A.key),Pe());let m,x;return u.persistence.runTransaction("Locally write mutations","readwrite",j=>{let A=Xr(),D=Pe();return u.cs.getEntries(j,h).next(S=>{A=S,A.forEach((y,w)=>{w.isValidDocument()||(D=D.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(j,A)).next(S=>{m=S;const y=[];for(const w of l){const _=_5(w,m.get(w.key).overlayedDocument);_!=null&&y.push(new Wn(w.key,_,yN(_.value.mapValue),qs.exists(!0)))}return u.mutationQueue.addMutationBatch(j,d,y,l)}).next(S=>{x=S;const y=S.applyToLocalDocumentSet(m,D);return u.documentOverlayCache.saveOverlays(j,S.batchId,y)})}).then(()=>({batchId:x.batchId,changes:AN(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new mt(Oe)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(n,i.batchId,r),await Ul(n,i.changes),await Td(n.remoteStore)}catch(i){const a=jx(i,"Failed to persist write");r.reject(a)}}async function h1(t,e){const r=Ne(t);try{const n=await gI(r.localStore,e);e.targetChanges.forEach((i,a)=>{const o=r.Na.get(a);o&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ye(o.va):i.removedDocuments.size>0&&(Ye(o.va),o.va=!1))}),await Ul(r,n,e)}catch(n){await Ml(n)}}function ov(t,e,r){const n=Ne(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const i=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Ne(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const x of m.j_)x.Z_(l)&&(d=!0)}),d&&Nx(u)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function rP(t,e,r){const n=Ne(t);n.sharedClientState.updateQueryState(e,"rejected",r);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new mt(fe.comparator);o=o.insert(a,Zt.newNoDocument(a,je.min()));const l=Pe().add(a),u=new Sd(je.min(),new Map,new mt(Oe),o,l);await h1(n,u),n.Oa=n.Oa.remove(a),n.Na.delete(e),_x(n)}else await Ep(n.localStore,e,!1).then(()=>Sp(n,e,r)).catch(Ml)}async function nP(t,e){const r=Ne(t),n=e.batch.batchId;try{const i=await xI(r.localStore,e);p1(r,n,null),m1(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ul(r,i)}catch(i){await Ml(i)}}async function iP(t,e,r){const n=Ne(t);try{const i=await function(o,l){const u=Ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ye(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);p1(n,e,r),m1(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await Ul(n,i)}catch(i){await Ml(i)}}function m1(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function p1(t,e,r){const n=Ne(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(r?a.reject(r):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Sp(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||f1(t,n)})}function f1(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(gx(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),_x(t))}function lv(t,e,r){for(const n of r)n instanceof c1?(t.La.addReference(n.key,e),aP(t,n)):n instanceof u1?(he("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||f1(t,n.key)):we()}function aP(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(he("SyncEngine","New document in limbo: "+r),t.xa.add(n),_x(t))}function _x(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new fe(rt.fromString(e)),n=t.qa.next();t.Na.set(n,new KI(r)),t.Oa=t.Oa.insert(r,n),e1(t.remoteStore,new wn(wr(lx(r.path)),n,"TargetPurposeLimboResolution",sx.oe))}}async function Ul(t,e,r){const n=Ne(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,u)=>{o.push(n.Ka(u,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const m=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=xx.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(u,d){const h=Ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ee.forEach(d,x=>ee.forEach(x.$i,j=>h.persistence.referenceDelegate.addReference(m,x.targetId,j)).next(()=>ee.forEach(x.Ui,j=>h.persistence.referenceDelegate.removeReference(m,x.targetId,j)))))}catch(m){if(!Vl(m))throw m;he("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const x=m.targetId;if(!m.fromCache){const j=h.os.get(x),A=j.snapshotVersion,D=j.withLastLimboFreeSnapshotVersion(A);h.os=h.os.insert(x,D)}}}(n.localStore,a))}async function oP(t,e){const r=Ne(t);if(!r.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const n=await YN(r.localStore,e);r.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new le(Q.CANCELLED,o))})}),a.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ul(r,n.hs)}}function lP(t,e){const r=Ne(t),n=r.Na.get(e);if(n&&n.va)return Pe().add(n.key);{let i=Pe();const a=r.Ma.get(e);if(!a)return i;for(const o of a){const l=r.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function x1(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=h1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rP.bind(null,e),e.Ca.d_=GI.bind(null,e.eventManager),e.Ca.$a=WI.bind(null,e.eventManager),e}function cP(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iP.bind(null,e),e}class cv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Cd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return fI(this.persistence,new mI,e.initialUser,this.serializer)}createPersistence(e){return new uI(fx.Zr,this.serializer)}createSharedClientState(e){return new jI}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class uP{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ov(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=oP.bind(null,this.syncEngine),await zI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $I}()}createDatastore(e){const r=Cd(e.databaseInfo.databaseId),n=function(a){return new kI(a)}(e.databaseInfo);return function(a,o,l,u){return new AI(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,i,a,o,l){return new II(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ov(this.syncEngine,r,0),function(){return sv.D()?new sv:new NI}())}createSyncEngine(e,r){return function(i,a,o,l,u,d,h){const m=new YI(i,a,o,l,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(i){const a=Ne(i);he("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await ql(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,r,n,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{he("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=jx(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gh(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await YN(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uv(t,e){t.asyncQueue.verifyOperationInProgress();const r=await mP(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>rv(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>rv(e.remoteStore,i)),t._onlineComponents=e}function hP(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function mP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gh(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!hP(r))throw r;Ti("Error using user provided cache. Falling back to memory cache: "+r),await Gh(t,new cv)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Gh(t,new cv);return t._offlineComponents}async function y1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await uv(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await uv(t,new uP))),t._onlineComponents}function pP(t){return y1(t).then(e=>e.syncEngine)}async function v1(t){const e=await y1(t),r=e.eventManager;return r.onListen=JI.bind(null,e.syncEngine),r.onUnlisten=eP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=XI.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=tP.bind(null,e.syncEngine),r}function fP(t,e,r={}){const n=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new g1({next:x=>{o.enqueueAndForget(()=>o1(a,m));const j=x.docs.has(l);!j&&x.fromCache?d.reject(new le(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&u&&u.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),m=new l1(lx(l.path),h,{includeMetadataChanges:!0,_a:!0});return a1(a,m)}(await v1(t),t.asyncQueue,e,r,n)),n.promise}function xP(t,e,r={}){const n=new Ur;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new g1({next:x=>{o.enqueueAndForget(()=>o1(a,m)),x.fromCache&&u.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(x)},error:x=>d.reject(x)}),m=new l1(l,h,{includeMetadataChanges:!0,_a:!0});return a1(a,m)}(await v1(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t,e,r){if(!r)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j1(t,e,r,n){if(e===!0&&n===!0)throw new le(Q.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hv(t){if(!fe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mv(t){if(fe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Id(t);throw new le(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function gP(t,e){if(e<=0)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b1((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,r,n,i){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new le(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new le(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pv(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new fN;switch(n.type){case"firstParty":return new FT(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=dv.get(r);n&&(he("ComponentProvider","Removing Datastore"),dv.delete(r),n.terminate())}(this),Promise.resolve()}}function N1(t,e,r,n={}){var i;const a=(t=Gs(t,Pd))._getSettings(),o=`${e}:${r}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=Jt.MOCK_USER;else{l=HS(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new le(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Jt(d)}t._authCredentials=new LT(new pN(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nn(this.firestore,e,this._query)}}class es{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class zr extends nn{constructor(e,r,n){super(e,r,lx(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new fe(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function ke(t,e,...r){if(t=it(t),w1("collection","path",e),t instanceof Pd){const n=rt.fromString(e,...r);return mv(n),new zr(t,null,n)}{if(!(t instanceof es||t instanceof zr))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rt.fromString(e,...r));return mv(n),new zr(t.firestore,null,n)}}function be(t,e,...r){if(t=it(t),arguments.length===1&&(e=tx.newId()),w1("doc","path",e),t instanceof Pd){const n=rt.fromString(e,...r);return hv(n),new es(t,null,new fe(n))}{if(!(t instanceof es||t instanceof zr))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(rt.fromString(e,...r));return hv(n),new es(t.firestore,t instanceof zr?t.converter:null,new fe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new XN(this,"async_queue_retry"),this.Eu=()=>{const r=$h();r&&he("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()};const e=$h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const r=$h();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const r=new Ur;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Vl(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const r=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Jr("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Pu=!1,n))));return this.au=r,r}enqueueAfterDelay(e,r,n){this.du(),this.Tu.indexOf(e)>-1&&(r=0);const i=wx.createAndSchedule(this,e,r,n,a=>this.Vu(a));return this.lu.push(i),i}du(){this.hu&&we()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const r of this.lu)if(r.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.lu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const r=this.lu.indexOf(e);this.lu.splice(r,1)}}class Hn extends Pd{constructor(e,r,n,i){super(e,r,n,i),this.type="firestore",this._queue=function(){return new yP}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||E1(this),this._firestoreClient.terminate()}}function _1(t,e){const r=typeof t=="object"?t:zf(),n=typeof t=="string"?t:"(default)",i=zi(r,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=GS("firestore");a&&N1(i,...a)}return i}function Rd(t){return t._firestoreClient||E1(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function E1(t){var e,r,n;const i=t._freezeSettings(),a=function(l,u,d,h){return new JT(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,b1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new dP(t._authCredentials,t._appCheckCredentials,t._queue,a),!((r=i.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ri(Mt.fromBase64String(e))}catch(r){throw new le(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ri(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new le(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new le(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new le(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^__.*__$/;class bP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,r,this.fieldTransforms):new Fl(e,this.data,r,this.fieldTransforms)}}class k1{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Wn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function S1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Ex{constructor(e,r,n,i,a,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.yu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Ex(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Su({path:n,Du:!1});return i.vu(e),i}Cu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),i=this.Su({path:n,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return $u(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(S1(this.wu)&&vP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class wP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Cd(e)}Nu(e,r,n,i=!1){return new Ex({wu:e,methodName:r,Ou:n,path:Dt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Md(t){const e=t._freezeSettings(),r=Cd(t._databaseId);return new wP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function C1(t,e,r,n,i,a={}){const o=t.Nu(a.merge||a.mergeFields?2:0,e,r,i);Cx("Data must be an object, but it was:",o,n);const l=A1(n,o);let u,d;if(a.merge)u=new ks(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const x=Cp(e,m,r);if(!o.contains(x))throw new le(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);I1(h,x)||h.push(x)}u=new ks(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new bP(new ms(l),u,d)}class Vd extends Ya{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Vd}}class kx extends Ya{_toFieldTransform(e){return new VN(e.path,new gl)}isEqual(e){return e instanceof kx}}class Sx extends Ya{constructor(e,r){super(e),this.Bu=r}_toFieldTransform(e){const r=new bl(e.serializer,PN(e.serializer,this.Bu));return new VN(e.path,r)}isEqual(e){return e instanceof Sx&&this.Bu===e.Bu}}function jP(t,e,r,n){const i=t.Nu(1,e,r);Cx("Data must be an object, but it was:",i,n);const a=[],o=ms.empty();$i(n,(u,d)=>{const h=Ax(e,u,r);d=it(d);const m=i.Cu(h);if(d instanceof Vd)a.push(h);else{const x=Bl(d,m);x!=null&&(a.push(h),o.set(h,x))}});const l=new ks(a);return new k1(o,l,i.fieldTransforms)}function NP(t,e,r,n,i,a){const o=t.Nu(1,e,r),l=[Cp(e,n,r)],u=[i];if(a.length%2!=0)throw new le(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)l.push(Cp(e,a[x])),u.push(a[x+1]);const d=[],h=ms.empty();for(let x=l.length-1;x>=0;--x)if(!I1(d,l[x])){const j=l[x];let A=u[x];A=it(A);const D=o.Cu(j);if(A instanceof Vd)d.push(j);else{const S=Bl(A,D);S!=null&&(d.push(j),h.set(j,S))}}const m=new ks(d);return new k1(h,m,o.fieldTransforms)}function _P(t,e,r,n=!1){return Bl(r,t.Nu(n?4:3,e))}function Bl(t,e){if(T1(t=it(t)))return Cx("Unsupported field value:",e,t),A1(t,e);if(t instanceof Ya)return function(n,i){if(!S1(i.wu))throw i.Mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let u=Bl(l,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=it(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return PN(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=et.fromDate(n);return{timestampValue:zu(i.serializer,a)}}if(n instanceof et){const a=new et(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zu(i.serializer,a)}}if(n instanceof Dd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ri)return{bytesValue:BN(i.serializer,n._byteString)};if(n instanceof es){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:mx(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Ld)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Mu("VectorValues must only contain numeric values.");return cx(l.serializer,u)})}}}}}}(n,i);throw i.Mu(`Unsupported field value: ${Id(n)}`)}(t,e)}function A1(t,e){const r={};return xN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$i(t,(n,i)=>{const a=Bl(i,e.bu(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function T1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Dd||t instanceof Ri||t instanceof es||t instanceof Ya||t instanceof Ld)}function Cx(t,e,r){if(!T1(r)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(r)){const n=Id(r);throw n==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+n)}}function Cp(t,e,r){if((e=it(e))instanceof zl)return e._internalPath;if(typeof e=="string")return Ax(t,e);throw $u("Field path arguments must be of type string or ",t,!1,void 0,r)}const EP=new RegExp("[~\\*/\\[\\]]");function Ax(t,e,r){if(e.search(EP)>=0)throw $u(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new zl(...e.split("."))._internalPath}catch{throw $u(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function $u(t,e,r,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${n}`),o&&(u+=` in document ${i}`),u+=")"),new le(Q.INVALID_ARGUMENT,l+t+u)}function I1(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,r,n,i,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class kP extends P1{data(){return super.data()}}function Fd(t,e){return typeof e=="string"?Ax(t,e):e instanceof zl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tx{}class Od extends Tx{}function St(t,e,...r){let n=[];e instanceof Tx&&n.push(e),n=n.concat(r),function(a){const o=a.filter(u=>u instanceof qd).length,l=a.filter(u=>u instanceof $l).length;if(o>1||o>0&&l>0)throw new le(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class $l extends Od{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new $l(e,r,n)}_apply(e){const r=this._parse(e);return R1(e._query,r),new nn(e.firestore,e.converter,bp(e._query,r))}_parse(e){const r=Md(e.firestore);return function(a,o,l,u,d,h,m){let x;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xv(m,h);const j=[];for(const A of m)j.push(fv(u,a,A));x={arrayValue:{values:j}}}else x=fv(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xv(m,h),x=_P(l,o,m,h==="in"||h==="not-in");return Nt.create(d,h,x)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function lr(t,e,r){const n=e,i=Fd("where",t);return $l._create(i,n,r)}class qd extends Tx{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new qd(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:or.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const u of l)R1(o,u),o=bp(o,u)}(e._query,r),new nn(e.firestore,e.converter,bp(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ud extends Od{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Ud(e,r)}_apply(e){const r=function(i,a,o){if(i.startAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(a,o)}(e._query,this._field,this._direction);return new nn(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Ha(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}function Qn(t,e="asc"){const r=e,n=Fd("orderBy",t);return Ud._create(n,r)}class zd extends Od{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new zd(e,r,n)}_apply(e){return new nn(e.firestore,e.converter,Uu(e._query,this._limit,this._limitType))}}function Gu(t){return gP("limit",t),zd._create("limit",t,"F")}function fv(t,e,r){if(typeof(r=it(r))=="string"){if(r==="")throw new le(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EN(e)&&r.indexOf("/")!==-1)throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(rt.fromString(r));if(!fe.isDocumentKey(n))throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Vy(t,new fe(n))}if(r instanceof es)return Vy(t,r._key);throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(r)}.`)}function xv(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R1(t,e){const r=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class D1{convertValue(e,r="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return $i(e,(i,a)=>{n[i]=this.convertValue(a,r)}),n}convertVectorValue(e){var r,n,i;const a=(i=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>yt(o.doubleValue));return new Ld(a)}convertGeoPoint(e){return new Dd(yt(e.latitude),yt(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=nx(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const r=On(e);return new et(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=rt.fromString(e);Ye(KN(n));const i=new Ma(n.get(1),n.get(3)),a=new fe(n.popFirst(5));return i.isEqual(r)||Jr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ix extends P1{constructor(e,r,n,i,a,o){super(e,r,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Uo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class Uo extends Ix{data(e={}){return super.data(e)}}class M1{constructor(e,r,n,i){this._firestore=e,this._userDataWriter=r,this._snapshot=i,this.metadata=new xa(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Uo(this._firestore,this._userDataWriter,n.key,n,new xa(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new le(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Uo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new xa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Uo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new xa(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:CP(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function CP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){t=Gs(t,es);const e=Gs(t.firestore,Hn);return fP(Rd(e),t._key).then(r=>AP(e,t,r))}class V1 extends D1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,r)}}function Xe(t){t=Gs(t,nn);const e=Gs(t.firestore,Hn),r=Rd(e),n=new V1(e);return SP(t._query),xP(r,t._query).then(i=>new M1(e,n,t,i))}function ps(t,e,r){t=Gs(t,es);const n=Gs(t.firestore,Hn),i=L1(t.converter,e,r);return Gl(n,[C1(Md(n),"setDoc",t._key,i,t.converter!==null,r).toMutation(t._key,qs.none())])}function ts(t,e,r,...n){t=Gs(t,es);const i=Gs(t.firestore,Hn),a=Md(i);let o;return o=typeof(e=it(e))=="string"||e instanceof zl?NP(a,"updateDoc",t._key,e,r,n):jP(a,"updateDoc",t._key,e),Gl(i,[o.toMutation(t._key,qs.exists(!0))])}function Dn(t){return Gl(Gs(t.firestore,Hn),[new ux(t._key,qs.none())])}function zt(t,e){const r=Gs(t.firestore,Hn),n=be(t),i=L1(t.converter,e);return Gl(r,[C1(Md(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,qs.exists(!1))]).then(()=>n)}function Gl(t,e){return function(n,i){const a=new Ur;return n.asyncQueue.enqueueAndForget(async()=>sP(await pP(n),i,a)),a.promise}(Rd(t),e)}function AP(t,e,r){const n=r.docs.get(e._key),i=new V1(t);return new Ix(t,i,e._key,n,new xa(r.hasPendingWrites,r.fromCache),e.converter)}function is(){return new kx("serverTimestamp")}function F1(t){return new Sx("increment",t)}(function(e,r=!0){(function(i){Wa=i})(Ga),Nr(new ar("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new Hn(new MT(n.getProvider("auth-internal")),new qT(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(d.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Os(Py,"4.7.0",e),Os(Py,"4.7.0","esm2017")})();const O1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:D1,Bytes:Ri,CollectionReference:zr,DocumentReference:es,DocumentSnapshot:Ix,FieldPath:zl,FieldValue:Ya,Firestore:Hn,FirestoreError:le,GeoPoint:Dd,Query:nn,QueryCompositeFilterConstraint:qd,QueryConstraint:Od,QueryDocumentSnapshot:Uo,QueryFieldFilterConstraint:$l,QueryLimitConstraint:zd,QueryOrderByConstraint:Ud,QuerySnapshot:M1,SnapshotMetadata:xa,Timestamp:et,VectorValue:Ld,_AutoId:tx,_ByteString:Mt,_DatabaseId:Ma,_DocumentKey:fe,_EmptyAuthCredentialsProvider:fN,_FieldPath:Dt,_cast:Gs,_logWarn:Ti,_validateIsNotUsedTogether:j1,addDoc:zt,collection:ke,connectFirestoreEmulator:N1,deleteDoc:Dn,doc:be,ensureFirestoreConfigured:Rd,executeWrite:Gl,getDoc:xt,getDocs:Xe,getFirestore:_1,increment:F1,limit:Gu,orderBy:Qn,query:St,serverTimestamp:is,setDoc:ps,updateDoc:ts,where:lr},Symbol.toStringTag,{value:"Module"})),q1="@firebase/installations",Px="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=1e4,z1=`w:${Px}`,B1="FIS_v2",TP="https://firebaseinstallations.googleapis.com/v1",IP=60*60*1e3,PP="installations",RP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Di=new Ui(PP,RP,DP);function $1(t){return t instanceof hr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1({projectId:t}){return`${TP}/projects/${t}/installations`}function W1(t){return{token:t.token,requestStatus:2,expiresIn:MP(t.expiresIn),creationTime:Date.now()}}async function H1(t,e){const n=(await e.json()).error;return Di.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Q1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function LP(t,{refreshToken:e}){const r=Q1(t);return r.append("Authorization",VP(e)),r}async function K1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function MP(t){return Number(t.replace("s","000"))}function VP(t){return`${B1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=G1(t),i=Q1(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:r,authVersion:B1,appId:t.appId,sdkVersion:z1},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await K1(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||r,registrationStatus:2,refreshToken:d.refreshToken,authToken:W1(d.authToken)}}else throw await H1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=/^[cdef][\w-]{21}$/,Ap="";function UP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=zP(t);return qP.test(r)?r:Ap}catch{return Ap}}function zP(t){return OP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=new Map;function X1(t,e){const r=Bd(t);Z1(r,e),BP(r,e)}function Z1(t,e){const r=J1.get(t);if(r)for(const n of r)n(e)}function BP(t,e){const r=$P();r&&r.postMessage({key:t,fid:e}),GP()}let pi=null;function $P(){return!pi&&"BroadcastChannel"in self&&(pi=new BroadcastChannel("[Firebase] FID Change"),pi.onmessage=t=>{Z1(t.data.key,t.data.fid)}),pi}function GP(){J1.size===0&&pi&&(pi.close(),pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP="firebase-installations-database",HP=1,Li="firebase-installations-store";let Wh=null;function Rx(){return Wh||(Wh=vj(WP,HP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Li)}}})),Wh}async function Wu(t,e){const r=Bd(t),i=(await Rx()).transaction(Li,"readwrite"),a=i.objectStore(Li),o=await a.get(r);return await a.put(e,r),await i.done,(!o||o.fid!==e.fid)&&X1(t,e.fid),e}async function e2(t){const e=Bd(t),n=(await Rx()).transaction(Li,"readwrite");await n.objectStore(Li).delete(e),await n.done}async function $d(t,e){const r=Bd(t),i=(await Rx()).transaction(Li,"readwrite"),a=i.objectStore(Li),o=await a.get(r),l=e(o);return l===void 0?await a.delete(r):await a.put(l,r),await i.done,l&&(!o||o.fid!==l.fid)&&X1(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t){let e;const r=await $d(t.appConfig,n=>{const i=QP(n),a=KP(t,i);return e=a.registrationPromise,a.installationEntry});return r.fid===Ap?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function QP(t){const e=t||{fid:UP(),registrationStatus:0};return t2(e)}function KP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Di.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=YP(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:JP(t)}:{installationEntry:e}}async function YP(t,e){try{const r=await FP(t,e);return Wu(t.appConfig,r)}catch(r){throw $1(r)&&r.customData.serverCode===409?await e2(t.appConfig):await Wu(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function JP(t){let e=await gv(t.appConfig);for(;e.registrationStatus===1;)await Y1(100),e=await gv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await Dx(t);return n||r}return e}function gv(t){return $d(t,e=>{if(!e)throw Di.create("installation-not-found");return t2(e)})}function t2(t){return XP(t)?{fid:t.fid,registrationStatus:0}:t}function XP(t){return t.registrationStatus===1&&t.registrationTime+U1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP({appConfig:t,heartbeatServiceProvider:e},r){const n=e3(t,r),i=LP(t,r),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:z1,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await K1(()=>fetch(n,l));if(u.ok){const d=await u.json();return W1(d)}else throw await H1("Generate Auth Token",u)}function e3(t,{fid:e}){return`${G1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(t,e=!1){let r;const n=await $d(t.appConfig,a=>{if(!s2(a))throw Di.create("not-registered");const o=a.authToken;if(!e&&r3(o))return a;if(o.requestStatus===1)return r=t3(t,e),a;{if(!navigator.onLine)throw Di.create("app-offline");const l=i3(a);return r=s3(t,l),l}});return r?await r:n.authToken}async function t3(t,e){let r=await yv(t.appConfig);for(;r.authToken.requestStatus===1;)await Y1(100),r=await yv(t.appConfig);const n=r.authToken;return n.requestStatus===0?Lx(t,e):n}function yv(t){return $d(t,e=>{if(!s2(e))throw Di.create("not-registered");const r=e.authToken;return a3(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function s3(t,e){try{const r=await ZP(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await Wu(t.appConfig,n),r}catch(r){if($1(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await e2(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wu(t.appConfig,n)}throw r}}function s2(t){return t!==void 0&&t.registrationStatus===2}function r3(t){return t.requestStatus===2&&!n3(t)}function n3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+IP}function i3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function a3(t){return t.requestStatus===1&&t.requestTime+U1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(t){const e=t,{installationEntry:r,registrationPromise:n}=await Dx(e);return n?n.catch(console.error):Lx(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(t,e=!1){const r=t;return await c3(r),(await Lx(r,e)).token}async function c3(t){const{registrationPromise:e}=await Dx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(t){if(!t||!t.options)throw Hh("App Configuration");if(!t.name)throw Hh("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw Hh(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Hh(t){return Di.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="installations",d3="installations-internal",h3=t=>{const e=t.getProvider("app").getImmediate(),r=u3(e),n=zi(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},m3=t=>{const e=t.getProvider("app").getImmediate(),r=zi(e,r2).getImmediate();return{getId:()=>o3(r),getToken:i=>l3(r,i)}};function p3(){Nr(new ar(r2,h3,"PUBLIC")),Nr(new ar(d3,m3,"PRIVATE"))}p3();Os(q1,Px);Os(q1,Px,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu="analytics",f3="firebase_id",x3="origin",g3=60*1e3,y3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new yd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Cs=new Ui("analytics","Analytics",v3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){if(!t.startsWith(Mx)){const e=Cs.create("invalid-gtag-resource",{gtagURL:t});return bs.warn(e.message),""}return t}function n2(t){return Promise.all(t.map(e=>e.catch(r=>r)))}function w3(t,e){let r;return window.trustedTypes&&(r=window.trustedTypes.createPolicy(t,e)),r}function j3(t,e){const r=w3("firebase-js-sdk-policy",{createScriptURL:b3}),n=document.createElement("script"),i=`${Mx}?l=${t}&id=${e}`;n.src=r?r==null?void 0:r.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function N3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _3(t,e,r,n,i,a){const o=n[i];try{if(o)await e[o];else{const u=(await n2(r)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(l){bs.error(l)}t("config",i,a)}async function E3(t,e,r,n,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await n2(r);for(const u of o){const d=l.find(m=>m.measurementId===u),h=d&&e[d.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,i||{})}catch(a){bs.error(a)}}function k3(t,e,r,n){async function i(a,...o){try{if(a==="event"){const[l,u]=o;await E3(t,e,r,l,u)}else if(a==="config"){const[l,u]=o;await _3(t,e,r,n,l,u)}else if(a==="consent"){const[l,u]=o;t("consent",l,u)}else if(a==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){bs.error(l)}}return i}function S3(t,e,r,n,i){let a=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=k3(a,t,e,r),{gtagCore:a,wrappedGtag:window[i]}}function C3(t){const e=window.document.getElementsByTagName("script");for(const r of Object.values(e))if(r.src&&r.src.includes(Mx)&&r.src.includes(t))return r;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=30,T3=1e3;class I3{constructor(e={},r=T3){this.throttleMetadata=e,this.intervalMillis=r}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,r){this.throttleMetadata[e]=r}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const i2=new I3;function P3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function R3(t){var e;const{appId:r,apiKey:n}=t,i={method:"GET",headers:P3(n)},a=y3.replace("{app-id}",r),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Cs.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function D3(t,e=i2,r){const{appId:n,apiKey:i,measurementId:a}=t.options;if(!n)throw Cs.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:n};throw Cs.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new V3;return setTimeout(async()=>{l.abort()},g3),a2({appId:n,apiKey:i,measurementId:a},o,l,e)}async function a2(t,{throttleEndTimeMillis:e,backoffCount:r},n,i=i2){var a;const{appId:o,measurementId:l}=t;try{await L3(n,e)}catch(u){if(l)return bs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await R3(t);return i.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!M3(d)){if(i.deleteThrottleMetadata(o),l)return bs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const h=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?ty(r,i.intervalMillis,A3):ty(r,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:r+1};return i.setThrottleMetadata(o,m),bs.debug(`Calling attemptFetch again in ${h} millis`),a2(t,m,n,i)}}function L3(t,e){return new Promise((r,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(r,i);t.addEventListener(()=>{clearTimeout(a),n(Cs.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function M3(t){if(!(t instanceof hr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class V3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function F3(t,e,r,n,i){if(i&&i.global){t("event",r,n);return}else{const a=await e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",r,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(){if(Of())try{await qf()}catch(t){return bs.warn(Cs.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return bs.warn(Cs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function q3(t,e,r,n,i,a,o){var l;const u=D3(t);u.then(j=>{r[j.measurementId]=j.appId,t.options.measurementId&&j.measurementId!==t.options.measurementId&&bs.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${j.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(j=>bs.error(j)),e.push(u);const d=O3().then(j=>{if(j)return n.getId()}),[h,m]=await Promise.all([u,d]);C3(a)||j3(a,h.measurementId),i("js",new Date);const x=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return x[x3]="firebase",x.update=!0,m!=null&&(x[f3]=m),i("config",h.measurementId,x),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.app=e}_delete(){return delete zo[this.app.options.appId],Promise.resolve()}}let zo={},vv=[];const bv={};let Qh="dataLayer",z3="gtag",wv,o2,jv=!1;function B3(){const t=[];if(Ff()&&t.push("This is a browser extension environment."),xj()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),r=Cs.create("invalid-analytics-context",{errorInfo:e});bs.warn(r.message)}}function $3(t,e,r){B3();const n=t.options.appId;if(!n)throw Cs.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)bs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Cs.create("no-api-key");if(zo[n]!=null)throw Cs.create("already-exists",{id:n});if(!jv){N3(Qh);const{wrappedGtag:a,gtagCore:o}=S3(zo,vv,bv,Qh,z3);o2=a,wv=o,jv=!0}return zo[n]=q3(t,vv,bv,e,wv,Qh,r),new U3(t)}function G3(t=zf()){t=it(t);const e=zi(t,Hu);return e.isInitialized()?e.getImmediate():W3(t)}function W3(t,e={}){const r=zi(t,Hu);if(r.isInitialized()){const i=r.getImmediate();if(ul(e,r.getOptions()))return i;throw Cs.create("already-initialized")}return r.initialize({options:e})}async function H3(){if(Ff()||!xj()||!Of())return!1;try{return await qf()}catch{return!1}}function Q3(t,e,r,n){t=it(t),F3(o2,zo[t.app.options.appId],e,r,n).catch(i=>bs.error(i))}const Nv="@firebase/analytics",_v="0.10.7";function K3(){Nr(new ar(Hu,(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return $3(n,i,r)},"PUBLIC")),Nr(new ar("analytics-internal",t,"PRIVATE")),Os(Nv,_v),Os(Nv,_v,"esm2017");function t(e){try{const r=e.getProvider(Hu).getImmediate();return{logEvent:(n,i,a)=>Q3(r,n,i,a)}}catch(r){throw Cs.create("interop-component-reg-failed",{reason:r})}}}K3();const Y3={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},Vx=bj(Y3),re=_1(Vx),Pt=IT(Vx);typeof window<"u"&&H3().then(t=>{t&&G3(Vx)});const l2=g.createContext(void 0),Ce=()=>{const t=g.useContext(l2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Kh=async t=>{var n,i;if(!t)return null;const r=(await xt(be(re,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(r==null?void 0:r.displayName)||((n=t.email)==null?void 0:n.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(r==null?void 0:r.isAdmin)||!1,isSuperAdmin:(r==null?void 0:r.isSuperAdmin)||!1,isEditor:(r==null?void 0:r.isEditor)||!1,photoURL:t.photoURL||(r==null?void 0:r.photoURL),createdAt:(i=r==null?void 0:r.createdAt)==null?void 0:i.toDate()}},J3=({children:t})=>{const[e,r]=g.useState(null),[n,i]=g.useState(!0);g.useEffect(()=>{const D=bA(Pt,async S=>{if(S){const y=be(re,"users",S.uid);if(!(await xt(y)).exists()){const I={uid:S.uid,email:S.email||"",emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),...S.displayName?{displayName:S.displayName}:{},...S.photoURL?{photoURL:S.photoURL}:{}};await ps(y,I)}const _=await Kh(S);r(_)}else r(null);i(!1)});return()=>D()},[]);const A={currentUser:e,loading:n,register:async(D,S,y)=>{try{const w=await Hj(Pt,D,S),{user:_}=w;await Kj(_,{displayName:y}),await by(_);const I={uid:_.uid,email:_.email||"",emailVerified:_.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),updatedAt:is(),...y?{displayName:y}:{},..._.photoURL?{photoURL:_.photoURL}:{}};await ps(be(re,"users",_.uid),I);const M=await Kh(_);return r(M),_}catch(w){throw console.error("Erreur lors de l'inscription:",w),w}},login:async(D,S)=>{try{const w=(await Qj(Pt,D,S)).user,_=be(re,"users",w.uid);(await xt(_)).exists()||await ps(_,{uid:w.uid,email:w.email,displayName:w.displayName,emailVerified:w.emailVerified,isAdmin:!1,createdAt:is(),photoURL:w.photoURL??void 0});const M=await Kh(w);return r(M),M}catch(y){throw console.error("Erreur de connexion:",y),y}},loginWithGoogle:async()=>{var y,w;const D=new Pr;let S=null;try{S=(await Ny(Pt,D)).user,console.log("[Google] Utilisateur connecté:",S);const I=be(re,"users",S.uid);let M;try{if(M=await xt(I),console.log("[Google] Document utilisateur existe:",M.exists()),!M.exists())try{await ps(I,{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),photoURL:S.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore")}catch(N){console.error("[Google] Erreur lors de la création du document utilisateur:",N)}}catch(N){console.error("[Google] Erreur lors de la vérification du document utilisateur:",N),M={exists:()=>!1,data:()=>({isAdmin:!1,isEditor:!1})}}const q={uid:S.uid,email:S.email||"",displayName:S.displayName||"",emailVerified:S.emailVerified,isAdmin:M.exists()?((y=M.data())==null?void 0:y.isAdmin)??!1:!1,isEditor:M.exists()?((w=M.data())==null?void 0:w.isEditor)??!1:!1,createdAt:S.metadata.creationTime?new Date(S.metadata.creationTime):void 0,photoURL:S.photoURL??void 0};return console.log("[Google] AppUser retourné:",q),q}catch(_){throw console.error("[Google] Erreur dans loginWithGoogle:",_,S),_}},loginWithGithub:async()=>{var y,w;const D=new Rr;let S=null;try{S=(await Ny(Pt,D)).user,console.log("[GitHub] Utilisateur connecté:",S);const I=be(re,"users",S.uid);let M;try{if(M=await xt(I),console.log("[GitHub] Document utilisateur existe:",M.exists()),!M.exists())try{await ps(I,{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),photoURL:S.photoURL??void 0}),console.log("[GitHub] Document utilisateur créé dans Firestore")}catch(N){console.error("[GitHub] Erreur lors de la création du document utilisateur:",N)}}catch(N){console.error("[GitHub] Erreur lors de la vérification du document utilisateur:",N),M={exists:()=>!1,data:()=>({isAdmin:!1,isEditor:!1})}}const q={uid:S.uid,email:S.email||"",displayName:S.displayName||"",emailVerified:S.emailVerified,isAdmin:M.exists()?((y=M.data())==null?void 0:y.isAdmin)??!1:!1,isEditor:M.exists()?((w=M.data())==null?void 0:w.isEditor)??!1:!1,createdAt:S.metadata.creationTime?new Date(S.metadata.creationTime):void 0,photoURL:S.photoURL??void 0};return console.log("[GitHub] AppUser retourné:",q),q}catch(_){throw console.error("[GitHub] Erreur dans loginWithGithub:",_,S),_}},logout:async()=>{try{await wA(Pt),r(null)}catch(D){throw console.error("Erreur lors de la déconnexion:",D),D}},isAdmin:()=>!!(e&&e.isAdmin),isEditor:()=>!!(e&&e.isEditor),isSuperAdmin:async()=>{if(!e)return!1;try{const D=be(re,"users",e.uid),S=await xt(D);return S.exists()&&S.data().isSuperAdmin||!1}catch(D){return console.error("Erreur lors de la vérification du statut superadmin:",D),!1}},sendVerificationEmail:async()=>{if(Pt.currentUser)try{await by(Pt.currentUser)}catch(D){throw console.error("Erreur lors de l'envoi de l'email de vérification:",D),D}}};return s.jsx(l2.Provider,{value:A,children:t})},c2=g.createContext(void 0),Wi=()=>{const t=g.useContext(c2);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},X3=({children:t})=>{const[e,r]=g.useState([]),[n,i]=g.useState([]),[a,o]=g.useState([]),[l,u]=g.useState(!0);g.useEffect(()=>{(async()=>{u(!0);const v=await Xe(ke(re,"guideSections"));i(v.docs.map(P=>({id:P.id,...P.data()})));const E=await Xe(ke(re,"resources"));r(E.docs.map(P=>({id:P.id,...P.data()})));const C=await Xe(ke(re,"faq"));o(C.docs.map(P=>({id:P.id,...P.data()}))),u(!1)})()},[]);const d=async()=>{const f=await Xe(ke(re,"guideSections"));i(f.docs.map(C=>({id:C.id,...C.data()})));const v=await Xe(ke(re,"resources"));r(v.docs.map(C=>({id:C.id,...C.data()})));const E=await Xe(ke(re,"faq"));o(E.docs.map(C=>({id:C.id,...C.data()})))},N={resources:e,guideSections:n,faqItems:a,addResource:async f=>{await zt(ke(re,"resources"),f),await d()},updateResource:async(f,v)=>{await ts(be(re,"resources",f),v),await d()},deleteResource:async f=>{await Dn(be(re,"resources",f)),await d()},addGuideSection:async f=>{const v={...f};(!f.subSections||f.subSections.length===0)&&delete v.subSections,await zt(ke(re,"guideSections"),v),await d()},updateGuideSection:async(f,v)=>{const E={...v};"subSections"in E&&(!E.subSections||E.subSections.length===0)&&delete E.subSections,await ts(be(re,"guideSections",f),E),await d()},deleteGuideSection:async f=>{await Dn(be(re,"guideSections",f)),await d()},addFAQItem:async f=>{await zt(ke(re,"faq"),f),await d()},updateFAQItem:async(f,v)=>{await ts(be(re,"faq",f),v),await d()},deleteFAQItem:async f=>{await Dn(be(re,"faq",f)),await d()},getResourcesByPhase:f=>e.filter(v=>v.phase===f),getGuideSectionsByPhase:f=>n.filter(v=>v.phase===f).sort((v,E)=>v.order-E.order),getFAQItemsByPhase:f=>a.filter(v=>v.phase===f),searchResources:f=>{const v=f.toLowerCase();return e.filter(E=>E.title.toLowerCase().includes(v)||E.description.toLowerCase().includes(v)||E.category.toLowerCase().includes(v))}};return l?s.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):s.jsx(c2.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Z3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const r=g.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>g.createElement("svg",{ref:h,...Z3,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${eR(t)}`,l].join(" "),...d},[...e.map(([m,x])=>g.createElement(m,x)),...Array.isArray(u)?u:[u]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=K("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=K("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=K("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=K("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=K("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=K("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=K("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=K("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=K("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=K("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=K("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=K("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=K("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=K("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=K("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=K("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=K("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=K("Copyright",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=K("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=K("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=K("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=K("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=K("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=K("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=K("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=K("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=K("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=K("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=K("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=K("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=K("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=K("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=K("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=K("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=K("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rp=K("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=K("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=K("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=K("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=K("Podcast",[["circle",{cx:"12",cy:"11",r:"1",key:"1gvufo"}],["path",{d:"M11 17a1 1 0 0 1 2 0c0 .5-.34 3-.5 4.5a.5.5 0 0 1-1 0c-.16-1.5-.5-4-.5-4.5Z",key:"1n5fvv"}],["path",{d:"M8 14a5 5 0 1 1 8 0",key:"fc81rn"}],["path",{d:"M17 18.5a9 9 0 1 0-10 0",key:"jqtxkf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dp=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=K("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=K("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=K("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=K("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=K("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=K("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=K("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=K("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=K("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=K("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=K("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Lp=({children:t,fallback:e=null})=>{const{currentUser:r,isAdmin:n}=Ce(),[i,a]=g.useState(!1),[o,l]=g.useState(!0);return g.useEffect(()=>{(async()=>{if(!r||!n()){a(!1),l(!1);return}try{const d=be(re,"users",r.uid),h=await xt(d);h.exists()&&h.data().isSuperAdmin?a(!0):a(!1)}catch(d){console.error("Erreur lors de la vérification du statut superadmin:",d),a(!1)}finally{l(!1)}})()},[r,n]),o?null:i?s.jsx(s.Fragment,{children:t}):s.jsx(s.Fragment,{children:e})},UR=()=>{var x,j;const{currentUser:t,logout:e,isAdmin:r,isEditor:n}=Ce(),[i,a]=g.useState(!1),[o,l]=g.useState(!1),[u,d]=g.useState(!1),h=dr();g.useEffect(()=>{const A=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",A),()=>window.removeEventListener("scroll",A)},[]),g.useEffect(()=>{a(!1),l(!1)},[h]);const m=async()=>{try{await e()}catch(A){console.error("Logout failed",A)}};return s.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${u?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:s.jsxs("div",{className:"container mx-auto px-4 py-3",children:[s.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[s.jsx(Y,{to:"/",className:"flex items-center",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),s.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${u?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),s.jsx("nav",{className:"hidden md:flex items-center md:space-x-4 lg:space-x-8",children:t&&s.jsxs(s.Fragment,{children:[s.jsxs(Y,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(Ku,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"md:hidden lg:inline",children:"Tableau de bord"}),s.jsx("span",{className:"md:inline lg:hidden",children:"Accueil"})]}),s.jsxs(Y,{to:"/applications",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(Ev,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Applications"})]}),s.jsxs(Y,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(Ke,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Ressources"})]}),s.jsxs(Y,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(lt,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"FAQ"})]}),s.jsxs(Y,{to:"/tutorial",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(Tp,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Tutoriel"})]}),s.jsxs(Y,{to:"/help",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(ur,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Aide"})]}),s.jsx(Lp,{children:s.jsxs(Y,{to:"/chat-ai",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[s.jsx(wl,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Assistant IA"})]})}),r()&&s.jsxs(Y,{to:"/admin",className:`flex items-center text-white bg-blue-700 hover:bg-blue-600 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 shadow-sm ${h.pathname.startsWith("/admin")?"bg-blue-600":""}`,children:[s.jsx(qt,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Admin"})]}),n()&&!r()&&s.jsxs(Y,{to:"/editor",className:`flex items-center text-white bg-green-700 hover:bg-green-600 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 shadow-sm ${h.pathname.startsWith("/editor")?"bg-green-600":""}`,children:[s.jsx($r,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Édition"})]})]})}),s.jsx("div",{className:"hidden md:flex items-center",children:t?s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>l(!o),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${u?"text-blue-800":"text-white"}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:s.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),s.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),s.jsx(Ln,{className:"w-4 h-4"})]}),o&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[s.jsxs(Y,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(Ts,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Profil"})]}),r()&&s.jsxs(Y,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(Yu,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Administration"})]}),n()&&!r()&&s.jsxs(Y,{to:"/editor",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx($r,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Edition"})]}),s.jsxs("button",{onClick:m,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[s.jsx(kv,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Déconnexion"})]})]})]}):s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(Y,{to:"/login",className:`font-medium transition-colors duration-300 ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),s.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),s.jsx("button",{className:"md:hidden",onClick:()=>a(!i),children:i?s.jsx(Ct,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`}):s.jsx(TR,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`})})]}),i&&s.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-gradient-to-r from-blue-900 to-blue-800 shadow-lg pb-4",children:s.jsx("div",{className:"container mx-auto px-4 py-2",children:t?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"py-3 px-2 mb-3 flex items-center border-b border-blue-700",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:s.jsx("span",{className:"text-blue-800 font-medium text-sm",children:((x=t.displayName)==null?void 0:x.charAt(0))||((j=t.email)==null?void 0:j.charAt(0))||"U"})}),s.jsx("span",{className:"text-white font-medium",children:t.displayName||t.email||"Utilisateur"})]}),s.jsxs(Y,{to:"/profile",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Profil"]}),s.jsxs(Y,{to:"/dashboard",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(Ku,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Tableau de bord"})]}),s.jsxs(Y,{to:"/applications",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(Ev,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Applications"})]}),s.jsxs(Y,{to:"/resources",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(Ke,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Ressources"})]}),s.jsxs(Y,{to:"/faq",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(lt,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"FAQ"})]}),s.jsxs(Y,{to:"/tutorial",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(Tp,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Tutoriel"})]}),s.jsxs(Y,{to:"/help",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(ur,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Aide"})]}),s.jsx(Lp,{children:s.jsxs(Y,{to:"/chat-ai",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[s.jsx(wl,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Assistant IA"})]})}),r()&&s.jsxs(Y,{to:"/admin",className:"flex items-center px-3 py-1.5 my-2 rounded-full bg-blue-700 hover:bg-blue-600 text-white transition-colors shadow-md",onClick:()=>a(!1),children:[s.jsx(qt,{className:"w-4 h-4 mr-1.5"}),s.jsx("span",{children:"Administration"})]}),n()&&!r()&&s.jsxs(Y,{to:"/editor",className:"flex items-center px-3 py-1.5 my-2 rounded-full bg-green-700 hover:bg-green-600 text-white transition-colors shadow-md",onClick:()=>a(!1),children:[s.jsx($r,{className:"w-4 h-4 mr-1.5"}),s.jsx("span",{children:"Edition"})]}),s.jsxs("button",{onClick:m,className:"flex items-center py-2 text-white",children:[s.jsx(kv,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Déconnexion"})]})]}):s.jsxs("div",{className:"flex flex-col space-y-4",children:[s.jsx(Y,{to:"/login",className:"font-medium text-white",onClick:()=>a(!1),children:"Connexion"}),s.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",onClick:()=>a(!1),children:"Inscription"})]})})})]})})},zR=()=>s.jsx("div",{className:"bg-gray-100 py-3 border-t border-gray-200",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-wrap justify-center text-xs text-gray-500 gap-4",children:[s.jsx(Y,{to:"/legal/cgu",className:"hover:text-gray-700 hover:underline",children:"Conditions Générales d'Utilisation"}),s.jsx(Y,{to:"/legal/privacy-policy",className:"hover:text-gray-700 hover:underline",children:"Politique de Confidentialité"}),s.jsx(Y,{to:"/legal/legal-notice",className:"hover:text-gray-700 hover:underline",children:"Mentions Légales"}),s.jsx(Y,{to:"/legal/moderation-charter",className:"hover:text-gray-700 hover:underline",children:"Charte de Modération"}),s.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),localStorage.removeItem("cookieConsent"),window.location.reload()},className:"hover:text-gray-700 hover:underline cursor-pointer",children:"Paramètres des cookies"})]})})}),BR=()=>{const t=new Date().getFullYear();return s.jsxs("footer",{className:"bg-blue-900 text-white",children:[s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"col-span-1 md:col-span-1",children:[s.jsxs(Y,{to:"/",className:"flex items-center",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:s.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),s.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),s.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Y,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),s.jsx("li",{children:s.jsx(Y,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),s.jsx("li",{children:s.jsx(Y,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})}),s.jsx("li",{children:s.jsx(Y,{to:"/feedback",className:"text-blue-200 hover:text-white transition-colors",children:"Feedback"})})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx(Y,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),s.jsx("li",{children:s.jsx(Y,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),s.jsx("li",{children:s.jsx(Y,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),s.jsxs("div",{className:"col-span-1",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(Br,{className:"w-4 h-4 mr-2"}),s.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),s.jsxs("div",{className:"flex space-x-4 mt-4",children:[s.jsx("a",{href:"https://www.linkedin.com/in/abdoul-ahad-mback%C3%A9-diouf-5b04b4213/",className:"text-blue-200 hover:text-white transition-colors",children:s.jsx(CR,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://github.com/AbdoulDiouf2",className:"text-blue-200 hover:text-white transition-colors",children:s.jsx(jR,{className:"w-5 h-5"})})]})]})]}),s.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),s.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",s.jsx(NR,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF - PROMO CPS 2020/2022"]})]})]}),s.jsx(zR,{})]})},Ns=({children:t})=>{const{currentUser:e,loading:r,isAdmin:n}=Ce();return r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?n()?s.jsx(s.Fragment,{children:t}):s.jsx(cl,{to:"/dashboard"}):s.jsx(cl,{to:"/login"})},go=({children:t})=>{const{currentUser:e,isAdmin:r}=Ce(),[n,i]=g.useState(null),[a,o]=g.useState(!0);return g.useEffect(()=>{(async()=>{if(!e||!r()){i(!1),o(!1);return}try{const u=be(re,"users",e.uid),d=await xt(u);d.exists()&&d.data().isSuperAdmin?i(!0):i(!1)}catch(u){console.error("Erreur lors de la vérification du statut superadmin:",u),i(!1)}finally{o(!1)}})()},[e,r]),a?s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700 mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Vérification des autorisations..."})]}):n?s.jsx(s.Fragment,{children:t}):s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[s.jsx(qt,{className:"w-16 h-16 text-red-500 mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Accès refusé"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Cette page est réservée aux super administrateurs."}),s.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retour"})]})},fr=({children:t})=>{const{currentUser:e,loading:r,isEditor:n,isAdmin:i}=Ce();return r?s.jsx("div",{className:"flex justify-center items-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?!n()&&!i()?s.jsx(cl,{to:"/"}):s.jsx(s.Fragment,{children:t}):s.jsx(cl,{to:"/login"})},$R=()=>{const[t,e]=g.useState({essential:!0,analytics:!1,marketing:!1,acceptedAt:null}),[r,n]=g.useState(!1),[i,a]=g.useState(!1);g.useEffect(()=>{const m=localStorage.getItem("cookieConsent");if(m)try{const x=JSON.parse(m);e({...x,acceptedAt:x.acceptedAt?new Date(x.acceptedAt):null}),n(!1)}catch(x){console.error("Erreur lors de la lecture du consentement:",x),n(!0)}else n(!0)},[]);const o=m=>{e(x=>({...x,[m]:!x[m]}))},l=()=>{const m={essential:!0,analytics:!0,marketing:!0,acceptedAt:new Date};e(m),h(m),n(!1),a(!1)},u=()=>{const m={essential:!0,analytics:!1,marketing:!1,acceptedAt:new Date};e(m),h(m),n(!1),a(!1)},d=()=>{const m={...t,acceptedAt:new Date};e(m),h(m),n(!1),a(!1)},h=m=>{localStorage.setItem("cookieConsent",JSON.stringify(m)),m.analytics&&console.log("Analytics activé"),m.marketing&&console.log("Marketing activé")};return!r&&!i?null:s.jsxs(s.Fragment,{children:[i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),r&&!i&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-40",children:s.jsx("div",{className:"container mx-auto",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Votre vie privée"}),s.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Nous utilisons des cookies pour améliorer votre expérience sur notre site, personnaliser le contenu et analyser notre trafic. Vous pouvez choisir d'accepter tous les cookies ou personnaliser vos préférences."}),s.jsx("div",{className:"mt-1",children:s.jsx(Y,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline text-sm",target:"_blank",children:"En savoir plus sur notre politique de confidentialité"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Personnaliser"}),s.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refuser"}),s.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Tout accepter"})]})]})})}),i&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-50 max-h-[80vh] overflow-y-auto",children:s.jsxs("div",{className:"container mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Paramètres de confidentialité"}),s.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(Ct,{size:24})})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies essentiels"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-not-allowed right-0 z-10 border-gray-300 transition-all duration-300"}),s.jsx("label",{className:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-not-allowed transition-all duration-300"})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies sont nécessaires au fonctionnement du site et ne peuvent pas être désactivés. Ils sont généralement définis en réponse à des actions que vous effectuez, comme définir vos préférences de confidentialité, vous connecter ou remplir des formulaires."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies d'analyse"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:t.analytics,onChange:()=>o("analytics"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.analytics?"border-white":"border-gray-300"}`}),s.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.analytics?"bg-blue-600":"bg-gray-300"}`})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies nous permettent de compter les visites et les sources de trafic afin de mesurer et d'améliorer les performances de notre site. Ils nous aident à savoir quelles pages sont les plus et les moins populaires, et à voir comment les visiteurs se déplacent sur le site."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies marketing"}),s.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[s.jsx("input",{type:"checkbox",checked:t.marketing,onChange:()=>o("marketing"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.marketing?"border-white":"border-gray-300"}`}),s.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.marketing?"bg-blue-600":"bg-gray-300"}`})]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies peuvent être définis via notre site par nos partenaires publicitaires. Ils peuvent être utilisés pour établir un profil de vos intérêts et vous proposer des publicités pertinentes sur d'autres sites."})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),s.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Enregistrer mes préférences"})]})]})})]})},GR=()=>{const[t,e]=g.useState(!1),r=()=>{window.pageYOffset>300?e(!0):e(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return g.useEffect(()=>(window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)),[]),s.jsx(s.Fragment,{children:t&&s.jsx("button",{onClick:n,className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg z-50 transition-all duration-300 ease-in-out transform hover:scale-110 focus:outline-none","aria-label":"Retour en haut",title:"Retour en haut",children:s.jsx(sR,{size:20})})})},Gx=[{value:"cps",label:"Étudiant au CPS",description:"Actuellement en préparation au CPS de Dakar",iconName:"MapPin",iconColor:"text-blue-500"},{value:"esigelec",label:"Étudiant à l'ESIGELEC",description:"Actuellement étudiant à l'ESIGELEC en France",iconName:"GraduationCap",iconColor:"text-green-500"},{value:"alumni",label:"Alumni",description:"Ancien étudiant de l'ESIGELEC",iconName:"User",iconColor:"text-purple-500"},{value:"other",label:"Autre",description:"Autre statut",iconName:"User",iconColor:"text-gray-500"}],WR=t=>{if(!t)return"Non défini";const e=Gx.find(r=>r.value===t);return e?e.label:"Non défini"};function HR(){const{currentUser:t}=Ce(),[e,r]=g.useState(!1),[n,i]=g.useState(!0);g.useEffect(()=>{t&&(async()=>{if(!t){console.log("Pas d'utilisateur connecté"),i(!1);return}try{console.log("Vérification du statut pour",t.uid);const l=be(re,"users",t.uid),u=await xt(l);if(!u.exists())console.log('Document utilisateur inexistant, création avec statut "none"'),await ps(l,{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,status:"none",createdAt:new Date}),r(!0);else{const d=u.data();console.log("Données utilisateur:",d),d.status===void 0?(console.log('Champ statut inexistant, initialisation à "none"'),await ts(l,{status:"none"}),r(!0)):d.status==="none"?(console.log('Statut "none", affichage du modal'),r(!0)):console.log("Statut déjà défini:",d.status)}}catch(l){console.error("Erreur lors de la vérification du statut:",l)}finally{i(!1)}})()},[t]);const a=async o=>{if(t)try{i(!0),console.log(`Mise à jour du statut: "${o}" pour l'utilisateur`,t.uid);const l=be(re,"users",t.uid);await ts(l,{status:o,updatedAt:new Date}),console.log("Statut mis à jour avec succès"),r(!1)}catch(l){console.error("Erreur lors de la mise à jour du statut:",l)}finally{i(!1)}};return console.log("Rendu du composant UserStatusModal",{isLoading:n,showModal:e,currentUser:!!t}),n?(console.log("Chargement en cours..."),null):e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Quel est votre statut ?"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(Ct,{className:"w-6 h-6"})})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Pour mieux vous accompagner, veuillez nous indiquer votre situation actuelle."}),s.jsx("div",{className:"space-y-3",children:Gx.map(o=>s.jsxs("button",{onClick:()=>a(o.value),disabled:n,className:"w-full flex items-start p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"mr-3 mt-0.5",children:[o.iconName==="User"&&s.jsx(Ts,{className:`w-6 h-6 ${o.iconColor}`}),o.iconName==="GraduationCap"&&s.jsx(qx,{className:`w-6 h-6 ${o.iconColor}`}),o.iconName==="MapPin"&&s.jsx(Gd,{className:`w-6 h-6 ${o.iconColor}`})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-medium text-gray-900",children:o.label}),s.jsx("p",{className:"text-sm text-gray-500",children:o.description})]})]},o.value))}),n&&s.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:"Enregistrement en cours..."})]})}):(console.log("Modal non affiché car showModal est false"),null)}const Cv=[{id:1,name:"ESIGELEC",logoUrl:"https://www.francemobilites.fr/sites/frenchmobility/files/images/2021/06/esigelec-rouen-2baselines_0.png",alt:"Logo ESIGELEC"},{id:2,name:"CPS Dakar",logoUrl:"https://www.linkedin.com/dms/prv/image/v2/D5606AQElmOjZWkdvVQ/messaging-image-720/B56ZbuZEzhHgAg-/0/1747756287373?m=AQKVAjHWySZCJgAAAZbuZodpjb5LvuiQx9ZVPlT0orYGHXGSu06cbQo20w&ne=1&v=beta&t=aV_zWSMv5x9jCsPpEsc7DAEo1kBvCNvQWpufEYl-iEo",alt:"Logo CPS Dakar"},{id:3,name:"ESMT",logoUrl:"https://burkina24.com/wp-content/uploads/2023/05/ESMT-logo.png",alt:"Logo ESMT"},{id:4,name:"College Sacré Coeur",logoUrl:"https://www.courssacrecoeur.info/images/logo.gif",alt:"Logo Collège Sacré Coeur"}],QR=()=>{const t=[...Cv,...Cv];return s.jsx("div",{className:"bg-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Les écoles partenaires"}),s.jsx("div",{className:"infinite-logo-container",children:s.jsx("div",{className:"infinite-logo-scroll",children:t.map((e,r)=>s.jsx("div",{className:"logo-item",children:s.jsx("div",{className:"flex items-center justify-center h-40 bg-white rounded-lg shadow-sm p-4",children:s.jsx("img",{src:e.logoUrl,alt:e.alt,className:"max-h50 max-w-full object-contain"})})},`${e.id}-${r}`))})})]})})},KR=()=>{const{currentUser:t}=Ce(),[e,r]=bi.useState(!1);return bi.useEffect(()=>{r(!0)},[]),s.jsxs("div",{className:"flex flex-col min-h-screen",children:[s.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[s.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[s.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide pour passer de CPS à l'ESIGELEC"}),s.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),s.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?s.jsxs(Y,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",s.jsx(Qu,{className:"ml-2 w-5 h-5"})]}):s.jsxs(s.Fragment,{children:[s.jsxs(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",s.jsx(Qu,{className:"ml-2 w-5 h-5"})]}),s.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),s.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:s.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:`rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover transition-opacity duration-700 ease-out ${e?"opacity-100":"opacity-0"}`})})]})})}),s.jsx("section",{className:"py-16 bg-white",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(OR,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),s.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Tp,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),s.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Ux,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),s.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[s.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(ut,{className:"w-7 h-7 text-blue-900"})}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),s.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),s.jsx("section",{className:"py-16 bg-gray-50",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),s.jsxs("div",{className:"flex flex-col space-y-6",children:[s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),s.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Préparation dossier Campus France"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Candidature ESIGELEC"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),s.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),s.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Demande de visa étudiant"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Recherche de logement"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),s.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:s.jsxs("div",{className:"flex flex-col md:flex-row",children:[s.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[s.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),s.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),s.jsx("div",{className:"md:w-2/3 p-6",children:s.jsxs("ul",{className:"space-y-2",children:[s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Transport vers la France"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),s.jsxs("li",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),s.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),s.jsx("section",{className:"py-12 bg-blue-50",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 flex flex-col items-center text-center border border-blue-100",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-blue-900 mb-3",children:"Votre avis compte !"}),s.jsx("p",{className:"text-blue-800 mb-6",children:"Aidez-nous à améliorer la plateforme en partageant vos suggestions, remarques ou critiques constructives. Nous lisons chaque retour avec attention."}),s.jsx(Y,{to:"/feedback",className:"inline-block px-6 py-3 bg-blue-700 text-white font-semibold rounded-lg shadow hover:bg-blue-800 transition-colors text-lg",children:"Donner mon avis"})]})})}),s.jsx("section",{className:"py-16 bg-gradient-to-r from-green-800 to-green-700 text-white",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),s.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),s.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?s.jsx(Y,{to:"/dashboard",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):s.jsxs(s.Fragment,{children:[s.jsx(Y,{to:"/register",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),s.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})}),s.jsx(QR,{})]})},YR=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(""),[i,a]=g.useState(!1),[o,l]=g.useState(""),[u,d]=g.useState(!1),[h,m]=g.useState(!1),[x,j]=g.useState(!1),A=at(),{login:D,loginWithGoogle:S,loginWithGithub:y}=Ce();bi.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const w=async M=>{M.preventDefault();try{l(""),d(!0),await D(t,r),A("/dashboard")}catch(q){l("Identifiants invalides. Veuillez réessayer."),console.error(q)}finally{d(!1)}},_=async()=>{l(""),m(!0);try{await S(),A("/dashboard")}catch(M){let q="Erreur lors de la connexion avec Google.";M&&typeof M=="object"&&"message"in M&&(q+=`
${M.message}`),l(q),console.error(M)}finally{m(!1)}},I=async()=>{l(""),j(!0);try{await y(),A("/dashboard")}catch(M){let q="Erreur lors de la connexion avec GitHub.";M&&typeof M=="object"&&"message"in M&&(q+=`
${M.message}`),l(q),console.error(M)}finally{j(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",s.jsx(Y,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[o&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:s.jsx("div",{className:"flex",children:s.jsx("div",{children:s.jsx("p",{className:"text-sm text-red-700",children:o})})})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("button",{type:"button",onClick:_,disabled:h,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${h?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:s.jsxs("g",{children:[s.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),s.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),s.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),s.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),h?"Connexion Google...":"Se connecter avec Google"]}),s.jsxs("button",{type:"button",onClick:I,disabled:x,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${x?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),x?"Connexion GitHub...":"Se connecter avec GitHub"]})]}),s.jsxs("form",{className:"space-y-6",onSubmit:w,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:M=>e(M.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:M=>n(M.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>a(M=>!M),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":i?"Masquer le mot de passe":"Afficher le mot de passe",children:i?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm",children:s.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},JR=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(""),[i,a]=g.useState(""),[o,l]=g.useState(""),[u,d]=g.useState(!1),[h,m]=g.useState(!1),[x,j]=g.useState(""),[A,D]=g.useState(!1),[S,y]=g.useState(!1),[w,_]=g.useState(!1),I=at(),{register:M,loginWithGoogle:q,loginWithGithub:N}=Ce(),f=async()=>{j(""),y(!0);try{await q(),I("/dashboard")}catch(C){j("Erreur lors de l'inscription avec Google"),console.error(C)}finally{y(!1)}},v=async()=>{j(""),_(!0);try{await N(),I("/dashboard")}catch(C){j("Erreur lors de l'inscription avec GitHub"),console.error(C)}finally{_(!1)}},E=async C=>{if(C.preventDefault(),i!==o)return j("Les mots de passe ne correspondent pas");try{j(""),D(!0),await M(r,i,t),I("/dashboard")}catch{j("Erreur lors de la création du compte"),console.error()}finally{D(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",s.jsx(Y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[x&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:s.jsx("div",{className:"flex",children:s.jsx("div",{children:s.jsx("p",{className:"text-sm text-red-700",children:x})})})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("button",{type:"button",onClick:f,disabled:S,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:s.jsxs("g",{children:[s.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),s.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),s.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),s.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),S?"Inscription Google en cours...":"S'inscrire avec Google"]}),s.jsxs("button",{type:"button",onClick:v,disabled:w,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"opacity-70 cursor-not-allowed":""}`,children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),w?"Inscription GitHub en cours...":"S'inscrire avec GitHub"]})]}),s.jsxs("form",{className:"space-y-6",onSubmit:E,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:C=>e(C.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:C=>n(C.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:C=>a(C.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(C=>!C),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),s.jsx("div",{className:"mt-1",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",autoComplete:"new-password",required:!0,value:o,onChange:C=>l(C.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),s.jsx("button",{type:"button",tabIndex:-1,onClick:()=>m(C=>!C),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":h?"Masquer le mot de passe":"Afficher le mot de passe",children:h?s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",s.jsx(Y,{to:"/legal/CGU",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:A,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${A?"opacity-70 cursor-not-allowed":""}`,children:A?"Création en cours...":"Créer un compte"})})]})]})})]})};async function XR(t){const e=be(re,"progressions",t),r=await xt(e);return r.exists()?r.data().completedSections||[]:[]}async function Av(t,e){const r=be(re,"progressions",t);try{await ps(r,{completedSections:e},{merge:!0}),console.log("Progression enregistrée sur Firestore:",t,e)}catch(n){console.error("Erreur Firestore progression:",n)}}const ZR=t=>t?t.toISOString().split("T")[0]:"",e6=t=>t?t.toISOString().slice(0,16):"",t6=({id:t,label:e,fieldType:r,value:n,onChange:i,onBlur:a,required:o=!1,fieldMetadata:l})=>{const[u,d]=g.useState(""),[h,m]=g.useState(!1),[x,j]=g.useState(""),[A,D]=g.useState("");g.useEffect(()=>{n!==void 0&&(r==="boolean"?m(!!n):r==="date"&&n instanceof Date?j(ZR(n)):r==="datetime"&&n instanceof Date?D(e6(n)):d(String(n)))},[n,r]);const S=N=>{m(N),i(t,N)},y=N=>{j(N),N===""?i(t,null):i(t,new Date(N))},w=N=>{D(N),N===""?i(t,null):i(t,new Date(N))},_=N=>{i(t,Number(N))},I=N=>{d(N)},M=()=>{i(t,u),a&&a()},q=()=>{switch(r){case"boolean":return s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:h,onChange:N=>S(N.target.checked)}),s.jsx("div",{className:"relative w-11 h-6 bg-gray-200 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]}),e&&s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[e,o&&s.jsx("span",{className:"text-red-500",children:"*"})]})]});case"date":return s.jsx("input",{type:"date",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:x,onChange:N=>y(N.target.value),onBlur:M});case"datetime":return s.jsx("input",{type:"datetime-local",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:A,onChange:N=>w(N.target.value),onBlur:M});case"number":return s.jsx("input",{type:"number",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u!=null?String(u):"",onChange:N=>_(N.target.value),onBlur:M});case"select":{const N=(l==null?void 0:l.options)||[];return s.jsxs("select",{className:"form-select w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u!=null?String(u):"",onChange:f=>I(f.target.value),onBlur:M,children:[s.jsx("option",{value:"",children:"Sélectionnez une option"}),N.map((f,v)=>s.jsx("option",{value:f,children:f},v))]})}case"airport":{const N=["CDG - Paris Charles de Gaulle","ORY - Paris Orly","LYS - Lyon Saint-Exupéry","NCE - Nice Côte d'Azur","MRS - Marseille Provence","TLS - Toulouse Blagnac","BSL - Bâle-Mulhouse-Fribourg","NTE - Nantes Atlantique","BDX - Bordeaux-Mérignac","LIL - Lille Lesquin"];return s.jsxs("select",{className:"form-select w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u!=null?String(u):"",onChange:f=>I(f.target.value),onBlur:M,children:[s.jsx("option",{value:"",children:"Sélectionnez un aéroport"}),N.map((f,v)=>s.jsx("option",{value:f,children:f},v))]})}case"longtext":return s.jsx("textarea",{className:"form-textarea w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u?String(u):"",onChange:N=>I(N.target.value),onBlur:M,rows:4});case"email":return s.jsx("input",{type:"email",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u?String(u):"",onChange:N=>I(N.target.value),onBlur:M});case"url":return s.jsx("input",{type:"url",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u?String(u):"",onChange:N=>I(N.target.value),onBlur:M});case"text":default:return s.jsx("input",{type:"text",className:"form-input w-full px-3 py-2 text-sm rounded-md border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50",value:u?String(u):"",onChange:N=>I(N.target.value),onBlur:M})}};return s.jsxs("div",{className:"mb-4",children:[e&&r!=="boolean"&&s.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1",children:[e,o&&s.jsx("span",{className:"text-red-500",children:"*"})]}),q()]})},Wl="userSubsectionData",Vi=async t=>{try{const e=be(re,Wl,t),r=await xt(e);if(r.exists()){const n=r.data();return{checkItems:n.checkItems||{},inputValues:n.inputValues||{},typedValues:n.typedValues||{},fieldMetadata:n.fieldMetadata||{}}}else return{checkItems:{},inputValues:{},typedValues:{},fieldMetadata:{}}}catch(e){return console.error("Erreur lors de la récupération des données de sous-section:",e),{checkItems:{},inputValues:{},typedValues:{},fieldMetadata:{}}}},s6=async(t,e)=>{try{const r=await Vi(t),n=be(re,Wl,t);await ps(n,{checkItems:e,inputValues:r.inputValues},{merge:!0})}catch(r){throw console.error("Erreur lors de l'enregistrement des cases à cocher:",r),r}},r6=async(t,e)=>{try{const r=await Vi(t),n=be(re,Wl,t);await ps(n,{checkItems:r.checkItems,inputValues:e,typedValues:r.typedValues,fieldMetadata:r.fieldMetadata},{merge:!0})}catch(r){throw console.error("Erreur lors de l'enregistrement des champs de saisie:",r),r}},n6=async(t,e)=>{try{const r=await Vi(t),n=be(re,Wl,t);await ps(n,{checkItems:r.checkItems,inputValues:r.inputValues,typedValues:e,fieldMetadata:r.fieldMetadata},{merge:!0})}catch(r){throw console.error("Erreur lors de l'enregistrement des valeurs typées:",r),r}},i6=(t,e)=>{var r;if(!t)switch(e){case"boolean":return!1;case"number":return 0;case"date":case"datetime":return new Date;default:return""}switch(e){case"boolean":return t.toLowerCase()==="oui"||t.toLowerCase()==="yes"||t==="true";case"number":return parseFloat(t)||0;case"date":case"datetime":{const n=new Date(t);if(!isNaN(n.getTime()))return n;const i=t.split(/ |\//);if(i.length>=3){const o=["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"].findIndex(l=>t.toLowerCase().includes(l.toLowerCase()));if(o!==-1){const l=parseInt(((r=t.match(/\d{1,2}/))==null?void 0:r.at(0))||"1"),u=t.match(/\d{4}/),d=u?parseInt(u.at(0)||"2025"):new Date().getFullYear();return new Date(d,o,l)}try{let l,u,d;return parseInt(i[0])>12?(l=parseInt(i[0]),u=parseInt(i[1])-1,d=parseInt(i[2])):(u=parseInt(i[0])-1,l=parseInt(i[1]),d=parseInt(i[2])),new Date(d,u,l)}catch(l){return console.error("Erreur lors de la conversion de la date:",l),new Date}}return new Date}default:return t}},a6=async(t,e)=>{try{const r=await Vi(t),n={},i={};Object.keys(r.checkItems).forEach(o=>{e.includes(o)&&(n[o]=r.checkItems[o])}),Object.keys(r.inputValues).forEach(o=>{e.includes(o)&&(i[o]=r.inputValues[o])});const a=be(re,Wl,t);await ps(a,{checkItems:n,inputValues:i}),console.log(`Données de sous-section nettoyées pour l'utilisateur ${t}`)}catch(r){throw console.error("Erreur lors du nettoyage des données de sous-section:",r),r}},o6=({item:t,value:e="",typedValue:r,onChange:n,onChangeTyped:i})=>{const[a,o]=g.useState(e);g.useEffect(()=>{o(e)},[e]);const l=d=>{o(d),n(t.id,d)},u=(d,h)=>{if(i&&i(d,h),t.fieldType){const m=String(h);n(d,m)}};if(t.fieldType&&i){const d=r!==void 0?r:i6(a,t.fieldType);return s.jsx(t6,{id:t.id,label:t.content,fieldType:t.fieldType,value:d,onChange:u,fieldMetadata:{options:t.options}})}return s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:t.id,className:"form-label",children:t.content}),s.jsx("input",{type:"text",className:"form-control",id:t.id,value:a,onChange:d=>l(d.target.value),placeholder:`Entrez ${t.content.toLowerCase()}`})]})},l6=({subSection:t,checkedItems:e,inputValues:r,typedValues:n={},onCheckChange:i,onInputChange:a,onTypedValueChange:o})=>{const[l,u]=g.useState(n);g.useEffect(()=>{u(n)},[n]);const d=g.useCallback((m,x)=>{const j={...l,[m]:x};u(j),o&&o(m,x)},[l,o]),h=g.useCallback(m=>{a(m,"");const x={...l};delete x[m],u(x)},[l,a]);return t.type==="bulletList"?s.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.items.map(m=>s.jsx("li",{className:"text-sm text-gray-700",children:m.content},m.id))}):t.type==="checkList"?s.jsx("div",{className:"space-y-2",children:t.items.map(m=>s.jsxs("div",{className:"flex items-start",children:[s.jsx("input",{type:"checkbox",id:`check-${m.id}`,className:"mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:e[m.id]||!1,onChange:()=>i(m.id)}),s.jsx("label",{htmlFor:`check-${m.id}`,className:"ml-2 block text-sm text-gray-700",children:m.content})]},m.id))}):t.type==="inputField"?s.jsx("div",{className:"space-y-2",children:t.items.map(m=>s.jsx("div",{className:"group relative",children:m.fieldType?s.jsx(o6,{item:m,value:r[m.id]||"",typedValue:l[m.id],onChange:a,onChangeTyped:d}):s.jsxs("div",{className:"flex items-center bg-white overflow-hidden rounded-lg border border-gray-200 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 transition-all shadow-sm hover:shadow",children:[s.jsx("label",{htmlFor:`input-${m.id}`,className:"flex-shrink-0 px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50 border-r border-gray-200 select-none",children:m.content}),s.jsx("input",{type:"text",id:`input-${m.id}`,className:"block w-full flex-1 px-3 py-2 border-0 focus:ring-0 focus:outline-none text-sm text-gray-700 placeholder-gray-400 transition-colors duration-300",placeholder:"Entrez votre information",value:r[m.id]||"",onChange:x=>a(m.id,x.target.value)}),s.jsx("div",{className:"flex",children:r[m.id]&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"p-2 text-green-500 hover:text-green-700 focus:outline-none",type:"button","aria-label":"Valider",title:"Valider",children:s.jsx(Mi,{className:"h-3.5 w-3.5"})}),s.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none",onClick:()=>h(m.id),type:"button","aria-label":"Effacer",title:"Effacer",children:s.jsx(Ct,{className:"h-3.5 w-3.5"})})]})})]})},m.id))}):null},c6=()=>{const{currentUser:t}=Ce(),{guideSections:e,resources:r,getGuideSectionsByPhase:n,faqItems:i}=Wi(),a=g.useRef(null),[o,l]=g.useState("post-cps"),[u,d]=g.useState([]),[h,m]=g.useState({}),[x,j]=g.useState({}),[A,D]=g.useState({}),[S,y]=g.useState(!0),[w,_]=g.useState(!1),[I,M]=g.useState(!0);g.useEffect(()=>{const O=V=>{a.current&&!a.current.contains(V.target)&&w&&_(!1)};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[w]),g.useEffect(()=>{t!=null&&t.uid&&(M(!0),XR(t.uid).then(O=>d(O)).finally(()=>M(!1)))},[t==null?void 0:t.uid]),g.useEffect(()=>{t!=null&&t.uid&&(y(!0),Vi(t.uid).then(O=>{m(O.checkItems||{}),j(O.inputValues||{}),O.typedValues&&D(O.typedValues)}).catch(O=>console.error("Erreur lors du chargement des données de sous-section:",O)).finally(()=>y(!1)))},[t==null?void 0:t.uid]);const q=g.useCallback(()=>{const O=[];return e.forEach(V=>{V.subSections&&V.subSections.forEach(H=>{H.items.forEach(F=>{O.push(F.id)})})}),O},[e]);g.useEffect(()=>{if(t!=null&&t.uid&&e.length>0&&!S){const O=q();a6(t.uid,O).then(()=>Vi(t.uid).then(V=>{m(V.checkItems),j(V.inputValues),V.typedValues&&D(V.typedValues)}).catch(V=>console.error("Erreur lors du chargement des données de sous-section:",V)).finally(()=>y(!1))).catch(V=>console.error("Erreur lors du nettoyage des données de sous-section:",V))}},[t==null?void 0:t.uid,e,q,S]);const N=async O=>{let V;u.includes(O)?V=u.filter(H=>H!==O):V=[...u,O],d(V),t!=null&&t.uid&&await Av(t.uid,V)},f=g.useCallback((O,V,H)=>{if(u.includes(O))return!1;const F=e.find(W=>W.id===O);if(!F||!F.subSections||F.subSections.length===0)return!1;let R=0,U=0;return F.subSections.forEach(W=>{(W.type==="checkList"||W.type==="inputField")&&W.items.forEach(ne=>{R++,(W.type==="checkList"&&V[ne.id]||W.type==="inputField"&&H[ne.id]&&H[ne.id].trim()!=="")&&U++})}),R>0&&U===R},[e,u]),v=g.useCallback(async O=>{if(!u.includes(O)){const V=[...u,O];if(d(V),t!=null&&t.uid)try{await Av(t.uid,V)}catch(H){console.error("Erreur lors de la mise à jour des sections complétées:",H)}}},[u,t==null?void 0:t.uid]);g.useEffect(()=>{t!=null&&t.uid&&!I&&!S&&e.forEach(O=>{f(O.id,h,x)&&v(O.id)})},[h,x,e,t==null?void 0:t.uid,I,S,f,v]);const E=g.useCallback(async O=>{const V=!h[O],H={...h,[O]:V};if(m(H),t!=null&&t.uid)try{await s6(t.uid,H)}catch(F){console.error("Erreur lors de la sauvegarde de la case à cocher:",F)}},[h,t==null?void 0:t.uid]),C=g.useCallback((O,V)=>{const H={...x,[O]:V};if(j(H),t!=null&&t.uid)try{r6(t.uid,H)}catch(F){console.error("Erreur lors de la sauvegarde du champ de saisie:",F)}},[x,t==null?void 0:t.uid]),P=g.useCallback((O,V)=>{const H={...A,[O]:V};D(H)},[A]),k=g.useCallback((O,V)=>{P(O,V),t!=null&&t.uid&&n6(t.uid,{...A,[O]:V})},[t==null?void 0:t.uid,P,A]),te=n?n(o):[],ce=O=>{const V=n?n(O):[];if(!V||V.length===0)return 0;let H=0,F=0;return V.forEach(R=>{H++,u.includes(R.id)&&F++,R.subSections&&R.subSections.length>0&&R.subSections.forEach(U=>{if(U.type==="checkList"||U.type==="inputField"){const W=U.items.length;H+=W,U.type==="checkList"?U.items.forEach(ne=>{h[ne.id]&&F++}):U.type==="inputField"&&U.items.forEach(ne=>{x[ne.id]&&x[ne.id].trim()!==""&&F++})}})}),H>0?Math.round(F/H*100):0},de=()=>{if(!e||e.length===0)return 0;let O=0,V=0;return e.forEach(H=>{O++,u.includes(H.id)&&V++,H.subSections&&H.subSections.length>0&&H.subSections.forEach(F=>{if(F.type==="checkList"||F.type==="inputField"){const R=F.items.length;O+=R,F.type==="checkList"?F.items.forEach(U=>{h[U.id]&&V++}):F.type==="inputField"&&F.items.forEach(U=>{x[U.id]&&x[U.id].trim()!==""&&V++})}})}),O>0?Math.round(V/O*100):0};return!r||!i||!e||I||S?s.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),s.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",s.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8 relative",children:[s.jsxs("div",{className:"fixed bottom-6 left-6 z-50",children:[s.jsx("button",{ref:a,onClick:()=>_(!w),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50","aria-label":"Aide",title:"Comment ça fonctionne ?",children:s.jsx(y2,{className:"w-6 h-6"})}),w&&s.jsxs("div",{className:"absolute bottom-16 left-0 w-72 bg-white rounded-lg shadow-xl p-4 text-sm animate-fade-in",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h3",{className:"font-bold text-gray-900",children:"Comment ça fonctionne ?"}),s.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Fermer",children:s.jsx(Ct,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-3 text-gray-700",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Progression"}),s.jsx("p",{children:"Cocher toutes les cases et remplir tous les champs d'une section la marque automatiquement comme complétée."})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Sections"}),s.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[s.jsx("li",{children:"Naviguez entre les phases avec les onglets en haut"}),s.jsx("li",{children:"Les sous-sections peuvent être des listes, cases à cocher ou champs"}),s.jsx("li",{children:"Vos réponses sont automatiquement sauvegardées"})]})]}),s.jsx("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100",children:s.jsxs("p",{children:["Cliquez sur ",s.jsx("span",{className:"inline-flex items-center",children:s.jsx(Mi,{className:"w-3 h-3 text-green-500 mr-1"})})," pour valider vos réponses"]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"mb-4 lg:col-span-2",children:s.jsx(Lp,{fallback:s.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-gray-400 rounded-full p-2",children:s.jsx(ut,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-800",children:"Forum des étudiants"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Bientôt disponible"})]})]}),s.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded",children:"Nouveauté"})]}),children:s.jsx("div",{className:"space-y-3",children:s.jsxs(Y,{to:"/forum",className:"flex items-center justify-between bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg p-3 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"bg-blue-600 rounded-full p-2",children:s.jsx(ut,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-800",children:"Forum des étudiants"}),s.jsx("p",{className:"text-xs text-blue-600",children:"Discussions entre étudiants"})]})]}),s.jsx("span",{className:"text-blue-600 text-sm font-medium",children:"Accéder →"})]})})})}),s.jsxs("div",{className:"lg:col-span-2",children:[s.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:s.jsxs("div",{className:"flex flex-wrap",children:[s.jsx("button",{onClick:()=>l("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),s.jsx("button",{onClick:()=>l("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),s.jsx("button",{onClick:()=>l("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[o==="post-cps"&&"Après votre CPS",o==="during-process"&&"Pendant vos démarches administratives",o==="pre-arrival"&&"Après votre arrivée en France"]}),s.jsxs("p",{className:"text-gray-600",children:[o==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",o==="during-process"&&"Les démarches à effectuer pour préparer votre départ",o==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),s.jsx("div",{className:"divide-y divide-gray-200",children:te&&te.length>0?te.map(O=>s.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:s.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[s.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:s.jsx("button",{onClick:()=>N(O.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${u.includes(O.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:s.jsx(ws,{className:"w-5 h-5"})})}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:O.title}),s.jsx("p",{className:"text-gray-600 mb-4",children:O.content}),O.subSections&&O.subSections.length>0&&s.jsx("div",{className:"mt-4 space-y-4",children:O.subSections.map(V=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[s.jsxs("h4",{className:"text-md font-medium text-gray-800 mb-2 flex items-center",children:[V.type==="bulletList"&&s.jsx(Rp,{className:"w-4 h-4 text-blue-500 mr-2"}),V.type==="checkList"&&s.jsx(tu,{className:"w-4 h-4 text-green-500 mr-2"}),V.type==="inputField"&&s.jsx(su,{className:"w-4 h-4 text-purple-500 mr-2"}),V.title]}),s.jsx("div",{className:"ml-1",children:s.jsx(l6,{subSection:V,checkedItems:h,inputValues:x,typedValues:A,onCheckChange:H=>E(H),onInputChange:C,onTypedValueChange:k})})]},V.id))}),Array.isArray(O.resources)&&O.resources.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),s.jsx("div",{className:"space-y-2",children:O.resources.map(V=>{const H=r.find(F=>F.id===V);return H?s.jsxs("a",{href:H.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(Ke,{className:"w-4 h-4 mr-2"}),H.title]},H.id):null})})]})]})]})},O.id)):s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Progression globale"}),s.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[de(),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx("div",{className:"bg-blue-900 h-3 rounded-full transition-all duration-500",style:{width:`${de()}%`}})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ce("post-cps"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${ce("post-cps")}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ce("during-process"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${ce("during-process")}%`}})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[ce("pre-arrival"),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${ce("pre-arrival")}%`}})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),s.jsx(Y,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),s.jsx("div",{className:"space-y-3",children:(r||[]).slice(0,3).map(O=>s.jsxs("a",{href:O.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:s.jsx(Ke,{className:"w-5 h-5 text-blue-700"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:O.title}),s.jsx("p",{className:"text-xs text-gray-500",children:O.phase})]})]},O.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),s.jsx(Y,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),s.jsx("div",{className:"space-y-3",children:(i||[]).slice(0,2).map(O=>s.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:O.question}),s.jsx("p",{className:"text-xs text-gray-700",children:O.answer&&O.answer.length>100?`${O.answer.substring(0,100)}...`:O.answer})]},O.id))})]})]})]})]})]})},u6=()=>{const{resources:t}=Wi(),[e,r]=g.useState(""),[n,i]=g.useState("all"),[a,o]=g.useState("all"),[l,u]=g.useState(!1),[d,h]=g.useState(!1),[m,x]=g.useState("all"),[j,A]=g.useState(null),[D,S]=g.useState(!1),y=[...new Set(t.map(f=>f.category))],w=f=>{if(f.includes("dropbox.com")){let v=f.replace("www.dropbox.com","dl.dropboxusercontent.com");return v.includes("?dl=0")?v=v.replace("?dl=0","?raw=1"):v.includes("?")?v+="&raw=1":v+="?raw=1",v}return f},_=f=>{let v=f;try{const E=new URL(f);if(E.hostname.includes("youtube.com")||E.hostname.includes("youtu.be")){const C=E.hostname.includes("youtu.be")?E.pathname.substring(1).split("?")[0]:E.searchParams.get("v");C&&(v=`https://www.youtube.com/embed/${C}`)}else if(E.hostname.includes("vimeo.com")){const P=E.pathname.split("/").find(k=>/^\d+$/.test(k));P&&(v=`https://player.vimeo.com/video/${P}`)}}catch(E){console.error("Error parsing video URL for embedding:",E)}return f.includes("dropbox.com")&&v===f?w(f):v},I=f=>`https://docs.google.com/viewer?url=${encodeURIComponent(f)}&embedded=true`,M=f=>{f.preventDefault()},q=t.filter(f=>m==="videos"&&f.fileType!=="video"||n!=="all"&&f.phase!==n||a!=="all"&&f.category!==a?!1:e?f.title.toLowerCase().includes(e.toLowerCase())||f.description.toLowerCase().includes(e.toLowerCase()):!0),N=f=>{switch(f){case"pdf":return s.jsx(g2,{className:"w-6 h-6 text-red-500"});case"image":return s.jsx(ER,{className:"w-6 h-6 text-green-500"});case"video":return s.jsx(Us,{className:"w-6 h-6 text-purple-500"});case"archive":return s.jsx(tR,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return s.jsx(Ke,{className:"w-6 h-6 text-blue-500"})}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),s.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6 flex border-b border-gray-200",children:[s.jsx("button",{className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 focus:outline-none ${m==="all"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>x("all"),children:"Toutes les ressources"}),s.jsx("button",{className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 focus:outline-none ${m==="videos"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>x("videos"),children:"Vidéos"})]}),s.jsx("form",{onSubmit:M,children:s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[s.jsx("div",{className:"flex-grow",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Zr,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:f=>r(f.target.value)})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!l),children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Pp,{className:"mr-2 h-4 w-4"}),n==="all"?"Toutes les phases":n==="post-cps"?"Post-CPS":n==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),s.jsx(Ln,{className:"h-4 w-4"})]}),l&&s.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("all"),u(!1)},children:"Toutes les phases"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("post-cps"),u(!1)},children:"Post-CPS"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("during-process"),u(!1)},children:"Pendant les démarches"}),s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>h(!d),children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx(Pp,{className:"mr-2 h-4 w-4"}),a==="all"?"Toutes les catégories":a]}),s.jsx(Ln,{className:"h-4 w-4"})]}),d&&s.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:s.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${a==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o("all"),h(!1)},children:"Toutes les catégories"}),y.map(f=>s.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${a===f?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o(f),h(!1)},children:f},f))]})})]})]})]})})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.length>0?q.map(f=>s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{A(f),S(!0)},children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:N(f.fileType)}),s.jsx("div",{className:"ml-4",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.title})})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:f.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:f.phase==="post-cps"?"Post-CPS":f.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:f.category}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.fileType==="pdf"?"bg-red-100 text-red-800":f.fileType==="doc"||f.fileType==="docx"||f.fileType==="txt"?"bg-blue-100 text-blue-800":f.fileType==="xls"||f.fileType==="xlsx"?"bg-green-100 text-green-800":f.fileType==="ppt"||f.fileType==="pptx"?"bg-orange-100 text-orange-800":f.fileType==="image"?"bg-purple-100 text-purple-800":f.fileType==="video"?"bg-pink-100 text-pink-800":f.fileType==="audio"?"bg-indigo-100 text-indigo-800":f.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:f.fileType.toUpperCase()})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[s.jsxs("span",{children:["Mis à jour le ",f.updatedDate]}),s.jsxs("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:v=>v.stopPropagation(),children:[s.jsx(Un,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Télécharger"})]})]})]})},f.id)):s.jsxs("div",{className:"col-span-full text-center py-12",children:[s.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:s.jsx(Zr,{className:"w-8 h-8 text-gray-400"})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),s.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),D&&j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out",onClick:()=>S(!1),children:s.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl w-full max-w-5xl h-auto max-h-[90vh] flex flex-col overflow-hidden relative",onClick:f=>f.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:j.title}),s.jsx("p",{className:"text-sm text-slate-300",children:j.category})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto items-center",children:[s.jsxs("a",{href:j.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[s.jsx(Js,{className:"w-4 h-4 mr-1.5"}),"Ouvrir"]}),s.jsxs("a",{href:j.fileUrl,download:!0,className:"flex items-center justify-center w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[s.jsx(Un,{className:"w-4 h-4 mr-1.5"}),"Télécharger"]}),s.jsx("button",{onClick:()=>S(!1),className:"p-1.5 ml-0 sm:ml-2 rounded-md hover:bg-slate-700 transition-colors text-slate-400 hover:text-slate-200","aria-label":"Fermer",children:s.jsx(Ct,{className:"w-5 h-5"})})]})]}),s.jsx("div",{className:"flex-grow overflow-auto",children:j.fileType==="video"?s.jsxs("div",{className:"p-1 sm:p-2 md:p-4 w-full",children:[" ",s.jsxs("div",{className:"relative w-full bg-black rounded-md",style:{paddingTop:"56.25%"},children:[" ",s.jsx("iframe",{src:_(j.fileUrl),className:"absolute top-0 left-0 w-full h-full border-0 rounded-md",title:j.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})]})]}):j.fileType==="pdf"?s.jsxs("div",{className:"flex flex-col h-full bg-white",children:[" ",s.jsxs("div",{className:"flex-grow p-4",children:[" ",s.jsx("object",{data:w(j.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:s.jsx("iframe",{src:I(j.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${j.title} (Google Viewer)`,allowFullScreen:!0})})]}),s.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-t border-gray-200",children:[" ","Si le document ne s'affiche pas correctement, essayez de le",s.jsx("a",{href:j.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 mx-1 font-medium",onClick:f=>f.stopPropagation(),children:"télécharger"}),"ou l'",s.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(j.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 mx-1 font-medium",onClick:f=>f.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):s.jsxs("div",{className:"h-full bg-white",children:[" ",s.jsx("iframe",{src:w(j.fileUrl),className:"w-full h-full border-0 rounded-md",title:j.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})]})})]})})]})},d6=()=>{const{faqItems:t,addFAQItem:e}=Wi(),{currentUser:r}=Ce(),[n,i]=g.useState(""),[a,o]=g.useState("all"),[l,u]=g.useState(null),[d,h]=g.useState(!1),[m,x]=g.useState(!1),[j,A]=g.useState(!1),[D,S]=g.useState(""),[y,w]=g.useState("post-cps"),[_,I]=g.useState(""),[M,q]=g.useState("phase"),[N,f,v]=t.reduce((P,k)=>(r&&(k.userId===r.uid||k.userEmail===r.email)&&(k.isAnswered?P[0].push(k):P[1].push(k)),k.isApproved&&k.isAnswered&&(a==="all"&&(k.questionType==="general"||k.questionType==="site"||k.questionType==="phase")||a==="general"&&k.questionType==="general"||a==="site"&&k.questionType==="site"||["post-cps","during-process","pre-arrival"].includes(a)&&k.questionType==="phase"&&k.phase===a)&&(!n||k.question.toLowerCase().includes(n.toLowerCase())||k.answer.toLowerCase().includes(n.toLowerCase())||k.category.toLowerCase().includes(n.toLowerCase()))&&P[2].push(k),P),[[],[],[]]),E=P=>{u(l===P?null:P)},C=P=>{P.preventDefault(),D.trim()&&(e({question:D,answer:"Cette question est en attente de réponse par notre équipe.",category:_||"général",phase:M==="phase"?y:void 0,questionType:M,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:r==null?void 0:r.uid,userEmail:r==null?void 0:r.email}),S(""),I(""),x(!0),setTimeout(()=>{x(!1),h(!1)},5e3))};return g.useEffect(()=>{d||x(!1)},[d]),s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),s.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[s.jsx("div",{className:"flex-grow",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Zr,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:n,onChange:P=>i(P.target.value)})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[s.jsxs("select",{value:a,onChange:P=>o(P.target.value),className:"block w-full rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:j,children:[s.jsx("option",{value:"all",children:"Toutes les questions"}),s.jsx("option",{value:"post-cps",children:"Phase : Post-CPS"}),s.jsx("option",{value:"during-process",children:"Phase : Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Phase : Pré-arrivée"}),s.jsx("option",{value:"site",children:"Fonctionnement du site"}),s.jsx("option",{value:"general",children:"Question générale"})]}),s.jsxs("div",{className:"flex flex-row space-x-2",children:[r&&s.jsx("button",{type:"button",onClick:()=>A(!j),className:`flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${j?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:s.jsx("span",{className:"whitespace-nowrap",children:j?"Toutes les questions":"Mes questions"})}),s.jsxs("button",{type:"button",onClick:()=>h(!0),className:"flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(as,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]})]}),d&&s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[s.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx(lt,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),s.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),s.jsx("form",{onSubmit:C,className:"space-y-7",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),s.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:D,onChange:P=>S(P.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),s.jsxs("select",{id:"questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:M,onChange:P=>q(P.target.value),required:!0,children:[s.jsx("option",{value:"phase",children:"En lien avec une phase"}),s.jsx("option",{value:"site",children:"Fonctionnement du site"}),s.jsx("option",{value:"general",children:"Question générale"})]})]}),M==="phase"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:y,onChange:P=>w(P.target.value),required:M==="phase",children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:_,onChange:P=>I(P.target.value)})]})]}),m?s.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ws,{className:"h-5 w-5 text-green-500 mr-2"}),s.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),s.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):s.jsxs("div",{className:"flex justify-end",children:[s.jsx("button",{type:"button",onClick:()=>h(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),j?s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",s.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:N.length})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map(P=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>E(P.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:s.jsx(lt,{className:"h-4 w-4 text-green-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:P.question}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:P.phase==="post-cps"?"Post-CPS":P.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),P.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:P.category})]})]})]}),l===P.id?s.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ln,{className:"h-5 w-5 text-gray-500"})]}),l===P.id&&s.jsxs("div",{className:"mt-4 ml-11",children:[s.jsx("p",{className:"text-gray-700",children:P.answer}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",P.updatedDate]})]})]},P.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",s.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:f.length})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:f.length>0?f.map(P=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>E(P.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:s.jsx(lt,{className:"h-4 w-4 text-yellow-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[P.question,s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:P.phase==="post-cps"?"Post-CPS":P.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),P.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:P.category}),s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",P.createdDate]})]})]})]}),l===P.id?s.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ln,{className:"h-5 w-5 text-gray-500"})]}),l===P.id&&s.jsx("div",{className:"mt-4 ml-11",children:s.jsx("p",{className:"text-gray-700 italic",children:P.answer})})]},P.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-6 border-b",children:s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:v.length>0?v.map(P=>s.jsxs("div",{className:"p-6",children:[s.jsxs("button",{onClick:()=>E(P.id),className:"flex justify-between items-start w-full text-left",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:s.jsx(lt,{className:"h-4 w-4 text-blue-700"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[P.question,j&&!P.isApproved&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:P.phase==="post-cps"?"Post-CPS":P.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),P.category&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:P.category})]})]})]}),l===P.id?s.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):s.jsx(Ln,{className:"h-5 w-5 text-gray-500"})]}),l===P.id&&s.jsxs("div",{className:"mt-4 ml-11",children:[s.jsx("p",{className:"text-gray-700",children:P.answer}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",P.updatedDate]})]})]},P.id)):s.jsx("div",{className:"p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})},N2="forumCategories",Nl="forumThreads",_2="forumPosts",Wx=async()=>{try{const t=St(ke(re,N2),Qn("order","asc"));return(await Xe(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Erreur lors de la récupération des catégories du forum:",t),t}},h6=async t=>{try{return(await zt(ke(re,N2),t)).id}catch(e){throw console.error("Erreur lors de la création d'une catégorie:",e),e}},m6=async t=>{try{let e;if(t){const n=St(ke(re,Nl),lr("categoryId","==",t));e=await Xe(n)}else e=await Xe(ke(re,Nl));return e.docs.map(n=>{const i=n.data();return{id:n.id,...i,createdAt:i.createdAt instanceof et?i.createdAt.toMillis():Date.now(),updatedAt:i.updatedAt instanceof et?i.updatedAt.toMillis():Date.now(),lastReplyAt:i.lastReplyAt instanceof et?i.lastReplyAt.toMillis():void 0}}).sort((n,i)=>n.isPinned&&!i.isPinned?-1:!n.isPinned&&i.isPinned?1:i.updatedAt-n.updatedAt)}catch(e){throw console.error("Erreur lors de la récupération des discussions:",e),e}},p6=async t=>{try{const e=await xt(be(re,Nl,t));if(!e.exists())return null;const r=e.data();return{id:e.id,...r,createdAt:r.createdAt.toMillis(),updatedAt:r.updatedAt.toMillis(),lastReplyAt:r.lastReplyAt?r.lastReplyAt.toMillis():void 0}}catch(e){throw console.error("Erreur lors de la récupération de la discussion:",e),e}},f6=async t=>{try{const e=is(),r={...t,createdAt:e,updatedAt:e,repliesCount:0};return(await zt(ke(re,Nl),r)).id}catch(e){throw console.error("Erreur lors de la création d'une discussion:",e),e}},Tv=async t=>{try{const e=St(ke(re,_2),lr("threadId","==",t),Qn("createdAt","asc"));return(await Xe(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt.toMillis(),updatedAt:n.data().updatedAt?n.data().updatedAt.toMillis():void 0}))}catch(e){throw console.error("Erreur lors de la récupération des messages:",e),e}},x6=async t=>{try{const e=is(),r={...t,createdAt:e,isEdited:!1},n=await zt(ke(re,_2),r),i=be(re,Nl,t.threadId),a=await xt(i);return a.exists()&&await ts(i,{repliesCount:(a.data().repliesCount||0)+1,lastReplyAt:e,lastReplyAuthor:t.authorName,updatedAt:e}),n.id}catch(e){throw console.error("Erreur lors de l'ajout d'un message:",e),e}},g6=async()=>{const t=[{name:"Général",description:"Discussions générales sur l'ESIG, les études et la vie à Genève",order:1},{name:"Logement",description:"Recherche de logement, colocation, conseils pour s'installer",order:2},{name:"Cours et Études",description:"Questions sur les cours, examens, projets et formation à l'ESIG",order:3},{name:"Vie Étudiante",description:"Événements, activités, associations et vie sociale",order:4},{name:"Administratif",description:"Démarches administratives, visa, assurances, finances",order:5}];try{const e=await Wx(),r=t.filter(n=>!e.some(i=>i.name===n.name));if(r.length>0){for(const n of r)await h6(n);console.log(`${r.length} catégorie(s) ajoutée(s) avec succès`)}else console.log("Aucune nouvelle catégorie à ajouter")}catch(e){throw console.error("Erreur lors de l'initialisation des catégories par défaut:",e),e}},Zh=()=>{const{currentUser:t}=Ce(),e=at(),{categoryId:r}=xd(),[n,i]=g.useState([]),[a,o]=g.useState([]),[l,u]=g.useState(!0),[d,h]=g.useState(null),[m,x]=g.useState(null);g.useEffect(()=>{(async()=>{try{u(!0),await g6();const w=await Wx();if(i(w),r){const _=w.find(I=>I.id===r);_&&x(_)}}catch(w){console.error("Erreur lors du chargement des catégories:",w),h("Impossible de charger les catégories du forum. Veuillez réessayer plus tard.")}finally{u(!1)}})()},[r]),g.useEffect(()=>{(async()=>{if(m)try{u(!0);const w=await m6(m.id);o(w)}catch(w){console.error("Erreur lors du chargement des discussions:",w),h("Impossible de charger les discussions. Veuillez réessayer plus tard.")}finally{u(!1)}else o([])})()},[m]);const j=y=>{x(y),e(`/forum/category/${y.id}`)},A=y=>{e(`/forum/thread/${y.id}`)},D=()=>{if(!t){e("/login",{state:{from:`/forum/category/${m==null?void 0:m.id}`}});return}e(`/forum/new-thread${m?`?categoryId=${m.id}`:""}`)},S=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return d?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s.jsx("p",{children:d})})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Forum ESIG"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("div",{className:"w-full md:w-1/4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Catégories"}),l&&n.length===0?s.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(5)].map((y,w)=>s.jsx("div",{className:"h-10 bg-gray-200 rounded"},w))}):s.jsx("ul",{className:"space-y-2",children:n.map(y=>s.jsx("li",{children:s.jsx("button",{onClick:()=>j(y),className:`w-full text-left px-3 py-2 rounded transition-colors ${(m==null?void 0:m.id)===y.id?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:y.name}),s.jsx(dR,{className:"w-4 h-4"})]})})},y.id))})]})}),s.jsx("div",{className:"w-full md:w-3/4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:m?m.name:"Toutes les discussions"}),s.jsxs("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:!m,children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Nouvelle discussion"})]})]}),m&&s.jsx("div",{className:"p-4 bg-gray-50 border-b",children:s.jsx("p",{className:"text-gray-600",children:m.description})}),l&&a.length===0?s.jsx("div",{className:"p-4 animate-pulse space-y-4",children:[...Array(5)].map((y,w)=>s.jsxs("div",{className:"border-b pb-4",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},w))}):m?a.length>0?s.jsx("div",{className:"divide-y divide-gray-200",children:a.map(y=>s.jsxs("div",{onClick:()=>A(y),className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-medium text-gray-900 mb-1 flex items-center gap-2",children:[y.isPinned&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"Épinglé"}),y.isLocked&&s.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-0.5 rounded",children:"Verrouillé"}),y.title]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["par ",y.authorName," • ",S(y.createdAt)]})]}),s.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[s.jsx(lt,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:y.repliesCount})]})]}),y.lastReplyAt&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Dernière réponse par ",y.lastReplyAuthor," • ",S(y.lastReplyAt)]})]},y.id))}):s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(lt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"mb-4",children:"Aucune discussion dans cette catégorie pour le moment."}),s.jsxs("button",{onClick:D,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 mx-auto transition-colors",children:[s.jsx(as,{className:"w-4 h-4"}),s.jsx("span",{children:"Créer la première discussion"})]})]}):s.jsx("div",{className:"p-8 text-center text-gray-500",children:s.jsx("p",{children:"Sélectionnez une catégorie pour voir les discussions"})})]})})]})]})},y6=()=>{const{threadId:t}=xd(),{currentUser:e}=Ce(),r=at(),[n,i]=g.useState(null),[a,o]=g.useState([]),[l,u]=g.useState(!0),[d,h]=g.useState(null),[m,x]=g.useState(""),[j,A]=g.useState(!1);g.useEffect(()=>{(async()=>{if(t)try{u(!0);const w=await p6(t);if(!w){h("Cette discussion n'existe pas ou a été supprimée."),u(!1);return}i(w);const _=await Tv(t);o(_)}catch(w){console.error("Erreur lors du chargement de la discussion:",w),h("Impossible de charger la discussion. Veuillez réessayer plus tard.")}finally{u(!1)}})()},[t]);const D=async y=>{if(y.preventDefault(),!(!e||!n||!t||!m.trim()))try{A(!0);const w={threadId:t,content:m,authorId:e.uid,authorName:e.displayName||"Utilisateur",authorEmail:e.email||void 0};await x6(w);const _=await Tv(t);o(_),x("")}catch(w){console.error("Erreur lors de l'envoi de la réponse:",w),alert("Impossible d'envoyer votre réponse. Veuillez réessayer.")}finally{A(!1)}},S=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return l?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"animate-pulse space-y-4",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),s.jsx("div",{className:"space-y-2",children:[...Array(3)].map((y,w)=>s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),s.jsx("div",{className:"h-20 bg-gray-200 rounded w-full"})]},w))})]})}):d||!n?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:s.jsx("p",{children:d||"Discussion introuvable"})}),s.jsx("div",{className:"mt-4",children:s.jsxs(Y,{to:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx(Be,{className:"w-4 h-4"})," Retour au forum"]})})]}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-4",children:s.jsxs(Y,{to:n.categoryId?`/forum/category/${n.categoryId}`:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx(Be,{className:"w-4 h-4"})," Retour aux discussions"]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:[s.jsxs("div",{className:"p-6 border-b",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:n.title}),s.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"mr-4",children:n.authorName}),s.jsx(cr,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:S(n.createdAt)})]})]}),s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"prose max-w-none",children:n.content.split(`
`).map((y,w)=>s.jsx("p",{children:y},w))})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(lt,{className:"w-5 h-5"}),s.jsx("span",{children:"Réponses"}),a.length>0&&s.jsxs("span",{className:"text-gray-500 text-sm",children:["(",a.length,")"]})]}),a.length>0?s.jsx("div",{className:"space-y-4",children:a.map(y=>s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsxs("div",{className:"p-4 bg-gray-50 border-b flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center text-gray-700",children:[s.jsx(Ts,{className:"w-4 h-4 mr-1"}),s.jsx("span",{className:"font-medium",children:y.authorName})]}),s.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[s.jsx(cr,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:S(y.createdAt)}),y.isEdited&&s.jsx("span",{className:"ml-2 text-xs",children:"(modifié)"})]})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"prose max-w-none",children:y.content.split(`
`).map((w,_)=>s.jsx("p",{children:w},_))})})]},y.id))}):s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:[s.jsx(lt,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucune réponse pour le moment. Soyez le premier à répondre !"})]})]}),n.isLocked?s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center text-gray-700",children:s.jsx("p",{children:"Cette discussion est verrouillée et n'accepte plus de nouvelles réponses."})}):e?s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-gray-50 border-b",children:s.jsx("h3",{className:"font-medium text-gray-800",children:"Votre réponse"})}),s.jsxs("form",{onSubmit:D,className:"p-4",children:[s.jsx("div",{className:"mb-4",children:s.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"Rédigez votre réponse ici...",value:m,onChange:y=>x(y.target.value),required:!0,disabled:j})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:j||!m.trim(),children:j?"Envoi en cours...":s.jsxs(s.Fragment,{children:[s.jsx(Wd,{className:"w-4 h-4"}),s.jsx("span",{children:"Envoyer"})]})})})]})]}):s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[s.jsx("p",{className:"text-blue-800 mb-2",children:"Vous devez être connecté pour répondre à cette discussion."}),s.jsx("button",{onClick:()=>r("/login",{state:{from:`/forum/thread/${t}`}}),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Se connecter"})]})]})},v6=()=>{const{currentUser:t}=Ce(),e=at(),r=dr(),i=new URLSearchParams(r.search).get("categoryId"),[a,o]=g.useState([]),[l,u]=g.useState(!0),[d,h]=g.useState(null),[m,x]=g.useState(!1),[j,A]=g.useState(""),[D,S]=g.useState(""),[y,w]=g.useState(i||"");g.useEffect(()=>{t||e("/login",{state:{from:"/forum/new-thread"}})},[t,e]),g.useEffect(()=>{(async()=>{try{u(!0);const M=await Wx();o(M),!y&&M.length>0&&!i&&w(M[0].id)}catch(M){console.error("Erreur lors du chargement des catégories:",M),h("Impossible de charger les catégories. Veuillez réessayer plus tard.")}finally{u(!1)}})()},[y,i]);const _=async I=>{if(I.preventDefault(),!(!t||!j.trim()||!D.trim()||!y))try{x(!0);const M={categoryId:y,title:j.trim(),content:D.trim(),authorId:t.uid,authorName:t.displayName||"Utilisateur",authorEmail:t.email||void 0,isPinned:!1,isLocked:!1},q=await f6(M);e(`/forum/thread/${q}`)}catch(M){console.error("Erreur lors de la création de la discussion:",M),h("Impossible de créer la discussion. Veuillez réessayer plus tard."),x(!1)}};return t?s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"mb-4",children:s.jsxs(Y,{to:y?`/forum/category/${y}`:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[s.jsx(Be,{className:"w-4 h-4"})," Retour au forum"]})}),s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Nouvelle discussion"}),d&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:s.jsx("p",{children:d})}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsxs("form",{onSubmit:_,className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Catégorie"}),s.jsxs("select",{id:"category",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:y,onChange:I=>w(I.target.value),required:!0,disabled:l||m,children:[s.jsx("option",{value:"",children:"Sélectionner une catégorie"}),a.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre"}),s.jsx("input",{type:"text",id:"title",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Titre de votre discussion",value:j,onChange:I=>A(I.target.value),required:!0,disabled:m,maxLength:100})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenu"}),s.jsx("textarea",{id:"content",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:10,placeholder:"Rédigez votre message ici...",value:D,onChange:I=>S(I.target.value),required:!0,disabled:m})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:m||!j.trim()||!D.trim()||!y,children:m?"Création en cours...":s.jsxs(s.Fragment,{children:[s.jsx(Wd,{className:"w-4 h-4"}),s.jsx("span",{children:"Créer la discussion"})]})})})]})})]}):null},b6="modulepreload",w6=function(t){return"/Esig-prep-guide/"+t},Iv={},E2=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(u=>{if(u=w6(u),u in Iv)return;Iv[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":b6,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((x,j)=>{m.addEventListener("load",x),m.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};async function k2(){const t=await Xe(ke(re,"progressions")),e=[];return t.forEach(r=>{e.push({userId:r.id,completedSections:r.data().completedSections||[]})}),e}function j6(t=20){const[e,r]=g.useState([]),[n,i]=g.useState(!0);return g.useEffect(()=>{(async()=>{i(!0);try{const o=St(ke(re,"adminActivityLog"),Qn("date","desc"),Gu(t)),l=await Xe(o);r(l.docs.map(u=>({id:u.id,...u.data()})))}catch{r([])}i(!1)})()},[t]),{recentActivity:e,loading:n}}function N6(t,e=[]){const r={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"};let i="Admin";if(t.user){const l=e.find(u=>u.uid===t.user);l&&(i=l.displayName||l.email||t.user)}const a=r[t.type]||t.type.toLowerCase(),o=n[t.target]||t.target.toLowerCase();return`${i} ${a} ${o}`}const Pv=()=>{const{currentUser:t}=Ce(),{resources:e,guideSections:r,faqItems:n}=Wi(),{recentActivity:i,loading:a}=j6(),[o,l]=g.useState([]),[u,d]=g.useState([]),[h,m]=g.useState(!0);g.useEffect(()=>{(async()=>{m(!0);const[A,D]=await Promise.all([k2(),E2(async()=>{const{collection:y,getDocs:w}=await Promise.resolve().then(()=>O1);return{collection:y,getDocs:w}},void 0).then(({collection:y,getDocs:w})=>w(y(re,"users")))]),S=[];D.forEach(y=>{S.push({...y.data(),uid:y.id})}),l(A),d(S),m(!1)})()},[]);const x=j=>!r||r.length===0?0:Math.round(j.length/r.length*100);return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-2 gap-2 md:gap-0",children:[s.jsxs("div",{className:"order-1 md:order-none",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),s.jsxs("p",{className:"text-blue-100 mt-1",children:["Bienvenue, ",s.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]}),s.jsxs("div",{className:"order-2 md:order-none flex flex-col gap-2 sm:flex-row sm:space-x-2 sm:gap-0 w-full md:w-auto mt-2 md:mt-0",children:[s.jsxs(Y,{to:"/admin/feedbacks",className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-white/80 hover:bg-white text-blue-900 border border-blue-200 shadow transition-colors",children:[s.jsx(lt,{className:"w-4 h-4 mr-1.5"}),"Feedbacks"]}),s.jsxs(Y,{to:"/admin/future-features",className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-white/80 hover:bg-white text-blue-900 border border-blue-200 shadow transition-colors",children:[s.jsx(v2,{className:"w-4 h-4 mr-1.5"}),"Fonctionnalités à venir"]}),s.jsxs(Y,{to:"/admin/tutorial",className:"flex items-center justify-center px-3 py-2 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors w-full sm:w-auto",title:"Consulter le guide d'administration",children:[s.jsx(ur,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[s.jsxs(Y,{to:"/admin/progressions",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsx(ut,{className:"-ml-1 mr-2 h-5 w-5"}),"Progression des utilisateurs"]}),s.jsxs(Y,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx($r,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),s.jsxs(Y,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Ke,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),s.jsxs(Y,{to:"/admin/dropbox",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(f2,{className:"-ml-1 mr-2 h-5 w-5"}),"Gestionnaire Dropbox"]}),s.jsxs(Y,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(ut,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),s.jsxs(Y,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx(p2,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(ut,{className:"w-5 h-5 mr-2 text-blue-700"})," Statistiques de progression des étudiants CPS"]}),h?s.jsx("div",{className:"text-center text-gray-500",children:"Chargement des statistiques..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:u.filter(j=>j.status==="cps").length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Étudiants CPS inscrits"})]}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"text-3xl font-bold text-green-800 mb-1",children:[(()=>{const j=u.filter(y=>y.status==="cps"),A=j.length;if(A===0)return 0;const D=j.map(y=>y.uid),S=o.filter(y=>D.includes(y.userId)&&x(y.completedSections)===100).length;return Math.round(S/A*100)})(),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"ont terminé toutes les sections"})]}),s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"text-3xl font-bold text-yellow-800 mb-1",children:[(()=>{const j=u.filter(S=>S.status==="cps");if(j.length===0)return 0;const A=o.filter(S=>j.some(y=>y.uid===S.userId));if(A.length===0)return 0;const D=A.reduce((S,y)=>S+x(y.completedSections),0);return Math.round(D/A.length)})(),"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Progression moyenne"})]}),s.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-3xl font-bold text-purple-800 mb-1",children:o.filter(j=>x(j.completedSections)>=50).length}),s.jsx("div",{className:"text-sm text-gray-600",children:"utilisateurs à plus de 50%"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["pre-arrival","during-process","post-cps"].map(j=>{const A=r.filter(_=>_.phase===j),D=j==="pre-arrival"?"Pré-arrivée":j==="during-process"?"Pendant le processus":"Post-CPS",S=j==="pre-arrival"?"blue":j==="during-process"?"green":"purple",y=o.length===0||A.length===0?0:Math.round(o.reduce((_,I)=>_+Math.round(I.completedSections.filter(M=>A.some(q=>q.id===M)).length/A.length*100),0)/o.length),w=o.length===0||A.length===0?0:Math.round(o.filter(_=>A.every(I=>_.completedSections.includes(I.id))).length/o.length*100);return s.jsxs("div",{className:`p-4 bg-${S}-50 rounded-lg`,children:[s.jsxs("div",{className:`text-3xl font-bold text-${S}-800 mb-1`,children:[y,"%"]}),s.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Progression moyenne ",D]}),s.jsxs("div",{className:`text-lg font-bold text-${S}-800 mb-1`,children:[w,"%"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["ont terminé ",D]})]},j)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx(Ke,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx($r,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:s.jsx(lt,{className:"h-6 w-6"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(n)&&n.filter(j=>j.isAnswered).length>5&&s.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),s.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(j=>j.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(j=>j.isAnswered).length>0?n.filter(j=>j.isAnswered).map(j=>s.jsxs("li",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-grow pr-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-gray-800 line-clamp-1",children:j.question}),j.isApproved?s.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):s.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:j.phase==="post-cps"?"Post-CPS":j.phase==="during-process"?"Démarches":"Pré-arrivée"}),j.userEmail&&s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",j.userEmail]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:s.jsx(Y,{to:`/admin/content?edit=${j.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},j.id)):s.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[s.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(n)&&s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:n.filter(j=>!j.isAnswered).length})]}),Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>5&&s.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),s.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>0?n.filter(j=>!j.isAnswered).map(j=>s.jsxs("li",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex-grow pr-2",children:[s.jsx("span",{className:"text-gray-800 line-clamp-1",children:j.question}),s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx("span",{className:"text-xs text-gray-500",children:j.phase==="post-cps"?"Post-CPS":j.phase==="during-process"?"Démarches":"Pré-arrivée"}),j.userEmail&&s.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",j.userEmail]})]})]}),s.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:s.jsx(Y,{to:`/admin/content?edit=${j.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},j.id)):s.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs(Y,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx($r,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer le contenu"})]}),s.jsxs(Y,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(Ke,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer les ressources"})]}),s.jsxs(Y,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(lt,{className:"h-5 w-5"})}),s.jsx("span",{children:"Modérer la FAQ"})]}),s.jsxs(Y,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(ut,{className:"h-5 w-5"})}),s.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[s.jsxs(Y,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(as,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une section de guide"})]}),s.jsxs(Y,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(as,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une ressource"})]}),s.jsxs(Y,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:s.jsx(as,{className:"h-5 w-5"})}),s.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),s.jsx("div",{className:`divide-y divide-gray-200 ${i.length>5?"max-h-80 overflow-y-auto":""}`,children:a?s.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):i.length===0?s.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):i.map(j=>{var A;return s.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:s.jsx(Ke,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-800",children:N6(j,u)}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(j.date).toLocaleString()}),typeof((A=j.details)==null?void 0:A.title)=="string"&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",j.details.title]})]})]})},j.id)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(j=>j.phase==="post-cps").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="post-cps").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="post-cps").length:0})]})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(j=>j.phase==="during-process").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="during-process").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="during-process").length:0})]})})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(j=>j.phase==="pre-arrival").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="pre-arrival").length:0})]})}),s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),s.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="pre-arrival").length:0})]})})]})]})]})]}),s.jsx("div",{className:"container mx-auto px-4 py-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Gestion du contenu avancé"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(Y,{to:"/admin/webinars",className:"block p-4 bg-white border border-gray-200 rounded-lg hover:bg-blue-50 transition-colors",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-4",children:s.jsx(Us,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Gestion des webinaires"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Créer, modifier et supprimer des webinaires"})]})]})}),s.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:s.jsx(rr,{className:"w-6 h-6 text-green-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Cours en ligne"}),s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des cours en ligne et e-learning"})]})]})}),s.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-4",children:s.jsx(PR,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Podcasts"}),s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des podcasts et contenus audio"})]})]})}),s.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-lg mr-4",children:s.jsx(nr,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Événements"}),s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des événements physiques et virtuels"})]})]})}),s.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-4",children:s.jsx(rR,{className:"w-6 h-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Certificats"}),s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des certificats et badges de compétence"})]})]})}),s.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg mr-4",children:s.jsx(iR,{className:"w-6 h-6 text-indigo-600"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Statistiques avancées"}),s.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Analyse approfondie des données utilisateurs"})]})]})})]})]})})]})]})};async function Rt({type:t,target:e,targetId:r,user:n,details:i}){try{await zt(ke(re,"adminActivityLog"),{type:t,target:e,targetId:r||null,user:n||null,date:new Date().toISOString(),details:i||null}),console.log("Activité administrative enregistrée avec succès")}catch(a){console.error("Erreur lors de l'enregistrement de l'activité administrative:",a)}}const Hx=({isOpen:t,onClose:e,onConfirm:r,title:n,message:i,confirmButtonText:a="Confirmer",cancelButtonText:o="Annuler",type:l="danger"})=>{if(!t)return null;const d=(()=>{switch(l){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),h=m=>{m.target===m.currentTarget&&l!=="danger"&&e()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:h,children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[s.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[s.jsx(ls,{className:`mr-2 h-5 w-5 ${d.icon}`}),s.jsx("h3",{className:"text-lg font-medium",children:n})]}),s.jsx("div",{className:"px-6 py-4",children:s.jsx("p",{className:"text-gray-700",children:i})}),s.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:o}),s.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{r(),e()},autoFocus:!0,children:a})]})]})})};class Hl{constructor(e=0,r="Network Error"){this.status=e,this.text=r}}const _6=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},Ut={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:_6()},Qx=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},E6=(t,e="https://api.emailjs.com")=>{if(!t)return;const r=Qx(t);Ut.publicKey=r.publicKey,Ut.blockHeadless=r.blockHeadless,Ut.storageProvider=r.storageProvider,Ut.blockList=r.blockList,Ut.limitRate=r.limitRate,Ut.origin=r.origin||e},S2=async(t,e,r={})=>{const n=await fetch(Ut.origin+t,{method:"POST",headers:r,body:e}),i=await n.text(),a=new Hl(n.status,i);if(n.ok)return a;throw a},C2=(t,e,r)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!r||typeof r!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},k6=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},A2=t=>t.webdriver||!t.languages||t.languages.length===0,T2=()=>new Hl(451,"Unavailable For Headless Browser"),S6=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},C6=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},A6=(t,e)=>t instanceof FormData?t.get(e):t[e],I2=(t,e)=>{if(C6(t))return!1;S6(t.list,t.watchVariable);const r=A6(e,t.watchVariable);return typeof r!="string"?!1:t.list.includes(r)},P2=()=>new Hl(403,"Forbidden"),T6=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},I6=async(t,e,r)=>{const n=Number(await r.get(t)||0);return e-Date.now()+n},R2=async(t,e,r)=>{if(!e.throttle||!r)return!1;T6(e.throttle,e.id);const n=e.id||t;return await I6(n,e.throttle,r)>0?!0:(await r.set(n,Date.now().toString()),!1)},D2=()=>new Hl(429,"Too Many Requests"),P6=async(t,e,r,n)=>{const i=Qx(n),a=i.publicKey||Ut.publicKey,o=i.blockHeadless||Ut.blockHeadless,l=i.storageProvider||Ut.storageProvider,u={...Ut.blockList,...i.blockList},d={...Ut.limitRate,...i.limitRate};return o&&A2(navigator)?Promise.reject(T2()):(C2(a,t,e),k6(r),r&&I2(u,r)?Promise.reject(P2()):await R2(location.pathname,d,l)?Promise.reject(D2()):S2("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:t,template_id:e,template_params:r}),{"Content-type":"application/json"}))},R6=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},D6=t=>typeof t=="string"?document.querySelector(t):t,L6=async(t,e,r,n)=>{const i=Qx(n),a=i.publicKey||Ut.publicKey,o=i.blockHeadless||Ut.blockHeadless,l=Ut.storageProvider||i.storageProvider,u={...Ut.blockList,...i.blockList},d={...Ut.limitRate,...i.limitRate};if(o&&A2(navigator))return Promise.reject(T2());const h=D6(r);C2(a,t,e),R6(h);const m=new FormData(h);return I2(u,m)?Promise.reject(P2()):await R2(location.pathname,d,l)?Promise.reject(D2()):(m.append("lib_version","4.4.1"),m.append("service_id",t),m.append("template_id",e),m.append("user_id",a),S2("/api/v1.0/email/send-form",m))},Kx={init:E6,send:P6,sendForm:L6,EmailJSResponseStatus:Hl},M6={async sendFaqAnswerNotification(t,e,r){try{const n=be(re,"faq",t),i=await xt(n);if(!i.exists())return console.error(`FAQ item not found (ID: ${t}) dans la collection 'faq'. Vérifiez le nom de collection.`),!1;const a=i.data();if(!a.userEmail)return console.log("No user email associated with this FAQ item"),!1;const o=ke(re,"users"),l=St(o,lr("email","==",a.userEmail)),u=await Xe(l);let d="Utilisateur";u.empty||(d=u.docs[0].data().displayName||"Utilisateur");const h={to_email:a.userEmail,to_name:d,question:e,answer:r,app_name:"ESIG-prep-guide",faq_url:`${window.location.origin}/Esig-prep-guide/faq`};return await V6(h)}catch(n){return console.error("Error sending FAQ answer notification:",n),!1}}},Sa={SERVICE_ID:"service_vhvuugn",TEMPLATE_ID:"template_93nn8cu",PUBLIC_KEY:"l4eGBb6GgLVODJBOf"},V6=async t=>{console.log("Préparation de l'envoi d'email avec les données:",t);try{const e={to_email:t.to_email,to_name:t.to_name||"Utilisateur",question:t.question,answer:t.answer,app_name:t.app_name,faq_url:t.faq_url},r=await Kx.send(Sa.SERVICE_ID,Sa.TEMPLATE_ID,e,Sa.PUBLIC_KEY);return console.log("Résultat de l'envoi d'email:",r.status,r.text),r.status===200}catch(e){return console.error("Erreur lors de l'envoi d'email:",e),!1}},F6=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(null),[i,a]=g.useState(null);return{isSending:t,sendSuccess:r,errorMessage:i,sendFaqAnswerNotification:async(l,u,d)=>{e(!0),n(null),a(null);try{const h=await M6.sendFaqAnswerNotification(l,u,d);return n(h),h}catch(h){const m=h instanceof Error?h.message:"Une erreur est survenue lors de l'envoi de la notification";return a(m),console.error("Failed to send FAQ answer notification:",h),!1}finally{e(!1)}}}},em=()=>{const[t]=cj(),e=at(),{currentUser:r,isAdmin:n,isEditor:i}=Ce(),a=window.location.href.includes("/admin/"),o=a?n():!1;g.useEffect(()=>{if(a&&!n()&&i()){const z=window.location.search;e(`/editor/content${z}`)}},[a,n,i,e]);const{sendFaqAnswerNotification:l}=F6(),u=(z,oe)=>`${o?"/admin":"/editor"}/content?edit=${z}${oe==="faq"?"&mode=faq":""}`,{guideSections:d,addGuideSection:h,updateGuideSection:m,deleteGuideSection:x,resources:j,faqItems:A,addFAQItem:D,updateFAQItem:S,deleteFAQItem:y}=Wi(),w=t.get("new")==="section",_=t.get("new")==="faq",I=w?null:t.get("edit")&&d.some(z=>z.id===t.get("edit"))?t.get("edit"):null,M=_?null:t.get("edit")&&A.some(z=>z.id===t.get("edit"))?t.get("edit"):null,[q,N]=g.useState(""),[f,v]=g.useState("post-cps"),[E,C]=g.useState(""),[P,k]=g.useState(1),[te,ce]=g.useState([]),[de,O]=g.useState([]),[V,H]=g.useState(!1),[F,R]=g.useState(null),[U,W]=g.useState(""),[ne,pe]=g.useState("bulletList"),[Z,J]=g.useState([]),[ae,_e]=g.useState(""),[De,Ve]=g.useState("text"),[Ae,ze]=g.useState(""),[gt,X]=g.useState(""),[He,$e]=g.useState(""),[ds,Je]=g.useState(""),[G,xe]=g.useState("post-cps"),[Ee,qe]=g.useState("phase"),[We,ye]=g.useState(!0),[me,Ue]=g.useState(!1),[Er,Hi]=g.useState(!1),[Kn,Hd]=g.useState("section"),[Yn,Jn]=g.useState(!1),[kr,an]=g.useState(null);g.useEffect(()=>{if(I){const z=d.find(oe=>oe.id===I);z&&(N(z.title),v(z.phase),C(z.content),k(z.order),ce(Array.isArray(z.resources)?z.resources:[]),O(z.subSections||[]))}else if(w){N(""),v("post-cps"),C("");const z=d.filter(oe=>oe.phase==="post-cps");k(z.length>0?Math.max(...z.map(oe=>oe.order))+1:1),ce([]),O([])}if(M){const z=A.find(oe=>oe.id===M);z&&(X(z.question),$e(z.answer),Je(z.category||""),xe(z.phase||"post-cps"),qe(z.questionType||"phase"),ye(!!z.isApproved),Ue(!!z.isAnswered))}else _&&(X(""),$e(""),Je(""),xe("post-cps"),qe("phase"),ye(!0),Ue(!1))},[I,w,d,M,_,A]);const Qd=()=>{$e(""),Ue(!1)},Kd=z=>{const oe=z.trim()!==""&&z!=="Cette question est en attente de réponse par notre équipe.";Ue(oe)},Qi=z=>{if(z.preventDefault(),_||M)if(M){const oe=He.trim()!==""&&He!=="Cette question est en attente de réponse par notre équipe.";Ue(oe);const Ie=A.find(Ds=>Ds.id===M),At=(Ie==null?void 0:Ie.isAnswered)||!1;S(M,{question:gt,answer:He,category:ds,phase:Ee==="phase"?G:void 0,questionType:Ee,isApproved:We,isAnswered:oe}),oe&&!At&&M&&(Jn(!0),an(null),l(M,gt,He).then(Ds=>{Ds?(console.log("Email de notification envoyé avec succès"),an("success"),setTimeout(()=>{Jn(!1)},5e3)):(console.error("Échec de l'envoi de l'email de notification"),an("error"),setTimeout(()=>{Jn(!1)},5e3))}).catch(Ds=>{console.error("Erreur lors de l'envoi de l'email de notification:",Ds),an("error"),setTimeout(()=>{Jn(!1)},5e3)})),Rt({type:"Modification",target:"FAQ",targetId:M,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{question:gt}})}else{const oe=He.trim()!==""&&He!=="Cette question est en attente de réponse par notre équipe.";Ue(oe),D({question:gt,answer:He,category:ds,phase:Ee==="phase"?G:void 0,questionType:Ee,isApproved:We,isAnswered:oe,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Rt({type:"Ajout",target:"FAQ",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{question:gt}})}else I?(m(I,{title:q,phase:f,content:E,order:P,resources:te,subSections:de.length>0?de:void 0}),Rt({type:"Modification",target:"Section",targetId:I,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:q}})):(h({title:q,phase:f,content:E,order:P,resources:te,subSections:de.length>0?de:void 0}),Rt({type:"Ajout",target:"Section",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:q}}));if(_||w){if(_)X(""),$e(""),Je(""),xe("post-cps"),qe("phase"),ye(!0),Ue(!1);else if(w){N(""),C("");const oe=d.filter(Ie=>Ie.phase===f);k(oe.length>0?Math.max(...oe.map(Ie=>Ie.order))+1:1),ce([])}}},Ja=z=>{Hd(z),Hi(!0)},Ql=()=>{Kn==="section"&&I?(x(I),Rt({type:"Suppression",target:"Section",targetId:I,user:r==null?void 0:r.uid,details:{title:q}}),e("/admin/content")):Kn==="faq"&&M&&(y(M),Rt({type:"Suppression",target:"FAQ",targetId:M,user:r==null?void 0:r.uid,details:{question:gt}})),Hi(!1)},Xn=z=>{te.includes(z)?ce(te.filter(oe=>oe!==z)):ce([...te,z])},Ki=z=>{z?(R(z),W(z.title),pe(z.type),J([...z.items])):(R(null),W(""),pe("bulletList"),J([])),H(!0)},Zn=()=>{H(!1),W(""),_e("")},Sr=()=>{if(ae.trim()==="")return;const z={id:`item-${Date.now()}-${Math.floor(Math.random()*1e3)}`,content:ae.trim()};ne==="inputField"&&(z.fieldType=De,De==="select"&&Ae.trim()!==""&&(z.options=Ae.split(",").map(oe=>oe.trim()))),J([...Z,z]),_e(""),ze("")},Kl=z=>{J(Z.filter(oe=>oe.id!==z))},Yi=async()=>{if(U.trim()===""||Z.length===0){alert("Veuillez ajouter un titre et au moins un élément");return}const z={id:F?F.id:Date.now().toString(),title:U,type:ne,items:Z};let oe;if(F?oe=de.map(Ie=>Ie.id===F.id?z:Ie):oe=[...de,z],O(oe),I)try{d.find(At=>At.id===I)&&(await m(I,{subSections:oe}),Rt({type:"Modification",target:"Sous-section",targetId:I,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{action:F?"Modification de sous-section":"Ajout de sous-section",sectionTitle:q}}))}catch(Ie){console.error("Erreur lors de la sauvegarde de la sous-section:",Ie),alert("Erreur lors de la sauvegarde. Veuillez réessayer.")}Zn()},Yl=async z=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette sous-section?")){const oe=de.filter(Ie=>Ie.id!==z);if(O(oe),I)try{d.find(At=>At.id===I)&&(await m(I,{subSections:oe.length>0?oe:[]}),Rt({type:"Modification",target:"Sous-section",targetId:I,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{action:"Suppression de sous-section",sectionTitle:q}}))}catch(Ie){console.error("Erreur lors de la suppression de la sous-section:",Ie),alert("Erreur lors de la suppression. Veuillez réessayer."),O(de)}}},ei=z=>{if(z===0)return;const oe=[...de];[oe[z],oe[z-1]]=[oe[z-1],oe[z]],O(oe)},Jl=z=>{if(z===de.length-1)return;const oe=[...de];[oe[z],oe[z+1]]=[oe[z+1],oe[z]],O(oe)},_t=j.filter(z=>z.phase===f),Rs={"post-cps":d.filter(z=>z.phase==="post-cps").sort((z,oe)=>z.order-oe.order),"during-process":d.filter(z=>z.phase==="during-process").sort((z,oe)=>z.order-oe.order),"pre-arrival":d.filter(z=>z.phase==="pre-arrival").sort((z,oe)=>z.order-oe.order)};return s.jsxs("div",{className:"bg-gray-50 min-h-screen relative",children:[Yn&&s.jsxs("div",{className:`fixed top-6 right-6 p-4 rounded-md shadow-md z-50 flex items-center transition-all duration-300 ease-in-out ${kr==="success"?"bg-green-100 border-l-4 border-green-500":kr==="error"?"bg-red-100 border-l-4 border-red-500":"bg-blue-100 border-l-4 border-blue-500"}`,children:[kr==="success"?s.jsx(Mi,{className:"w-5 h-5 text-green-600 mr-3"}):kr==="error"?s.jsx(d2,{className:"w-5 h-5 text-red-600 mr-3"}):s.jsx(Br,{className:"w-5 h-5 text-blue-600 mr-3 animate-pulse"}),s.jsx("div",{children:kr==="success"?s.jsx("p",{className:"text-green-800 font-medium",children:"Email de notification envoyé avec succès!"}):kr==="error"?s.jsx("p",{className:"text-red-800 font-medium",children:"Échec de l'envoi de l'email de notification."}):s.jsx("p",{className:"text-blue-800 font-medium",children:"Envoi de la notification par email..."})})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:w?"Ajouter une nouvelle section":_?"Ajouter une question FAQ":M?"Modifier la FAQ":I?"Modifier la section":"Édition"}),s.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_||M?s.jsx("form",{onSubmit:Qi,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),s.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:gt,onChange:z=>X(z.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),M&&s.jsx("button",{type:"button",onClick:Qd,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),s.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:He,onChange:z=>{$e(z.target.value),Kd(z.target.value)},required:!0}),s.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${me?"bg-green-500":"bg-yellow-500"} mr-2`}),s.jsx("span",{className:"text-gray-600",children:me?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),s.jsxs("select",{id:"faq-questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Ee,onChange:z=>qe(z.target.value),required:!0,children:[s.jsx("option",{value:"phase",children:"En lien avec une phase"}),s.jsx("option",{value:"site",children:"Fonctionnement du site"}),s.jsx("option",{value:"general",children:"Question générale"})]})]}),Ee==="phase"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:G,onChange:z=>xe(z.target.value),required:Ee==="phase",children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:ds,onChange:z=>Je(z.target.value),required:!0})]}),s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:We,onChange:z=>ye(z.target.checked)}),s.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[s.jsx("div",{children:M&&s.jsxs("button",{type:"button",onClick:()=>Ja("faq"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(yi,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Dp,{className:"mr-2 h-4 w-4"}),_?"Ajouter":"Enregistrer"]})]})]})]})}):s.jsx("form",{onSubmit:Qi,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),s.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:q,onChange:z=>N(z.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:z=>{const oe=z.target.value;v(oe);const Ie=d.filter(At=>At.phase===oe);k(Ie.length>0?Math.max(...Ie.map(At=>At.order))+1:1),ce([])},required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),s.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:z=>k(parseInt(z.target.value)),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),s.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:z=>C(z.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sous-sections"}),s.jsxs("button",{type:"button",onClick:()=>Ki(),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter une sous-section"]})]}),de.length>0?s.jsx("div",{className:"mt-2 space-y-3 border border-gray-200 rounded-lg p-4 bg-gray-50",children:de.map((z,oe)=>s.jsxs("div",{className:"bg-white p-3 rounded-md border border-gray-200 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center",children:[z.type==="bulletList"&&s.jsx(Rp,{className:"w-4 h-4 text-blue-500 mr-2"}),z.type==="checkList"&&s.jsx(tu,{className:"w-4 h-4 text-green-500 mr-2"}),z.type==="inputField"&&s.jsx(su,{className:"w-4 h-4 text-purple-500 mr-2"}),s.jsx("h4",{className:"text-md font-medium text-gray-800",children:z.title})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{type:"button",onClick:()=>ei(oe),className:"text-gray-400 hover:text-gray-600 p-1 rounded",disabled:oe===0,title:"Monter",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),s.jsx("button",{type:"button",onClick:()=>Jl(oe),className:"text-gray-400 hover:text-gray-600 p-1 rounded",disabled:oe===de.length-1,title:"Descendre",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),s.jsx("button",{type:"button",onClick:()=>Ki(z),className:"text-blue-500 hover:text-blue-700 p-1 rounded",title:"Modifier",children:s.jsx(gR,{className:"h-4 w-4"})}),s.jsx("button",{type:"button",onClick:()=>Yl(z.id),className:"text-red-500 hover:text-red-700 p-1 rounded",title:"Supprimer",children:s.jsx(yi,{className:"h-4 w-4"})})]})]}),s.jsx("ul",{className:"pl-5 mt-1 space-y-1",children:z.items.map(Ie=>s.jsxs("li",{className:"text-sm text-gray-700",children:[z.type==="bulletList"&&s.jsxs("span",{children:["• ",Ie.content]}),z.type==="checkList"&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),s.jsx("span",{children:Ie.content})]}),z.type==="inputField"&&s.jsxs("div",{className:"flex items-center",children:[s.jsxs("span",{children:[Ie.content,":"]}),s.jsx("span",{className:"ml-2 text-gray-400 italic",children:"champ de saisie"})]})]},Ie.id))})]},z.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucune sous-section ajoutée. Ajoutez des sous-sections pour organiser votre contenu."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(_t)&&_t.length>0?s.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:_t.map(z=>s.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[s.jsx("input",{type:"checkbox",id:`resource-${z.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:te.includes(z.id),onChange:()=>Xn(z.id)}),s.jsx("label",{htmlFor:`resource-${z.id}`,className:"ml-3 block text-sm text-gray-700",children:z.title})]},z.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[s.jsx("div",{children:I&&s.jsxs("button",{type:"button",onClick:()=>Ja("section"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx(yi,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Dp,{className:"mr-2 h-4 w-4"}),w?"Ajouter":"Enregistrer"]})]})]})]})})})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),s.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/content?new=section`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Rs["post-cps"])&&Rs["post-cps"].length>0?s.jsx("ul",{className:"space-y-2",children:Rs["post-cps"].map(z=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),s.jsx("span",{className:"flex-grow",children:z.title}),s.jsx(Xh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Rs["during-process"])&&Rs["during-process"].length>0?s.jsx("ul",{className:"space-y-2",children:Rs["during-process"].map(z=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),s.jsx("span",{className:"flex-grow",children:z.title}),s.jsx(Xh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Rs["pre-arrival"])&&Rs["pre-arrival"].length>0?s.jsx("ul",{className:"space-y-2",children:Rs["pre-arrival"].map(z=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${I===z.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),s.jsx("span",{className:"flex-grow",children:z.title}),s.jsx(Xh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),s.jsxs("div",{className:"mt-8 border-t pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),s.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/content?new=faq&mode=faq`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const z={};return A.forEach(oe=>{const Ie=oe.category||"Non catégorisé";z[Ie]||(z[Ie]=[]),z[Ie].push(oe)}),Object.entries(z).map(([oe,Ie])=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:oe}),Ie.length>0?s.jsx("ul",{className:"space-y-2",children:Ie.map(At=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(u(At.id,"faq")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${M===At.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("span",{className:"flex-grow",children:At.question}),!At.isAnswered&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),At.isApproved?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuvée"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuvée"})]})},At.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},oe))})()]})]})]})})]})}),s.jsx(Hx,{isOpen:Er,onClose:()=>Hi(!1),onConfirm:Ql,title:`Confirmer la suppression de ${Kn==="section"?"la section":"la question FAQ"}`,message:Kn==="section"?`Êtes-vous sûr de vouloir supprimer la section "${q}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${gt}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),V&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:F?"Modifier la sous-section":"Ajouter une sous-section"}),s.jsx("button",{onClick:Zn,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:s.jsx(Ct,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"subSectionTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de la sous-section"}),s.jsx("input",{type:"text",id:"subSectionTitle",className:"block w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:U,onChange:z=>W(z.target.value),placeholder:"Ex: Documents nécessaires"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de sous-section"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${ne==="bulletList"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>pe("bulletList"),children:[s.jsx(Rp,{className:"w-4 h-4 mr-2"}),"Liste à puces"]}),s.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${ne==="checkList"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>pe("checkList"),children:[s.jsx(tu,{className:"w-4 h-4 mr-2"}),"Cases à cocher"]}),s.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${ne==="inputField"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>pe("inputField"),children:[s.jsx(su,{className:"w-4 h-4 mr-2"}),"Champs à remplir"]})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-1",children:s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:ne==="bulletList"?"Éléments de la liste":ne==="checkList"?"Éléments à cocher":"Champs à remplir"})}),s.jsxs("div",{className:"mb-4 flex",children:[s.jsx("input",{type:"text",className:"block w-full rounded-l-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:ae,onChange:z=>_e(z.target.value),placeholder:ne==="bulletList"?"Nouvel élément de liste":ne==="checkList"?"Nouvelle case à cocher":"Libellé du champ"}),s.jsx("button",{type:"button",onClick:Sr,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-r-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s.jsx(as,{className:"w-4 h-4"})})]}),ne==="inputField"&&s.jsxs("div",{className:"mb-4 space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de champ"}),s.jsxs("select",{className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:De,onChange:z=>Ve(z.target.value),children:[s.jsx("option",{value:"text",children:"Texte"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"url",children:"URL"}),s.jsx("option",{value:"number",children:"Nombre"}),s.jsx("option",{value:"date",children:"Date"}),s.jsx("option",{value:"datetime",children:"Date et heure"}),s.jsx("option",{value:"boolean",children:"Case à cocher (Oui/Non)"}),s.jsx("option",{value:"select",children:"Liste déroulante"}),s.jsx("option",{value:"longtext",children:"Texte long"}),s.jsx("option",{value:"airport",children:"Aéroport"})]})]}),De==="select"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Options (séparées par des virgules)"}),s.jsx("input",{type:"text",className:"block w-full rounded-md border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:Ae,onChange:z=>ze(z.target.value),placeholder:"Option 1, Option 2, Option 3"})]})]}),Z.length>0?s.jsx("ul",{className:"bg-gray-50 rounded-md border border-gray-200 p-3 space-y-2 max-h-60 overflow-y-auto",children:Z.map(z=>s.jsxs("li",{className:"flex items-center justify-between group p-2 hover:bg-gray-100 rounded-md",children:[s.jsxs("div",{className:"flex items-center",children:[ne==="bulletList"&&s.jsx("span",{className:"mr-2",children:"•"}),ne==="checkList"&&s.jsx(tu,{className:"w-4 h-4 mr-2 text-gray-400"}),ne==="inputField"&&s.jsx(su,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsx("span",{children:z.content}),z.fieldType&&s.jsxs("span",{className:"ml-2 text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:[z.fieldType,z.options?` (${z.options.join(", ")})`:""]})]}),s.jsx("button",{type:"button",onClick:()=>Kl(z.id),className:"text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Ct,{className:"w-4 h-4"})})]},z.id))}):s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucun élément ajouté. Ajoutez au moins un élément pour continuer."})]})]}),s.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:Zn,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"button",onClick:Yi,className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:F?"Mettre à jour":"Ajouter"})]})]})})]})};var O6="rpc",q6="upload",U6="download",tm="app",sm="user",rm="team",z6="noauth",B6="cookie",Ju="dropboxapi.com",Rv="dropbox.com",Mp={api:"api",notify:"bolt",content:"api-content"},L={};L.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};L.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};L.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};L.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};L.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};L.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};L.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};L.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};L.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};L.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};L.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};L.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};L.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};L.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};L.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};L.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};L.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};L.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};L.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};L.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};L.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};L.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};L.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};L.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};L.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};L.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};L.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};L.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};L.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};L.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};L.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};L.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};L.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};L.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};L.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};L.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};L.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};L.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};L.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};L.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};L.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};L.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};L.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};L.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};L.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};L.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};L.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};L.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};L.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};L.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};L.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};L.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};L.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};L.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};L.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};L.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};L.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};L.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};L.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};L.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};L.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};L.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};L.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};L.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};L.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};L.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};L.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};L.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};L.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};L.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};L.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};L.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};L.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};L.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};L.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};L.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};L.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};L.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};L.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};L.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};L.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};L.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};L.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};L.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};L.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};L.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};L.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};L.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};L.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};L.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};L.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};L.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};L.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};L.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};L.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};L.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};L.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};L.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};L.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};L.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};L.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};L.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};L.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};L.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};L.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};L.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};L.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};L.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};L.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};L.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};L.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};L.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};L.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};L.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};L.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};L.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};L.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};L.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};L.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};L.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};L.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};L.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};L.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};L.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};L.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};L.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};L.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};L.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};L.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};L.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};L.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};L.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};L.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};L.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};L.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};L.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};L.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};L.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};L.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};L.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};L.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};L.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};L.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};L.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};L.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};L.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};L.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};L.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};L.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};L.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};L.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};L.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};L.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};L.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};L.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};L.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};L.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};L.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};L.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};L.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};L.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};L.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};L.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};L.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};L.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};L.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};L.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};L.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};L.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};L.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};L.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};L.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};L.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};L.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};L.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};L.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};L.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};L.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};L.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};L.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};L.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};L.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};L.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};L.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};L.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};L.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};L.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};L.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};L.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};L.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};L.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};L.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};L.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};L.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};L.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};L.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};L.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};L.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};L.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};L.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};L.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};L.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};L.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};L.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};L.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};L.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};L.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};L.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};L.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};L.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};L.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};L.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};L.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};L.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};L.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};L.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};L.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};L.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};L.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};L.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};L.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};L.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};L.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};L.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};L.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};L.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};L.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};L.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};L.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};L.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};L.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};L.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};L.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};L.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};L.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};L.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};L.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};L.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};L.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};L.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};L.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};L.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};L.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};L.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};L.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};L.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};L.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};L.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};L.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};L.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};L.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function $6(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var nm=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ju,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return n?(r!==Ju&&Mp[e]!==void 0&&(e=Mp[e],n="-"),"https://".concat(e).concat(n).concat(r,"/2/")):"https://".concat(r,"/2/")},G6=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rv;return e!==Rv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},Dv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ju,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",n="api";return e!==Ju&&(n=Mp[n],r="-"),"https://".concat(n).concat(r).concat(e,"/oauth2/token")};function Lv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,$6)}function W6(t){return new Date(Date.now()+t*1e3)}function Mv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof q2>"u"||typeof window<"u"}function im(){return typeof window<"u"}function am(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Rc(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function ru(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ru=function(r){return typeof r}:ru=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},ru(t)}function H6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_l(t,e)}function K6(t){var e=L2();return function(){var n=El(t),i;if(e){var a=El(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Y6(this,i)}}function Y6(t,e){return e&&(ru(e)==="object"||typeof e=="function")?e:J6(t)}function J6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vp(t){var e=typeof Map=="function"?new Map:void 0;return Vp=function(n){if(n===null||!X6(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return nu(n,arguments,El(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_l(i,n)},Vp(t)}function nu(t,e,r){return L2()?nu=Reflect.construct:nu=function(i,a,o){var l=[null];l.push.apply(l,a);var u=Function.bind.apply(i,l),d=new u;return o&&_l(d,o.prototype),d},nu.apply(null,arguments)}function L2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function X6(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _l(t,e){return _l=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_l(t,e)}function El(t){return El=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},El(t)}var Z6=function(t){Q6(r,t);var e=K6(r);function r(n,i,a){var o;return H6(this,r),o=e.call(this,"Response failed with a ".concat(n," code")),o.name="DropboxResponseError",o.status=n,o.headers=i,o.error=a,o}return r}(Vp(Error));function eD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var M2=function t(e,r,n){eD(this,t),this.status=e,this.headers=r,this.result=n};function V2(t){return t.text().then(function(e){var r;try{r=JSON.parse(e)}catch{r=e}throw new Z6(t.status,t.headers,r)})}function Xu(t){return t.ok?t.text().then(function(e){var r;try{r=JSON.parse(e)}catch{r=e}return new M2(t.status,t.headers,r)}):V2(t)}function tD(t){return t.ok?new Promise(function(e){Mv()?t.blob().then(function(r){return e(r)}):t.buffer().then(function(r){return e(r)})}).then(function(e){var r=JSON.parse(t.headers.get("dropbox-api-result"));return Mv()?r.fileBlob=e:r.fileBinary=e,new M2(t.status,t.headers,r)}):V2(t)}function sD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nD(t,e,r){return e&&rD(t.prototype,e),t}var Dc,ni,om,iD=300*1e3,Vv=128,aD=["legacy","offline","online"],oD=["code","token"],lD=["none","user","team"],cD=function(){function t(e){sD(this,t),e=e||{},im()?(Dc=window.fetch.bind(window),ni=window.crypto||window.msCrypto):am()?(Dc=self.fetch.bind(self),ni=self.crypto):(Dc=require("node-fetch"),ni=require("crypto")),typeof TextEncoder>"u"?om=require("util").TextEncoder:om=TextEncoder,this.fetch=e.fetch||Dc,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return nD(t,[{key:"setAccessToken",value:function(r){this.accessToken=r}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(r){this.clientId=r}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(r){this.clientSecret=r}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(r){this.refreshToken=r}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(r){this.accessTokenExpiresAt=r}},{key:"setCodeVerifier",value:function(r){this.codeVerifier=r}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var r=this,n=new om,i=n.encode(this.codeVerifier),a;if(im()||am())return ni.subtle.digest("SHA-256",i).then(function(l){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(l)));a=Rc(u).substr(0,128),r.codeChallenge=a});var o=ni.createHash("sha256").update(i).digest();return a=Rc(o),this.codeChallenge=a,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var r;if(im()||am()){var n=new Uint8Array(Vv),i=ni.getRandomValues(n),a=btoa(i);r=Rc(a).substr(0,128)}else{var o=ni.randomBytes(Vv);r=Rc(o).substr(0,128)}return this.codeVerifier=r,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(r,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,h=this.getClientId(),m=G6(this.domain);if(!h)throw new Error("A client id is required. You can set the client id using .setClientId().");if(a!=="code"&&!r)throw new Error("A redirect uri is required.");if(!oD.includes(a))throw new Error("Authorization type must be code or token");if(o&&!aD.includes(o))throw new Error("Token Access Type must be legacy, offline, or online");if(l&&!(l instanceof Array))throw new Error("Scope must be an array of strings");if(!lD.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var x;return a==="code"?x="".concat(m,"?response_type=code&client_id=").concat(h):x="".concat(m,"?response_type=token&client_id=").concat(h),r&&(x+="&redirect_uri=".concat(r)),n&&(x+="&state=".concat(n)),o&&(x+="&token_access_type=".concat(o)),l&&(x+="&scope=".concat(l.join(" "))),u!=="none"&&(x+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return x+="&code_challenge_method=S256",x+="&code_challenge=".concat(i.codeChallenge),x}):Promise.resolve(x)}},{key:"getAccessTokenFromCode",value:function(r,n){var i=this.getClientId(),a=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");var o=Dv(this.domain,this.domainDelimiter);if(o+="?grant_type=authorization_code",o+="&code=".concat(n),o+="&client_id=".concat(i),a)o+="&client_secret=".concat(a);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");o+="&code_verifier=".concat(this.codeVerifier)}r&&(o+="&redirect_uri=".concat(r));var l={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(o,l).then(function(u){return Xu(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var r=this.getRefreshToken()&&this.getClientId(),n=!this.getAccessTokenExpiresAt()||new Date(Date.now()+iD)>=this.getAccessTokenExpiresAt(),i=!this.getAccessToken();return(n||i)&&r?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var r=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.getClientId(),a=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");if(n&&!(n instanceof Array))throw new Error("Scope must be an array of strings");var o=Dv(this.domain,this.domainDelimiter),l={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:i,refresh_token:this.getRefreshToken()};a&&(u.client_secret=a),n&&(u.scope=n.join(" ")),l.body=u}else o+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),o+="&client_id=".concat(i),a&&(o+="&client_secret=".concat(a)),n&&(o+="&scope=".concat(n.join(" ")));return this.fetch(o,l).then(function(d){return Xu(d)}).then(function(d){r.setAccessToken(d.result.access_token),r.setAccessTokenExpiresAt(W6(d.result.expires_in))})}}]),t}();function uD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hD(t,e,r){return e&&dD(t.prototype,e),t}var mD=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,Zs=function(){function t(e){uD(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new cD(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,L)}return hD(t,[{key:"request",value:function(r,n,i,a,o){switch(o){case O6:return this.rpcRequest(r,n,i,a);case U6:return this.downloadRequest(r,n,i,a);case q6:return this.uploadRequest(r,n,i,a);default:throw new Error("Invalid request style: ".concat(o))}}},{key:"rpcRequest",value:function(r,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l={method:"POST",body:n?JSON.stringify(n):null,headers:{}};return n&&(l.headers["Content-Type"]="application/json"),o.setAuthHeaders(i,l),o.setCommonHeaders(l),l}).then(function(l){return o.fetch(nm(a,o.domain,o.domainDelimiter)+r,l)}).then(function(l){return Xu(l)})}},{key:"downloadRequest",value:function(r,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l={method:"POST",headers:{"Dropbox-API-Arg":Lv(n)}};return o.setAuthHeaders(i,l),o.setCommonHeaders(l),l}).then(function(l){return o.fetch(nm(a,o.domain,o.domainDelimiter)+r,l)}).then(function(l){return tD(l)})}},{key:"uploadRequest",value:function(r,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l=n.contents;delete n.contents;var u={body:l,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":Lv(n)}};return o.setAuthHeaders(i,u),o.setCommonHeaders(u),u}).then(function(l){return o.fetch(nm(a,o.domain,o.domainDelimiter)+r,l)}).then(function(l){return Xu(l)})}},{key:"setAuthHeaders",value:function(r,n){if(r.split(",").length>1){var i=r.replace(" ","").split(",");i.includes(sm)&&this.auth.getAccessToken()?r=sm:i.includes(rm)&&this.auth.getAccessToken()?r=rm:i.includes(tm)&&(r=tm)}switch(r){case tm:if(this.auth.clientId&&this.auth.clientSecret){var a=mD("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));n.headers.Authorization="Basic ".concat(a)}break;case rm:case sm:this.auth.getAccessToken()&&(n.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case z6:case B6:break;default:throw new Error("Unhandled auth type: ".concat(r))}}},{key:"setCommonHeaders",value:function(r){var n=this;if(this.selectUser&&(r.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(r.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(r.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var i=Object.keys(this.customHeaders);i.forEach(function(a){r.headers[a]=n.customHeaders[a]})}}}]),t}();async function jn(){try{let t;window.location.hostname.includes("netlify.app")?t="/.netlify/functions/dropbox-token":t="https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token",console.log(`Récupération du token Dropbox depuis: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Erreur: ${e.status}`);return(await e.json()).access_token}catch(t){throw console.error("Erreur lors de la récupération du token Dropbox:",t),t}}function Yx({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:r=!1}){const[n,i]=g.useState(null),[a,o]=g.useState(!1),[l,u]=g.useState(null),[d,h]=g.useState({isOpen:!1,type:null,title:"",message:""}),m=A=>{A.target.files&&A.target.files.length>0&&i(A.target.files[0])},x=()=>{h(A=>({...A,isOpen:!1}))},j=async()=>{if(!n)return;o(!0);const A=new Zs({accessToken:await jn()});let D=!1,S="";try{const y=await A.filesUpload({path:"/"+encodeURIComponent(n.name),contents:n,autorename:!0});D=!0,S=y.result.path_display||y.result.path_lower||"/"+n.name,console.log("Upload réussi!",y);try{const _=(await A.sharingCreateSharedLinkWithSettings({path:S})).result.url.replace("?dl=0","?raw=1");u(_),t&&t(_),h({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox et est prêt à être utilisé.",fileName:n.name,url:_})}catch(w){console.error("Erreur lors de la création du lien partageable:",w),h({isOpen:!0,type:"warning",title:"Upload réussi avec avertissement",message:"Le fichier a été uploadé avec succès, mais la création du lien a échoué. Vous ne pourrez pas y accéder directement.",fileName:n.name})}}catch(y){console.error("Erreur lors de l'upload:",y),h({isOpen:!0,type:"error",title:"Échec de l'upload",message:y instanceof Error?`${y.message} (${y.constructor.name})`:String(y),fileName:n.name})}o(!1),D&&!d.isOpen&&h({isOpen:!0,type:"success",title:"Upload réussi !",message:"Votre fichier a été téléchargé avec succès sur Dropbox.",fileName:n.name})};return s.jsxs("div",{className:r?"flex items-center":"space-y-3",children:[s.jsx("div",{className:r?"flex-grow mr-2":"mb-2",children:s.jsx("input",{type:"file",onChange:m,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),s.jsx("button",{onClick:j,disabled:!n||a,className:`${r?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:a?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi..."]}):s.jsxs(s.Fragment,{children:[s.jsx(b2,{className:"w-4 h-4 mr-2"}),e]})}),l&&!r&&s.jsx("div",{className:"mt-2 text-sm text-gray-600",children:s.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})}),d.isOpen&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto overflow-hidden",children:[s.jsxs("div",{className:`py-4 px-5 flex items-center ${d.type==="success"?"bg-green-50":d.type==="error"?"bg-red-50":"bg-yellow-50"}`,children:[s.jsxs("div",{className:"flex-shrink-0 mr-3",children:[d.type==="success"&&s.jsx(ws,{className:"h-6 w-6 text-green-500"}),d.type==="error"&&s.jsx(xs,{className:"h-6 w-6 text-red-500"}),d.type==="warning"&&s.jsx(ls,{className:"h-6 w-6 text-yellow-500"})]}),s.jsx("h3",{className:`text-lg font-medium ${d.type==="success"?"text-green-800":d.type==="error"?"text-red-800":"text-yellow-800"}`,children:d.title}),s.jsx("button",{onClick:x,className:"ml-auto bg-transparent text-gray-400 hover:text-gray-600",children:s.jsx(Ct,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"p-5",children:[s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-gray-700",children:d.message})}),d.fileName&&s.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md mb-4",children:[s.jsx(Ke,{className:"h-5 w-5 text-gray-500 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",title:d.fileName,children:d.fileName})]}),d.url&&s.jsx("div",{className:"mb-4",children:s.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-100 rounded-md hover:bg-blue-100 transition-colors",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Accéder au fichier"]})}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium rounded-md transition-colors",children:"Fermer"})})]})]})})]})}function pD({onSelect:t,showTitle:e=!0}){const[r,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState(null),[u,d]=g.useState(""),[h,m]=g.useState([]),[x,j]=g.useState(""),A=g.useCallback(N=>{var v;const f=((v=N.split(".").pop())==null?void 0:v.toLowerCase())||"";return["pdf"].includes(f)?"pdf":["doc","docx"].includes(f)?"docx":["xls","xlsx"].includes(f)?"xlsx":["ppt","pptx"].includes(f)?"pptx":["txt"].includes(f)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(f)?"image":["mp4","webm","mkv","avi","mov"].includes(f)?"video":["mp3","wav","ogg"].includes(f)?"audio":["zip","rar","7z","tar","gz"].includes(f)?"zip":"link"},[]),D=N=>{if(N===0)return"0 Bytes";const f=1024,v=["Bytes","KB","MB","GB","TB"],E=Math.floor(Math.log(N)/Math.log(f));return parseFloat((N/Math.pow(f,E)).toFixed(2))+" "+v[E]},S=async()=>{try{const N=await jn();return new Zs({accessToken:N})}catch(N){return console.error("Échec de la création du client Dropbox:",N),l("Impossible de se connecter à Dropbox. Vérifiez votre connexion et les permissions."),null}},y=g.useCallback(async(N="")=>{a(!0),l(null);try{const f=await S();if(!f){a(!1);return}const v=await f.filesListFolder({path:N,include_deleted:!1}),E=[];for(const C of v.result.entries)if(C[".tag"]==="file"||C[".tag"]==="folder"){const P=C[".tag"]==="folder",k={id:C.id||C.path_lower||"",name:C.name,path:C.path_lower||"",fileType:P?"folder":A(C.name),size:P?0:C.size||0,isFolder:P};E.push(k)}E.sort((C,P)=>C.isFolder&&!P.isFolder?-1:!C.isFolder&&P.isFolder?1:C.name.localeCompare(P.name)),n(E),d(N)}catch(f){console.error("Erreur lors du chargement des fichiers Dropbox:",f),l("Impossible de charger les fichiers depuis Dropbox. Veuillez réessayer.")}finally{a(!1)}},[n,d,a,l,A]),w=async N=>{var f;if(N.url)return N.url;try{const v=await S();if(!v)return null;let E;try{E=await v.sharingCreateSharedLinkWithSettings({path:N.path})}catch(P){const k=P;if(k.status===409&&((f=k.error)!=null&&f.shared_link_already_exists))try{const te=await v.sharingListSharedLinks({path:N.path,direct_only:!0});if(te.result.links&&te.result.links.length>0)E={result:te.result.links[0]};else throw new Error("Aucun lien partagé trouvé")}catch(te){throw console.error("Erreur lors de la récupération des liens existants:",te),te}else throw k}const C=E.result.url.replace("?dl=0","?raw=1");return n(P=>P.map(k=>k.id===N.id?{...k,url:C}:k)),C}catch(v){return console.error("Erreur lors de la création du lien partageable:",v),l("Impossible de créer un lien pour ce fichier. Vérifiez les permissions dans Dropbox."),null}},_=N=>{m([...h,u]),y(N.path)},I=async N=>{if(N.isFolder){_(N);return}const f=await w(N);f&&t(f,N.name,N.fileType)},M=()=>{if(h.length>0){const N=h[h.length-1];m(h.slice(0,-1)),y(N)}},q=x?r.filter(N=>N.name.toLowerCase().includes(x.toLowerCase())):r;return g.useEffect(()=>{y()},[y]),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&s.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[s.jsx("button",{onClick:M,disabled:h.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:x,onChange:N=>j(N.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>y(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),o&&s.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[s.jsx("p",{children:o}),s.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accès Dropbox est configuré correctement dans vos variables d'environnement."}),s.jsx("button",{onClick:()=>y(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Réessayer"})]}),i?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):q.length>0?s.jsx("div",{className:"max-h-80 overflow-y-auto",children:s.jsx("ul",{className:"space-y-1",children:q.map(N=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>I(N),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[s.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:N.isFolder?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):N.fileType==="pdf"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):N.fileType==="image"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),!N.isFolder&&s.jsx("div",{className:"text-xs text-gray-500",children:D(N.size)})]})]})},N.id))})}):s.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouvé."})]})]})}const Fv=()=>{const[t]=cj(),e=at(),{currentUser:r,isAdmin:n,isEditor:i}=Ce(),a=window.location.href.includes("/admin/"),o=a?n():!1;g.useEffect(()=>{if(a&&!n()&&i()){const X=window.location.search;e(`/editor/resources${X}`)}},[a,n,i,e]);const l=X=>`${o?"/admin":"/editor"}/resources?edit=${X}`,{resources:u,addResource:d,updateResource:h,deleteResource:m}=Wi(),x=t.get("new")==="resource",j=t.get("edit"),[A,D]=g.useState(""),[S,y]=g.useState(""),[w,_]=g.useState("post-cps"),[I,M]=g.useState(""),[q,N]=g.useState(""),[f,v]=g.useState("link"),[E,C]=g.useState(!1),[P,k]=g.useState(!1),[te,ce]=g.useState(""),[de,O]=g.useState([]),[V,H]=g.useState(!1),[F,R]=g.useState(null),[U,W]=g.useState(""),[ne,pe]=g.useState(!1),Z=["visa","logement","inscription","documents-administratifs","assurance","transport","finances","santé","cours-préparatoires","vie-étudiante","culture-française","emploi-stage","outils-informatiques","bourses","calendrier-académique","restauration","bibliothèque","sport","associations-étudiantes","procédures-campus-france"],J=[...new Set([...Z,...u.map(X=>X.category).filter(Boolean)])],ae=async()=>{H(!0),W("");try{const ds=(await new Zs({accessToken:await jn()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(Je=>Je[".tag"]==="file").map(Je=>({id:Je.id,name:Je.name,path_lower:Je.path_lower||"",path_display:Je.path_display||Je.name,size:"size"in Je?Je.size:void 0,client_modified:"client_modified"in Je?Je.client_modified:void 0,is_downloadable:!0}));O(ds)}catch(X){console.error("Erreur lors de la récupération des fichiers:",X),X instanceof Error?W(`Erreur lors de la récupération des fichiers: ${X.message}`):W(`Erreur lors de la récupération des fichiers: ${String(X)}`)}finally{H(!1)}},_e=async X=>{var He;try{const $e=new Zs({accessToken:await jn()});let ds="";try{ds=(await $e.sharingCreateSharedLinkWithSettings({path:X.path_lower})).result.url}catch(xe){const Ee=xe;if(Ee.status===409||Ee.error&&Ee.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const qe=await $e.sharingListSharedLinks({path:X.path_lower,direct_only:!0});if(qe.result.links&&qe.result.links.length>0)ds=qe.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw xe}const Je=ds.replace("?dl=0","?raw=1");R({...X,shared_link:{url:Je}}),N(Je),ce(X.name),W("");const G=((He=X.name.split(".").pop())==null?void 0:He.toLowerCase())||"";return G==="pdf"?v("pdf"):["doc","docx"].includes(G)?v("docx"):["xls","xlsx"].includes(G)?v("xlsx"):["ppt","pptx"].includes(G)?v("pptx"):G==="txt"?v("txt"):["jpg","jpeg","png","gif","webp","svg"].includes(G)?v("image"):["mp4","webm","avi","mov"].includes(G)?v("video"):["mp3","wav","ogg"].includes(G)?v("audio"):["zip","rar","tar","gz"].includes(G)?v("zip"):v("link"),Je}catch($e){console.error("Erreur lors de la création du lien de partage:",$e),$e instanceof Error?W(`Erreur lors de la création du lien de partage: ${$e.message}`):W(`Erreur lors de la création du lien de partage: ${String($e)}`)}};g.useEffect(()=>{if(j){const X=u.find(He=>He.id===j);X&&(D(X.title),y(X.description),_(X.phase),M(X.category),N(X.fileUrl),v(X.fileType))}else x&&(D(""),y(""),_("post-cps"),M(""),N(""),v("link"),ae())},[j,x,u]);const De=X=>{X.preventDefault(),j?(h(j,{title:A,description:S,phase:w,category:I,fileUrl:q,fileType:f}),Rt({type:"Modification",target:"Ressource",targetId:j,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:A}})):(d({title:A,description:S,phase:w,category:I,fileUrl:q,fileType:f,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Rt({type:"Ajout",target:"Ressource",user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:A}}))},Ve=()=>{C(!0)},Ae=()=>{j&&(m(j),Rt({type:"Suppression",target:"Ressource",targetId:j,user:typeof r=="object"&&(r!=null&&r.displayName)?r.displayName:void 0,details:{title:A}}))},ze={"post-cps":u.filter(X=>X.phase==="post-cps"),"during-process":u.filter(X=>X.phase==="during-process"),"pre-arrival":u.filter(X=>X.phase==="pre-arrival")},gt=X=>{switch(X){case"pdf":case"doc":case"docx":case"txt":return s.jsx(Ke,{className:"w-5 h-5 text-blue-600"});case"image":return s.jsx(xR,{className:"w-5 h-5 text-green-600"});case"link":return s.jsx(Jh,{className:"w-5 h-5 text-purple-600"});default:return s.jsx(yR,{className:"w-5 h-5 text-gray-600"})}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:x?"Ajouter une nouvelle ressource":"Modifier la ressource"}),s.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsx("form",{onSubmit:De,className:"space-y-7",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),s.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:A,onChange:X=>D(X.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),s.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:S,onChange:X=>y(X.target.value),required:!0})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),s.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:w,onChange:X=>_(X.target.value),required:!0,children:[s.jsx("option",{value:"post-cps",children:"Post-CPS"}),s.jsx("option",{value:"during-process",children:"Pendant les démarches"}),s.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),s.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:I,onChange:X=>M(X.target.value),required:!0}),s.jsx("datalist",{id:"categories",children:J.map((X,He)=>s.jsx("option",{value:X},He))})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),s.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:X=>v(X.target.value),required:!0,children:[s.jsxs("optgroup",{label:"Documents",children:[s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"doc",children:"Word (.doc)"}),s.jsx("option",{value:"docx",children:"Word (.docx)"}),s.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),s.jsxs("optgroup",{label:"Tableurs",children:[s.jsx("option",{value:"xls",children:"Excel (.xls)"}),s.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),s.jsxs("optgroup",{label:"Présentations",children:[s.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),s.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),s.jsxs("optgroup",{label:"Médias",children:[s.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),s.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),s.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),s.jsxs("optgroup",{label:"Autres",children:[s.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),s.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:f==="link"?"URL du lien":"URL du fichier"}),f!=="link"&&s.jsxs("div",{className:"rounded-md bg-blue-50 p-4 mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(FR,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),s.jsx("div",{className:"mt-2 text-sm text-blue-700 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),s.jsx(Yx,{onSuccess:X=>{N(X),ce(X.split("/").pop()||"")},buttonText:"Uploader le fichier vers Dropbox"})]}),f==="link"&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex flex-col space-y-4 mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(g2,{className:"w-4 h-4 text-blue-600 mr-2"}),"Fichiers Dropbox"]}),s.jsx("button",{type:"button",onClick:()=>{pe(!ne),ne||ae()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Masquer"]}):s.jsxs(s.Fragment,{children:[s.jsx(Yh,{className:"w-3 h-3 mr-1"}),"Explorer"]})})]}),ne&&s.jsxs("div",{className:"mt-2 border rounded-md",children:[s.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 border-b",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Fichiers disponibles"}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs("button",{type:"button",onClick:ae,className:"inline-flex items-center p-1 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100",disabled:V,children:[V?s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}):s.jsx(Bx,{className:"w-3 h-3"}),s.jsx("span",{className:"ml-1",children:"Actualiser"})]})})]}),U&&s.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(hR,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),s.jsx("span",{children:U})]})}),V?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):de.length>0?s.jsx("div",{className:"max-h-60 overflow-y-auto",children:s.jsx("ul",{className:"divide-y",children:de.map(X=>s.jsx("li",{children:s.jsxs("div",{className:`flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer ${(F==null?void 0:F.id)===X.id?"bg-blue-50":""}`,onClick:()=>R(X),children:[s.jsxs("div",{className:"flex items-center flex-grow pr-3 truncate",children:[s.jsx(Ke,{className:"w-4 h-4 text-blue-600 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"truncate",children:[s.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:X.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[X.size?`${Math.round(X.size/1024)} Ko`:"",X.client_modified?` • ${new Date(X.client_modified).toLocaleDateString()}`:""]})]})]}),s.jsxs("button",{type:"button",className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex items-center",onClick:He=>{He.stopPropagation(),_e(X)},children:[s.jsx(Js,{className:"w-3 h-3 mr-1"}),"Utiliser"]})]})},X.id))})}):s.jsx("div",{className:"py-8 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:de.length===0&&!U?"Cliquez sur Actualiser pour afficher vos fichiers.":"Aucun fichier trouvé."})})]}),s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("button",{type:"button",onClick:()=>k(!0),className:"flex-1 flex items-center justify-center gap-2 p-2 border border-blue-200 rounded-md bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm transition-colors",children:[s.jsx(Yh,{className:"w-4 h-4 text-blue-600"}),"Parcourir Dropbox"]})}),F&&F.shared_link&&s.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-100 rounded-md",children:[s.jsxs("div",{className:"flex items-center text-sm text-green-800 mb-2",children:[s.jsx(ws,{className:"w-4 h-4 mr-2 text-green-600"}),"Fichier sélectionné : ",F.name]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:F.shared_link.url,className:"flex-1 text-xs py-1 px-2 bg-white border rounded-l-md focus:outline-none"}),s.jsx("button",{type:"button",className:"bg-blue-600 text-white py-1 px-2 rounded-r-md text-xs",onClick:()=>{navigator.clipboard.writeText(F.shared_link.url)},children:s.jsx(Un,{className:"w-3 h-3"})})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:s.jsx(Jh,{className:"w-5 h-5 text-gray-500"})}),s.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (Dropbox/Google Drive/etc.)",value:q,onChange:X=>N(X.target.value),required:!0}),te&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",te]})]})]}),f!=="link"&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:s.jsx(Jh,{className:"w-5 h-5 text-gray-500"})}),s.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (générée automatiquement)",value:q,onChange:X=>N(X.target.value),required:!0})]}),s.jsx("button",{type:"button",onClick:()=>k(!0),className:"ml-2 p-2.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md transition-colors",title:"Parcourir les fichiers existants",children:s.jsx(Yh,{className:"w-5 h-5"})})]}),te&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier sélectionné: ",te]})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:j&&s.jsxs("button",{type:"button",onClick:Ve,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[s.jsx(yi,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),s.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[s.jsx(Dp,{className:"mr-2 h-4 w-4"}),x?"Ajouter":"Enregistrer"]})]})]})]})})})}),s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),s.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/resources?new=resource`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[s.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(ze["post-cps"])&&ze["post-cps"].length>0?s.jsx("ul",{className:"space-y-2",children:ze["post-cps"].map(X=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(l(X.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===X.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:gt(X.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:X.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:X.category})]})]})},X.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(ze["during-process"])&&ze["during-process"].length>0?s.jsx("ul",{className:"space-y-2",children:ze["during-process"].map(X=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(l(X.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===X.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:gt(X.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:X.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:X.category})]})]})},X.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(ze["pre-arrival"])&&ze["pre-arrival"].length>0?s.jsx("ul",{className:"space-y-2",children:ze["pre-arrival"].map(X=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>e(l(X.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===X.id?"bg-blue-50 border border-blue-200":""}`,children:[s.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:gt(X.fileType)}),s.jsxs("div",{className:"flex-grow",children:[s.jsx("span",{className:"block text-sm font-medium",children:X.title}),s.jsx("span",{className:"block text-xs text-gray-500",children:X.category})]})]})},X.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),s.jsx(Hx,{isOpen:E,onClose:()=>C(!1),onConfirm:Ae,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${A}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"}),P&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Sélectionner un fichier Dropbox"}),s.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:s.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-grow overflow-y-auto",children:s.jsx(pD,{onSelect:(X,He,$e)=>{N(X),ce(He),v($e==="pdf"?"pdf":$e==="docx"?"docx":$e==="xlsx"?"xlsx":$e==="pptx"?"pptx":$e==="txt"?"txt":$e==="image"?"image":$e==="video"?"video":$e==="audio"?"audio":$e==="zip"?"zip":"link"),k(!1)},showTitle:!1})}),s.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},F2=({open:t,onClose:e,onSubmit:r,loading:n=!1,error:i})=>{const[a,o]=g.useState(""),l=u=>{u.preventDefault(),r(a)};return bi.useEffect(()=>{t||o("")},[t]),t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:"×"}),s.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),s.jsxs("form",{onSubmit:l,className:"flex flex-col gap-3",children:[s.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:a,onChange:u=>o(u.target.value),disabled:n,autoFocus:!0}),i&&s.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||a==="",children:"Valider"})]})]})}):null};var O2={};async function fD(t){let e=[],r;do{const i=await(await fetch(`https://identitytoolkit.googleapis.com/v1/projects/${O2.REACT_APP_FIREBASE_PROJECT_ID}/accounts:batchGet?key=${t}`+(r?`&nextPageToken=${r}`:""),{method:"GET"})).json();i&&i.users&&(e=e.concat(i.users)),r=i.nextPageToken}while(r);return e}const xD=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[i,a]=g.useState(null),[o,l]=g.useState(null),[u,d]=g.useState([]),[h,m]=g.useState(!0),[x,j]=g.useState(null),[A,D]=g.useState([]),[S,y]=g.useState(!1),[w,_]=g.useState([]),{currentUser:I}=Ce(),[M,q]=g.useState(!1),N=at(),f=O2.REACT_APP_FIREBASE_API_KEY||"",[v,E]=g.useState("tous"),[C,P]=g.useState("tous"),[k,te]=g.useState(1),ce=15,de=async()=>{m(!0),j(null);try{const R=await Xe(ke(re,"users")),U=[];R.forEach(W=>{U.push(W.data())}),d(U)}catch{j("Erreur lors du chargement des utilisateurs.")}finally{m(!1)}};g.useEffect(()=>{de()},[]),g.useEffect(()=>{(async()=>{y(!0);try{if(!f)return;const U=await fD(f);D(U)}catch{}finally{y(!1)}})()},[f]),g.useEffect(()=>{if(A.length&&u.length){const R=A.filter(U=>!u.some(W=>W.uid===U.localId));_(R)}},[A,u]),g.useEffect(()=>{if(I&&u.length>0){const R=u.find(U=>U.uid===I.uid);q(!!(R!=null&&R.isSuperAdmin))}},[I,u]);const O=async R=>{e(!0),l({uid:R,action:"toggleAdmin"}),a(null)},V=async R=>{e(!0),l({uid:R,action:"toggleEditor"}),a(null)},H=async R=>{if(!o)return;if(n(!0),a(null),R!=="ngiryallahrek"){a("Mot de passe incorrect."),n(!1);return}const U=u.find(W=>W.uid===o.uid);if(U!=null&&U.isSuperAdmin&&U.uid!==(I==null?void 0:I.uid)&&!M){a("Impossible de modifier le rôle d'un admin principal."),n(!1);return}try{if(o.action==="toggleAdmin"){const W=!(U!=null&&U.isAdmin);await ts(be(re,"users",o.uid),{isAdmin:W}),d(ne=>ne.map(pe=>pe.uid===o.uid?{...pe,isAdmin:W}:pe)),await Rt({type:W?"Ajout":"Suppression",target:"Utilisateur",targetId:o.uid,user:typeof I=="object"&&(I!=null&&I.displayName)?I.displayName:void 0,details:{action:"Changement de rôle administrateur",userId:o.uid,newStatus:W?"Administrateur":"Utilisateur standard"}})}else if(o.action==="toggleEditor"){const W=!(U!=null&&U.isEditor);await ts(be(re,"users",o.uid),{isEditor:W}),d(ne=>ne.map(pe=>pe.uid===o.uid?{...pe,isEditor:W}:pe)),await Rt({type:W?"Ajout":"Suppression",target:"Utilisateur",targetId:o.uid,user:typeof I=="object"&&(I!=null&&I.displayName)?I.displayName:void 0,details:{action:"Changement de rôle éditeur",userId:o.uid,newStatus:W?"Éditeur":"Utilisateur standard"}})}e(!1),l(null)}catch(W){console.error("Erreur lors de la mise à jour:",W),a("Erreur lors de la mise à jour du statut utilisateur.")}finally{n(!1)}},F=async R=>{try{await ps(be(re,"users",R.localId),{uid:R.localId,email:R.email,displayName:R.displayName||"",isAdmin:!1,isEditor:!1,emailVerified:R.emailVerified||!1,photoURL:R.photoUrl||"",createdAt:new Date().toLocaleString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"}).replace(","," à")}),await Rt({type:"Ajout",target:"Utilisateur",targetId:R.localId,user:typeof I=="object"&&(I!=null&&I.displayName)?I.displayName:void 0,details:{action:"Création de profil Firestore",userId:R.localId,email:R.email}}),de()}catch(U){console.error("Erreur lors de la création du profil Firestore:",U),alert("Erreur lors de la création du profil Firestore : "+U.message)}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>N("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6 bg-blue-50 px-4 py-3 rounded-lg shadow-sm border border-blue-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"font-medium text-blue-800 text-lg",children:"Statistiques des utilisateurs"}),s.jsx("span",{className:"bg-blue-600 text-white py-1 px-4 rounded-full font-bold",children:h?"...":`Total: ${u.length}`})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:"flex justify-between items-center p-2 bg-blue-100 rounded border border-blue-200",children:[s.jsx("span",{className:"text-sm font-medium",children:"ESIGELEC"}),s.jsx("span",{className:"bg-blue-600 text-white px-2.5 py-0.5 rounded-full text-sm font-semibold",children:h?"...":u.filter(R=>R.status==="esigelec").length})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-purple-100 rounded border border-purple-200",children:[s.jsx("span",{className:"text-sm font-medium",children:"CPS"}),s.jsx("span",{className:"bg-purple-600 text-white px-2.5 py-0.5 rounded-full text-sm font-semibold",children:h?"...":u.filter(R=>R.status==="cps").length})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-green-100 rounded border border-green-200",children:[s.jsx("span",{className:"text-sm font-medium",children:"Alumni"}),s.jsx("span",{className:"bg-green-600 text-white px-2.5 py-0.5 rounded-full text-sm font-semibold",children:h?"...":u.filter(R=>R.status==="alumni").length})]}),s.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-100 rounded border border-gray-200",children:[s.jsx("span",{className:"text-sm font-medium",children:"Autres"}),s.jsx("span",{className:"bg-gray-600 text-white px-2.5 py-0.5 rounded-full text-sm font-semibold",children:h?"...":u.filter(R=>!R.status||R.status==="autres").length})]})]})]}),s.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"role-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrer par rôle"}),s.jsxs("select",{id:"role-filter",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:v,onChange:R=>{E(R.target.value),te(1)},children:[s.jsx("option",{value:"tous",children:"Tous les rôles"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"editor",children:"Éditeur"}),s.jsx("option",{value:"standard",children:"Standard"})]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Filtrer par statut"}),s.jsxs("select",{id:"status-filter",className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",value:C,onChange:R=>{P(R.target.value),te(1)},children:[s.jsx("option",{value:"tous",children:"Tous les statuts"}),s.jsx("option",{value:"esigelec",children:"ESIGELEC"}),s.jsx("option",{value:"cps",children:"CPS"}),s.jsx("option",{value:"alumni",children:"Alumni"}),s.jsx("option",{value:"autres",children:"Autres"})]})]})]}),S?s.jsxs("div",{className:"mb-6 flex items-center text-yellow-600",children:[s.jsx(ls,{className:"w-5 h-5 mr-2"})," Chargement des utilisateurs Firebase Auth..."]}):w.length>0&&s.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:[s.jsxs("div",{className:"font-bold text-yellow-800 mb-2 flex items-center",children:[s.jsx(ls,{className:"w-5 h-5 mr-2"})," Utilisateurs sans profil Firestore"]}),s.jsx("ul",{className:"mb-2 text-sm",children:w.map(R=>s.jsxs("li",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"font-mono text-gray-700",children:R.email}),s.jsx("button",{onClick:()=>F(R),className:"ml-2 px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",children:"Créer le profil Firestore"})]},R.localId))}),s.jsxs("div",{className:"text-xs text-yellow-700",children:["Ces utilisateurs existent dans l’authentification Firebase mais n’ont pas encore de document dans la collection ",s.jsx("b",{children:"users"}),"."]})]}),h?s.jsx("div",{children:"Chargement..."}):x?s.jsx("div",{className:"text-red-600",children:x}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsx("p",{className:"text-sm text-gray-500 mb-2",children:(()=>{const R=u.filter(U=>v==="tous"?!0:v==="admin"?U.isAdmin:v==="editor"?U.isEditor:v==="standard"?!U.isAdmin&&!U.isEditor:!0).filter(U=>C==="tous"?!0:C==="autres"?!U.status||U.status==="autres":U.status===C);return`Affichage de ${R.length?Math.min((k-1)*ce+1,R.length):0} à ${Math.min(k*ce,R.length)} sur ${R.length} utilisateurs${v!=="tous"||C!=="tous"?" (filtrés)":""}`})()}),s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rôle"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de création"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.sort((R,U)=>{const W=ne=>{if(!ne.createdAt)return 0;if(typeof ne.createdAt=="object"&&"seconds"in ne.createdAt)return ne.createdAt.seconds*1e3;if(typeof ne.createdAt=="number")return ne.createdAt;if(typeof ne.createdAt=="string"){const pe=new Date(ne.createdAt);if(!isNaN(pe.getTime()))return pe.getTime()}return 0};return W(U)-W(R)}).filter(R=>v==="tous"?!0:v==="admin"?R.isAdmin:v==="editor"?R.isEditor:v==="standard"?!R.isAdmin&&!R.isEditor:!0).filter(R=>C==="tous"?!0:C==="autres"?!R.status||R.status==="autres":R.status===C).slice((k-1)*ce,k*ce).map(R=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>N(`/admin/users/${R.uid}`),children:[R.photoURL?s.jsx("img",{src:R.photoURL,alt:R.displayName||R.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):s.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:s.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),R.displayName||R.email,R.isSuperAdmin&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),R.uid===(I==null?void 0:I.uid)&&s.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),s.jsx("td",{className:"px-4 py-2",children:R.email}),s.jsx("td",{className:"px-4 py-2",children:R.status?s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium ${R.status==="esigelec"?"bg-blue-100 text-blue-800":R.status==="cps"?"bg-purple-100 text-purple-800":R.status==="alumni"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:R.status==="esigelec"?"ESIGELEC":R.status==="cps"?"CPS":R.status==="alumni"?"Alumni":R.status.charAt(0).toUpperCase()+R.status.slice(1)}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:"Autres"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[R.isAdmin?s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[s.jsx(qt,{className:"w-4 h-4 mr-1"})," Admin"]}):s.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),R.isEditor&&s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[s.jsx($r,{className:"w-4 h-4 mr-1"})," Éditeur"]}),R.isSuperAdmin&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:"text-sm text-gray-600",children:(()=>{var U;if(!R.createdAt)return s.jsx("span",{className:"text-xs text-gray-400 italic",children:"Non disponible"});try{if(console.log(`createdAt pour ${R.email}:`,typeof R.createdAt,JSON.stringify(R.createdAt)),R.createdAt&&typeof R.createdAt=="object"&&"seconds"in R.createdAt&&"nanoseconds"in R.createdAt){const ne=R.createdAt.seconds,pe=new Date(ne*1e3);return s.jsxs(s.Fragment,{children:[pe.toLocaleDateString("fr-FR"),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:pe.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})}if(typeof R.createdAt=="string")if(R.createdAt.includes(" à ")){const W=R.createdAt.split(" à ");return s.jsxs(s.Fragment,{children:[W[0],s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:((U=W[1])==null?void 0:U.split(" ")[0])||""})]})}else{const W=new Date(R.createdAt);return isNaN(W.getTime())?s.jsx("span",{children:R.createdAt}):s.jsxs(s.Fragment,{children:[W.toLocaleDateString("fr-FR"),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:W.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})}if(typeof R.createdAt=="number"){const W=new Date(R.createdAt);return s.jsxs(s.Fragment,{children:[W.toLocaleDateString("fr-FR"),s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:W.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})}return s.jsxs("span",{className:"text-xs",children:[typeof R.createdAt,": ",String(R.createdAt)]})}catch(W){return console.error("Erreur de format de date:",W),s.jsx("span",{className:"text-xs text-red-500",children:"Format invalide"})}})()})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[R.uid!==(I==null?void 0:I.uid)&&(!R.isSuperAdmin||R.isSuperAdmin&&M)&&s.jsx("button",{onClick:()=>O(R.uid),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${R.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:R.isAdmin?s.jsxs(s.Fragment,{children:[s.jsx(w2,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):s.jsxs(s.Fragment,{children:[s.jsx(j2,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),R.uid!==(I==null?void 0:I.uid)&&(!R.isSuperAdmin||R.isSuperAdmin&&M)&&s.jsx("button",{onClick:()=>V(R.uid),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${R.isEditor?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:R.isEditor?s.jsxs(s.Fragment,{children:[s.jsx(Ct,{className:"w-4 h-4 mr-1"})," Retirer éditeur"]}):s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"w-4 h-4 mr-1"})," Promouvoir éditeur"]})}),R.uid!==(I==null?void 0:I.uid)&&R.isSuperAdmin&&!M&&s.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})})]},R.uid))})]}),s.jsxs("div",{className:"flex justify-between items-center mt-4 px-2",children:[s.jsxs("div",{children:[s.jsx("button",{onClick:()=>te(R=>Math.max(1,R-1)),disabled:k===1,className:"px-3 py-1 rounded bg-gray-200 text-gray-700 mr-2 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"« Précédent"}),s.jsx("button",{onClick:()=>{const R=u.filter(U=>v==="tous"?!0:v==="admin"?U.isAdmin:v==="editor"?U.isEditor:v==="standard"?!U.isAdmin&&!U.isEditor:!0).filter(U=>C==="tous"?!0:C==="autres"?!U.status||U.status==="autres":U.status===C);te(U=>Math.min(Math.ceil(R.length/ce),U+1))},disabled:(()=>{const R=u.filter(U=>v==="tous"?!0:v==="admin"?U.isAdmin:v==="editor"?U.isEditor:v==="standard"?!U.isAdmin&&!U.isEditor:!0).filter(U=>C==="tous"?!0:C==="autres"?!U.status||U.status==="autres":U.status===C);return k>=Math.ceil(R.length/ce)})(),className:"px-3 py-1 rounded bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Suivant »"})]}),s.jsx("div",{className:"text-sm text-gray-500",children:(()=>{const R=u.filter(U=>v==="tous"?!0:v==="admin"?U.isAdmin:v==="editor"?U.isEditor:v==="standard"?!U.isAdmin&&!U.isEditor:!0).filter(U=>C==="tous"?!0:C==="autres"?!U.status||U.status==="autres":U.status===C);return`Page ${k} sur ${Math.ceil(R.length/ce)||1}`})()})]})]})]}),s.jsx(F2,{open:t,onClose:()=>{e(!1),l(null),a(null)},onSubmit:H,loading:r,error:i})]})},gD=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[i,a]=g.useState(null),[o,l]=g.useState(!1),{uid:u}=xd(),d=at(),{currentUser:h}=Ce(),[m,x]=g.useState(null),[j,A]=g.useState(!0),[D,S]=g.useState(null),[y,w]=g.useState(!1),[_,I]=g.useState(!1);g.useEffect(()=>{u&&(async()=>{A(!0),S(null);try{const P=be(re,"users",u),k=await xt(P);k.exists()?x(k.data()):S("Utilisateur introuvable.")}catch{S("Erreur lors du chargement du profil utilisateur.")}finally{A(!1)}})()},[u]),g.useEffect(()=>{(async()=>{if(h)try{const P=be(re,"users",h.uid),k=await xt(P);if(k.exists()){const te=k.data();I(!!te.isSuperAdmin)}}catch{I(!1)}})()},[h]);const M=async()=>{e(!0),a(null)},q=async C=>{if(m){if(n(!0),a(null),C!=="ngiryallahrek"){a("Mot de passe incorrect."),n(!1);return}if(m.isSuperAdmin&&m.uid!==(h==null?void 0:h.uid)&&!_){a("Impossible de modifier le rôle d'un admin principal."),n(!1);return}w(!0);try{await ts(be(re,"users",m.uid),{isAdmin:!m.isAdmin}),x({...m,isAdmin:!m.isAdmin}),e(!1)}catch(P){console.error("Erreur lors de la mise à jour:",P),a("Erreur lors de la mise à jour du statut administrateur.")}finally{w(!1),n(!1)}}},N=()=>{if(m){if(m.uid===(h==null?void 0:h.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}if(m.isSuperAdmin&&!_){alert("Impossible de supprimer un admin principal.");return}l(!0)}},f=async()=>{if(m){w(!0);try{const C="https://deleteuser-4t2yrgzbgq-uc.a.run.app";if(!Pt.currentUser)throw new Error("Vous devez être connecté pour effectuer cette action");const P=await CC(Pt.currentUser),k=await fetch(C,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({uid:m.uid})});if(!k.ok)throw new Error(`Erreur lors de la suppression de l'utilisateur de l'authentification: ${k.statusText}`);await Dn(be(re,"users",m.uid)),d("/admin/users")}catch(C){console.error("Erreur lors de la suppression:",C),alert("Erreur lors de la suppression de l'utilisateur.")}finally{w(!1)}}},v=C=>{m&&x({...m,[C.target.name]:C.target.value})},E=async()=>{if(m){w(!0);try{await ts(be(re,"users",m.uid),{displayName:m.displayName,photoURL:m.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{w(!1)}}};return j?s.jsx("div",{className:"p-8",children:"Chargement..."}):D?s.jsx("div",{className:"p-8 text-red-600",children:D}):m?s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[s.jsx("div",{className:"relative mb-6",children:m.photoURL?s.jsx("img",{src:m.photoURL,alt:m.displayName||m.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):s.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:s.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(m==null?void 0:m.displayName)||"",onChange:v,disabled:y||(m==null?void 0:m.isSuperAdmin)&&!_&&(m==null?void 0:m.uid)!==(h==null?void 0:h.uid)}),(m==null?void 0:m.isSuperAdmin)&&s.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),s.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(m==null?void 0:m.photoURL)||"",onChange:v,disabled:y}),s.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",m.email]}),s.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",m.emailVerified?"Oui":"Non"]}),s.jsxs("div",{className:"mb-6 w-full text-center",children:[s.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",m.isAdmin?s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[s.jsx(qt,{className:"w-5 h-5 mr-1"})," Admin"]}):s.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[m.uid!==(h==null?void 0:h.uid)&&s.jsx("button",{onClick:M,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${m.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:y||(m==null?void 0:m.isSuperAdmin)&&!_&&(m==null?void 0:m.uid)!==(h==null?void 0:h.uid),children:m.isAdmin?s.jsxs(s.Fragment,{children:[s.jsx(w2,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):s.jsxs(s.Fragment,{children:[s.jsx(j2,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),m.uid!==(h==null?void 0:h.uid)&&s.jsxs("button",{onClick:N,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:y||(m==null?void 0:m.isSuperAdmin)&&!_&&(m==null?void 0:m.uid)!==(h==null?void 0:h.uid),children:[s.jsx(yi,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),s.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:E,disabled:y||(m==null?void 0:m.isSuperAdmin)&&!_&&(m==null?void 0:m.uid)!==(h==null?void 0:h.uid),title:m!=null&&m.isSuperAdmin&&!_&&(m==null?void 0:m.uid)!==(h==null?void 0:h.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),s.jsx(F2,{open:t,onClose:()=>{e(!1),a(null)},onSubmit:q,loading:r,error:i}),s.jsx(Hx,{isOpen:o,onClose:()=>l(!1),onConfirm:f,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(m==null?void 0:m.displayName)||(m==null?void 0:m.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},yD=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0),[i,a]=g.useState(""),[o,l]=g.useState("all"),[u,d]=g.useState("all"),[h,m]=g.useState("all"),[x,j]=g.useState(!1),[A,D]=g.useState(null),[S,y]=g.useState(!0),w=20,_=f=>{const v=new Date(f);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)},I=()=>{const f=new Date;let v=null;switch(h){case"today":v=new Date(f.setHours(0,0,0,0));break;case"week":v=new Date,v.setDate(f.getDate()-7);break;case"month":v=new Date,v.setMonth(f.getMonth()-1);break;default:v=null}return v},M=async(f=!0)=>{try{f?(n(!0),D(null)):j(!0);let v=St(ke(re,"adminActivityLog"),Qn("date","desc"));const E=I();E&&(v=St(v,lr("date",">=",E.toISOString()))),v=St(v,Gu(w));const C=await Xe(v);y(C.docs.length===w),C.docs.length>0?D(C.docs[C.docs.length-1]):(D(null),y(!1));let k=C.docs.map(te=>({id:te.id,...te.data()}));if(o!=="all"&&(k=k.filter(te=>te.type===o)),u!=="all"&&(k=k.filter(te=>te.target===u)),i){const te=i.toLowerCase();k=k.filter(ce=>{var de;return((de=ce.user)==null?void 0:de.toLowerCase().includes(te))||ce.target.toLowerCase().includes(te)||ce.type.toLowerCase().includes(te)||ce.details&&JSON.stringify(ce.details).toLowerCase().includes(te)})}e(f?k:te=>[...te,...k])}catch(v){console.error("Error fetching activities:",v)}finally{n(!1),j(!1)}};g.useEffect(()=>{M()},[]),g.useEffect(()=>{M()},[o,u,h]);const q=f=>{let v="bg-blue-100 text-blue-800";switch(f.toLowerCase()){case"ajout":v="bg-green-100 text-green-800";break;case"suppression":v="bg-red-100 text-red-800";break;case"modification":v="bg-yellow-100 text-yellow-800";break}return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:f})},N=f=>{let v="bg-gray-100 text-gray-800";const E={ressource:"bg-purple-100 text-purple-800",section:"bg-indigo-100 text-indigo-800","sous-section":"bg-indigo-50 text-indigo-700",faq:"bg-blue-100 text-blue-800",utilisateur:"bg-pink-100 text-pink-800",webinaire:"bg-teal-100 text-teal-800",forum:"bg-amber-100 text-amber-800",profil:"bg-cyan-100 text-cyan-800",paramètre:"bg-gray-200 text-gray-800",document:"bg-emerald-100 text-emerald-800",catégorie:"bg-fuchsia-100 text-fuchsia-800"},C=f.toLowerCase();return E[C]&&(v=E[C]),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:f})};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Y,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:s.jsx(Be,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),s.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Zr,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:i,onChange:f=>a(f.target.value)})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:o,onChange:f=>l(f.target.value),children:[s.jsx("option",{value:"all",children:"Toutes les actions"}),s.jsx("option",{value:"Ajout",children:"Ajout"}),s.jsx("option",{value:"Modification",children:"Modification"}),s.jsx("option",{value:"Suppression",children:"Suppression"})]})}),s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:f=>d(f.target.value),children:[s.jsx("option",{value:"all",children:"Toutes les cibles"}),s.jsx("option",{value:"Ressource",children:"Ressources"}),s.jsx("option",{value:"Section",children:"Sections"}),s.jsx("option",{value:"Sous-section",children:"Sous-sections"}),s.jsx("option",{value:"FAQ",children:"FAQ"}),s.jsx("option",{value:"Utilisateur",children:"Utilisateurs"}),s.jsx("option",{value:"Webinaire",children:"Webinaires"}),s.jsx("option",{value:"Forum",children:"Forums"}),s.jsx("option",{value:"Profil",children:"Profils"}),s.jsx("option",{value:"Paramètre",children:"Paramètres"}),s.jsx("option",{value:"Document",children:"Documents"}),s.jsx("option",{value:"Catégorie",children:"Catégories"})]})})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:h,onChange:f=>m(f.target.value),children:[s.jsx("option",{value:"all",children:"Toute période"}),s.jsx("option",{value:"today",children:"Aujourd'hui"}),s.jsx("option",{value:"week",children:"7 derniers jours"}),s.jsx("option",{value:"month",children:"30 derniers jours"})]})}),s.jsx("button",{onClick:()=>M(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:s.jsx(Bx,{className:"h-5 w-5"})})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),r?s.jsx("div",{className:"p-8 flex justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):s.jsx("div",{className:"divide-y divide-gray-200",children:t.map(f=>s.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[s.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[q(f.type),s.jsx("span",{className:"mx-2",children:"•"}),N(f.target)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(cr,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:_(f.date)})]})]}),s.jsx("div",{className:"flex items-start",children:f.user&&s.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[s.jsx(Ts,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:f.user})]})}),f.details&&s.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),s.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(f.details).map(([v,E])=>s.jsxs("div",{className:"flex",children:[s.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[v,":"]}),s.jsx("dd",{className:"text-gray-900",children:typeof E=="object"?JSON.stringify(E):String(E)})]},v))})]}),f.targetId&&s.jsxs("div",{className:"mt-1 text-sm",children:[s.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",f.targetId]})]},f.id))}),S&&!r&&s.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:s.jsx("button",{onClick:()=>M(!1),disabled:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:x?s.jsxs("span",{className:"flex items-center",children:[s.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},vD=()=>{const t=at(),{currentUser:e}=Ce();return s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:s.jsxs("p",{className:"text-blue-800",children:[s.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),s.jsx("li",{children:s.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),s.jsx("li",{children:s.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),s.jsx("li",{children:s.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),s.jsx("li",{children:s.jsx("a",{href:"#dropbox",className:"text-blue-600 hover:underline",children:"5. Gestionnaire Dropbox"})}),s.jsx("li",{children:s.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"6. Gestion des utilisateurs"})}),s.jsx("li",{children:s.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"7. Journal d'activité"})}),s.jsx("li",{children:s.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"8. Conseils et bonnes pratiques"})})]})]}),s.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(IR,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),s.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),s.jsx("li",{children:"Nombre de sections du guide"}),s.jsx("li",{children:"Nombre de questions FAQ"}),s.jsx("li",{children:"Nombre de ressources disponibles"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),s.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),s.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(rr,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),s.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),s.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),s.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),s.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),s.jsx("li",{children:"Modifiez les informations dans le formulaire"}),s.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),s.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),s.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),s.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),s.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),s.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ur,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"La section FAQ est essentielle pour aider les utilisateurs à trouver rapidement des réponses à leurs questions. En tant qu'administrateur, vous pouvez gérer les questions existantes, ajouter de nouvelles questions et réponses, et approuver les questions soumises par les utilisateurs."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Processus de gestion des FAQ:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-4",children:[s.jsx("li",{children:"Consultation des questions en attente (non répondues)"}),s.jsx("li",{children:"Rédaction de réponses précises et informatives"}),s.jsx("li",{children:"Approbation des questions pour publication"}),s.jsx("li",{children:"Catégorisation par phase et par thématique"}),s.jsx("li",{children:"Mise à jour des réponses existantes si nécessaire"})]}),s.jsxs("p",{className:"text-gray-700 mb-4",children:[s.jsx("strong",{children:"Important:"})," Lorsqu'un utilisateur soumet une question, le système enregistre automatiquement son identifiant (uid) et son email. Ces informations vous permettent d'identifier la source de la question et de contacter l'utilisateur si nécessaire pour des précisions."]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Répondez de manière claire et concise"}),s.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),s.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),s.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),s.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),s.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"La section Gestion des ressources vous permet d'ajouter, de modifier et de supprimer des ressources utiles pour les utilisateurs. Ces ressources peuvent être des documents PDF, des liens vers des sites externes, ou d'autres types de supports informatifs. Une organisation efficace par phase est essentielle pour l'expérience utilisateur."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation par phase:"}),s.jsxs("div",{className:"space-y-3 mb-4",children:[s.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[s.jsx("h5",{className:"font-medium text-blue-700 mb-1",children:"Phase Post-CPS"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources concernant les étapes à suivre après avoir reçu une réponse positive du CPS (Concours Passerelle Spécial). Exemples: procédures d'inscription, documents à fournir, préparation académique."})]}),s.jsxs("div",{className:"bg-indigo-50 p-3 rounded-md",children:[s.jsx("h5",{className:"font-medium text-indigo-700 mb-1",children:"Phase During-Process"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources liées aux démarches administratives en cours (visa, logement, assurances). Exemples: guides pour les démarches consulaires, check-lists pour les documents de visa, options de logement."})]}),s.jsxs("div",{className:"bg-purple-50 p-3 rounded-md",children:[s.jsx("h5",{className:"font-medium text-purple-700 mb-1",children:"Phase Pre-Arrival"}),s.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources pour préparer l'arrivée en France et à l'ESIG. Exemples: guides d'orientation du campus, informations sur les transports locaux, conseils pour l'installation."})]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Ajouter de nouvelles ressources (fichiers PDF, liens, etc.)"}),s.jsx("li",{children:"Catégoriser les ressources par thème et par phase"}),s.jsx("li",{children:"Modifier les informations des ressources existantes"}),s.jsx("li",{children:"Supprimer les ressources obsolètes"}),s.jsx("li",{children:"Prévisualiser les ressources avant publication"}),s.jsx("li",{children:"Explorer et sélectionner des fichiers Dropbox pour vos ressources"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Structure des données de ressources:"}),s.jsx("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-700 text-sm font-mono",children:["id: string",s.jsx("br",{}),"title: string",s.jsx("br",{}),"description: string",s.jsx("br",{}),"phase: GuidePhase ('post-cps' | 'during-process' | 'pre-arrival')",s.jsx("br",{}),"category: string",s.jsx("br",{}),"fileUrl: string",s.jsx("br",{}),"fileType: 'pdf' | 'doc' | ... | 'link'",s.jsx("br",{}),"uploadDate: string",s.jsx("br",{}),"updatedDate: string"]})}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Utilisez des noms de fichiers clairs et descriptifs"}),s.jsx("li",{children:"Ajoutez toujours une description concise mais informative"}),s.jsx("li",{children:"Vérifiez que les liens externes fonctionnent correctement"}),s.jsx("li",{children:"Organisez les ressources par catégories logiques et cohérentes"}),s.jsx("li",{children:"Mettez régulièrement à jour les ressources pour garantir leur pertinence"}),s.jsx("li",{children:"Supprimez les ressources obsolètes pour éviter la confusion"}),s.jsx("li",{children:"Liez les ressources aux sections de guide appropriées"})]})]})]}),s.jsxs("div",{id:"dropbox",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(f2,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestionnaire Dropbox"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le Gestionnaire Dropbox vous permet d'interagir directement avec votre compte Dropbox pour gérer vos fichiers, tester la connectivité, créer des liens de partage et uploader de nouveaux documents. Cette fonctionnalité facilite l'intégration de ressources stockées sur Dropbox dans votre guide."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Procédure de configuration:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 mb-4 text-gray-700",children:[s.jsx("li",{children:"Accédez à la page Gestionnaire Dropbox dans le panneau d'administration"}),s.jsx("li",{children:'Connectez votre compte Dropbox en utilisant le bouton "Connecter à Dropbox"'}),s.jsx("li",{children:"Autorisez l'application à accéder à votre Dropbox lorsque demandé"}),s.jsx("li",{children:"Une fois connecté, l'interface affichera vos fichiers et dossiers"}),s.jsx("li",{children:"Le système conserve votre jeton d'accès de manière sécurisée pour les futures connexions"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Tester la connectivité avec votre compte Dropbox"}),s.jsx("li",{children:"Lister tous les fichiers présents dans votre compte Dropbox"}),s.jsx("li",{children:"Naviguer dans la structure de dossiers"}),s.jsx("li",{children:"Rechercher des fichiers spécifiques par nom ou type"}),s.jsx("li",{children:"Uploader de nouveaux fichiers directement depuis l'interface"}),s.jsx("li",{children:"Générer des liens de partage publics pour vos fichiers"}),s.jsx("li",{children:"Copier les liens facilement pour les intégrer dans les ressources"}),s.jsx("li",{children:"Supprimer des fichiers inutilisés depuis l'interface"}),s.jsx("li",{children:"Voir les métadonnées des fichiers (taille, date de modification, etc.)"})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation avec le gestionnaire de ressources:"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Le Gestionnaire Dropbox est particulièrement utile pour créer et gérer les ressources du guide:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-700",children:[s.jsx("li",{children:"Uploader un fichier dans Dropbox via l'interface"}),s.jsx("li",{children:"Générer un lien de partage pour ce fichier"}),s.jsx("li",{children:"Copier ce lien lors de la création d'une nouvelle ressource dans le gestionnaire de ressources"}),s.jsx("li",{children:"Associer la ressource à la phase appropriée et aux sections du guide"})]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Étapes pour utiliser le Gestionnaire Dropbox:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Accédez au Gestionnaire Dropbox depuis le tableau de bord"}),s.jsx("li",{children:"Vérifiez le statut de connexion à votre compte Dropbox"}),s.jsx("li",{children:'Si nécessaire, testez la connectivité en cliquant sur le bouton "Tester la connexion"'}),s.jsx("li",{children:"Parcourez la liste des fichiers disponibles ou utilisez la recherche pour trouver un fichier spécifique"}),s.jsx("li",{children:"Pour uploader un nouveau fichier, utilisez la section d'upload dédiée"}),s.jsx("li",{children:"Pour générer un lien de partage, cliquez sur l'icône de lien à côté du fichier souhaité"}),s.jsx("li",{children:"Pour supprimer un fichier, cliquez sur l'icône de corbeille et confirmez votre action"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Intégration avec la Gestion des ressources:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Une fois que vous avez généré un lien de partage pour un fichier Dropbox, vous pouvez l'utiliser dans la Gestion des ressources:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Copiez le lien généré depuis le Gestionnaire Dropbox"}),s.jsx("li",{children:'Dans la Gestion des ressources, créez une nouvelle ressource de type "Lien externe"'}),s.jsx("li",{children:"Collez le lien Dropbox dans le champ URL de la ressource"}),s.jsx("li",{children:"Complétez les autres informations (titre, description, catégorie, etc.)"}),s.jsx("li",{children:"Enregistrez la ressource pour la rendre disponible aux utilisateurs"})]}),s.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Astuce:"}),s.jsx("p",{className:"text-blue-800",children:`Vous pouvez également parcourir et sélectionner directement vos fichiers Dropbox lors de la création d'une ressource en utilisant la fonction "Explorer Dropbox" dans le gestionnaire de ressources.`})]}),s.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Attention:"}),s.jsx("p",{className:"text-yellow-800",children:"La suppression d'un fichier Dropbox est définitive. Assurez-vous qu'aucune ressource n'utilise ce fichier avant de le supprimer. Si un fichier est supprimé, les liens pointant vers ce fichier ne fonctionneront plus."})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),s.jsxs("p",{className:"text-gray-700",children:['Accédez au Gestionnaire Dropbox en cliquant sur "Gestionnaire Dropbox" dans le tableau de bord administrateur ou en naviguant directement vers ',s.jsx("span",{className:"text-blue-600",children:"/admin/dropbox"}),"."]})]})]}),s.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Gestion des utilisateurs"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),s.jsx("li",{children:"Consultation des profils utilisateurs"}),s.jsx("li",{children:"Attribution/retrait des droits d'administration"}),s.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),s.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),s.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),s.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),s.jsx("li",{children:"Confirmez l'action"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),s.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),s.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),s.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),s.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),s.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(u2,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Journal d'activité"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Connexions et inscriptions"}),s.jsx("li",{children:"Création, modification et suppression de contenu"}),s.jsx("li",{children:"Ajout et modification de ressources"}),s.jsx("li",{children:"Gestion des FAQ"}),s.jsx("li",{children:"Modifications des droits utilisateurs"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Type d'activité"}),s.jsx("li",{children:"Utilisateur (email)"}),s.jsx("li",{children:"Période (date de début et date de fin)"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Suivre les modifications apportées au contenu"}),s.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),s.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),s.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),s.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),s.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),s.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),s.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Yu,{className:"w-6 h-6 text-blue-700 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),s.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[s.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),s.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),s.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),s.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),s.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),s.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),s.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),s.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),s.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[s.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),s.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),s.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),s.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),s.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),s.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:s.jsxs("p",{className:"text-gray-800 italic text-sm",children:[s.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},bD=()=>{const{guideSections:t}=Wi(),[e,r]=g.useState([]),[n,i]=g.useState([]),[a,o]=g.useState(!0),[l,u]=g.useState("progressions"),[d,h]=g.useState({}),m=g.useCallback((y,w)=>{const _=w.find(q=>q.userId===y);if(!_)return null;const I=t.find(q=>{var N;return(N=q.title)==null?void 0:N.toLowerCase().includes("vous avez obtenu votre visa")}),M=t.find(q=>{var N;return(N=q.title)==null?void 0:N.toLowerCase().includes("en cas de refus de visa")});return I&&_.completedSections.includes(I.id)?"obtained":M&&_.completedSections.includes(M.id)?"refused":null},[t]);g.useEffect(()=>{const y=async()=>{o(!0);const[_,I]=await Promise.all([k2(),E2(async()=>{const{collection:N,getDocs:f}=await Promise.resolve().then(()=>O1);return{collection:N,getDocs:f}},void 0).then(({collection:N,getDocs:f})=>f(N(re,"users")))]),M=[];I.forEach(N=>{M.push({...N.data(),uid:N.id})});const q=_.map(N=>({userId:N.userId,completedSections:N.completedSections.filter(f=>t.some(v=>v.id===f))}));r(q),i(M),o(!1),w(M,q)},w=async(_,I)=>{const M={},q=_.filter(N=>N.status==="cps"&&m(N.uid,I)==="obtained");for(const N of q)try{const f=await Vi(N.uid);if(f&&f.inputValues){console.log("Données de sous-section pour",N.displayName||N.uid),console.log("Valeurs disponibles:",f.inputValues);const v=f.inputValues,E=Object.keys(v),C={hasTicket:!1,arrivalDate:"",arrivalTime:"",airport:"",hasOwnTransportation:!1,wantGroupTransport:!1};E.find(O=>v[O]==="Oui"&&O.includes("ticket")||v[O]==="yes"&&O.includes("ticket")||v[O]==="Oui")&&(C.hasTicket=!0);const k=E.find(O=>{const V=v[O];return typeof V=="string"&&(V.includes("2025")||V.includes("Septembre")||V.includes("/")||V.match(/\d{2}:\d{2}/))});if(k){const O=v[k];if(typeof O=="string"){const V=O.split(" à ");V.length>1?(C.arrivalDate=V[0],C.arrivalTime=V[1]):C.arrivalDate=O}}const te=E.find(O=>{const V=v[O];return typeof V=="string"&&(V==="CDG"||V==="ORY"||V.includes("Charles")||V.includes("Orly")||V.includes("airport"))});te&&(C.airport=v[te]),E.find(O=>(v[O]==="Oui"||v[O]==="yes")&&(O.includes("own")||O.includes("personnel")))&&(C.hasOwnTransportation=!0),E.find(O=>(v[O]==="Oui"||v[O]==="yes")&&(O.includes("group")||O.includes("commun")))&&(C.wantGroupTransport=!0),M[N.uid]=C,console.log("Données d'arrivée extraites:",M[N.uid])}}catch(f){console.error(`Erreur lors de la récupération des données d'arrivée pour ${N.uid}:`,f)}h(M)};y()},[t]);const x=y=>{if(!t||t.length===0)return 0;const w=y.filter(_=>t.some(I=>I.id===_));return Math.round(w.length/t.length*100)},j=(y,w)=>{const _=t.filter(M=>M.phase===w);if(_.length===0)return 0;const I=y.filter(M=>_.some(q=>q.id===M));return Math.round(I.length/_.length*100)},A=n.filter(y=>y.status==="cps"),D=A,S=A.filter(y=>{const w=m(y.uid,e);return w==="obtained"||w==="refused"});return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[s.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour au dashboard"]}),s.jsxs("span",{className:"flex items-center text-xl font-bold",children:[s.jsx(ut,{className:"w-6 h-6 mr-2 text-white"})," Gestion des étudiants CPS"]})]})}),s.jsxs("div",{className:"flex border-b border-gray-200 mb-4 bg-white shadow-sm",children:[s.jsxs("button",{onClick:()=>u("progressions"),className:`flex-1 py-4 px-6 text-center font-medium ${l==="progressions"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(ut,{className:"inline-block w-5 h-5 mr-2 -mt-1"}),"Progressions actuelles"]}),s.jsxs("button",{onClick:()=>u("visa"),className:`flex-1 py-4 px-6 text-center font-medium ${l==="visa"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(jl,{className:"inline-block w-5 h-5 mr-2 -mt-1"}),"Statut visa & Arrivée"]})]}),s.jsx("div",{className:"w-full mx-auto p-4",children:a?s.jsx("div",{className:"text-center text-gray-500",children:"Chargement des progressions..."}):l==="progressions"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Nom"}),s.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Email"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Progression globale"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pré-arrivée"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pendant le processus"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Post-CPS"}),s.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Sections validées"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.filter(y=>!y.isAdmin&&y.status==="cps").map(y=>{const w=e.find(v=>v.userId===y.uid),_=w?w.completedSections.filter(v=>t.some(E=>E.id===v)):[],I=_.length,M=w?x(w.completedSections):0,q=w?j(w.completedSections,"pre-arrival"):0,N=w?j(w.completedSections,"during-process"):0,f=w?j(w.completedSections,"post-cps"):0;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-900",children:y.displayName||"-"}),s.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-600",children:y.email}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle",children:s.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${M}%`}})}),s.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[M,"%"]})]}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:s.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${q}%`}})}),s.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[q,"%"]}),s.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(v=>v.phase==="pre-arrival").map(v=>s.jsxs("li",{className:"flex items-center gap-1",children:[w&&_.includes(v.id)?s.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):s.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),s.jsx("span",{children:v.title})]},v.id))})]}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:s.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${N}%`}})}),s.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[N,"%"]}),s.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(v=>v.phase==="during-process").map(v=>s.jsxs("li",{className:"flex items-center gap-1",children:[w&&_.includes(v.id)?s.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):s.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),s.jsx("span",{children:v.title})]},v.id))})]}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:s.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${f}%`}})}),s.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[f,"%"]}),s.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(v=>v.phase==="post-cps").map(v=>s.jsxs("li",{className:"flex items-center gap-1",children:[w&&_.includes(v.id)?s.jsx("span",{className:"text-green-600 font-bold",children:"✔"}):s.jsx("span",{className:"text-red-500 font-bold",children:"✗"}),s.jsx("span",{children:v.title})]},v.id))})]}),s.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm",children:[I," / ",t.length]})]},y.uid)})})]})}):s.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[s.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-100 flex items-center justify-between",children:s.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[s.jsx(jl,{className:"w-5 h-5 mr-2"})," Statut visa & Informations d'arrivée"]})}),S.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun étudiant n'a encore obtenu ou s'est vu refuser son visa."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut visa"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'arrivée"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aéroport"}),s.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transport groupé"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(y=>{var w,_,I,M,q;return s.jsxs("tr",{children:[s.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[y.photoURL?s.jsx("img",{className:"h-8 w-8 rounded-full mr-2",src:y.photoURL,alt:""}):s.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:s.jsx(ut,{className:"h-4 w-4 text-blue-500"})}),s.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.displayName||"Sans nom"})]})}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:y.email}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center",children:m(y.uid,e)==="obtained"?s.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[s.jsx(Mi,{className:"h-4 w-4 mr-1"})," Obtenu"]}):s.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:[s.jsx(Ct,{className:"h-4 w-4 mr-1"})," Refusé"]})}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:(w=d[y.uid])!=null&&w.hasTicket?s.jsxs("div",{children:[s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 mb-1",children:"Billet acheté"}),(_=d[y.uid])!=null&&_.arrivalDate?s.jsxs("div",{className:"flex items-center mt-1",children:[s.jsx(nr,{className:"h-4 w-4 mr-1 text-blue-500"}),d[y.uid].arrivalDate,d[y.uid].arrivalTime&&s.jsxs("span",{className:"ml-2 text-gray-700",children:["à ",d[y.uid].arrivalTime]})]}):"Date non renseignée"]}):s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pas encore de billet"})}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:(I=d[y.uid])!=null&&I.airport?s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gd,{className:"h-4 w-4 mr-1 text-blue-500"}),d[y.uid].airport]}):"Non renseigné"}),s.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center",children:m(y.uid,e)==="obtained"&&s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx("div",{children:(M=d[y.uid])!=null&&M.hasOwnTransportation?s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Transport personnel"}):s.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Sans transport"})}),s.jsx("div",{children:(q=d[y.uid])!=null&&q.wantGroupTransport?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(cR,{className:"h-4 w-4 mr-1 text-green-600"}),s.jsx("span",{className:"text-xs font-medium text-green-600",children:"Prise en charge commune"})]}):s.jsx("span",{className:"text-xs text-gray-500",children:"Pas de prise en charge"})})]})})]},y.uid)})})]})})]})})]})},Ov=()=>{const t=at(),{currentUser:e}=Ce(),[r,n]=g.useState("idle"),[i,a]=g.useState([]),[o,l]=g.useState(!1),[u,d]=g.useState(null),[h,m]=g.useState(""),[x,j]=g.useState(""),[A,D]=g.useState(!1),[S,y]=g.useState(null),[w,_]=g.useState(1),[I]=g.useState(10);g.useEffect(()=>{e!=null&&e.uid||t("/login")},[e,t]);const M=g.useCallback(async()=>{n("loading"),m("");try{const V=await new Zs({accessToken:await jn()}).usersGetCurrentAccount();V&&V.status===200?(n("success"),q()):(n("error"),m("Erreur lors de la connexion à Dropbox"))}catch(O){console.error("Erreur lors de la connexion à Dropbox:",O),n("error"),O instanceof Error?m(`Erreur lors de la connexion à Dropbox: ${O.message}`):m(`Erreur lors de la connexion à Dropbox: ${String(O)}`)}},[]),q=g.useCallback(async()=>{l(!0),m("");try{const F=(await new Zs({accessToken:await jn()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(R=>R[".tag"]==="file").map(R=>({id:R.id,name:R.name,path_lower:R.path_lower||"",path_display:R.path_display||R.name,size:"size"in R?R.size:void 0,client_modified:"client_modified"in R?R.client_modified:void 0,is_downloadable:!0}));a(F)}catch(O){console.error("Erreur lors de la récupération des fichiers:",O),O instanceof Error?m(`Erreur lors de la récupération des fichiers: ${O.message}`):m(`Erreur lors de la récupération des fichiers: ${String(O)}`)}finally{l(!1)}},[]),N=g.useCallback(async O=>{try{const V=new Zs({accessToken:await jn()});let H="";try{H=(await V.sharingCreateSharedLinkWithSettings({path:O.path_lower})).result.url}catch(R){const U=R;if(U.status===409||U.error&&U.error.shared_link_already_exists){console.log("Lien de partage déjà existant, récupération...");const W=await V.sharingListSharedLinks({path:O.path_lower,direct_only:!0});if(W.result.links&&W.result.links.length>0)H=W.result.links[0].url;else throw new Error("Impossible de récupérer le lien existant")}else throw R}const F=H.replace("?dl=0","?raw=1");return d({...O,shared_link:{url:F}}),a(R=>R.map(U=>U.id===O.id?{...U,shared_link:{url:F}}:U)),m(""),F}catch(V){console.error("Erreur lors de la création du lien de partage:",V),V instanceof Error?m(`Erreur lors de la création du lien de partage: ${V.message}`):m(`Erreur lors de la création du lien de partage: ${String(V)}`)}},[]),f=g.useCallback(async O=>{try{await new Zs({accessToken:await jn()}).filesDeleteV2({path:O}),a(H=>H.filter(F=>F.path_lower!==O)),u&&u.path_lower===O&&d(null),y(null)}catch(V){console.error("Erreur lors de la suppression du fichier:",V),V instanceof Error?m(`Erreur lors de la suppression du fichier: ${V.message}`):m(`Erreur lors de la suppression du fichier: ${String(V)}`)}},[u]),v=O=>{if(O===void 0||O===0)return"0 Bytes";const V=1024,H=["Bytes","KB","MB","GB","TB"],F=Math.floor(Math.log(O)/Math.log(V));return parseFloat((O/Math.pow(V,F)).toFixed(2))+" "+H[F]},E=x?i.filter(O=>O.name.toLowerCase().includes(x.toLowerCase())):i,C=w*I,P=C-I,k=E.slice(P,C),te=Math.ceil(E.length/I);g.useEffect(()=>{M()},[M]);const ce=g.useCallback(()=>{D(!0),setTimeout(()=>{D(!1)},3e3),q()},[q]),de=O=>_(O);return s.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsxs(Y,{to:"/admin",className:"flex items-center text-blue-600 mb-4 hover:text-blue-800 transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestionnaire Dropbox"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gérez vos fichiers Dropbox, testez la connectivité et générez des liens de partage."})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Statut de connexion"}),s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${r==="success"?"bg-green-500":r==="error"?"bg-red-500":r==="loading"?"bg-yellow-500":"bg-gray-400"}`}),s.jsx("span",{className:"text-sm",children:r==="success"?"Connecté à Dropbox":r==="error"?"Erreur de connexion":r==="loading"?"Vérification de la connexion...":"Statut inconnu"})]}),s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsx("button",{onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:r==="loading",children:r==="loading"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Test en cours..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ws,{className:"w-4 h-4 mr-2"}),"Tester la connexion"]})}),s.jsx("button",{onClick:q,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:o,children:o?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Actualisation..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bx,{className:"w-4 h-4 mr-2"}),"Rafraîchir la liste"]})})]}),h&&s.jsxs("div",{className:"mt-4 bg-red-50 text-red-700 p-3 rounded-md flex items-start",children:[s.jsx(ls,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Erreur"}),s.jsx("p",{className:"text-sm",children:h})]})]}),A&&s.jsxs("div",{className:"mt-4 bg-green-50 text-green-700 p-3 rounded-md flex items-center",children:[s.jsx(ws,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:"Fichier uploadé avec succès! La liste des fichiers a été actualisée."})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Upload un nouveau fichier"}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(b2,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Sélectionnez un fichier à uploader sur Dropbox"})]}),s.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Le fichier sera uploadé directement sur votre compte Dropbox et apparaitra dans la liste ci-dessous."}),s.jsx(Yx,{onSuccess:ce,buttonText:"Sélectionner un fichier"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Fichiers disponibles"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Zr,{className:"h-4 w-4 text-gray-400"})}),s.jsx("input",{type:"text",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64",placeholder:"Rechercher un fichier...",value:x,onChange:O=>j(O.target.value)})]})]}),o?s.jsx("div",{className:"flex justify-center items-center py-16",children:s.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):E.length>0?s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom du fichier"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taille"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de modification"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(O=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Ke,{className:"flex-shrink-0 h-5 w-5 text-blue-600 mr-2"}),s.jsx("div",{className:"text-sm text-gray-900 font-medium truncate max-w-xs",children:O.name})]})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-500",children:v(O.size)})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-500",children:O.client_modified?new Date(O.client_modified).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>N(O),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Générer un lien de partage",children:s.jsx(Js,{className:"h-4 w-4"})}),S===O.id?s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>f(O.path_lower),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Confirmer la suppression",children:s.jsx(ws,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>y(null),className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-50 transition-colors",title:"Annuler",children:s.jsx(Ct,{className:"h-4 w-4"})})]}):s.jsx("button",{onClick:()=>y(O.id),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le fichier",children:s.jsx(yi,{className:"h-4 w-4"})})]})})]},O.id))})]}),te>1&&s.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[s.jsx("button",{onClick:()=>de(Math.max(1,w-1)),disabled:w===1,className:`px-3 py-1 rounded-md ${w===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Précédent"}),Array.from({length:te},(O,V)=>V+1).map(O=>s.jsx("button",{onClick:()=>de(O),className:`w-8 h-8 rounded-md ${w===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:O},O)),s.jsx("button",{onClick:()=>de(Math.min(te,w+1)),disabled:w===te,className:`px-3 py-1 rounded-md ${w===te?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Suivant"})]})]}):s.jsxs("div",{className:"py-16 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(Ke,{className:"h-12 w-12 text-gray-400"})}),s.jsx("p",{className:"text-gray-600 mb-2",children:"Aucun fichier trouvé"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Uploadez un fichier ou vérifiez vos paramètres de connexion Dropbox."})]}),u&&u.shared_link&&s.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-md font-medium text-blue-800",children:"Lien de partage généré"}),s.jsx("button",{onClick:()=>d(null),className:"text-blue-700 hover:text-blue-900",children:s.jsx(Ct,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx(Ke,{className:"h-5 w-5 text-blue-600 mr-2"}),s.jsx("p",{className:"text-blue-700",children:u.name})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:u.shared_link.url,className:"flex-grow p-2 border border-blue-300 rounded-l-md bg-white text-sm focus:outline-none"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(u.shared_link.url),alert("Lien copié dans le presse-papier!")},className:"p-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors",children:s.jsx(Un,{className:"h-5 w-5"})})]}),s.jsx("p",{className:"mt-2 text-xs text-blue-700",children:"Ce lien peut être utilisé pour ajouter ce fichier comme ressource."})]})]})]})},wD=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(null),[i,a]=g.useState(!0),[o,l]=g.useState(""),[u,d]=g.useState("test1234"),[h,m]=g.useState("idle"),[x,j]=g.useState(""),[A,D]=g.useState([]),[S,y]=g.useState(!1),[w,_]=g.useState(null),[I,M]=g.useState("idle"),[q,N]=g.useState(""),[f,v]=g.useState(""),[E,C]=g.useState("Test EmailJS depuis ESIG-prep-guide"),[P,k]=g.useState("Ceci est un email de test pour vérifier la configuration d'EmailJS."),[te,ce]=g.useState("idle"),[de,O]=g.useState(""),[V,H]=g.useState(""),F=async()=>{ce("loading"),O(""),H("");try{const J=["https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token.cjs",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token":"/Esig-prep-guide/.netlify/functions/dropbox-token",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token.cjs":"/Esig-prep-guide/.netlify/functions/dropbox-token.cjs"];console.log("Environnement :",{hostname:window.location.hostname,pathname:window.location.pathname,protocol:window.location.protocol,urls:J});let ae=!1,_e="";for(const De of J)try{const Ve=await fetch(De);if(console.log(`Test ${De} - Status:`,Ve.status),Ve.ok){const Ae=Ve.headers.get("content-type");if(Ae&&Ae.includes("application/json"))try{const ze=await Ve.json();if(console.log(`Test ${De} - Data:`,ze),ze.access_token){O(ze.access_token),ce("success"),ae=!0;break}else _e=`Réponse reçue de ${De} mais pas d'access_token trouvé: ${JSON.stringify(ze)}`}catch(ze){const X=(await Ve.clone().text()).substring(0,100)+"...";_e=`Erreur de parsing JSON pour ${De}: ${X}`,console.error("Erreur de parsing JSON:",ze),console.log("Contenu de la réponse (début):",X)}else{const ze=await Ve.text(),gt=ze.substring(0,150)+"...";_e=`Réponse reçue de ${De} mais pas au format JSON (${Ae}): ${gt}`,console.log("Réponse complète:",ze)}}else{const Ae=await Ve.text(),ze=Ae.length>150?Ae.substring(0,150)+"...":Ae;_e=`Erreur HTTP ${Ve.status} pour ${De}: ${ze}`}}catch(Ve){const Ae=Ve instanceof Error?Ve.message:String(Ve);_e=`Exception lors de l'appel à ${De}: ${Ae}`}ae||(H(_e),ce("error"))}catch(J){console.error("Erreur lors du test de récupération de token:",J);const ae=J instanceof Error?J.message:String(J);H(`Erreur générale: ${ae}`),ce("error")}},R=async()=>{try{(await Xe(ke(re,"test"))).empty?(await zt(ke(re,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(J){const ae=J;console.error("Erreur Firestore:",ae),e(`Erreur Firestore: ${ae.message}`)}},U=async()=>{const J="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";m("loading"),j("");try{const _e=await new Zs({accessToken:J}).usersGetCurrentAccount();m("success"),e(De=>De+`

Connexion Dropbox réussie! Compte: `+_e.result.name.display_name+" (Email: "+_e.result.email+")"),await W()}catch(ae){console.error("Erreur de connexion Dropbox:",ae),m("error"),ae instanceof Error?(j(`Erreur de connexion Dropbox: ${ae.message}`),e(_e=>_e+`

Erreur de connexion Dropbox: `+ae.message)):(j(`Erreur de connexion Dropbox: ${String(ae)}`),e(_e=>_e+`

Erreur de connexion Dropbox: `+String(ae)))}},W=async()=>{const J="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";y(!0),e(ae=>ae+`

Chargement des fichiers Dropbox...`);try{const Ve=(await new Zs({accessToken:J}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(Ae=>Ae[".tag"]==="file").map(Ae=>({id:Ae.id,name:Ae.name,path_lower:Ae.path_lower||"",path_display:Ae.path_display||Ae.name,size:"size"in Ae?Ae.size:void 0,client_modified:"client_modified"in Ae?Ae.client_modified:void 0,is_downloadable:!0}));D(Ve),e(Ae=>Ae+`

${Ve.length} fichiers trouvés dans Dropbox.`)}catch(ae){console.error("Erreur lors de la récupération des fichiers:",ae),ae instanceof Error?e(_e=>_e+`

Erreur lors de la récupération des fichiers: `+ae.message):e(_e=>_e+`

Erreur lors de la récupération des fichiers: `+String(ae))}finally{y(!1)}},ne=async J=>{const ae="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";e(_e=>_e+`

Création d'un lien de partage pour ${J.name}...`);try{const Ve=(await new Zs({accessToken:ae}).sharingCreateSharedLinkWithSettings({path:J.path_lower})).result.url.replace("?dl=0","?raw=1");return e(Ae=>Ae+`

Lien de partage créé avec succès: ${Ve}`),_({...J,shared_link:{url:Ve}}),Ve}catch(_e){console.error("Erreur lors de la création du lien de partage:",_e),_e instanceof Error?e(De=>De+`

Erreur lors de la création du lien de partage: `+_e.message):e(De=>De+`

Erreur lors de la création du lien de partage: `+String(_e))}},pe=async()=>{try{if(o)try{const J=await Hj(Pt,o,u);n(J.user),e(ae=>ae+`

Création de l'utilisateur réussie! UID: ${J.user.uid}`)}catch(J){console.log("Erreur lors de la création, tentative de connexion...",J);try{const ae=await Qj(Pt,o,u);n(ae.user),e(_e=>_e+`

Connexion réussie! UID: ${ae.user.uid}`)}catch(ae){const _e=ae;console.error("Erreur d'authentification:",_e),e(De=>De+`

Erreur d'authentification: ${_e.message}`)}}else e(J=>J+`

Erreur: Veuillez entrer une adresse email.`)}catch(J){console.error("Erreur inattendue:",J),J instanceof Error?e(ae=>ae+`

Erreur inattendue: ${J.message}`):e(ae=>ae+`

Erreur inattendue: ${String(J)}`)}},Z=async()=>{if(!f){N("Veuillez entrer une adresse email de destination");return}M("loading"),N(""),e(J=>J+`

Envoi d'email en cours...`);try{const J={to_email:f,to_name:"Utilisateur de test",subject:E,message:P,app_name:"ESIG-prep-guide",faq_url:window.location.origin+"/faq"},ae=await Kx.send(Sa.SERVICE_ID,Sa.TEMPLATE_ID,J,Sa.PUBLIC_KEY);console.log("Email envoyé avec succès!",ae),M("success"),e(_e=>_e+`

Email envoyé avec succès! ID: ${ae.status}`)}catch(J){console.error("Erreur lors de l'envoi d'email:",J),M("error"),J instanceof Error?(N(`Erreur lors de l'envoi d'email: ${J.message}`),e(ae=>ae+`

Erreur lors de l'envoi d'email: ${J.message}`)):(N(`Erreur lors de l'envoi d'email: ${String(J)}`),e(ae=>ae+`

Erreur lors de l'envoi d'email: ${String(J)}`))}};return g.useEffect(()=>{const J=Pt.onAuthStateChanged(ae=>{n(ae),ae&&l(ae.email||""),a(!1)});return()=>J()},[]),i?s.jsx("div",{className:"p-4",children:"Chargement..."}):s.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),s.jsxs("p",{children:["Utilisateur: ",r?r.email:"Non connecté"]}),s.jsxs("p",{children:["UID: ",(r==null?void 0:r.uid)||"N/A"]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),s.jsx("button",{onClick:R,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),s.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await zt(ke(re,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await zt(ke(re,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await zt(ke(re,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await zt(ke(re,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(J){e("Erreur lors de l'initialisation : "+J.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Email:"}),s.jsx("input",{type:"email",value:o,onChange:J=>l(J.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),s.jsx("input",{type:"password",value:u,onChange:J=>d(J.target.value),className:"border p-2 w-full max-w-md"})]}),s.jsx("button",{onClick:pe,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!o||!u,children:r?"Se connecter":"Créer un compte"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'envoi d'email"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Adresse email de destination:"}),s.jsx("input",{type:"email",value:f,onChange:J=>v(J.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Sujet:"}),s.jsx("input",{type:"text",value:E,onChange:J=>C(J.target.value),className:"border p-2 w-full max-w-md"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-2",children:"Message:"}),s.jsx("textarea",{value:P,onChange:J=>k(J.target.value),className:"border p-2 w-full max-w-md"})]}),s.jsx("button",{onClick:Z,className:"bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded",disabled:!f,children:"Envoyer l'email"}),I==="error"&&s.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:["❌ ",q]}),I==="success"&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:"✅ Email envoyé avec succès!"})]}),s.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),s.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Dropbox"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"1. Tester l'endpoint Netlify Function pour Dropbox Token"}),s.jsx("button",{onClick:F,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",disabled:te==="loading",children:te==="loading"?"Chargement...":"Tester l'endpoint Dropbox Token"}),te==="error"&&s.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:[s.jsx("h4",{className:"font-semibold mb-1",children:"❌ Erreur lors de la récupération du token"}),s.jsx("p",{className:"text-sm",children:V})]}),te==="success"&&s.jsxs("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:[s.jsx("h4",{className:"font-semibold mb-1",children:"✅ Access token récupéré avec succès !"}),s.jsxs("p",{className:"text-sm break-all",children:["Token: ",de.substring(0,20),"...",de.substring(de.length-10)]})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"2. Tester la connectivité Dropbox"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vérifiez d'abord si vos identifiants Dropbox sont correctement configurés et si la connexion fonctionne."}),s.jsx("button",{onClick:U,className:`flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors ${h==="loading"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:h==="loading",children:h==="loading"?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Vérification en cours..."]}):"Tester la connectivité Dropbox"}),h==="success"&&s.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:"✅ Connexion Dropbox établie avec succès!"}),h==="error"&&s.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:["❌ ",x]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"2. Explorer les fichiers Dropbox"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Afficher la liste des fichiers disponibles dans votre compte Dropbox et créer des liens partageables."}),s.jsx("button",{onClick:W,className:"flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors bg-blue-600 hover:bg-blue-700 mb-4",disabled:S||h!=="success",children:S?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Chargement des fichiers..."]}):"Lister les fichiers Dropbox"}),A.length>0&&s.jsxs("div",{className:"border rounded-md overflow-hidden",children:[s.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-medium text-sm text-gray-700 border-b",children:["Fichiers disponibles dans Dropbox (",A.length,")"]}),s.jsx("div",{className:"divide-y max-h-60 overflow-auto",children:A.map(J=>s.jsxs("div",{className:`px-4 py-3 flex items-center justify-between hover:bg-blue-50 cursor-pointer ${(w==null?void 0:w.id)===J.id?"bg-blue-50":""}`,onClick:()=>_(J),children:[s.jsxs("div",{className:"flex-1 mr-4 truncate",children:[s.jsx("div",{className:"font-medium text-gray-800",children:J.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:[J.size?`${Math.round(J.size/1024)} Ko`:"",J.client_modified?` • Modifié le ${new Date(J.client_modified).toLocaleDateString()}`:""]})]}),s.jsx("button",{className:"px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md text-xs",onClick:ae=>{ae.stopPropagation(),ne(J)},children:"Créer un lien"})]},J.id))})]}),w&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-200",children:[s.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Fichier sélectionné : ",w.name]}),w.shared_link?s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",readOnly:!0,value:w.shared_link.url,className:"flex-1 py-2 px-3 bg-white border rounded-l-md focus:outline-none text-sm"}),s.jsx("button",{className:"bg-blue-600 text-white py-2 px-3 rounded-r-md text-sm",onClick:()=>{navigator.clipboard.writeText(w.shared_link.url),e(J=>J+`

Lien copié dans le presse-papier!`)},children:"Copier"})]}):s.jsx("button",{className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",onClick:()=>ne(w),children:"Générer un lien partageable"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"3. Tester l'upload de fichiers"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Uploadez un nouveau fichier vers votre compte Dropbox."}),s.jsx(Yx,{buttonText:"Uploader un fichier test",onSuccess:J=>{e(ae=>ae+`

Fichier uploadé avec succès! URL: ${J}`),W()}})]})]})]})},qv=()=>{const[t,e]=g.useState([]),[r,n]=g.useState(!0);return g.useEffect(()=>{(async()=>{n(!0);const a=St(ke(re,"feedback"),Qn("createdAt","desc")),l=(await Xe(a)).docs.map(u=>({id:u.id,...u.data()}));e(l),n(!1)})()},[]),s.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:s.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow p-3 md:p-4 border border-blue-100 relative",children:[s.jsxs(Y,{to:"/admin",className:"absolute left-3 top-3 flex items-center text-blue-700 hover:text-blue-900 font-medium text-xs",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"})," Retour admin"]}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-blue-900 mb-4 text-center mt-4",children:"Feedbacks utilisateurs"}),r?s.jsx("div",{className:"text-center py-8 text-blue-700 font-semibold text-sm",children:"Chargement..."}):t.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Aucun feedback pour le moment."}):s.jsx("div",{className:"flex flex-col gap-2",children:t.map(i=>s.jsxs("div",{className:"flex flex-col border border-blue-100 bg-blue-50/60 rounded-md px-3 py-2 hover:bg-blue-100 transition group",title:i.message,children:[s.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[s.jsx("span",{className:"text-xs text-gray-500",children:i.createdAt&&new Date(i.createdAt.seconds*1e3).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),s.jsx("span",{className:"text-xs",children:i.email&&i.email.trim()!==""?s.jsxs("a",{href:`mailto:${i.email}`,className:"flex items-center text-blue-700 hover:underline",children:[s.jsx(Br,{className:"w-3 h-3 mr-1"})," ",i.email]}):s.jsx("span",{className:"italic text-gray-500",children:"Utilisateur Anonyme"})})]}),s.jsx("div",{className:"text-xs text-gray-900 font-medium max-w-full whitespace-pre-line",children:i.message})]},i.id))})]})})},Uv=()=>{var He,$e,ds,Je;const t=at(),{currentUser:e}=Ce(),[r,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState(""),[u,d]=g.useState(!1),[h,m]=g.useState(null),[x,j]=g.useState(""),[A,D]=g.useState(!1),[S,y]=g.useState(!1),[w,_]=g.useState(!1),[I,M]=g.useState(""),[q,N]=g.useState(null),[f,v]=g.useState(!1),[E,C]=g.useState([]),[P,k]=g.useState(!1),[te,ce]=g.useState(""),[de,O]=g.useState("upcoming");g.useEffect(()=>{V()},[]);const V=async()=>{a(!0),j("");try{const G=ke(re,"webinars"),xe=St(G),Ee=await Xe(xe),qe=[];Ee.forEach(We=>{var Ue;const ye=We.data(),me={id:We.id,title:ye.title,description:ye.description,date:((Ue=ye.date)==null?void 0:Ue.toDate())||new Date,duration:ye.duration,maxParticipants:ye.maxParticipants,currentParticipants:ye.currentParticipants,category:ye.category,customCategory:ye.customCategory,level:ye.level,imageUrl:ye.imageUrl,speaker:ye.speaker,meetingLink:ye.meetingLink,isLive:ye.isLive,isUpcoming:ye.isUpcoming,isCompleted:ye.isCompleted,tags:ye.tags||[],createdBy:ye.createdBy,createdAt:ye.createdAt,updatedAt:ye.updatedAt};qe.push(me)}),n(qe),a(!1)}catch(G){console.error("Erreur lors de la récupération des webinaires:",G),j("Erreur lors de la récupération des webinaires. Veuillez réessayer."),a(!1)}},H=r.filter(G=>!(de==="upcoming"&&!G.isUpcoming||de==="live"&&!G.isLive||de==="completed"&&!G.isCompleted||o&&!G.title.toLowerCase().includes(o.toLowerCase())&&!G.description.toLowerCase().includes(o.toLowerCase())&&!G.tags.some(xe=>xe.toLowerCase().includes(o.toLowerCase())))),F=()=>{J({title:"",description:"",date:new Date,duration:60,maxParticipants:50,currentParticipants:0,category:"",level:"beginner",speaker:{name:"",title:"",avatar:""},meetingLink:"",isLive:!1,isUpcoming:!0,isCompleted:!1,tags:[]}),m(null),d(!0)};g.useEffect(()=>{h&&u&&J({title:h.title,description:h.description,date:h.date,duration:h.duration,maxParticipants:h.maxParticipants,currentParticipants:h.currentParticipants,category:h.category,customCategory:h.customCategory,level:h.level,imageUrl:h.imageUrl,speaker:{name:h.speaker.name,title:h.speaker.title,avatar:h.speaker.avatar||""},meetingLink:h.meetingLink||"",isLive:h.isLive,isUpcoming:h.isUpcoming,isCompleted:h.isCompleted,tags:h.tags||[]})},[h,u]);const R=G=>{J({title:G.title,description:G.description,date:G.date,duration:G.duration,maxParticipants:G.maxParticipants,currentParticipants:G.currentParticipants,category:G.category,customCategory:G.customCategory,level:G.level,imageUrl:G.imageUrl,speaker:{name:G.speaker.name,title:G.speaker.title,avatar:G.speaker.avatar},meetingLink:G.meetingLink,isLive:G.isLive,isUpcoming:G.isUpcoming,isCompleted:G.isCompleted,tags:G.tags}),m(G),d(!0)},U=async G=>{N(G),M("Êtes-vous sûr de vouloir supprimer ce webinaire ? Cette action est irréversible."),D(!0)},W=async()=>{if(q)try{j("");const G=r.find(xe=>xe.id===q);await Dn(be(re,"webinars",q)),n(xe=>xe.filter(Ee=>Ee.id!==q)),G&&await Rt({type:"Suppression",target:"Webinaire",targetId:q,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:G.title,action:"Suppression du webinaire",date:G.date}}),M("Webinaire supprimé avec succès."),y(!0),N(null),D(!1)}catch(G){console.error("Erreur lors de la suppression du webinaire:",G),j("Erreur lors de la suppression du webinaire. Veuillez réessayer."),M("Erreur lors de la suppression du webinaire. Veuillez réessayer."),_(!0),N(null),D(!1)}},ne=async G=>{var xe;try{if(!e){M("Vous devez être connecté pour effectuer cette action"),_(!0);return}const qe={...Object.entries(G).reduce((We,[ye,me])=>(me!==void 0&&(We[ye]=me),We),{}),date:et.fromDate(G.date),updatedAt:is()};if(h){const We=be(re,"webinars",h.id);await ts(We,qe);const ye=r.map(me=>me.id===h.id?{...me,...G}:me);n(ye),await Rt({type:"Modification",target:"Webinaire",targetId:h.id,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:G.title||h.title,action:"Mise à jour du webinaire",changes:Object.keys(qe).filter(me=>me!=="updatedAt")}}),M("Webinaire mis à jour avec succès"),y(!0)}else{const We={...qe,createdAt:is(),createdBy:e.uid,currentParticipants:0},ye=await zt(ke(re,"webinars"),We),me={id:ye.id,...G,currentParticipants:0,createdBy:e.uid};n([...r,me]),await Rt({type:"Ajout",target:"Webinaire",targetId:ye.id,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:me.title,action:"Création du webinaire",date:me.date,speaker:(xe=me.speaker)==null?void 0:xe.name}}),M("Webinaire créé avec succès"),y(!0)}d(!1),m(null)}catch(Ee){console.error("Erreur lors de la sauvegarde du webinaire:",Ee),M("Erreur lors de la sauvegarde du webinaire. Veuillez réessayer."),_(!0)}},pe=G=>{t(`/webinars/${G}`)},[Z,J]=g.useState({title:"",description:"",date:new Date,duration:60,maxParticipants:50,currentParticipants:0,category:"",level:"beginner",speaker:{name:"",title:"",avatar:""},meetingLink:"",isLive:!1,isUpcoming:!0,isCompleted:!1,tags:[]}),ae=G=>{const{name:xe,value:Ee}=G.target;J(xe==="category"&&Ee!=="autre"?{...Z,[xe]:Ee,customCategory:""}:{...Z,[xe]:Ee})},_e=G=>{J({...Z,date:new Date(G.target.value)})},De=G=>{var We,ye,me;const xe=G.target.name,Ee=G.target.value;let qe="";xe==="speakerName"?qe="name":xe==="speakerTitle"?qe="title":xe==="speakerAvatar"&&(qe="avatar"),J({...Z,speaker:{name:((We=Z.speaker)==null?void 0:We.name)||"",title:((ye=Z.speaker)==null?void 0:ye.title)||"",avatar:(me=Z.speaker)==null?void 0:me.avatar,[qe]:Ee}})},Ve=G=>{const{name:xe,checked:Ee}=G.target;xe==="isLive"||xe==="isUpcoming"||xe==="isCompleted"?Ee?J({...Z,isLive:xe==="isLive",isUpcoming:xe==="isUpcoming",isCompleted:xe==="isCompleted"}):!Z.isLive&&!Z.isUpcoming&&!Z.isCompleted||xe==="isUpcoming"&&Z.isUpcoming?J({...Z,isUpcoming:!0,isLive:!1,isCompleted:!1}):J({...Z,[xe]:Ee}):J({...Z,[xe]:Ee})},Ae=G=>{const xe=G.target.value.split(",").map(Ee=>Ee.trim());J({...Z,tags:xe})},ze=G=>{const xe=G.getFullYear(),Ee=String(G.getMonth()+1).padStart(2,"0"),qe=String(G.getDate()).padStart(2,"0"),We=String(G.getHours()).padStart(2,"0"),ye=String(G.getMinutes()).padStart(2,"0");return`${xe}-${Ee}-${qe}T${We}:${ye}`},gt=async(G,xe)=>{k(!0),ce(xe),C([]),v(!0);try{await Rt({type:"Consultation",target:"Webinaire",targetId:G,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:xe,action:"Consultation des inscriptions",timestamp:new Date().toISOString()}});const Ee=St(ke(re,"webinarRegistrations"),lr("webinarId","==",G)),qe=await Xe(Ee),We=[];qe.forEach(ye=>{var Ue,Er;const me=ye.data();We.push({id:ye.id,webinarId:me.webinarId,webinarTitle:me.webinarTitle,userId:me.userId,userName:me.userName,userEmail:me.userEmail,userPhone:me.userPhone||"Non renseigné",question:me.question||"Aucune question",receiveUpdates:me.receiveUpdates,status:me.status,registeredAt:((Ue=me.registeredAt)==null?void 0:Ue.toDate())||new Date,webinarDate:((Er=me.webinarDate)==null?void 0:Er.toDate())||new Date})}),We.sort((ye,me)=>me.registeredAt.getTime()-ye.registeredAt.getTime()),C(We)}catch(Ee){console.error("Erreur lors de la récupération des inscriptions:",Ee),M("Erreur lors de la récupération des inscriptions. Veuillez réessayer."),_(!0)}finally{k(!1)}},X=()=>{if(E.length===0)return;const Ee=[["Nom","Email","Téléphone","Question","Statut","Date d'inscription","Recevoir des mises à jour"].join(","),...E.map(me=>{const Ue=new Date(me.registeredAt).toLocaleString("fr-FR");return[`"${me.userName.replace(/"/g,'""')}"`,`"${me.userEmail.replace(/"/g,'""')}"`,`"${me.userPhone.replace(/"/g,'""')}"`,`"${me.question.replace(/"/g,'""')}"`,`"${me.status}"`,`"${Ue}"`,me.receiveUpdates?"Oui":"Non"].join(",")})].join(`
`),qe=new Blob([Ee],{type:"text/csv;charset=utf-8;"}),We=URL.createObjectURL(qe),ye=document.createElement("a");ye.setAttribute("href",We),ye.setAttribute("download",`inscriptions_${te.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)};return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour"]}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Gestion des Webinaires"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Créez, modifiez et supprimez les webinaires proposés aux étudiants"})]}),s.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-3",children:[s.jsxs("button",{onClick:F,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(as,{className:"w-4 h-4 mr-2"}),"Créer un webinaire"]}),s.jsxs(Y,{to:e!=null&&e.isAdmin?"/admin/workshop-proposals":"/editor/workshop-proposals",className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(nr,{className:"w-4 h-4 mr-2"}),"Propositions d'ateliers"]})]})]})]}),s.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>O("upcoming"),className:`px-3 py-1.5 rounded-full flex items-center ${de==="upcoming"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[s.jsx(nr,{className:"w-4 h-4 mr-1"}),"À venir"]}),s.jsxs("button",{onClick:()=>O("live"),className:`px-3 py-1.5 rounded-full flex items-center ${de==="live"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[s.jsx(Us,{className:"w-4 h-4 mr-1"}),"En direct"]}),s.jsxs("button",{onClick:()=>O("completed"),className:`px-3 py-1.5 rounded-full flex items-center ${de==="completed"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[s.jsx(ws,{className:"w-4 h-4 mr-1"}),"Terminés"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Rechercher un webinaire...",value:o,onChange:G=>l(G.target.value),className:"pl-10 pr-4 py-2 rounded-md border border-gray-300 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsx(Zr,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),x&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(xs,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:x})]})}),i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):H.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx(Us,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucun webinaire trouvé"}),s.jsx("p",{className:"text-gray-500 mb-4",children:o?"Aucun résultat pour votre recherche":"Aucun webinaire n'est disponible dans cette catégorie"}),s.jsxs("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors inline-flex items-center",children:[s.jsx(as,{className:"w-4 h-4 mr-2"}),"Créer un webinaire"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(G=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"h-40 bg-gray-200 relative",children:[G.imageUrl?s.jsx("img",{src:G.imageUrl,alt:G.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-50",children:s.jsx(Us,{className:"w-16 h-16 text-blue-300"})}),s.jsxs("div",{className:"absolute top-2 right-2",children:[G.isLive&&s.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-medium inline-flex items-center",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-white mr-1 animate-pulse"}),"En direct"]}),G.isUpcoming&&!G.isLive&&s.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:"À venir"}),G.isCompleted&&s.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Terminé"})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 line-clamp-2",children:G.title}),s.jsxs("div",{className:"flex items-start mb-3",children:[s.jsx(nr,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[G.date.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),s.jsx("span",{className:"mx-1",children:"•"}),G.date.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{className:"flex items-start mb-3",children:[s.jsx(ut,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[G.currentParticipants,"/",G.maxParticipants," participants"]})]}),s.jsxs("div",{className:"flex items-start mb-4",children:[s.jsx(VR,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[G.tags.slice(0,3).map((xe,Ee)=>s.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:xe},Ee)),G.tags.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",G.tags.length-3]})]})]}),s.jsxs("div",{className:"flex border-t pt-3 mt-2",children:[s.jsxs("button",{onClick:()=>pe(G.id),className:"flex-1 flex items-center justify-center text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx(x2,{className:"w-4 h-4 mr-1"}),"Voir"]}),s.jsxs("button",{onClick:()=>R(G),className:"flex-1 flex items-center justify-center text-yellow-600 hover:text-yellow-800 transition-colors",children:[s.jsx($r,{className:"w-4 h-4 mr-1"}),"Modifier"]}),s.jsxs("button",{onClick:()=>U(G.id),className:"flex-1 flex items-center justify-center text-red-600 hover:text-red-800 transition-colors",children:[s.jsx(yi,{className:"w-4 h-4 mr-1"}),"Supprimer"]}),s.jsxs("button",{onClick:()=>gt(G.id,G.title),className:"flex-1 flex items-center justify-center text-green-600 hover:text-green-800 transition-colors",children:[s.jsx(vi,{className:"w-4 h-4 mr-1"}),"Voir les inscriptions"]})]})]})]},G.id))}),u&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:h?"Modifier le webinaire":"Créer un nouveau webinaire"}),s.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:s.jsx(xs,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:h?"Modifiez les informations du webinaire existant.":"Veuillez remplir tous les champs obligatoires pour créer un nouveau webinaire."}),s.jsx("div",{className:"bg-blue-50 text-blue-800 p-3 rounded-md",children:s.jsx("p",{className:"text-sm font-medium",children:"Note: Cette interface est un prototype. La fonctionnalité de sauvegarde dans Firestore sera implémentée ultérieurement."})})]}),s.jsxs("form",{className:"space-y-6",onSubmit:G=>{G.preventDefault(),ne(h?{...h,...Z}:{...Z})},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"col-span-full",children:[s.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Titre du webinaire ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"title",name:"title",value:Z.title,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"col-span-full",children:[s.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{id:"description",name:"description",rows:4,value:Z.description,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:["Date et heure ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"datetime-local",id:"date",name:"date",value:ze(Z.date||new Date),onChange:_e,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:["Durée (minutes) ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",id:"duration",name:"duration",min:"15",step:"5",value:Z.duration,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"maxParticipants",className:"block text-sm font-medium text-gray-700",children:["Nombre maximum de participants ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",id:"maxParticipants",name:"maxParticipants",min:"1",value:Z.maxParticipants,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"currentParticipants",className:"block text-sm font-medium text-gray-700",children:"Participants actuels"}),s.jsx("input",{type:"number",id:"currentParticipants",name:"currentParticipants",min:"0",value:Z.currentParticipants,onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:["Catégorie ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{id:"category",name:"category",value:Z.category,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Sélectionnez une catégorie"}),s.jsx("option",{value:"workshop",children:"Atelier"}),s.jsx("option",{value:"coaching",children:"Coaching"}),s.jsx("option",{value:"info",children:"Information"}),s.jsx("option",{value:"campus-france",children:"Campus France"}),s.jsx("option",{value:"académique",children:"Académique"}),s.jsx("option",{value:"installation",children:"Installation"}),s.jsx("option",{value:"autre",children:"Autre"})]})]}),Z.category==="autre"&&s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"customCategory",className:"block text-sm font-medium text-gray-700",children:["Précisez la catégorie ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"customCategory",name:"customCategory",value:Z.customCategory||"",onChange:ae,required:!0,placeholder:"Entrez votre catégorie personnalisée",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:["Niveau ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{id:"level",name:"level",value:Z.level,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Sélectionnez un niveau"}),s.jsx("option",{value:"beginner",children:"Débutant"}),s.jsx("option",{value:"intermediate",children:"Intermédiaire"}),s.jsx("option",{value:"advanced",children:"Avancé"})]})]}),s.jsxs("div",{className:"col-span-full",children:[s.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"URL de l'image"}),s.jsx("input",{type:"text",id:"imageUrl",name:"imageUrl",value:Z.imageUrl||"",onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),Z.imageUrl&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:Z.imageUrl,alt:"Aperçu",className:"h-24 w-auto object-cover rounded",onError:G=>{G.currentTarget.src="https://via.placeholder.com/400x200?text=Image+non+disponible"}})})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"speakerName",className:"block text-sm font-medium text-gray-700",children:["Nom de l'intervenant ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"speakerName",name:"speakerName",value:((He=Z.speaker)==null?void 0:He.name)||"",onChange:De,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"speakerTitle",className:"block text-sm font-medium text-gray-700",children:["Titre de l'intervenant ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",id:"speakerTitle",name:"speakerTitle",value:(($e=Z.speaker)==null?void 0:$e.title)||"",onChange:De,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"speakerAvatar",className:"block text-sm font-medium text-gray-700",children:"Avatar de l'intervenant (URL)"}),s.jsx("input",{type:"text",id:"speakerAvatar",name:"speakerAvatar",value:((ds=Z.speaker)==null?void 0:ds.avatar)||"",onChange:De,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),((Je=Z.speaker)==null?void 0:Je.avatar)&&s.jsx("div",{className:"mt-2",children:s.jsx("img",{src:Z.speaker.avatar,alt:"Avatar",className:"h-10 w-10 rounded-full object-cover",onError:G=>{G.currentTarget.src="https://via.placeholder.com/100?text=Avatar"}})})]}),s.jsxs("div",{className:"col-span-full",children:[s.jsx("label",{htmlFor:"meetingLink",className:"block text-sm font-medium text-gray-700",children:"Lien de la réunion"}),s.jsx("input",{type:"url",id:"meetingLink",name:"meetingLink",value:Z.meetingLink||"",onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),s.jsx("div",{className:"col-span-full",children:s.jsxs("fieldset",{children:[s.jsx("legend",{className:"text-sm font-medium text-gray-700",children:"Statut"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"isLive",name:"isLive",type:"checkbox",checked:Z.isLive,onChange:Ve,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isLive",className:"ml-2 block text-sm text-gray-700",children:"En direct"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"isUpcoming",name:"isUpcoming",type:"checkbox",checked:Z.isUpcoming,onChange:Ve,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isUpcoming",className:"ml-2 block text-sm text-gray-700",children:"À venir"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"isCompleted",name:"isCompleted",type:"checkbox",checked:Z.isCompleted,onChange:Ve,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"isCompleted",className:"ml-2 block text-sm text-gray-700",children:"Terminé"})]})]})]})}),s.jsxs("div",{className:"col-span-full",children:[s.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (séparés par des virgules)"}),s.jsx("input",{type:"text",id:"tags",name:"tags",value:(Z.tags||[]).join(", "),onChange:Ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(Z.tags||[]).map((G,xe)=>s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:G},xe))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-5 border-t",children:[s.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),s.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h?"Enregistrer les modifications":"Créer le webinaire"})]})]})]})})}),A&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmation"}),s.jsx("p",{className:"text-gray-600 mb-6",children:I}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Annuler"}),s.jsx("button",{onClick:W,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Supprimer"})]})]})}),S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(ws,{className:"text-green-500 mr-2",size:24}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Succès"})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:I}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Fermer"})})]})}),w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(xs,{className:"text-red-500 mr-2",size:24}),s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Erreur"})]}),s.jsx("p",{className:"text-gray-600 mb-6",children:I}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Fermer"})})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Inscriptions pour : ",te]}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-500",children:s.jsx(xs,{className:"w-6 h-6"})})]}),P?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des inscriptions..."})]}):E.length>0?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[E.length," inscription(s) au total"]}),s.jsxs("button",{onClick:X,className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 inline-flex items-center text-sm",children:[s.jsx(Un,{className:"w-4 h-4 mr-1"}),"Télécharger CSV"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Téléphone"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),s.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(G=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:G.userName}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:G.userEmail}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:G.userPhone}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:s.jsx("div",{className:"max-w-xs truncate",title:G.question,children:G.question})}),s.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:[G.registeredAt.toLocaleDateString()," ",G.registeredAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${G.status==="confirmed"?"bg-green-100 text-green-800":G.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:G.status==="confirmed"?"Confirmé":G.status==="cancelled"?"Annulé":G.status==="attended"?"Présent":G.status})})]},G.id))})]})})]}):s.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:[s.jsx(ut,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune inscription"}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Ce webinaire n'a pas encore d'inscriptions."})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:()=>v(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Fermer"})})]})})]})},zv=()=>{const{currentUser:t}=Ce(),e=at(),[r,n]=g.useState([]),[i,a]=g.useState([]),[o,l]=g.useState(!0),[u,d]=g.useState(""),[h,m]=g.useState("all"),[x,j]=g.useState(""),[A,D]=g.useState([]),[S,y]=g.useState(null),[w,_]=g.useState(!1),[I,M]=g.useState(""),[q,N]=g.useState(""),[f,v]=g.useState(null);g.useEffect(()=>{(async()=>{try{l(!0);const R=St(ke(re,"workshopProposals"),Qn("createdAt","desc")),U=await Xe(R),W=[];U.forEach(ne=>{const pe=ne.data();W.push({id:ne.id,...pe})}),n(W),a(W),l(!1)}catch(R){console.error("Erreur lors de la récupération des propositions:",R),d("Une erreur est survenue lors de la récupération des propositions."),l(!1)}})()},[]),g.useEffect(()=>{let F=r;if(h!=="all"&&(F=F.filter(R=>R.status===h)),x){const R=x.toLowerCase();F=F.filter(U=>U.title.toLowerCase().includes(R)||U.description.toLowerCase().includes(R)||U.userName.toLowerCase().includes(R)||U.userEmail.toLowerCase().includes(R)||U.topics&&U.topics.some(W=>W.toLowerCase().includes(R)))}a(F)},[h,x,r]);const E=F=>{D(R=>R.includes(F)?R.filter(U=>U!==F):[...R,F])},C=async(F,R)=>{if(t)try{y(F);const U=be(re,"workshopProposals",F);await ts(U,{status:R,updatedAt:et.now(),updatedBy:t.uid}),n(W=>W.map(ne=>ne.id===F?{...ne,status:R}:ne)),y(null)}catch(U){console.error("Erreur lors de la mise à jour du statut:",U),d("Une erreur est survenue lors de la mise à jour du statut."),y(null)}},P=(F,R)=>{const U=r.find(pe=>pe.id===F);if(!U)return;let W="",ne="";R==="approved"?(W="Approuver la proposition",ne=`Êtes-vous sûr de vouloir approuver la proposition "${U.title}" ? L'auteur pourrait être notifié de cette décision.`,v({type:"approve",id:F})):R==="rejected"?(W="Rejeter la proposition",ne=`Êtes-vous sûr de vouloir rejeter la proposition "${U.title}" ? L'auteur pourrait être notifié de cette décision.`,v({type:"reject",id:F})):(W="Remettre en attente",ne=`Êtes-vous sûr de vouloir remettre la proposition "${U.title}" en attente ?`,v({type:"pending",id:F})),M(W),N(ne),_(!0)},k=async F=>{try{y(F),await Dn(be(re,"workshopProposals",F)),n(R=>R.filter(U=>U.id!==F)),y(null)}catch(R){console.error("Erreur lors de la suppression:",R),d("Une erreur est survenue lors de la suppression de la proposition."),y(null)}},te=F=>{const R=r.find(U=>U.id===F);R&&(M("Supprimer la proposition"),N(`Êtes-vous sûr de vouloir supprimer définitivement la proposition "${R.title}" ? Cette action est irréversible.`),v({type:"delete",id:F}),_(!0))},ce=()=>{if(f){if(f.type==="delete")k(f.id);else{const F=f.type;C(f.id,F)}_(!1),v(null)}},de=()=>{_(!1),v(null)},O=()=>{if(i.length===0)return;const F=["Titre","Description","Durée (min)","Sujets","Public cible","Date préférée","Email","Nom","Status","Date de création"],R=i.map(Z=>[`"${Z.title.replace(/"/g,'""')}"`,`"${Z.description.replace(/"/g,'""')}"`,Z.expectedDuration,`"${Z.topics?Z.topics.join(", "):""}"`,`"${Z.targetAudience||""}"`,Z.preferredDate||"",Z.contactEmail,`"${Z.userName}"`,Z.status,Z.createdAt?new Date(Z.createdAt.toDate()).toLocaleString():""]),U=[F.join(","),...R.map(Z=>Z.join(","))].join(`
`),W=new Blob([U],{type:"text/csv;charset=utf-8;"}),ne=URL.createObjectURL(W),pe=document.createElement("a");pe.setAttribute("href",ne),pe.setAttribute("download",`propositions-ateliers-${new Date().toISOString().slice(0,10)}.csv`),pe.style.visibility="hidden",document.body.appendChild(pe),pe.click(),document.body.removeChild(pe)},V=F=>{switch(F){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=F=>{switch(F){case"pending":return"En attente";case"approved":return"Approuvé";case"rejected":return"Rejeté";default:return F}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Propositions d'ateliers"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Gérez les propositions d'ateliers soumises par les utilisateurs."})]}),u&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ls,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:u})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),s.jsxs("select",{id:"status-filter",value:h,onChange:F=>m(F.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Tous les statuts"}),s.jsx("option",{value:"pending",children:"En attente"}),s.jsx("option",{value:"approved",children:"Approuvés"}),s.jsx("option",{value:"rejected",children:"Rejetés"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rechercher"}),s.jsx("input",{type:"text",id:"search",value:x,onChange:F=>j(F.target.value),placeholder:"Rechercher par titre, sujet...",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]}),s.jsx("div",{children:s.jsxs("button",{onClick:O,disabled:i.length===0,className:`flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${i.length===0?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,children:[s.jsx(Un,{className:"w-4 h-4 mr-2"}),"Exporter CSV"]})})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:o?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des propositions..."})]}):i.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(lt,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune proposition"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x||h!=="all"?"Aucune proposition ne correspond à vos critères de recherche.":"Aucune proposition d'atelier n'a été soumise pour le moment."})]}):s.jsx("div",{className:"divide-y divide-gray-200",children:i.map(F=>{var R;return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start",children:[s.jsxs("div",{className:"mb-4 sm:mb-0",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:F.title}),s.jsx("span",{className:`ml-3 px-2.5 py-0.5 rounded-full text-xs font-medium ${V(F.status)}`,children:H(F.status)})]}),s.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:["Soumis par ",F.userName," • ",(R=F.createdAt)!=null&&R.toDate?new Date(F.createdAt.toDate()).toLocaleString():"Date inconnue"]}),s.jsx("div",{className:"mt-2",children:F.topics&&F.topics.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:F.topics.map((U,W)=>s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:U},W))})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[F.status!=="approved"&&s.jsxs("button",{onClick:()=>P(F.id,"approved"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===F.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:[s.jsx(Mi,{className:"w-3 h-3 mr-1"}),"Approuver"]}),F.status!=="rejected"&&s.jsxs("button",{onClick:()=>P(F.id,"rejected"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===F.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Rejeter"]}),F.status!=="pending"&&s.jsxs("button",{onClick:()=>P(F.id,"pending"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===F.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"}`,children:[s.jsx(ls,{className:"w-3 h-3 mr-1"}),"En attente"]}),s.jsxs("button",{onClick:()=>te(F.id),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===F.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:[s.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Supprimer"]})]})]}),s.jsx("button",{onClick:()=>E(F.id),className:"mt-4 flex items-center text-sm text-blue-600 hover:text-blue-800",children:A.includes(F.id)?s.jsxs(s.Fragment,{children:[s.jsx(Bo,{className:"w-4 h-4 mr-1"}),"Masquer les détails"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ln,{className:"w-4 h-4 mr-1"}),"Voir les détails"]})}),A.includes(F.id)&&s.jsxs("div",{className:"mt-4 bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),s.jsx("p",{className:"text-gray-700 whitespace-pre-line mb-4",children:F.description}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-start mb-2",children:[s.jsx(cr,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Durée estimée"}),s.jsxs("p",{className:"text-sm text-gray-700",children:[F.expectedDuration," minutes"]})]})]}),F.targetAudience&&s.jsxs("div",{className:"flex items-start mb-2",children:[s.jsx(Ts,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Public cible"}),s.jsx("p",{className:"text-sm text-gray-700",children:F.targetAudience})]})]})]}),s.jsxs("div",{children:[F.preferredDate&&s.jsxs("div",{className:"flex items-start mb-2",children:[s.jsx(nr,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Date préférée"}),s.jsx("p",{className:"text-sm text-gray-700",children:new Date(F.preferredDate).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-start mb-2",children:[s.jsx(Br,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Contact"}),s.jsx("p",{className:"text-sm text-gray-700",children:s.jsxs("a",{href:`mailto:${F.contactEmail}`,className:"text-blue-600 hover:underline flex items-center",children:[F.contactEmail,s.jsx(Js,{className:"w-3 h-3 ml-1"})]})})]})]})]})]}),F.notes&&s.jsxs("div",{className:"mt-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Notes supplémentaires"}),s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:F.notes})]})]})]},F.id)})})})]}),w&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:I}),s.jsx("p",{className:"text-gray-600 mb-6",children:q}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{onClick:de,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors",children:"Annuler"}),s.jsx("button",{onClick:ce,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Confirmer"})]})]})})]})},jD=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:s.jsxs("div",{className:"text-center max-w-md",children:[s.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:s.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),s.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),s.jsxs(Y,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[s.jsx(Ku,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),ND=({open:t,onClose:e,onSubmit:r,loading:n=!1,error:i,label:a})=>{const[o,l]=g.useState(""),u=d=>{d.preventDefault(),r(o)};return bi.useEffect(()=>{t||l("")},[t]),t?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:"×"}),s.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:a||"Confirmez avec votre mot de passe"}),s.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[s.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:o,onChange:d=>l(d.target.value),disabled:n,autoFocus:!0}),i&&s.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||o==="",children:"Valider"})]})]})}):null},_D=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(!1),[i,a]=g.useState(null),[o,l]=g.useState(null),[u,d]=g.useState(null),[h,m]=g.useState(""),{currentUser:x}=Ce(),[j,A]=g.useState((x==null?void 0:x.displayName)||""),[D,S]=g.useState((x==null?void 0:x.photoURL)||""),[y]=g.useState((x==null?void 0:x.email)||""),[w,_]=g.useState(""),[I,M]=g.useState(!1),[q,N]=g.useState(null),[f,v]=g.useState(null),[E,C]=g.useState("none"),[P,k]=g.useState(!0),[te,ce]=g.useState(null);g.useEffect(()=>{(async()=>{if(x)try{const U=be(re,"users",x.uid),W=await xt(U);if(W.exists()){const ne=W.data();ne.status&&C(ne.status)}}catch(U){console.error("Erreur lors du chargement du statut utilisateur:",U)}finally{k(!1)}})()},[x]);const de=Pt.currentUser,O=de==null?void 0:de.providerData.some(R=>R.providerId==="password");if(!x)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:s.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:s.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const V=async R=>{if(R.preventDefault(),N(null),v(null),!O){ce("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:j,photoURL:D}),l("profile"),e(!0)},H=async R=>{if(R.preventDefault(),N(null),v(null),!O){ce("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}m(w),l("password"),e(!0)},F=async R=>{const U=Pt.currentUser;if(!U)return;n(!0),a(null);const W=Bi.credential(U.email||"",R);try{if(await pA(U,W),o==="profile"&&u){if(await Kj(U,{displayName:u.displayName,photoURL:u.photoURL}),A(u.displayName),S(u.photoURL),x){const ne=be(re,"users",x.uid);await ts(ne,{status:E})}v("Profil mis à jour !")}else o==="password"&&h&&(await xA(U,h),_(""),v("Mot de passe mis à jour !"));e(!1),l(null),d(null),m("")}catch{a("Mot de passe incorrect.")}finally{n(!1),M(!1)}};return s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[s.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),s.jsxs("span",{className:"flex items-center text-xl font-bold",children:[s.jsx(qt,{className:"w-6 h-6 mr-2 text-white"})," Mon profil"]})]})}),s.jsx("div",{className:"w-full mx-auto p-4 flex justify-center",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp mt-8 mb-8",children:[s.jsxs("div",{className:"relative mb-5",children:[D?s.jsx("img",{src:D,alt:j||y,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):s.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:s.jsx("svg",{className:"w-16 h-16 text-blue-200",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14c4.418 0 8 1.79 8 4v2H4v-2c0-2.21 3.582-4 8-4zm0-4a4 4 0 110-8 4 4 0 010 8z"})})}),(x==null?void 0:x.emailVerified)&&s.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(x==null?void 0:x.isAdmin)&&s.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[s.jsx(qt,{className:"w-4 h-4"})," Admin"]})]}),s.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:j||y}),s.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:y}),s.jsxs("form",{onSubmit:V,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),s.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:j,onChange:R=>A(R.target.value),placeholder:"Nom affiché",disabled:I})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),s.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:D,onChange:R=>S(R.target.value),placeholder:"URL de la photo",disabled:I})]}),s.jsxs("div",{className:"col-span-1 md:col-span-2",children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Votre statut"}),s.jsxs("div",{className:"relative border-2 border-blue-100 rounded-lg",children:[s.jsxs("select",{className:"appearance-none w-full px-4 py-2 bg-transparent focus:outline-none",value:E,onChange:R=>C(R.target.value),disabled:I||P,children:[s.jsx("option",{value:"none",children:"Sélectionnez votre statut"}),Gx.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]}),s.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),E!=="none"&&s.jsxs("div",{className:"mt-2 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"Statut actuel:"}),s.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[E==="cps"&&s.jsx(Gd,{className:"w-4 h-4 text-blue-500"}),E==="esigelec"&&s.jsx(qx,{className:"w-4 h-4 text-green-500"}),E==="alumni"&&s.jsx(Ts,{className:"w-4 h-4 text-purple-500"}),E==="other"&&s.jsx(Ts,{className:"w-4 h-4 text-gray-500"}),WR(E)]})]})]})]}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:I,children:"Sauvegarder le profil"})]}),s.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),O?s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:H,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[s.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),s.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:R=>_(R.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:I}),s.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:I||w.length<6,children:"Mettre à jour le mot de passe"})]}),s.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),v(null);try{await mp(Pt,y),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):s.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[s.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),s.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),v(null);try{await mp(Pt,y),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{N("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(q||f)&&s.jsx("div",{className:`mt-6 text-center text-sm font-medium ${q?"text-red-600":"text-green-600"}`,children:q||f}),te&&s.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:te}),s.jsx(ND,{open:t,onClose:()=>{e(!1),a(null),l(null)},onSubmit:F,loading:r,error:i,label:o==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})]})},ED=()=>{const t=at(),{currentUser:e}=Ce();return s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-8",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[s.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),s.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'utilisation - ESIG-prep-guide"})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bienvenue dans votre guide ESIG-prep-guide"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Cette plateforme a été conçue pour vous accompagner dans toutes les étapes de votre parcours, depuis l'admission à l'ESIG jusqu'à votre arrivée à Rouen. Découvrez comment utiliser efficacement les différentes fonctionnalités à votre disposition."}),e&&s.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:s.jsxs("p",{className:"text-blue-700",children:[s.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Sommaire"}),s.jsxs("ul",{className:"space-y-2",children:[s.jsx("li",{children:s.jsx("a",{href:"#navigation",className:"text-blue-600 hover:underline",children:"1. Navigation par phase"})}),s.jsx("li",{children:s.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"2. Ressources documentaires"})}),s.jsx("li",{children:s.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Foire aux questions (FAQ)"})}),s.jsx("li",{children:s.jsx("a",{href:"#profile",className:"text-blue-600 hover:underline",children:"4. Gestion de votre profil"})}),s.jsx("li",{children:s.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"5. Conseils pratiques"})})]})]}),s.jsxs("div",{id:"navigation",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Gd,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"1. Navigation par phase"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Le parcours est organisé en trois phases distinctes pour vous guider pas à pas. Chaque phase contient des ressources spécifiques adaptées à votre progression."}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-5",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Phase Post-CPS"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les étudiants venant de recevoir leur admission au CPS. Vous y trouverez des informations sur les premières démarches à effectuer."}),s.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[s.jsx("li",{children:"Procédures d'inscription"}),s.jsx("li",{children:"Documents à fournir"}),s.jsx("li",{children:"Préparation académique"})]})]}),s.jsxs("div",{className:"bg-indigo-50 rounded-lg p-5",children:[s.jsx("h4",{className:"font-semibold text-indigo-800 mb-2",children:"Phase During-Process"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les démarches administratives en cours (visa, logement, assurances)."}),s.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[s.jsx("li",{children:"Guides pour les démarches consulaires"}),s.jsx("li",{children:"Check-lists pour les documents de visa"}),s.jsx("li",{children:"Options de logement"}),s.jsx("li",{children:"Assurances et finances"})]})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-5",children:[s.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Phase Pre-Arrival"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Pour préparer votre arrivée en France et à l'ESIG."}),s.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[s.jsx("li",{children:"Guides d'orientation du campus"}),s.jsx("li",{children:"Transports locaux à Rouen"}),s.jsx("li",{children:"Conseils d'intégration"}),s.jsx("li",{children:"Démarches à l'arrivée"})]})]})]}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded-md",children:s.jsxs("p",{className:"text-gray-800 flex items-center",children:[s.jsx(ur,{className:"w-5 h-5 text-yellow-600 mr-2"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Astuce :"})," Concentrez-vous d'abord sur la phase qui correspond à votre situation actuelle, mais n'hésitez pas à consulter les autres phases pour anticiper les prochaines étapes."]})]})})]}),s.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"2. Ressources documentaires"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:"La bibliothèque de ressources contient tous les documents essentiels pour vos démarches. Vous pouvez facilement explorer, prévisualiser et télécharger ces ressources."}),s.jsxs("div",{className:"space-y-5 mb-6",children:[s.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[s.jsx("div",{className:"flex-shrink-0 mr-4",children:s.jsx(Zr,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Rechercher des ressources"}),s.jsx("p",{className:"text-gray-700",children:"Utilisez la barre de recherche pour trouver rapidement des documents en fonction de mots-clés. Vous pouvez également filtrer par catégorie ou par phase."})]})]}),s.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[s.jsx("div",{className:"flex-shrink-0 mr-4",children:s.jsx(Ke,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Prévisualiser les documents"}),s.jsx("p",{className:"text-gray-700",children:"Cliquez sur un document pour le prévisualiser directement dans l'interface sans avoir à le télécharger. Cela vous permet de vérifier rapidement si le document répond à vos besoins."})]})]}),s.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[s.jsx("div",{className:"flex-shrink-0 mr-4",children:s.jsx(Un,{className:"w-8 h-8 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Télécharger des ressources"}),s.jsx("p",{className:"text-gray-700",children:"Pour conserver un document ou l'imprimer, utilisez le bouton de téléchargement. Les documents sont disponibles dans divers formats (PDF, Word, Excel, etc.)."})]})]})]}),s.jsxs("div",{className:"bg-gray-100 p-4 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Types de ressources disponibles"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Formulaires administratifs"}),s.jsx("li",{children:"Guides pratiques"}),s.jsx("li",{children:"Check-lists par étape"}),s.jsx("li",{children:"Modèles de documents"})]}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[s.jsx("li",{children:"Cartes et plans"}),s.jsx("li",{children:"Calendriers académiques"}),s.jsx("li",{children:"Ressources d'apprentissage"}),s.jsx("li",{children:"Liens vers des sites officiels"})]})]})]})]}),s.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(lt,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"3. Foire aux questions (FAQ)"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:"La section FAQ répond aux questions les plus fréquentes. Si vous ne trouvez pas la réponse à votre question, vous pouvez soumettre votre propre question qui sera traitée par l'équipe."}),s.jsxs("div",{className:"space-y-6 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Comment utiliser la FAQ ?"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[s.jsx("li",{children:"Explorez les questions existantes filtrées par catégorie ou phase"}),s.jsx("li",{children:"Utilisez la barre de recherche pour trouver rapidement une information spécifique"}),s.jsx("li",{children:"Cliquez sur une question pour afficher sa réponse complète"}),s.jsx("li",{children:"Si vous ne trouvez pas l'information recherchée, posez votre propre question"})]})]}),s.jsxs("div",{className:"bg-green-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"Comment poser une question ?"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[s.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),s.jsx("li",{children:"Rédigez votre question de manière claire et précise"}),s.jsx("li",{children:"Sélectionnez la catégorie et la phase appropriées"}),s.jsx("li",{children:"Soumettez votre question"}),s.jsx("li",{children:"Vous recevrez une confirmation que votre question a bien été enregistrée"}),s.jsx("li",{children:`Une fois traitée par l'équipe, vous verrez la réponse dans la section "Mes questions"`})]}),s.jsx("p",{className:"mt-3 text-gray-700 italic",children:"Note : Votre identifiant et votre email sont automatiquement enregistrés avec votre question pour permettre le suivi."})]}),s.jsxs("div",{className:"bg-indigo-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-indigo-700 mb-3",children:"Suivi de vos questions"}),s.jsx("p",{className:"text-gray-700 mb-3",children:`Vous pouvez suivre l'état de vos questions dans l'onglet "Mes questions" de la section FAQ. Les questions y sont organisées en deux catégories :`}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Questions répondues"})," : Questions qui ont reçu une réponse de l'équipe"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Questions en attente"})," : Questions soumises mais pas encore traitées"]})]})]})]})]}),s.jsxs("div",{id:"profile",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(Ts,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"4. Gestion de votre profil"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Personnalisez votre profil pour une expérience adaptée à vos besoins. Vous pouvez modifier vos informations et gérer vos préférences à tout moment."}),s.jsxs("div",{className:"space-y-5 mb-6",children:[s.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Informations personnelles"}),s.jsx("p",{className:"text-gray-700",children:"Vous pouvez personnaliser votre nom d'utilisateur et ajouter une photo de profil pour mieux vous identifier sur la plateforme."})]}),s.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Sécurité du compte"}),s.jsx("p",{className:"text-gray-700",children:"Vérifiez votre adresse email pour sécuriser votre compte et activer toutes les fonctionnalités. Vous pouvez également modifier votre mot de passe depuis l'écran de profil."})]}),s.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Préférences de confidentialité"}),s.jsx("p",{className:"text-gray-700",children:"Gérez vos préférences concernant les cookies et l'utilisation de vos données via le panneau de préférences de confidentialité."})]})]}),s.jsxs("div",{className:"bg-yellow-50 p-5 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-yellow-700 mb-2",children:"Accéder à votre profil"}),s.jsx("p",{className:"text-gray-700",children:'Pour accéder à votre profil, cliquez sur votre nom ou votre avatar dans le coin supérieur droit de la page, puis sélectionnez "Profil" dans le menu déroulant.'})]})]}),s.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(rr,{className:"w-6 h-6 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"5. Conseils pratiques"})]}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Voici quelques conseils pour tirer le meilleur parti de la plateforme et faciliter votre parcours."}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour la préparation"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[s.jsx("li",{children:"Commencez par explorer la phase qui correspond à votre situation actuelle"}),s.jsx("li",{children:"Consultez les check-lists pour vous assurer de n'oublier aucune étape importante"}),s.jsx("li",{children:"Téléchargez et conservez les documents officiels dans un dossier dédié"}),s.jsx("li",{children:"Préparez vos questions à l'avance en notant vos incertitudes"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour les démarches"}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[s.jsx("li",{children:"Respectez scrupuleusement les délais indiqués pour chaque procédure"}),s.jsx("li",{children:"Conservez des copies numériques de tous vos documents importants"}),s.jsx("li",{children:"N'hésitez pas à poser des questions spécifiques via la FAQ"}),s.jsx("li",{children:"Consultez régulièrement la plateforme pour les mises à jour des informations"})]})]})]}),s.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Communauté et entraide"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous faites partie d'une communauté d'étudiants partageant le même parcours."}),s.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[s.jsx("li",{children:"Consultez les questions déjà posées par d'autres étudiants"}),s.jsx("li",{children:"Partagez votre expérience et vos conseils quand vous avez franchi une étape"}),s.jsx("li",{children:"Entrez en contact avec les étudiants des promotions précédentes pour des conseils personnalisés"}),s.jsx("li",{children:"N'hésitez pas à suggérer des améliorations ou de nouvelles ressources"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Prêt à démarrer votre parcours"}),s.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant de toutes les informations nécessaires pour utiliser efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),s.jsx("p",{className:"text-gray-700 mb-6",children:"Ce guide sera régulièrement mis à jour pour refléter les évolutions de la plateforme et les retours des utilisateurs."}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx(Be,{className:"w-5 h-5 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},kD=()=>{var u;const{currentUser:t}=Ce(),[e,r]=g.useState(null),[n,i]=g.useState(""),a=d=>{r(e===d?null:d)},l=[{id:"login",question:"Je n'arrive pas à me connecter à mon compte",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Plusieurs raisons peuvent expliquer un problème de connexion :"}),s.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[s.jsx("li",{children:"Vérifiez que votre adresse e-mail est correctement saisie"}),s.jsx("li",{children:"Assurez-vous que votre mot de passe est correct (attention aux majuscules/minuscules)"}),s.jsx("li",{children:`Si vous avez oublié votre mot de passe, utilisez l'option "Mot de passe oublié" sur la page de connexion`}),s.jsx("li",{children:"Vérifiez votre connexion internet"}),s.jsx("li",{children:"Si vous utilisez la connexion Google ou GitHub, assurez-vous d'être connecté à ces services"})]}),s.jsxs("p",{className:"mt-2",children:["Si le problème persiste, vous pouvez ",s.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline",children:"contacter l'équipe de support"}),"."]})]})},{id:"resources",question:"Comment accéder aux ressources documentaires ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Pour accéder aux ressources documentaires :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[s.jsx("li",{children:"Connectez-vous à votre compte"}),s.jsx("li",{children:'Cliquez sur "Ressources" dans le menu principal'}),s.jsx("li",{children:"Utilisez les filtres pour trouver des documents par phase (Post-CPS, During-Process, Pre-Arrival) ou par catégorie"}),s.jsx("li",{children:"Cliquez sur un document pour le prévisualiser"}),s.jsx("li",{children:"Utilisez le bouton de téléchargement pour sauvegarder le document sur votre appareil"})]}),s.jsx("p",{className:"mt-2",children:"Si vous ne trouvez pas une ressource spécifique, utilisez la barre de recherche en haut de la page Ressources."})]})},{id:"faq",question:"Comment poser une question dans la FAQ ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Pour poser une question dans la FAQ :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[s.jsx("li",{children:"Connectez-vous à votre compte"}),s.jsx("li",{children:"Accédez à la page FAQ via le menu principal"}),s.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),s.jsx("li",{children:"Rédigez votre question de manière claire et concise"}),s.jsx("li",{children:"Sélectionnez la catégorie et la phase appropriées"}),s.jsx("li",{children:"Soumettez votre question"})]}),s.jsx("p",{className:"mt-2",children:"Une fois soumise, votre question sera examinée par l'équipe d'administration qui y répondra dans les meilleurs délais. Vous recevrez une notification de confirmation immédiatement après la soumission."}),s.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Note : Votre identifiant (uid) et votre email sont automatiquement enregistrés avec votre question pour faciliter le suivi."})]})},{id:"phases",question:"Quelles sont les différentes phases du parcours ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Le parcours est divisé en trois phases principales :"}),s.jsxs("ul",{className:"space-y-3 mt-2",children:[s.jsxs("li",{className:"p-2 bg-blue-50 rounded-md",children:[s.jsx("span",{className:"font-semibold text-blue-800",children:"Phase Post-CPS :"}),s.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne les étapes juste après avoir reçu votre admission au CPS. Inclut les procédures d'inscription à l'ESIG, les documents à fournir, etc."})]}),s.jsxs("li",{className:"p-2 bg-indigo-50 rounded-md",children:[s.jsx("span",{className:"font-semibold text-indigo-800",children:"Phase During-Process :"}),s.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne toutes les démarches administratives : demande de visa, recherche de logement, assurances, préparation financière."})]}),s.jsxs("li",{className:"p-2 bg-purple-50 rounded-md",children:[s.jsx("span",{className:"font-semibold text-purple-800",children:"Phase Pre-Arrival :"}),s.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne la préparation à votre arrivée en France et à Rouen : orientation sur le campus, transports locaux, premiers jours en France."})]})]}),s.jsx("p",{className:"mt-3",children:"Chaque phase contient des ressources, des guides et des FAQ spécifiques pour vous accompagner."})]})},{id:"profile",question:"Comment modifier mon profil utilisateur ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"Pour modifier votre profil :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[s.jsx("li",{children:"Cliquez sur votre nom ou avatar dans le coin supérieur droit"}),s.jsx("li",{children:'Sélectionnez "Profil" dans le menu déroulant'}),s.jsx("li",{children:"Sur la page de profil, vous pouvez :"}),s.jsxs("ul",{className:"list-disc ml-8 mt-1 space-y-1",children:[s.jsx("li",{children:"Modifier votre nom d'affichage"}),s.jsx("li",{children:"Ajouter ou changer votre photo de profil"}),s.jsx("li",{children:"Vérifier votre adresse email"}),s.jsx("li",{children:"Modifier votre mot de passe"}),s.jsx("li",{children:"Gérer vos préférences de confidentialité"})]})]}),s.jsx("p",{className:"mt-2",children:`N'oubliez pas d'enregistrer vos modifications en cliquant sur le bouton "Enregistrer les modifications".`})]})},{id:"browser",question:"Quels navigateurs sont recommandés pour utiliser la plateforme ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"ESIG-prep-guide est optimisé pour fonctionner sur les navigateurs modernes. Nous recommandons :"}),s.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[s.jsx("li",{children:"Google Chrome (version 90+)"}),s.jsx("li",{children:"Mozilla Firefox (version 88+)"}),s.jsx("li",{children:"Microsoft Edge (version 90+)"}),s.jsx("li",{children:"Safari (version 14+)"})]}),s.jsx("p",{className:"mt-2",children:"Pour une expérience optimale, assurez-vous que votre navigateur est à jour. La plateforme est également responsive et s'adapte aux appareils mobiles et tablettes."}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Note : Si vous rencontrez des problèmes d'affichage, essayez de vider le cache de votre navigateur ou d'utiliser un autre navigateur."})]})},{id:"cookies",question:"Comment sont utilisés les cookies sur la plateforme ?",answer:s.jsxs("div",{children:[s.jsx("p",{className:"mb-2",children:"ESIG-prep-guide utilise des cookies pour améliorer votre expérience utilisateur :"}),s.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[s.jsxs("li",{children:[s.jsx("span",{className:"font-medium",children:"Cookies essentiels"})," : Nécessaires au fonctionnement de la plateforme (authentification, sécurité)"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-medium",children:"Cookies de préférences"})," : Mémorisent vos préférences pour améliorer votre navigation"]}),s.jsxs("li",{children:[s.jsx("span",{className:"font-medium",children:"Cookies d'analyse"})," : Nous aident à comprendre comment vous utilisez la plateforme pour l'améliorer"]})]}),s.jsx("p",{className:"mt-2",children:"Vous pouvez gérer vos préférences concernant les cookies via la bannière de consentement ou dans les paramètres de votre profil."}),s.jsxs("p",{className:"mt-2",children:["Pour plus d'informations, consultez notre ",s.jsx(Y,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline",children:"Politique de confidentialité"}),"."]})]})}].filter(d=>d.question.toLowerCase().includes(n.toLowerCase()));return s.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4 text-center",children:[s.jsx(ur,{className:"h-16 w-16 mx-auto mb-4"}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Centre d'aide"}),s.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Comment pouvons-nous vous aider aujourd'hui ?"}),s.jsx("div",{className:"max-w-xl mx-auto mt-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Rechercher dans l'aide...",className:"w-full px-4 py-3 rounded-full pl-12 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:d=>i(d.target.value)}),s.jsx(Zr,{className:"absolute left-4 top-3.5 h-5 w-5 text-gray-400"})]})}),t&&s.jsx("div",{className:"mt-4 text-blue-100",children:s.jsxs("p",{children:["Bonjour ",t.displayName||((u=t.email)==null?void 0:u.split("@")[0])||"utilisateur",", comment pouvons-nous vous aider aujourd'hui?"]})})]})}),s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[s.jsx(lt,{className:"h-12 w-12 text-blue-500 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"FAQ"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Trouvez rapidement des réponses aux questions fréquemment posées."}),s.jsx("a",{href:"#faq-section",className:"text-blue-600 hover:underline mt-auto",children:"Voir les questions fréquentes"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[s.jsx(rr,{className:"h-12 w-12 text-green-500 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tutoriels"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Consultez nos guides détaillés pour vous aider à utiliser la plateforme."}),s.jsx(Y,{to:"/tutorial",className:"text-blue-600 hover:underline mt-auto",children:"Accéder aux tutoriels"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[s.jsx(Br,{className:"h-12 w-12 text-purple-500 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nous contacter"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Besoin d'une assistance personnalisée ? Contactez notre équipe."}),s.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline mt-auto",children:"Voir les options de contact"})]})]}),s.jsxs("div",{id:"faq-section",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[s.jsx(lt,{className:"h-6 w-6 text-blue-500 mr-2"}),"Questions fréquemment posées"]}),s.jsx("div",{className:"divide-y divide-gray-200",children:l.length>0?l.map(d=>s.jsxs("div",{className:"py-4",children:[s.jsxs("button",{className:"flex justify-between items-center w-full text-left focus:outline-none",onClick:()=>a(d.id),children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.question}),e===d.id?s.jsx(Bo,{className:"h-5 w-5 text-blue-500"}):s.jsx(Ln,{className:"h-5 w-5 text-blue-500"})]}),e===d.id&&s.jsx("div",{className:"mt-3 text-gray-700 bg-gray-50 p-4 rounded-md",children:d.answer})]},d.id)):s.jsxs("div",{className:"py-4 text-center",children:[s.jsxs("p",{className:"text-gray-500",children:['Aucun résultat pour "',n,'"']}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Essayez une autre recherche ou consultez les questions ci-dessous"})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[s.jsx(ls,{className:"h-6 w-6 text-yellow-500 mr-2"}),"Guide de dépannage courant"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problèmes de chargement de page"}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Si une page ne se charge pas correctement ou affiche une erreur :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[s.jsx("li",{children:"Rafraîchissez la page (F5 ou CTRL+R)"}),s.jsx("li",{children:"Vérifiez votre connexion internet"}),s.jsx("li",{children:"Essayez de vider le cache de votre navigateur"}),s.jsx("li",{children:"Si le problème persiste, déconnectez-vous puis reconnectez-vous"})]})]}),s.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problèmes de téléchargement de documents"}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous ne parvenez pas à télécharger un document :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[s.jsx("li",{children:"Vérifiez que vous disposez de suffisamment d'espace sur votre appareil"}),s.jsx("li",{children:"Assurez-vous que votre navigateur n'a pas bloqué le téléchargement"}),s.jsx("li",{children:"Essayez d'utiliser un autre navigateur"}),s.jsx("li",{children:"Si vous utilisez un appareil mobile, essayez depuis un ordinateur"})]})]}),s.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Email de vérification non reçu"}),s.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous n'avez pas reçu l'email de vérification :"}),s.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[s.jsx("li",{children:"Vérifiez votre dossier de spam ou de courrier indésirable"}),s.jsx("li",{children:"Assurez-vous que l'adresse email saisie est correcte"}),s.jsx("li",{children:`Cliquez sur "Renvoyer l'email de vérification" dans votre profil`}),s.jsx("li",{children:"Si le problème persiste après plusieurs tentatives, contactez le support"})]})]})]})]}),s.jsxs("div",{id:"contact",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[s.jsx(Br,{className:"h-6 w-6 text-blue-500 mr-2"}),"Nous contacter"]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[s.jsx(Br,{className:"h-8 w-8 text-blue-500 mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Par email"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Pour toute question ou demande d'assistance, vous pouvez nous contacter par email. Nous répondons généralement dans un délai de 24 à 48 heures."}),s.jsxs("a",{href:"mailto:support@esig-prep-guide.com",className:"inline-flex items-center text-blue-600 hover:underline",children:["abdoul.diouf2@groupe-esigelec.org",s.jsx(Js,{className:"h-4 w-4 ml-1"})]})]}),s.jsxs("div",{className:"bg-purple-50 p-5 rounded-lg",children:[s.jsx(zx,{className:"h-8 w-8 text-purple-500 mb-3"}),s.jsx("h3",{className:"text-lg font-medium text-purple-800 mb-2",children:"Par téléphone"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"Pour une assistance immédiate, vous pouvez nous appeler pendant nos heures d'ouverture (Lundi au Vendredi, 13h - 14h / 17h - 20h GMT+0)."}),s.jsxs("a",{href:"tel:+33749051879",className:"inline-flex items-center text-purple-600 hover:underline",children:["+33 7 49 05 18 79",s.jsx(Js,{className:"h-4 w-4 ml-1"})]})]})]}),s.jsxs("div",{className:"mt-6 bg-gray-50 p-5 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"FAQ Interactive"}),s.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous pouvez également poser vos questions directement via notre système de FAQ. Vous recevrez une réponse personnalisée de notre équipe."}),s.jsxs(Y,{to:"/faq",className:"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Accéder à la FAQ",s.jsx(SD,{className:"h-4 w-4 ml-1"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[s.jsx(rr,{className:"h-6 w-6 text-green-500 mr-2"}),"Ressources additionnelles"]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[s.jsx("a",{href:"https://www.esigelec.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Site officiel ESIGELEC"}),s.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Consultez le site officiel de l'ESIGELEC pour des informations actualisées sur l'école."}),s.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter le site",s.jsx(Js,{className:"h-4 w-4 ml-1"})]})]})}),s.jsx("a",{href:"https://www.campusfrance.org/fr",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Campus France"}),s.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Informations sur les études en France et les procédures de visa pour les étudiants internationaux."}),s.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter Campus France",s.jsx(Js,{className:"h-4 w-4 ml-1"})]})]})}),s.jsx("a",{href:"https://france-visas.gouv.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"France-Visas"}),s.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Site officiel des visas pour la France avec informations détaillées sur les procédures."}),s.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter France-Visas",s.jsx(Js,{className:"h-4 w-4 ml-1"})]})]})})]})]})]})]})},SD=({className:t})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:s.jsx("polyline",{points:"9 18 15 12 9 6"})}),CD=()=>{const{currentUser:t}=Ce(),e=at(),[r,n]=g.useState([]),[i,a]=g.useState(""),[o,l]=g.useState(!1),u=g.useRef(null),d=g.useRef(null);g.useEffect(()=>{const S=[{id:"1",text:`Bonjour ${(t==null?void 0:t.displayName)||"cher utilisateur"} ! Je suis EsiBot, votre assistant personnel pour votre parcours vers l'ESIGELEC.`,sender:"bot",timestamp:new Date},{id:"2",text:"Je peux vous aider avec les réservations de voyage, la planification de votre déménagement, et répondre à vos questions sur l'école ou les démarches administratives.",sender:"bot",timestamp:new Date},{id:"3",text:"Comment puis-je vous aider aujourd'hui ?",sender:"bot",timestamp:new Date}];n(S)},[t]),g.useEffect(()=>{h()},[r]);const h=()=>{var S;(S=u.current)==null||S.scrollIntoView({behavior:"smooth"})},m=S=>new Promise(y=>{setTimeout(()=>{const w=S.toLowerCase();w.includes("billet")||w.includes("avion")||w.includes("vol")||w.includes("voyage")?y("Notre service de réservation de billets d'avion sera bientôt disponible ! Pour l'instant, je peux vous recommander des sites comme SkyScanner, Kayak ou les sites des compagnies aériennes directes comme Air France pour les trajets vers la France. Pour les étudiants, des réductions spéciales sont souvent disponibles."):w.includes("logement")||w.includes("appartement")||w.includes("loger")||w.includes("résidence")||w.includes("hotel")?y("Pour votre logement à Rouen, plusieurs options s'offrent à vous : les résidences étudiantes du CROUS, les résidences privées, ou la colocation. L'ESIGELEC dispose également d'un service d'aide au logement qui peut vous accompagner dans vos recherches. Souhaitez-vous des informations spécifiques sur l'une de ces options ?"):w.includes("planifier")||w.includes("planning")||w.includes("calendrier")||w.includes("organiser")||w.includes("plan")?y(`Pour planifier votre voyage, je vous recommande de suivre ces étapes :

1. Vérifiez les dates de rentrée et d'inscription à l'ESIGELEC
2. Réservez votre billet d'avion 2-3 mois à l'avance pour de meilleurs tarifs
3. Trouvez un logement temporaire pour les premiers jours si nécessaire
4. Préparez tous vos documents administratifs requis
5. Établissez un budget pour les premiers mois

Souhaitez-vous un guide plus détaillé pour l'une de ces étapes ?`):w.includes("document")||w.includes("papier")||w.includes("visa")||w.includes("passeport")||w.includes("administratif")?y(`Pour votre arrivée en France, vous aurez besoin des documents suivants :

• Passeport valide
• Visa étudiant ou titre de séjour
• Lettre d'admission de l'ESIGELEC
• Justificatif de ressources financières
• Acte de naissance avec traduction assermentée
• Attestation d'assurance
• Diplômes et relevés de notes

Je peux vous détailler la procédure pour chacun de ces documents si vous le souhaitez.`):w.includes("esigelec")||w.includes("école")||w.includes("formation")||w.includes("cours")||w.includes("étude")?y("L'ESIGELEC est une grande école d'ingénieurs située à Rouen, en Normandie. Elle propose un cursus d'ingénieur en 5 ans avec 15 dominantes différentes dans le domaine des technologies de l'information, de l'électronique, et des systèmes embarqués. L'école possède un campus moderne avec des laboratoires bien équipés et entretient de nombreux partenariats avec des entreprises. Avez-vous des questions sur un aspect particulier de l'école ?"):y("Je n'ai pas toutes les informations sur ce sujet précis pour le moment, mais je continue d'apprendre ! Pourriez-vous reformuler votre question ou choisir un autre sujet comme les voyages, le logement, ou les démarches administratives ? Vous pouvez également contacter directement le service international de l'ESIGELEC pour des informations plus précises.")},1500)}),x=async()=>{var y;if(i.trim()==="")return;const S={id:Date.now().toString(),text:i,sender:"user",timestamp:new Date};n(w=>[...w,S]),a(""),l(!0);try{const w=await m(i),_={id:(Date.now()+1).toString(),text:w,sender:"bot",timestamp:new Date};n(I=>[...I,_])}catch(w){console.error("Erreur lors de la génération de la réponse:",w);const _={id:(Date.now()+1).toString(),text:"Désolé, j'ai rencontré une erreur en traitant votre demande. Veuillez réessayer.",sender:"bot",timestamp:new Date};n(I=>[...I,_])}finally{l(!1),(y=d.current)==null||y.focus()}},j=S=>{S.key==="Enter"&&x()},A=()=>[{text:"Comment réserver un billet d'avion ?",icon:s.jsx(jl,{className:"w-4 h-4"})},{text:"Options de logement à Rouen",icon:s.jsx(Ku,{className:"w-4 h-4"})},{text:"Planning de préparation",icon:s.jsx(nr,{className:"w-4 h-4"})},{text:"Documents nécessaires",icon:s.jsx(Ke,{className:"w-4 h-4"})},{text:"À propos de l'ESIGELEC",icon:s.jsx(Ux,{className:"w-4 h-4"})}],D=S=>{a(S),setTimeout(()=>{x()},100)};return s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-800 to-blue-700 text-white py-4",children:s.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs("button",{onClick:()=>e(-1),className:"mr-4 text-blue-100 hover:text-white transition-colors flex items-center",children:[s.jsx(Be,{className:"w-5 h-5 mr-1"}),s.jsx("span",{children:"Retour"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(wl,{className:"w-6 h-6 mr-2 text-blue-200"}),s.jsx("h1",{className:"text-xl font-bold",children:"EsiBot - Assistant IA"}),s.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-0.5 rounded-full",children:"Prototype"})]})]}),s.jsxs("button",{onClick:()=>e("/help"),className:"text-blue-100 hover:text-white transition-colors flex items-center text-sm",children:[s.jsx(ur,{className:"w-4 h-4 mr-1"}),s.jsx("span",{children:"Aide"})]})]})}),s.jsxs("div",{className:"flex-1 flex flex-col max-w-3xl mx-auto w-full px-4 py-6",children:[s.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded-lg shadow-md p-4",children:s.jsxs("div",{className:"space-y-4",children:[r.map(S=>s.jsx("div",{className:`flex ${S.sender==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`flex items-start max-w-[80%] ${S.sender==="user"?"flex-row-reverse":""}`,children:[s.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center mr-2 ${S.sender==="user"?"bg-blue-100 ml-2 mr-0":"bg-blue-600"}`,children:S.sender==="user"?s.jsx(Ts,{className:"h-5 w-5 text-blue-600"}):s.jsx(wl,{className:"h-5 w-5 text-white"})}),s.jsxs("div",{className:`p-3 rounded-lg ${S.sender==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:[s.jsx("p",{className:"whitespace-pre-wrap",children:S.text}),s.jsx("div",{className:`text-xs mt-1 ${S.sender==="user"?"text-blue-200":"text-gray-500"}`,children:S.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},S.id)),o&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-[80%]",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),s.jsx("div",{ref:u})]})}),s.jsx("div",{className:"mb-4 overflow-x-auto",children:s.jsx("div",{className:"flex space-x-2 pb-2",children:A().map((S,y)=>s.jsxs("button",{onClick:()=>D(S.text),className:"flex items-center whitespace-nowrap px-3 py-1.5 bg-white border border-blue-200 rounded-full text-sm text-blue-800 hover:bg-blue-50 transition-colors shadow-sm",children:[S.icon,s.jsx("span",{className:"ml-1.5",children:S.text})]},y))})}),s.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("input",{ref:d,type:"text",value:i,onChange:S=>a(S.target.value),onKeyDown:j,placeholder:"Posez votre question...",className:"flex-1 px-4 py-3 focus:outline-none",disabled:o}),s.jsx("button",{onClick:x,disabled:i.trim()===""||o,className:`p-3 ${i.trim()===""||o?"text-gray-400 bg-gray-100":"text-white bg-blue-600 hover:bg-blue-700"} transition-colors`,children:s.jsx(Wd,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[s.jsx("p",{children:"Ce chatbot est un prototype à des fins de démonstration uniquement."}),s.jsx("p",{children:"Les réponses sont pré-programmées et ne représentent pas une véritable IA."})]})]})]})},AD=()=>{const[t,e]=g.useState(""),[r,n]=g.useState(""),[i,a]=g.useState(""),[o,l]=g.useState(!1),u=at(),d=async h=>{h.preventDefault(),a(""),n(""),l(!0);try{await mp(Pt,t),n("Un email de réinitialisation a été envoyé.")}catch{a("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{l(!1)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[s.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:s.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),s.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:s.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[r&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:r}),i&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:i}),s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),s.jsx("div",{className:"mt-4 text-center",children:s.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})},TD=()=>{const{currentUser:t}=Ce(),[e,r]=g.useState(""),[n,i]=g.useState((t==null?void 0:t.email)||""),[a,o]=g.useState(!1),[l,u]=g.useState(!1),[d,h]=g.useState(null),m=async x=>{x.preventDefault(),u(!0),h(null);try{await zt(ke(re,"feedback"),{message:e,email:n||null,userId:(t==null?void 0:t.uid)||null,createdAt:et.now()}),o(!0),r("")}catch{h("Erreur lors de l'envoi du feedback. Veuillez réessayer.")}finally{u(!1)}};return a?s.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:s.jsxs("div",{className:"max-w-xl mx-auto p-8 bg-green-50 border border-green-200 rounded-xl text-center shadow relative",children:[s.jsxs(Y,{to:"/",className:"absolute left-6 top-6 flex items-center text-blue-700 hover:text-blue-900 font-medium text-sm",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"})," Retour à l'accueil"]}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-green-800 mb-2 mt-6",children:"Merci pour votre retour !"}),s.jsx("p",{className:"text-green-700",children:"Votre avis a bien été transmis à l'équipe. Nous apprécions votre contribution !"}),s.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",onClick:()=>o(!1),children:"Envoyer un autre avis"})]})}):s.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:s.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-xl shadow-xl p-8 md:p-10 border border-blue-100 relative",children:[s.jsxs(Y,{to:"/",className:"absolute left-6 top-6 flex items-center text-blue-700 hover:text-blue-900 font-medium text-sm",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"})," Retour à l'accueil"]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-blue-900 mb-4 text-center mt-6",children:"Donnez votre avis"}),s.jsx("p",{className:"mb-8 text-gray-600 text-center",children:"N'hésitez pas à nous faire part de vos remarques, suggestions ou critiques constructives pour améliorer la plateforme."}),s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre message *"}),s.jsx("textarea",{id:"message",required:!0,rows:5,className:"w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Votre avis, suggestion ou critique...",value:e,onChange:x=>r(x.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (optionnel)"}),s.jsx("input",{id:"email",type:"email",className:"w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Laisser vide pour rester anonyme",value:n,onChange:x=>i(x.target.value)})]}),d&&s.jsx("div",{className:"text-red-600 text-sm text-center",children:d}),s.jsx("button",{type:"submit",disabled:l,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition disabled:opacity-60",children:l?"Envoi...":"Envoyer"})]})]})})},ID=()=>{const{currentUser:t}=Ce(),e=at(),r=[{title:"Gestion du contenu",description:"Éditer les sections du guide, modifier le contenu informatif",icon:s.jsx(rr,{className:"w-8 h-8 text-blue-500"}),link:"/editor/content"},{title:"Gestion des ressources",description:"Ajouter, modifier ou supprimer des ressources",icon:s.jsx(Ke,{className:"w-8 h-8 text-green-500"}),link:"/editor/resources"},{title:"Gestion de la FAQ",description:"Répondre aux questions et gérer les catégories de FAQ",icon:s.jsx(ur,{className:"w-8 h-8 text-yellow-500"}),link:"/editor/faq?mode=faq"},{title:"Modération du forum",description:"Gérer les catégories, épingler, verrouiller ou supprimer des discussions",icon:s.jsx(lt,{className:"w-8 h-8 text-purple-500"}),link:"/editor/forum"},{title:"Gestion des webinaires",description:"Créer, modifier et supprimer des webinaires",icon:s.jsx(Us,{className:"w-8 h-8 text-blue-600"}),link:"/editor/webinars"},{title:"Gestion de Dropbox",description:"Accéder et gérer les fichiers sur Dropbox",icon:s.jsx(wR,{className:"w-8 h-8 text-blue-400"}),link:"/editor/dropbox"}];return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tableau de bord Éditeur"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Bienvenue ",(t==null?void 0:t.displayName)||"Éditeur",", gérez le contenu et les ressources de la plateforme."]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((n,i)=>s.jsxs(Y,{to:n.link,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 flex flex-col",children:[s.jsx("div",{className:"mb-4",children:n.icon}),s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:n.title}),s.jsx("p",{className:"text-gray-600 flex-grow",children:n.description}),s.jsx("div",{className:"mt-4 text-blue-600 font-medium hover:text-blue-800",children:"Accéder →"})]},i))})]})},PD=()=>{const{currentUser:t,isAdmin:e,isEditor:r,isSuperAdmin:n}=Ce(),i=at(),[a,o]=g.useState(!1),[l,u]=g.useState("main");g.useEffect(()=>{(async()=>{if(t)try{const D=await n();o(D)}catch(D){console.error("Erreur lors de la vérification du statut superadmin:",D)}})()},[t,n]);const d={main:{title:"Fonctionnalités principales",icon:s.jsx(v2,{className:"w-6 h-6 text-yellow-500"}),features:[{icon:s.jsx(rr,{className:"w-8 h-8 text-blue-500"}),title:"Guide de préparation",description:"Accédez au guide de préparation et au contenu informatif",link:"/dashboard",roles:["admin","editor","user"]},{icon:s.jsx(Ke,{className:"w-8 h-8 text-green-500"}),title:"Bibliothèque de ressources",description:"Consultez les documents et ressources disponibles",link:"/resources",roles:["admin","editor","user"]},{icon:s.jsx(ur,{className:"w-8 h-8 text-yellow-500"}),title:"FAQ",description:"Consultez les questions fréquentes ou posez vos questions",link:"/faq",roles:["admin","editor","user"]},{icon:s.jsx(lt,{className:"w-8 h-8 text-purple-500"}),title:"Forum",description:"Participez aux discussions avec les autres étudiants",link:"/forum",roles:["admin","editor","user"]},{icon:s.jsx(Us,{className:"w-8 h-8 text-blue-500"}),title:"Webinaires",description:"Découvrez et inscrivez-vous aux webinaires à venir",link:"/webinars",roles:["admin","editor","user"]}]},admin:{title:"Administration",icon:s.jsx(qt,{className:"w-6 h-6 text-red-500"}),features:[{icon:s.jsx(Yu,{className:"w-8 h-8 text-gray-700"}),title:"Tableau de bord administrateur",description:"Accédez au panneau d'administration complet",link:"/admin",roles:["admin"]},{icon:s.jsx(rr,{className:"w-8 h-8 text-blue-600"}),title:"Gestion du contenu",description:"Éditer les sections du guide et le contenu informatif",link:"/admin/content",roles:["admin","editor"]},{icon:s.jsx(Ke,{className:"w-8 h-8 text-green-600"}),title:"Gestion des ressources",description:"Ajouter, modifier ou supprimer des ressources",link:"/admin/resources",roles:["admin","editor"]},{icon:s.jsx(ut,{className:"w-8 h-8 text-indigo-600"}),title:"Gestion des utilisateurs",description:"Gérer les comptes utilisateurs et les permissions",link:"/admin/users",roles:["admin"]},{icon:s.jsx(Fx,{className:"w-8 h-8 text-blue-700"}),title:"Gestion de Dropbox",description:"Accéder et gérer les fichiers sur Dropbox",link:"/admin/dropbox",roles:["admin","editor"]},{icon:s.jsx(nR,{className:"w-8 h-8 text-green-700"}),title:"Suivi des progressions",description:"Visualiser la progression des étudiants",link:"/admin/progressions",roles:["admin"]},{icon:s.jsx(u2,{className:"w-8 h-8 text-red-600"}),title:"Logs d'activité",description:"Consulter les journaux d'activité du système",link:"/admin/activity",roles:["admin"]},{icon:s.jsx(aR,{className:"w-8 h-8 text-yellow-600"}),title:"Gestion des feedbacks",description:"Consulter et gérer les retours utilisateurs",link:"/admin/feedbacks",roles:["admin","editor"]}]},editor:{title:"Édition",icon:s.jsx(rr,{className:"w-6 h-6 text-blue-500"}),features:[{icon:s.jsx(Yu,{className:"w-8 h-8 text-blue-600"}),title:"Tableau de bord éditeur",description:"Accédez au panneau d'édition de contenu",link:"/editor",roles:["editor"]},{icon:s.jsx(ur,{className:"w-8 h-8 text-yellow-600"}),title:"Gestion de la FAQ",description:"Répondre aux questions et gérer les catégories de FAQ",link:"/editor/faq?mode=faq",roles:["editor"]},{icon:s.jsx(lt,{className:"w-8 h-8 text-purple-600"}),title:"Modération du forum",description:"Modérer les discussions et gérer les catégories",link:"/editor/forum",roles:["editor"]}]},travel:{title:"Voyage et Installation",icon:s.jsx(jl,{className:"w-6 h-6 text-blue-600"}),features:[{icon:s.jsx(jl,{className:"w-8 h-8 text-blue-600"}),title:"Achat de billets d'avion",description:"Système de recherche et d'achat de billets à tarifs préférentiels",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:s.jsx(_R,{className:"w-8 h-8 text-indigo-600"}),title:"Réservations de logement",description:"Service de réservation de logements à Rouen",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:s.jsx(Ip,{className:"w-8 h-8 text-green-600"}),title:"Planificateur de voyage",description:"Outil de planification avec alertes et check-lists",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:s.jsx(Ux,{className:"w-8 h-8 text-yellow-600"}),title:"Itinéraires personnalisés",description:"Création d'itinéraires depuis le pays d'origine jusqu'à l'ESIGELEC",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]},tools:{title:"Outils et Services",icon:s.jsx(lR,{className:"w-6 h-6 text-indigo-600"}),features:[{icon:s.jsx(wl,{className:"w-8 h-8 text-indigo-500"}),title:"Assistant IA",description:"Posez vos questions à notre assistant intelligent",link:"/chat-ai",roles:["admin"],disabled:!a},{icon:s.jsx(Un,{className:"w-8 h-8 text-green-600"}),title:"Téléchargements",description:"Téléchargez des documents et outils utiles",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:s.jsx(Ox,{className:"w-8 h-8 text-blue-500"}),title:"Traduction multilingue",description:"Service de traduction pour les documents importants",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:s.jsx(zx,{className:"w-8 h-8 text-red-600"}),title:"Assistance mobile",description:"Application mobile d'assistance et de suivi",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]},advanced:{title:"Fonctionnalités avancées",icon:s.jsx(qR,{className:"w-6 h-6 text-yellow-600"}),features:[{icon:s.jsx(Us,{className:"w-8 h-8 text-red-500"}),title:"Webinaires",description:"Participez à des webinaires et sessions d'information",link:"/webinars",roles:["admin","editor","user"]},{icon:s.jsx($x,{className:"w-8 h-8 text-purple-600"}),title:"API et intégrations",description:"Intégrez nos services à vos applications",link:"#",roles:["admin"],disabled:!0,comingSoon:!0},{icon:s.jsx(pR,{className:"w-8 h-8 text-purple-600"}),title:"Paiements sécurisés",description:"Système de paiement sécurisé multi-devises",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]}},m=e()?"admin":r()?"editor":"user",x=Object.entries(d).reduce((A,[D,S])=>{const y=S.features.filter(w=>w.roles.includes(m));return y.length>0&&(A[D]={...S,features:y}),A},{}),j=Object.keys(x);return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center mb-4",children:s.jsxs("button",{onClick:()=>i("/dashboard"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mr-4",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Centre d'applications"}),s.jsxs("p",{className:"text-gray-600 mt-2",children:["Bienvenue ",(t==null?void 0:t.displayName)||"Utilisateur",", accédez à toutes les fonctionnalités disponibles pour votre compte."]})]}),s.jsx("div",{className:"mb-8 flex flex-wrap gap-2",children:j.map(A=>s.jsxs("button",{onClick:()=>u(A),className:`px-4 py-2 rounded-full flex items-center ${l===A?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[s.jsx("span",{className:"mr-2",children:x[A].icon}),x[A].title]},A))}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[x[l].icon,s.jsx("span",{className:"ml-2",children:x[l].title})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x[l].features.map((A,D)=>s.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 flex flex-col ${A.disabled?"opacity-70 cursor-not-allowed":"hover:shadow-lg transition-shadow cursor-pointer"}`,children:[s.jsx("div",{className:"mb-4",children:A.icon}),s.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2 flex items-center",children:[A.title,A.comingSoon&&s.jsx("span",{className:"ml-2 bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded",children:"Bientôt disponible"})]}),s.jsx("p",{className:"text-gray-600 flex-grow",children:A.description}),s.jsx("div",{className:"mt-4",children:A.disabled?s.jsx("span",{className:"text-gray-500 font-medium",children:A.comingSoon?"En développement":"Non disponible"}):s.jsx(Y,{to:A.link,className:"text-blue-600 font-medium hover:text-blue-800",children:"Accéder →"})})]},D))})]}),Object.keys(x).some(A=>x[A].features.some(D=>D.comingSoon))&&s.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[s.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-3 flex items-center",children:[s.jsx(cr,{className:"w-5 h-5 mr-2"}),"Nouvelles fonctionnalités en développement"]}),s.jsx("p",{className:"text-blue-700",children:'Nous travaillons continuellement à améliorer la plateforme. Les fonctionnalités marquées "Bientôt disponible" seront déployées progressivement au cours des prochains mois.'})]})]})},lm=({webinar:t})=>{const e=u=>{switch(u.toLowerCase()){case"workshop":return s.jsx(Us,{className:"h-5 w-5 text-blue-500"});case"coaching":return s.jsx(vi,{className:"h-5 w-5 text-purple-500"});case"info":return s.jsx(y2,{className:"h-5 w-5 text-green-500"});case"campus-france":return s.jsx(qx,{className:"h-5 w-5 text-red-500"});case"academique":return s.jsx(MR,{className:"h-5 w-5 text-yellow-500"});case"installation":return s.jsx(m2,{className:"h-5 w-5 text-indigo-500"});default:return s.jsx(ws,{className:"h-5 w-5 text-gray-500"})}},r=u=>({workshop:"Atelier",coaching:"Coaching",info:"Information","campus-france":"Campus France",academique:"Académique",installation:"Installation"})[u.toLowerCase()]||u,n={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"},i={beginner:"Débutant",intermediate:"Intermédiaire",advanced:"Avancé"},a=u=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(u),o=t.currentParticipants>=t.maxParticipants,l=t.isCompleted||o;return s.jsxs("div",{className:`flex flex-col rounded-xl shadow-sm overflow-hidden h-full transition-all duration-200 hover:shadow-md ${l?"opacity-75":"hover:-translate-y-1"}`,children:[s.jsxs("div",{className:"relative",children:[t.imageUrl?s.jsx("img",{src:t.imageUrl,alt:t.title,className:"h-48 w-full object-cover"}):s.jsx("div",{className:"h-48 w-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:s.jsx(Us,{className:"h-16 w-16 text-white opacity-20"})}),t.isLive&&s.jsx("div",{className:"absolute top-3 right-3",children:s.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full bg-red-600 text-white text-sm font-medium",children:[s.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"En direct"]})}),s.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex flex-wrap gap-2",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[t.level]||"bg-gray-100 text-gray-800"}`,children:i[t.level]||t.level}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e(t.category),s.jsx("span",{className:"ml-1",children:r(t.category)})]})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col p-6 bg-white",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[s.jsx(nr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsx("time",{dateTime:t.date.toISOString(),children:a(t.date)})]}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 line-clamp-2",children:t.title}),s.jsx("p",{className:"mt-2 text-gray-600 line-clamp-3",children:t.description}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(cr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsxs("span",{children:[t.duration," minutes"]})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(ut,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsxs("span",{children:[t.currentParticipants," / ",t.maxParticipants," participants",o&&" (Complet)"]})]}),s.jsxs("div",{className:"flex items-start text-sm text-gray-500",children:[s.jsx(Ts,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:t.speaker.name}),s.jsx("p",{className:"text-gray-500",children:t.speaker.title})]})]})]}),t.tags.length>0&&s.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map((u,d)=>s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:u},d))})]}),s.jsxs("div",{className:"mt-6",children:[t.isCompleted?s.jsxs("div",{className:"text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-100",children:[s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(ws,{className:"h-5 w-5 text-green-500 mr-2"}),"Session terminée"]}),t.meetingLink&&s.jsxs("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:["Voir l'enregistrement ",s.jsx(Qu,{className:"ml-1 h-4 w-4"})]})]}):o?s.jsx("div",{className:"text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-100",children:s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(xs,{className:"h-5 w-5 text-red-500 mr-2"}),"Complet"]})}):t.isLive?s.jsxs("a",{href:t.meetingLink||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"Rejoindre maintenant"]}):s.jsx(Y,{to:`/webinars/${t.id}`,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"S'inscrire maintenant"}),!t.isCompleted&&!o&&t.isUpcoming&&!t.isLive&&s.jsxs("div",{className:"mt-2 text-center text-xs text-gray-500",children:[s.jsx(cr,{className:"inline-block h-3 w-3 mr-1"}),(()=>{const u=new Date,h=new Date(t.date).getTime()-u.getTime(),m=Math.ceil(h/(1e3*60*60*24));return m<=0?"Inscriptions closes":m===1?"Clôture des inscriptions aujourd'hui":m===2?"Clôture des inscriptions demain":`Clôture des inscriptions dans ${m} jours`})()]})]})]})]})},RD=()=>{const{currentUser:t}=Ce(),e=at(),[r,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState(""),[u,d]=g.useState(""),[h,m]=g.useState("all"),[x,j]=g.useState("all"),[A,D]=g.useState(!1),[S,y]=g.useState(!1),[w,_]=g.useState(!1),[I,M]=g.useState(!1),[q,N]=g.useState([]),[f,v]=g.useState([]),[E,C]=g.useState(!1),[P,k]=g.useState(!1),te=g.useCallback(async()=>{if(t){C(!0);try{const R=St(ke(re,"webinarFavorites"),lr("userId","==",t.uid)),U=await Xe(R),W=[];U.forEach(ne=>{const pe=ne.data();pe.webinarId&&W.push(pe.webinarId)}),N(W)}catch(R){console.error("Erreur lors de la récupération des favoris:",R)}finally{C(!1)}}},[t]),ce=g.useCallback(async()=>{if(t){k(!0);try{const R=St(ke(re,"webinarRegistrations"),lr("userId","==",t.uid)),U=await Xe(R),W=[];U.forEach(ne=>{const pe=ne.data();pe.webinarId&&W.push(pe.webinarId)}),v(W)}catch(R){console.error("Erreur lors de la récupération des inscriptions:",R)}finally{k(!1)}}},[t]);g.useEffect(()=>{de()},[]),g.useEffect(()=>{t?(te(),ce()):(N([]),v([]))},[t,te,ce]);const de=async()=>{a(!0),l("");try{const R=ke(re,"webinars"),U=St(R,Qn("date","asc")),W=await Xe(U),ne=[];W.forEach(pe=>{var ae;const Z=pe.data(),J={id:pe.id,title:Z.title,description:Z.description,date:((ae=Z.date)==null?void 0:ae.toDate())||new Date,duration:Z.duration,maxParticipants:Z.maxParticipants,currentParticipants:Z.currentParticipants,category:Z.category,customCategory:Z.customCategory,level:Z.level,imageUrl:Z.imageUrl,speaker:Z.speaker,meetingLink:Z.meetingLink,isLive:Z.isLive,isUpcoming:Z.isUpcoming,isCompleted:Z.isCompleted,tags:Z.tags||[],createdBy:Z.createdBy,createdAt:Z.createdAt,updatedAt:Z.updatedAt};ne.push(J)}),n(ne),a(!1)}catch(R){console.error("Erreur lors de la récupération des webinaires:",R),l("Erreur lors de la récupération des webinaires. Veuillez réessayer ultérieurement."),a(!1)}},O=r.filter(R=>{const U=R.title.toLowerCase().includes(u.toLowerCase())||R.description.toLowerCase().includes(u.toLowerCase())||R.tags.some(ae=>ae.toLowerCase().includes(u.toLowerCase())),W=h==="all"||R.category===h,ne=x==="all"||R.level===x,pe=A||R.isUpcoming||R.isLive,Z=w?q.includes(R.id):!0,J=I?f.includes(R.id):!0;return U&&W&&ne&&pe&&Z&&J}),V=O.filter(R=>R.isUpcoming),H=O.filter(R=>R.isLive),F=A?O.filter(R=>R.isCompleted):[];return s.jsx("div",{className:"bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Webinaires & événements"}),s.jsx("p",{className:"max-w-2xl mx-auto text-xl text-gray-500",children:"Restez informé et participez aux événements organisés pour la communauté ESIG."}),t&&s.jsxs("div",{className:"mt-6 flex flex-wrap gap-3 justify-center",children:[s.jsxs("button",{onClick:()=>e("/proposer-atelier"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx(as,{className:"-ml-1 mr-2 h-4 w-4"}),"Proposer un atelier"]}),s.jsxs("button",{onClick:()=>e("/mes-propositions"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(lt,{className:"-ml-1 mr-2 h-4 w-4"}),"Mes propositions"]})]})]}),o&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(xs,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:o})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Zr,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:u,onChange:R=>d(R.target.value),placeholder:"Rechercher un événement...",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-3 py-2 sm:text-sm border-gray-300 rounded-md"}),u&&s.jsx("button",{onClick:()=>d(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx(xs,{className:"h-5 w-5 text-gray-400 hover:text-gray-500"})})]}),s.jsxs("button",{onClick:()=>y(!S),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(Pp,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400"}),"Filtres ",S?"▲":"▼"]}),t&&s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mt-4",children:[s.jsxs("button",{onClick:()=>{_(!0),M(!1)},className:`inline-flex items-center px-4 py-2 border ${w?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700"} rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:[s.jsx(h2,{className:`-ml-1 mr-2 h-5 w-5 ${w?"text-blue-500 fill-current":"text-gray-400"}`}),"Favoris ",E&&s.jsx("span",{className:"ml-2 animate-pulse",children:"..."})]}),s.jsxs("button",{onClick:()=>{M(!0),_(!1)},className:`inline-flex items-center px-4 py-2 border ${I?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700"} rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`,children:[s.jsx(vi,{className:`-ml-1 mr-2 h-5 w-5 ${I?"text-green-500":"text-gray-400"}`}),"Mes inscriptions ",P&&s.jsx("span",{className:"ml-2 animate-pulse",children:"..."})]}),(w||I)&&s.jsxs("button",{onClick:()=>{_(!1),M(!1)},className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-gray-700 rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[s.jsx(xs,{className:"ml-1 mr-2 h-5 w-5 text-gray-400"}),"Tous les webinaires"]})]})]}),S&&s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'événement"}),s.jsxs("select",{id:"category",value:h,onChange:R=>m(R.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Tous les types"}),s.jsx("option",{value:"workshop",children:"Ateliers"}),s.jsx("option",{value:"coaching",children:"Coaching"}),s.jsx("option",{value:"info",children:"Information"}),s.jsx("option",{value:"campus-france",children:"Campus France"}),s.jsx("option",{value:"academique",children:"Académique"}),s.jsx("option",{value:"installation",children:"Installation"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),s.jsxs("select",{id:"level",value:x,onChange:R=>j(R.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Tous les niveaux"}),s.jsx("option",{value:"beginner",children:"Débutant"}),s.jsx("option",{value:"intermediate",children:"Intermédiaire"}),s.jsx("option",{value:"advanced",children:"Avancé"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"showPastEvents",type:"checkbox",checked:A,onChange:()=>D(!A),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"showPastEvents",className:"ml-2 block text-sm text-gray-700",children:"Afficher les événements passés"})]})]})})]}),H.length>0&&s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-red-500 rounded-full"}),s.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"En direct maintenant"}),s.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[H.length," en cours"]})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:H.map(R=>s.jsx(lm,{webinar:R},R.id))})]}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-blue-500 rounded-full"}),s.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"Prochains événements"}),s.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[V.length," à venir"]})]}),i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):V.length>0?s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:V.map(R=>s.jsx(lm,{webinar:R},R.id))}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[s.jsx(Ip,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucun événement à venir"}),s.jsx("p",{className:"mt-1 text-gray-500",children:"Revenez plus tard pour découvrir nos prochains webinaires."}),t&&(t.isAdmin||t.isEditor)&&!w&&s.jsx("div",{className:"mt-6",children:s.jsxs(Y,{to:"/admin/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow px-5 py-3 inline-flex items-center text-base font-medium text-blue-600 hover:bg-blue-50",children:[s.jsx(as,{className:"-ml-1 mr-2 h-4 w-4"}),"Créer un événement"]})})]})]}),A&&s.jsx("div",{children:i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-500"})}):F.length>0?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-gray-300 rounded-full"}),s.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"Événements passés"}),s.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:[F.length," événements"]})]}),s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:F.map(R=>s.jsx(lm,{webinar:R},R.id))})]}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[s.jsx(Ip,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucun événement passé"}),s.jsx("p",{className:"mt-1 text-gray-500",children:"Les événements passés apparaîtront ici."})]})}),s.jsxs("div",{className:"mt-16 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2 lg:gap-4",children:[s.jsx("div",{className:"pt-10 pb-12 px-6 sm:pt-16 sm:px-16 lg:py-16 lg:pr-0 xl:py-20 xl:px-20",children:s.jsxs("div",{className:"lg:self-center",children:[s.jsx("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:s.jsx("span",{className:"block",children:"Vous proposez un atelier ?"})}),s.jsx("p",{className:"mt-4 text-lg leading-6 text-blue-100",children:"Rejoignez notre équipe d'intervenants et partagez votre expertise avec notre communauté étudiante."}),s.jsxs(Y,{to:"/proposer-un-atelier",className:"mt-8 bg-white border border-transparent rounded-md shadow px-5 py-3 inline-flex items-center text-base font-medium text-blue-600 hover:bg-blue-50",children:["Proposer un atelier ",s.jsx(Qu,{className:"ml-3 -mr-1 h-5 w-5"})]})]})}),s.jsx("div",{className:"-mt-6 aspect-w-5 aspect-h-3 md:aspect-w-2 md:aspect-h-1",children:s.jsx("img",{className:"transform translate-x-6 translate-y-6 rounded-md object-cover object-left-top sm:translate-x-16 lg:translate-y-20",src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:"Étudiants en atelier"})})]})]})})},DD=({webinar:t,onClose:e})=>{const{currentUser:r}=Ce(),[n,i]=g.useState(!1),[a,o]=g.useState(!1),[l,u]=g.useState(null),[d,h]=g.useState({name:(r==null?void 0:r.displayName)||"",email:(r==null?void 0:r.email)||"",phone:"",question:"",receiveUpdates:!0}),m=A=>{const{name:D,value:S,type:y}=A.target,w=y==="checkbox"?A.target.checked:void 0;h(_=>({..._,[D]:y==="checkbox"?w:S}))},x=async A=>{if(A.preventDefault(),u(null),!d.name.trim()||!d.email.trim()){u("Veuillez remplir tous les champs obligatoires.");return}if(!/\S+@\S+\.\S+/.test(d.email)){u("Veuillez entrer une adresse email valide.");return}if(!r){u("Vous devez être connecté pour vous inscrire à un webinaire.");return}i(!0);try{const D=be(re,"webinars",t.id),S=await xt(D);if(!S.exists())throw new Error("Ce webinaire n'existe plus.");const y=S.data();if(y.currentParticipants>=y.maxParticipants)throw new Error("Désolé, ce webinaire est complet.");const w={webinarId:t.id,webinarTitle:t.title,userId:r.uid,userName:d.name,userEmail:d.email,userPhone:d.phone,question:d.question,receiveUpdates:d.receiveUpdates,status:"confirmed",registeredAt:is(),webinarDate:t.date},_=await zt(ke(re,"webinarRegistrations"),w);if(await ts(D,{currentParticipants:F1(1),updatedAt:is()}),r.uid)try{const I=be(re,"users",r.uid),M=await xt(I);M.exists()&&await ts(I,{webinarRegistrations:[...M.data().webinarRegistrations||[],_.id],updatedAt:is()})}catch(I){console.error("Erreur lors de la mise à jour du profil utilisateur:",I)}o(!0),setTimeout(()=>{e()},3e3)}catch(D){console.error("Erreur lors de l'inscription:",D),D instanceof Error?u(D.message):u(typeof D=="string"?D:"Une erreur est survenue lors de votre inscription. Veuillez réessayer.")}finally{i(!1)}},j=A=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A);return a?s.jsx("div",{className:"rounded-lg bg-green-50 p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ws,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Inscription confirmée !"}),s.jsx("div",{className:"mt-2 text-sm text-green-700",children:s.jsx("p",{children:"Votre inscription au webinaire a bien été enregistrée. Vous recevrez bientôt un email de confirmation avec les détails de connexion."})}),t.meetingLink&&s.jsx("div",{className:"mt-4",children:s.jsx("div",{className:"-mx-2 -my-1.5 flex",children:s.jsx("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"rounded-md bg-green-50 px-2 py-1.5 text-sm font-medium text-green-800 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50",children:"Accéder au webinaire"})})})]})]})}):s.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:s.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"S'inscrire au webinaire"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Complétez le formulaire ci-dessous pour vous inscrire à ce webinaire."})]}),s.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:s.jsx(Ct,{className:"h-5 w-5"})})]}),s.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-800",children:t.title}),s.jsxs("div",{className:"mt-2 space-y-2 text-sm text-blue-700",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx(nr,{className:"flex-shrink-0 h-5 w-5 mr-2"}),s.jsx("span",{children:j(t.date)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(cr,{className:"flex-shrink-0 h-5 w-5 mr-2"}),s.jsxs("span",{children:[t.duration," minutes"]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(ut,{className:"flex-shrink-0 h-5 w-5 mr-2"}),s.jsxs("span",{children:[t.currentParticipants+1," / ",t.maxParticipants," participants (dont vous)"]})]})]})]}),l&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(d2,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),s.jsx("div",{className:"ml-3",children:s.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})]})}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Vos informations"}),s.jsxs("div",{className:"grid grid-cols-1 gap-y-4 gap-x-4 sm:grid-cols-6",children:[s.jsxs("div",{className:"sm:col-span-3",children:[s.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Nom complet ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Ts,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",name:"name",id:"name",value:d.name,onChange:m,className:"block w-full pl-10 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]}),s.jsxs("div",{className:"sm:col-span-3",children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"email",name:"email",id:"email",value:d.email,onChange:m,className:"block w-full pl-10 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]}),s.jsxs("div",{className:"sm:col-span-3",children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Téléphone"}),s.jsx("div",{className:"mt-1",children:s.jsx("input",{type:"tel",name:"phone",id:"phone",value:d.phone,onChange:m,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Avez-vous des questions pour l'intervenant ?"}),s.jsx("div",{className:"mt-1",children:s.jsx("textarea",{id:"question",name:"question",rows:3,value:d.question,onChange:m,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Posez ici vos questions à l'avance..."})})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"receiveUpdates",name:"receiveUpdates",type:"checkbox",checked:d.receiveUpdates,onChange:m,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),s.jsxs("div",{className:"ml-3 text-sm",children:[s.jsx("label",{htmlFor:"receiveUpdates",className:"font-medium text-gray-700",children:"Recevoir les mises à jour concernant ce webinaire"}),s.jsx("p",{className:"text-gray-500",children:"Vous recevrez des rappels et des informations complémentaires par email."})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:n,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${n?"opacity-75 cursor-not-allowed":""}`,children:n?s.jsxs(s.Fragment,{children:[s.jsx(AR,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Traitement..."]}):"Confirmer l'inscription"})]})})]})]})})]})})},LD=()=>{const{id:t}=xd(),{currentUser:e}=Ce(),r=at(),[n,i]=g.useState(null),[a,o]=g.useState(!0),[l,u]=g.useState(null),[d,h]=g.useState(!1),[m,x]=g.useState(!1),[j,A]=g.useState(!1),[D,S]=g.useState(!1),y=g.useCallback(async f=>{if(e)try{const v=St(ke(re,"webinarRegistrations"),lr("userId","==",e.uid),lr("webinarId","==",f)),E=await Xe(v);x(!E.empty)}catch(v){console.error("Erreur lors de la vérification de l'inscription:",v),x(!1)}},[e]),w=g.useCallback(async f=>{if(e)try{const v=be(re,"webinarFavorites",`${e.uid}_${f}`),E=await xt(v);A(E.exists())}catch(v){console.error("Erreur lors de la vérification des favoris:",v)}},[e]);g.useEffect(()=>{(async()=>{var E;if(t)try{o(!0);const C=be(re,"webinars",t),P=await xt(C);if(P.exists()){const k=P.data(),te={id:P.id,title:k.title,description:k.description,date:((E=k.date)==null?void 0:E.toDate())||new Date,duration:k.duration,maxParticipants:k.maxParticipants,currentParticipants:k.currentParticipants,category:k.category,level:k.level,imageUrl:k.imageUrl,speaker:k.speaker,meetingLink:k.meetingLink,isLive:k.isLive,isUpcoming:k.isUpcoming,isCompleted:k.isCompleted,tags:k.tags||[],createdBy:k.createdBy,createdAt:k.createdAt,updatedAt:k.updatedAt};i(te);const ce=new Date,de=te.date,O=typeof te.duration=="string"?parseInt(te.duration)||60:te.duration||60,V=new Date(de);V.setMinutes(V.getMinutes()+O);const H=ce>=de&&ce<=V,F=ce.getFullYear()===de.getFullYear()&&ce.getMonth()===de.getMonth()&&ce.getDate()===de.getDate();S(F&&H),e&&(y(P.id),w(P.id)),u(null)}else u("Ce webinaire n'existe pas ou a été supprimé.")}catch(C){console.error("Erreur lors du chargement du webinaire:",C),u("Impossible de charger les détails du webinaire. Veuillez réessayer plus tard.")}finally{o(!1)}})();const v=setInterval(()=>{if(n){const E=new Date,C=n.date,P=E.getFullYear()===C.getFullYear()&&E.getMonth()===C.getMonth()&&E.getDate()===C.getDate(),k=new Date(C),te=typeof n.duration=="string"?parseInt(n.duration)||60:n.duration||60;k.setMinutes(k.getMinutes()+te);const ce=E>=C&&E<=k;S(P&&ce)}},6e4);return()=>clearInterval(v)},[t,e,n,w,y]);const _=()=>{if(!e){r("/login",{state:{from:`/webinars/${t}`}});return}h(!0)},I=async()=>{if(!e){r("/login",{state:{from:`/webinars/${t}`}});return}if(n)try{const f=`${e.uid}_${n.id}`,v=be(re,"webinarFavorites",f);j?await Dn(v):await ps(v,{userId:e.uid,webinarId:n.id,webinarTitle:n.title,addedAt:new Date}),A(!j)}catch(f){console.error("Erreur lors de la modification des favoris:",f),alert("Une erreur est survenue. Veuillez réessayer.")}},M=()=>{navigator.share?navigator.share({title:(n==null?void 0:n.title)||"Webinaire",text:`Découvrez ce webinaire: ${n==null?void 0:n.title}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Lien copié dans le presse-papiers !")})},q=()=>{if(!n)return;const f=n.date,v=new Date(f);v.setMinutes(v.getMinutes()+n.duration);const E=ce=>ce.toISOString().replace(/[:-]/g,"").replace(/\.\d+/,""),C=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",`DTSTART:${E(f)}`,`DTEND:${E(v)}`,`SUMMARY:${n.title}`,`DESCRIPTION:${n.description.replace(/\n/g,"\\n")}`,`LOCATION:${n.meetingLink||"En ligne"}`,"END:VEVENT","END:VCALENDAR"].join(`
`),P=new Blob([C],{type:"text/calendar;charset=utf-8"}),k=URL.createObjectURL(P),te=document.createElement("a");te.href=k,te.download=`webinaire-${n.id}.ics`,document.body.appendChild(te),te.click(),document.body.removeChild(te)},N=f=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(f);return s.jsx("div",{className:"bg-gray-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-5xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:s.jsxs(Y,{to:"/webinars",className:"inline-flex items-center text-blue-600 hover:text-blue-800",children:[s.jsx(Be,{className:"h-4 w-4 mr-1"})," Retour aux webinaires"]})}),a?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?s.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(xs,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:l})]}),s.jsx("div",{className:"mt-4",children:s.jsx(Y,{to:"/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Retour à la liste des webinaires"})})]}):n?s.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.title}),s.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx(nr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsx("time",{dateTime:n.date.toISOString(),children:N(n.date)})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx(cr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsxs("span",{children:[n.duration," minutes"]})]}),s.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[s.jsx(ut,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),s.jsxs("span",{children:[n.currentParticipants," / ",n.maxParticipants," participants"]})]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:I,className:`p-2 rounded-full ${j?"text-yellow-500 hover:text-yellow-600":"text-gray-400 hover:text-gray-500"} hover:bg-gray-100`,title:j?"Retirer des favoris":"Ajouter aux favoris",children:s.jsx(h2,{className:`h-5 w-5 ${j?"fill-current":""}`})}),s.jsx("button",{onClick:M,className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-full",title:"Partager",children:s.jsx(LR,{className:"h-5 w-5"})})]})]}),s.jsxs("div",{className:"relative h-64 bg-gray-200 overflow-hidden",children:[n.imageUrl?s.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:s.jsx(Us,{className:"h-16 w-16 text-white opacity-20"})}),(n.isLive||D)&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full bg-red-600 text-white text-sm font-medium",children:[s.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[s.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),s.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"En direct"]})})]}),s.jsxs("div",{className:"px-4 py-6 sm:px-8",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("img",{src:n.speaker.avatar,alt:n.speaker.name,className:"h-12 w-12 rounded-full object-cover mr-4 border"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900",children:n.speaker.name}),s.jsx("div",{className:"text-sm text-gray-500",children:n.speaker.title})]})]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map(f=>s.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 rounded-full px-3 py-1 text-xs font-semibold",children:["#",f]},f))}),s.jsx("div",{className:"prose max-w-none mb-6",children:n.description.split(`
`).map((f,v)=>s.jsx("p",{children:f},v))}),s.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[n.isLive||D?m?s.jsxs("a",{href:n.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700 transition",children:[s.jsx(Js,{className:"h-4 w-4 mr-2"})," Rejoindre le direct"]}):n.currentParticipants>=n.maxParticipants?s.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-red-300 rounded-md shadow-sm text-base font-medium text-red-700 bg-red-50",children:[s.jsx(xs,{className:"w-5 h-5 mr-2"}),"Complet"]}):s.jsxs("a",{href:n.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700 transition",children:[s.jsx(Js,{className:"h-4 w-4 mr-2"})," Rejoindre le direct"]}):m?s.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-green-500 rounded-md shadow-sm text-base font-medium text-green-700 bg-green-50",children:[s.jsx(vi,{className:"w-5 h-5 mr-2"}),"Déjà Inscrit(e)"]}):n.currentParticipants>=n.maxParticipants?s.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-red-300 rounded-md shadow-sm text-base font-medium text-red-700 bg-red-50",children:[s.jsx(xs,{className:"w-5 h-5 mr-2"}),"Complet"]}):s.jsxs("button",{onClick:_,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700",children:[s.jsx(ut,{className:"w-5 h-5 mr-2"}),"S'inscrire"]}),s.jsxs("button",{onClick:q,className:"inline-flex items-center justify-center px-6 py-3 border border-blue-600 rounded-md shadow-sm text-base font-medium text-blue-600 bg-white hover:bg-blue-50 transition",children:[s.jsx(uR,{className:"w-5 h-5 mr-2"}),"Ajouter au calendrier"]})]}),d&&s.jsx("div",{className:"mt-6",children:s.jsx(DD,{webinar:n,onClose:()=>h(!1)})})]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Us,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Webinaire non trouvé"}),s.jsx("p",{className:"mt-1 text-gray-500",children:"Ce webinaire n'existe pas ou a été supprimé."}),s.jsx("div",{className:"mt-6",children:s.jsx(Y,{to:"/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Voir tous les webinaires"})})]}),s.jsxs("div",{className:"mt-8 bg-white border border-dashed border-blue-200 rounded-lg p-6 text-center text-blue-600",children:[s.jsx(lt,{className:"inline-block h-6 w-6 mb-2 text-blue-400"}),s.jsx("div",{className:"font-semibold",children:"Section questions / commentaires à venir"}),s.jsx("div",{className:"text-sm text-blue-400 mt-1",children:"Bientôt, vous pourrez poser vos questions ou interagir en direct avec l'intervenant."})]})]})})},MD=()=>{const{currentUser:t}=Ce(),e=at(),[r,n]=g.useState(!1),[i,a]=g.useState(!1),[o,l]=g.useState(""),[u,d]=g.useState(""),[h,m]=g.useState({title:"",description:"",expectedDuration:"60",topics:[],targetAudience:"",preferredDate:"",contactEmail:(t==null?void 0:t.email)||"",notes:""}),x=S=>{const{name:y,value:w}=S.target;m({...h,[y]:w})},j=()=>{u.trim()&&!h.topics.includes(u.trim())&&(m({...h,topics:[...h.topics,u.trim()]}),d(""))},A=S=>{m({...h,topics:h.topics.filter(y=>y!==S)})},D=async S=>{if(S.preventDefault(),!t){l("Vous devez être connecté pour proposer un atelier");return}if(!h.title||!h.description){l("Veuillez remplir tous les champs obligatoires");return}n(!0),l("");try{await zt(ke(re,"workshopProposals"),{...h,userId:t.uid,userEmail:t.email,userName:t.displayName||"Utilisateur anonyme",status:"pending",createdAt:is()}),a(!0),n(!1),setTimeout(()=>{a(!1),m({title:"",description:"",expectedDuration:"60",topics:[],targetAudience:"",preferredDate:"",contactEmail:(t==null?void 0:t.email)||"",notes:""})},3e3)}catch(y){console.error("Erreur lors de la soumission de la proposition:",y),l("Une erreur est survenue lors de l'envoi de votre proposition. Veuillez réessayer."),n(!1)}};return s.jsx("div",{className:"bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("button",{onClick:()=>e("/webinars"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour aux webinaires"]})}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Proposer un atelier"}),s.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez une expertise à partager avec la communauté ESIG ? Proposez-nous un atelier ou un webinaire et notre équipe vous contactera pour en discuter. Vos contributions enrichissent notre communauté !"}),i&&s.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Mi,{className:"w-5 h-5 mr-2"}),s.jsx("p",{children:"Votre proposition a été soumise avec succès ! Notre équipe l'examinera et vous contactera prochainement."})]})}),o&&s.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:s.jsx("p",{children:o})}),s.jsx("form",{onSubmit:D,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Titre de l'atelier ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",name:"title",id:"title",required:!0,value:h.title,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: Introduction à la programmation fonctionnelle"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description détaillée ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{name:"description",id:"description",required:!0,value:h.description,onChange:x,rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Décrivez le contenu, les objectifs et ce que les participants apprendront"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expectedDuration",className:"block text-sm font-medium text-gray-700",children:"Durée estimée (minutes)"}),s.jsxs("select",{name:"expectedDuration",id:"expectedDuration",value:h.expectedDuration,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[s.jsx("option",{value:"30",children:"30 minutes"}),s.jsx("option",{value:"45",children:"45 minutes"}),s.jsx("option",{value:"60",children:"1 heure"}),s.jsx("option",{value:"90",children:"1 heure 30"}),s.jsx("option",{value:"120",children:"2 heures"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sujets abordés"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),className:"flex-grow border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ajouter un sujet"}),s.jsx("button",{type:"button",onClick:j,className:"ml-2 inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ajouter"})]}),h.topics.length>0&&s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h.topics.map((S,y)=>s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[S,s.jsx("button",{type:"button",onClick:()=>A(S),className:"ml-1.5 inline-flex text-blue-400 hover:text-blue-600 focus:outline-none",children:"×"})]},y))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"targetAudience",className:"block text-sm font-medium text-gray-700",children:"Public cible"}),s.jsx("input",{type:"text",name:"targetAudience",id:"targetAudience",value:h.targetAudience,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: Débutants, étudiants en informatique, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"preferredDate",className:"block text-sm font-medium text-gray-700",children:"Date préférée (optionnel)"}),s.jsx("input",{type:"date",name:"preferredDate",id:"preferredDate",value:h.preferredDate,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700",children:"Email de contact"}),s.jsx("input",{type:"email",name:"contactEmail",id:"contactEmail",value:h.contactEmail,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Votre email pour vous contacter"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes supplémentaires"}),s.jsx("textarea",{name:"notes",id:"notes",value:h.notes,onChange:x,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Informations complémentaires, besoins spécifiques, etc."})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{type:"submit",disabled:r||i,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${r||i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,children:r?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Envoi en cours..."]}):i?s.jsxs(s.Fragment,{children:[s.jsx(Mi,{className:"mr-2 h-4 w-4"}),"Proposition envoyée"]}):s.jsxs(s.Fragment,{children:[s.jsx(Wd,{className:"mr-2 h-4 w-4"}),"Envoyer ma proposition"]})})})]})})]})]})})},VD=()=>{const{currentUser:t}=Ce(),e=at(),[r,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState("");g.useEffect(()=>{if(!t){e("/login",{state:{from:"/mes-propositions"}});return}(async()=>{try{a(!0);const h=St(ke(re,"workshopProposals"),lr("userId","==",t.uid)),m=await Xe(h),x=[];m.forEach(j=>{const A=j.data();x.push({id:j.id,...A})}),x.sort((j,A)=>A.createdAt.toMillis()-j.createdAt.toMillis()),n(x),a(!1)}catch(h){console.error("Erreur lors de la récupération des propositions:",h),l("Une erreur est survenue lors de la récupération de vos propositions."),a(!1)}})()},[t,e]);const u=d=>{switch(d){case"pending":return s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[s.jsx(ls,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.jsx(ws,{className:"w-3 h-3 mr-1"}),"Approuvée"]});case"rejected":return s.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[s.jsx(xs,{className:"w-3 h-3 mr-1"}),"Rejetée"]});default:return s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:d})}};return s.jsx("div",{className:"bg-gray-50 min-h-screen",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[s.jsx(Be,{className:"w-4 h-4 mr-1"}),"Retour"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Mes propositions d'ateliers"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Consultez l'état de vos propositions d'ateliers soumises."})]}),i?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-500"})}):o?s.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mt-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(xs,{className:"h-5 w-5 text-red-400"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-700",children:o})})]})}):r.length>0?s.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:s.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:r.map(d=>s.jsx("li",{children:s.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.title}),s.jsx("div",{className:"mt-1",children:u(d.status)})]}),s.jsx("div",{className:"text-sm text-gray-500",children:d.createdAt&&s.jsxs("p",{children:["Soumise le ",d.createdAt.toDate().toLocaleDateString()]})})]}),s.jsx("div",{className:"mt-3 text-sm text-gray-500 line-clamp-2",children:d.description}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(cr,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsxs("span",{className:"text-sm text-gray-500",children:["Durée: ",d.expectedDuration]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(nr,{className:"h-4 w-4 text-gray-400 mr-2"}),s.jsx("span",{className:"text-sm text-gray-500",children:d.preferredDate?`Date préférée: ${d.preferredDate}`:"Aucune date préférée"})]})]}),d.topics&&d.topics.length>0&&s.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:d.topics.map((h,m)=>s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:h},m))}),d.status==="rejected"&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-md",children:s.jsx("p",{className:"text-sm text-red-700",children:"Votre proposition a été refusée. Si vous souhaitez proposer une version améliorée, vous pouvez soumettre une nouvelle proposition."})}),d.status==="approved"&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-md",children:s.jsx("p",{className:"text-sm text-green-700",children:"Félicitations ! Votre proposition a été acceptée. Un membre de l'équipe vous contactera prochainement pour discuter des détails."})}),d.status==="pending"&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-md",children:s.jsx("p",{className:"text-sm text-yellow-700",children:"Votre proposition est en cours d'examen. Nous vous informerons dès qu'une décision sera prise."})})]})},d.id))})}):s.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[s.jsx(p2,{className:"mx-auto h-12 w-12 text-gray-400"}),s.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucune proposition"}),s.jsx("p",{className:"mt-1 text-gray-500",children:"Vous n'avez pas encore soumis de proposition d'atelier."}),s.jsx("button",{onClick:()=>e("/proposer-atelier"),className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Proposer un atelier"})]})]})})},FD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(rr,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Conditions Générales d'Utilisation"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Ce document définit les règles d'utilisation de notre plateforme. Nous vous invitons à le lire attentivement."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:`Les présentes Conditions Générales d'Utilisation (ci-après dénommées "CGU") encadrent l'utilisation de la plateforme ESIG-prep-guide (ci-après dénommée "la Plateforme") mise à disposition par [Votre Nom/Organisation], à destination des étudiants et futurs étudiants de l'ESIGELEC.`}),s.jsx("p",{children:"En utilisant la Plateforme, vous acceptez sans réserve les présentes CGU. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser la Plateforme."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Description du service"})]}),s.jsx("p",{children:"La Plateforme ESIG-prep-guide est un outil d'aide et d'accompagnement destiné aux étudiants et futurs étudiants de l'ESIGELEC. Elle fournit des informations, des ressources et des guides pour faciliter les démarches liées aux études à l'ESIGELEC."}),s.jsx("p",{children:"La Plateforme propose notamment :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des guides d'information pour les différentes phases du parcours étudiant (post-admission, pendant les démarches, pré-arrivée)"}),s.jsx("li",{children:"Une bibliothèque de ressources documentaires"}),s.jsx("li",{children:"Une section FAQ permettant aux utilisateurs de poser des questions et de consulter les réponses"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(vi,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Accès au service"})]}),s.jsx("p",{children:"La Plateforme est accessible gratuitement à tout utilisateur disposant d'un accès à Internet. Tous les frais liés à l'accès à la Plateforme (matériel informatique, logiciels, connexion Internet, etc.) sont à la charge de l'utilisateur."}),s.jsx("p",{children:"Certaines fonctionnalités de la Plateforme nécessitent une inscription préalable. L'utilisateur s'engage à fournir des informations exactes et à jour lors de son inscription."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Propriété intellectuelle"})]}),s.jsx("p",{children:"L'ensemble des éléments constituant la Plateforme (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive de [Votre Nom/Organisation] ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments de la Plateforme, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),s.jsx("p",{children:"Les marques et logos présents sur la Plateforme sont la propriété de leurs détenteurs respectifs. Toute reproduction sans autorisation préalable est interdite."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Responsabilités"})]}),s.jsx("p",{children:"Les informations fournies sur la Plateforme le sont à titre informatif. [Votre Nom/Organisation] s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur la Plateforme."}),s.jsx("p",{children:"[Votre Nom/Organisation] ne saurait être tenu responsable :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des éventuelles interruptions de la Plateforme pour des raisons de maintenance ou autres"}),s.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),s.jsx("li",{children:"Des conséquences de l'utilisation de la Plateforme"}),s.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur la Plateforme"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(vi,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Obligations de l'utilisateur"})]}),s.jsx("p",{children:"En utilisant la Plateforme, l'utilisateur s'engage à :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Ne pas utiliser la Plateforme à des fins illégales ou interdites par les présentes CGU"}),s.jsx("li",{children:"Ne pas tenter de perturber le bon fonctionnement de la Plateforme"}),s.jsx("li",{children:"Ne pas diffuser de contenu illégal, préjudiciable, menaçant, injurieux, harcelant, diffamatoire, vulgaire, obscène, contraire aux bonnes mœurs, portant atteinte à la vie privée d'une personne ou contrevenant aux lois en vigueur"}),s.jsx("li",{children:"Ne pas collecter ou stocker des données personnelles concernant d'autres utilisateurs"}),s.jsx("li",{children:"Ne pas usurper l'identité d'une autre personne ou entité"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Modification des CGU"})]}),s.jsx("p",{children:"[Votre Nom/Organisation] se réserve le droit de modifier les présentes CGU à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié. L'utilisation continue de la Plateforme après modification des CGU vaut acceptation des nouvelles conditions."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Droit applicable et juridiction compétente"})]}),s.jsx("p",{children:"Les présentes CGU sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(vi,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),s.jsx("p",{children:"Pour toute question relative aux présentes CGU, vous pouvez contacter [Votre Nom/Organisation] à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(qt,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document légal important"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ces conditions générales d'utilisation constituent un contrat juridiquement contraignant entre vous et notre service. En utilisant notre plateforme, vous acceptez ces conditions."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),OD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(li,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Politique de Confidentialité"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Nous accordons une grande importance à la protection de vos données personnelles. Ce document détaille comment nous les collectons et les utilisons."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(li,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:'La présente Politique de Confidentialité décrit comment la plateforme ESIG-prep-guide (ci-après "la Plateforme") collecte, utilise et protège vos données personnelles lorsque vous utilisez notre service.'}),s.jsx("p",{children:"Nous respectons votre vie privée et nous nous engageons à protéger vos données personnelles conformément au Règlement Général sur la Protection des Données (RGPD) et aux autres lois applicables en matière de protection des données."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Responsable du traitement"})]}),s.jsx("p",{children:"Le responsable du traitement de vos données personnelles est [Votre Nom/Organisation], joignable à l'adresse email suivante : [Votre adresse email]."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Fx,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Quelles données collectons-nous ?"})]}),s.jsx("p",{children:"Nous pouvons collecter les types de données personnelles suivants :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Données d'identification"})," : nom, prénom, adresse email, identifiant utilisateur"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données de connexion"})," : adresse IP, type de navigateur, système d'exploitation, date et heure de connexion"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données d'utilisation"})," : interactions avec la Plateforme, questions posées, ressources consultées"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Données de profil"})," : préférences, centres d'intérêt en lien avec votre utilisation de la Plateforme"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Comment collectons-nous vos données ?"})]}),s.jsx("p",{children:"Nous collectons vos données de différentes manières :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Directement auprès de vous"})," : lorsque vous créez un compte, complétez un formulaire, posez une question, ou interagissez avec notre Plateforme"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Automatiquement"})," : à travers des cookies et technologies similaires lorsque vous naviguez sur notre Plateforme"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Auprès de tiers"})," : lorsque vous vous connectez via des services tiers comme Google"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Pourquoi utilisons-nous vos données ?"})]}),s.jsx("p",{children:"Nous utilisons vos données personnelles pour les finalités suivantes :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Vous permettre de créer et de gérer votre compte utilisateur"}),s.jsx("li",{children:"Vous fournir les services et fonctionnalités de la Plateforme"}),s.jsx("li",{children:"Répondre à vos questions et demandes"}),s.jsx("li",{children:"Personnaliser votre expérience sur la Plateforme"}),s.jsx("li",{children:"Améliorer et développer notre Plateforme"}),s.jsx("li",{children:"Assurer la sécurité de la Plateforme et prévenir les fraudes"}),s.jsx("li",{children:"Respecter nos obligations légales"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Base légale du traitement"})]}),s.jsx("p",{children:"Nous traitons vos données personnelles sur les bases légales suivantes :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Exécution du contrat"})," : le traitement est nécessaire à l'exécution du contrat auquel vous êtes partie (les Conditions Générales d'Utilisation)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Consentement"})," : vous avez donné votre consentement au traitement de vos données à caractère personnel pour une ou plusieurs finalités spécifiques"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Intérêts légitimes"})," : le traitement est nécessaire aux fins des intérêts légitimes poursuivis par nous ou par un tiers"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Obligation légale"})," : le traitement est nécessaire au respect d'une obligation légale à laquelle nous sommes soumis"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Durée de conservation"})]}),s.jsx("p",{children:"Nous conservons vos données personnelles uniquement pendant la durée nécessaire à la réalisation des finalités pour lesquelles elles ont été collectées, y compris pour satisfaire aux exigences légales, comptables ou de déclaration."}),s.jsx("p",{children:"Vos données de compte utilisateur sont conservées tant que votre compte est actif. En cas de suppression de votre compte, vos données personnelles sont supprimées ou anonymisées dans un délai raisonnable."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Partage de vos données"})]}),s.jsx("p",{children:"Nous pouvons partager vos données personnelles avec :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Nos prestataires de services"})," : qui nous aident à fournir nos services (hébergement, maintenance, analyses, etc.)"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Des tiers avec votre consentement"})," : lorsque vous nous avez autorisés à le faire"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Les autorités compétentes"})," : lorsque nous sommes légalement tenus de le faire"]})]}),s.jsx("p",{children:"Nous ne vendons pas vos données personnelles à des tiers."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ox,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Transfert de données hors UE"})]}),s.jsx("p",{children:"Certains de nos prestataires de services peuvent être basés en dehors de l'Espace Économique Européen (EEE). Lorsque nous transférons vos données personnelles en dehors de l'EEE, nous nous assurons qu'elles bénéficient d'un niveau de protection similaire en mettant en œuvre des garanties appropriées (clauses contractuelles types, décisions d'adéquation, etc.)."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(qt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"10. Vos droits"})]}),s.jsx("p",{children:"Conformément au RGPD, vous disposez des droits suivants concernant vos données personnelles :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Droit d'accès"})," : vous pouvez demander une copie des données personnelles que nous détenons à votre sujet"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit de rectification"})," : vous pouvez demander la correction de données inexactes ou incomplètes"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à l'effacement"})," : vous pouvez demander la suppression de vos données personnelles dans certaines circonstances"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à la limitation du traitement"})," : vous pouvez demander la limitation du traitement de vos données personnelles"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit à la portabilité des données"})," : vous pouvez demander le transfert de vos données personnelles à un autre responsable du traitement"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit d'opposition"})," : vous pouvez vous opposer au traitement de vos données personnelles dans certaines circonstances"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Droit de retirer votre consentement"})," : lorsque le traitement est basé sur votre consentement"]})]}),s.jsx("p",{children:"Pour exercer ces droits, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),s.jsx("p",{children:"Si vous estimez, après nous avoir contactés, que vos droits ne sont pas respectés, vous avez le droit d'introduire une réclamation auprès de la Commission Nationale de l'Informatique et des Libertés (CNIL)."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(kR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"11. Sécurité des données"})]}),s.jsx("p",{children:"Nous mettons en œuvre des mesures techniques et organisationnelles appropriées pour protéger vos données personnelles contre tout traitement non autorisé ou illégal et contre toute perte, destruction ou dommage accidentels."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx($x,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"12. Cookies et technologies similaires"})]}),s.jsx("p",{children:"Notre Plateforme utilise des cookies et des technologies similaires pour améliorer votre expérience et recueillir des informations sur l'utilisation de la Plateforme. Vous pouvez gérer vos préférences en matière de cookies via notre bannière de consentement aux cookies."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"13. Modification de la politique de confidentialité"})]}),s.jsx("p",{children:"Nous pouvons modifier cette politique de confidentialité de temps à autre. Toute modification sera publiée sur cette page et, si les modifications sont importantes, nous vous fournirons une notification plus visible."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"14. Contact"})]}),s.jsx("p",{children:"Pour toute question concernant cette politique de confidentialité ou vos données personnelles, veuillez nous contacter à l'adresse email suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(fR,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Protection de vos données personnelles"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au Règlement Général sur la Protection des Données (RGPD), vous pouvez à tout moment exercer vos droits d'accès, de rectification, d'effacement, de limitation, de portabilité et d'opposition aux données vous concernant."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),qD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(oR,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Mentions Légales"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Informations légales relatives à l'éditeur du site et aux conditions d'hébergement."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(m2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Éditeur du site"})]}),s.jsx("p",{children:'Le site ESIG-prep-guide (ci-après "le Site") est édité par :'}),s.jsxs("p",{children:[s.jsx("strong",{children:"Nom :"})," Abdoul Ahad Mbacké Diouf",s.jsx("br",{}),s.jsx("strong",{children:"Adresse :"})," [Votre adresse postale]",s.jsx("br",{}),s.jsx("strong",{children:"Email :"})," [Votre adresse email]",s.jsx("br",{}),s.jsx("strong",{children:"Téléphone :"})," [Votre numéro de téléphone]"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Directeur de la publication :"})," Abdoul Ahad Mbacké Diouf"]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx($x,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Hébergement"})]}),s.jsx("p",{children:"Le Site est hébergé par :"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Société :"})," GitHub Pages (GitHub Inc.)",s.jsx("br",{}),s.jsx("strong",{children:"Adresse :"})," 88 Colin P Kelly Jr St, San Francisco, CA 94107, États-Unis",s.jsx("br",{}),s.jsx("strong",{children:"Site web :"})," ",s.jsx("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"https://pages.github.com/"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(mR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Propriété intellectuelle"})]}),s.jsx("p",{children:"L'ensemble des éléments constituant le Site (textes, graphismes, logiciels, images, sons, plans, etc.) est la propriété exclusive d'Abdoul Ahad Mbacké Diouf ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, représentation, modification, publication, adaptation de tout ou partie des éléments du Site, quel que soit le moyen ou le procédé utilisé, est interdite, sauf autorisation écrite préalable."}),s.jsx("p",{children:"Toute exploitation non autorisée du Site ou de l'un quelconque des éléments qu'il contient sera considérée comme constitutive d'une contrefaçon et poursuivie conformément aux dispositions des articles L.335-2 et suivants du Code de Propriété Intellectuelle."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Responsabilité"})]}),s.jsx("p",{children:"Les informations fournies sur le Site le sont à titre informatif. Abdoul Ahad Mbacké Diouf s'efforce d'assurer l'exactitude et la mise à jour des informations diffusées, mais ne peut garantir l'exactitude, la précision ou l'exhaustivité des informations mises à disposition sur le Site."}),s.jsx("p",{children:"Abdoul Ahad Mbacké Diouf ne saurait être tenu responsable :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Des éventuelles interruptions du Site pour des raisons de maintenance ou autres"}),s.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),s.jsx("li",{children:"Des conséquences de l'utilisation du Site"}),s.jsx("li",{children:"De tout dommage résultant d'une intrusion frauduleuse d'un tiers ayant entraîné une modification des informations mises à disposition sur le Site"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ox,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Liens hypertextes"})]}),s.jsx("p",{children:"Le Site peut contenir des liens hypertextes vers d'autres sites internet. Abdoul Ahad Mbacké Diouf n'exerce aucun contrôle sur ces sites et n'assume aucune responsabilité quant à leur contenu."}),s.jsx("p",{children:"La création de liens hypertextes vers le Site est autorisée sous réserve :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Que les liens ne soient pas utilisés à des fins commerciales ou publicitaires"}),s.jsx("li",{children:"Qu'ils n'induisent pas de confusion sur l'origine des services ou contenus du Site"}),s.jsx("li",{children:"Qu'ils ne portent pas atteinte aux intérêts d'Abdoul Ahad Mbacké Diouf"})]}),s.jsx("p",{children:"Abdoul Ahad Mbacké Diouf se réserve le droit de demander la suppression de tout lien hypertexte pointant vers le Site qui ne respecterait pas ces conditions."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Br,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Protection des données personnelles"})]}),s.jsxs("p",{children:["Conformément au Règlement Général sur la Protection des Données (RGPD) et à la loi Informatique et Libertés, vous disposez de droits concernant vos données personnelles. Pour en savoir plus, veuillez consulter notre ",s.jsx(Y,{to:"/legal/privacy-policy",children:"Politique de Confidentialité"}),"."]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(RR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Droit applicable et juridiction compétente"})]}),s.jsx("p",{children:"Les présentes mentions légales sont soumises au droit français. En cas de litige non résolu à l'amiable, les tribunaux français seront seuls compétents."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(zx,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Contact"})]}),s.jsx("p",{children:"Pour toute question relative aux présentes mentions légales, vous pouvez contacter Abdoul Ahad Mbacké Diouf à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(SR,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Informations obligatoires"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément à l'article 6 de la loi n° 2004-575 du 21 juin 2004 pour la confiance dans l'économie numérique, il est précisé aux utilisateurs du site ESIG-prep-guide l'identité des différents intervenants dans le cadre de sa réalisation et de son suivi."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),UD=()=>s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(Sv,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Charte de Modération"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Règles de bonne conduite pour les interactions sur notre plateforme ESIG-prep-guide."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[s.jsx(lt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),s.jsx("p",{children:'La présente Charte de Modération définit les règles de bonne conduite applicables aux interactions sur la plateforme ESIG-prep-guide (ci-après "la Plateforme"), notamment en ce qui concerne les questions posées dans la section FAQ et tout autre contenu généré par les utilisateurs.'}),s.jsx("p",{children:"Cette charte vise à garantir un environnement respectueux et constructif pour tous les utilisateurs de la Plateforme."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Sv,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Principes généraux"})]}),s.jsx("p",{children:"Tous les contenus publiés sur la Plateforme doivent respecter les principes suivants :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Respect mutuel entre les utilisateurs"}),s.jsx("li",{children:"Pertinence par rapport aux thématiques de la Plateforme"}),s.jsx("li",{children:"Exactitude et véracité des informations partagées"}),s.jsx("li",{children:"Respect des lois et règlements en vigueur"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Contenus prohibés"})]}),s.jsx("p",{children:"Sont formellement interdits les contenus :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"À caractère injurieux, diffamatoire, raciste, xénophobe, homophobe, sexiste ou discriminatoire"}),s.jsx("li",{children:"Incitant à la haine, à la violence ou au harcèlement envers une personne ou un groupe"}),s.jsx("li",{children:"À caractère pornographique, obscène ou choquant"}),s.jsx("li",{children:"Violant les droits de propriété intellectuelle d'autrui"}),s.jsx("li",{children:"Comportant des informations personnelles d'un tiers sans son consentement"}),s.jsx("li",{children:"Faisant la promotion d'activités illégales"}),s.jsx("li",{children:"Comportant des liens vers des sites malveillants ou frauduleux"}),s.jsx("li",{children:"Consistant en du spam ou des messages répétitifs"}),s.jsx("li",{children:"Hors sujet ou sans rapport avec les thématiques de la Plateforme"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(x2,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Procédure de modération"})]}),s.jsx("p",{children:"La modération des contenus sur la Plateforme s'effectue de la manière suivante :"}),s.jsxs("ul",{children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Modération a priori"})," : les questions posées dans la section FAQ sont examinées par l'équipe de modération avant leur publication"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Signalement"})," : les utilisateurs peuvent signaler tout contenu qu'ils jugent inapproprié"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Suppression"})," : les contenus ne respectant pas la présente charte peuvent être supprimés sans préavis"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Sanctions"})," : en cas de violations répétées, des mesures peuvent être prises à l'encontre des utilisateurs concernés (avertissement, suspension temporaire, suppression du compte)"]})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ur,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Bonnes pratiques recommandées"})]}),s.jsx("p",{children:"Pour contribuer positivement à la Plateforme, nous encourageons les utilisateurs à :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Formuler des questions claires et précises"}),s.jsx("li",{children:"Utiliser un langage correct et respectueux"}),s.jsx("li",{children:"Vérifier que leur question n'a pas déjà été posée"}),s.jsx("li",{children:"Catégoriser correctement leur question (phase, catégorie)"}),s.jsx("li",{children:"Fournir les informations nécessaires à la compréhension de leur question"}),s.jsx("li",{children:"Partager leur expérience de manière constructive"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Rôle des modérateurs"})]}),s.jsx("p",{children:"Les modérateurs de la Plateforme ont pour mission de :"}),s.jsxs("ul",{children:[s.jsx("li",{children:"Veiller au respect de la présente charte"}),s.jsx("li",{children:"Examiner les contenus signalés par les utilisateurs"}),s.jsx("li",{children:"Prendre les mesures appropriées en cas de non-respect des règles"}),s.jsx("li",{children:"Répondre aux questions des utilisateurs concernant la modération"}),s.jsx("li",{children:"Faire évoluer la présente charte si nécessaire"})]}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(bR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Contestation d'une décision de modération"})]}),s.jsx("p",{children:"Si vous contestez une décision de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),s.jsx("p",{children:"Votre demande sera examinée dans les meilleurs délais."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(Ke,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Modification de la charte"})]}),s.jsx("p",{children:"La présente charte peut être modifiée à tout moment. Les utilisateurs seront informés des modifications par tout moyen approprié."}),s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[s.jsx(lt,{className:"w-6 h-6 text-blue-600"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),s.jsx("p",{children:"Pour toute question concernant cette charte de modération, vous pouvez contacter l'équipe de modération à l'adresse suivante : [Votre adresse email]."}),s.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(cr,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Règles de la communauté"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Cette charte de modération vise à maintenir un environnement d'échanges respectueux et constructif. En utilisant notre plateforme, vous vous engagez à respecter ces règles pour le bénéfice de tous les utilisateurs."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),zD=()=>{const{currentUser:t,isAdmin:e}=Ce();return!t||!e()?s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(li,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Accès restreint"}),s.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Cette page est réservée aux administrateurs de la plateforme."}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour à l'accueil"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto border border-gray-100",children:[s.jsx("div",{className:"bg-red-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-6",children:s.jsx(li,{className:"h-10 w-10 text-red-500"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accès administrateur requis"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Le registre RGPD est un document à usage interne destiné uniquement aux administrateurs. Veuillez vous connecter avec un compte disposant des privilèges administrateur pour y accéder."}),s.jsx("div",{className:"flex justify-center",children:s.jsxs(Y,{to:"/login",className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:[s.jsx(li,{className:"w-4 h-4"}),"Se connecter"]})})]})})]}):s.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsx("div",{className:"flex items-center justify-center mb-6",children:s.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:s.jsx(qt,{className:"w-8 h-8 text-white"})})}),s.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Registre de Traitement RGPD"}),s.jsx("div",{className:"flex justify-center",children:s.jsxs("div",{className:"flex items-center text-red-200 bg-red-700 px-4 py-2 rounded-md inline-block mt-2 shadow-sm",children:[s.jsx(li,{className:"w-5 h-5 mr-2"}),"Document confidentiel à usage interne uniquement"]})}),s.jsx("div",{className:"flex justify-center mt-6",children:s.jsxs(Y,{to:"/admin",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[s.jsx(Be,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})}),s.jsx("div",{className:"container mx-auto px-4 py-12",children:s.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-5xl mx-auto border border-gray-100",children:s.jsxs("div",{className:"prose max-w-none",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-4 rounded-lg border border-red-200",children:[s.jsx(li,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),s.jsx("h2",{className:"text-xl font-bold text-red-800 m-0",children:"CONFIDENTIEL - Registre des activités de traitement"})]})}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mb-8",children:s.jsx("p",{className:"text-blue-800 font-medium",children:"Conformément à l'article 30 du Règlement Général sur la Protection des Données (RGPD), ce registre recense l'ensemble des traitements de données à caractère personnel mis en œuvre par ESIG-prep-guide en tant que responsable de traitement."})}),s.jsxs("div",{className:"mb-12",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-6",children:[s.jsx(ut,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"1. Identité du responsable de traitement"})]}),s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 shadow-sm",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Nom :"}),s.jsx("span",{children:"Abdoul Ahad Mbacké Diouf"})]}),s.jsxs("p",{className:"flex items-start mt-3",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Adresse :"}),s.jsx("span",{children:"[Votre adresse postale]"})]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Email :"}),s.jsx("span",{children:"[Votre adresse email]"})]}),s.jsxs("p",{className:"flex items-start mt-3",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Téléphone :"}),s.jsx("span",{children:"[Votre numéro de téléphone]"})]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Délégué à la protection des données :"}),s.jsx("span",{children:'[Nom du DPO ou "Non désigné"]'})]})})]})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(Fx,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 1: Gestion des comptes utilisateurs"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des comptes utilisateurs et authentification"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Création et gestion de compte"}),s.jsx("li",{children:"Authentification des utilisateurs"}),s.jsx("li",{children:"Récupération de mot de passe"}),s.jsx("li",{children:"Vérification d'email"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Exécution contractuelle (CGU) et consentement"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Identifiants: nom, prénom, adresse email"}),s.jsx("li",{children:"Données de compte: mot de passe (hashé), rôle"}),s.jsx("li",{children:"Données de connexion: timestamp, adresse IP"}),s.jsx("li",{children:"Données de profil: photo (facultatif)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs de la plateforme"}),s.jsx("li",{children:"En externe: Firebase (sous-traitant pour l'authentification)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Aussi longtemps que le compte est actif + 1 an après suppression pour des raisons techniques et légales"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Authentification sécurisée (Firebase Auth)"}),s.jsx("li",{children:"Mots de passe hashés"}),s.jsx("li",{children:"Accès restreint aux données administrateur"}),s.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(rr,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 2: Gestion des questions FAQ"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des questions posées par les utilisateurs"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Recueil des questions des utilisateurs"}),s.jsx("li",{children:"Modération et publication des questions"}),s.jsx("li",{children:"Réponse aux questions"}),s.jsx("li",{children:"Constitution d'une base de connaissances"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Consentement et intérêt légitime"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Identifiants: ID utilisateur, email"}),s.jsx("li",{children:"Contenu: question posée, catégorie, phase"}),s.jsx("li",{children:"Métadonnées: date de soumission, statut de la question"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs et modérateurs"}),s.jsx("li",{children:"En externe: Firebase (sous-traitant pour le stockage des données)"}),s.jsx("li",{children:"Public: questions approuvées et répondues"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsxs("td",{className:"border border-gray-300 p-3",children:[s.jsx("p",{children:"Questions publiées: durée de vie de la plateforme"}),s.jsx("p",{children:"Questions refusées: 1 an après refus"})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Accès restreint aux données complètes (admin uniquement)"}),s.jsx("li",{children:"Modération avant publication"}),s.jsx("li",{children:"Règles de sécurité Firebase"}),s.jsx("li",{children:"Transmission des données via HTTPS"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[s.jsx(vR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 3: Gestion des ressources documentaires"})]}),s.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:s.jsxs("tbody",{children:[s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalité du traitement"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion et mise à disposition des ressources documentaires"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalités"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Publication de documents informatifs"}),s.jsx("li",{children:"Catégorisation des ressources"}),s.jsx("li",{children:"Accès contrôlé aux ressources"}),s.jsx("li",{children:"Suivi statistique des consultations"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base légale"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Exécution contractuelle (CGU) et intérêt légitime"})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de données"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Métadonnées des ressources: titre, description, catégorie, phase"}),s.jsx("li",{children:"Données d'accès: identifiant utilisateur, timestamp d'accès"}),s.jsx("li",{children:"Statistiques anonymisées: nombre de consultations"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catégories de personnes concernées"}),s.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme, administrateurs"})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"En interne: administrateurs"}),s.jsx("li",{children:"En externe: Firebase (stockage des métadonnées), Dropbox (stockage des fichiers)"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Durée de conservation"}),s.jsxs("td",{className:"border border-gray-300 p-3",children:[s.jsx("p",{children:"Métadonnées des ressources: durée de vie de la plateforme"}),s.jsx("p",{children:"Données d'accès individuelles: 1 an"})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de sécurité"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[s.jsx("li",{children:"Authentification requise pour l'accès aux ressources"}),s.jsx("li",{children:"Gestion des droits d'accès"}),s.jsx("li",{children:"Transmission sécurisée via HTTPS"}),s.jsx("li",{children:"Sécurité des liens de téléchargement"})]})})]}),s.jsxs("tr",{className:"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),s.jsx("td",{className:"border border-gray-300 p-3",children:s.jsx("p",{children:"Oui (Firebase - USA, Dropbox - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),s.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(DR,{className:"w-6 h-6 text-blue-600"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Mise à jour du registre"})]}),s.jsx("p",{className:"text-gray-700",children:"Ce registre est mis à jour régulièrement pour refléter l'évolution des traitements de données effectués."}),s.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[s.jsx(ls,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document obligatoire"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformément au RGPD, ce registre des activités de traitement doit être conservé à jour et présenté sur demande à la CNIL. Il constitue un élément essentiel de la conformité au RGPD."})]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernière mise à jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})]})})})]})},BD=()=>{const[t,e]=g.useState(!1),[r,n]=g.useState(!1),{currentUser:i}=Ce(),a=dr();g.useEffect(()=>{if(i){const l=localStorage.getItem(`disclaimerSeen_${i.uid}`),u=new Date().toDateString();(!l||new Date(l).toDateString()!==u)&&e(!0)}},[i,a.pathname]);const o=()=>{i&&(localStorage.setItem(`disclaimerSeen_${i.uid}`,new Date().toISOString()),n(!0),e(!1))};return!t||r?null:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(ls,{className:"h-8 w-8 text-yellow-500 mr-2"}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Information importante"})]}),s.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-500",children:s.jsx(Ct,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"prose prose-lg text-gray-700 space-y-4",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Bienvenue sur ESIG-prep-guide !"})," Avant de commencer, il est important de noter que :"]}),s.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[s.jsxs("li",{children:["Cette application ",s.jsx("strong",{children:"ne garantit pas"})," l'obtention d'un visa"]}),s.jsx("li",{children:"Les informations fournies sont basées sur des expériences personnelles"}),s.jsx("li",{children:"Les procédures peuvent évoluer - restez informé des mises à jour officielles"}),s.jsx("li",{children:"Nous vous recommandons de toujours vérifier les informations auprès des sources officielles"})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ws,{className:"h-5 w-5 text-blue-400"})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-blue-700",children:"En utilisant cette application, vous reconnaissez avoir pris connaissance de ces informations importantes."})})]})})]}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx("button",{onClick:o,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"J'ai compris, continuer"})})]})})})},$D=()=>{const[t,e]=g.useState(!0),{currentUser:r}=Ce(),[n,i]=g.useState(!1),a=dr();g.useEffect(()=>{i(!0),sessionStorage.getItem("bannerClosed")==="true"&&e(!1)},[a.pathname]);const o=()=>{e(!1),sessionStorage.setItem("bannerClosed","true")};return!n||!r||!t?null:s.jsx("div",{className:"fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out",children:s.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 max-w-xs rounded-lg shadow-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(ls,{className:"h-5 w-5 text-yellow-400"})}),s.jsx("div",{className:"ml-3 flex-1",children:s.jsxs("p",{className:"text-sm text-yellow-700",children:[s.jsx("span",{className:"font-medium",children:"Rappel :"})," Cette application fournit des conseils basés sur des expériences personnelles et ne garantit pas l'obtention d'un visa."]})}),s.jsx("div",{className:"ml-4 flex-shrink-0",children:s.jsx("button",{onClick:o,className:"text-yellow-500 hover:text-yellow-700 focus:outline-none","aria-label":"Fermer",children:s.jsx(Ct,{className:"h-4 w-4"})})})]})})})},GD=({children:t})=>s.jsxs(s.Fragment,{children:[s.jsx(BD,{}),s.jsx(HR,{}),t,s.jsx($D,{})]}),Se=({children:t})=>{const{currentUser:e,loading:r}=Ce(),n=dr();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?s.jsx(GD,{children:t}):s.jsx(cl,{to:"/login",state:{from:n},replace:!0})};function WD(){return s.jsx(J3,{children:s.jsx(X3,{children:s.jsx(DS,{children:s.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[s.jsx(UR,{}),s.jsx("main",{className:"flex-grow",children:s.jsxs(kS,{children:[s.jsx(ge,{path:"/",element:s.jsx(KR,{})}),s.jsx(ge,{path:"/login",element:s.jsx(YR,{})}),s.jsx(ge,{path:"/register",element:s.jsx(JR,{})}),s.jsx(ge,{path:"/reset-password",element:s.jsx(AD,{})}),s.jsx(ge,{path:"/test-firebase",element:s.jsx(wD,{})}),s.jsx(ge,{path:"/legal/cgu",element:s.jsx(FD,{})}),s.jsx(ge,{path:"/legal/privacy-policy",element:s.jsx(OD,{})}),s.jsx(ge,{path:"/legal/legal-notice",element:s.jsx(qD,{})}),s.jsx(ge,{path:"/legal/moderation-charter",element:s.jsx(UD,{})}),s.jsx(ge,{path:"/legal/rgpd-registry",element:s.jsx(Ns,{children:s.jsx(zD,{})})}),s.jsx(ge,{path:"/dashboard",element:s.jsx(Se,{children:s.jsx(c6,{})})}),s.jsx(ge,{path:"/applications",element:s.jsx(Se,{children:s.jsx(PD,{})})}),s.jsx(ge,{path:"/resources",element:s.jsx(Se,{children:s.jsx(u6,{})})}),s.jsx(ge,{path:"/faq",element:s.jsx(Se,{children:s.jsx(d6,{})})}),s.jsx(ge,{path:"/feedback",element:s.jsx(Se,{children:s.jsx(TD,{})})}),s.jsx(ge,{path:"/forum",element:s.jsx(Se,{children:s.jsx(go,{children:s.jsx(Zh,{})})})}),s.jsx(ge,{path:"/forum/category/:categoryId",element:s.jsx(Se,{children:s.jsx(go,{children:s.jsx(Zh,{})})})}),s.jsx(ge,{path:"/forum/thread/:threadId",element:s.jsx(Se,{children:s.jsx(go,{children:s.jsx(y6,{})})})}),s.jsx(ge,{path:"/forum/new-thread",element:s.jsx(Se,{children:s.jsx(go,{children:s.jsx(v6,{})})})}),s.jsx(ge,{path:"/profile",element:s.jsx(Se,{children:s.jsx(_D,{})})}),s.jsx(ge,{path:"/tutorial",element:s.jsx(Se,{children:s.jsx(ED,{})})}),s.jsx(ge,{path:"/help",element:s.jsx(Se,{children:s.jsx(kD,{})})}),s.jsx(ge,{path:"/chat-ai",element:s.jsx(Se,{children:s.jsx(go,{children:s.jsx(CD,{})})})}),s.jsx(ge,{path:"/admin",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(Pv,{})})})}),s.jsx(ge,{path:"/admin/content",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(em,{})})})}),s.jsx(ge,{path:"/admin/resources",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(Fv,{})})})}),s.jsx(ge,{path:"/admin/users",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(xD,{})})})}),s.jsx(ge,{path:"/admin/users/:uid",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(gD,{})})})}),s.jsx(ge,{path:"/admin/activity",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(yD,{})})})}),s.jsx(ge,{path:"/admin/progressions",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(bD,{})})})}),s.jsx(ge,{path:"/admin/tutorial",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(vD,{})})})}),s.jsx(ge,{path:"/admin/dropbox",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(Ov,{})})})}),s.jsx(ge,{path:"/admin/feedbacks",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(qv,{})})})}),s.jsx(ge,{path:"/admin/webinars",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(Uv,{})})})}),s.jsx(ge,{path:"/admin/workshop-proposals",element:s.jsx(Se,{children:s.jsx(Ns,{children:s.jsx(zv,{})})})}),s.jsx(ge,{path:"/editor",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(ID,{})})})}),s.jsx(ge,{path:"/editor/content",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(em,{})})})}),s.jsx(ge,{path:"/editor/resources",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(Fv,{})})})}),s.jsx(ge,{path:"/editor/faq",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(em,{})})})}),s.jsx(ge,{path:"/editor/forum",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(Zh,{})})})}),s.jsx(ge,{path:"/editor/dashboard",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(Pv,{})})})}),s.jsx(ge,{path:"/editor/feedbacks",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(qv,{})})})}),s.jsx(ge,{path:"/editor/dropbox",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(Ov,{})})})}),s.jsx(ge,{path:"/editor/webinars",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(Uv,{})})})}),s.jsx(ge,{path:"/editor/workshop-proposals",element:s.jsx(Se,{children:s.jsx(fr,{children:s.jsx(zv,{})})})}),s.jsx(ge,{path:"/webinars",element:s.jsx(Se,{children:s.jsx(RD,{})})}),s.jsx(ge,{path:"/webinars/:id",element:s.jsx(Se,{children:s.jsx(LD,{})})}),s.jsx(ge,{path:"/proposer-atelier",element:s.jsx(Se,{children:s.jsx(MD,{})})}),s.jsx(ge,{path:"/mes-propositions",element:s.jsx(Se,{children:s.jsx(VD,{})})}),s.jsx(ge,{path:"*",element:s.jsx(jD,{})})]})}),s.jsx(BR,{}),s.jsx($R,{}),s.jsx(GR,{})]})})})})}Kx.init("l4eGBb6GgLVODJBOf");cm.createRoot(document.getElementById("root")).render(s.jsx(bi.StrictMode,{children:s.jsx(WD,{})}))});export default HD();
