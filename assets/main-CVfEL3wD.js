var vE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var H5=vE((Z5,B1)=>{function xE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function _E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yv={exports:{}},Lc={},vv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ha=Symbol.for("react.element"),wE=Symbol.for("react.portal"),bE=Symbol.for("react.fragment"),EE=Symbol.for("react.strict_mode"),NE=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),IE=Symbol.for("react.context"),SE=Symbol.for("react.forward_ref"),AE=Symbol.for("react.suspense"),jE=Symbol.for("react.memo"),kE=Symbol.for("react.lazy"),xg=Symbol.iterator;function CE(t){return t===null||typeof t!="object"?null:(t=xg&&t[xg]||t["@@iterator"],typeof t=="function"?t:null)}var xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_v=Object.assign,wv={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||xv}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bv(){}bv.prototype=Ti.prototype;function gf(t,e,n){this.props=t,this.context=e,this.refs=wv,this.updater=n||xv}var yf=gf.prototype=new bv;yf.constructor=gf;_v(yf,Ti.prototype);yf.isPureReactComponent=!0;var _g=Array.isArray,Ev=Object.prototype.hasOwnProperty,vf={current:null},Nv={key:!0,ref:!0,__self:!0,__source:!0};function Tv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Ev.call(e,r)&&!Nv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:ha,type:t,key:i,ref:a,props:s,_owner:vf.current}}function PE(t,e){return{$$typeof:ha,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ha}function RE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wg=/\/+/g;function Bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?RE(""+t.key):e.toString(36)}function yl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ha:case wE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Bu(a,0):r,_g(s)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),yl(s,e,n,"",function(d){return d})):s!=null&&(xf(s)&&(s=PE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",_g(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+Bu(i,c);a+=yl(i,e,n,u,s)}else if(u=CE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+Bu(i,c++),a+=yl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Ha(t,e,n){if(t==null)return t;var r=[],s=0;return yl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function DE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},vl={transition:null},LE={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:vl,ReactCurrentOwner:vf};function Iv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Ha,forEach:function(t,e,n){Ha(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ha(t,function(){e++}),e},toArray:function(t){return Ha(t,function(e){return e})||[]},only:function(t){if(!xf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Ti;re.Fragment=bE;re.Profiler=NE;re.PureComponent=gf;re.StrictMode=EE;re.Suspense=AE;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LE;re.act=Iv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_v({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=vf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ev.call(e,u)&&!Nv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:ha,type:t.type,key:s,ref:i,props:r,_owner:a}};re.createContext=function(t){return t={$$typeof:IE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TE,_context:t},t.Consumer=t};re.createElement=Tv;re.createFactory=function(t){var e=Tv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:SE,render:t}};re.isValidElement=xf;re.lazy=function(t){return{$$typeof:kE,_payload:{_status:-1,_result:t},_init:DE}};re.memo=function(t,e){return{$$typeof:jE,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=vl.transition;vl.transition={};try{t()}finally{vl.transition=e}};re.unstable_act=Iv;re.useCallback=function(t,e){return _t.current.useCallback(t,e)};re.useContext=function(t){return _t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};re.useEffect=function(t,e){return _t.current.useEffect(t,e)};re.useId=function(){return _t.current.useId()};re.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return _t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};re.useRef=function(t){return _t.current.useRef(t)};re.useState=function(t){return _t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return _t.current.useTransition()};re.version="18.3.1";vv.exports=re;var C=vv.exports;const Mc=_E(C),ME=xE({__proto__:null,default:Mc},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OE=C,VE=Symbol.for("react.element"),FE=Symbol.for("react.fragment"),UE=Object.prototype.hasOwnProperty,qE=OE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zE={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)UE.call(e,r)&&!zE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:VE,type:t,key:i,ref:a,props:s,_owner:qE.current}}Lc.Fragment=FE;Lc.jsx=Sv;Lc.jsxs=Sv;yv.exports=Lc;var o=yv.exports,Av={exports:{}},Ut={},jv={exports:{}},kv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,W){var J=$.length;$.push(W);e:for(;0<J;){var ue=J-1>>>1,me=$[ue];if(0<s(me,W))$[ue]=W,$[J]=me,J=ue;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var W=$[0],J=$.pop();if(J!==W){$[0]=J;e:for(var ue=0,me=$.length,xe=me>>>1;ue<xe;){var Nt=2*(ue+1)-1,Jt=$[Nt],Xt=Nt+1,Zt=$[Xt];if(0>s(Jt,J))Xt<me&&0>s(Zt,Jt)?($[ue]=Zt,$[Xt]=J,ue=Xt):($[ue]=Jt,$[Nt]=J,ue=Nt);else if(Xt<me&&0>s(Zt,J))$[ue]=Zt,$[Xt]=J,ue=Xt;else break e}}return W}function s($,W){var J=$.sortIndex-W.sortIndex;return J!==0?J:$.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,S=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var W=n(d);W!==null;){if(W.callback===null)r(d);else if(W.startTime<=$)r(d),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(d)}}function M($){if(k=!1,T($),!S)if(n(u)!==null)S=!0,Et(D);else{var W=n(d);W!==null&&tt(M,W.startTime-$)}}function D($,W){S=!1,k&&(k=!1,N(y),y=-1),w=!0;var J=g;try{for(T(W),m=n(u);m!==null&&(!(m.expirationTime>W)||$&&!j());){var ue=m.callback;if(typeof ue=="function"){m.callback=null,g=m.priorityLevel;var me=ue(m.expirationTime<=W);W=t.unstable_now(),typeof me=="function"?m.callback=me:m===n(u)&&r(u),T(W)}else r(u);m=n(u)}if(m!==null)var xe=!0;else{var Nt=n(d);Nt!==null&&tt(M,Nt.startTime-W),xe=!1}return xe}finally{m=null,g=J,w=!1}}var V=!1,A=null,y=-1,v=5,_=-1;function j(){return!(t.unstable_now()-_<v)}function P(){if(A!==null){var $=t.unstable_now();_=$;var W=!0;try{W=A(!0,$)}finally{W?b():(V=!1,A=null)}}else V=!1}var b;if(typeof E=="function")b=function(){E(P)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ve=se.port2;se.port1.onmessage=P,b=function(){Ve.postMessage(null)}}else b=function(){R(P,0)};function Et($){A=$,V||(V=!0,b())}function tt($,W){y=R(function(){$(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){S||w||(S=!0,Et(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var W=3;break;default:W=g}var J=g;g=W;try{return $()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,W){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return W()}finally{g=J}},t.unstable_scheduleCallback=function($,W,J){var ue=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=J+me,$={id:f++,callback:W,priorityLevel:$,startTime:J,expirationTime:me,sortIndex:-1},J>ue?($.sortIndex=J,e(d,$),n(u)===null&&$===n(d)&&(k?(N(y),y=-1):k=!0,tt(M,J-ue))):($.sortIndex=me,e(u,$),S||w||(S=!0,Et(D))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var W=g;return function(){var J=g;g=W;try{return $.apply(this,arguments)}finally{g=J}}}})(kv);jv.exports=kv;var BE=jv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=C,Ft=BE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cv=new Set,Do={};function _s(t,e){di(t,e),di(t+"Capture",e)}function di(t,e){for(Do[t]=e,t=0;t<e.length;t++)Cv.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zd=Object.prototype.hasOwnProperty,GE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bg={},Eg={};function HE(t){return zd.call(Eg,t)?!0:zd.call(bg,t)?!1:GE.test(t)?Eg[t]=!0:(bg[t]=!0,!1)}function WE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QE(t,e,n,r){if(e===null||typeof e>"u"||WE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ze[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var _f=/[\-:]([a-z])/g;function wf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_f,wf);Ze[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_f,wf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_f,wf);Ze[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function bf(t,e,n,r){var s=Ze.hasOwnProperty(e)?Ze[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QE(e,n,s,r)&&(n=null),r||s===null?HE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wa=Symbol.for("react.element"),Fs=Symbol.for("react.portal"),Us=Symbol.for("react.fragment"),Ef=Symbol.for("react.strict_mode"),Bd=Symbol.for("react.profiler"),Pv=Symbol.for("react.provider"),Rv=Symbol.for("react.context"),Nf=Symbol.for("react.forward_ref"),$d=Symbol.for("react.suspense"),Gd=Symbol.for("react.suspense_list"),Tf=Symbol.for("react.memo"),ar=Symbol.for("react.lazy"),Dv=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function Xi(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,$u;function ao(t){if($u===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$u=e&&e[1]||""}return`
`+$u+t}var Gu=!1;function Hu(t,e){if(!t||Gu)return"";Gu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{Gu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ao(t):""}function KE(t){switch(t.tag){case 5:return ao(t.type);case 16:return ao("Lazy");case 13:return ao("Suspense");case 19:return ao("SuspenseList");case 0:case 2:case 15:return t=Hu(t.type,!1),t;case 11:return t=Hu(t.type.render,!1),t;case 1:return t=Hu(t.type,!0),t;default:return""}}function Hd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Us:return"Fragment";case Fs:return"Portal";case Bd:return"Profiler";case Ef:return"StrictMode";case $d:return"Suspense";case Gd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rv:return(t.displayName||"Context")+".Consumer";case Pv:return(t._context.displayName||"Context")+".Provider";case Nf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tf:return e=t.displayName||null,e!==null?e:Hd(t.type)||"Memo";case ar:e=t._payload,t=t._init;try{return Hd(t(e))}catch{}}return null}function YE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hd(e);case 8:return e===Ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JE(t){var e=Lv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Qa(t){t._valueTracker||(t._valueTracker=JE(t))}function Mv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Lv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ql(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wd(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ov(t,e){e=e.checked,e!=null&&bf(t,"checked",e,!1)}function Qd(t,e){Ov(t,e);var n=kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Kd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Kd(t,e.type,kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ig(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Kd(t,e,n){(e!=="number"||ql(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lo=Array.isArray;function Xs(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Sg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(lo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:kr(n)}}function Vv(t,e){var n=kr(e.value),r=kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ag(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ka,Uv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ka=Ka||document.createElement("div"),Ka.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ka.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XE=["Webkit","ms","Moz","O"];Object.keys(xo).forEach(function(t){XE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xo[e]=xo[t]})});function qv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||xo.hasOwnProperty(t)&&xo[t]?(""+e).trim():e+"px"}function zv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ZE=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xd(t,e){if(e){if(ZE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Zd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eh=null;function If(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var th=null,Zs=null,ei=null;function jg(t){if(t=pa(t)){if(typeof th!="function")throw Error(z(280));var e=t.stateNode;e&&(e=qc(e),th(t.stateNode,t.type,e))}}function Bv(t){Zs?ei?ei.push(t):ei=[t]:Zs=t}function $v(){if(Zs){var t=Zs,e=ei;if(ei=Zs=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function Gv(t,e){return t(e)}function Hv(){}var Wu=!1;function Wv(t,e,n){if(Wu)return t(e,n);Wu=!0;try{return Gv(t,e,n)}finally{Wu=!1,(Zs!==null||ei!==null)&&(Hv(),$v())}}function Mo(t,e){var n=t.stateNode;if(n===null)return null;var r=qc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var nh=!1;if($n)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){nh=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{nh=!1}function e2(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var _o=!1,zl=null,Bl=!1,rh=null,t2={onError:function(t){_o=!0,zl=t}};function n2(t,e,n,r,s,i,a,c,u){_o=!1,zl=null,e2.apply(t2,arguments)}function r2(t,e,n,r,s,i,a,c,u){if(n2.apply(this,arguments),_o){if(_o){var d=zl;_o=!1,zl=null}else throw Error(z(198));Bl||(Bl=!0,rh=d)}}function ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kg(t){if(ws(t)!==t)throw Error(z(188))}function s2(t){var e=t.alternate;if(!e){if(e=ws(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kg(s),t;if(i===r)return kg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Kv(t){return t=s2(t),t!==null?Yv(t):null}function Yv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yv(t);if(e!==null)return e;t=t.sibling}return null}var Jv=Ft.unstable_scheduleCallback,Cg=Ft.unstable_cancelCallback,i2=Ft.unstable_shouldYield,o2=Ft.unstable_requestPaint,Re=Ft.unstable_now,a2=Ft.unstable_getCurrentPriorityLevel,Sf=Ft.unstable_ImmediatePriority,Xv=Ft.unstable_UserBlockingPriority,$l=Ft.unstable_NormalPriority,l2=Ft.unstable_LowPriority,Zv=Ft.unstable_IdlePriority,Oc=null,wn=null;function c2(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(Oc,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:h2,u2=Math.log,d2=Math.LN2;function h2(t){return t>>>=0,t===0?32:31-(u2(t)/d2|0)|0}var Ya=64,Ja=4194304;function co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=co(c):(i&=a,i!==0&&(r=co(i)))}else a=n&~s,a!==0?r=co(a):i!==0&&(r=co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function f2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-an(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=f2(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ex(){var t=Ya;return Ya<<=1,!(Ya&4194240)&&(Ya=64),t}function Qu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function p2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function tx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nx,jf,rx,sx,ix,ih=!1,Xa=[],vr=null,xr=null,_r=null,Oo=new Map,Vo=new Map,cr=[],g2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Oo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(e.pointerId)}}function eo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=pa(e),e!==null&&jf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function y2(t,e,n,r,s){switch(e){case"focusin":return vr=eo(vr,t,e,n,r,s),!0;case"dragenter":return xr=eo(xr,t,e,n,r,s),!0;case"mouseover":return _r=eo(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Oo.set(i,eo(Oo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vo.set(i,eo(Vo.get(i)||null,t,e,n,r,s)),!0}return!1}function ox(t){var e=Jr(t.target);if(e!==null){var n=ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Qv(n),e!==null){t.blockedOn=e,ix(t.priority,function(){rx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);eh=r,n.target.dispatchEvent(r),eh=null}else return e=pa(n),e!==null&&jf(e),t.blockedOn=n,!1;e.shift()}return!0}function Rg(t,e,n){xl(t)&&n.delete(e)}function v2(){ih=!1,vr!==null&&xl(vr)&&(vr=null),xr!==null&&xl(xr)&&(xr=null),_r!==null&&xl(_r)&&(_r=null),Oo.forEach(Rg),Vo.forEach(Rg)}function to(t,e){t.blockedOn===e&&(t.blockedOn=null,ih||(ih=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,v2)))}function Fo(t){function e(s){return to(s,t)}if(0<Xa.length){to(Xa[0],t);for(var n=1;n<Xa.length;n++){var r=Xa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&to(vr,t),xr!==null&&to(xr,t),_r!==null&&to(_r,t),Oo.forEach(e),Vo.forEach(e),n=0;n<cr.length;n++)r=cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<cr.length&&(n=cr[0],n.blockedOn===null);)ox(n),n.blockedOn===null&&cr.shift()}var ti=Xn.ReactCurrentBatchConfig,Hl=!0;function x2(t,e,n,r){var s=pe,i=ti.transition;ti.transition=null;try{pe=1,kf(t,e,n,r)}finally{pe=s,ti.transition=i}}function _2(t,e,n,r){var s=pe,i=ti.transition;ti.transition=null;try{pe=4,kf(t,e,n,r)}finally{pe=s,ti.transition=i}}function kf(t,e,n,r){if(Hl){var s=oh(t,e,n,r);if(s===null)sd(t,e,r,Wl,n),Pg(t,r);else if(y2(s,t,e,n,r))r.stopPropagation();else if(Pg(t,r),e&4&&-1<g2.indexOf(t)){for(;s!==null;){var i=pa(s);if(i!==null&&nx(i),i=oh(t,e,n,r),i===null&&sd(t,e,r,Wl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sd(t,e,r,null,n)}}var Wl=null;function oh(t,e,n,r){if(Wl=null,t=If(r),t=Jr(t),t!==null)if(e=ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wl=t,null}function ax(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(a2()){case Sf:return 1;case Xv:return 4;case $l:case l2:return 16;case Zv:return 536870912;default:return 16}default:return 16}}var mr=null,Cf=null,_l=null;function lx(){if(_l)return _l;var t,e=Cf,n=e.length,r,s="value"in mr?mr.value:mr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return _l=s.slice(t,1<r?1-r:void 0)}function wl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Za(){return!0}function Dg(){return!1}function qt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Za:Dg,this.isPropagationStopped=Dg,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Za)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Za)},persist:function(){},isPersistent:Za}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=qt(Ii),ma=Ae({},Ii,{view:0,detail:0}),w2=qt(ma),Ku,Yu,no,Vc=Ae({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==no&&(no&&t.type==="mousemove"?(Ku=t.screenX-no.screenX,Yu=t.screenY-no.screenY):Yu=Ku=0,no=t),Ku)},movementY:function(t){return"movementY"in t?t.movementY:Yu}}),Lg=qt(Vc),b2=Ae({},Vc,{dataTransfer:0}),E2=qt(b2),N2=Ae({},ma,{relatedTarget:0}),Ju=qt(N2),T2=Ae({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),I2=qt(T2),S2=Ae({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A2=qt(S2),j2=Ae({},Ii,{data:0}),Mg=qt(j2),k2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=P2[t])?!!e[t]:!1}function Rf(){return R2}var D2=Ae({},ma,{key:function(t){if(t.key){var e=k2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?C2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(t){return t.type==="keypress"?wl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),L2=qt(D2),M2=Ae({},Vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=qt(M2),O2=Ae({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),V2=qt(O2),F2=Ae({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),U2=qt(F2),q2=Ae({},Vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),z2=qt(q2),B2=[9,13,27,32],Df=$n&&"CompositionEvent"in window,wo=null;$n&&"documentMode"in document&&(wo=document.documentMode);var $2=$n&&"TextEvent"in window&&!wo,cx=$n&&(!Df||wo&&8<wo&&11>=wo),Vg=" ",Fg=!1;function ux(t,e){switch(t){case"keyup":return B2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function G2(t,e){switch(t){case"compositionend":return dx(e);case"keypress":return e.which!==32?null:(Fg=!0,Vg);case"textInput":return t=e.data,t===Vg&&Fg?null:t;default:return null}}function H2(t,e){if(qs)return t==="compositionend"||!Df&&ux(t,e)?(t=lx(),_l=Cf=mr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cx&&e.locale!=="ko"?null:e.data;default:return null}}var W2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!W2[t.type]:e==="textarea"}function hx(t,e,n,r){Bv(r),e=Ql(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bo=null,Uo=null;function Q2(t){Ex(t,0)}function Fc(t){var e=$s(t);if(Mv(e))return t}function K2(t,e){if(t==="change")return e}var fx=!1;if($n){var Xu;if($n){var Zu="oninput"in document;if(!Zu){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),Zu=typeof qg.oninput=="function"}Xu=Zu}else Xu=!1;fx=Xu&&(!document.documentMode||9<document.documentMode)}function zg(){bo&&(bo.detachEvent("onpropertychange",mx),Uo=bo=null)}function mx(t){if(t.propertyName==="value"&&Fc(Uo)){var e=[];hx(e,Uo,t,If(t)),Wv(Q2,e)}}function Y2(t,e,n){t==="focusin"?(zg(),bo=e,Uo=n,bo.attachEvent("onpropertychange",mx)):t==="focusout"&&zg()}function J2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fc(Uo)}function X2(t,e){if(t==="click")return Fc(e)}function Z2(t,e){if(t==="input"||t==="change")return Fc(e)}function eN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var un=typeof Object.is=="function"?Object.is:eN;function qo(t,e){if(un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zd.call(e,s)||!un(t[s],e[s]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=Bg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bg(n)}}function px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gx(){for(var t=window,e=ql();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ql(t.document)}return e}function Lf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function tN(t){var e=gx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(r!==null&&Lf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$g(n,i);var a=$g(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nN=$n&&"documentMode"in document&&11>=document.documentMode,zs=null,ah=null,Eo=null,lh=!1;function Gg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;lh||zs==null||zs!==ql(r)||(r=zs,"selectionStart"in r&&Lf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eo&&qo(Eo,r)||(Eo=r,r=Ql(ah,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zs)))}function el(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:el("Animation","AnimationEnd"),animationiteration:el("Animation","AnimationIteration"),animationstart:el("Animation","AnimationStart"),transitionend:el("Transition","TransitionEnd")},ed={},yx={};$n&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Uc(t){if(ed[t])return ed[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yx)return ed[t]=e[n];return t}var vx=Uc("animationend"),xx=Uc("animationiteration"),_x=Uc("animationstart"),wx=Uc("transitionend"),bx=new Map,Hg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){bx.set(t,e),_s(e,[t])}for(var td=0;td<Hg.length;td++){var nd=Hg[td],rN=nd.toLowerCase(),sN=nd[0].toUpperCase()+nd.slice(1);Lr(rN,"on"+sN)}Lr(vx,"onAnimationEnd");Lr(xx,"onAnimationIteration");Lr(_x,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(wx,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iN=new Set("cancel close invalid load scroll toggle".split(" ").concat(uo));function Wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,r2(r,e,void 0,t),t.currentTarget=null}function Ex(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Wg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Wg(s,c,d),i=u}}}if(Bl)throw t=rh,Bl=!1,rh=null,t}function we(t,e){var n=e[fh];n===void 0&&(n=e[fh]=new Set);var r=t+"__bubble";n.has(r)||(Nx(e,t,2,!1),n.add(r))}function rd(t,e,n){var r=0;e&&(r|=4),Nx(n,t,r,e)}var tl="_reactListening"+Math.random().toString(36).slice(2);function zo(t){if(!t[tl]){t[tl]=!0,Cv.forEach(function(n){n!=="selectionchange"&&(iN.has(n)||rd(n,!1,t),rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tl]||(e[tl]=!0,rd("selectionchange",!1,e))}}function Nx(t,e,n,r){switch(ax(e)){case 1:var s=x2;break;case 4:s=_2;break;default:s=kf}n=s.bind(null,e,n,t),s=void 0,!nh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Jr(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Wv(function(){var d=i,f=If(n),m=[];e:{var g=bx.get(t);if(g!==void 0){var w=Pf,S=t;switch(t){case"keypress":if(wl(n)===0)break e;case"keydown":case"keyup":w=L2;break;case"focusin":S="focus",w=Ju;break;case"focusout":S="blur",w=Ju;break;case"beforeblur":case"afterblur":w=Ju;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=E2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=V2;break;case vx:case xx:case _x:w=I2;break;case wx:w=U2;break;case"scroll":w=w2;break;case"wheel":w=z2;break;case"copy":case"cut":case"paste":w=A2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Og}var k=(e&4)!==0,R=!k&&t==="scroll",N=k?g!==null?g+"Capture":null:g;k=[];for(var E=d,T;E!==null;){T=E;var M=T.stateNode;if(T.tag===5&&M!==null&&(T=M,N!==null&&(M=Mo(E,N),M!=null&&k.push(Bo(E,M,T)))),R)break;E=E.return}0<k.length&&(g=new w(g,S,null,n,f),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==eh&&(S=n.relatedTarget||n.fromElement)&&(Jr(S)||S[Gn]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(S=n.relatedTarget||n.toElement,w=d,S=S?Jr(S):null,S!==null&&(R=ws(S),S!==R||S.tag!==5&&S.tag!==6)&&(S=null)):(w=null,S=d),w!==S)){if(k=Lg,M="onMouseLeave",N="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=Og,M="onPointerLeave",N="onPointerEnter",E="pointer"),R=w==null?g:$s(w),T=S==null?g:$s(S),g=new k(M,E+"leave",w,n,f),g.target=R,g.relatedTarget=T,M=null,Jr(f)===d&&(k=new k(N,E+"enter",S,n,f),k.target=T,k.relatedTarget=R,M=k),R=M,w&&S)t:{for(k=w,N=S,E=0,T=k;T;T=Ls(T))E++;for(T=0,M=N;M;M=Ls(M))T++;for(;0<E-T;)k=Ls(k),E--;for(;0<T-E;)N=Ls(N),T--;for(;E--;){if(k===N||N!==null&&k===N.alternate)break t;k=Ls(k),N=Ls(N)}k=null}else k=null;w!==null&&Qg(m,g,w,k,!1),S!==null&&R!==null&&Qg(m,R,S,k,!0)}}e:{if(g=d?$s(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var D=K2;else if(Ug(g))if(fx)D=Z2;else{D=J2;var V=Y2}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=X2);if(D&&(D=D(t,d))){hx(m,D,n,f);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&Kd(g,"number",g.value)}switch(V=d?$s(d):window,t){case"focusin":(Ug(V)||V.contentEditable==="true")&&(zs=V,ah=d,Eo=null);break;case"focusout":Eo=ah=zs=null;break;case"mousedown":lh=!0;break;case"contextmenu":case"mouseup":case"dragend":lh=!1,Gg(m,n,f);break;case"selectionchange":if(nN)break;case"keydown":case"keyup":Gg(m,n,f)}var A;if(Df)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qs?ux(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(cx&&n.locale!=="ko"&&(qs||y!=="onCompositionStart"?y==="onCompositionEnd"&&qs&&(A=lx()):(mr=f,Cf="value"in mr?mr.value:mr.textContent,qs=!0)),V=Ql(d,y),0<V.length&&(y=new Mg(y,t,null,n,f),m.push({event:y,listeners:V}),A?y.data=A:(A=dx(n),A!==null&&(y.data=A)))),(A=$2?G2(t,n):H2(t,n))&&(d=Ql(d,"onBeforeInput"),0<d.length&&(f=new Mg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=A))}Ex(m,e)})}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ql(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Mo(t,n),i!=null&&r.unshift(Bo(t,i,s)),i=Mo(t,e),i!=null&&r.push(Bo(t,i,s))),t=t.return}return r}function Ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Mo(n,i),u!=null&&a.unshift(Bo(n,u,c))):s||(u=Mo(n,i),u!=null&&a.push(Bo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var oN=/\r\n?/g,aN=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(oN,`
`).replace(aN,"")}function nl(t,e,n){if(e=Kg(e),Kg(t)!==e&&n)throw Error(z(425))}function Kl(){}var ch=null,uh=null;function dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hh=typeof setTimeout=="function"?setTimeout:void 0,lN=typeof clearTimeout=="function"?clearTimeout:void 0,Yg=typeof Promise=="function"?Promise:void 0,cN=typeof queueMicrotask=="function"?queueMicrotask:typeof Yg<"u"?function(t){return Yg.resolve(null).then(t).catch(uN)}:hh;function uN(t){setTimeout(function(){throw t})}function id(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),_n="__reactFiber$"+Si,$o="__reactProps$"+Si,Gn="__reactContainer$"+Si,fh="__reactEvents$"+Si,dN="__reactListeners$"+Si,hN="__reactHandles$"+Si;function Jr(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gn]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jg(t);t!==null;){if(n=t[_n])return n;t=Jg(t)}return e}t=n,n=t.parentNode}return null}function pa(t){return t=t[_n]||t[Gn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function qc(t){return t[$o]||null}var mh=[],Gs=-1;function Mr(t){return{current:t}}function Ee(t){0>Gs||(t.current=mh[Gs],mh[Gs]=null,Gs--)}function ve(t,e){Gs++,mh[Gs]=t.current,t.current=e}var Cr={},ht=Mr(Cr),At=Mr(!1),os=Cr;function hi(t,e){var n=t.type.contextTypes;if(!n)return Cr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Yl(){Ee(At),Ee(ht)}function Xg(t,e,n){if(ht.current!==Cr)throw Error(z(168));ve(ht,e),ve(At,n)}function Tx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,YE(t)||"Unknown",s));return Ae({},n,r)}function Jl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cr,os=ht.current,ve(ht,t),ve(At,At.current),!0}function Zg(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Tx(t,e,os),r.__reactInternalMemoizedMergedChildContext=t,Ee(At),Ee(ht),ve(ht,t)):Ee(At),ve(At,n)}var Cn=null,zc=!1,od=!1;function Ix(t){Cn===null?Cn=[t]:Cn.push(t)}function fN(t){zc=!0,Ix(t)}function Or(){if(!od&&Cn!==null){od=!0;var t=0,e=pe;try{var n=Cn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,zc=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),Jv(Sf,Or),s}finally{pe=e,od=!1}}return null}var Hs=[],Ws=0,Xl=null,Zl=0,zt=[],Bt=0,as=null,Ln=1,Mn="";function Qr(t,e){Hs[Ws++]=Zl,Hs[Ws++]=Xl,Xl=t,Zl=e}function Sx(t,e,n){zt[Bt++]=Ln,zt[Bt++]=Mn,zt[Bt++]=as,as=t;var r=Ln;t=Mn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ln=1<<32-an(e)+s|n<<s|r,Mn=i+t}else Ln=1<<i|n<<s|r,Mn=t}function Mf(t){t.return!==null&&(Qr(t,1),Sx(t,1,0))}function Of(t){for(;t===Xl;)Xl=Hs[--Ws],Hs[Ws]=null,Zl=Hs[--Ws],Hs[Ws]=null;for(;t===as;)as=zt[--Bt],zt[Bt]=null,Mn=zt[--Bt],zt[Bt]=null,Ln=zt[--Bt],zt[Bt]=null}var Ot=null,Lt=null,Ne=!1,sn=null;function Ax(t,e){var n=$t(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function e0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Lt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=as!==null?{id:Ln,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=$t(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Lt=null,!0):!1;default:return!1}}function ph(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gh(t){if(Ne){var e=Lt;if(e){var n=e;if(!e0(t,e)){if(ph(t))throw Error(z(418));e=wr(n.nextSibling);var r=Ot;e&&e0(t,e)?Ax(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Ot=t)}}else{if(ph(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ne=!1,Ot=t}}}function t0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function rl(t){if(t!==Ot)return!1;if(!Ne)return t0(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!dh(t.type,t.memoizedProps)),e&&(e=Lt)){if(ph(t))throw jx(),Error(z(418));for(;e;)Ax(t,e),e=wr(e.nextSibling)}if(t0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ot?wr(t.stateNode.nextSibling):null;return!0}function jx(){for(var t=Lt;t;)t=wr(t.nextSibling)}function fi(){Lt=Ot=null,Ne=!1}function Vf(t){sn===null?sn=[t]:sn.push(t)}var mN=Xn.ReactCurrentBatchConfig;function ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function sl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function n0(t){var e=t._init;return e(t._payload)}function kx(t){function e(N,E){if(t){var T=N.deletions;T===null?(N.deletions=[E],N.flags|=16):T.push(E)}}function n(N,E){if(!t)return null;for(;E!==null;)e(N,E),E=E.sibling;return null}function r(N,E){for(N=new Map;E!==null;)E.key!==null?N.set(E.key,E):N.set(E.index,E),E=E.sibling;return N}function s(N,E){return N=Tr(N,E),N.index=0,N.sibling=null,N}function i(N,E,T){return N.index=T,t?(T=N.alternate,T!==null?(T=T.index,T<E?(N.flags|=2,E):T):(N.flags|=2,E)):(N.flags|=1048576,E)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function c(N,E,T,M){return E===null||E.tag!==6?(E=fd(T,N.mode,M),E.return=N,E):(E=s(E,T),E.return=N,E)}function u(N,E,T,M){var D=T.type;return D===Us?f(N,E,T.props.children,M,T.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&n0(D)===E.type)?(M=s(E,T.props),M.ref=ro(N,E,T),M.return=N,M):(M=Al(T.type,T.key,T.props,null,N.mode,M),M.ref=ro(N,E,T),M.return=N,M)}function d(N,E,T,M){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=md(T,N.mode,M),E.return=N,E):(E=s(E,T.children||[]),E.return=N,E)}function f(N,E,T,M,D){return E===null||E.tag!==7?(E=ss(T,N.mode,M,D),E.return=N,E):(E=s(E,T),E.return=N,E)}function m(N,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=fd(""+E,N.mode,T),E.return=N,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wa:return T=Al(E.type,E.key,E.props,null,N.mode,T),T.ref=ro(N,null,E),T.return=N,T;case Fs:return E=md(E,N.mode,T),E.return=N,E;case ar:var M=E._init;return m(N,M(E._payload),T)}if(lo(E)||Xi(E))return E=ss(E,N.mode,T,null),E.return=N,E;sl(N,E)}return null}function g(N,E,T,M){var D=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:c(N,E,""+T,M);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wa:return T.key===D?u(N,E,T,M):null;case Fs:return T.key===D?d(N,E,T,M):null;case ar:return D=T._init,g(N,E,D(T._payload),M)}if(lo(T)||Xi(T))return D!==null?null:f(N,E,T,M,null);sl(N,T)}return null}function w(N,E,T,M,D){if(typeof M=="string"&&M!==""||typeof M=="number")return N=N.get(T)||null,c(E,N,""+M,D);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Wa:return N=N.get(M.key===null?T:M.key)||null,u(E,N,M,D);case Fs:return N=N.get(M.key===null?T:M.key)||null,d(E,N,M,D);case ar:var V=M._init;return w(N,E,T,V(M._payload),D)}if(lo(M)||Xi(M))return N=N.get(T)||null,f(E,N,M,D,null);sl(E,M)}return null}function S(N,E,T,M){for(var D=null,V=null,A=E,y=E=0,v=null;A!==null&&y<T.length;y++){A.index>y?(v=A,A=null):v=A.sibling;var _=g(N,A,T[y],M);if(_===null){A===null&&(A=v);break}t&&A&&_.alternate===null&&e(N,A),E=i(_,E,y),V===null?D=_:V.sibling=_,V=_,A=v}if(y===T.length)return n(N,A),Ne&&Qr(N,y),D;if(A===null){for(;y<T.length;y++)A=m(N,T[y],M),A!==null&&(E=i(A,E,y),V===null?D=A:V.sibling=A,V=A);return Ne&&Qr(N,y),D}for(A=r(N,A);y<T.length;y++)v=w(A,N,y,T[y],M),v!==null&&(t&&v.alternate!==null&&A.delete(v.key===null?y:v.key),E=i(v,E,y),V===null?D=v:V.sibling=v,V=v);return t&&A.forEach(function(j){return e(N,j)}),Ne&&Qr(N,y),D}function k(N,E,T,M){var D=Xi(T);if(typeof D!="function")throw Error(z(150));if(T=D.call(T),T==null)throw Error(z(151));for(var V=D=null,A=E,y=E=0,v=null,_=T.next();A!==null&&!_.done;y++,_=T.next()){A.index>y?(v=A,A=null):v=A.sibling;var j=g(N,A,_.value,M);if(j===null){A===null&&(A=v);break}t&&A&&j.alternate===null&&e(N,A),E=i(j,E,y),V===null?D=j:V.sibling=j,V=j,A=v}if(_.done)return n(N,A),Ne&&Qr(N,y),D;if(A===null){for(;!_.done;y++,_=T.next())_=m(N,_.value,M),_!==null&&(E=i(_,E,y),V===null?D=_:V.sibling=_,V=_);return Ne&&Qr(N,y),D}for(A=r(N,A);!_.done;y++,_=T.next())_=w(A,N,y,_.value,M),_!==null&&(t&&_.alternate!==null&&A.delete(_.key===null?y:_.key),E=i(_,E,y),V===null?D=_:V.sibling=_,V=_);return t&&A.forEach(function(P){return e(N,P)}),Ne&&Qr(N,y),D}function R(N,E,T,M){if(typeof T=="object"&&T!==null&&T.type===Us&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Wa:e:{for(var D=T.key,V=E;V!==null;){if(V.key===D){if(D=T.type,D===Us){if(V.tag===7){n(N,V.sibling),E=s(V,T.props.children),E.return=N,N=E;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===ar&&n0(D)===V.type){n(N,V.sibling),E=s(V,T.props),E.ref=ro(N,V,T),E.return=N,N=E;break e}n(N,V);break}else e(N,V);V=V.sibling}T.type===Us?(E=ss(T.props.children,N.mode,M,T.key),E.return=N,N=E):(M=Al(T.type,T.key,T.props,null,N.mode,M),M.ref=ro(N,E,T),M.return=N,N=M)}return a(N);case Fs:e:{for(V=T.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(N,E.sibling),E=s(E,T.children||[]),E.return=N,N=E;break e}else{n(N,E);break}else e(N,E);E=E.sibling}E=md(T,N.mode,M),E.return=N,N=E}return a(N);case ar:return V=T._init,R(N,E,V(T._payload),M)}if(lo(T))return S(N,E,T,M);if(Xi(T))return k(N,E,T,M);sl(N,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(N,E.sibling),E=s(E,T),E.return=N,N=E):(n(N,E),E=fd(T,N.mode,M),E.return=N,N=E),a(N)):n(N,E)}return R}var mi=kx(!0),Cx=kx(!1),ec=Mr(null),tc=null,Qs=null,Ff=null;function Uf(){Ff=Qs=tc=null}function qf(t){var e=ec.current;Ee(ec),t._currentValue=e}function yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ni(t,e){tc=t,Ff=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(Ff!==t)if(t={context:t,memoizedValue:e,next:null},Qs===null){if(tc===null)throw Error(z(308));Qs=t,tc.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return e}var Xr=null;function zf(t){Xr===null?Xr=[t]:Xr.push(t)}function Px(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,zf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function Bf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function br(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,zf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function r0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function nc(t,e,n,r){var s=t.updateQueue;lr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var S=t,k=c;switch(g=e,w=n,k.tag){case 1:if(S=k.payload,typeof S=="function"){m=S.call(w,m,g);break e}m=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=k.payload,g=typeof S=="function"?S.call(w,m,g):S,g==null)break e;m=Ae({},m,g);break e;case 2:lr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);cs|=a,t.lanes=a,t.memoizedState=m}}function s0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var ga={},bn=Mr(ga),Go=Mr(ga),Ho=Mr(ga);function Zr(t){if(t===ga)throw Error(z(174));return t}function $f(t,e){switch(ve(Ho,e),ve(Go,t),ve(bn,ga),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jd(e,t)}Ee(bn),ve(bn,e)}function pi(){Ee(bn),Ee(Go),Ee(Ho)}function Dx(t){Zr(Ho.current);var e=Zr(bn.current),n=Jd(e,t.type);e!==n&&(ve(Go,t),ve(bn,n))}function Gf(t){Go.current===t&&(Ee(bn),Ee(Go))}var Ie=Mr(0);function rc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ad=[];function Hf(){for(var t=0;t<ad.length;t++)ad[t]._workInProgressVersionPrimary=null;ad.length=0}var El=Xn.ReactCurrentDispatcher,ld=Xn.ReactCurrentBatchConfig,ls=0,Se=null,Ue=null,Ge=null,sc=!1,No=!1,Wo=0,pN=0;function it(){throw Error(z(321))}function Wf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!un(t[n],e[n]))return!1;return!0}function Qf(t,e,n,r,s,i){if(ls=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,El.current=t===null||t.memoizedState===null?xN:_N,t=n(r,s),No){i=0;do{if(No=!1,Wo=0,25<=i)throw Error(z(301));i+=1,Ge=Ue=null,e.updateQueue=null,El.current=wN,t=n(r,s)}while(No)}if(El.current=ic,e=Ue!==null&&Ue.next!==null,ls=0,Ge=Ue=Se=null,sc=!1,e)throw Error(z(300));return t}function Kf(){var t=Wo!==0;return Wo=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Kt(){if(Ue===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Ge===null?Se.memoizedState:Ge.next;if(e!==null)Ge=e,Ue=t;else{if(t===null)throw Error(z(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Qo(t,e){return typeof e=="function"?e(t):e}function cd(t){var e=Kt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((ls&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,Se.lanes|=f,cs|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,un(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ud(t){var e=Kt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);un(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Lx(){}function Mx(t,e){var n=Se,r=Kt(),s=e(),i=!un(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,Yf(Fx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Ko(9,Vx.bind(null,n,r,s,e),void 0,null),He===null)throw Error(z(349));ls&30||Ox(n,e,s)}return s}function Ox(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Vx(t,e,n,r){e.value=n,e.getSnapshot=r,Ux(e)&&qx(t)}function Fx(t,e,n){return n(function(){Ux(e)&&qx(t)})}function Ux(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!un(t,n)}catch{return!0}}function qx(t){var e=Hn(t,1);e!==null&&ln(e,t,1,-1)}function i0(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:t},e.queue=t,t=t.dispatch=vN.bind(null,Se,t),[e.memoizedState,t]}function Ko(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zx(){return Kt().memoizedState}function Nl(t,e,n,r){var s=vn();Se.flags|=t,s.memoizedState=Ko(1|e,n,void 0,r===void 0?null:r)}function Bc(t,e,n,r){var s=Kt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var a=Ue.memoizedState;if(i=a.destroy,r!==null&&Wf(r,a.deps)){s.memoizedState=Ko(e,n,i,r);return}}Se.flags|=t,s.memoizedState=Ko(1|e,n,i,r)}function o0(t,e){return Nl(8390656,8,t,e)}function Yf(t,e){return Bc(2048,8,t,e)}function Bx(t,e){return Bc(4,2,t,e)}function $x(t,e){return Bc(4,4,t,e)}function Gx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hx(t,e,n){return n=n!=null?n.concat([t]):null,Bc(4,4,Gx.bind(null,e,t),n)}function Jf(){}function Wx(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qx(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return ls&21?(un(n,e)||(n=ex(),Se.lanes|=n,cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function gN(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=ld.transition;ld.transition={};try{t(!1),e()}finally{pe=n,ld.transition=r}}function Yx(){return Kt().memoizedState}function yN(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jx(t))Xx(e,n);else if(n=Px(t,e,n,r),n!==null){var s=vt();ln(n,t,r,s),Zx(n,e,r)}}function vN(t,e,n){var r=Nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jx(t))Xx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,un(c,a)){var u=e.interleaved;u===null?(s.next=s,zf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Px(t,e,s,r),n!==null&&(s=vt(),ln(n,t,r,s),Zx(n,e,r))}}function Jx(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Xx(t,e){No=sc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var ic={readContext:Qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},xN={readContext:Qt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:o0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nl(4194308,4,Gx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=yN.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:i0,useDebugValue:Jf,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=i0(!1),e=t[0];return t=gN.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=vn();if(Ne){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),He===null)throw Error(z(349));ls&30||Ox(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,o0(Fx.bind(null,r,i,t),[t]),r.flags|=2048,Ko(9,Vx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=He.identifierPrefix;if(Ne){var n=Mn,r=Ln;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_N={readContext:Qt,useCallback:Wx,useContext:Qt,useEffect:Yf,useImperativeHandle:Hx,useInsertionEffect:Bx,useLayoutEffect:$x,useMemo:Qx,useReducer:cd,useRef:zx,useState:function(){return cd(Qo)},useDebugValue:Jf,useDeferredValue:function(t){var e=Kt();return Kx(e,Ue.memoizedState,t)},useTransition:function(){var t=cd(Qo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Yx,unstable_isNewReconciler:!1},wN={readContext:Qt,useCallback:Wx,useContext:Qt,useEffect:Yf,useImperativeHandle:Hx,useInsertionEffect:Bx,useLayoutEffect:$x,useMemo:Qx,useReducer:ud,useRef:zx,useState:function(){return ud(Qo)},useDebugValue:Jf,useDeferredValue:function(t){var e=Kt();return Ue===null?e.memoizedState=t:Kx(e,Ue.memoizedState,t)},useTransition:function(){var t=ud(Qo)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:Lx,useSyncExternalStore:Mx,useId:Yx,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function vh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $c={isMounted:function(t){return(t=t._reactInternals)?ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Nr(t),i=qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),bl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vt(),s=Nr(t),i=qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=br(t,i,s),e!==null&&(ln(e,t,s,r),bl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vt(),r=Nr(t),s=qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=br(t,s,r),e!==null&&(ln(e,t,r,n),bl(e,t,r))}};function a0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!qo(n,r)||!qo(s,i):!0}function e_(t,e,n){var r=!1,s=Cr,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=jt(e)?os:ht.current,r=e.contextTypes,i=(r=r!=null)?hi(t,s):Cr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$c,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$c.enqueueReplaceState(e,e.state,null)}function xh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=jt(e)?os:ht.current,s.context=hi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$c.enqueueReplaceState(s,s.state,null),nc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gi(t,e){try{var n="",r=e;do n+=KE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _h(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bN=typeof WeakMap=="function"?WeakMap:Map;function t_(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ac||(ac=!0,kh=r),_h(t,e)},n}function n_(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_h(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_h(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function c0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=MN.bind(null,t,e,n),e.then(t,t))}function u0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function d0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,br(n,e,1))),n.lanes|=1),t)}var EN=Xn.ReactCurrentOwner,St=!1;function gt(t,e,n,r){e.child=t===null?Cx(e,null,n,r):mi(e,t.child,n,r)}function h0(t,e,n,r,s){n=n.render;var i=e.ref;return ni(e,s),r=Qf(t,e,n,r,i,s),n=Kf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&n&&Mf(e),e.flags|=1,gt(t,e,r,s),e.child)}function f0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!im(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,r_(t,e,i,r,s)):(t=Al(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:qo,n(a,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Tr(i,r),t.ref=e.ref,t.return=e,e.child=t}function r_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(qo(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return wh(t,e,n,r,s)}function s_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Ys,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(Ys,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(Ys,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(Ys,Dt),Dt|=r;return gt(t,e,s,n),e.child}function i_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function wh(t,e,n,r,s){var i=jt(n)?os:ht.current;return i=hi(e,i),ni(e,s),n=Qf(t,e,n,r,i,s),r=Kf(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ne&&r&&Mf(e),e.flags|=1,gt(t,e,n,s),e.child)}function m0(t,e,n,r,s){if(jt(n)){var i=!0;Jl(e)}else i=!1;if(ni(e,s),e.stateNode===null)Tl(t,e),e_(e,n,r),xh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=jt(n)?os:ht.current,d=hi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&l0(e,a,r,d),lr=!1;var g=e.memoizedState;a.state=g,nc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||At.current||lr?(typeof f=="function"&&(vh(e,n,f,r),u=e.memoizedState),(c=lr||a0(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Rx(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:nn(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Qt(u):(u=jt(n)?os:ht.current,u=hi(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&l0(e,a,r,u),lr=!1,g=e.memoizedState,a.state=g,nc(e,r,a,s);var S=e.memoizedState;c!==m||g!==S||At.current||lr?(typeof w=="function"&&(vh(e,n,w,r),S=e.memoizedState),(d=lr||a0(e,n,d,r,g,S,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,S,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,S,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),a.props=r,a.state=S,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return bh(t,e,n,r,i,s)}function bh(t,e,n,r,s,i){i_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Zg(e,n,!1),Wn(t,e,i);r=e.stateNode,EN.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=mi(e,t.child,null,i),e.child=mi(e,null,c,i)):gt(t,e,c,i),e.memoizedState=r.state,s&&Zg(e,n,!0),e.child}function o_(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),$f(t,e.containerInfo)}function p0(t,e,n,r,s){return fi(),Vf(s),e.flags|=256,gt(t,e,n,r),e.child}var Eh={dehydrated:null,treeContext:null,retryLane:0};function Nh(t){return{baseLanes:t,cachePool:null,transitions:null}}function a_(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Ie,s&1),t===null)return gh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Wc(a,r,0,null),t=ss(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nh(n),e.memoizedState=Eh,t):Xf(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return NN(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Tr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Tr(c,i):(i=ss(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Nh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Eh,r}return i=t.child,t=i.sibling,r=Tr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xf(t,e){return e=Wc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function il(t,e,n,r){return r!==null&&Vf(r),mi(e,t.child,null,n),t=Xf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function NN(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=dd(Error(z(422))),il(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Wc({mode:"visible",children:r.children},s,0,null),i=ss(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&mi(e,t.child,null,a),e.child.memoizedState=Nh(a),e.memoizedState=Eh,i);if(!(e.mode&1))return il(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=dd(i,r,void 0),il(t,e,a,r)}if(c=(a&t.childLanes)!==0,St||c){if(r=He,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),ln(r,t,s,-1))}return sm(),r=dd(Error(z(421))),il(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ON.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=wr(s.nextSibling),Ot=e,Ne=!0,sn=null,t!==null&&(zt[Bt++]=Ln,zt[Bt++]=Mn,zt[Bt++]=as,Ln=t.id,Mn=t.overflow,as=e),e=Xf(e,r.children),e.flags|=4096,e)}function g0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yh(t.return,e,n)}function hd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function l_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(gt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&g0(t,n,e);else if(t.tag===19)g0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&rc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&rc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hd(e,!0,n,null,i);break;case"together":hd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TN(t,e,n){switch(e.tag){case 3:o_(e),fi();break;case 5:Dx(e);break;case 1:jt(e.type)&&Jl(e);break;case 4:$f(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(ec,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?a_(t,e,n):(ve(Ie,Ie.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);ve(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return l_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,s_(t,e,n)}return Wn(t,e,n)}var c_,Th,u_,d_;c_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Th=function(){};u_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zr(bn.current);var i=null;switch(n){case"input":s=Wd(t,s),r=Wd(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=Yd(t,s),r=Yd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kl)}Xd(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Do.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Do.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&we("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};d_=function(t,e,n,r){n!==r&&(e.flags|=4)};function so(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IN(t,e,n){var r=e.pendingProps;switch(Of(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return jt(e.type)&&Yl(),ot(e),null;case 3:return r=e.stateNode,pi(),Ee(At),Ee(ht),Hf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(Rh(sn),sn=null))),Th(t,e),ot(e),null;case 5:Gf(e);var s=Zr(Ho.current);if(n=e.type,t!==null&&e.stateNode!=null)u_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return ot(e),null}if(t=Zr(bn.current),rl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[$o]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<uo.length;s++)we(uo[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Tg(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Sg(r,i),we("invalid",r)}Xd(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&nl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&nl(r.textContent,c,t),s=["children",""+c]):Do.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&we("scroll",r)}switch(n){case"input":Qa(r),Ig(r,i,!0);break;case"textarea":Qa(r),Ag(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[_n]=e,t[$o]=r,c_(t,e,!1,!1),e.stateNode=t;e:{switch(a=Zd(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<uo.length;s++)we(uo[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":Tg(t,r),s=Wd(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),we("invalid",t);break;case"textarea":Sg(t,r),s=Yd(t,r),we("invalid",t);break;default:s=r}Xd(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?zv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Uv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Lo(t,u):typeof u=="number"&&Lo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Do.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&bf(t,i,u,a))}switch(n){case"input":Qa(t),Ig(t,r,!1);break;case"textarea":Qa(t),Ag(t);break;case"option":r.value!=null&&t.setAttribute("value",""+kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xs(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)d_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Zr(Ho.current),Zr(bn.current),rl(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:nl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return ot(e),null;case 13:if(Ee(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Lt!==null&&e.mode&1&&!(e.flags&128))jx(),fi(),e.flags|=98560,i=!1;else if(i=rl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[_n]=e}else fi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(Rh(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?qe===0&&(qe=3):sm())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return pi(),Th(t,e),t===null&&zo(e.stateNode.containerInfo),ot(e),null;case 10:return qf(e.type._context),ot(e),null;case 17:return jt(e.type)&&Yl(),ot(e),null;case 19:if(Ee(Ie),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)so(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=rc(t),a!==null){for(e.flags|=128,so(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Re()>yi&&(e.flags|=128,r=!0,so(i,!1),e.lanes=4194304)}else{if(!r)if(t=rc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),so(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ne)return ot(e),null}else 2*Re()-i.renderingStartTime>yi&&n!==1073741824&&(e.flags|=128,r=!0,so(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Re(),e.sibling=null,n=Ie.current,ve(Ie,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return rm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function SN(t,e){switch(Of(e),e.tag){case 1:return jt(e.type)&&Yl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),Ee(At),Ee(ht),Hf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gf(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));fi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return pi(),null;case 10:return qf(e.type._context),null;case 22:case 23:return rm(),null;case 24:return null;default:return null}}var ol=!1,ut=!1,AN=typeof WeakSet=="function"?WeakSet:Set,H=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Ih(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var y0=!1;function jN(t,e){if(ch=Hl,t=gx(),Lf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uh={focusedElem:t,selectionRange:n},Hl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var k=S.memoizedProps,R=S.memoizedState,N=e.stateNode,E=N.getSnapshotBeforeUpdate(e.elementType===e.type?k:nn(e.type,k),R);N.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(M){Ce(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return S=y0,y0=!1,S}function To(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ih(e,n,i)}s=s.next}while(s!==r)}}function Gc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function h_(t){var e=t.alternate;e!==null&&(t.alternate=null,h_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[$o],delete e[fh],delete e[dN],delete e[hN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function f_(t){return t.tag===5||t.tag===3||t.tag===4}function v0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ah(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kl));else if(r!==4&&(t=t.child,t!==null))for(Ah(t,e,n),t=t.sibling;t!==null;)Ah(t,e,n),t=t.sibling}function jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jh(t,e,n),t=t.sibling;t!==null;)jh(t,e,n),t=t.sibling}var Qe=null,rn=!1;function ir(t,e,n){for(n=n.child;n!==null;)m_(t,e,n),n=n.sibling}function m_(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(Oc,n)}catch{}switch(n.tag){case 5:ut||Ks(n,e);case 6:var r=Qe,s=rn;Qe=null,ir(t,e,n),Qe=r,rn=s,Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?id(t.parentNode,n):t.nodeType===1&&id(t,n),Fo(t)):id(Qe,n.stateNode));break;case 4:r=Qe,s=rn,Qe=n.stateNode.containerInfo,rn=!0,ir(t,e,n),Qe=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Ih(n,e,a),s=s.next}while(s!==r)}ir(t,e,n);break;case 1:if(!ut&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Ce(n,e,c)}ir(t,e,n);break;case 21:ir(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,ir(t,e,n),ut=r):ir(t,e,n);break;default:ir(t,e,n)}}function x0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AN),e.forEach(function(r){var s=VN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Qe=c.stateNode,rn=!1;break e;case 3:Qe=c.stateNode.containerInfo,rn=!0;break e;case 4:Qe=c.stateNode.containerInfo,rn=!0;break e}c=c.return}if(Qe===null)throw Error(z(160));m_(i,a,s),Qe=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p_(e,t),e=e.sibling}function p_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),yn(t),r&4){try{To(3,t,t.return),Gc(3,t)}catch(k){Ce(t,t.return,k)}try{To(5,t,t.return)}catch(k){Ce(t,t.return,k)}}break;case 1:tn(e,t),yn(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(tn(e,t),yn(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var s=t.stateNode;try{Lo(s,"")}catch(k){Ce(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Ov(s,i),Zd(c,a);var d=Zd(c,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?zv(s,m):f==="dangerouslySetInnerHTML"?Uv(s,m):f==="children"?Lo(s,m):bf(s,f,m,d)}switch(c){case"input":Qd(s,i);break;case"textarea":Vv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Xs(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Xs(s,!!i.multiple,i.defaultValue,!0):Xs(s,!!i.multiple,i.multiple?[]:"",!1))}s[$o]=i}catch(k){Ce(t,t.return,k)}}break;case 6:if(tn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Ce(t,t.return,k)}}break;case 3:if(tn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fo(e.containerInfo)}catch(k){Ce(t,t.return,k)}break;case 4:tn(e,t),yn(t);break;case 13:tn(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(tm=Re())),r&4&&x0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||f,tn(e,t),ut=d):tn(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(H=t,f=t.child;f!==null;){for(m=H=f;H!==null;){switch(g=H,w=g.child,g.tag){case 0:case 11:case 14:case 15:To(4,g,g.return);break;case 1:Ks(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(k){Ce(r,n,k)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){w0(m);continue}}w!==null?(w.return=g,H=w):w0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=qv("display",a))}catch(k){Ce(t,t.return,k)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(k){Ce(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:tn(e,t),yn(t),r&4&&x0(t);break;case 21:break;default:tn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(f_(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Lo(s,""),r.flags&=-33);var i=v0(t);jh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=v0(t);Ah(t,c,a);break;default:throw Error(z(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kN(t,e,n){H=t,g_(t)}function g_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ol;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||ut;c=ol;var d=ut;if(ol=a,(ut=u)&&!d)for(H=s;H!==null;)a=H,u=a.child,a.tag===22&&a.memoizedState!==null?b0(s):u!==null?(u.return=a,H=u):b0(s);for(;i!==null;)H=i,g_(i),i=i.sibling;H=s,ol=c,ut=d}_0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):_0(t)}}function _0(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Gc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&s0(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}s0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Fo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||e.flags&512&&Sh(e)}catch(g){Ce(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function w0(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function b0(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Gc(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{Sh(e)}catch(u){Ce(e,i,u)}break;case 5:var a=e.return;try{Sh(e)}catch(u){Ce(e,a,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){H=null;break}var c=e.sibling;if(c!==null){c.return=e.return,H=c;break}H=e.return}}var CN=Math.ceil,oc=Xn.ReactCurrentDispatcher,Zf=Xn.ReactCurrentOwner,Gt=Xn.ReactCurrentBatchConfig,ce=0,He=null,Me=null,Je=0,Dt=0,Ys=Mr(0),qe=0,Yo=null,cs=0,Hc=0,em=0,Io=null,Tt=null,tm=0,yi=1/0,kn=null,ac=!1,kh=null,Er=null,al=!1,pr=null,lc=0,So=0,Ch=null,Il=-1,Sl=0;function vt(){return ce&6?Re():Il!==-1?Il:Il=Re()}function Nr(t){return t.mode&1?ce&2&&Je!==0?Je&-Je:mN.transition!==null?(Sl===0&&(Sl=ex()),Sl):(t=pe,t!==0||(t=window.event,t=t===void 0?16:ax(t.type)),t):1}function ln(t,e,n,r){if(50<So)throw So=0,Ch=null,Error(z(185));fa(t,n,r),(!(ce&2)||t!==He)&&(t===He&&(!(ce&2)&&(Hc|=n),qe===4&&ur(t,Je)),kt(t,r),n===1&&ce===0&&!(e.mode&1)&&(yi=Re()+500,zc&&Or()))}function kt(t,e){var n=t.callbackNode;m2(t,e);var r=Gl(t,t===He?Je:0);if(r===0)n!==null&&Cg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Cg(n),e===1)t.tag===0?fN(E0.bind(null,t)):Ix(E0.bind(null,t)),cN(function(){!(ce&6)&&Or()}),n=null;else{switch(tx(r)){case 1:n=Sf;break;case 4:n=Xv;break;case 16:n=$l;break;case 536870912:n=Zv;break;default:n=$l}n=N_(n,y_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function y_(t,e){if(Il=-1,Sl=0,ce&6)throw Error(z(327));var n=t.callbackNode;if(ri()&&t.callbackNode!==n)return null;var r=Gl(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cc(t,r);else{e=r;var s=ce;ce|=2;var i=x_();(He!==t||Je!==e)&&(kn=null,yi=Re()+500,rs(t,e));do try{DN();break}catch(c){v_(t,c)}while(!0);Uf(),oc.current=i,ce=s,Me!==null?e=0:(He=null,Je=0,e=qe)}if(e!==0){if(e===2&&(s=sh(t),s!==0&&(r=s,e=Ph(t,s))),e===1)throw n=Yo,rs(t,0),ur(t,r),kt(t,Re()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!PN(s)&&(e=cc(t,r),e===2&&(i=sh(t),i!==0&&(r=i,e=Ph(t,i))),e===1))throw n=Yo,rs(t,0),ur(t,r),kt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Kr(t,Tt,kn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=tm+500-Re(),10<e)){if(Gl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){vt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hh(Kr.bind(null,t,Tt,kn),e);break}Kr(t,Tt,kn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-an(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Re()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CN(r/1960))-r,10<r){t.timeoutHandle=hh(Kr.bind(null,t,Tt,kn),r);break}Kr(t,Tt,kn);break;case 5:Kr(t,Tt,kn);break;default:throw Error(z(329))}}}return kt(t,Re()),t.callbackNode===n?y_.bind(null,t):null}function Ph(t,e){var n=Io;return t.current.memoizedState.isDehydrated&&(rs(t,e).flags|=256),t=cc(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&Rh(e)),t}function Rh(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function PN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!un(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~em,e&=~Hc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function E0(t){if(ce&6)throw Error(z(327));ri();var e=Gl(t,0);if(!(e&1))return kt(t,Re()),null;var n=cc(t,e);if(t.tag!==0&&n===2){var r=sh(t);r!==0&&(e=r,n=Ph(t,r))}if(n===1)throw n=Yo,rs(t,0),ur(t,e),kt(t,Re()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Kr(t,Tt,kn),kt(t,Re()),null}function nm(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(yi=Re()+500,zc&&Or())}}function us(t){pr!==null&&pr.tag===0&&!(ce&6)&&ri();var e=ce;ce|=1;var n=Gt.transition,r=pe;try{if(Gt.transition=null,pe=1,t)return t()}finally{pe=r,Gt.transition=n,ce=e,!(ce&6)&&Or()}}function rm(){Dt=Ys.current,Ee(Ys)}function rs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,lN(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Of(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yl();break;case 3:pi(),Ee(At),Ee(ht),Hf();break;case 5:Gf(r);break;case 4:pi();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:qf(r.type._context);break;case 22:case 23:rm()}n=n.return}if(He=t,Me=t=Tr(t.current,null),Je=Dt=e,qe=0,Yo=null,em=Hc=cs=0,Tt=Io=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Xr=null}return t}function v_(t,e){do{var n=Me;try{if(Uf(),El.current=ic,sc){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}sc=!1}if(ls=0,Ge=Ue=Se=null,No=!1,Wo=0,Zf.current=null,n===null||n.return===null){qe=1,Yo=e,Me=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=Je,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=u0(a);if(w!==null){w.flags&=-257,d0(w,a,c,i,e),w.mode&1&&c0(i,d,e),e=w,u=d;var S=e.updateQueue;if(S===null){var k=new Set;k.add(u),e.updateQueue=k}else S.add(u);break e}else{if(!(e&1)){c0(i,d,e),sm();break e}u=Error(z(426))}}else if(Ne&&c.mode&1){var R=u0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),d0(R,a,c,i,e),Vf(gi(u,c));break e}}i=u=gi(u,c),qe!==4&&(qe=2),Io===null?Io=[i]:Io.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=t_(i,u,e);r0(i,N);break e;case 1:c=u;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Er===null||!Er.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=n_(i,c,e);r0(i,M);break e}}i=i.return}while(i!==null)}w_(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function x_(){var t=oc.current;return oc.current=ic,t===null?ic:t}function sm(){(qe===0||qe===3||qe===2)&&(qe=4),He===null||!(cs&268435455)&&!(Hc&268435455)||ur(He,Je)}function cc(t,e){var n=ce;ce|=2;var r=x_();(He!==t||Je!==e)&&(kn=null,rs(t,e));do try{RN();break}catch(s){v_(t,s)}while(!0);if(Uf(),ce=n,oc.current=r,Me!==null)throw Error(z(261));return He=null,Je=0,qe}function RN(){for(;Me!==null;)__(Me)}function DN(){for(;Me!==null&&!i2();)__(Me)}function __(t){var e=E_(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?w_(t):Me=e,Zf.current=null}function w_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SN(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Me=null;return}}else if(n=IN(n,e,Dt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);qe===0&&(qe=5)}function Kr(t,e,n){var r=pe,s=Gt.transition;try{Gt.transition=null,pe=1,LN(t,e,n,r)}finally{Gt.transition=s,pe=r}return null}function LN(t,e,n,r){do ri();while(pr!==null);if(ce&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(p2(t,i),t===He&&(Me=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||al||(al=!0,N_($l,function(){return ri(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var a=pe;pe=1;var c=ce;ce|=4,Zf.current=null,jN(t,n),p_(n,t),tN(uh),Hl=!!ch,uh=ch=null,t.current=n,kN(n),o2(),ce=c,pe=a,Gt.transition=i}else t.current=n;if(al&&(al=!1,pr=t,lc=s),i=t.pendingLanes,i===0&&(Er=null),c2(n.stateNode),kt(t,Re()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ac)throw ac=!1,t=kh,kh=null,t;return lc&1&&t.tag!==0&&ri(),i=t.pendingLanes,i&1?t===Ch?So++:(So=0,Ch=t):So=0,Or(),null}function ri(){if(pr!==null){var t=tx(lc),e=Gt.transition,n=pe;try{if(Gt.transition=null,pe=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,lc=0,ce&6)throw Error(z(331));var s=ce;for(ce|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(H=d;H!==null;){var f=H;switch(f.tag){case 0:case 11:case 15:To(8,f,i)}var m=f.child;if(m!==null)m.return=f,H=m;else for(;H!==null;){f=H;var g=f.sibling,w=f.return;if(h_(f),f===d){H=null;break}if(g!==null){g.return=w,H=g;break}H=w}}}var S=i.alternate;if(S!==null){var k=S.child;if(k!==null){S.child=null;do{var R=k.sibling;k.sibling=null,k=R}while(k!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:To(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,H=N;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){a=H;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,H=T;else e:for(a=E;H!==null;){if(c=H,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Gc(9,c)}}catch(D){Ce(c,c.return,D)}if(c===a){H=null;break e}var M=c.sibling;if(M!==null){M.return=c.return,H=M;break e}H=c.return}}if(ce=s,Or(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(Oc,t)}catch{}r=!0}return r}finally{pe=n,Gt.transition=e}}return!1}function N0(t,e,n){e=gi(n,e),e=t_(t,e,1),t=br(t,e,1),e=vt(),t!==null&&(fa(t,1,e),kt(t,e))}function Ce(t,e,n){if(t.tag===3)N0(t,t,n);else for(;e!==null;){if(e.tag===3){N0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=gi(n,t),t=n_(e,t,1),e=br(e,t,1),t=vt(),e!==null&&(fa(e,1,t),kt(e,t));break}}e=e.return}}function MN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&(qe===4||qe===3&&(Je&130023424)===Je&&500>Re()-tm?rs(t,0):em|=n),kt(t,e)}function b_(t,e){e===0&&(t.mode&1?(e=Ja,Ja<<=1,!(Ja&130023424)&&(Ja=4194304)):e=1);var n=vt();t=Hn(t,e),t!==null&&(fa(t,e,n),kt(t,n))}function ON(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b_(t,n)}function VN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),b_(t,n)}var E_;E_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||At.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,TN(t,e,n);St=!!(t.flags&131072)}else St=!1,Ne&&e.flags&1048576&&Sx(e,Zl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tl(t,e),t=e.pendingProps;var s=hi(e,ht.current);ni(e,n),s=Qf(null,e,r,t,s,n);var i=Kf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Jl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bf(e),s.updater=$c,e.stateNode=s,s._reactInternals=e,xh(e,r,t,n),e=bh(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Mf(e),gt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=UN(r),t=nn(r,t),s){case 0:e=wh(null,e,r,t,n);break e;case 1:e=m0(null,e,r,t,n);break e;case 11:e=h0(null,e,r,t,n);break e;case 14:e=f0(null,e,r,nn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),wh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),m0(t,e,r,s,n);case 3:e:{if(o_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rx(t,e),nc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=gi(Error(z(423)),e),e=p0(t,e,r,n,s);break e}else if(r!==s){s=gi(Error(z(424)),e),e=p0(t,e,r,n,s);break e}else for(Lt=wr(e.stateNode.containerInfo.firstChild),Ot=e,Ne=!0,sn=null,n=Cx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fi(),r===s){e=Wn(t,e,n);break e}gt(t,e,r,n)}e=e.child}return e;case 5:return Dx(e),t===null&&gh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,dh(r,s)?a=null:i!==null&&dh(r,i)&&(e.flags|=32),i_(t,e),gt(t,e,a,n),e.child;case 6:return t===null&&gh(e),null;case 13:return a_(t,e,n);case 4:return $f(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mi(e,null,r,n):gt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),h0(t,e,r,s,n);case 7:return gt(t,e,e.pendingProps,n),e.child;case 8:return gt(t,e,e.pendingProps.children,n),e.child;case 12:return gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ve(ec,r._currentValue),r._currentValue=a,i!==null)if(un(i.value,a)){if(i.children===s.children&&!At.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=qn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),yh(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),yh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}gt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ni(e,n),s=Qt(s),r=r(s),e.flags|=1,gt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),f0(t,e,r,s,n);case 15:return r_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Tl(t,e),e.tag=1,jt(r)?(t=!0,Jl(e)):t=!1,ni(e,n),e_(e,r,s),xh(e,r,s,n),bh(null,e,r,!0,t,n);case 19:return l_(t,e,n);case 22:return s_(t,e,n)}throw Error(z(156,e.tag))};function N_(t,e){return Jv(t,e)}function FN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $t(t,e,n,r){return new FN(t,e,n,r)}function im(t){return t=t.prototype,!(!t||!t.isReactComponent)}function UN(t){if(typeof t=="function")return im(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nf)return 11;if(t===Tf)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=$t(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Al(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")im(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Us:return ss(n.children,s,i,e);case Ef:a=8,s|=8;break;case Bd:return t=$t(12,n,e,s|2),t.elementType=Bd,t.lanes=i,t;case $d:return t=$t(13,n,e,s),t.elementType=$d,t.lanes=i,t;case Gd:return t=$t(19,n,e,s),t.elementType=Gd,t.lanes=i,t;case Dv:return Wc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pv:a=10;break e;case Rv:a=9;break e;case Nf:a=11;break e;case Tf:a=14;break e;case ar:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=$t(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ss(t,e,n,r){return t=$t(7,t,r,e),t.lanes=n,t}function Wc(t,e,n,r){return t=$t(22,t,r,e),t.elementType=Dv,t.lanes=n,t.stateNode={isHidden:!1},t}function fd(t,e,n){return t=$t(6,t,null,e),t.lanes=n,t}function md(t,e,n){return e=$t(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function om(t,e,n,r,s,i,a,c,u){return t=new qN(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=$t(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bf(i),t}function zN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T_(t){if(!t)return Cr;t=t._reactInternals;e:{if(ws(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(jt(n))return Tx(t,n,e)}return e}function I_(t,e,n,r,s,i,a,c,u){return t=om(n,r,!0,t,s,i,a,c,u),t.context=T_(null),n=t.current,r=vt(),s=Nr(n),i=qn(r,s),i.callback=e??null,br(n,i,s),t.current.lanes=s,fa(t,s,r),kt(t,r),t}function Qc(t,e,n,r){var s=e.current,i=vt(),a=Nr(s);return n=T_(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=br(s,e,a),t!==null&&(ln(t,s,a,i),bl(t,s,a)),a}function uc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function T0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function am(t,e){T0(t,e),(t=t.alternate)&&T0(t,e)}function BN(){return null}var S_=typeof reportError=="function"?reportError:function(t){console.error(t)};function lm(t){this._internalRoot=t}Kc.prototype.render=lm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Qc(t,e,null,null)};Kc.prototype.unmount=lm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;us(function(){Qc(null,t,null,null)}),e[Gn]=null}};function Kc(t){this._internalRoot=t}Kc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<cr.length&&e!==0&&e<cr[n].priority;n++);cr.splice(n,0,t),n===0&&ox(t)}};function cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I0(){}function $N(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=uc(a);i.call(d)}}var a=I_(e,r,t,0,null,!1,!1,"",I0);return t._reactRootContainer=a,t[Gn]=a.current,zo(t.nodeType===8?t.parentNode:t),us(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=uc(u);c.call(d)}}var u=om(t,0,!1,null,null,!1,!1,"",I0);return t._reactRootContainer=u,t[Gn]=u.current,zo(t.nodeType===8?t.parentNode:t),us(function(){Qc(e,u,n,r)}),u}function Jc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=uc(a);c.call(u)}}Qc(e,a,t,s)}else a=$N(n,e,t,s,r);return uc(a)}nx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=co(e.pendingLanes);n!==0&&(Af(e,n|1),kt(e,Re()),!(ce&6)&&(yi=Re()+500,Or()))}break;case 13:us(function(){var r=Hn(t,1);if(r!==null){var s=vt();ln(r,t,1,s)}}),am(t,1)}};jf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=vt();ln(e,t,134217728,n)}am(t,134217728)}};rx=function(t){if(t.tag===13){var e=Nr(t),n=Hn(t,e);if(n!==null){var r=vt();ln(n,t,e,r)}am(t,e)}};sx=function(){return pe};ix=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};th=function(t,e,n){switch(e){case"input":if(Qd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=qc(r);if(!s)throw Error(z(90));Mv(r),Qd(r,s)}}}break;case"textarea":Vv(t,n);break;case"select":e=n.value,e!=null&&Xs(t,!!n.multiple,e,!1)}};Gv=nm;Hv=us;var GN={usingClientEntryPoint:!1,Events:[pa,$s,qc,Bv,$v,nm]},io={findFiberByHostInstance:Jr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HN={bundleType:io.bundleType,version:io.version,rendererPackageName:io.rendererPackageName,rendererConfig:io.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kv(t),t===null?null:t.stateNode},findFiberByHostInstance:io.findFiberByHostInstance||BN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ll.isDisabled&&ll.supportsFiber)try{Oc=ll.inject(HN),wn=ll}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GN;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cm(e))throw Error(z(200));return zN(t,e,null,n)};Ut.createRoot=function(t,e){if(!cm(t))throw Error(z(299));var n=!1,r="",s=S_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=om(t,1,!1,null,null,n,!1,r,s),t[Gn]=e.current,zo(t.nodeType===8?t.parentNode:t),new lm(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Kv(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return us(t)};Ut.hydrate=function(t,e,n){if(!Yc(e))throw Error(z(200));return Jc(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!cm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=S_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=I_(e,null,t,1,n??null,s,!1,i,a),t[Gn]=e.current,zo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Kc(e)};Ut.render=function(t,e,n){if(!Yc(e))throw Error(z(200));return Jc(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Yc(t))throw Error(z(40));return t._reactRootContainer?(us(function(){Jc(null,null,t,!1,function(){t._reactRootContainer=null,t[Gn]=null})}),!0):!1};Ut.unstable_batchedUpdates=nm;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Yc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Jc(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function A_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A_)}catch(t){console.error(t)}}A_(),Av.exports=Ut;var WN=Av.exports,j_,S0=WN;j_=S0.createRoot,S0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jo(){return Jo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jo.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const A0="popstate";function QN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return Dh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:dc(s)}return YN(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function k_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KN(){return Math.random().toString(36).substr(2,8)}function j0(t,e){return{usr:t.state,key:t.key,idx:e}}function Dh(t,e,n,r){return n===void 0&&(n=null),Jo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ai(e):e,{state:n,key:e&&e.key||r||KN()})}function dc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ai(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function YN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=gr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(Jo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){c=gr.Pop;let R=f(),N=R==null?null:R-d;d=R,u&&u({action:c,location:k.location,delta:N})}function g(R,N){c=gr.Push;let E=Dh(k.location,R,N);d=f()+1;let T=j0(E,d),M=k.createHref(E);try{a.pushState(T,"",M)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(M)}i&&u&&u({action:c,location:k.location,delta:1})}function w(R,N){c=gr.Replace;let E=Dh(k.location,R,N);d=f();let T=j0(E,d),M=k.createHref(E);a.replaceState(T,"",M),i&&u&&u({action:c,location:k.location,delta:0})}function S(R){let N=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof R=="string"?R:dc(R);return E=E.replace(/ $/,"%20"),De(N,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,N)}let k={get action(){return c},get location(){return t(s,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(A0,m),u=R,()=>{s.removeEventListener(A0,m),u=null}},createHref(R){return e(s,R)},createURL:S,encodeLocation(R){let N=S(R);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:g,replace:w,go(R){return a.go(R)}};return k}var k0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k0||(k0={}));function JN(t,e,n){return n===void 0&&(n="/"),XN(t,e,n,!1)}function XN(t,e,n,r){let s=typeof e=="string"?Ai(e):e,i=um(s.pathname||"/",n);if(i==null)return null;let a=C_(t);ZN(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=uT(i);c=lT(a[u],d,r)}return c}function C_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(De(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ir([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),C_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:oT(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of P_(i.path))s(i,a,u)}),e}function P_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=P_(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function ZN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eT=/^:[\w-]+$/,tT=3,nT=2,rT=1,sT=10,iT=-2,C0=t=>t==="*";function oT(t,e){let n=t.split("/"),r=n.length;return n.some(C0)&&(r+=iT),e&&(r+=nT),n.filter(s=>!C0(s)).reduce((s,i)=>s+(eT.test(i)?tT:i===""?rT:sT),r)}function aT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function lT(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=P0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=P0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Ir([i,m.pathname]),pathnameBase:mT(Ir([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Ir([i,m.pathnameBase]))}return a}function P0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let k=c[m]||"";a=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const S=c[m];return w&&!S?d[g]=void 0:d[g]=(S||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function cT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),k_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function uT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return k_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function um(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function dT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ai(t):t;return{pathname:n?n.startsWith("/")?n:hT(n,e):e,search:pT(r),hash:gT(s)}}function hT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function pd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function dm(t,e){let n=fT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ai(t):(s=Jo({},t),De(!s.pathname||!s.pathname.includes("?"),pd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),pd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),pd("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=dT(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Ir=t=>t.join("/").replace(/\/\/+/g,"/"),mT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const R_=["post","put","patch","delete"];new Set(R_);const vT=["get",...R_];new Set(vT);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xo(){return Xo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xo.apply(this,arguments)}const fm=C.createContext(null),xT=C.createContext(null),Vr=C.createContext(null),Xc=C.createContext(null),Zn=C.createContext({outlet:null,matches:[],isDataRoute:!1}),D_=C.createContext(null);function _T(t,e){let{relative:n}=e===void 0?{}:e;ji()||De(!1);let{basename:r,navigator:s}=C.useContext(Vr),{hash:i,pathname:a,search:c}=M_(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Ir([r,a])),s.createHref({pathname:u,search:c,hash:i})}function ji(){return C.useContext(Xc)!=null}function bs(){return ji()||De(!1),C.useContext(Xc).location}function L_(t){C.useContext(Vr).static||C.useLayoutEffect(t)}function mn(){let{isDataRoute:t}=C.useContext(Zn);return t?DT():wT()}function wT(){ji()||De(!1);let t=C.useContext(fm),{basename:e,future:n,navigator:r}=C.useContext(Vr),{matches:s}=C.useContext(Zn),{pathname:i}=bs(),a=JSON.stringify(dm(s,n.v7_relativeSplatPath)),c=C.useRef(!1);return L_(()=>{c.current=!0}),C.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=hm(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ir([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function bT(){let{matches:t}=C.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function M_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=C.useContext(Vr),{matches:s}=C.useContext(Zn),{pathname:i}=bs(),a=JSON.stringify(dm(s,r.v7_relativeSplatPath));return C.useMemo(()=>hm(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function ET(t,e){return NT(t,e)}function NT(t,e,n,r){ji()||De(!1);let{navigator:s,static:i}=C.useContext(Vr),{matches:a}=C.useContext(Zn),c=a[a.length-1],u=c?c.params:{};c&&c.pathname;let d=c?c.pathnameBase:"/";c&&c.route;let f=bs(),m;if(e){var g;let N=typeof e=="string"?Ai(e):e;d==="/"||(g=N.pathname)!=null&&g.startsWith(d)||De(!1),m=N}else m=f;let w=m.pathname||"/",S=w;if(d!=="/"){let N=d.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let k=!i&&n&&n.matches&&n.matches.length>0?n.matches:JN(t,{pathname:S}),R=jT(k&&k.map(N=>Object.assign({},N,{params:Object.assign({},u,N.params),pathname:Ir([d,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?d:Ir([d,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r);return e&&R?C.createElement(Xc.Provider,{value:{location:Xo({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:gr.Pop}},R):R}function TT(){let t=RT(),e=yT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),n?C.createElement("pre",{style:s},n):null,null)}const IT=C.createElement(TT,null);class ST extends C.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?C.createElement(Zn.Provider,{value:this.props.routeContext},C.createElement(D_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function AT(t){let{routeContext:e,match:n,children:r}=t,s=C.useContext(fm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),C.createElement(Zn.Provider,{value:e},r)}function jT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||De(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:w}=n,S=m.route.loader&&g[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||S){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let w,S=!1,k=null,R=null;n&&(w=c&&m.route.id?c[m.route.id]:void 0,k=m.route.errorElement||IT,u&&(d<0&&g===0?(S=!0,R=null):d===g&&(S=!0,R=m.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,g+1)),E=()=>{let T;return w?T=k:S?T=R:m.route.Component?T=C.createElement(m.route.Component,null):m.route.element?T=m.route.element:T=f,C.createElement(AT,{match:m,routeContext:{outlet:f,matches:N,isDataRoute:n!=null},children:T})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?C.createElement(ST,{location:n.location,revalidation:n.revalidation,component:k,error:w,children:E(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):E()},null)}var O_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(O_||{}),hc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(hc||{});function kT(t){let e=C.useContext(fm);return e||De(!1),e}function CT(t){let e=C.useContext(xT);return e||De(!1),e}function PT(t){let e=C.useContext(Zn);return e||De(!1),e}function V_(t){let e=PT(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function RT(){var t;let e=C.useContext(D_),n=CT(hc.UseRouteError),r=V_(hc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function DT(){let{router:t}=kT(O_.UseNavigateStable),e=V_(hc.UseNavigateStable),n=C.useRef(!1);return L_(()=>{n.current=!0}),C.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Xo({fromRouteId:e},i)))},[t,e])}function LT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Lh(t){let{to:e,replace:n,state:r,relative:s}=t;ji()||De(!1);let{future:i,static:a}=C.useContext(Vr),{matches:c}=C.useContext(Zn),{pathname:u}=bs(),d=mn(),f=hm(e,dm(c,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return C.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Be(t){De(!1)}function MT(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gr.Pop,navigator:i,static:a=!1,future:c}=t;ji()&&De(!1);let u=e.replace(/^\/*/,"/"),d=C.useMemo(()=>({basename:u,navigator:i,static:a,future:Xo({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Ai(r));let{pathname:f="/",search:m="",hash:g="",state:w=null,key:S="default"}=r,k=C.useMemo(()=>{let R=um(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:w,key:S},navigationType:s}},[u,f,m,g,w,S,s]);return k==null?null:C.createElement(Vr.Provider,{value:d},C.createElement(Xc.Provider,{children:n,value:k}))}function OT(t){let{children:e,location:n}=t;return ET(Mh(e),n)}new Promise(()=>{});function Mh(t,e){e===void 0&&(e=[]);let n=[];return C.Children.forEach(t,(r,s)=>{if(!C.isValidElement(r))return;let i=[...e,s];if(r.type===C.Fragment){n.push.apply(n,Mh(r.props.children,i));return}r.type!==Be&&De(!1),!r.props.index||!r.props.children||De(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Mh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oh(){return Oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oh.apply(this,arguments)}function VT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function FT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function UT(t,e){return t.button===0&&(!e||e==="_self")&&!FT(t)}function Vh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function qT(t,e){let n=Vh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const zT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BT="6";try{window.__reactRouterVersion=BT}catch{}const $T="startTransition",R0=ME[$T];function GT(t){let{basename:e,children:n,future:r,window:s}=t,i=C.useRef();i.current==null&&(i.current=QN({window:s,v5Compat:!0}));let a=i.current,[c,u]=C.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=C.useCallback(m=>{d&&R0?R0(()=>u(m)):u(m)},[u,d]);return C.useLayoutEffect(()=>a.listen(f),[a,f]),C.useEffect(()=>LT(r),[r]),C.createElement(MT,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const HT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=C.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=VT(e,zT),{basename:w}=C.useContext(Vr),S,k=!1;if(typeof d=="string"&&WT.test(d)&&(S=d,HT))try{let T=new URL(window.location.href),M=d.startsWith("//")?new URL(T.protocol+d):new URL(d),D=um(M.pathname,w);M.origin===T.origin&&D!=null?d=D+M.search+M.hash:k=!0}catch{}let R=_T(d,{relative:s}),N=QT(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function E(T){r&&r(T),T.defaultPrevented||N(T)}return C.createElement("a",Oh({},g,{href:S||R,onClick:k||i?r:E,ref:n,target:u}))});var D0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D0||(D0={}));var L0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(L0||(L0={}));function QT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=mn(),d=bs(),f=M_(t,{relative:a});return C.useCallback(m=>{if(UT(m,n)){m.preventDefault();let g=r!==void 0?r:dc(d)===dc(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function F_(t){let e=C.useRef(Vh(t)),n=C.useRef(!1),r=bs(),s=C.useMemo(()=>qT(r.search,n.current?null:e.current),[r.search]),i=mn(),a=C.useCallback((c,u)=>{const d=Vh(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var M0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},q_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new YT;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const S=d<<6&192|m;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class YT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JT=function(t){const e=U_(t);return q_.encodeByteArray(e,!0)},fc=function(t){return JT(t).replace(/\./g,"")},z_=function(t){try{return q_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=()=>XT().__FIREBASE_DEFAULTS__,eI=()=>{if(typeof process>"u"||typeof M0>"u")return;const t=M0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&z_(t[1]);return e&&JSON.parse(e)},Zc=()=>{try{return ZT()||eI()||tI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},B_=t=>{var e,n;return(n=(e=Zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nI=t=>{const e=B_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$_=()=>{var t;return(t=Zc())===null||t===void 0?void 0:t.config},G_=t=>{var e;return(e=Zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fc(JSON.stringify(n)),fc(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function oI(){var t;const e=(t=Zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function aI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lI(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pm(){try{return typeof indexedDB=="object"}catch{return!1}}function gm(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function H_(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="FirebaseError";class pn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uI,Object.setPrototypeOf(this,pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Es.prototype.create)}}class Es{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?dI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new pn(s,c,r)}}function dI(t,e){return t.replace(hI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const hI=/\{\$([^}]+)}/g;function fI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(O0(i)&&O0(a)){if(!Zo(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ho(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function mI(t,e){const n=new pI(t,e);return n.subscribe.bind(n)}class pI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=gd),s.error===void 0&&(s.error=gd),s.complete===void 0&&(s.complete=gd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1e3,vI=2,xI=4*60*60*1e3,_I=.5;function V0(t,e=yI,n=vI){const r=e*Math.pow(n,t),s=Math.round(_I*r*(Math.random()-.5)*2);return Math.min(xI,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t){return t&&t._delegate?t._delegate:t}class dn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EI(e))try{this.getOrInitializeService({instanceIdentifier:Yr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Yr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yr){return this.instances.has(e)}getOptions(e=Yr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yr){return this.component?this.component.multipleInstances?e:Yr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bI(t){return t===Yr?void 0:t}function EI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const TI={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},II=oe.INFO,SI={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},AI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=SI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class eu{constructor(e){this.name=e,this._logLevel=II,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const jI=(t,e)=>e.some(n=>t instanceof n);let F0,U0;function kI(){return F0||(F0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CI(){return U0||(U0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W_=new WeakMap,Fh=new WeakMap,Q_=new WeakMap,yd=new WeakMap,ym=new WeakMap;function PI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Sr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&W_.set(n,t)}).catch(()=>{}),ym.set(e,t),e}function RI(t){if(Fh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Fh.set(t,e)}let Uh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Fh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DI(t){Uh=t(Uh)}function LI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vd(this),e,...n);return Q_.set(r,e.sort?e.sort():[e]),Sr(r)}:CI().includes(t)?function(...e){return t.apply(vd(this),e),Sr(W_.get(this))}:function(...e){return Sr(t.apply(vd(this),e))}}function MI(t){return typeof t=="function"?LI(t):(t instanceof IDBTransaction&&RI(t),jI(t,kI())?new Proxy(t,Uh):t)}function Sr(t){if(t instanceof IDBRequest)return PI(t);if(yd.has(t))return yd.get(t);const e=MI(t);return e!==t&&(yd.set(t,e),ym.set(e,t)),e}const vd=t=>ym.get(t);function K_(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Sr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Sr(a.result),u.oldVersion,u.newVersion,Sr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const OI=["get","getKey","getAll","getAllKeys","count"],VI=["put","add","delete","clear"],xd=new Map;function q0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xd.get(e))return xd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=VI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||OI.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return xd.set(e,i),i}DI(t=>({...t,get:(e,n,r)=>q0(e,n)||t.get(e,n,r),has:(e,n)=>!!q0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qh="@firebase/app",z0="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn=new eu("@firebase/app"),qI="@firebase/app-compat",zI="@firebase/analytics-compat",BI="@firebase/analytics",$I="@firebase/app-check-compat",GI="@firebase/app-check",HI="@firebase/auth",WI="@firebase/auth-compat",QI="@firebase/database",KI="@firebase/database-compat",YI="@firebase/functions",JI="@firebase/functions-compat",XI="@firebase/installations",ZI="@firebase/installations-compat",eS="@firebase/messaging",tS="@firebase/messaging-compat",nS="@firebase/performance",rS="@firebase/performance-compat",sS="@firebase/remote-config",iS="@firebase/remote-config-compat",oS="@firebase/storage",aS="@firebase/storage-compat",lS="@firebase/firestore",cS="@firebase/vertexai-preview",uS="@firebase/firestore-compat",dS="firebase",hS="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="[DEFAULT]",fS={[qh]:"fire-core",[qI]:"fire-core-compat",[BI]:"fire-analytics",[zI]:"fire-analytics-compat",[GI]:"fire-app-check",[$I]:"fire-app-check-compat",[HI]:"fire-auth",[WI]:"fire-auth-compat",[QI]:"fire-rtdb",[KI]:"fire-rtdb-compat",[YI]:"fire-fn",[JI]:"fire-fn-compat",[XI]:"fire-iid",[ZI]:"fire-iid-compat",[eS]:"fire-fcm",[tS]:"fire-fcm-compat",[nS]:"fire-perf",[rS]:"fire-perf-compat",[sS]:"fire-rc",[iS]:"fire-rc-compat",[oS]:"fire-gcs",[aS]:"fire-gcs-compat",[lS]:"fire-fst",[uS]:"fire-fst-compat",[cS]:"fire-vertex","fire-js":"fire-js",[dS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,mS=new Map,Bh=new Map;function B0(t,e){try{t.container.addComponent(e)}catch(n){Qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function In(t){const e=t.name;if(Bh.has(e))return Qn.debug(`There were multiple attempts to register component ${e}.`),!1;Bh.set(e,t);for(const n of mc.values())B0(n,t);for(const n of mS.values())B0(n,t);return!0}function Ns(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new Es("app","Firebase",pS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=hS;function Y_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=$_()),!n)throw Ar.create("no-options");const i=mc.get(s);if(i){if(Zo(n,i.options)&&Zo(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const a=new NI(s);for(const u of Bh.values())a.addComponent(u);const c=new gS(n,r,a);return mc.set(s,c),c}function vm(t=zh){const e=mc.get(t);if(!e&&t===zh&&$_())return Y_();if(!e)throw Ar.create("no-app",{appName:t});return e}function Ht(t,e,n){var r;let s=(r=fS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qn.warn(c.join(" "));return}In(new dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firebase-heartbeat-database",vS=1,ea="firebase-heartbeat-store";let _d=null;function J_(){return _d||(_d=K_(yS,vS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ea)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),_d}async function xS(t){try{const n=(await J_()).transaction(ea),r=await n.objectStore(ea).get(X_(t));return await n.done,r}catch(e){if(e instanceof pn)Qn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qn.warn(n.message)}}}async function $0(t,e){try{const r=(await J_()).transaction(ea,"readwrite");await r.objectStore(ea).put(e,X_(t)),await r.done}catch(n){if(n instanceof pn)Qn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Qn.warn(r.message)}}}function X_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=1024,wS=30*24*60*60*1e3;class bS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new NS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n,r;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=G0();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(c=>c.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{const u=new Date(c.date).valueOf();return Date.now()-u<=wS}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Qn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G0(),{heartbeatsToSend:r,unsentEntries:s}=ES(this._heartbeatsCache.heartbeats),i=fc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Qn.warn(n),""}}}function G0(){return new Date().toISOString().substring(0,10)}function ES(t,e=_S){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),H0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),H0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pm()?gm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function H0(t){return fc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(t){In(new dn("platform-logger",e=>new FI(e),"PRIVATE")),In(new dn("heartbeat",e=>new bS(e),"PRIVATE")),Ht(qh,z0,t),Ht(qh,z0,"esm2017"),Ht("fire-js","")}TS("");function xm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IS=Z_,ew=new Es("auth","Firebase",Z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=new eu("@firebase/auth");function SS(t,...e){pc.logLevel<=oe.WARN&&pc.warn(`Auth (${ki}): ${t}`,...e)}function jl(t,...e){pc.logLevel<=oe.ERROR&&pc.error(`Auth (${ki}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,...e){throw wm(t,...e)}function cn(t,...e){return wm(t,...e)}function _m(t,e,n){const r=Object.assign(Object.assign({},IS()),{[e]:n});return new Es("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return _m(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AS(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Yt(t,"argument-error"),_m(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ew.create(t,...e)}function Z(t,e,...n){if(!t)throw wm(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jl(e),new Error(e)}function Kn(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jS(){return W0()==="http:"||W0()==="https:"}function W0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jS()||mm()||"connection"in navigator)?navigator.onLine:!0}function CS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=iI()||aI()}get(){return kS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new va(3e4,6e4);function er(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gn(t,e,n,r,s={}){return nw(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=ya(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),tw.fetch()(rw(t,t.config.apiHost,n,c),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function nw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PS),e);try{const s=new LS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw cl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw cl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw cl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw cl(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _m(t,f,d);Yt(t,f)}}catch(s){if(s instanceof pn)throw s;Yt(t,"network-request-failed",{message:String(s)})}}async function xa(t,e,n,r,s={}){const i=await gn(t,e,n,r,s);return"mfaPendingCredential"in i&&Yt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function rw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?bm(t.config,s):`${t.config.apiScheme}://${s}`}function DS(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),RS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function cl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cn(t,e,r);return s.customData._tokenResponse=n,s}function Q0(t){return t!==void 0&&t.enterprise!==void 0}class MS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DS(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function OS(t,e){return gn(t,"GET","/v2/recaptchaConfig",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(t,e){return gn(t,"POST","/v1/accounts:delete",e)}async function sw(t,e){return gn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(t,e=!1){const n=Te(t),r=await n.getIdToken(e),s=Em(r);Z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ao(wd(s.auth_time)),issuedAtTime:Ao(wd(s.iat)),expirationTime:Ao(wd(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function wd(t){return Number(t)*1e3}function Em(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jl("JWT malformed, contained fewer than 3 sections"),null;try{const s=z_(n);return s?JSON.parse(s):(jl("Failed to decode base64 JWT payload"),null)}catch(s){return jl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function K0(t){const e=Em(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pn&&US(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function US({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ao(this.lastLoginAt),this.creationTime=Ao(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ds(t,sw(n,{idToken:r}));Z(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iw(i.providerUserInfo):[],c=BS(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Gh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function zS(t){const e=Te(t);await gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iw(t){return t.map(e=>{var{providerId:n}=e,r=xm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(t,e){const n=await nw(t,{},async()=>{const r=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=rw(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",tw.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function GS(t,e){return gn(t,"POST","/v2/accounts:revokeToken",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=K0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await $S(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new si;return r&&(Z(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Z(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Z(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new si,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=xm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Gh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ds(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FS(this,e)}reload(){return zS(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await ds(this,VS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(a=n.photoURL)!==null&&a!==void 0?a:void 0,k=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,N=(d=n.createdAt)!==null&&d!==void 0?d:void 0,E=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:M,isAnonymous:D,providerData:V,stsTokenManager:A}=n;Z(T&&A,e,"internal-error");const y=si.fromJSON(this.name,A);Z(typeof T=="string",e,"internal-error"),or(m,e.name),or(g,e.name),Z(typeof M=="boolean",e,"internal-error"),Z(typeof D=="boolean",e,"internal-error"),or(w,e.name),or(S,e.name),or(k,e.name),or(R,e.name),or(N,e.name),or(E,e.name);const v=new Vn({uid:T,auth:e,email:g,emailVerified:M,displayName:m,isAnonymous:D,photoURL:S,phoneNumber:w,tenantId:k,stsTokenManager:y,createdAt:N,lastLoginAt:E});return V&&Array.isArray(V)&&(v.providerData=V.map(_=>Object.assign({},_))),R&&(v._redirectEventId=R),v}static async _fromIdTokenResponse(e,n,r=!1){const s=new si;s.updateFromServerResponse(n);const i=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Z(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iw(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new si;c.updateFromIdToken(r);const u=new Vn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Gh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=new Map;function Fn(t){Kn(t instanceof Function,"Expected a class definition");let e=Y0.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Y0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ow.type="NONE";const J0=ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t,e,n){return`firebase:${t}:${e}:${n}`}class ii{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=kl(this.userKey,s.apiKey,i),this.fullPersistenceKey=kl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ii(Fn(J0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fn(J0);const a=kl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const m=Vn._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ii(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new ii(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hw(e))return"Blackberry";if(fw(e))return"Webos";if(lw(e))return"Safari";if((e.includes("chrome/")||cw(e))&&!e.includes("edge/"))return"Chrome";if(dw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aw(t=ft()){return/firefox\//i.test(t)}function lw(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cw(t=ft()){return/crios\//i.test(t)}function uw(t=ft()){return/iemobile/i.test(t)}function dw(t=ft()){return/android/i.test(t)}function hw(t=ft()){return/blackberry/i.test(t)}function fw(t=ft()){return/webos/i.test(t)}function Nm(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HS(t=ft()){var e;return Nm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WS(){return lI()&&document.documentMode===10}function mw(t=ft()){return Nm(t)||dw(t)||fw(t)||hw(t)||/windows phone/i.test(t)||uw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t,e=[]){let n;switch(t){case"Browser":n=X0(ft());break;case"Worker":n=`${X0(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ki}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(t,e={}){return gn(t,"GET","/v2/passwordPolicy",er(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=6;class JS{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:YS,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z0(this),this.idTokenSubscription=new Z0(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ew,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ii.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sw(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(on(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=CS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(zn(this));const n=e?Te(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KS(this),n=new JS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Es("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await GS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await ii.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&SS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function tr(t){return Te(t)}class Z0{constructor(e){this.auth=e,this.observer=null,this.addObserver=mI(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZS(t){tu=t}function gw(t){return tu.loadJS(t)}function eA(){return tu.recaptchaEnterpriseScript}function tA(){return tu.gapiScript}function nA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const rA="recaptcha-enterprise",sA="NO_RECAPTCHA";class iA{constructor(e){this.type=rA,this.auth=tr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{OS(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new MS(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;Q0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(sA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&Q0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=eA();u.length!==0&&(u+=c),gw(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function ey(t,e,n,r=!1){const s=new iA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function yc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ey(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await ey(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(t,e){const n=Ns(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zo(i,e??{}))return s;Yt(s,"already-initialized")}return n.initialize({options:e})}function aA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lA(t,e,n){const r=tr(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=yw(e),{host:a,port:c}=cA(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),uA()}function yw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cA(t){const e=yw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ty(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:ty(a)}}}function ty(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function dA(t,e){return gn(t,"POST","/v1/accounts:update",e)}async function hA(t,e){return gn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fA(t,e){return xa(t,"POST","/v1/accounts:signInWithPassword",er(t,e))}async function vw(t,e){return gn(t,"POST","/v1/accounts:sendOobCode",er(t,e))}async function mA(t,e){return vw(t,e)}async function pA(t,e){return vw(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e){return xa(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}async function yA(t,e){return xa(t,"POST","/v1/accounts:signInWithEmailLink",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Tm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ta(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ta(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yc(e,n,"signInWithPassword",fA);case"emailLink":return gA(e,{email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yc(e,r,"signUpPassword",hA);case"emailLink":return yA(e,{idToken:n,email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oi(t,e){return xa(t,"POST","/v1/accounts:signInWithIdp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="http://localhost";class hs extends Tm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=xm(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new hs(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return oi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,oi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,oi(e,n)}buildRequest(){const e={requestUri:vA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ya(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _A(t){const e=ho(fo(t)).link,n=e?ho(fo(e)).deep_link_id:null,r=ho(fo(t)).deep_link_id;return(r?ho(fo(r)).link:null)||r||n||e||t}class Im{constructor(e){var n,r,s,i,a,c;const u=ho(fo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=xA((s=u.mode)!==null&&s!==void 0?s:null);Z(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=_A(e);try{return new Im(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.providerId=Ts.PROVIDER_ID}static credential(e,n){return ta._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Im.parseLink(n);return Z(r,"argument-error"),ta._fromEmailAndCode(e,r.code,r.tenantId)}}Ts.PROVIDER_ID="password";Ts.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ts.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends _a{constructor(){super("facebook.com")}static credential(e){return hs._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.FACEBOOK_SIGN_IN_METHOD="facebook.com";dr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends _a{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hs._fromParams({providerId:Rn.PROVIDER_ID,signInMethod:Rn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rn.credentialFromTaggedObject(e)}static credentialFromError(e){return Rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rn.credential(n,r)}catch{return null}}}Rn.GOOGLE_SIGN_IN_METHOD="google.com";Rn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends _a{constructor(){super("github.com")}static credential(e){return hs._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr extends _a{constructor(){super("twitter.com")}static credential(e,n){return hs._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return fr.credential(n,r)}catch{return null}}}fr.TWITTER_SIGN_IN_METHOD="twitter.com";fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(t,e){return xa(t,"POST","/v1/accounts:signUp",er(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vn._fromIdTokenResponse(e,r,s),a=ny(r);return new fs({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ny(r);return new fs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ny(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends pn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,vc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new vc(e,n,r,s)}}function xw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vc._fromErrorAndOperation(t,i,e,r):i})}async function bA(t,e,n=!1){const r=await ds(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _w(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await ds(t,xw(r,s,e,t),n);Z(i.idToken,r,"internal-error");const a=Em(i.idToken);Z(a,r,"internal-error");const{sub:c}=a;return Z(t.uid===c,r,"user-mismatch"),fs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ww(t,e,n=!1){if(on(t.app))return Promise.reject(zn(t));const r="signIn",s=await xw(t,r,e),i=await fs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function EA(t,e){return ww(tr(t),e)}async function NA(t,e){return _w(Te(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bw(t){const e=tr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Hh(t,e,n){const r=tr(t);await yc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",pA)}async function Ew(t,e,n){if(on(t.app))return Promise.reject(zn(t));const r=tr(t),a=await yc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&bw(t),u}),c=await fs._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function Wh(t,e,n){return on(t.app)?Promise.reject(zn(t)):EA(Te(t),Ts.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&bw(t),r})}async function ry(t,e){const n=Te(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:i}=await mA(n.auth,s);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e){return gn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nw(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Te(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await ds(r,TA(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function IA(t,e){return SA(Te(t),null,e)}async function SA(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const a=await ds(t,dA(r,i));await t._updateTokensIfNecessary(a,!0)}function AA(t,e,n,r){return Te(t).onIdTokenChanged(e,n,r)}function jA(t,e,n){return Te(t).beforeAuthStateChanged(e,n)}function kA(t,e,n,r){return Te(t).onAuthStateChanged(e,n,r)}function CA(t){return Te(t).signOut()}const xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xc,"1"),this.storage.removeItem(xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=1e3,RA=10;class Iw extends Tw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);WS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Iw.type="LOCAL";const DA=Iw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw extends Tw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Sw.type="SESSION";const Aw=Sw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await LA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Am("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return window}function OA(t){En().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(){return typeof En().WorkerGlobalScope<"u"&&typeof En().importScripts=="function"}async function VA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function UA(){return jw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="firebaseLocalStorageDb",qA=1,_c="firebaseLocalStorage",Cw="fbase_key";class wa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ru(t,e){return t.transaction([_c],e?"readwrite":"readonly").objectStore(_c)}function zA(){const t=indexedDB.deleteDatabase(kw);return new wa(t).toPromise()}function Qh(){const t=indexedDB.open(kw,qA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(_c,{keyPath:Cw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(_c)?e(r):(r.close(),await zA(),e(await Qh()))})})}async function sy(t,e,n){const r=ru(t,!0).put({[Cw]:e,value:n});return new wa(r).toPromise()}async function BA(t,e){const n=ru(t,!1).get(e),r=await new wa(n).toPromise();return r===void 0?null:r.value}function iy(t,e){const n=ru(t,!0).delete(e);return new wa(n).toPromise()}const $A=800,GA=3;class Pw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nu._getInstance(UA()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VA(),!this.activeServiceWorker)return;this.sender=new MA(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qh();return await sy(e,xc,"1"),await iy(e,xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>sy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>BA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>iy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ru(s,!1).getAll();return new wa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$A)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Pw.type="LOCAL";const HA=Pw;new va(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t,e){return e?Fn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Tm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return oi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return oi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WA(t){return ww(t.auth,new jm(t),t.bypassAuthState)}function QA(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),_w(n,new jm(t),t.bypassAuthState)}async function KA(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),bA(n,new jm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WA;case"linkViaPopup":case"linkViaRedirect":return KA;case"reauthViaPopup":case"reauthViaRedirect":return QA;default:Yt(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new va(2e3,1e4);async function JA(t,e,n){if(on(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const r=tr(t);AS(t,e,Sm);const s=Rw(r,n);return new es(r,"signInViaPopup",e,s).executeNotNull()}class es extends Dw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=Am();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YA.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="pendingRedirect",Cl=new Map;class ZA extends Dw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cl.get(this.auth._key());if(!e){try{const r=await ej(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cl.set(this.auth._key(),e)}return this.bypassAuthState||Cl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ej(t,e){const n=rj(e),r=nj(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function tj(t,e){Cl.set(t._key(),e)}function nj(t){return Fn(t._redirectPersistence)}function rj(t){return kl(XA,t.config.apiKey,t.name)}async function sj(t,e,n=!1){if(on(t.app))return Promise.reject(zn(t));const r=tr(t),s=Rw(r,e),a=await new ZA(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=10*60*1e3;class oj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ij&&this.cachedEventUids.clear(),this.cachedEventUids.has(oy(e))}saveEventToCache(e){this.cachedEventUids.add(oy(e)),this.lastProcessedEventTime=Date.now()}}function oy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function aj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj(t,e={}){return gn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uj=/^https?/;async function dj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lj(t);for(const n of e)try{if(hj(n))return}catch{}Yt(t,"unauthorized-domain")}function hj(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!uj.test(n))return!1;if(cj.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=new va(3e4,6e4);function ay(){const t=En().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function mj(t){return new Promise((e,n)=>{var r,s,i;function a(){ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ay(),n(cn(t,"network-request-failed"))},timeout:fj.get()})}if(!((s=(r=En().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=En().gapi)===null||i===void 0)&&i.load)a();else{const c=nA("iframefcb");return En()[c]=()=>{gapi.load?a():n(cn(t,"network-request-failed"))},gw(`${tA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Pl=null,e})}let Pl=null;function pj(t){return Pl=Pl||mj(t),Pl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new va(5e3,15e3),yj="__/auth/iframe",vj="emulator/auth/iframe",xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wj(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bm(e,vj):`https://${t.config.authDomain}/${yj}`,r={apiKey:e.apiKey,appName:t.name,v:ki},s=_j.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ya(r).slice(1)}`}async function bj(t){const e=await pj(t),n=En().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:wj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xj,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=cn(t,"network-request-failed"),c=En().setTimeout(()=>{i(a)},gj.get());function u(){En().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Nj=500,Tj=600,Ij="_blank",Sj="http://localhost";class ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Aj(t,e,n,r=Nj,s=Tj){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Ej),{width:r.toString(),height:s.toString(),top:i,left:a}),d=ft().toLowerCase();n&&(c=cw(d)?Ij:n),aw(d)&&(e=e||Sj,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,S])=>`${g}${w}=${S},`,"");if(HS(d)&&c!=="_self")return jj(e||"",c),new ly(null);const m=window.open(e||"",c,f);Z(m,t,"popup-blocked");try{m.focus()}catch{}return new ly(m)}function jj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj="__/auth/handler",Cj="emulator/auth/handler",Pj=encodeURIComponent("fac");async function cy(t,e,n,r,s,i){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ki,eventId:s};if(e instanceof Sm){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",fI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof _a){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${Pj}=${encodeURIComponent(u)}`:"";return`${Rj(t)}?${ya(c).slice(1)}${d}`}function Rj({config:t}){return t.emulator?bm(t,Cj):`https://${t.authDomain}/${kj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd="webStorageSupport";class Dj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Aw,this._completeRedirectFn=sj,this._overrideRedirectResult=tj}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await cy(e,n,r,$h(),s);return Aj(e,a,Am())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await cy(e,n,r,$h(),s);return OA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bj(e),r=new oj(e);return n.register("authEvent",s=>(Z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bd,{type:bd},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[bd];a!==void 0&&n(!!a),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mw()||lw()||Nm()}}const Lj=Dj;var uy="@firebase/auth",dy="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vj(t){In(new dn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Z(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(t)},d=new XS(r,s,i,u);return aA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),In(new dn("auth-internal",e=>{const n=tr(e.getProvider("auth").getImmediate());return(r=>new Mj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ht(uy,dy,Oj(t)),Ht(uy,dy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=5*60,Uj=G_("authIdTokenMaxAge")||Fj;let hy=null;const qj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Uj)return;const s=n==null?void 0:n.token;hy!==s&&(hy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zj(t=vm()){const e=Ns(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oA(t,{popupRedirectResolver:Lj,persistence:[HA,DA,Aw]}),r=G_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=qj(i.toString());jA(n,a,()=>a(n.currentUser)),AA(n,c=>a(c))}}const s=B_("auth");return s&&lA(n,`http://${s}`),n}function Bj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Bj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vj("Browser");var $j="firebase",Gj="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht($j,Gj,"app");var fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,Mw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function v(){}v.prototype=y.prototype,A.D=y.prototype,A.prototype=new v,A.prototype.constructor=A,A.C=function(_,j,P){for(var b=Array(arguments.length-2),se=2;se<arguments.length;se++)b[se-2]=arguments[se];return y.prototype[j].apply(_,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,v){v||(v=0);var _=Array(16);if(typeof y=="string")for(var j=0;16>j;++j)_[j]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(j=0;16>j;++j)_[j]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=A.g[0],v=A.g[1],j=A.g[2];var P=A.g[3],b=y+(P^v&(j^P))+_[0]+3614090360&4294967295;y=v+(b<<7&4294967295|b>>>25),b=P+(j^y&(v^j))+_[1]+3905402710&4294967295,P=y+(b<<12&4294967295|b>>>20),b=j+(v^P&(y^v))+_[2]+606105819&4294967295,j=P+(b<<17&4294967295|b>>>15),b=v+(y^j&(P^y))+_[3]+3250441966&4294967295,v=j+(b<<22&4294967295|b>>>10),b=y+(P^v&(j^P))+_[4]+4118548399&4294967295,y=v+(b<<7&4294967295|b>>>25),b=P+(j^y&(v^j))+_[5]+1200080426&4294967295,P=y+(b<<12&4294967295|b>>>20),b=j+(v^P&(y^v))+_[6]+2821735955&4294967295,j=P+(b<<17&4294967295|b>>>15),b=v+(y^j&(P^y))+_[7]+4249261313&4294967295,v=j+(b<<22&4294967295|b>>>10),b=y+(P^v&(j^P))+_[8]+1770035416&4294967295,y=v+(b<<7&4294967295|b>>>25),b=P+(j^y&(v^j))+_[9]+2336552879&4294967295,P=y+(b<<12&4294967295|b>>>20),b=j+(v^P&(y^v))+_[10]+4294925233&4294967295,j=P+(b<<17&4294967295|b>>>15),b=v+(y^j&(P^y))+_[11]+2304563134&4294967295,v=j+(b<<22&4294967295|b>>>10),b=y+(P^v&(j^P))+_[12]+1804603682&4294967295,y=v+(b<<7&4294967295|b>>>25),b=P+(j^y&(v^j))+_[13]+4254626195&4294967295,P=y+(b<<12&4294967295|b>>>20),b=j+(v^P&(y^v))+_[14]+2792965006&4294967295,j=P+(b<<17&4294967295|b>>>15),b=v+(y^j&(P^y))+_[15]+1236535329&4294967295,v=j+(b<<22&4294967295|b>>>10),b=y+(j^P&(v^j))+_[1]+4129170786&4294967295,y=v+(b<<5&4294967295|b>>>27),b=P+(v^j&(y^v))+_[6]+3225465664&4294967295,P=y+(b<<9&4294967295|b>>>23),b=j+(y^v&(P^y))+_[11]+643717713&4294967295,j=P+(b<<14&4294967295|b>>>18),b=v+(P^y&(j^P))+_[0]+3921069994&4294967295,v=j+(b<<20&4294967295|b>>>12),b=y+(j^P&(v^j))+_[5]+3593408605&4294967295,y=v+(b<<5&4294967295|b>>>27),b=P+(v^j&(y^v))+_[10]+38016083&4294967295,P=y+(b<<9&4294967295|b>>>23),b=j+(y^v&(P^y))+_[15]+3634488961&4294967295,j=P+(b<<14&4294967295|b>>>18),b=v+(P^y&(j^P))+_[4]+3889429448&4294967295,v=j+(b<<20&4294967295|b>>>12),b=y+(j^P&(v^j))+_[9]+568446438&4294967295,y=v+(b<<5&4294967295|b>>>27),b=P+(v^j&(y^v))+_[14]+3275163606&4294967295,P=y+(b<<9&4294967295|b>>>23),b=j+(y^v&(P^y))+_[3]+4107603335&4294967295,j=P+(b<<14&4294967295|b>>>18),b=v+(P^y&(j^P))+_[8]+1163531501&4294967295,v=j+(b<<20&4294967295|b>>>12),b=y+(j^P&(v^j))+_[13]+2850285829&4294967295,y=v+(b<<5&4294967295|b>>>27),b=P+(v^j&(y^v))+_[2]+4243563512&4294967295,P=y+(b<<9&4294967295|b>>>23),b=j+(y^v&(P^y))+_[7]+1735328473&4294967295,j=P+(b<<14&4294967295|b>>>18),b=v+(P^y&(j^P))+_[12]+2368359562&4294967295,v=j+(b<<20&4294967295|b>>>12),b=y+(v^j^P)+_[5]+4294588738&4294967295,y=v+(b<<4&4294967295|b>>>28),b=P+(y^v^j)+_[8]+2272392833&4294967295,P=y+(b<<11&4294967295|b>>>21),b=j+(P^y^v)+_[11]+1839030562&4294967295,j=P+(b<<16&4294967295|b>>>16),b=v+(j^P^y)+_[14]+4259657740&4294967295,v=j+(b<<23&4294967295|b>>>9),b=y+(v^j^P)+_[1]+2763975236&4294967295,y=v+(b<<4&4294967295|b>>>28),b=P+(y^v^j)+_[4]+1272893353&4294967295,P=y+(b<<11&4294967295|b>>>21),b=j+(P^y^v)+_[7]+4139469664&4294967295,j=P+(b<<16&4294967295|b>>>16),b=v+(j^P^y)+_[10]+3200236656&4294967295,v=j+(b<<23&4294967295|b>>>9),b=y+(v^j^P)+_[13]+681279174&4294967295,y=v+(b<<4&4294967295|b>>>28),b=P+(y^v^j)+_[0]+3936430074&4294967295,P=y+(b<<11&4294967295|b>>>21),b=j+(P^y^v)+_[3]+3572445317&4294967295,j=P+(b<<16&4294967295|b>>>16),b=v+(j^P^y)+_[6]+76029189&4294967295,v=j+(b<<23&4294967295|b>>>9),b=y+(v^j^P)+_[9]+3654602809&4294967295,y=v+(b<<4&4294967295|b>>>28),b=P+(y^v^j)+_[12]+3873151461&4294967295,P=y+(b<<11&4294967295|b>>>21),b=j+(P^y^v)+_[15]+530742520&4294967295,j=P+(b<<16&4294967295|b>>>16),b=v+(j^P^y)+_[2]+3299628645&4294967295,v=j+(b<<23&4294967295|b>>>9),b=y+(j^(v|~P))+_[0]+4096336452&4294967295,y=v+(b<<6&4294967295|b>>>26),b=P+(v^(y|~j))+_[7]+1126891415&4294967295,P=y+(b<<10&4294967295|b>>>22),b=j+(y^(P|~v))+_[14]+2878612391&4294967295,j=P+(b<<15&4294967295|b>>>17),b=v+(P^(j|~y))+_[5]+4237533241&4294967295,v=j+(b<<21&4294967295|b>>>11),b=y+(j^(v|~P))+_[12]+1700485571&4294967295,y=v+(b<<6&4294967295|b>>>26),b=P+(v^(y|~j))+_[3]+2399980690&4294967295,P=y+(b<<10&4294967295|b>>>22),b=j+(y^(P|~v))+_[10]+4293915773&4294967295,j=P+(b<<15&4294967295|b>>>17),b=v+(P^(j|~y))+_[1]+2240044497&4294967295,v=j+(b<<21&4294967295|b>>>11),b=y+(j^(v|~P))+_[8]+1873313359&4294967295,y=v+(b<<6&4294967295|b>>>26),b=P+(v^(y|~j))+_[15]+4264355552&4294967295,P=y+(b<<10&4294967295|b>>>22),b=j+(y^(P|~v))+_[6]+2734768916&4294967295,j=P+(b<<15&4294967295|b>>>17),b=v+(P^(j|~y))+_[13]+1309151649&4294967295,v=j+(b<<21&4294967295|b>>>11),b=y+(j^(v|~P))+_[4]+4149444226&4294967295,y=v+(b<<6&4294967295|b>>>26),b=P+(v^(y|~j))+_[11]+3174756917&4294967295,P=y+(b<<10&4294967295|b>>>22),b=j+(y^(P|~v))+_[2]+718787259&4294967295,j=P+(b<<15&4294967295|b>>>17),b=v+(P^(j|~y))+_[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(j+(b<<21&4294967295|b>>>11))&4294967295,A.g[2]=A.g[2]+j&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var v=y-this.blockSize,_=this.B,j=this.h,P=0;P<y;){if(j==0)for(;P<=v;)s(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<y;)if(_[j++]=A.charCodeAt(P++),j==this.blockSize){s(this,_),j=0;break}}else for(;P<y;)if(_[j++]=A[P++],j==this.blockSize){s(this,_),j=0;break}}this.h=j,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var v=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=v&255,v/=256;for(this.u(A),A=Array(16),y=v=0;4>y;++y)for(var _=0;32>_;_+=8)A[v++]=this.g[y]>>>_&255;return A};function i(A,y){var v=c;return Object.prototype.hasOwnProperty.call(v,A)?v[A]:v[A]=y(A)}function a(A,y){this.h=y;for(var v=[],_=!0,j=A.length-1;0<=j;j--){var P=A[j]|0;_&&P==y||(v[j]=P,_=!1)}this.g=v}var c={};function u(A){return-128<=A&&128>A?i(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return R(d(-A));for(var y=[],v=1,_=0;A>=v;_++)y[_]=A/v|0,v*=4294967296;return new a(y,0)}function f(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return R(f(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=d(Math.pow(y,8)),_=m,j=0;j<A.length;j+=8){var P=Math.min(8,A.length-j),b=parseInt(A.substring(j,j+P),y);8>P?(P=d(Math.pow(y,P)),_=_.j(P).add(d(b))):(_=_.j(v),_=_.add(d(b)))}return _}var m=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-R(this).m();for(var A=0,y=1,v=0;v<this.g.length;v++){var _=this.i(v);A+=(0<=_?_:4294967296+_)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(k(this))return"-"+R(this).toString(A);for(var y=d(Math.pow(A,6)),v=this,_="";;){var j=M(v,y).g;v=N(v,j.j(y));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(A);if(v=j,S(v))return P+_;for(;6>P.length;)P="0"+P;_=P+_}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function k(A){return A.h==-1}t.l=function(A){return A=N(this,A),k(A)?-1:S(A)?0:1};function R(A){for(var y=A.g.length,v=[],_=0;_<y;_++)v[_]=~A.g[_];return new a(v,~A.h).add(g)}t.abs=function(){return k(this)?R(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],_=0,j=0;j<=y;j++){var P=_+(this.i(j)&65535)+(A.i(j)&65535),b=(P>>>16)+(this.i(j)>>>16)+(A.i(j)>>>16);_=b>>>16,P&=65535,b&=65535,v[j]=b<<16|P}return new a(v,v[v.length-1]&-2147483648?-1:0)};function N(A,y){return A.add(R(y))}t.j=function(A){if(S(this)||S(A))return m;if(k(this))return k(A)?R(this).j(R(A)):R(R(this).j(A));if(k(A))return R(this.j(R(A)));if(0>this.l(w)&&0>A.l(w))return d(this.m()*A.m());for(var y=this.g.length+A.g.length,v=[],_=0;_<2*y;_++)v[_]=0;for(_=0;_<this.g.length;_++)for(var j=0;j<A.g.length;j++){var P=this.i(_)>>>16,b=this.i(_)&65535,se=A.i(j)>>>16,Ve=A.i(j)&65535;v[2*_+2*j]+=b*Ve,E(v,2*_+2*j),v[2*_+2*j+1]+=P*Ve,E(v,2*_+2*j+1),v[2*_+2*j+1]+=b*se,E(v,2*_+2*j+1),v[2*_+2*j+2]+=P*se,E(v,2*_+2*j+2)}for(_=0;_<y;_++)v[_]=v[2*_+1]<<16|v[2*_];for(_=y;_<2*y;_++)v[_]=0;return new a(v,0)};function E(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function T(A,y){this.g=A,this.h=y}function M(A,y){if(S(y))throw Error("division by zero");if(S(A))return new T(m,m);if(k(A))return y=M(R(A),y),new T(R(y.g),R(y.h));if(k(y))return y=M(A,R(y)),new T(R(y.g),y.h);if(30<A.g.length){if(k(A)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var v=g,_=y;0>=_.l(A);)v=D(v),_=D(_);var j=V(v,1),P=V(_,1);for(_=V(_,2),v=V(v,2);!S(_);){var b=P.add(_);0>=b.l(A)&&(j=j.add(v),P=b),_=V(_,1),v=V(v,1)}return y=N(A,j.j(y)),new T(j,y)}for(j=m;0<=A.l(y);){for(v=Math.max(1,Math.floor(A.m()/y.m())),_=Math.ceil(Math.log(v)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),P=d(v),b=P.j(y);k(b)||0<b.l(A);)v-=_,P=d(v),b=P.j(y);S(P)&&(P=g),j=j.add(P),A=N(A,b)}return new T(j,A)}t.A=function(A){return M(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],_=0;_<y;_++)v[_]=this.i(_)&A.i(_);return new a(v,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],_=0;_<y;_++)v[_]=this.i(_)|A.i(_);return new a(v,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),v=[],_=0;_<y;_++)v[_]=this.i(_)^A.i(_);return new a(v,this.h^A.h)};function D(A){for(var y=A.g.length+1,v=[],_=0;_<y;_++)v[_]=A.i(_)<<1|A.i(_-1)>>>31;return new a(v,A.h)}function V(A,y){var v=y>>5;y%=32;for(var _=A.g.length-v,j=[],P=0;P<_;P++)j[P]=0<y?A.i(P+v)>>>y|A.i(P+v+1)<<32-y:A.i(P+v);return new a(j,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mw=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,is=a}).apply(typeof fy<"u"?fy:typeof self<"u"?self:typeof window<"u"?window:{});var ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ow,Vw,mo,Fw,Rl,Kh,Uw,qw,zw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ul=="object"&&ul];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var x=0;x<l.length-1;x++){var L=l[x];if(!(L in p))break e;p=p[L]}l=l[l.length-1],x=p[l],h=h(x),h!=x&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,x=!1,L={next:function(){if(!x&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),l.apply(h,L)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var x=p.slice();return x.push.apply(x,arguments),l.apply(this,x)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(x,L,O){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return h.prototype[L].apply(x,B)}}function k(l){const h=l.length;if(0<h){const p=Array(h);for(let x=0;x<h;x++)p[x]=l[x];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const x=arguments[p];if(u(x)){const L=l.length||0,O=x.length||0;l.length=L+O;for(let B=0;B<O;B++)l[L+B]=x[B]}else l.push(x)}}class N{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(l){return/^[\s\xa0]*$/.test(l)}function T(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function M(l){return M[" "](l),l}M[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(l,h,p){for(const x in l)h.call(p,l[x],x,l)}function A(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(l,h){let p,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(p in x)l[p]=x[p];for(let O=0;O<v.length;O++)p=v[O],Object.prototype.hasOwnProperty.call(x,p)&&(l[p]=x[p])}}function j(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){c.setTimeout(()=>{throw l},0)}function b(){var l=W;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class se{constructor(){this.h=this.g=null}add(h,p){const x=Ve.get();x.set(h,p),this.h?this.h.next=x:this.g=x,this.h=x}}var Ve=new N(()=>new Et,l=>l.reset());class Et{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let tt,$=!1,W=new se,J=()=>{const l=c.Promise.resolve(void 0);tt=()=>{l.then(ue)}};var ue=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(p){P(p)}var h=Ve;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Nt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function Jt(l,h){if(xe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,x=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{M(h.nodeName);var L=!0;break e}catch{}L=!1}L||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Xt[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Jt.aa.h.call(this)}}S(Jt,xe);var Xt={2:"touch",3:"pen",4:"mouse"};Jt.prototype.h=function(){Jt.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Zt="closure_listenable_"+(1e6*Math.random()|0),ja=0;function ka(l,h,p,x,L){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!x,this.ha=L,this.key=++ja,this.da=this.fa=!1}function js(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ks(l){this.src=l,this.g={},this.h=0}ks.prototype.add=function(l,h,p,x,L){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var B=Pt(l,h,x,L);return-1<B?(h=l[B],p||(h.fa=!1)):(h=new ka(h,this.src,O,!!x,L),h.fa=p,l.push(h)),h};function qr(l,h){var p=h.type;if(p in l.g){var x=l.g[p],L=Array.prototype.indexOf.call(x,h,void 0),O;(O=0<=L)&&Array.prototype.splice.call(x,L,1),O&&(js(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Pt(l,h,p,x){for(var L=0;L<l.length;++L){var O=l[L];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==x)return L}return-1}var q="closure_lm_"+(1e6*Math.random()|0),fe={};function Mi(l,h,p,x,L){if(Array.isArray(h)){for(var O=0;O<h.length;O++)Mi(l,h[O],p,x,L);return null}return p=Ep(p),l&&l[Zt]?l.K(h,p,d(x)?!!x.capture:!!x,L):Oi(l,h,p,!1,x,L)}function Oi(l,h,p,x,L,O){if(!h)throw Error("Invalid event type");var B=d(L)?!!L.capture:!!L,ge=Tu(l);if(ge||(l[q]=ge=new ks(l)),p=ge.add(h,p,x,B,O),p.proxy)return p;if(x=$1(),p.proxy=x,x.src=l,x.listener=p,l.addEventListener)Nt||(L=B),L===void 0&&(L=!1),l.addEventListener(h.toString(),x,L);else if(l.attachEvent)l.attachEvent(bp(h.toString()),x);else if(l.addListener&&l.removeListener)l.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $1(){function l(p){return h.call(l.src,l.listener,p)}const h=G1;return l}function wp(l,h,p,x,L){if(Array.isArray(h))for(var O=0;O<h.length;O++)wp(l,h[O],p,x,L);else x=d(x)?!!x.capture:!!x,p=Ep(p),l&&l[Zt]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Pt(O,p,x,L),-1<p&&(js(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Tu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Pt(h,p,x,L)),(p=-1<l?h[l]:null)&&Nu(p))}function Nu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Zt])qr(h.i,l);else{var p=l.type,x=l.proxy;h.removeEventListener?h.removeEventListener(p,x,l.capture):h.detachEvent?h.detachEvent(bp(p),x):h.addListener&&h.removeListener&&h.removeListener(x),(p=Tu(h))?(qr(p,l),p.h==0&&(p.src=null,h[q]=null)):js(l)}}}function bp(l){return l in fe?fe[l]:fe[l]="on"+l}function G1(l,h){if(l.da)l=!0;else{h=new Jt(h,this);var p=l.listener,x=l.ha||l.src;l.fa&&Nu(l),l=p.call(x,h)}return l}function Tu(l){return l=l[q],l instanceof ks?l:null}var Iu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ep(l){return typeof l=="function"?l:(l[Iu]||(l[Iu]=function(h){return l.handleEvent(h)}),l[Iu])}function nt(){me.call(this),this.i=new ks(this),this.M=this,this.F=null}S(nt,me),nt.prototype[Zt]=!0,nt.prototype.removeEventListener=function(l,h,p,x){wp(this,l,h,p,x)};function mt(l,h){var p,x=l.F;if(x)for(p=[];x;x=x.F)p.push(x);if(l=l.M,x=h.type||h,typeof h=="string")h=new xe(h,l);else if(h instanceof xe)h.target=h.target||l;else{var L=h;h=new xe(x,l),_(h,L)}if(L=!0,p)for(var O=p.length-1;0<=O;O--){var B=h.g=p[O];L=Ca(B,x,!0,h)&&L}if(B=h.g=l,L=Ca(B,x,!0,h)&&L,L=Ca(B,x,!1,h)&&L,p)for(O=0;O<p.length;O++)B=h.g=p[O],L=Ca(B,x,!1,h)&&L}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],x=0;x<p.length;x++)js(p[x]);delete l.g[h],l.h--}}this.F=null},nt.prototype.K=function(l,h,p,x){return this.i.add(String(l),h,!1,p,x)},nt.prototype.L=function(l,h,p,x){return this.i.add(String(l),h,!0,p,x)};function Ca(l,h,p,x){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var L=!0,O=0;O<h.length;++O){var B=h[O];if(B&&!B.da&&B.capture==p){var ge=B.listener,We=B.ha||B.src;B.fa&&qr(l.i,B),L=ge.call(We,x)!==!1&&L}}return L&&!x.defaultPrevented}function Np(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Tp(l){l.g=Np(()=>{l.g=null,l.i&&(l.i=!1,Tp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class H1 extends me{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Tp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vi(l){me.call(this),this.h=l,this.g={}}S(Vi,me);var Ip=[];function Sp(l){V(l.g,function(h,p){this.g.hasOwnProperty(p)&&Nu(h)},l),l.g={}}Vi.prototype.N=function(){Vi.aa.N.call(this),Sp(this)},Vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Su=c.JSON.stringify,W1=c.JSON.parse,Q1=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Au(){}Au.prototype.h=null;function Ap(l){return l.h||(l.h=l.i())}function jp(){}var Fi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ju(){xe.call(this,"d")}S(ju,xe);function ku(){xe.call(this,"c")}S(ku,xe);var zr={},kp=null;function Pa(){return kp=kp||new nt}zr.La="serverreachability";function Cp(l){xe.call(this,zr.La,l)}S(Cp,xe);function Ui(l){const h=Pa();mt(h,new Cp(h))}zr.STAT_EVENT="statevent";function Pp(l,h){xe.call(this,zr.STAT_EVENT,l),this.stat=h}S(Pp,xe);function pt(l){const h=Pa();mt(h,new Pp(h,l))}zr.Ma="timingevent";function Rp(l,h){xe.call(this,zr.Ma,l),this.size=h}S(Rp,xe);function qi(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function zi(){this.g=!0}zi.prototype.xa=function(){this.g=!1};function K1(l,h,p,x,L,O){l.info(function(){if(l.g)if(O)for(var B="",ge=O.split("&"),We=0;We<ge.length;We++){var de=ge[We].split("=");if(1<de.length){var rt=de[0];de=de[1];var st=rt.split("_");B=2<=st.length&&st[1]=="type"?B+(rt+"="+de+"&"):B+(rt+"=redacted&")}}else B=null;else B=O;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+h+`
`+p+`
`+B})}function Y1(l,h,p,x,L,O,B){l.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+h+`
`+p+`
`+O+" "+B})}function Cs(l,h,p,x){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+X1(l,p)+(x?" "+x:"")})}function J1(l,h){l.info(function(){return"TIMEOUT: "+h})}zi.prototype.info=function(){};function X1(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var x=p[l];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var O=L[0];if(O!="noop"&&O!="stop"&&O!="close")for(var B=1;B<L.length;B++)L[B]=""}}}}return Su(p)}catch{return h}}var Ra={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cu;function Da(){}S(Da,Au),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},Cu=new Da;function nr(l,h,p,x){this.j=l,this.i=h,this.l=p,this.R=x||1,this.U=new Vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lp}function Lp(){this.i=null,this.g="",this.h=!1}var Mp={},Pu={};function Ru(l,h,p){l.L=1,l.v=Va(An(h)),l.m=p,l.P=!0,Op(l,null)}function Op(l,h){l.F=Date.now(),La(l),l.A=An(l.v);var p=l.A,x=l.R;Array.isArray(x)||(x=[String(x)]),Jp(p.i,"t",x),l.C=0,p=l.j.J,l.h=new Lp,l.g=pg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new H1(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,x=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ip[0]=L.toString()),L=Ip);for(var O=0;O<L.length;O++){var B=Mi(p,L[O],x||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Ui(),K1(l.i,l.u,l.A,l.l,l.R,l.m)}nr.prototype.ca=function(l){l=l.target;const h=this.M;h&&jn(l)==3?h.j():this.Y(l)},nr.prototype.Y=function(l){try{if(l==this.g)e:{const st=jn(this.g);var h=this.g.Ba();const Ds=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||sg(this.g)))){this.J||st!=4||h==7||(h==8||0>=Ds?Ui(3):Ui(2)),Du(this);var p=this.g.Z();this.X=p;t:if(Vp(this)){var x=sg(this.g);l="";var L=x.length,O=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Br(this),Bi(this);var B="";break t}this.h.i=new c.TextDecoder}for(h=0;h<L;h++)this.h.h=!0,l+=this.h.i.decode(x[h],{stream:!(O&&h==L-1)});x.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,Y1(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,We=this.g;if((ge=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ge)){var de=ge;break t}}de=null}if(p=de)Cs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lu(this,p);else{this.o=!1,this.s=3,pt(12),Br(this),Bi(this);break e}}if(this.P){p=!0;let en;for(;!this.J&&this.C<B.length;)if(en=Z1(this,B),en==Pu){st==4&&(this.s=4,pt(14),p=!1),Cs(this.i,this.l,null,"[Incomplete Response]");break}else if(en==Mp){this.s=4,pt(15),Cs(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else Cs(this.i,this.l,en,null),Lu(this,en);if(Vp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||B.length!=0||this.h.h||(this.s=1,pt(16),p=!1),this.o=this.o&&p,!p)Cs(this.i,this.l,B,"[Invalid Chunked Response]"),Br(this),Bi(this);else if(0<B.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),qu(rt),rt.M=!0,pt(11))}}else Cs(this.i,this.l,B,null),Lu(this,B);st==4&&Br(this),this.o&&!this.J&&(st==4?dg(this.j,this):(this.o=!1,La(this)))}else gE(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Br(this),Bi(this)}}}catch{}finally{}};function Vp(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Z1(l,h){var p=l.C,x=h.indexOf(`
`,p);return x==-1?Pu:(p=Number(h.substring(p,x)),isNaN(p)?Mp:(x+=1,x+p>h.length?Pu:(h=h.slice(x,x+p),l.C=x+p,h)))}nr.prototype.cancel=function(){this.J=!0,Br(this)};function La(l){l.S=Date.now()+l.I,Fp(l,l.I)}function Fp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=qi(g(l.ba,l),h)}function Du(l){l.B&&(c.clearTimeout(l.B),l.B=null)}nr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(J1(this.i,this.A),this.L!=2&&(Ui(),pt(17)),Br(this),this.s=2,Bi(this)):Fp(this,this.S-l)};function Bi(l){l.j.G==0||l.J||dg(l.j,l)}function Br(l){Du(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Sp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Lu(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Mu(p.h,l))){if(!l.K&&Mu(p.h,l)&&p.G==3){try{var x=p.Da.g.parse(h)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Ba(p),qa(p);else break e;Uu(p),pt(18)}}else p.za=L[1],0<p.za-p.T&&37500>L[2]&&p.F&&p.v==0&&!p.C&&(p.C=qi(g(p.Za,p),6e3));if(1>=zp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Gr(p,11)}else if((l.K||p.g==l)&&Ba(p),!E(h))for(L=p.Da.g.parse(h),h=0;h<L.length;h++){let de=L[h];if(p.T=de[0],de=de[1],p.G==2)if(de[0]=="c"){p.K=de[1],p.ia=de[2];const rt=de[3];rt!=null&&(p.la=rt,p.j.info("VER="+p.la));const st=de[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const Ds=de[5];Ds!=null&&typeof Ds=="number"&&0<Ds&&(x=1.5*Ds,p.L=x,p.j.info("backChannelRequestTimeoutMs_="+x)),x=p;const en=l.g;if(en){const Ga=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var O=x.h;O.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Ou(O,O.h),O.h=null))}if(x.D){const zu=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;zu&&(x.ya=zu,_e(x.I,x.D,zu))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),x=p;var B=l;if(x.qa=mg(x,x.J?x.ia:null,x.W),B.K){Bp(x.h,B);var ge=B,We=x.L;We&&(ge.I=We),ge.B&&(Du(ge),La(ge)),x.g=B}else cg(x);0<p.i.length&&za(p)}else de[0]!="stop"&&de[0]!="close"||Gr(p,7);else p.G==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?Gr(p,7):Fu(p):de[0]!="noop"&&p.l&&p.l.ta(de),p.v=0)}}Ui(4)}catch{}}var eE=class{constructor(l,h){this.g=l,this.map=h}};function Up(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function zp(l){return l.h?1:l.g?l.g.size:0}function Mu(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ou(l,h){l.g?l.g.add(h):l.h=h}function Bp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Up.prototype.cancel=function(){if(this.i=$p(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $p(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return k(l.i)}function tE(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,x=0;x<p;x++)h.push(l[x]);return h}h=[],p=0;for(x in l)h[p++]=l[x];return h}function nE(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const x in l)h[p++]=x;return h}}}function Gp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=nE(l),x=tE(l),L=x.length,O=0;O<L;O++)h.call(void 0,x[O],p&&p[O],l)}var Hp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rE(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var x=l[p].indexOf("="),L=null;if(0<=x){var O=l[p].substring(0,x);L=l[p].substring(x+1)}else O=l[p];h(O,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function $r(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof $r){this.h=l.h,Ma(this,l.j),this.o=l.o,this.g=l.g,Oa(this,l.s),this.l=l.l;var h=l.i,p=new Hi;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Wp(this,p),this.m=l.m}else l&&(h=String(l).match(Hp))?(this.h=!1,Ma(this,h[1]||"",!0),this.o=$i(h[2]||""),this.g=$i(h[3]||"",!0),Oa(this,h[4]),this.l=$i(h[5]||"",!0),Wp(this,h[6]||"",!0),this.m=$i(h[7]||"")):(this.h=!1,this.i=new Hi(null,this.h))}$r.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Gi(h,Qp,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Gi(h,Qp,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Gi(p,p.charAt(0)=="/"?oE:iE,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Gi(p,lE)),l.join("")};function An(l){return new $r(l)}function Ma(l,h,p){l.j=p?$i(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Oa(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Wp(l,h,p){h instanceof Hi?(l.i=h,cE(l.i,l.h)):(p||(h=Gi(h,aE)),l.i=new Hi(h,l.h))}function _e(l,h,p){l.i.set(h,p)}function Va(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function $i(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Gi(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,sE),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function sE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Qp=/[#\/\?@]/g,iE=/[#\?:]/g,oE=/[#\?]/g,aE=/[#\?@]/g,lE=/#/g;function Hi(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function rr(l){l.g||(l.g=new Map,l.h=0,l.i&&rE(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Hi.prototype,t.add=function(l,h){rr(this),this.i=null,l=Ps(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Kp(l,h){rr(l),h=Ps(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Yp(l,h){return rr(l),h=Ps(l,h),l.g.has(h)}t.forEach=function(l,h){rr(this),this.g.forEach(function(p,x){p.forEach(function(L){l.call(h,L,x,this)},this)},this)},t.na=function(){rr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let x=0;x<h.length;x++){const L=l[x];for(let O=0;O<L.length;O++)p.push(h[x])}return p},t.V=function(l){rr(this);let h=[];if(typeof l=="string")Yp(this,l)&&(h=h.concat(this.g.get(Ps(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return rr(this),this.i=null,l=Ps(this,l),Yp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Jp(l,h,p){Kp(l,h),0<p.length&&(l.i=null,l.g.set(Ps(l,h),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var x=h[p];const O=encodeURIComponent(String(x)),B=this.V(x);for(x=0;x<B.length;x++){var L=O;B[x]!==""&&(L+="="+encodeURIComponent(String(B[x]))),l.push(L)}}return this.i=l.join("&")};function Ps(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function cE(l,h){h&&!l.j&&(rr(l),l.i=null,l.g.forEach(function(p,x){var L=x.toLowerCase();x!=L&&(Kp(this,x),Jp(this,L,p))},l)),l.j=h}function uE(l,h){const p=new zi;if(c.Image){const x=new Image;x.onload=w(sr,p,"TestLoadImage: loaded",!0,h,x),x.onerror=w(sr,p,"TestLoadImage: error",!1,h,x),x.onabort=w(sr,p,"TestLoadImage: abort",!1,h,x),x.ontimeout=w(sr,p,"TestLoadImage: timeout",!1,h,x),c.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=l}else h(!1)}function dE(l,h){const p=new zi,x=new AbortController,L=setTimeout(()=>{x.abort(),sr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:x.signal}).then(O=>{clearTimeout(L),O.ok?sr(p,"TestPingServer: ok",!0,h):sr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(L),sr(p,"TestPingServer: error",!1,h)})}function sr(l,h,p,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(p)}catch{}}function hE(){this.g=new Q1}function fE(l,h,p){const x=p||"";try{Gp(l,function(L,O){let B=L;d(L)&&(B=Su(L)),h.push(x+O+"="+encodeURIComponent(B))})}catch(L){throw h.push(x+"type="+encodeURIComponent("_badmap")),L}}function Wi(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Wi,Au),Wi.prototype.g=function(){return new Fa(this.l,this.j)},Wi.prototype.i=function(l){return function(){return l}}({});function Fa(l,h){nt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Fa,nt),t=Fa.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ki(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qi(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Xp(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Xp(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Qi(this):Ki(this),this.readyState==3&&Xp(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Qi(this))},t.Qa=function(l){this.g&&(this.response=l,Qi(this))},t.ga=function(){this.g&&Qi(this)};function Qi(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ki(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ki(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Zp(l){let h="";return V(l,function(p,x){h+=x,h+=":",h+=p,h+=`\r
`}),h}function Vu(l,h,p){e:{for(x in p){var x=!1;break e}x=!0}x||(p=Zp(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):_e(l,h,p))}function ke(l){nt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(ke,nt);var mE=/^https?$/i,pE=["POST","PUT"];t=ke.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cu.g(),this.v=this.o?Ap(this.o):Ap(Cu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){eg(this,O);return}if(l=p||"",p=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)p.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const O of x.keys())p.set(O,x.get(O));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),L=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(pE,h,void 0))||x||L||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of p)this.g.setRequestHeader(O,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rg(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){eg(this,O)}};function eg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,tg(l),Ua(l)}function tg(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mt(this,"complete"),mt(this,"abort"),Ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ng(this):this.bb())},t.bb=function(){ng(this)};function ng(l){if(l.h&&typeof a<"u"&&(!l.v[1]||jn(l)!=4||l.Z()!=2)){if(l.u&&jn(l)==4)Np(l.Ea,0,l);else if(mt(l,"readystatechange"),jn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var x;if(x=B===0){var L=String(l.D).match(Hp)[1]||null;!L&&c.self&&c.self.location&&(L=c.self.location.protocol.slice(0,-1)),x=!mE.test(L?L.toLowerCase():"")}p=x}if(p)mt(l,"complete"),mt(l,"success");else{l.m=6;try{var O=2<jn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",tg(l)}}finally{Ua(l)}}}}function Ua(l,h){if(l.g){rg(l);const p=l.g,x=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||mt(l,"ready");try{p.onreadystatechange=x}catch{}}}function rg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function jn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),W1(h)}};function sg(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function gE(l){const h={};l=(l.g&&2<=jn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<l.length;x++){if(E(l[x]))continue;var p=j(l[x]);const L=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[L]||[];h[L]=O,O.push(p)}A(h,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function ig(l){this.Aa=0,this.i=[],this.j=new zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yi("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yi("baseRetryDelayMs",5e3,l),this.cb=Yi("retryDelaySeedMs",1e4,l),this.Wa=Yi("forwardChannelMaxRetries",2,l),this.wa=Yi("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Up(l&&l.concurrentRequestLimit),this.Da=new hE,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ig.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,x){pt(0),this.W=l,this.H=h||{},p&&x!==void 0&&(this.H.OSID=p,this.H.OAID=x),this.F=this.X,this.I=mg(this,null,this.W),za(this)};function Fu(l){if(og(l),l.G==3){var h=l.U++,p=An(l.I);if(_e(p,"SID",l.K),_e(p,"RID",h),_e(p,"TYPE","terminate"),Ji(l,p),h=new nr(l,l.j,h),h.L=2,h.v=Va(An(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=pg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),La(h)}fg(l)}function qa(l){l.g&&(qu(l),l.g.cancel(),l.g=null)}function og(l){qa(l),l.u&&(c.clearTimeout(l.u),l.u=null),Ba(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function za(l){if(!qp(l.h)&&!l.s){l.s=!0;var h=l.Ga;tt||J(),$||(tt(),$=!0),W.add(h,l),l.B=0}}function yE(l,h){return zp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=qi(g(l.Ga,l,h),hg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new nr(this,this.j,l);let O=this.o;if(this.S&&(O?(O=y(O),_(O,this.S)):O=this.S),this.m!==null||this.O||(L.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var x=this.i[p];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(h+=x,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=lg(this,L,h),p=An(this.I),_e(p,"RID",l),_e(p,"CVER",22),this.D&&_e(p,"X-HTTP-Session-Id",this.D),Ji(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(Zp(O)))+"&"+h:this.m&&Vu(p,this.m,O)),Ou(this.h,L),this.Ua&&_e(p,"TYPE","init"),this.P?(_e(p,"$req",h),_e(p,"SID","null"),L.T=!0,Ru(L,p,null)):Ru(L,p,h),this.G=2}}else this.G==3&&(l?ag(this,l):this.i.length==0||qp(this.h)||ag(this))};function ag(l,h){var p;h?p=h.l:p=l.U++;const x=An(l.I);_e(x,"SID",l.K),_e(x,"RID",p),_e(x,"AID",l.T),Ji(l,x),l.m&&l.o&&Vu(x,l.m,l.o),p=new nr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=lg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ou(l.h,p),Ru(p,x,h)}function Ji(l,h){l.H&&V(l.H,function(p,x){_e(h,x,p)}),l.l&&Gp({},function(p,x){_e(h,x,p)})}function lg(l,h,p){p=Math.min(l.i.length,p);var x=l.l?g(l.l.Na,l.l,l):null;e:{var L=l.i;let O=-1;for(;;){const B=["count="+p];O==-1?0<p?(O=L[0].g,B.push("ofs="+O)):O=0:B.push("ofs="+O);let ge=!0;for(let We=0;We<p;We++){let de=L[We].g;const rt=L[We].map;if(de-=O,0>de)O=Math.max(0,L[We].g-100),ge=!1;else try{fE(rt,B,"req"+de+"_")}catch{x&&x(rt)}}if(ge){x=B.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,x}function cg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;tt||J(),$||(tt(),$=!0),W.add(h,l),l.v=0}}function Uu(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=qi(g(l.Fa,l),hg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ug(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=qi(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),qa(this),ug(this))};function qu(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ug(l){l.g=new nr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=An(l.qa);_e(h,"RID","rpc"),_e(h,"SID",l.K),_e(h,"AID",l.T),_e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(h,"TO",l.ja),_e(h,"TYPE","xmlhttp"),Ji(l,h),l.m&&l.o&&Vu(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Va(An(h)),p.m=null,p.P=!0,Op(p,l)}t.Za=function(){this.C!=null&&(this.C=null,qa(this),Uu(this),pt(19))};function Ba(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function dg(l,h){var p=null;if(l.g==h){Ba(l),qu(l),l.g=null;var x=2}else if(Mu(l.h,h))p=h.D,Bp(l.h,h),x=1;else return;if(l.G!=0){if(h.o)if(x==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var L=l.B;x=Pa(),mt(x,new Rp(x,p)),za(l)}else cg(l);else if(L=h.s,L==3||L==0&&0<h.X||!(x==1&&yE(l,h)||x==2&&Uu(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),L){case 1:Gr(l,5);break;case 4:Gr(l,10);break;case 3:Gr(l,6);break;default:Gr(l,2)}}}function hg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Gr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),x=l.Xa;const L=!x;x=new $r(x||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ma(x,"https"),Va(x),L?uE(x.toString(),p):dE(x.toString(),p)}else pt(2);l.G=0,l.l&&l.l.sa(h),fg(l),og(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function fg(l){if(l.G=0,l.ka=[],l.l){const h=$p(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function mg(l,h,p){var x=p instanceof $r?An(p):new $r(p);if(x.g!="")h&&(x.g=h+"."+x.g),Oa(x,x.s);else{var L=c.location;x=L.protocol,h=h?h+"."+L.hostname:L.hostname,L=+L.port;var O=new $r(null);x&&Ma(O,x),h&&(O.g=h),L&&Oa(O,L),p&&(O.l=p),x=O}return p=l.D,h=l.ya,p&&h&&_e(x,p,h),_e(x,"VER",l.la),Ji(l,x),x}function pg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ke(new Wi({eb:p})):new ke(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gg(){}t=gg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $a(){}$a.prototype.g=function(l,h){return new Rt(l,h)};function Rt(l,h){nt.call(this),this.g=new ig(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!E(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Rs(this)}S(Rt,nt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Fu(this.g)},Rt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Su(l),l=p);h.i.push(new eE(h.Ya++,l)),h.G==3&&za(h)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Fu(this.g),delete this.g,Rt.aa.N.call(this)};function yg(l){ju.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(yg,ju);function vg(){ku.call(this),this.status=1}S(vg,ku);function Rs(l){this.g=l}S(Rs,gg),Rs.prototype.ua=function(){mt(this.g,"a")},Rs.prototype.ta=function(l){mt(this.g,new yg(l))},Rs.prototype.sa=function(l){mt(this.g,new vg)},Rs.prototype.ra=function(){mt(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,zw=function(){return new $a},qw=function(){return Pa()},Uw=zr,Kh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,Rl=Ra,Dp.COMPLETE="complete",Fw=Dp,jp.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",nt.prototype.listen=nt.prototype.K,mo=jp,Vw=Wi,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Ow=ke}).apply(typeof ul<"u"?ul:typeof self<"u"?self:typeof window<"u"?window:{});const my="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new eu("@firebase/firestore");function oo(){return ms.logLevel}function Q(t,...e){if(ms.logLevel<=oe.DEBUG){const n=e.map(km);ms.debug(`Firestore (${Ci}): ${t}`,...n)}}function Yn(t,...e){if(ms.logLevel<=oe.ERROR){const n=e.map(km);ms.error(`Firestore (${Ci}): ${t}`,...n)}}function vi(t,...e){if(ms.logLevel<=oe.WARN){const n=e.map(km);ms.warn(`Firestore (${Ci}): ${t}`,...n)}}function km(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Ci}) INTERNAL ASSERTION FAILED: `+t;throw Yn(e),new Error(e)}function ye(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends pn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class Wj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Qj{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string"),new Bw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string"),new lt(e)}}class Kj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Yj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Kj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string"),this.R=n.token,new Jj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Zj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function xi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new ze(0,0))}static max(){return new te(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return na.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof na?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends na{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends na{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ye(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(be.fromString(e))}static fromName(e){return new K(be.fromString(e).popFirst(5))}static empty(){return new K(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new be(e.slice()))}}function tk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Pr(s,K.empty(),e)}function nk(t){return new Pr(t.readTime,t.key,-1)}class Pr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Pr(te.min(),K.empty(),-1)}static max(){return new Pr(te.max(),K.empty(),-1)}}function rk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ik{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==sk)throw t;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ok(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Cm.oe=-1;function su(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function ak(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dl(this.root,e,this.comparator,!0)}}class dl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gy(this.data.getIterator())}getIteratorFrom(e){return new gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xe(this.comparator);return n.data=e,n}}class gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new Mt([])}unionWith(e){let n=new Xe(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Mt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Hw("Invalid base64 string: "+i):i}}(e);return new et(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}et.EMPTY_BYTE_STRING=new et("");const lk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(t){if(ye(!!t),typeof t=="string"){let e=0;const n=lk.exec(t);if(ye(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?et.fromBase64String(t):et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Rm(t){const e=t.mapValue.fields.__previous_value__;return Pm(e)?Rm(e):e}function ra(t){const e=Rr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class sa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pm(t)?4:dk(t)?9007199254740991:uk(t)?10:11:ee()}function Sn(t,e){if(t===e)return!0;const n=gs(t);if(n!==gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ra(t).isEqual(ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rr(s.timestampValue),c=Rr(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ps(s.bytesValue).isEqual(ps(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pe(s.doubleValue),c=Pe(i.doubleValue);return a===c?wc(a)===wc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return xi(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(py(a)!==py(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Sn(a[u],c[u])))return!1;return!0}(t,e);default:return ee()}}function ia(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function _i(t,e){if(t===e)return 0;const n=gs(t),r=gs(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Pe(i.integerValue||i.doubleValue),u=Pe(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return yy(t.timestampValue,e.timestampValue);case 4:return yy(ra(t),ra(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(i,a){const c=ps(i),u=ps(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=he(c[d],u[d]);if(f!==0)return f}return he(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=he(Pe(i.latitude),Pe(a.latitude));return c!==0?c:he(Pe(i.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return vy(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const m=i.fields||{},g=a.fields||{},w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,S=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=he(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:vy(w,S)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===hl.mapValue&&a===hl.mapValue)return 0;if(i===hl.mapValue)return 1;if(a===hl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=he(u[m],f[m]);if(g!==0)return g;const w=_i(c[u[m]],d[f[m]]);if(w!==0)return w}return he(u.length,f.length)}(t.mapValue,e.mapValue);default:throw ee()}}function yy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=Rr(t),r=Rr(e),s=he(n.seconds,r.seconds);return s!==0?s:he(n.nanos,r.nanos)}function vy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=_i(n[s],r[s]);if(i)return i}return he(n.length,r.length)}function wi(t){return Yh(t)}function Yh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Rr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Yh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Yh(n.fields[a])}`;return s+"}"}(t.mapValue):ee()}function xy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Jh(t){return!!t&&"integerValue"in t}function Dm(t){return!!t&&"arrayValue"in t}function _y(t){return!!t&&"nullValue"in t}function wy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dl(t){return!!t&&"mapValue"in t}function uk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function jo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=jo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=jo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=jo(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Dl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new It(jo(this.value))}}function Ww(t){const e=[];return Is(t.fields,(n,r)=>{const s=new Ye([n]);if(Dl(r)){const i=Ww(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new dt(e,0,te.min(),te.min(),te.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,te.min(),te.min(),It.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,te.min(),te.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.position=e,this.inclusive=n}}function by(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=_i(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ey(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n="asc"){this.field=e,this.dir=n}}function hk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qw=class{};class Oe extends Qw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mk(e,n,r):n==="array-contains"?new yk(e,r):n==="in"?new vk(e,r):n==="not-in"?new xk(e,r):n==="array-contains-any"?new _k(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pk(e,r):new gk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_i(n,this.value)):n!==null&&gs(this.value)===gs(n)&&this.matchesComparison(_i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hn extends Qw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new hn(e,n)}matches(e){return Kw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kw(t){return t.op==="and"}function Yw(t){return fk(t)&&Kw(t)}function fk(t){for(const e of t.filters)if(e instanceof hn)return!1;return!0}function Xh(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+wi(t.value);if(Yw(t))return t.filters.map(e=>Xh(e)).join(",");{const e=t.filters.map(n=>Xh(n)).join(",");return`${t.op}(${e})`}}function Jw(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof hn?function(r,s){return s instanceof hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&Jw(a,s.filters[c]),!0):!1}(t,e):void ee()}function Xw(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${wi(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(Xw).join(" ,")+"}"}(t):"Filter"}class mk extends Oe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class pk extends Oe{constructor(e,n){super(e,"in",n),this.keys=Zw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gk extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=Zw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class yk extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&ia(n.arrayValue,this.value)}}class vk extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ia(this.value.arrayValue,n)}}class xk extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(ia(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ia(this.value.arrayValue,n)}}class _k extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ia(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function Ny(t,e=null,n=[],r=[],s=null,i=null,a=null){return new wk(t,e,n,r,s,i,a)}function Lm(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Xh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>wi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>wi(r)).join(",")),e.ue=n}return e.ue}function Mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ey(t.startAt,e.startAt)&&Ey(t.endAt,e.endAt)}function Zh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function bk(t,e,n,r,s,i,a,c){return new Pi(t,e,n,r,s,i,a,c)}function Om(t){return new Pi(t)}function Ty(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function eb(t){return t.collectionGroup!==null}function ko(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Xe(Ye.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new oa(i,r))}),n.has(Ye.keyField().canonicalString())||e.ce.push(new oa(Ye.keyField(),r))}return e.ce}function Nn(t){const e=ne(t);return e.le||(e.le=Ek(e,ko(t))),e.le}function Ek(t,e){if(t.limitType==="F")return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new oa(s.field,i)});const n=t.endAt?new bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bc(t.startAt.position,t.startAt.inclusive):null;return Ny(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ef(t,e){const n=t.filters.concat([e]);return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ec(t,e,n){return new Pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return Mm(Nn(t),Nn(e))&&t.limitType===e.limitType}function tb(t){return`${Lm(Nn(t))}|lt:${t.limitType}`}function Ms(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Xw(s)).join(", ")}]`),su(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>wi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>wi(s)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ko(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=by(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,ko(r),s)||r.endAt&&!function(a,c,u){const d=by(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,ko(r),s))}(t,e)}function Nk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nb(t){return(e,n)=>{let r=!1;for(const s of ko(t)){const i=Tk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Tk(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?_i(u,d):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Gw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new je(K.comparator);function Jn(){return Ik}const rb=new je(K.comparator);function po(...t){let e=rb;for(const n of t)e=e.insert(n.key,n);return e}function sb(t){let e=rb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ts(){return Co()}function ib(){return Co()}function Co(){return new Ri(t=>t.toString(),(t,e)=>t.isEqual(e))}const Sk=new je(K.comparator),Ak=new Xe(K.comparator);function ie(...t){let e=Ak;for(const n of t)e=e.add(n);return e}const jk=new Xe(he);function kk(){return jk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function ob(t){return{integerValue:""+t}}function Ck(t,e){return ak(e)?ob(e):Vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this._=void 0}}function Pk(t,e,n){return t instanceof aa?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Pm(i)&&(i=Rm(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof la?lb(t,e):t instanceof ca?cb(t,e):function(s,i){const a=ab(s,i),c=Iy(a)+Iy(s.Pe);return Jh(a)&&Jh(s.Pe)?ob(c):Vm(s.serializer,c)}(t,e)}function Rk(t,e,n){return t instanceof la?lb(t,e):t instanceof ca?cb(t,e):n}function ab(t,e){return t instanceof Nc?function(r){return Jh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class aa extends au{}class la extends au{constructor(e){super(),this.elements=e}}function lb(t,e){const n=ub(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ca extends au{constructor(e){super(),this.elements=e}}function cb(t,e){let n=ub(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class Nc extends au{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Iy(t){return Pe(t.integerValue||t.doubleValue)}function ub(t){return Dm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.field=e,this.transform=n}}function Lk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof la&&s instanceof la||r instanceof ca&&s instanceof ca?xi(r.elements,s.elements,Sn):r instanceof Nc&&s instanceof Nc?Sn(r.Pe,s.Pe):r instanceof aa&&s instanceof aa}(t.transform,e.transform)}class Mk{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lu{}function db(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Fm(t.key,Wt.none()):new Na(t.key,t.data,Wt.none());{const n=t.data,r=It.empty();let s=new Xe(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Fr(t.key,r,new Mt(s.toArray()),Wt.none())}}function Ok(t,e,n){t instanceof Na?function(s,i,a){const c=s.value.clone(),u=Ay(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Fr?function(s,i,a){if(!Ll(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=Ay(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(hb(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Po(t,e,n,r){return t instanceof Na?function(i,a,c,u){if(!Ll(i.precondition,a))return c;const d=i.value.clone(),f=jy(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Fr?function(i,a,c,u){if(!Ll(i.precondition,a))return c;const d=jy(i.fieldTransforms,u,a),f=a.data;return f.setAll(hb(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Ll(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function Vk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ab(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function Sy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xi(r,s,(i,a)=>Lk(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Na extends lu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fr extends lu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ay(t,e,n){const r=new Map;ye(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,Rk(a,c,n[s]))}return r}function jy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Pk(i,a,e))}return r}class Fm extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fk extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ok(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Po(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ib();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=db(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&xi(this.mutations,e.mutations,(n,r)=>Sy(n,r))&&xi(this.baseMutations,e.baseMutations,(n,r)=>Sy(n,r))}}class Um{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length);let s=function(){return Sk}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Um(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ae;function Bk(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function fb(t){if(t===void 0)return Yn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Le.OK:return F.OK;case Le.CANCELLED:return F.CANCELLED;case Le.UNKNOWN:return F.UNKNOWN;case Le.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Le.INTERNAL:return F.INTERNAL;case Le.UNAVAILABLE:return F.UNAVAILABLE;case Le.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Le.NOT_FOUND:return F.NOT_FOUND;case Le.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Le.ABORTED:return F.ABORTED;case Le.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Le.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(ae=Le||(Le={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new is([4294967295,4294967295],0);function ky(t){const e=$k().encode(t),n=new Mw;return n.update(e),new Uint8Array(n.digest())}function Cy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new is([n,r],0),new is([s,i],0)]}class qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new go(`Invalid padding: ${n}`);if(r<0)throw new go(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new go(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new go(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=is.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(is.fromNumber(r)));return s.compare(Gk)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ky(e),[r,s]=Cy(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new qm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=ky(e),[r,s]=Cy(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new cu(te.min(),s,new je(he),Jn(),ie())}}class Ta{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ta(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class mb{constructor(e,n){this.targetId=e,this.me=n}}class pb{constructor(e,n,r=et.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Py{constructor(){this.fe=0,this.ge=Dy(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new Ta(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Dy()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Hk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jn(),this.qe=Ry(),this.Qe=new je(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Zh(i))if(r===0){const a=new K(i.path);this.Ue(n,a,dt.newNoDocument(a,te.min()))}else ye(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=ps(r).toUint8Array()}catch(u){if(u instanceof Hw)return vi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qm(a,s,i)}catch(u){return vi(u instanceof go?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&Zh(c.target)){const u=new K(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,dt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new cu(e,n,this.Qe,this.ke,r);return this.ke=Jn(),this.qe=Ry(),this.Qe=new je(he),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Py,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xe(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Py),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ry(){return new je(K.comparator)}function Dy(){return new je(K.comparator)}const Wk={asc:"ASCENDING",desc:"DESCENDING"},Qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Yk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tf(t,e){return t.useProto3Json||su(e)?e:{value:e}}function Tc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Jk(t,e){return Tc(t,e.toTimestamp())}function Tn(t){return ye(!!t),te.fromTimestamp(function(n){const r=Rr(n);return new ze(r.seconds,r.nanos)}(t))}function zm(t,e){return nf(t,e).canonicalString()}function nf(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yb(t){const e=be.fromString(t);return ye(bb(e)),e}function rf(t,e){return zm(t.databaseId,e.path)}function Ed(t,e){const n=yb(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(xb(n))}function vb(t,e){return zm(t.databaseId,e)}function Xk(t){const e=yb(t);return e.length===4?be.emptyPath():xb(e)}function sf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xb(t){return ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ly(t,e,n){return{name:rf(t,e),fields:n.value.mapValue.fields}}function Zk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ye(f===void 0||typeof f=="string"),et.fromBase64String(f||"")):(ye(f===void 0||f instanceof Buffer||f instanceof Uint8Array),et.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?F.UNKNOWN:fb(d.code);return new G(f,d.message||"")}(a);n=new pb(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ed(t,r.document.name),i=Tn(r.document.updateTime),a=r.document.createTime?Tn(r.document.createTime):te.min(),c=new It({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Ml(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ed(t,r.document),i=r.readTime?Tn(r.readTime):te.min(),a=dt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Ml([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ed(t,r.document),i=r.removedTargetIds||[];n=new Ml([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new zk(s,i),c=r.targetId;n=new mb(c,a)}}return n}function eC(t,e){let n;if(e instanceof Na)n={update:Ly(t,e.key,e.value)};else if(e instanceof Fm)n={delete:rf(t,e.key)};else if(e instanceof Fr)n={update:Ly(t,e.key,e.data),updateMask:cC(e.fieldMask)};else{if(!(e instanceof Fk))return ee();n={verify:rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof aa)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof la)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ca)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Nc)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Jk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function tC(t,e){return t&&t.length>0?(ye(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?Tn(s.updateTime):Tn(i);return a.isEqual(te.min())&&(a=Tn(i)),new Mk(a,s.transformResults||[])}(n,e))):[]}function nC(t,e){return{documents:[vb(t,e.path)]}}function rC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vb(t,s);const i=function(d){if(d.length!==0)return wb(hn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:oC(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=tf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function sC(t){let e=Xk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=_b(m);return g instanceof hn&&Yw(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(S){return new oa(Vs(S.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,su(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new bc(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new bc(w,g)}(n.endAt)),bk(e,s,a,i,c,"F",u,d)}function iC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _b(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vs(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vs(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vs(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Vs(n.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(Vs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>_b(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function oC(t){return Wk[t]}function aC(t){return Qk[t]}function lC(t){return Kk[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Vs(t){return Ye.fromServerFormat(t.fieldPath)}function wb(t){return t instanceof Oe?function(n){if(n.op==="=="){if(wy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(_y(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(_y(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:aC(n.op),value:n.value}}}(t):t instanceof hn?function(n){const r=n.getFilters().map(s=>wb(s));return r.length===1?r[0]:{compositeFilter:{op:lC(n.op),filters:r}}}(t):ee()}function cC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,i=te.min(),a=te.min(),c=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.ct=e}}function dC(t){const e=sC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ec(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.un=new fC}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Pr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class fC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xe(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xe(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new bi(0)}static kn(){return new bi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(){this.changes=new Ri(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Po(r.mutation,s,Mt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=ts();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=po();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ts();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Jn();const a=Co(),c=function(){return Co()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Fr)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Po(f.mutation,d,f.mutation.getFieldMask(),ze.now())):a.set(d.key,Mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new pC(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Co();let s=new je((a,c)=>a-c),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Mt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ie()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=ib();f.forEach(g=>{if(!i.has(g)){const w=db(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return U.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(ts());let c=-1,u=i;return a.next(d=>U.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ie())).next(f=>({batchId:c,changes:sb(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=po();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=po();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(m,g){return new Pi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,dt.newInvalidDocument(f)))});let c=po();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&Po(f.mutation,d,Mt.empty(),ze.now()),ou(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:dC(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.overlays=new je(K.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ts();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=ts(),i=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new je((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ts(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ts(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new qk(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.Tr=new Xe($e.Er),this.dr=new Xe($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new be([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new be([])),r=new $e(n,e),s=new $e(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xe($e.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Uk(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new $e(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xe(he);return n.forEach(s=>{const i=new $e(s,0),a=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const a=new $e(new K(i),0);let c=new Xe(he);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.Mr=e,this.docs=function(){return new je(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Jn();const a=n.path,c=new K(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||rk(nk(f),r)<=0||(s.has(f.key)||ou(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bC(this)}getSize(e){return U.resolve(this.size)}}class bC extends mC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.persistence=e,this.Nr=new Ri(n=>Lm(n),Mm),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Bm,this.targetCount=0,this.kr=bi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new bi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Cm(0),this.Kr=!1,this.Kr=!0,this.$r=new xC,this.referenceDelegate=e(this),this.Ur=new EC(this),this.indexManager=new hC,this.remoteDocumentCache=function(s){return new wC(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new uC(n),this.Gr=new yC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _C(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Q("MemoryPersistence","Starting transaction:",e);const s=new TC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TC extends ik{constructor(e){super(),this.currentSequenceNumber=e}}class $m{constructor(e){this.persistence=e,this.Jr=new Bm,this.Yr=null}static Zr(e){return new $m(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cI()?8:ok(ft())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new IC;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(oo()<=oe.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(oo()<=oe.DEBUG&&Q("QueryEngine","Query:",Ms(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(oo()<=oe.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):U.resolve())}Yi(e,n){if(Ty(n))return U.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ec(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ie(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,Ec(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Ty(n)||s.isEqual(te.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?U.resolve(null):(oo()<=oe.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ms(n)),this.rs(e,a,n,tk(s,-1)).next(c=>c))})}ts(e,n){let r=new Xe(nb(e));return n.forEach((s,i)=>{ou(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return oo()<=oe.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Ms(n)),this.Ji.getDocumentsMatchingQuery(e,n,Pr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new je(he),this._s=new Ri(i=>Lm(i),Mm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jC(t,e,n,r){return new AC(t,e,n,r)}async function Eb(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ie();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function kC(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=U.resolve();return g.forEach(S=>{w=w.next(()=>f.getEntry(u,S)).next(k=>{const R=d.docVersions.get(S);ye(R!==null),k.version.compareTo(R)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ie();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Nb(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function CC(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(et.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(k,R,N){return k.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(g,w,f)&&c.push(n.Ur.updateTargetData(i,w))});let u=Jn(),d=ie();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(PC(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(te.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function PC(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Jn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function RC(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function DC(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function of(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ea(a))throw a;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function My(t,e,n){const r=ne(t);let s=te.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=ne(u),g=m._s.get(f);return g!==void 0?U.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,a,Nn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:ie())).next(c=>(LC(r,Nk(e),c),{documents:c,Ts:i})))}function LC(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Oy{constructor(){this.activeTargetIds=kk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MC{constructor(){this.so=new Oy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl=null;function Nd(){return fl===null?fl=function(){return 268435456+Math.round(2147483648*Math.random())}():fl++,"0x"+fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class UC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=Nd(),u=this.xo(n,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(Q("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw vi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ci}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=VC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Nd();return new Promise((a,c)=>{const u=new Ow;u.setWithCredentials(!0),u.listenOnce(Fw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Rl.NO_ERROR:const f=u.getResponseJson();Q(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Rl.TIMEOUT:Q(at,`RPC '${e}' ${i} timed out`),c(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case Rl.HTTP_ERROR:const m=u.getStatus();if(Q(at,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const S=function(R){const N=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN}(w.status);c(new G(S,w.message))}else c(new G(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{Q(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);Q(at,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=Nd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=zw(),c=qw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new Vw({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");Q(at,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,w=!1;const S=new FC({Io:R=>{w?Q(at,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(Q(at,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Q(at,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},To:()=>m.close()}),k=(R,N,E)=>{R.listen(N,T=>{try{E(T)}catch(M){setTimeout(()=>{throw M},0)}})};return k(m,mo.EventType.OPEN,()=>{w||(Q(at,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),k(m,mo.EventType.CLOSE,()=>{w||(w=!0,Q(at,`RPC '${e}' stream ${s} transport closed`),S.So())}),k(m,mo.EventType.ERROR,R=>{w||(w=!0,vi(at,`RPC '${e}' stream ${s} transport errored:`,R),S.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),k(m,mo.EventType.MESSAGE,R=>{var N;if(!w){const E=R.data[0];ye(!!E);const T=E,M=T.error||((N=T[0])===null||N===void 0?void 0:N.error);if(M){Q(at,`RPC '${e}' stream ${s} received error:`,M);const D=M.status;let V=function(v){const _=Le[v];if(_!==void 0)return fb(_)}(D),A=M.message;V===void 0&&(V=F.INTERNAL,A="Unknown error status: "+D+" with message "+M.message),w=!0,S.So(new G(V,A)),m.close()}else Q(at,`RPC '${e}' stream ${s} received:`,E),S.bo(E)}}),k(c,Uw.STAT_EVENT,R=>{R.stat===Kh.PROXY?Q(at,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Kh.NOPROXY&&Q(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Td(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return new Yk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tb(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Yn(n.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qC extends Ib{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Zk(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Tn(a.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=sf(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=Zh(u)?{documents:nC(i,u)}:{query:rC(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=gb(i,a.resumeToken);const d=tf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(te.min())>0){c.readTime=Tc(i,a.snapshotVersion.toTimestamp());const d=tf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=iC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=sf(this.serializer),n.removeTarget=e,this.a_(n)}}class zC extends Ib{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ye(!!e.streamToken),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=tC(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=sf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>eC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,nf(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,nf(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(F.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $C{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yn(n),this.D_=!1):Q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{Ss(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=ne(u);d.L_.add(4),await Ia(d),d.q_.set("Unknown"),d.L_.delete(4),await du(d)}(this))})}),this.q_=new $C(r,s)}}async function du(t){if(Ss(t))for(const e of t.B_)await e(!0)}async function Ia(t){for(const e of t.B_)await e(!1)}function Sb(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Km(n)?Qm(n):Di(n).r_()&&Wm(n,e))}function Hm(t,e){const n=ne(t),r=Di(n);n.N_.delete(e),r.r_()&&Ab(n,e),n.N_.size===0&&(r.r_()?r.o_():Ss(n)&&n.q_.set("Unknown"))}function Wm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Di(t).A_(e)}function Ab(t,e){t.Q_.xe(e),Di(t).R_(e)}function Qm(t){t.Q_=new Hk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Di(t).start(),t.q_.v_()}function Km(t){return Ss(t)&&!Di(t).n_()&&t.N_.size>0}function Ss(t){return ne(t).L_.size===0}function jb(t){t.Q_=void 0}async function HC(t){t.q_.set("Online")}async function WC(t){t.N_.forEach((e,n)=>{Wm(t,e)})}async function QC(t,e){jb(t),Km(t)?(t.q_.M_(e),Qm(t)):t.q_.set("Unknown")}async function KC(t,e,n){if(t.q_.set("Online"),e instanceof pb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ic(t,r)}else if(e instanceof Ml?t.Q_.Ke(e):e instanceof mb?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await Nb(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(et.EMPTY_BYTE_STRING,f.snapshotVersion)),Ab(i,u);const m=new yr(f.target,u,d,f.sequenceNumber);Wm(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),await Ic(t,r)}}async function Ic(t,e,n){if(!Ea(e))throw e;t.L_.add(1),await Ia(t),t.q_.set("Offline"),n||(n=()=>Nb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await du(t)})}function kb(t,e){return e().catch(n=>Ic(t,n,e))}async function hu(t){const e=ne(t),n=Dr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;YC(e);)try{const s=await RC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,JC(e,s)}catch(s){await Ic(e,s)}Cb(e)&&Pb(e)}function YC(t){return Ss(t)&&t.O_.length<10}function JC(t,e){t.O_.push(e);const n=Dr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Cb(t){return Ss(t)&&!Dr(t).n_()&&t.O_.length>0}function Pb(t){Dr(t).start()}async function XC(t){Dr(t).p_()}async function ZC(t){const e=Dr(t);for(const n of t.O_)e.m_(n.mutations)}async function eP(t,e,n){const r=t.O_.shift(),s=Um.from(r,e,n);await kb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await hu(t)}async function tP(t,e){e&&Dr(t).V_&&await async function(r,s){if(function(a){return Bk(a)&&a!==F.ABORTED}(s.code)){const i=r.O_.shift();Dr(r).s_(),await kb(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await hu(r)}}(t,e),Cb(t)&&Pb(t)}async function Fy(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");const r=Ss(n);n.L_.add(3),await Ia(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await du(n)}async function nP(t,e){const n=ne(t);e?(n.L_.delete(2),await du(n)):e||(n.L_.add(2),await Ia(n),n.q_.set("Unknown"))}function Di(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new qC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:HC.bind(null,t),Ro:WC.bind(null,t),mo:QC.bind(null,t),d_:KC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Km(t)?Qm(t):t.q_.set("Unknown")):(await t.K_.stop(),jb(t))})),t.K_}function Dr(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new zC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:XC.bind(null,t),mo:tP.bind(null,t),f_:ZC.bind(null,t),g_:eP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await hu(t)):(await t.U_.stop(),t.O_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new Ym(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(t,e){if(Yn("AsyncQueue",`${e}: ${t}`),Ea(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=po(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new ai(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ai)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ai;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(){this.W_=new je(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ei{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Ei(e,n,ai.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sP{constructor(){this.queries=qy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=qy(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function qy(){return new Ri(t=>tb(t),iu)}async function Rb(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new rP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=Jm(a,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Xm(n)}async function Db(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iP(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&Xm(n)}function oP(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Xm(t){t.Y_.forEach(e=>{e.next()})}var af,zy;(zy=af||(af={})).ea="default",zy.Cache="cache";class Lb{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ei(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ei.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==af.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e){this.key=e}}class Ob{constructor(e){this.key=e}}class aP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=nb(e),this.Ra=new ai(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Uy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=ou(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),k=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;g&&w?g.data.isEqual(w.data)?S!==k&&(r.track({type:3,doc:w}),R=!0):this.ga(g,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),R=!0):g&&!w&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(w?(a=a.add(w),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(w,S){const k=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return k(w)-k(S)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Ei(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Uy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ob(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Mb(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ei.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class lP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cP{constructor(e){this.key=e,this.va=!1}}class uP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ri(c=>tb(c),iu),this.Ma=new Map,this.xa=new Set,this.Oa=new je(K.comparator),this.Na=new Map,this.La=new Bm,this.Ba={},this.ka=new Map,this.qa=bi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dP(t,e,n=!0){const r=Bb(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Vb(r,e,n,!0),s}async function hP(t,e){const n=Bb(t);await Vb(n,e,!0,!1)}async function Vb(t,e,n,r){const s=await DC(t.localStore,Nn(e)),i=s.targetId,a=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let c;return r&&(c=await fP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Sb(t.remoteStore,s),c}async function fP(t,e,n,r,s){t.Ka=(m,g,w)=>async function(k,R,N,E){let T=R.view.ma(N);T.ns&&(T=await My(k.localStore,R.query,!1).then(({documents:A})=>R.view.ma(A,T)));const M=E&&E.targetChanges.get(R.targetId),D=E&&E.targetMismatches.get(R.targetId)!=null,V=R.view.applyChanges(T,k.isPrimaryClient,M,D);return $y(k,R.targetId,V.wa),V.snapshot}(t,m,g,w);const i=await My(t.localStore,e,!0),a=new aP(e,i.Ts),c=a.ma(i.documents),u=Ta.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);$y(t,n,d.wa);const f=new lP(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function mP(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!iu(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await of(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hm(r.remoteStore,s.targetId),lf(r,s.targetId)}).catch(ba)):(lf(r,s.targetId),await of(r.localStore,s.targetId,!0))}async function pP(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hm(n.remoteStore,r.targetId))}async function gP(t,e,n){const r=EP(t);try{const s=await function(a,c){const u=ne(a),d=ze.now(),f=c.reduce((w,S)=>w.add(S.key),ie());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let S=Jn(),k=ie();return u.cs.getEntries(w,f).next(R=>{S=R,S.forEach((N,E)=>{E.isValidDocument()||(k=k.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,S)).next(R=>{m=R;const N=[];for(const E of c){const T=Vk(E,m.get(E.key).overlayedDocument);T!=null&&N.push(new Fr(E.key,T,Ww(T.value.mapValue),Wt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,N,c)}).next(R=>{g=R;const N=R.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(w,R.batchId,N)})}).then(()=>({batchId:g.batchId,changes:sb(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new je(he)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await Sa(r,s.changes),await hu(r.remoteStore)}catch(s){const i=Jm(s,"Failed to persist write");n.reject(i)}}async function Fb(t,e){const n=ne(t);try{const r=await CC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?ye(a.va):s.removedDocuments.size>0&&(ye(a.va),a.va=!1))}),await Sa(n,r,e)}catch(r){await ba(r)}}function By(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=ne(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(c)&&(d=!0)}),d&&Xm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yP(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new je(K.comparator);a=a.insert(i,dt.newNoDocument(i,te.min()));const c=ie().add(i),u=new cu(te.min(),new Map,new je(he),a,c);await Fb(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Zm(r)}else await of(r.localStore,e,!1).then(()=>lf(r,e,n)).catch(ba)}async function vP(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await kC(n.localStore,e);qb(n,r,null),Ub(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sa(n,s)}catch(s){await ba(s)}}async function xP(t,e,n){const r=ne(t);try{const s=await function(a,c){const u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(ye(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);qb(r,e,n),Ub(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sa(r,s)}catch(s){await ba(s)}}function Ub(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function qb(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||zb(t,r)})}function zb(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Zm(t))}function $y(t,e,n){for(const r of n)r instanceof Mb?(t.La.addReference(r.key,e),_P(t,r)):r instanceof Ob?(Q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||zb(t,r.key)):ee()}function _P(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Zm(t))}function Zm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(be.fromString(e)),r=t.qa.next();t.Na.set(r,new cP(n)),t.Oa=t.Oa.insert(n,r),Sb(t.remoteStore,new yr(Nn(Om(n.path)),r,"TargetPurposeLimboResolution",Cm.oe))}}async function Sa(t,e,n){const r=ne(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Gm.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=ne(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>U.forEach(d,g=>U.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>U.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!Ea(m))throw m;Q("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.os.get(g),S=w.snapshotVersion,k=w.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(g,k)}}}(r.localStore,i))}async function wP(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());const r=await Eb(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new G(F.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sa(n,r.hs)}}function bP(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function Bb(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yP.bind(null,e),e.Ca.d_=iP.bind(null,e.eventManager),e.Ca.$a=oP.bind(null,e.eventManager),e}function EP(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xP.bind(null,e),e}class Gy{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=uu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return jC(this.persistence,new SC,e.initialUser,this.serializer)}createPersistence(e){return new NC($m.Zr,this.serializer)}createSharedClientState(e){return new MC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class NP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>By(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wP.bind(null,this.syncEngine),await nP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sP}()}createDatastore(e){const n=uu(e.databaseInfo.databaseId),r=function(i){return new UC(i)}(e.databaseInfo);return function(i,a,c,u){return new BC(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new GC(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>By(this.syncEngine,n,0),function(){return Vy.D()?new Vy:new OC}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const m=new uP(s,i,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);Q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ia(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=$w.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{Q("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(Q("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Jm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Eb(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Hy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await SP(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Fy(e.remoteStore,s)),t._onlineComponents=e}function IP(t){return t.name==="FirebaseError"?t.code===F.FAILED_PRECONDITION||t.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function SP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!IP(n))throw n;vi("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new Gy)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),await Id(t,new Gy);return t._offlineComponents}async function Gb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),await Hy(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),await Hy(t,new NP))),t._onlineComponents}function AP(t){return Gb(t).then(e=>e.syncEngine)}async function Hb(t){const e=await Gb(t),n=e.eventManager;return n.onListen=dP.bind(null,e.syncEngine),n.onUnlisten=mP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pP.bind(null,e.syncEngine),n}function jP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new $b({next:g=>{a.enqueueAndForget(()=>Db(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lb(Om(c.path),f,{includeMetadataChanges:!0,_a:!0});return Rb(i,m)}(await Hb(t),t.asyncQueue,e,n,r)),r.promise}function kP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new $b({next:g=>{a.enqueueAndForget(()=>Db(i,m)),g.fromCache&&u.source==="server"?d.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new Lb(c,f,{includeMetadataChanges:!0,_a:!0});return Rb(i,m)}(await Hb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CP(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Qy(t){if(!K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ky(t){if(K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fu(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function PP(t,e){if(e<=0)throw new G(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yy({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Hj;switch(r.type){case"firstParty":return new Yj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wy.get(n);r&&(Q("ComponentProvider","Removing Datastore"),Wy.delete(n),r.terminate())}(this),Promise.resolve()}}function RP(t,e,n,r={}){var s;const i=(t=fn(t,mu))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&vi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=lt.MOCK_USER;else{c=sI(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new lt(d)}t._authCredentials=new Wj(new Bw(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class jr extends Ur{constructor(e,n,r){super(e,n,Om(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new K(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function Fe(t,e,...n){if(t=Te(t),Qb("collection","path",e),t instanceof mu){const r=be.fromString(e,...n);return Ky(r),new jr(t,null,r)}{if(!(t instanceof xt||t instanceof jr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Ky(r),new jr(t.firestore,null,r)}}function yt(t,e,...n){if(t=Te(t),arguments.length===1&&(e=$w.newId()),Qb("doc","path",e),t instanceof mu){const r=be.fromString(e,...n);return Qy(r),new xt(t,null,new K(r))}{if(!(t instanceof xt||t instanceof jr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return Qy(r),new xt(t.firestore,t instanceof jr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Tb(this,"async_queue_retry"),this.Eu=()=>{const n=Td();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Td();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Td();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Bn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Ea(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Yn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Ym.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&ee()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class As extends mu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new DP}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Kb(this),this._firestoreClient.terminate()}}function LP(t,e){const n=typeof t=="object"?t:vm(),r=typeof t=="string"?t:"(default)",s=Ns(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=nI("firestore");i&&RP(s,...i)}return s}function ep(t){return t._firestoreClient||Kb(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Kb(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new ck(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Wb(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new TP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ni(et.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ni(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=/^__.*__$/;class OP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Na(e,this.data,n,this.fieldTransforms)}}class Yb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Jb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class rp{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new rp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Sc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Jb(this.wu)&&MP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class VP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||uu(e)}Nu(e,n,r,s=!1){return new rp({wu:e,methodName:n,Ou:r,path:Ye.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(t){const e=t._freezeSettings(),n=uu(t._databaseId);return new VP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xb(t,e,n,r,s,i={}){const a=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);ip("Data must be an object, but it was:",a,r);const c=Zb(r,a);let u,d;if(i.merge)u=new Mt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=cf(e,m,n);if(!a.contains(g))throw new G(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);t1(f,g)||f.push(g)}u=new Mt(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new OP(new It(c),u,d)}class vu extends gu{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vu}}class sp extends gu{_toFieldTransform(e){return new Dk(e.path,new aa)}isEqual(e){return e instanceof sp}}function FP(t,e,n,r){const s=t.Nu(1,e,n);ip("Data must be an object, but it was:",s,r);const i=[],a=It.empty();Is(r,(u,d)=>{const f=op(e,u,n);d=Te(d);const m=s.Cu(f);if(d instanceof vu)i.push(f);else{const g=Aa(d,m);g!=null&&(i.push(f),a.set(f,g))}});const c=new Mt(i);return new Yb(a,c,s.fieldTransforms)}function UP(t,e,n,r,s,i){const a=t.Nu(1,e,n),c=[cf(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(cf(e,i[g])),u.push(i[g+1]);const d=[],f=It.empty();for(let g=c.length-1;g>=0;--g)if(!t1(d,c[g])){const w=c[g];let S=u[g];S=Te(S);const k=a.Cu(w);if(S instanceof vu)d.push(w);else{const R=Aa(S,k);R!=null&&(d.push(w),f.set(w,R))}}const m=new Mt(d);return new Yb(f,m,a.fieldTransforms)}function qP(t,e,n,r=!1){return Aa(n,t.Nu(r?4:3,e))}function Aa(t,e){if(e1(t=Te(t)))return ip("Unsupported field value:",e,t),Zb(t,e);if(t instanceof gu)return function(r,s){if(!Jb(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Aa(c,s.Fu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Te(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ck(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Tc(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Tc(s.serializer,i)}}if(r instanceof tp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ni)return{bytesValue:gb(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:zm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof np)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Mu("VectorValues must only contain numeric values.");return Vm(c.serializer,u)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${fu(r)}`)}(t,e)}function Zb(t,e){const n={};return Gw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,(r,s)=>{const i=Aa(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function e1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof tp||t instanceof Ni||t instanceof xt||t instanceof gu||t instanceof np)}function ip(t,e,n){if(!e1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fu(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function cf(t,e,n){if((e=Te(e))instanceof pu)return e._internalPath;if(typeof e=="string")return op(t,e);throw Sc("Field path arguments must be of type string or ",t,!1,void 0,n)}const zP=new RegExp("[~\\*/\\[\\]]");function op(t,e,n){if(e.search(zP)>=0)throw Sc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Sc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,c+t+u)}function t1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BP extends n1{data(){return super.data()}}function xu(t,e){return typeof e=="string"?op(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ap{}class lp extends ap{}function yo(t,e,...n){let r=[];e instanceof ap&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof cp).length,c=i.filter(u=>u instanceof _u).length;if(a>1||a>0&&c>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _u extends lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _u(e,n,r)}_apply(e){const n=this._parse(e);return s1(e._query,n),new Ur(e.firestore,e.converter,ef(e._query,n))}_parse(e){const n=yu(e.firestore);return function(i,a,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Xy(m,f);const w=[];for(const S of m)w.push(Jy(u,i,S));g={arrayValue:{values:w}}}else g=Jy(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Xy(m,f),g=qP(c,a,m,f==="in"||f==="not-in");return Oe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function GP(t,e,n){const r=e,s=xu("where",t);return _u._create(s,r,n)}class cp extends ap{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)s1(a,u),a=ef(a,u)}(e._query,n),new Ur(e.firestore,e.converter,ef(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class up extends lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new up(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new oa(i,a)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Pi(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function r1(t,e="asc"){const n=e,r=xu("orderBy",t);return up._create(r,n)}class dp extends lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new dp(e,n,r)}_apply(e){return new Ur(e.firestore,e.converter,Ec(e._query,this._limit,this._limitType))}}function uf(t){return PP("limit",t),dp._create("limit",t,"F")}function Jy(t,e,n){if(typeof(n=Te(n))=="string"){if(n==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(e)&&n.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(be.fromString(n));if(!K.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return xy(t,new K(r))}if(n instanceof xt)return xy(t,n._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fu(n)}.`)}function Xy(t,e){if(!Array.isArray(t)||t.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function s1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class HP{convertValue(e,n="none"){switch(gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Pe(a.doubleValue));return new np(i)}convertGeoPoint(e){return new tp(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ra(e));default:return null}}convertTimestamp(e){const n=Rr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);ye(bb(r));const s=new sa(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Yn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class o1 extends n1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ol extends o1{data(e={}){return super.data(e)}}class WP{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new vo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ol(this._firestore,this._userDataWriter,r.key,r,new vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Ol(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Ol(s._firestore,s._userDataWriter,c.doc.key,c.doc,new vo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:QP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function QP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){t=fn(t,xt);const e=fn(t.firestore,As);return jP(ep(e),t._key).then(n=>KP(e,t,n))}class a1 extends HP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ni(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function xn(t){t=fn(t,Ur);const e=fn(t.firestore,As),n=ep(e),r=new a1(e);return $P(t._query),kP(n,t._query).then(s=>new WP(e,r,t,s))}function Zy(t,e,n){t=fn(t,xt);const r=fn(t.firestore,As),s=i1(t.converter,e);return wu(r,[Xb(yu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wt.none())])}function li(t,e,n,...r){t=fn(t,xt);const s=fn(t.firestore,As),i=yu(s);let a;return a=typeof(e=Te(e))=="string"||e instanceof pu?UP(i,"updateDoc",t._key,e,n,r):FP(i,"updateDoc",t._key,e),wu(s,[a.toMutation(t._key,Wt.exists(!0))])}function Vl(t){return wu(fn(t.firestore,As),[new Fm(t._key,Wt.none())])}function Dn(t,e){const n=fn(t.firestore,As),r=yt(t),s=i1(t.converter,e);return wu(n,[Xb(yu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function wu(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>gP(await AP(r),s,i)),i.promise}(ep(t),e)}function KP(t,e,n){const r=n.docs.get(e._key),s=new a1(t);return new o1(t,s,e._key,r,new vo(n.hasPendingWrites,n.fromCache),e.converter)}function Sd(){return new sp("serverTimestamp")}(function(e,n=!0){(function(s){Ci=s})(ki),In(new dn("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new As(new Qj(r.getProvider("auth-internal")),new Xj(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sa(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),Ht(my,"4.7.0",e),Ht(my,"4.7.0","esm2017")})();const l1="@firebase/installations",fp="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=1e4,u1=`w:${fp}`,d1="FIS_v2",YP="https://firebaseinstallations.googleapis.com/v1",JP=60*60*1e3,XP="installations",ZP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ys=new Es(XP,ZP,eR);function h1(t){return t instanceof pn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1({projectId:t}){return`${YP}/projects/${t}/installations`}function m1(t){return{token:t.token,requestStatus:2,expiresIn:nR(t.expiresIn),creationTime:Date.now()}}async function p1(t,e){const r=(await e.json()).error;return ys.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function g1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function tR(t,{refreshToken:e}){const n=g1(t);return n.append("Authorization",rR(e)),n}async function y1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function nR(t){return Number(t.replace("s","000"))}function rR(t){return`${d1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=f1(t),s=g1(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:n,authVersion:d1,appId:t.appId,sdkVersion:u1},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await y1(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:m1(d.authToken)}}else throw await p1("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^[cdef][\w-]{21}$/,df="";function aR(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=lR(t);return oR.test(n)?n:df}catch{return df}}function lR(t){return iR(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=new Map;function _1(t,e){const n=bu(t);w1(n,e),cR(n,e)}function w1(t,e){const n=x1.get(t);if(n)for(const r of n)r(e)}function cR(t,e){const n=uR();n&&n.postMessage({key:t,fid:e}),dR()}let ns=null;function uR(){return!ns&&"BroadcastChannel"in self&&(ns=new BroadcastChannel("[Firebase] FID Change"),ns.onmessage=t=>{w1(t.data.key,t.data.fid)}),ns}function dR(){x1.size===0&&ns&&(ns.close(),ns=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="firebase-installations-database",fR=1,vs="firebase-installations-store";let Ad=null;function mp(){return Ad||(Ad=K_(hR,fR,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(vs)}}})),Ad}async function Ac(t,e){const n=bu(t),s=(await mp()).transaction(vs,"readwrite"),i=s.objectStore(vs),a=await i.get(n);return await i.put(e,n),await s.done,(!a||a.fid!==e.fid)&&_1(t,e.fid),e}async function b1(t){const e=bu(t),r=(await mp()).transaction(vs,"readwrite");await r.objectStore(vs).delete(e),await r.done}async function Eu(t,e){const n=bu(t),s=(await mp()).transaction(vs,"readwrite"),i=s.objectStore(vs),a=await i.get(n),c=e(a);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!a||a.fid!==c.fid)&&_1(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pp(t){let e;const n=await Eu(t.appConfig,r=>{const s=mR(r),i=pR(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===df?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function mR(t){const e=t||{fid:aR(),registrationStatus:0};return E1(e)}function pR(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ys.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=gR(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:yR(t)}:{installationEntry:e}}async function gR(t,e){try{const n=await sR(t,e);return Ac(t.appConfig,n)}catch(n){throw h1(n)&&n.customData.serverCode===409?await b1(t.appConfig):await Ac(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function yR(t){let e=await ev(t.appConfig);for(;e.registrationStatus===1;)await v1(100),e=await ev(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await pp(t);return r||n}return e}function ev(t){return Eu(t,e=>{if(!e)throw ys.create("installation-not-found");return E1(e)})}function E1(t){return vR(t)?{fid:t.fid,registrationStatus:0}:t}function vR(t){return t.registrationStatus===1&&t.registrationTime+c1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR({appConfig:t,heartbeatServiceProvider:e},n){const r=_R(t,n),s=tR(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:u1,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(a)},u=await y1(()=>fetch(r,c));if(u.ok){const d=await u.json();return m1(d)}else throw await p1("Generate Auth Token",u)}function _R(t,{fid:e}){return`${f1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(t,e=!1){let n;const r=await Eu(t.appConfig,i=>{if(!N1(i))throw ys.create("not-registered");const a=i.authToken;if(!e&&ER(a))return i;if(a.requestStatus===1)return n=wR(t,e),i;{if(!navigator.onLine)throw ys.create("app-offline");const c=TR(i);return n=bR(t,c),c}});return n?await n:r.authToken}async function wR(t,e){let n=await tv(t.appConfig);for(;n.authToken.requestStatus===1;)await v1(100),n=await tv(t.appConfig);const r=n.authToken;return r.requestStatus===0?gp(t,e):r}function tv(t){return Eu(t,e=>{if(!N1(e))throw ys.create("not-registered");const n=e.authToken;return IR(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function bR(t,e){try{const n=await xR(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Ac(t.appConfig,r),n}catch(n){if(h1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await b1(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ac(t.appConfig,r)}throw n}}function N1(t){return t!==void 0&&t.registrationStatus===2}function ER(t){return t.requestStatus===2&&!NR(t)}function NR(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+JP}function TR(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function IR(t){return t.requestStatus===1&&t.requestTime+c1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t){const e=t,{installationEntry:n,registrationPromise:r}=await pp(e);return r?r.catch(console.error):gp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e=!1){const n=t;return await jR(n),(await gp(n,e)).token}async function jR(t){const{registrationPromise:e}=await pp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){if(!t||!t.options)throw jd("App Configuration");if(!t.name)throw jd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw jd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function jd(t){return ys.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="installations",CR="installations-internal",PR=t=>{const e=t.getProvider("app").getImmediate(),n=kR(e),r=Ns(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},RR=t=>{const e=t.getProvider("app").getImmediate(),n=Ns(e,T1).getImmediate();return{getId:()=>SR(n),getToken:s=>AR(n,s)}};function DR(){In(new dn(T1,PR,"PUBLIC")),In(new dn(CR,RR,"PRIVATE"))}DR();Ht(l1,fp);Ht(l1,fp,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="analytics",LR="firebase_id",MR="origin",OR=60*1e3,VR="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new eu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vt=new Es("analytics","Analytics",FR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(t){if(!t.startsWith(yp)){const e=Vt.create("invalid-gtag-resource",{gtagURL:t});return Ct.warn(e.message),""}return t}function I1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function qR(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zR(t,e){const n=qR("firebase-js-sdk-policy",{createScriptURL:UR}),r=document.createElement("script"),s=`${yp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function BR(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function $R(t,e,n,r,s,i){const a=r[s];try{if(a)await e[a];else{const u=(await I1(n)).find(d=>d.measurementId===s);u&&await e[u.appId]}}catch(c){Ct.error(c)}t("config",s,i)}async function GR(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let a=s.send_to;Array.isArray(a)||(a=[a]);const c=await I1(n);for(const u of a){const d=c.find(m=>m.measurementId===u),f=d&&e[d.appId];if(f)i.push(f);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Ct.error(i)}}function HR(t,e,n,r){async function s(i,...a){try{if(i==="event"){const[c,u]=a;await GR(t,e,n,c,u)}else if(i==="config"){const[c,u]=a;await $R(t,e,n,r,c,u)}else if(i==="consent"){const[c,u]=a;t("consent",c,u)}else if(i==="get"){const[c,u,d]=a;t("get",c,u,d)}else if(i==="set"){const[c]=a;t("set",c)}else t(i,...a)}catch(c){Ct.error(c)}}return s}function WR(t,e,n,r,s){let i=function(...a){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=HR(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function QR(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=30,YR=1e3;class JR{constructor(e={},n=YR){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const S1=new JR;function XR(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZR(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:XR(r)},i=VR.replace("{app-id}",n),a=await fetch(i,s);if(a.status!==200&&a.status!==304){let c="";try{const u=await a.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Vt.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function e4(t,e=S1,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Vt.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Vt.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new r4;return setTimeout(async()=>{c.abort()},OR),A1({appId:r,apiKey:s,measurementId:i},a,c,e)}async function A1(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=S1){var i;const{appId:a,measurementId:c}=t;try{await t4(r,e)}catch(u){if(c)return Ct.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:c};throw u}try{const u=await ZR(t);return s.deleteThrottleMetadata(a),u}catch(u){const d=u;if(!n4(d)){if(s.deleteThrottleMetadata(a),c)return Ct.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:a,measurementId:c};throw u}const f=Number((i=d==null?void 0:d.customData)===null||i===void 0?void 0:i.httpStatus)===503?V0(n,s.intervalMillis,KR):V0(n,s.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(a,m),Ct.debug(`Calling attemptFetch again in ${f} millis`),A1(t,m,r,s)}}function t4(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Vt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function n4(t){if(!(t instanceof pn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class r4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function s4(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,a=Object.assign(Object.assign({},r),{send_to:i});t("event",n,a)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(){if(pm())try{await gm()}catch(t){return Ct.warn(Vt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ct.warn(Vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function o4(t,e,n,r,s,i,a){var c;const u=e4(t);u.then(w=>{n[w.measurementId]=w.appId,t.options.measurementId&&w.measurementId!==t.options.measurementId&&Ct.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Ct.error(w)),e.push(u);const d=i4().then(w=>{if(w)return r.getId()}),[f,m]=await Promise.all([u,d]);QR(i)||zR(i,f.measurementId),s("js",new Date);const g=(c=a==null?void 0:a.config)!==null&&c!==void 0?c:{};return g[MR]="firebase",g.update=!0,m!=null&&(g[LR]=m),s("config",f.measurementId,g),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.app=e}_delete(){return delete Ro[this.app.options.appId],Promise.resolve()}}let Ro={},nv=[];const rv={};let kd="dataLayer",l4="gtag",sv,j1,iv=!1;function c4(){const t=[];if(mm()&&t.push("This is a browser extension environment."),H_()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Vt.create("invalid-analytics-context",{errorInfo:e});Ct.warn(n.message)}}function u4(t,e,n){c4();const r=t.options.appId;if(!r)throw Vt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ct.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vt.create("no-api-key");if(Ro[r]!=null)throw Vt.create("already-exists",{id:r});if(!iv){BR(kd);const{wrappedGtag:i,gtagCore:a}=WR(Ro,nv,rv,kd,l4);j1=i,sv=a,iv=!0}return Ro[r]=o4(t,nv,rv,e,sv,kd,n),new a4(t)}function d4(t=vm()){t=Te(t);const e=Ns(t,jc);return e.isInitialized()?e.getImmediate():h4(t)}function h4(t,e={}){const n=Ns(t,jc);if(n.isInitialized()){const s=n.getImmediate();if(Zo(e,n.getOptions()))return s;throw Vt.create("already-initialized")}return n.initialize({options:e})}async function f4(){if(mm()||!H_()||!pm())return!1;try{return await gm()}catch{return!1}}function m4(t,e,n,r){t=Te(t),s4(j1,Ro[t.app.options.appId],e,n,r).catch(s=>Ct.error(s))}const ov="@firebase/analytics",av="0.10.7";function p4(){In(new dn(jc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return u4(r,s,n)},"PUBLIC")),In(new dn("analytics-internal",t,"PRIVATE")),Ht(ov,av),Ht(ov,av,"esm2017");function t(e){try{const n=e.getProvider(jc).getImmediate();return{logEvent:(r,s,i)=>m4(n,r,s,i)}}catch(n){throw Vt.create("interop-component-reg-failed",{reason:n})}}}p4();const g4={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},vp=Y_(g4),le=LP(vp),ct=zj(vp);typeof window<"u"&&f4().then(t=>{t&&d4(vp)});const k1=C.createContext(void 0),bt=()=>{const t=C.useContext(k1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Cd=async t=>{var r,s;if(!t)return null;const n=(await hp(yt(le,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(n==null?void 0:n.displayName)||((r=t.email)==null?void 0:r.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(n==null?void 0:n.isAdmin)||!1,photoURL:t.photoURL||(n==null?void 0:n.photoURL),createdAt:(s=n==null?void 0:n.createdAt)==null?void 0:s.toDate()}},y4=({children:t})=>{const[e,n]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>{const g=kA(ct,async w=>{if(w){const S=await Cd(w);n(S)}else n(null);s(!1)});return()=>g()},[]);const m={currentUser:e,loading:r,register:async(g,w,S)=>{try{const k=await Ew(ct,g,w),{user:R}=k;await Nw(R,{displayName:S}),await ry(R);const N={uid:R.uid,email:R.email,displayName:S,emailVerified:R.emailVerified,isAdmin:!1,createdAt:Sd(),updatedAt:Sd()};await Zy(yt(le,"users",R.uid),N);const E=await Cd(R);return n(E),R}catch(k){throw console.error("Erreur lors de l'inscription:",k),k}},login:async(g,w)=>{try{const S=await Wh(ct,g,w),k=await Cd(S.user);return n(k),k}catch(S){throw console.error("Erreur de connexion:",S),S}},loginWithGoogle:async()=>{const g=new Rn;let w=null;try{w=(await JA(ct,g)).user,console.log("[Google] Utilisateur connecté:",w);const k=yt(le,"users",w.uid),R=await hp(k);console.log("[Google] Document utilisateur existe:",R.exists()),R.exists()||(await Zy(k,{uid:w.uid,email:w.email,displayName:w.displayName,emailVerified:w.emailVerified,isAdmin:!1,createdAt:Sd(),photoURL:w.photoURL??void 0}),console.log("[Google] Document utilisateur créé dans Firestore"));const N={uid:w.uid,email:w.email||"",displayName:w.displayName||"",emailVerified:w.emailVerified,isAdmin:R.exists()?R.data().isAdmin:!1,createdAt:w.metadata.creationTime?new Date(w.metadata.creationTime):void 0,photoURL:w.photoURL??void 0};return console.log("[Google] AppUser retourné:",N),N}catch(S){throw console.error("[Google] Erreur dans loginWithGoogle:",S,w),S}},logout:async()=>{try{await CA(ct),n(null)}catch(g){throw console.error("Erreur lors de la déconnexion:",g),g}},isAdmin:()=>(e==null?void 0:e.isAdmin)||!1,sendVerificationEmail:async()=>{if(ct.currentUser)try{await ry(ct.currentUser)}catch(g){throw console.error("Erreur lors de l'envoi de l'email de vérification:",g),g}}};return o.jsx(k1.Provider,{value:m,children:t})},C1=C.createContext(void 0),Li=()=>{const t=C.useContext(C1);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},v4=({children:t})=>{const[e,n]=C.useState([]),[r,s]=C.useState([]),[i,a]=C.useState([]),[c,u]=C.useState(!0);C.useEffect(()=>{(async()=>{u(!0);const v=await xn(Fe(le,"guideSections"));s(v.docs.map(P=>({id:P.id,...P.data()})));const _=await xn(Fe(le,"resources"));n(_.docs.map(P=>({id:P.id,...P.data()})));const j=await xn(Fe(le,"faq"));a(j.docs.map(P=>({id:P.id,...P.data()}))),u(!1)})()},[]);const d=async()=>{const y=await xn(Fe(le,"guideSections"));s(y.docs.map(j=>({id:j.id,...j.data()})));const v=await xn(Fe(le,"resources"));n(v.docs.map(j=>({id:j.id,...j.data()})));const _=await xn(Fe(le,"faq"));a(_.docs.map(j=>({id:j.id,...j.data()})))},A={resources:e,guideSections:r,faqItems:i,addResource:async y=>{await Dn(Fe(le,"resources"),y),await d()},updateResource:async(y,v)=>{await li(yt(le,"resources",y),v),await d()},deleteResource:async y=>{await Vl(yt(le,"resources",y)),await d()},addGuideSection:async y=>{await Dn(Fe(le,"guideSections"),y),await d()},updateGuideSection:async(y,v)=>{await li(yt(le,"guideSections",y),v),await d()},deleteGuideSection:async y=>{await Vl(yt(le,"guideSections",y)),await d()},addFAQItem:async y=>{await Dn(Fe(le,"faq"),y),await d()},updateFAQItem:async(y,v)=>{await li(yt(le,"faq",y),v),await d()},deleteFAQItem:async y=>{await Vl(yt(le,"faq",y)),await d()},getResourcesByPhase:y=>e.filter(v=>v.phase===y),getGuideSectionsByPhase:y=>r.filter(v=>v.phase===y).sort((v,_)=>v.order-_.order),getFAQItemsByPhase:y=>i.filter(v=>v.phase===y),searchResources:y=>{const v=y.toLowerCase();return e.filter(_=>_.title.toLowerCase().includes(v)||_.description.toLowerCase().includes(v)||_.category.toLowerCase().includes(v))}};return c?o.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):o.jsx(C1.Provider,{value:A,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var x4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),X=(t,e)=>{const n=C.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:c="",children:u,...d},f)=>C.createElement("svg",{ref:f,...x4,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${_4(t)}`,c].join(" "),...d},[...e.map(([m,g])=>C.createElement(m,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=X("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=X("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=X("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=X("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=X("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=X("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=X("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=X("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=X("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=X("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=X("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=X("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=X("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=X("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=X("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=X("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=X("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=X("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=X("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=X("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=X("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=X("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=X("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D1=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xp=X("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=X("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=X("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=X("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M1=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=X("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=X("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O1=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H4=()=>{var m,g;const{currentUser:t,logout:e,isAdmin:n}=bt(),[r,s]=C.useState(!1),[i,a]=C.useState(!1),[c,u]=C.useState(!1),d=bs();C.useEffect(()=>{const w=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]),C.useEffect(()=>{s(!1),a(!1)},[d]);const f=async()=>{try{await e()}catch(w){console.error("Logout failed",w)}};return o.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${c?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:o.jsxs("div",{className:"container mx-auto px-4 py-3",children:[o.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[o.jsx(Y,{to:"/",className:"flex items-center",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${c?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),o.jsx("nav",{className:"hidden md:flex items-center space-x-10",children:t&&o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 whitespace-nowrap ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(Y,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(Y,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(Y,{to:"/admin",className:`transition-colors duration-300 hover:text-blue-400 ${c?"text-blue-800":"text-white"}`,children:"Admin"})]})}),o.jsx("div",{className:"hidden md:flex items-center",children:t?o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>a(!i),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${c?"text-blue-800":"text-white"}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),o.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),o.jsx(ci,{className:"w-4 h-4"})]}),i&&o.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[o.jsxs(Y,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(ff,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Profil"})]}),n()&&o.jsxs(Y,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(D1,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Administration"})]}),o.jsxs("button",{onClick:f,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[o.jsx(dv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]})]}):o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx(Y,{to:"/login",className:`font-medium transition-colors duration-300 ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),o.jsx("button",{className:"md:hidden",onClick:()=>s(!r),children:r?o.jsx(O1,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`}):o.jsx(U4,{className:`w-6 h-6 ${c?"text-blue-800":"text-white"}`})})]}),r&&o.jsx("div",{className:"md:hidden mt-4 pt-4 border-t border-gray-200",children:o.jsx("div",{className:"flex flex-col space-y-4",children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:o.jsx("span",{className:"text-white font-medium text-sm",children:(((m=t.displayName)==null?void 0:m.charAt(0))||((g=t.email)==null?void 0:g.charAt(0))||"U").toUpperCase()})}),o.jsx("span",{className:`ml-2 font-medium ${c?"text-blue-800":"text-white"}`,children:t.displayName||t.email||"Utilisateur"})]}),o.jsxs(Y,{to:"/profile",className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(ff,{className:"w-4 h-4 mr-2"}),"Profil"]}),o.jsx(Y,{to:"/dashboard",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Tableau de bord"}),o.jsx(Y,{to:"/resources",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Ressources"}),o.jsx(Y,{to:"/faq",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"FAQ"}),n()&&o.jsx(Y,{to:"/admin",className:`py-2 ${c?"text-blue-800":"text-white"}`,children:"Administration"}),o.jsxs("button",{onClick:f,className:`flex items-center py-2 ${c?"text-blue-800":"text-white"}`,children:[o.jsx(dv,{className:"w-4 h-4 mr-2"}),o.jsx("span",{children:"Déconnexion"})]})]}):o.jsxs("div",{className:"flex flex-col space-y-4",children:[o.jsx(Y,{to:"/login",className:`font-medium ${c?"text-blue-800":"text-white"}`,children:"Connexion"}),o.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",children:"Inscription"})]})})})]})})},W4=()=>{const t=new Date().getFullYear();return o.jsx("footer",{className:"bg-blue-900 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"col-span-1 md:col-span-1",children:[o.jsxs(Y,{to:"/",className:"flex items-center",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:o.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),o.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),o.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Y,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),o.jsx("li",{children:o.jsx(Y,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les démarches"})}),o.jsx("li",{children:o.jsx(Y,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pré-arrivée en France"})})]})]}),o.jsxs("div",{className:"col-span-1",children:[o.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(V4,{className:"w-4 h-4 mr-2"}),o.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),o.jsxs("div",{className:"flex space-x-4 mt-4",children:[o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(O4,{className:"w-5 h-5"})}),o.jsx("a",{href:"#",className:"text-blue-200 hover:text-white transition-colors",children:o.jsx(P4,{className:"w-5 h-5"})})]})]})]}),o.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-blue-200",children:["© ",t," ESIGELEC Prep Guide. Tous droits réservés."]}),o.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Développé avec ",o.jsx(R4,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mbacké DIOUF"]})]})]})})},ml=({children:t})=>{const{currentUser:e,loading:n}=bt();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Lh,{to:"/login"})},Hr=({children:t})=>{const{currentUser:e,loading:n,isAdmin:r}=bt();return n?o.jsx("div",{className:"flex justify-center items-center min-h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?r()?o.jsx(o.Fragment,{children:t}):o.jsx(Lh,{to:"/dashboard"}):o.jsx(Lh,{to:"/login"})},Q4=()=>{const{currentUser:t}=bt();return o.jsxs("div",{className:"flex flex-col min-h-screen",children:[o.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[o.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[o.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide complet pour passer de CPS à l'ESIGELEC"}),o.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement nécessaires pour réussir votre transition des Classes Préparatoires Scientifiques de Dakar vers l'ESIGELEC à Rouen."}),o.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsxs(Y,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accédez à votre tableau de bord",o.jsx(lv,{className:"ml-2 w-5 h-5"})]}):o.jsxs(o.Fragment,{children:[o.jsxs(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",o.jsx(lv,{className:"ml-2 w-5 h-5"})]}),o.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai déjà un compte"})]})})]}),o.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:o.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:"rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover"})})]})})}),o.jsx("section",{className:"py-16 bg-white",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour réussir votre transition"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide à travers chaque étape du processus, du post-CPS jusqu'à votre arrivée en France."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(G4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides étape par étape"}),o.jsx("p",{className:"text-gray-600",children:"Des guides détaillés pour chaque phase de votre parcours, de la fin des CPS jusqu'à votre installation à Rouen."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(T4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),o.jsx("p",{className:"text-gray-600",children:"Accédez à tous les documents nécessaires pour vos démarches Campus France, visa, logement et plus encore."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(F4,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),o.jsx("p",{className:"text-gray-600",children:"Découvrez tout ce que vous devez savoir sur la vie à Rouen, les transports, le logement et la vie étudiante."})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[o.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:o.jsx(Pc,{className:"w-7 h-7 text-blue-900"})}),o.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communauté d'entraide"}),o.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bénéficiez de l'expérience des anciens étudiants qui ont suivi le même parcours."})]})]})]})}),o.jsx("section",{className:"py-16 bg-gray-50",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),o.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intégralité de votre parcours en trois grandes phases."})]}),o.jsxs("div",{className:"flex flex-col space-y-6",children:[o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),o.jsx("p",{className:"text-blue-100",children:"Préparation des dossiers et candidatures après la fin des classes préparatoires."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Préparation dossier Campus France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Candidature ESIGELEC"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),o.jsx("span",{children:"Validation des acquis et prérequis"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les démarches"}),o.jsx("p",{className:"text-blue-100",children:"Gestion des procédures administratives et préparation pratique."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Demande de visa étudiant"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Recherche de logement"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),o.jsx("span",{children:"Préparation financière et budgétaire"})]})]})})]})}),o.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:o.jsxs("div",{className:"flex flex-col md:flex-row",children:[o.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pré-arrivée en France"}),o.jsx("p",{className:"text-blue-100",children:"Derniers préparatifs et informations sur l'arrivée et l'installation."})]}),o.jsx("div",{className:"md:w-2/3 p-6",children:o.jsxs("ul",{className:"space-y-2",children:[o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Transport vers la France"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Installation et démarches à l'arrivée"})]}),o.jsxs("li",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),o.jsx("span",{children:"Intégration à l'ESIGELEC et vie étudiante"})]})]})})]})})]})]})}),o.jsx("section",{className:"py-16 bg-gradient-to-r from-red-800 to-red-700 text-white",children:o.jsxs("div",{className:"container mx-auto px-4 text-center",children:[o.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prêt à commencer votre parcours vers l'ESIGELEC ?"}),o.jsx("p",{className:"text-xl text-red-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communauté d'étudiants CPS et bénéficiez de toutes les ressources dont vous avez besoin pour réussir votre transition."}),o.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?o.jsx(Y,{to:"/dashboard",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accéder à mon tableau de bord"}):o.jsxs(o.Fragment,{children:[o.jsx(Y,{to:"/register",className:"bg-white text-red-900 hover:bg-red-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),o.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})})]})},K4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(!1),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,m]=C.useState(!1),g=mn(),{login:w,loginWithGoogle:S}=bt();Mc.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const k=async N=>{N.preventDefault();try{c(""),d(!0),await w(t,n),g("/dashboard")}catch(E){c("Identifiants invalides. Veuillez réessayer."),console.error(E)}finally{d(!1)}},R=async()=>{c(""),m(!0);try{await S(),g("/dashboard")}catch(N){let E="Erreur lors de la connexion avec Google.";N&&typeof N=="object"&&"message"in N&&(E+=`
${N.message}`),c(E),console.error(N)}finally{m(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous à votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(Y,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"créez un nouveau compte"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[a&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:a})})})}),o.jsxs("button",{type:"button",onClick:R,disabled:f,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 mb-6 ${f?"opacity-70 cursor-not-allowed":""}`,children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),f?"Connexion Google...":"Se connecter avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:k,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:N=>e(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:n,onChange:N=>r(N.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>i(N=>!N),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":s?"Masquer le mot de passe":"Afficher le mot de passe",children:s?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"remember_me",name:"remember_me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("label",{htmlFor:"remember_me",className:"ml-2 block text-sm text-gray-900",children:"Se souvenir de moi"})]}),o.jsx("div",{className:"text-sm",children:o.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oublié ?"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},Y4=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(""),[u,d]=C.useState(!1),[f,m]=C.useState(!1),[g,w]=C.useState(""),[S,k]=C.useState(!1),R=mn(),{register:N,loginWithGoogle:E}=bt(),T=async()=>{try{await E(),R("/dashboard")}catch{w("Erreur lors de l'inscription avec Google"),console.error()}},M=async D=>{if(D.preventDefault(),s!==a)return w("Les mots de passe ne correspondent pas");try{w(""),k(!0),await N(n,s,t),R("/dashboard")}catch{w("Erreur lors de la création du compte"),console.error()}finally{k(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Créez votre compte"}),o.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",o.jsx(Y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[g&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:o.jsx("div",{className:"flex",children:o.jsx("div",{children:o.jsx("p",{className:"text-sm text-red-700",children:g})})})}),o.jsxs("button",{type:"button",onClick:T,className:"w-full flex items-center justify-center gap-2 py-2 px-4 mb-6 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:o.jsxs("g",{children:[o.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),o.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),o.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),o.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),"S'inscrire avec Google"]}),o.jsxs("form",{className:"space-y-6",onSubmit:M,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:D=>e(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:D=>r(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:s,onChange:D=>i(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),o.jsx("div",{className:"mt-1",children:o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:f?"text":"password",autoComplete:"new-password",required:!0,value:a,onChange:D=>c(D.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),o.jsx("button",{type:"button",tabIndex:-1,onClick:()=>m(D=>!D),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":f?"Masquer le mot de passe":"Afficher le mot de passe",children:f?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",o.jsx("a",{href:"#",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:S,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:S?"Création en cours...":"Créer un compte"})})]})]})})]})},J4=()=>{const{currentUser:t}=bt(),{guideSections:e,resources:n,getGuideSectionsByPhase:r,faqItems:s}=Li(),[i,a]=C.useState("post-cps"),[c,u]=C.useState([]),d=g=>{c.includes(g)?u(c.filter(w=>w!==g)):u([...c,g])},f=r?r(i):[],m=g=>{const w=r?r(g):[];if(!w||w.length===0)return 0;const S=w.filter(k=>c.includes(k.id));return Math.round(S.length/w.length*100)};return!n||!s||!e?o.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accédez à vos ressources."]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:o.jsxs("div",{className:"flex flex-wrap",children:[o.jsx("button",{onClick:()=>a("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),o.jsx("button",{onClick:()=>a("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les démarches"}),o.jsx("button",{onClick:()=>a("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${i==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pré-arrivée"})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsxs("div",{className:"border-b border-gray-200 p-6",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[i==="post-cps"&&"Après votre CPS",i==="during-process"&&"Pendant vos démarches administratives",i==="pre-arrival"&&"Avant votre arrivée en France"]}),o.jsxs("p",{className:"text-gray-600",children:[i==="post-cps"&&"Les étapes essentielles après la fin de votre classe préparatoire",i==="during-process"&&"Les démarches à effectuer pour préparer votre départ",i==="pre-arrival"&&"Préparez votre arrivée et votre installation en France"]})]}),o.jsx("div",{className:"divide-y divide-gray-200",children:f&&f.length>0?f.map(g=>o.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:o.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[o.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:o.jsx("button",{onClick:()=>d(g.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${c.includes(g.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:o.jsx(P1,{className:"w-5 h-5"})})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:g.title}),o.jsx("p",{className:"text-gray-600 mb-4",children:g.content}),Array.isArray(g.resources)&&g.resources.length>0&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associées:"}),o.jsx("div",{className:"space-y-2",children:g.resources.map(w=>{const S=n.find(k=>k.id===w);return S?o.jsxs("a",{href:S.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(Un,{className:"w-4 h-4 mr-2"}),S.title]},S.id):null})})]})]})]})},g.id)):o.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("post-cps"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("post-cps")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les démarches"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("during-process"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("during-process")}%`}})})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pré-arrivée"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[m("pre-arrival"),"%"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${m("pre-arrival")}%`}})})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources récentes"}),o.jsx(Y,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(n||[]).slice(0,3).map(g=>o.jsxs("a",{href:g.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:o.jsx(Un,{className:"w-5 h-5 text-blue-700"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900",children:g.title}),o.jsx("p",{className:"text-xs text-gray-500",children:g.phase})]})]},g.id))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions fréquentes"}),o.jsx(Y,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),o.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,2).map(g=>o.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:g.question}),o.jsx("p",{className:"text-xs text-gray-700",children:g.answer&&g.answer.length>100?`${g.answer.substring(0,100)}...`:g.answer})]},g.id))})]})]})]})})]})},X4=()=>{const{resources:t}=Li(),[e,n]=C.useState(""),[r,s]=C.useState("all"),[i,a]=C.useState("all"),[c,u]=C.useState(!1),[d,f]=C.useState(!1),[m,g]=C.useState(null),[w,S]=C.useState(!1),k=[...new Set(t.map(D=>D.category))],R=D=>{if(D.includes("dropbox.com")){let V=D.replace("www.dropbox.com","dl.dropboxusercontent.com");return V.includes("?dl=0")?V=V.replace("?dl=0","?raw=1"):V.includes("?")?V+="&raw=1":V+="?raw=1",V}return D},N=D=>`https://docs.google.com/viewer?url=${encodeURIComponent(D)}&embedded=true`,E=D=>{D.preventDefault()},T=t.filter(D=>r!=="all"&&D.phase!==r||i!=="all"&&D.category!==i?!1:e?D.title.toLowerCase().includes(e.toLowerCase())||D.description.toLowerCase().includes(e.toLowerCase()):!0),M=D=>{switch(D){case"pdf":return o.jsx(C4,{className:"w-6 h-6 text-red-500"});case"image":return o.jsx(L4,{className:"w-6 h-6 text-green-500"});case"video":return o.jsx($4,{className:"w-6 h-6 text-purple-500"});case"archive":return o.jsx(E4,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return o.jsx(Un,{className:"w-6 h-6 text-blue-500"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothèque de ressources"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:o.jsx("div",{className:"p-6",children:o.jsx("form",{onSubmit:E,children:o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:D=>n(D.target.value)})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!c),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(uv,{className:"mr-2 h-4 w-4"}),r==="all"?"Toutes les phases":r==="post-cps"?"Post-CPS":r==="during-process"?"Pendant les démarches":"Pré-arrivée"]}),o.jsx(ci,{className:"h-4 w-4"})]}),c&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("all"),u(!1)},children:"Toutes les phases"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("post-cps"),u(!1)},children:"Post-CPS"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("during-process"),u(!1)},children:"Pendant les démarches"}),o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${r==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{s("pre-arrival"),u(!1)},children:"Pré-arrivée"})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>f(!d),children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx(uv,{className:"mr-2 h-4 w-4"}),i==="all"?"Toutes les catégories":i]}),o.jsx(ci,{className:"h-4 w-4"})]}),d&&o.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:o.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a("all"),f(!1)},children:"Toutes les catégories"}),k.map(D=>o.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${i===D?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{a(D),f(!1)},children:D},D))]})})]})]})]})})})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.length>0?T.map(D=>o.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{g(D),S(!0)},children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:M(D.fileType)}),o.jsx("div",{className:"ml-4",children:o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:D.title})})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.phase==="post-cps"?"Post-CPS":D.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:D.category}),o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${D.fileType==="pdf"?"bg-red-100 text-red-800":D.fileType==="doc"||D.fileType==="docx"||D.fileType==="txt"?"bg-blue-100 text-blue-800":D.fileType==="xls"||D.fileType==="xlsx"?"bg-green-100 text-green-800":D.fileType==="ppt"||D.fileType==="pptx"?"bg-orange-100 text-orange-800":D.fileType==="image"?"bg-purple-100 text-purple-800":D.fileType==="video"?"bg-pink-100 text-pink-800":D.fileType==="audio"?"bg-indigo-100 text-indigo-800":D.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:D.fileType.toUpperCase()})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[o.jsxs("span",{children:["Mis à jour le ",D.updatedDate]}),o.jsxs("a",{href:D.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:V=>V.stopPropagation(),children:[o.jsx(cv,{className:"w-4 h-4 mr-1"}),o.jsx("span",{children:"Télécharger"})]})]})]})},D.id)):o.jsxs("div",{className:"col-span-full text-center py-12",children:[o.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:o.jsx(kc,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouvée"}),o.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),w&&m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-6xl max-h-[90vh] flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m.title}),o.jsx("p",{className:"text-sm text-gray-500",children:m.category})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(A4,{className:"w-4 h-4 mr-1"}),"Ouvrir"]}),o.jsxs("a",{href:m.fileUrl,download:!0,className:"flex items-center bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(cv,{className:"w-4 h-4 mr-1"}),"Télécharger"]}),o.jsxs("button",{onClick:()=>S(!1),className:"flex items-center bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[o.jsx(O1,{className:"w-4 h-4 mr-1"}),"Fermer"]})]})]}),o.jsx("div",{className:"p-4 flex-grow overflow-hidden",children:m.fileType==="pdf"?o.jsxs("div",{className:"flex flex-col items-center h-full",children:[o.jsx("div",{className:"h-full w-full",children:o.jsx("object",{data:R(m.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:o.jsx("iframe",{src:N(m.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${m.title} (Google Viewer)`,allowFullScreen:!0})})}),o.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["Si le document ne s'affiche pas correctement, essayez de le",o.jsx("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"télécharger"}),"ou l'",o.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(m.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 mx-1 font-medium",onClick:D=>D.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):m.fileType==="image"?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("img",{src:R(m.fileUrl),alt:m.title,className:"max-w-full max-h-full object-contain rounded-md"})}):o.jsx("iframe",{src:R(m.fileUrl),className:"w-full h-full border-0 rounded-md",title:m.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})})]})})]})},Z4=()=>{const{faqItems:t,addFAQItem:e}=Li(),{currentUser:n}=bt(),[r,s]=C.useState(""),[i,a]=C.useState("all"),[c,u]=C.useState(null),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[w,S]=C.useState(!1),[k,R]=C.useState(""),[N,E]=C.useState("post-cps"),[T,M]=C.useState(""),[D,V,A]=t.reduce((_,j)=>(n&&(j.userId===n.uid||j.userEmail===n.email)&&(j.isAnswered?_[0].push(j):_[1].push(j)),j.isApproved&&j.isAnswered&&(i==="all"||j.phase===i)&&(!r||j.question.toLowerCase().includes(r.toLowerCase())||j.answer.toLowerCase().includes(r.toLowerCase())||j.category.toLowerCase().includes(r.toLowerCase()))&&_[2].push(j),_),[[],[],[]]),y=_=>{u(c===_?null:_)},v=_=>{_.preventDefault(),k.trim()&&(e({question:k,answer:"Cette question est en attente de réponse par notre équipe.",category:T||"général",phase:N,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:n==null?void 0:n.uid,userEmail:n==null?void 0:n.email}),R(""),M(""),g(!0),setTimeout(()=>{g(!1),f(!1)},5e3))};return C.useEffect(()=>{d||g(!1)},[d]),o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions fréquemment posées"}),o.jsx("p",{className:"text-blue-100",children:"Trouvez les réponses à vos questions ou posez-en de nouvelles."})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[o.jsx("div",{className:"flex-grow",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:r,onChange:_=>s(_.target.value)})]})}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("select",{value:i,onChange:_=>a(_.target.value),className:"block rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:w,children:[o.jsx("option",{value:"all",children:"Toutes les phases"}),o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]}),n&&o.jsx("button",{type:"button",onClick:()=>S(!w),className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${w?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:w?"Toutes les questions":"Mes questions"}),o.jsxs("button",{type:"button",onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(ui,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]}),d&&o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[o.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[o.jsx(Js,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),o.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise à l’équipe, qui y répondra rapidement."}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),o.jsx("form",{onSubmit:v,className:"space-y-7",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),o.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:k,onChange:_=>R(_.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concernée"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:N,onChange:_=>E(_.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:T,onChange:_=>M(_.target.value)})]})]}),m?o.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(P1,{className:"h-5 w-5 text-green-500 mr-2"}),o.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien été envoyée !"})]}),o.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la réponse de l'administrateur par email et elle apparaîtra également sur la plateforme en tant que question anonyme."})]}):o.jsxs("div",{className:"flex justify-end",children:[o.jsx("button",{type:"button",onClick:()=>f(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),o.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),w?o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions répondues",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:D.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:D.length>0?D.map(_=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(_.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(Js,{className:"h-4 w-4 text-green-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:_.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:_.phase==="post-cps"?"Post-CPS":_.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),_.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:_.category})]})]})]}),c===_.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(ci,{className:"h-5 w-5 text-gray-500"})]}),c===_.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:_.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",_.updatedDate]})]})]},_.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions répondues."})})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",o.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:V.length})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:V.length>0?V.map(_=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(_.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:o.jsx(Js,{className:"h-4 w-4 text-yellow-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[_.question,o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:_.phase==="post-cps"?"Post-CPS":_.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),_.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:_.category}),o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Posée le ",_.createdDate]})]})]})]}),c===_.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(ci,{className:"h-5 w-5 text-gray-500"})]}),c===_.id&&o.jsx("div",{className:"mt-4 ml-11",children:o.jsx("p",{className:"text-gray-700 italic",children:_.answer})})]},_.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de réponse."})})})]})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et réponses"})}),o.jsx("div",{className:"divide-y divide-gray-200",children:A.length>0?A.map(_=>o.jsxs("div",{className:"p-6",children:[o.jsxs("button",{onClick:()=>y(_.id),className:"flex justify-between items-start w-full text-left",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:o.jsx(Js,{className:"h-4 w-4 text-blue-700"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[_.question,w&&!_.isApproved&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:_.phase==="post-cps"?"Post-CPS":_.phase==="during-process"?"Pendant les démarches":"Pré-arrivée"}),_.category&&o.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:_.category})]})]})]}),c===_.id?o.jsx(Pd,{className:"h-5 w-5 text-gray-500"}):o.jsx(ci,{className:"h-5 w-5 text-gray-500"})]}),c===_.id&&o.jsxs("div",{className:"mt-4 ml-11",children:[o.jsx("p",{className:"text-gray-700",children:_.answer}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise à jour le ",_.updatedDate]})]})]},_.id)):o.jsx("div",{className:"p-6 text-center",children:o.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond à votre recherche."})})})]})]})]})};function e5(t=20){const[e,n]=C.useState([]),[r,s]=C.useState(!0);return C.useEffect(()=>{(async()=>{s(!0);try{const a=yo(Fe(le,"adminActivityLog"),r1("date","desc"),uf(t)),c=await xn(a);n(c.docs.map(u=>({id:u.id,...u.data()})))}catch{n([])}s(!1)})()},[t]),{recentActivity:e,loading:r}}function t5(t){const e={Ajout:"a ajouté",Suppression:"a supprimé",Modification:"a modifié"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"},r=t.user||"Admin",s=e[t.type]||t.type.toLowerCase(),i=n[t.target]||t.target.toLowerCase();return`${r} ${s} ${i}`}const n5=()=>{const{currentUser:t}=bt(),{resources:e,guideSections:n,faqItems:r}=Li(),{recentActivity:s,loading:i}=e5();return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),o.jsxs(Y,{to:"/admin/tutorial",className:"flex items-center px-3 py-1 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors",title:"Consulter le guide d'administration",children:[o.jsx(R1,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]}),o.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",o.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Gérez le contenu et les ressources de la plateforme."]})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[o.jsxs(Y,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Dd,{className:"-ml-1 mr-2 h-5 w-5"}),"Éditer le contenu"]}),o.jsxs(Y,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Un,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les ressources"]}),o.jsxs(Y,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(Pc,{className:"-ml-1 mr-2 h-5 w-5"}),"Gérer les utilisateurs"]}),o.jsxs(Y,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx(I4,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activité détaillé"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Un,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Dd,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})}),o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:o.jsx(Js,{className:"h-6 w-6"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),o.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(r)?r.length:0})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions répondues"]}),Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>a.isAnswered).length>0?r.filter(a=>a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),a.isApproved?o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):o.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publié"})]}),o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question répondue pour le moment."})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[o.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(r)&&o.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:r.filter(a=>!a.isAnswered).length})]}),Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5&&o.jsx("span",{className:"text-xs text-gray-500",children:"Défilez pour voir plus"})]}),o.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(r)&&r.filter(a=>!a.isAnswered).length>0?r.filter(a=>!a.isAnswered).map(a=>o.jsxs("li",{className:"flex items-center justify-between py-2",children:[o.jsxs("div",{className:"flex-grow pr-2",children:[o.jsx("span",{className:"text-gray-800 line-clamp-1",children:a.question}),o.jsxs("div",{className:"flex items-center mt-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:a.phase==="post-cps"?"Post-CPS":a.phase==="during-process"?"Démarches":"Pré-arrivée"}),a.userEmail&&o.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["· ",a.userEmail]})]})]}),o.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:o.jsx(Y,{to:`/admin/content?edit=${a.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Répondre"})})]},a.id)):o.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de réponse."})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs(Y,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Dd,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer le contenu"})]}),o.jsxs(Y,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les ressources"})]}),o.jsxs(Y,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Js,{className:"h-5 w-5"})}),o.jsx("span",{children:"Modérer la FAQ"})]}),o.jsxs(Y,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Pc,{className:"h-5 w-5"})}),o.jsx("span",{children:"Gérer les utilisateurs"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[o.jsxs(Y,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ui,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une section de guide"})]}),o.jsxs(Y,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ui,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une ressource"})]}),o.jsxs(Y,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[o.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:o.jsx(ui,{className:"h-5 w-5"})}),o.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[o.jsx("div",{className:"p-6 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activité récente"})}),o.jsx("div",{className:`divide-y divide-gray-200 ${s.length>5?"max-h-80 overflow-y-auto":""}`,children:i?o.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):s.length===0?o.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activité récente."}):s.map(a=>{var c;return o.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:t5(a)}),o.jsx("div",{className:"text-xs text-gray-500",children:new Date(a.date).toLocaleString()}),typeof((c=a.details)==null?void 0:c.title)=="string"&&o.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",a.details.title]})]})]})},a.id)})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="post-cps").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="post-cps").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="during-process").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="during-process").length:0})]})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(a=>a.phase==="pre-arrival").length:0})]})}),o.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(r)?r.filter(a=>a.phase==="pre-arrival").length:0})]})})]})]})]})]})]})]})};async function Pn({type:t,target:e,targetId:n,user:r,details:s}){await Dn(Fe(le,"adminActivityLog"),{type:t,target:e,targetId:n||null,user:r||null,date:new Date().toISOString(),details:s||null})}const _p=({isOpen:t,onClose:e,onConfirm:n,title:r,message:s,confirmButtonText:i="Confirmer",cancelButtonText:a="Annuler",type:c="danger"})=>{if(!t)return null;const d=(()=>{switch(c){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),f=m=>{m.target===m.currentTarget&&c!=="danger"&&e()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:f,children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[o.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[o.jsx(b4,{className:`mr-2 h-5 w-5 ${d.icon}`}),o.jsx("h3",{className:"text-lg font-medium",children:r})]}),o.jsx("div",{className:"px-6 py-4",children:o.jsx("p",{className:"text-gray-700",children:s})}),o.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[o.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:a}),o.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{n(),e()},autoFocus:!0,children:i})]})]})})},r5=()=>{const[t]=F_(),e=mn(),{currentUser:n}=bt(),{guideSections:r,addGuideSection:s,updateGuideSection:i,deleteGuideSection:a,resources:c,faqItems:u,addFAQItem:d,updateFAQItem:f,deleteFAQItem:m}=Li(),g=t.get("new")==="section",w=t.get("new")==="faq",S=g?null:t.get("edit")&&r.some(q=>q.id===t.get("edit"))?t.get("edit"):null,k=w?null:t.get("edit")&&u.some(q=>q.id===t.get("edit"))?t.get("edit"):null,[R,N]=C.useState(""),[E,T]=C.useState("post-cps"),[M,D]=C.useState(""),[V,A]=C.useState(1),[y,v]=C.useState([]),[_,j]=C.useState(""),[P,b]=C.useState(""),[se,Ve]=C.useState(""),[Et,tt]=C.useState("post-cps"),[$,W]=C.useState(!0),[J,ue]=C.useState(!1),[me,xe]=C.useState(!1),[Nt,Jt]=C.useState("section");C.useEffect(()=>{if(S){const q=r.find(fe=>fe.id===S);q&&(N(q.title),T(q.phase),D(q.content),A(q.order),v(Array.isArray(q.resources)?q.resources:[]))}else if(g){N(""),T("post-cps"),D("");const q=r.filter(fe=>fe.phase==="post-cps");A(q.length>0?Math.max(...q.map(fe=>fe.order))+1:1),v([])}if(k){const q=u.find(fe=>fe.id===k);q&&(j(q.question),b(q.answer),Ve(q.category||""),tt(q.phase),W(!!q.isApproved),ue(!!q.isAnswered))}else w&&(j(""),b(""),Ve(""),tt("post-cps"),W(!0),ue(!1))},[S,g,r,k,w,u]);const Xt=()=>{b(""),ue(!1)},Zt=q=>{const fe=q.trim()!==""&&q!=="Cette question est en attente de réponse par notre équipe.";ue(fe)},ja=q=>{if(q.preventDefault(),w||k)if(k){const fe=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";ue(fe),f(k,{question:_,answer:P,category:se,phase:Et,isApproved:$,isAnswered:fe}),Pn({type:"Modification",target:"FAQ",targetId:k,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:_}})}else{const fe=P.trim()!==""&&P!=="Cette question est en attente de réponse par notre équipe.";ue(fe),d({question:_,answer:P,category:se,phase:Et,isApproved:$,isAnswered:fe,createdDate:new Date().toISOString(),updatedDate:new Date().toISOString()}),Pn({type:"Ajout",target:"FAQ",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{question:_}})}else S?(i(S,{title:R,phase:E,content:M,order:V,resources:y}),Pn({type:"Modification",target:"Section",targetId:S,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}})):(s({title:R,phase:E,content:M,order:V,resources:y}),Pn({type:"Ajout",target:"Section",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:R}}));e("/admin")},ka=q=>{Jt(q),xe(!0)},js=()=>{Nt==="section"&&S?(a(S),Pn({type:"Suppression",target:"Section",targetId:S,user:n==null?void 0:n.uid,details:{title:R}}),e("/admin/content")):Nt==="faq"&&k&&(m(k),Pn({type:"Suppression",target:"FAQ",targetId:k,user:n==null?void 0:n.uid,details:{question:_}}),e("/admin/content")),xe(!1)},ks=q=>{y.includes(q)?v(y.filter(fe=>fe!==q)):v([...y,q])},qr=c.filter(q=>q.phase===E),Pt={"post-cps":r.filter(q=>q.phase==="post-cps").sort((q,fe)=>q.order-fe.order),"during-process":r.filter(q=>q.phase==="during-process").sort((q,fe)=>q.order-fe.order),"pre-arrival":r.filter(q=>q.phase==="pre-arrival").sort((q,fe)=>q.order-fe.order)};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:g?"Ajouter une nouvelle section":w?"Ajouter une question FAQ":k?"Modifier la FAQ":S?"Modifier la section":"Édition"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(xs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:w||k?o.jsx("form",{onSubmit:ja,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),o.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:_,onChange:q=>j(q.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Réponse"}),k&&o.jsx("button",{type:"button",onClick:Xt,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et répondre"})]}),o.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:q=>{b(q.target.value),Zt(q.target.value)},required:!0}),o.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${J?"bg-green-500":"bg-yellow-500"} mr-2`}),o.jsx("span",{className:"text-gray-600",children:J?"Cette question est marquée comme répondue":"Cette question est en attente de réponse"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:se,onChange:q=>Ve(q.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Et,onChange:q=>tt(q.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsx("div",{className:"space-y-2",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:$,onChange:q=>W(q.target.checked)}),o.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuvée (visible publiquement)"})]})}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:k&&o.jsxs("button",{type:"button",onClick:()=>ka("faq"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[o.jsx(Cc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),w?"Ajouter":"Enregistrer"]})]})]})]})}):o.jsx("form",{onSubmit:ja,children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:R,onChange:q=>N(q.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:q=>{const fe=q.target.value;T(fe);const Mi=r.filter(Oi=>Oi.phase===fe);A(Mi.length>0?Math.max(...Mi.map(Oi=>Oi.order))+1:1),v([])},required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),o.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:V,onChange:q=>A(parseInt(q.target.value)),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),o.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:M,onChange:q=>D(q.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associées"}),Array.isArray(qr)&&qr.length>0?o.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:qr.map(q=>o.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[o.jsx("input",{type:"checkbox",id:`resource-${q.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:y.includes(q.id),onChange:()=>ks(q.id)}),o.jsx("label",{htmlFor:`resource-${q.id}`,className:"ml-3 block text-sm text-gray-700",children:q.title})]},q.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:S&&o.jsxs("button",{type:"button",onClick:()=>ka("section"),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[o.jsx(Cc,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),g?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"lg:col-span-2",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),o.jsxs("button",{onClick:()=>e("/admin/content?new=section"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ui,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Pt["post-cps"])&&Pt["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["post-cps"].map(q=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),o.jsx("span",{className:"flex-grow",children:q.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(Pt["during-process"])&&Pt["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["during-process"].map(q=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),o.jsx("span",{className:"flex-grow",children:q.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(Pt["pre-arrival"])&&Pt["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:Pt["pre-arrival"].map(q=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/content?edit=${q.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${S===q.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:q.order}),o.jsx("span",{className:"flex-grow",children:q.title}),o.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},q.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]})]})]})})]})}),o.jsx(_p,{isOpen:me,onClose:()=>xe(!1),onConfirm:js,title:`Confirmer la suppression de ${Nt==="section"?"la section":"la question FAQ"}`,message:Nt==="section"?`Êtes-vous sûr de vouloir supprimer la section "${R}" ? Cette action est irréversible.`:`Êtes-vous sûr de vouloir supprimer la question "${_}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})};var s5="rpc",i5="upload",o5="download",Ld="app",Md="user",Od="team",a5="noauth",l5="cookie",Rc="dropboxapi.com",hv="dropbox.com",mf={api:"api",notify:"bolt",content:"api-content"},I={};I.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};I.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};I.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};I.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};I.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};I.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};I.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};I.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};I.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};I.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};I.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};I.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};I.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};I.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};I.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};I.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};I.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};I.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};I.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};I.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};I.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};I.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};I.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};I.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};I.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};I.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};I.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};I.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};I.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};I.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};I.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};I.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};I.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};I.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};I.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};I.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};I.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};I.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};I.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};I.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};I.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};I.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};I.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};I.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};I.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};I.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};I.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};I.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};I.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};I.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};I.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};I.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};I.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};I.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};I.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};I.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};I.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};I.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};I.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};I.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};I.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};I.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};I.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};I.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};I.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};I.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};I.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};I.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};I.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};I.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};I.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};I.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};I.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};I.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};I.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};I.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};I.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};I.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};I.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};I.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};I.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};I.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};I.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};I.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};I.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};I.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};I.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};I.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};I.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};I.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};I.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};I.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};I.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};I.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};I.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};I.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};I.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};I.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};I.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};I.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};I.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};I.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};I.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};I.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};I.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};I.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};I.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};I.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};I.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};I.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};I.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};I.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};I.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};I.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};I.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};I.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};I.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};I.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};I.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};I.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};I.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};I.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};I.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};I.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};I.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};I.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};I.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};I.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};I.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};I.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};I.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};I.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};I.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};I.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};I.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};I.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};I.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};I.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};I.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};I.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};I.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};I.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};I.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};I.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};I.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};I.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};I.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};I.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};I.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};I.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};I.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};I.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};I.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};I.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};I.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};I.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};I.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};I.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};I.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};I.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};I.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};I.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};I.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};I.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};I.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};I.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};I.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};I.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};I.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};I.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};I.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};I.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};I.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};I.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};I.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};I.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};I.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};I.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};I.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};I.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};I.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};I.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};I.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};I.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};I.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};I.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};I.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};I.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};I.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};I.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function c5(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var Vd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rc,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return r?(n!==Rc&&mf[e]!==void 0&&(e=mf[e],r="-"),"https://".concat(e).concat(r).concat(n,"/2/")):"https://".concat(n,"/2/")},u5=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hv;return e!==hv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},fv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rc,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",r="api";return e!==Rc&&(r=mf[r],n="-"),"https://".concat(r).concat(n).concat(e,"/oauth2/token")};function mv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,c5)}function d5(t){return new Date(Date.now()+t*1e3)}function pv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof B1>"u"||typeof window<"u"}function Fd(){return typeof window<"u"}function Ud(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function pl(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function Fl(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fl=function(n){return typeof n}:Fl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Fl(t)}function h5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ua(t,e)}function m5(t){var e=V1();return function(){var r=da(t),s;if(e){var i=da(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return p5(this,s)}}function p5(t,e){return e&&(Fl(e)==="object"||typeof e=="function")?e:g5(t)}function g5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pf(t){var e=typeof Map=="function"?new Map:void 0;return pf=function(r){if(r===null||!y5(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return Ul(r,arguments,da(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),ua(s,r)},pf(t)}function Ul(t,e,n){return V1()?Ul=Reflect.construct:Ul=function(s,i,a){var c=[null];c.push.apply(c,i);var u=Function.bind.apply(s,c),d=new u;return a&&ua(d,a.prototype),d},Ul.apply(null,arguments)}function V1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y5(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function ua(t,e){return ua=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},ua(t,e)}function da(t){return da=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},da(t)}var v5=function(t){f5(n,t);var e=m5(n);function n(r,s,i){var a;return h5(this,n),a=e.call(this,"Response failed with a ".concat(r," code")),a.name="DropboxResponseError",a.status=r,a.headers=s,a.error=i,a}return n}(pf(Error));function x5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var F1=function t(e,n,r){x5(this,t),this.status=e,this.headers=n,this.result=r};function U1(t){return t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}throw new v5(t.status,t.headers,n)})}function Dc(t){return t.ok?t.text().then(function(e){var n;try{n=JSON.parse(e)}catch{n=e}return new F1(t.status,t.headers,n)}):U1(t)}function _5(t){return t.ok?new Promise(function(e){pv()?t.blob().then(function(n){return e(n)}):t.buffer().then(function(n){return e(n)})}).then(function(e){var n=JSON.parse(t.headers.get("dropbox-api-result"));return pv()?n.fileBlob=e:n.fileBinary=e,new F1(t.status,t.headers,n)}):U1(t)}function w5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E5(t,e,n){return e&&b5(t.prototype,e),t}var gl,Wr,qd,N5=300*1e3,gv=128,T5=["legacy","offline","online"],I5=["code","token"],S5=["none","user","team"],A5=function(){function t(e){w5(this,t),e=e||{},Fd()?(gl=window.fetch.bind(window),Wr=window.crypto||window.msCrypto):Ud()?(gl=self.fetch.bind(self),Wr=self.crypto):(gl=require("node-fetch"),Wr=require("crypto")),typeof TextEncoder>"u"?qd=require("util").TextEncoder:qd=TextEncoder,this.fetch=e.fetch||gl,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return E5(t,[{key:"setAccessToken",value:function(n){this.accessToken=n}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(n){this.clientId=n}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(n){this.clientSecret=n}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(n){this.refreshToken=n}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(n){this.accessTokenExpiresAt=n}},{key:"setCodeVerifier",value:function(n){this.codeVerifier=n}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var n=this,r=new qd,s=r.encode(this.codeVerifier),i;if(Fd()||Ud())return Wr.subtle.digest("SHA-256",s).then(function(c){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(c)));i=pl(u).substr(0,128),n.codeChallenge=i});var a=Wr.createHash("sha256").update(s).digest();return i=pl(a),this.codeChallenge=i,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var n;if(Fd()||Ud()){var r=new Uint8Array(gv),s=Wr.getRandomValues(r),i=btoa(s);n=pl(i).substr(0,128)}else{var a=Wr.randomBytes(gv);n=pl(a).substr(0,128)}return this.codeVerifier=n,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(n,r){var s=this,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,f=this.getClientId(),m=u5(this.domain);if(!f)throw new Error("A client id is required. You can set the client id using .setClientId().");if(i!=="code"&&!n)throw new Error("A redirect uri is required.");if(!I5.includes(i))throw new Error("Authorization type must be code or token");if(a&&!T5.includes(a))throw new Error("Token Access Type must be legacy, offline, or online");if(c&&!(c instanceof Array))throw new Error("Scope must be an array of strings");if(!S5.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var g;return i==="code"?g="".concat(m,"?response_type=code&client_id=").concat(f):g="".concat(m,"?response_type=token&client_id=").concat(f),n&&(g+="&redirect_uri=".concat(n)),r&&(g+="&state=".concat(r)),a&&(g+="&token_access_type=".concat(a)),c&&(g+="&scope=".concat(c.join(" "))),u!=="none"&&(g+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return g+="&code_challenge_method=S256",g+="&code_challenge=".concat(s.codeChallenge),g}):Promise.resolve(g)}},{key:"getAccessTokenFromCode",value:function(n,r){var s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");var a=fv(this.domain,this.domainDelimiter);if(a+="?grant_type=authorization_code",a+="&code=".concat(r),a+="&client_id=".concat(s),i)a+="&client_secret=".concat(i);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");a+="&code_verifier=".concat(this.codeVerifier)}n&&(a+="&redirect_uri=".concat(n));var c={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(a,c).then(function(u){return Dc(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var n=this.getRefreshToken()&&this.getClientId(),r=!this.getAccessTokenExpiresAt()||new Date(Date.now()+N5)>=this.getAccessTokenExpiresAt(),s=!this.getAccessToken();return(r||s)&&n?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,s=this.getClientId(),i=this.getClientSecret();if(!s)throw new Error("A client id is required. You can set the client id using .setClientId().");if(r&&!(r instanceof Array))throw new Error("Scope must be an array of strings");var a=fv(this.domain,this.domainDelimiter),c={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:s,refresh_token:this.getRefreshToken()};i&&(u.client_secret=i),r&&(u.scope=r.join(" ")),c.body=u}else a+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),a+="&client_id=".concat(s),i&&(a+="&client_secret=".concat(i)),r&&(a+="&scope=".concat(r.join(" ")));return this.fetch(a,c).then(function(d){return Dc(d)}).then(function(d){n.setAccessToken(d.result.access_token),n.setAccessTokenExpiresAt(d5(d.result.expires_in))})}}]),t}();function j5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k5(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C5(t,e,n){return e&&k5(t.prototype,e),t}var P5=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,R5=function(){function t(e){j5(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new A5(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,I)}return C5(t,[{key:"request",value:function(n,r,s,i,a){switch(a){case s5:return this.rpcRequest(n,r,s,i);case o5:return this.downloadRequest(n,r,s,i);case i5:return this.uploadRequest(n,r,s,i);default:throw new Error("Invalid request style: ".concat(a))}}},{key:"rpcRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",body:r?JSON.stringify(r):null,headers:{}};return r&&(c.headers["Content-Type"]="application/json"),a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Vd(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Dc(c)})}},{key:"downloadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c={method:"POST",headers:{"Dropbox-API-Arg":mv(r)}};return a.setAuthHeaders(s,c),a.setCommonHeaders(c),c}).then(function(c){return a.fetch(Vd(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return _5(c)})}},{key:"uploadRequest",value:function(n,r,s,i){var a=this;return this.auth.checkAndRefreshAccessToken().then(function(){var c=r.contents;delete r.contents;var u={body:c,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":mv(r)}};return a.setAuthHeaders(s,u),a.setCommonHeaders(u),u}).then(function(c){return a.fetch(Vd(i,a.domain,a.domainDelimiter)+n,c)}).then(function(c){return Dc(c)})}},{key:"setAuthHeaders",value:function(n,r){if(n.split(",").length>1){var s=n.replace(" ","").split(",");s.includes(Md)&&this.auth.getAccessToken()?n=Md:s.includes(Od)&&this.auth.getAccessToken()?n=Od:s.includes(Ld)&&(n=Ld)}switch(n){case Ld:if(this.auth.clientId&&this.auth.clientSecret){var i=P5("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));r.headers.Authorization="Basic ".concat(i)}break;case Od:case Md:this.auth.getAccessToken()&&(r.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case a5:case l5:break;default:throw new Error("Unhandled auth type: ".concat(n))}}},{key:"setCommonHeaders",value:function(n){var r=this;if(this.selectUser&&(n.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(n.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(n.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var s=Object.keys(this.customHeaders);s.forEach(function(i){n.headers[i]=r.customHeaders[i]})}}}]),t}();const D5="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";function q1({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:n=!1}){const[r,s]=C.useState(null),[i,a]=C.useState(!1),[c,u]=C.useState(null),d=m=>{m.target.files&&m.target.files.length>0&&s(m.target.files[0])},f=async()=>{if(!r)return;a(!0);const m=new R5({accessToken:D5});let g=!1,w="";try{const S=await m.filesUpload({path:"/"+encodeURIComponent(r.name),contents:r,autorename:!0});g=!0,w=S.result.path_display||S.result.path_lower||"/"+r.name,console.log("Upload réussi!",S);try{const R=(await m.sharingCreateSharedLinkWithSettings({path:w})).result.url.replace("?dl=0","?raw=1");u(R),t&&t(R)}catch(k){console.error("Erreur lors de la création du lien partageable:",k),alert("Le fichier a été uploadé avec succès, mais la création du lien a échoué.")}}catch(S){console.error("Erreur lors de l'upload:",S),S instanceof Error?alert(`Erreur lors de l'upload : ${S.message}
Type: ${S.constructor.name}`):alert(`Erreur lors de l'upload : ${String(S)}`)}if(a(!1),g)return alert(`Fichier "${r.name}" uploadé avec succès sur Dropbox!`)};return o.jsxs("div",{className:n?"flex items-center":"space-y-3",children:[o.jsx("div",{className:n?"flex-grow mr-2":"mb-2",children:o.jsx("input",{type:"file",onChange:d,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),o.jsx("button",{onClick:f,disabled:!r||i,className:`${n?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:i?"Envoi...":e}),c&&!n&&o.jsx("div",{className:"mt-2 text-sm text-gray-600",children:o.jsxs("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier uploadé avec succès"]})})]})}const L5=()=>{const[t]=F_(),e=mn(),{currentUser:n}=bt(),{resources:r,addResource:s,updateResource:i,deleteResource:a}=Li(),c=t.get("new")==="resource",u=t.get("edit"),[d,f]=C.useState(""),[m,g]=C.useState(""),[w,S]=C.useState("post-cps"),[k,R]=C.useState(""),[N,E]=C.useState(""),[T,M]=C.useState("pdf"),[D,V]=C.useState(!1),A=[...new Set(r.map(b=>b.category))];C.useEffect(()=>{if(u){const b=r.find(se=>se.id===u);b&&(f(b.title),g(b.description),S(b.phase),R(b.category),E(b.fileUrl),M(b.fileType))}else c&&(f(""),g(""),S("post-cps"),R(""),E(""),M("pdf"))},[u,c,r]);const y=b=>{b.preventDefault(),u?(i(u,{title:d,description:m,phase:w,category:k,fileUrl:N,fileType:T}),Pn({type:"Modification",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})):(s({title:d,description:m,phase:w,category:k,fileUrl:N,fileType:T,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Pn({type:"Ajout",target:"Ressource",user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}})),e("/admin")},v=()=>{V(!0)},_=()=>{u&&(a(u),Pn({type:"Suppression",target:"Ressource",targetId:u,user:typeof n=="object"&&(n!=null&&n.displayName)?n.displayName:void 0,details:{title:d}}),e("/admin"))},j={"post-cps":r.filter(b=>b.phase==="post-cps"),"during-process":r.filter(b=>b.phase==="during-process"),"pre-arrival":r.filter(b=>b.phase==="pre-arrival")},P=b=>{switch(b){case"pdf":case"doc":return o.jsx(Un,{className:"w-5 h-5"});case"image":return o.jsx(j4,{className:"w-5 h-5"});case"link":return o.jsx(M4,{className:"w-5 h-5"});default:return o.jsx(k4,{className:"w-5 h-5"})}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:c?"Ajouter une nouvelle ressource":"Modifier la ressource"}),o.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[o.jsx(xs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsx("div",{className:"lg:col-span-2",children:o.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:o.jsx("form",{onSubmit:y,className:"space-y-7",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),o.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:d,onChange:b=>f(b.target.value),required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),o.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:m,onChange:b=>g(b.target.value),required:!0})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),o.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:w,onChange:b=>S(b.target.value),required:!0,children:[o.jsx("option",{value:"post-cps",children:"Post-CPS"}),o.jsx("option",{value:"during-process",children:"Pendant les démarches"}),o.jsx("option",{value:"pre-arrival",children:"Pré-arrivée"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catégorie"}),o.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:k,onChange:b=>R(b.target.value),required:!0}),o.jsx("datalist",{id:"categories",children:A.map((b,se)=>o.jsx("option",{value:b},se))})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),o.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:T,onChange:b=>M(b.target.value),required:!0,children:[o.jsxs("optgroup",{label:"Documents",children:[o.jsx("option",{value:"pdf",children:"PDF"}),o.jsx("option",{value:"doc",children:"Word (.doc)"}),o.jsx("option",{value:"docx",children:"Word (.docx)"}),o.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),o.jsxs("optgroup",{label:"Tableurs",children:[o.jsx("option",{value:"xls",children:"Excel (.xls)"}),o.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),o.jsxs("optgroup",{label:"Présentations",children:[o.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),o.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),o.jsxs("optgroup",{label:"Médias",children:[o.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),o.jsx("option",{value:"video",children:"Vidéo (.mp4, etc.)"}),o.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),o.jsxs("optgroup",{label:"Autres",children:[o.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),o.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:T==="link"?"URL du lien":"URL du fichier"}),T!=="link"&&o.jsxs("div",{className:"mt-3 mb-4 p-4 border border-blue-200 rounded-lg bg-blue-50/30",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(B4,{className:"w-5 h-5 text-blue-600 mr-2"}),o.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajouté ci-dessous."}),o.jsx(q1,{onSuccess:b=>E(b),buttonText:"Uploader le fichier vers Dropbox"})]}),o.jsx("div",{className:"flex items-center",children:o.jsx("input",{type:"url",id:"fileUrl",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:N,onChange:b=>E(b.target.value),placeholder:T==="link"?"https://example.com":"https://dropbox.com/s/...",required:!0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:T==="link"?"Entrez l'URL complète du site web externe.":"URL générée automatiquement après upload ou entrez manuellement une URL Dropbox/Google Drive."})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("div",{children:u&&o.jsxs("button",{type:"button",onClick:v,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[o.jsx(Cc,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[o.jsx(hf,{className:"mr-2 h-4 w-4"}),c?"Ajouter":"Enregistrer"]})]})]})]})})})}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),o.jsxs("button",{onClick:()=>e("/admin/resources?new=resource"),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[o.jsx(ui,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(j["post-cps"])&&j["post-cps"].length>0?o.jsx("ul",{className:"space-y-2",children:j["post-cps"].map(b=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${b.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===b.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:P(b.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:b.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:b.category})]})]})},b.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les démarches"}),Array.isArray(j["during-process"])&&j["during-process"].length>0?o.jsx("ul",{className:"space-y-2",children:j["during-process"].map(b=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${b.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===b.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:P(b.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:b.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:b.category})]})]})},b.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pré-arrivée"}),Array.isArray(j["pre-arrival"])&&j["pre-arrival"].length>0?o.jsx("ul",{className:"space-y-2",children:j["pre-arrival"].map(b=>o.jsx("li",{children:o.jsxs("button",{onClick:()=>e(`/admin/resources?edit=${b.id}`),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${u===b.id?"bg-blue-50 border border-blue-200":""}`,children:[o.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:P(b.fileType)}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("span",{className:"block text-sm font-medium",children:b.title}),o.jsx("span",{className:"block text-xs text-gray-500",children:b.category})]})]})},b.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),o.jsx(_p,{isOpen:D,onClose:()=>V(!1),onConfirm:_,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer la ressource "${d}" ? Cette action est irréversible.`,confirmButtonText:"Supprimer",type:"danger"})]})},z1=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s})=>{const[i,a]=C.useState(""),c=u=>{u.preventDefault(),n(i)};return Mc.useEffect(()=>{t||a("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),o.jsxs("form",{onSubmit:c,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:i,onChange:u=>a(u.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||i==="",children:"Valider"})]})]})}):null},M5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState([]),[f,m]=C.useState(!0),[g,w]=C.useState(null),{currentUser:S}=bt(),k=mn(),R=async()=>{m(!0),w(null);try{const T=await xn(Fe(le,"users")),M=[];T.forEach(D=>{M.push(D.data())}),d(M)}catch{w("Erreur lors du chargement des utilisateurs.")}finally{m(!1)}};C.useEffect(()=>{R()},[]);const N=async(T,M)=>{e(!0),c({uid:T,isAdmin:M}),i(null)},E=async T=>{if(!a)return;if(r(!0),i(null),T!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}const M=u.find(D=>D.uid===a.uid);if(M!=null&&M.isSuperAdmin&&M.uid!==(S==null?void 0:S.uid)){i("Impossible de modifier le rôle d'un admin principal."),r(!1);return}try{await li(yt(le,"users",a.uid),{isAdmin:!a.isAdmin}),d(D=>D.map(V=>V.uid===a.uid?{...V,isAdmin:!a.isAdmin}:V)),e(!1),c(null)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{r(!1)}};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>k("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(xs,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-8",children:f?o.jsx("div",{children:"Chargement..."}):g?o.jsx("div",{className:"text-red-600",children:g}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-100",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2",children:"Nom"}),o.jsx("th",{className:"px-4 py-2",children:"Email"}),o.jsx("th",{className:"px-4 py-2",children:"Admin"}),o.jsx("th",{className:"px-4 py-2",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(T=>o.jsxs("tr",{children:[o.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>k(`/admin/users/${T.uid}`),children:[T.photoURL?o.jsx("img",{src:T.photoURL,alt:T.displayName||T.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):o.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:o.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),T.displayName||T.email,T.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),T.uid===(S==null?void 0:S.uid)&&o.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),o.jsx("td",{className:"px-4 py-2",children:T.email}),o.jsxs("td",{className:"px-4 py-2",children:[T.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(xp,{className:"w-4 h-4 mr-1"})," Admin"]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),T.isSuperAdmin&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]}),o.jsxs("td",{className:"px-4 py-2",children:[T.uid!==(S==null?void 0:S.uid)&&!T.isSuperAdmin&&o.jsx("button",{onClick:()=>N(T.uid,T.isAdmin),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${T.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:T.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(L1,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(M1,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),T.uid!==(S==null?void 0:S.uid)&&T.isSuperAdmin&&o.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rôle d'un admin principal",children:"Impossible de modifier"})]})]},T.uid))})]})})}),o.jsx(z1,{open:t,onClose:()=>{e(!1),c(null),i(null)},onSubmit:E,loading:n,error:s})]})},O5=()=>{const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(!1),{uid:u}=bT(),d=mn(),{currentUser:f}=bt(),[m,g]=C.useState(null),[w,S]=C.useState(!0),[k,R]=C.useState(null),[N,E]=C.useState(!1);C.useEffect(()=>{u&&(async()=>{S(!0),R(null);try{const _=yt(le,"users",u),j=await hp(_);j.exists()?g(j.data()):R("Utilisateur introuvable.")}catch{R("Erreur lors du chargement du profil utilisateur.")}finally{S(!1)}})()},[u]);const T=async()=>{e(!0),i(null)},M=async v=>{if(m){if(r(!0),i(null),v!=="ngiryallahrek"){i("Mot de passe incorrect."),r(!1);return}E(!0);try{await li(yt(le,"users",m.uid),{isAdmin:!m.isAdmin}),g({...m,isAdmin:!m.isAdmin}),e(!1)}catch{i("Erreur lors de la mise à jour du statut administrateur.")}finally{E(!1),r(!1)}}},D=()=>{if(m){if(m.uid===(f==null?void 0:f.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}c(!0)}},V=async()=>{if(m){E(!0);try{await Vl(yt(le,"users",m.uid)),d("/admin/users")}catch{alert("Erreur lors de la suppression de l'utilisateur.")}finally{E(!1)}}},A=v=>{m&&g({...m,[v.target.name]:v.target.value})},y=async()=>{if(m){E(!0);try{await li(yt(le,"users",m.uid),{displayName:m.displayName,photoURL:m.photoURL}),alert("Profil mis à jour !")}catch{alert("Erreur lors de la mise à jour du profil.")}finally{E(!1)}}};return w?o.jsx("div",{className:"p-8",children:"Chargement..."}):k?o.jsx("div",{className:"p-8 text-red-600",children:k}):m?o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(xs,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),o.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[o.jsx("div",{className:"relative mb-6",children:m.photoURL?o.jsx("img",{src:m.photoURL,alt:m.displayName||m.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:o.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),o.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(m==null?void 0:m.displayName)||"",onChange:A,disabled:N||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid)}),(m==null?void 0:m.isSuperAdmin)&&o.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),o.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(m==null?void 0:m.photoURL)||"",onChange:A,disabled:N}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",m.email]}),o.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Vérifié :"})," ",m.emailVerified?"Oui":"Non"]}),o.jsxs("div",{className:"mb-6 w-full text-center",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",m.isAdmin?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[o.jsx(xp,{className:"w-5 h-5 mr-1"})," Admin"]}):o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),o.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[m.uid!==(f==null?void 0:f.uid)&&o.jsx("button",{onClick:T,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${m.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:N||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),children:m.isAdmin?o.jsxs(o.Fragment,{children:[o.jsx(L1,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):o.jsxs(o.Fragment,{children:[o.jsx(M1,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),m.uid!==(f==null?void 0:f.uid)&&o.jsxs("button",{onClick:D,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:N||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),children:[o.jsx(Cc,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),o.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:y,disabled:N||(m==null?void 0:m.isSuperAdmin)&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid),title:m!=null&&m.isSuperAdmin&&(m==null?void 0:m.uid)!==(f==null?void 0:f.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),o.jsx(z1,{open:t,onClose:()=>{e(!1),i(null)},onSubmit:M,loading:n,error:s}),o.jsx(_p,{isOpen:a,onClose:()=>c(!1),onConfirm:V,title:"Confirmer la suppression",message:`Êtes-vous sûr de vouloir supprimer l'utilisateur ${(m==null?void 0:m.displayName)||(m==null?void 0:m.email)} ? Cette action est irréversible.`,confirmButtonText:"Supprimer définitivement",type:"danger"})]}):null},V5=()=>{const[t,e]=C.useState([]),[n,r]=C.useState(!0),[s,i]=C.useState(""),[a,c]=C.useState("all"),[u,d]=C.useState("all"),[f,m]=C.useState("all"),[g,w]=C.useState(!1),[S,k]=C.useState(null),[R,N]=C.useState(!0),E=20,T=y=>{const v=new Date(y);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(v)},M=()=>{const y=new Date;let v=null;switch(f){case"today":v=new Date(y.setHours(0,0,0,0));break;case"week":v=new Date,v.setDate(y.getDate()-7);break;case"month":v=new Date,v.setMonth(y.getMonth()-1);break;default:v=null}return v},D=async(y=!0)=>{try{y?(r(!0),k(null)):w(!0);let v=yo(Fe(le,"adminActivityLog"),r1("date","desc"));const _=M();_&&(v=yo(v,GP("date",">=",_.toISOString()))),v=yo(v,uf(E));const j=await xn(v);N(j.docs.length===E),j.docs.length>0?k(j.docs[j.docs.length-1]):(k(null),N(!1));let b=j.docs.map(se=>({id:se.id,...se.data()}));if(a!=="all"&&(b=b.filter(se=>se.type===a)),u!=="all"&&(b=b.filter(se=>se.target===u)),s){const se=s.toLowerCase();b=b.filter(Ve=>{var Et;return((Et=Ve.user)==null?void 0:Et.toLowerCase().includes(se))||Ve.target.toLowerCase().includes(se)||Ve.type.toLowerCase().includes(se)||Ve.details&&JSON.stringify(Ve.details).toLowerCase().includes(se)})}e(y?b:se=>[...se,...b])}catch(v){console.error("Error fetching activities:",v)}finally{r(!1),w(!1)}};C.useEffect(()=>{D()},[]),C.useEffect(()=>{D()},[a,u,f]);const V=y=>{let v="bg-blue-100 text-blue-800";switch(y.toLowerCase()){case"ajout":v="bg-green-100 text-green-800";break;case"suppression":v="bg-red-100 text-red-800";break;case"modification":v="bg-yellow-100 text-yellow-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:y})},A=y=>{let v="bg-gray-100 text-gray-800";switch(y.toLowerCase()){case"ressource":v="bg-purple-100 text-purple-800";break;case"section":v="bg-indigo-100 text-indigo-800";break;case"faq":v="bg-blue-100 text-blue-800";break;case"utilisateur":v="bg-pink-100 text-pink-800";break}return o.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v}`,children:y})};return o.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsx("div",{className:"container mx-auto px-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Y,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:o.jsx(xs,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activité"}),o.jsx("p",{className:"text-blue-100",children:"Historique détaillé des activités administratives"})]})]})})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(kc,{className:"h-5 w-5 text-gray-400"})}),o.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activités...",value:s,onChange:y=>i(y.target.value)})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:a,onChange:y=>c(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les actions"}),o.jsx("option",{value:"Ajout",children:"Ajout"}),o.jsx("option",{value:"Modification",children:"Modification"}),o.jsx("option",{value:"Suppression",children:"Suppression"})]})}),o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:y=>d(y.target.value),children:[o.jsx("option",{value:"all",children:"Toutes les cibles"}),o.jsx("option",{value:"Ressource",children:"Ressources"}),o.jsx("option",{value:"Section",children:"Sections"}),o.jsx("option",{value:"FAQ",children:"FAQ"}),o.jsx("option",{value:"Utilisateur",children:"Utilisateurs"})]})})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("div",{className:"relative flex-1",children:o.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:f,onChange:y=>m(y.target.value),children:[o.jsx("option",{value:"all",children:"Toute période"}),o.jsx("option",{value:"today",children:"Aujourd'hui"}),o.jsx("option",{value:"week",children:"7 derniers jours"}),o.jsx("option",{value:"month",children:"30 derniers jours"})]})}),o.jsx("button",{onClick:()=>D(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o.jsx(z4,{className:"h-5 w-5"})})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 border-b border-gray-200",children:o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activités récentes"})}),n?o.jsx("div",{className:"p-8 flex justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?o.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activité à afficher. Ajustez les filtres ou effectuez des actions administratives."}):o.jsx("div",{className:"divide-y divide-gray-200",children:t.map(y=>o.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[o.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[V(y.type),o.jsx("span",{className:"mx-2",children:"•"}),A(y.target)]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(S4,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:T(y.date)})]})]}),o.jsx("div",{className:"flex items-start",children:y.user&&o.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[o.jsx(ff,{className:"h-4 w-4 mr-1"}),o.jsx("span",{children:y.user})]})}),y.details&&o.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[o.jsx("h4",{className:"font-medium mb-1",children:"Détails"}),o.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(y.details).map(([v,_])=>o.jsxs("div",{className:"flex",children:[o.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[v,":"]}),o.jsx("dd",{className:"text-gray-900",children:typeof _=="object"?JSON.stringify(_):String(_)})]},v))})]}),y.targetId&&o.jsxs("div",{className:"mt-1 text-sm",children:[o.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",y.targetId]})]},y.id))}),R&&!n&&o.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:o.jsx("button",{onClick:()=>D(!1),disabled:g,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:g?o.jsxs("span",{className:"flex items-center",children:[o.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activités"})})]})]})]})},F5=()=>{const t=mn(),{currentUser:e}=bt();return o.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:o.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[o.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[o.jsx(xs,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),o.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-8",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera à comprendre les différentes fonctionnalités de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilité de gérer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&o.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:o.jsxs("p",{className:"text-blue-800",children:[o.jsx("span",{className:"font-bold",children:"Connecté en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),o.jsxs("ul",{className:"space-y-2",children:[o.jsx("li",{children:o.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),o.jsx("li",{children:o.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),o.jsx("li",{children:o.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),o.jsx("li",{children:o.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),o.jsx("li",{children:o.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"5. Gestion des utilisateurs"})}),o.jsx("li",{children:o.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"6. Journal d'activité"})}),o.jsx("li",{children:o.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"7. Conseils et bonnes pratiques"})})]})]}),o.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(q4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entrée principal dans l'administration. Il vous offre une vue d'ensemble de l'activité et des statistiques clés de la plateforme."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),o.jsx("li",{children:"Utilisateurs actifs (ayant utilisé la plateforme dans les 7 derniers jours)"}),o.jsx("li",{children:"Nombre de sections du guide"}),o.jsx("li",{children:"Nombre de questions FAQ"}),o.jsx("li",{children:"Nombre de ressources disponibles"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activités récentes:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche également les 10 dernières activités enregistrées sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activités, cliquez sur "Voir toutes les activités".`}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord régulièrement pour surveiller l'activité et l'engagement des utilisateurs sur la plateforme."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),o.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accéder à toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latéral."})]})]}),o.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(N4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"L'éditeur de contenu vous permet de créer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient à une phase spécifique du processus d'immigration."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Post-CPS:"})," Pour les démarches après l'obtention du CPS"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pendant les démarches:"})," Pour les informations utiles pendant le processus"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Pré-arrivée:"})," Pour les préparatifs avant l'arrivée en Suisse"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),o.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),o.jsx("li",{children:"Définissez l'ordre d'apparition de la section dans sa phase"}),o.jsx("li",{children:"Associez des ressources à la section si nécessaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour créer la section'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Sélectionnez la section à modifier dans la liste"}),o.jsx("li",{children:"Modifiez les informations dans le formulaire"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous êtes en mode édition. Une confirmation vous sera demandée avant la suppression définitive.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," L'ordre des sections détermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),o.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),o.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),o.jsx("li",{children:"Associez des ressources pertinentes à chaque section"}),o.jsx("li",{children:"Mettez régulièrement à jour le contenu pour maintenir sa pertinence"})]})]})]}),o.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(R1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"La gestion des FAQ vous permet de répondre aux questions fréquemment posées par les utilisateurs. Les questions peuvent être soumises par les utilisateurs ou créées directement par les administrateurs."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Création et édition de questions/réponses"}),o.jsx("li",{children:"Approbation des questions soumises par les utilisateurs"}),o.jsx("li",{children:"Catégorisation des questions par thème"}),o.jsx("li",{children:"Organisation des FAQ par phase du processus d'immigration"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Traitement des questions utilisateurs:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Les questions soumises apparaissent dans la liste avec un statut "En attente de réponse"'}),o.jsx("li",{children:"Pour répondre, sélectionnez la question dans la liste"}),o.jsx("li",{children:"Rédigez votre réponse dans le champ prévu"}),o.jsx("li",{children:"Assignez une catégorie appropriée"}),o.jsx("li",{children:'Cochez "Approuvé" si la question doit être visible publiquement'}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour publier votre réponse'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Création manuelle de FAQ:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:'Vous pouvez également créer des questions manuellement en cliquant sur "Ajouter une FAQ" et en remplissant tous les champs du formulaire. Cela est utile pour anticiper les questions courantes que les utilisateurs pourraient avoir.'}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Répondez aux questions des utilisateurs dans un délai raisonnable pour maintenir leur engagement. Les questions sans réponse peuvent décourager la participation."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Répondez de manière claire et concise"}),o.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),o.jsx("li",{children:"Organisez logiquement par catégories pour faciliter la recherche"}),o.jsx("li",{children:"Mettez à jour les réponses lorsque les informations changent"}),o.jsx("li",{children:"Considérez les questions fréquentes comme une indication des sections du guide à améliorer"})]})]})]}),o.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Un,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire de ressources vous permet d'ajouter des documents, liens et autres contenus utiles que les utilisateurs pourront consulter. Ces ressources peuvent être associées à des sections spécifiques du guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types de ressources supportés:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Documents (PDF, Word, Excel, PowerPoint)"}),o.jsx("li",{children:"Images"}),o.jsx("li",{children:"Liens vers des sites web externes"}),o.jsx("li",{children:"Fichiers audio et vidéo"}),o.jsx("li",{children:"Archives ZIP"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Ajout d'une ressource:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:'Cliquez sur "Ajouter une ressource"'}),o.jsx("li",{children:"Remplissez les champs du formulaire (titre, description, catégorie, phase)"}),o.jsx("li",{children:"Sélectionnez le type de ressource"}),o.jsx("li",{children:"Téléchargez le fichier via Dropbox ou indiquez l'URL pour un lien"}),o.jsx("li",{children:'Cliquez sur "Enregistrer" pour ajouter la ressource'})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation des ressources:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Les ressources sont organisées par phase du processus d'immigration (Post-CPS, Pendant les démarches, Pré-arrivée) et par catégorie. Cela facilite leur découverte par les utilisateurs."}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Important:"})," Assurez-vous que tous les fichiers téléchargés sont exempts de virus et respectent les droits d'auteur. Privilégiez les documents officiels ou les ressources libres de droits."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Conseils pour la gestion des ressources:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Utilisez des titres descriptifs pour faciliter la recherche"}),o.jsx("li",{children:"Incluez la date de publication/mise à jour dans la description"}),o.jsx("li",{children:"Vérifiez régulièrement que les liens externes fonctionnent toujours"}),o.jsx("li",{children:"Mettez à jour ou supprimez les ressources obsolètes"}),o.jsx("li",{children:"Utilisez des catégories cohérentes pour faciliter la navigation"})]})]})]}),o.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Pc,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestion des utilisateurs"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de gérer leurs droits d'accès."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalités principales:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),o.jsx("li",{children:"Consultation des profils utilisateurs"}),o.jsx("li",{children:"Attribution/retrait des droits d'administration"}),o.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Utilisateurs standard:"})," Accès en lecture seule au guide et aux ressources"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Administrateurs:"})," Accès complet au panneau d'administration"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits étendus, ne peut être modifié que par lui-même"]})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilège:"}),o.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),o.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),o.jsx("li",{children:"Entrez le mot de passe administrateur à l'invite"}),o.jsx("li",{children:"Confirmez l'action"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Sécurité:"}),` La modification des droits d'administration nécessite un mot de passe spécial pour éviter les changements accidentels. Les comptes "Admin principal" sont protégés contre les modifications par d'autres administrateurs.`]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum nécessaire"}),o.jsx("li",{children:"Révisez régulièrement la liste des administrateurs"}),o.jsx("li",{children:"Retirez les privilèges aux utilisateurs qui n'en ont plus besoin"}),o.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irréversible)"}),o.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorisées"})]})]})]}),o.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(w4,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Journal d'activité"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité enregistre toutes les actions importantes effectuées sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la sécurité."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistrées:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Connexions et inscriptions"}),o.jsx("li",{children:"Création, modification et suppression de contenu"}),o.jsx("li",{children:"Ajout et modification de ressources"}),o.jsx("li",{children:"Gestion des FAQ"}),o.jsx("li",{children:"Modifications des droits utilisateurs"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activités:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Type d'activité"}),o.jsx("li",{children:"Utilisateur (email)"}),o.jsx("li",{children:"Période (date de début et date de fin)"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activité est utile pour:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Suivre les modifications apportées au contenu"}),o.jsx("li",{children:"Identifier les auteurs de modifications spécifiques"}),o.jsx("li",{children:"Détecter les problèmes de sécurité potentiels"}),o.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Astuce:"})," Consultez régulièrement le journal d'activité pour vous tenir informé des changements apportés à la plateforme, surtout si vous partagez les responsabilités d'administration avec d'autres personnes."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsx("li",{children:"Vérifiez le journal après des modifications importantes"}),o.jsx("li",{children:"Utilisez les filtres pour cibler des informations spécifiques"}),o.jsx("li",{children:"Surveillez les activités inhabituelles qui pourraient indiquer un problème"}),o.jsx("li",{children:"Analysez périodiquement les tendances d'utilisation pour améliorer la plateforme"})]})]})]}),o.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(D1,{className:"w-6 h-6 text-blue-700 mr-2"}),o.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),o.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[o.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils généraux pour une administration efficace de la plateforme ESIG-prep-guide."}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Mettez à jour régulièrement le contenu pour refléter les changements dans les procédures"}),o.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de compréhension"}),o.jsx("li",{children:"Structurez le contenu de manière logique et progressive"}),o.jsx("li",{children:"Intégrez des exemples concrets et des cas pratiques"}),o.jsx("li",{children:"Complétez le texte avec des ressources visuelles quand c'est possible"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Répondez aux questions des utilisateurs dans un délai raisonnable"}),o.jsx("li",{children:"Prenez en compte les retours d'expérience pour améliorer le guide"}),o.jsx("li",{children:"Soyez attentif aux questions récurrentes qui pourraient indiquer des lacunes dans le contenu"}),o.jsx("li",{children:"Encouragez les utilisateurs à contribuer en posant des questions et en partageant leur expérience"})]}),o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Sécurité et confidentialité:"}),o.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[o.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),o.jsx("li",{children:"Déconnectez-vous après chaque session, surtout sur des ordinateurs partagés"}),o.jsx("li",{children:"Respectez la confidentialité des données utilisateurs"}),o.jsx("li",{children:"Vérifiez régulièrement le journal d'activité pour détecter toute activité suspecte"}),o.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),o.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:o.jsxs("p",{className:"text-gray-800 italic text-sm",children:[o.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilité de maintenir la qualité et l'exactitude des informations fournies aux utilisateurs. Veillez à ce que le contenu soit toujours à jour et pertinent."]})})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[o.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggéré:"}),o.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Quotidiennement:"})," Vérifier les nouvelles questions FAQ et y répondre"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activité et les statistiques"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mensuellement:"})," Vérifier et mettre à jour le contenu du guide"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Trimestriellement:"})," Réviser l'organisation des ressources et les droits des utilisateurs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Annuellement:"})," Effectuer une révision complète de tous les contenus"]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances nécessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hésitez pas à revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),o.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficultés, contactez l'administrateur principal du système."}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(xs,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},U5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(null),[s,i]=C.useState(!0),[a,c]=C.useState(""),[u,d]=C.useState("test1234"),f=async()=>{try{(await xn(Fe(le,"test"))).empty?(await Dn(Fe(le,"test"),{message:"Connexion à Firestore réussie!",timestamp:new Date().toISOString()}),e("Document créé avec succès!")):e("Connexion à Firestore réussie!")}catch(g){const w=g;console.error("Erreur Firestore:",w),e(`Erreur Firestore: ${w.message}`)}},m=async()=>{try{const g=await Ew(ct,a,u);r(g.user),await Wh(ct,a,u),e(w=>w+`
Authentification réussie!`)}catch(g){const w=g;if(w.code==="auth/email-already-in-use"){const S=await Wh(ct,a,u);r(S.user),e(k=>k+`
Connexion réussie (utilisateur existant)!`)}else console.error("Erreur d'authentification:",g),e(S=>S+`
Erreur d'authentification: ${w.message}`)}};return C.useEffect(()=>{const g=ct.onAuthStateChanged(w=>{r(w),w&&c(w.email||""),i(!1)});return()=>g()},[]),s?o.jsx("div",{className:"p-4",children:"Chargement..."}):o.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[o.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intégration Firebase"}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),o.jsxs("p",{children:["Utilisateur: ",n?n.email:"Non connecté"]}),o.jsxs("p",{children:["UID: ",(n==null?void 0:n.uid)||"N/A"]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),o.jsx("button",{onClick:f,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),o.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Dn(Fe(le,"guideSections"),{title:"Préparer son dossier Campus France",content:"Voici comment préparer...",phase:"pre-cps",order:1}),await Dn(Fe(le,"guideSections"),{title:"Demander son visa",content:"Procédure détaillée...",phase:"post-cps",order:2}),await Dn(Fe(le,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Dn(Fe(le,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrivée",createdAt:new Date().toISOString()}),e("Base initialisée avec succès !")}catch(g){e("Erreur lors de l'initialisation : "+g.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Email:"}),o.jsx("input",{type:"email",value:a,onChange:g=>c(g.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),o.jsx("input",{type:"password",value:u,onChange:g=>d(g.target.value),className:"border p-2 w-full max-w-md"})]}),o.jsx("button",{onClick:m,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!a||!u,children:n?"Se connecter":"Créer un compte"})]}),o.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Résultats des tests"}),o.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectué"})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Upload Dropbox"}),o.jsx(q1,{})]})]})},q5=()=>o.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:o.jsxs("div",{className:"text-center max-w-md",children:[o.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:o.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),o.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouvée"}),o.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a été déplacée."}),o.jsxs(Y,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[o.jsx(D4,{className:"mr-2 h-5 w-5"}),"Retour à l'accueil"]})]})}),z5=({open:t,onClose:e,onSubmit:n,loading:r=!1,error:s,label:i})=>{const[a,c]=C.useState(""),u=d=>{d.preventDefault(),n(a)};return Mc.useEffect(()=>{t||c("")},[t]),t?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[o.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:r,"aria-label":"Fermer",children:"×"}),o.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:i||"Confirmez avec votre mot de passe"}),o.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[o.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:a,onChange:d=>c(d.target.value),disabled:r,autoFocus:!0}),s&&o.jsx("div",{className:"text-red-600 text-sm text-center",children:s}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:r||a==="",children:"Valider"})]})]})}):null},B5=()=>{var tt,$;const[t,e]=C.useState(!1),[n,r]=C.useState(!1),[s,i]=C.useState(null),[a,c]=C.useState(null),[u,d]=C.useState(null),[f,m]=C.useState(""),{currentUser:g}=bt(),[w,S]=C.useState((g==null?void 0:g.displayName)||""),[k,R]=C.useState((g==null?void 0:g.photoURL)||""),[N]=C.useState((g==null?void 0:g.email)||""),[E,T]=C.useState(""),[M,D]=C.useState(!1),[V,A]=C.useState(null),[y,v]=C.useState(null),[_,j]=C.useState(null);if(!g)return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:o.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:o.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez être connecté pour accéder à votre profil."})})});const P=ct.currentUser,b=P==null?void 0:P.providerData.some(W=>W.providerId==="password"),se=async W=>{if(W.preventDefault(),A(null),v(null),!b){j("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:w,photoURL:k}),c("profile"),e(!0)},Ve=async W=>{if(W.preventDefault(),A(null),v(null),!b){j("Vous avez créé votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}m(E),c("password"),e(!0)},Et=async W=>{const J=ct.currentUser;if(!J)return;r(!0),i(null);const ue=Ts.credential(J.email||"",W);try{await NA(J,ue),a==="profile"&&u?(await Nw(J,{displayName:u.displayName,photoURL:u.photoURL}),S(u.displayName),R(u.photoURL),v("Profil mis à jour !")):a==="password"&&f&&(await IA(J,f),T(""),v("Mot de passe mis à jour !")),e(!1),c(null),d(null),m("")}catch{i("Mot de passe incorrect.")}finally{r(!1),D(!1)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 animate-fadeIn",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp",children:[o.jsxs("div",{className:"relative mb-5",children:[k?o.jsx("img",{src:k,alt:w||N,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):o.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:((tt=w==null?void 0:w.charAt(0))==null?void 0:tt.toUpperCase())||(($=N==null?void 0:N.charAt(0))==null?void 0:$.toUpperCase())}),(g==null?void 0:g.emailVerified)&&o.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vérifié"}),(g==null?void 0:g.isAdmin)&&o.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[o.jsx(xp,{className:"w-4 h-4"})," Admin"]})]}),o.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:w||N}),o.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:N}),o.jsxs("form",{onSubmit:se,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affiché"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:w,onChange:W=>S(W.target.value),placeholder:"Nom affiché",disabled:M})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),o.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:k,onChange:W=>R(W.target.value),placeholder:"URL de la photo",disabled:M})]})]}),o.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:M,children:"Sauvegarder le profil"})]}),o.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),b?o.jsxs(o.Fragment,{children:[o.jsxs("form",{onSubmit:Ve,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),o.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:E,onChange:W=>T(W.target.value),placeholder:"Nouveau mot de passe (min. 6 caractères)",disabled:M}),o.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:M||E.length<6,children:"Mettre à jour le mot de passe"})]}),o.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{A(null),v(null);try{await Hh(ct,N),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{A("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}):o.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[o.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez créé votre compte avec Google. Vous ne pouvez pas définir ou changer de mot de passe ici."}),o.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{A(null),v(null);try{await Hh(ct,N),v("Un email de réinitialisation a été envoyé à votre adresse.")}catch{A("Erreur lors de l’envoi de l’email de réinitialisation.")}},children:"Réinitialiser mon mot de passe"})]}),(V||y)&&o.jsx("div",{className:`mt-6 text-center text-sm font-medium ${V?"text-red-600":"text-green-600"}`,children:V||y}),_&&o.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:_}),o.jsx(z5,{open:t,onClose:()=>{e(!1),i(null),c(null)},onSubmit:Et,loading:n,error:s,label:a==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})},$5=()=>{const[t,e]=C.useState(""),[n,r]=C.useState(""),[s,i]=C.useState(""),[a,c]=C.useState(!1),u=mn(),d=async f=>{f.preventDefault(),i(""),r(""),c(!0);try{await Hh(ct,t),r("Un email de réinitialisation a été envoyé.")}catch{i("Erreur lors de l'envoi de l'email. Vérifiez l'adresse saisie.")}finally{c(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:o.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Réinitialiser le mot de passe"})]}),o.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[n&&o.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:n}),s&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:s}),o.jsxs("form",{className:"space-y-6",onSubmit:d,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:a,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${a?"opacity-70 cursor-not-allowed":""}`,children:a?"Envoi en cours...":"Envoyer le lien de réinitialisation"})})]}),o.jsx("div",{className:"mt-4 text-center",children:o.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour à la connexion"})})]})})]})};function G5(){return o.jsx(y4,{children:o.jsx(v4,{children:o.jsx(GT,{basename:"/Esig-prep-guide",children:o.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[o.jsx(H4,{}),o.jsx("main",{className:"flex-grow",children:o.jsxs(OT,{children:[o.jsx(Be,{path:"/",element:o.jsx(Q4,{})}),o.jsx(Be,{path:"/login",element:o.jsx(K4,{})}),o.jsx(Be,{path:"/register",element:o.jsx(Y4,{})}),o.jsx(Be,{path:"/reset-password",element:o.jsx($5,{})}),o.jsx(Be,{path:"/test-firebase",element:o.jsx(U5,{})}),o.jsx(Be,{path:"/dashboard",element:o.jsx(ml,{children:o.jsx(J4,{})})}),o.jsx(Be,{path:"/resources",element:o.jsx(ml,{children:o.jsx(X4,{})})}),o.jsx(Be,{path:"/faq",element:o.jsx(ml,{children:o.jsx(Z4,{})})}),o.jsx(Be,{path:"/profile",element:o.jsx(ml,{children:o.jsx(B5,{})})}),o.jsx(Be,{path:"/admin",element:o.jsx(Hr,{children:o.jsx(n5,{})})}),o.jsx(Be,{path:"/admin/content",element:o.jsx(Hr,{children:o.jsx(r5,{})})}),o.jsx(Be,{path:"/admin/resources",element:o.jsx(Hr,{children:o.jsx(L5,{})})}),o.jsx(Be,{path:"/admin/users",element:o.jsx(Hr,{children:o.jsx(M5,{})})}),o.jsx(Be,{path:"/admin/users/:uid",element:o.jsx(Hr,{children:o.jsx(O5,{})})}),o.jsx(Be,{path:"/admin/activity",element:o.jsx(Hr,{children:o.jsx(V5,{})})}),o.jsx(Be,{path:"/admin/tutorial",element:o.jsx(Hr,{children:o.jsx(F5,{})})}),o.jsx(Be,{path:"*",element:o.jsx(q5,{})})]})}),o.jsx(W4,{})]})})})})}j_(document.getElementById("root")).render(o.jsx(C.StrictMode,{children:o.jsx(G5,{})}))});export default H5();
