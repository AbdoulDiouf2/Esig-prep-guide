var c_=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var qD=c_((HD,O2)=>{function u_(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function d_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zv={exports:{}},Ju={},Bv={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kl=Symbol.for("react.element"),h_=Symbol.for("react.portal"),m_=Symbol.for("react.fragment"),p_=Symbol.for("react.strict_mode"),f_=Symbol.for("react.profiler"),x_=Symbol.for("react.provider"),g_=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),v_=Symbol.for("react.suspense"),b_=Symbol.for("react.memo"),w_=Symbol.for("react.lazy"),Dg=Symbol.iterator;function j_(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var $v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gv=Object.assign,Wv={};function Fa(t,e,s){this.props=t,this.context=e,this.refs=Wv,this.updater=s||$v}Fa.prototype.isReactComponent={};Fa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Hv(){}Hv.prototype=Fa.prototype;function Mp(t,e,s){this.props=t,this.context=e,this.refs=Wv,this.updater=s||$v}var Vp=Mp.prototype=new Hv;Vp.constructor=Mp;Gv(Vp,Fa.prototype);Vp.isPureReactComponent=!0;var Lg=Array.isArray,Qv=Object.prototype.hasOwnProperty,Fp={current:null},Kv={key:!0,ref:!0,__self:!0,__source:!0};function Yv(t,e,s){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Qv.call(e,n)&&!Kv.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:kl,type:t,key:a,ref:o,props:i,_owner:Fp.current}}function N_(t,e){return{$$typeof:kl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Op(t){return typeof t=="object"&&t!==null&&t.$$typeof===kl}function __(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Mg=/\/+/g;function ah(t,e){return typeof t=="object"&&t!==null&&t.key!=null?__(""+t.key):e.toString(36)}function Rc(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case kl:case h_:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+ah(o,0):n,Lg(i)?(s="",t!=null&&(s=t.replace(Mg,"$&/")+"/"),Rc(i,e,s,"",function(d){return d})):i!=null&&(Op(i)&&(i=N_(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Mg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Lg(t))for(var l=0;l<t.length;l++){a=t[l];var u=n+ah(a,l);o+=Rc(a,e,s,u,i)}else if(u=j_(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=n+ah(a,l++),o+=Rc(a,e,s,u,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cc(t,e,s){if(t==null)return t;var n=[],i=0;return Rc(t,n,"","",function(a){return e.call(s,a,i++)}),n}function E_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cs={current:null},Dc={transition:null},k_={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:Fp};function Jv(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:cc,forEach:function(t,e,s){cc(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return cc(t,function(){e++}),e},toArray:function(t){return cc(t,function(e){return e})||[]},only:function(t){if(!Op(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Fa;Pe.Fragment=m_;Pe.Profiler=f_;Pe.PureComponent=Mp;Pe.StrictMode=p_;Pe.Suspense=v_;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;Pe.act=Jv;Pe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Gv({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Fp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Qv.call(e,u)&&!Kv.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=s;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:kl,type:t.type,key:i,ref:a,props:n,_owner:o}};Pe.createContext=function(t){return t={$$typeof:g_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x_,_context:t},t.Consumer=t};Pe.createElement=Yv;Pe.createFactory=function(t){var e=Yv.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:y_,render:t}};Pe.isValidElement=Op;Pe.lazy=function(t){return{$$typeof:w_,_payload:{_status:-1,_result:t},_init:E_}};Pe.memo=function(t,e){return{$$typeof:b_,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};Pe.unstable_act=Jv;Pe.useCallback=function(t,e){return cs.current.useCallback(t,e)};Pe.useContext=function(t){return cs.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return cs.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return cs.current.useEffect(t,e)};Pe.useId=function(){return cs.current.useId()};Pe.useImperativeHandle=function(t,e,s){return cs.current.useImperativeHandle(t,e,s)};Pe.useInsertionEffect=function(t,e){return cs.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return cs.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return cs.current.useMemo(t,e)};Pe.useReducer=function(t,e,s){return cs.current.useReducer(t,e,s)};Pe.useRef=function(t){return cs.current.useRef(t)};Pe.useState=function(t){return cs.current.useState(t)};Pe.useSyncExternalStore=function(t,e,s){return cs.current.useSyncExternalStore(t,e,s)};Pe.useTransition=function(){return cs.current.useTransition()};Pe.version="18.3.1";Bv.exports=Pe;var b=Bv.exports;const xi=d_(b),S_=u_({__proto__:null,default:xi},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_=b,T_=Symbol.for("react.element"),A_=Symbol.for("react.fragment"),I_=Object.prototype.hasOwnProperty,P_=C_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R_={key:!0,ref:!0,__self:!0,__source:!0};function Xv(t,e,s){var n,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)I_.call(e,n)&&!R_.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:T_,type:t,key:a,ref:o,props:i,_owner:P_.current}}Ju.Fragment=A_;Ju.jsx=Xv;Ju.jsxs=Xv;zv.exports=Ju;var r=zv.exports,om={},Zv={exports:{}},As={},eb={exports:{}},tb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,re){var V=F.length;F.push(re);e:for(;0<V;){var U=V-1>>>1,X=F[U];if(0<i(X,re))F[U]=re,F[V]=X,V=U;else break e}}function s(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var re=F[0],V=F.pop();if(V!==re){F[0]=V;e:for(var U=0,X=F.length,oe=X>>>1;U<oe;){var me=2*(U+1)-1,_e=F[me],ee=me+1,J=F[ee];if(0>i(_e,V))ee<X&&0>i(J,_e)?(F[U]=J,F[ee]=V,U=ee):(F[U]=_e,F[me]=V,U=me);else if(ee<X&&0>i(J,V))F[U]=J,F[ee]=V,U=ee;else break e}}return re}function i(F,re){var V=F.sortIndex-re.sortIndex;return V!==0?V:F.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,x=3,j=!1,C=!1,R=!1,S=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(F){for(var re=s(d);re!==null;){if(re.callback===null)n(d);else if(re.startTime<=F)n(d),re.sortIndex=re.expirationTime,e(u,re);else break;re=s(d)}}function P(F){if(R=!1,_(F),!C)if(s(u)!==null)C=!0,H(L);else{var re=s(d);re!==null&&O(P,re.startTime-F)}}function L(F,re){C=!1,R&&(R=!1,y(f),f=-1),j=!0;var V=x;try{for(_(re),p=s(u);p!==null&&(!(p.expirationTime>re)||F&&!A());){var U=p.callback;if(typeof U=="function"){p.callback=null,x=p.priorityLevel;var X=U(p.expirationTime<=re);re=t.unstable_now(),typeof X=="function"?p.callback=X:p===s(u)&&n(u),_(re)}else n(u);p=s(u)}if(p!==null)var oe=!0;else{var me=s(d);me!==null&&O(P,me.startTime-re),oe=!1}return oe}finally{p=null,x=V,j=!1}}var M=!1,N=null,f=-1,w=5,E=-1;function A(){return!(t.unstable_now()-E<w)}function I(){if(N!==null){var F=t.unstable_now();E=F;var re=!0;try{re=N(!0,F)}finally{re?k():(M=!1,N=null)}}else M=!1}var k;if(typeof v=="function")k=function(){v(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=I,k=function(){$.postMessage(null)}}else k=function(){S(I,0)};function H(F){N=F,M||(M=!0,k())}function O(F,re){f=S(function(){F(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){C||j||(C=!0,H(L))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return s(u)},t.unstable_next=function(F){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var V=x;x=re;try{return F()}finally{x=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,re){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=x;x=F;try{return re()}finally{x=V}},t.unstable_scheduleCallback=function(F,re,V){var U=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,F){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,F={id:h++,callback:re,priorityLevel:F,startTime:V,expirationTime:X,sortIndex:-1},V>U?(F.sortIndex=V,e(d,F),s(u)===null&&F===s(d)&&(R?(y(f),f=-1):R=!0,O(P,V-U))):(F.sortIndex=X,e(u,F),C||j||(C=!0,H(L))),F},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(F){var re=x;return function(){var V=x;x=re;try{return F.apply(this,arguments)}finally{x=V}}}})(tb);eb.exports=tb;var D_=eb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=b,Cs=D_;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sb=new Set,$o={};function Ri(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for($o[t]=e,t=0;t<e.length;t++)sb.add(e[t])}var $r=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lm=Object.prototype.hasOwnProperty,M_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vg={},Fg={};function V_(t){return lm.call(Fg,t)?!0:lm.call(Vg,t)?!1:M_.test(t)?Fg[t]=!0:(Vg[t]=!0,!1)}function F_(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O_(t,e,s,n){if(e===null||typeof e>"u"||F_(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function us(t,e,s,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new us(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new us(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new us(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new us(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new us(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new us(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new us(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new us(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new us(t,5,!1,t.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function Up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qp,Up);$t[e]=new us(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qp,Up);$t[e]=new us(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qp,Up);$t[e]=new us(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new us(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new us("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new us(t,1,!1,t.toLowerCase(),null,!0,!0)});function zp(t,e,s,n){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(O_(e,s,i,n)&&(s=null),n||i===null?V_(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var Zr=L_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uc=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),Bp=Symbol.for("react.strict_mode"),cm=Symbol.for("react.profiler"),rb=Symbol.for("react.provider"),nb=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),ib=Symbol.for("react.offscreen"),Og=Symbol.iterator;function oo(t){return t===null||typeof t!="object"?null:(t=Og&&t[Og]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,oh;function yo(t){if(oh===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);oh=e&&e[1]||""}return`
`+oh+t}var lh=!1;function ch(t,e){if(!t||lh)return"";lh=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{lh=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?yo(t):""}function q_(t){switch(t.tag){case 5:return yo(t.type);case 16:return yo("Lazy");case 13:return yo("Suspense");case 19:return yo("SuspenseList");case 0:case 2:case 15:return t=ch(t.type,!1),t;case 11:return t=ch(t.type.render,!1),t;case 1:return t=ch(t.type,!0),t;default:return""}}function hm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ta:return"Fragment";case ea:return"Portal";case cm:return"Profiler";case Bp:return"StrictMode";case um:return"Suspense";case dm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nb:return(t.displayName||"Context")+".Consumer";case rb:return(t._context.displayName||"Context")+".Provider";case $p:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gp:return e=t.displayName||null,e!==null?e:hm(t.type)||"Memo";case dn:e=t._payload,t=t._init;try{return hm(t(e))}catch{}}return null}function U_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hm(e);case 8:return e===Bp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ln(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ab(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z_(t){var e=ab(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dc(t){t._valueTracker||(t._valueTracker=z_(t))}function ob(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=ab(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ru(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mm(t,e){var s=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function qg(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Ln(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lb(t,e){e=e.checked,e!=null&&zp(t,"checked",e,!1)}function pm(t,e){lb(t,e);var s=Ln(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fm(t,e.type,s):e.hasOwnProperty("defaultValue")&&fm(t,e.type,Ln(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ug(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function fm(t,e,s){(e!=="number"||ru(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var vo=Array.isArray;function ma(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Ln(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zg(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(se(92));if(vo(s)){if(1<s.length)throw Error(se(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Ln(s)}}function cb(t,e){var s=Ln(e.value),n=Ln(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ub(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ub(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hc,db=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hc=hc||document.createElement("div"),hc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Go(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var So={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B_=["Webkit","ms","Moz","O"];Object.keys(So).forEach(function(t){B_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),So[e]=So[t]})});function hb(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||So.hasOwnProperty(t)&&So[t]?(""+e).trim():e+"px"}function mb(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=hb(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var $_=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(t,e){if(e){if($_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function vm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function Wp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wm=null,pa=null,fa=null;function $g(t){if(t=Tl(t)){if(typeof wm!="function")throw Error(se(280));var e=t.stateNode;e&&(e=sd(e),wm(t.stateNode,t.type,e))}}function pb(t){pa?fa?fa.push(t):fa=[t]:pa=t}function fb(){if(pa){var t=pa,e=fa;if(fa=pa=null,$g(t),e)for(t=0;t<e.length;t++)$g(e[t])}}function xb(t,e){return t(e)}function gb(){}var uh=!1;function yb(t,e,s){if(uh)return t(e,s);uh=!0;try{return xb(t,e,s)}finally{uh=!1,(pa!==null||fa!==null)&&(gb(),fb())}}function Wo(t,e){var s=t.stateNode;if(s===null)return null;var n=sd(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(se(231,e,typeof s));return s}var jm=!1;if($r)try{var lo={};Object.defineProperty(lo,"passive",{get:function(){jm=!0}}),window.addEventListener("test",lo,lo),window.removeEventListener("test",lo,lo)}catch{jm=!1}function G_(t,e,s,n,i,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(h){this.onError(h)}}var Co=!1,nu=null,iu=!1,Nm=null,W_={onError:function(t){Co=!0,nu=t}};function H_(t,e,s,n,i,a,o,l,u){Co=!1,nu=null,G_.apply(W_,arguments)}function Q_(t,e,s,n,i,a,o,l,u){if(H_.apply(this,arguments),Co){if(Co){var d=nu;Co=!1,nu=null}else throw Error(se(198));iu||(iu=!0,Nm=d)}}function Di(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function vb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gg(t){if(Di(t)!==t)throw Error(se(188))}function K_(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(se(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return Gg(i),t;if(a===n)return Gg(i),e;a=a.sibling}throw Error(se(188))}if(s.return!==n.return)s=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o)throw Error(se(189))}}if(s.alternate!==n)throw Error(se(190))}if(s.tag!==3)throw Error(se(188));return s.stateNode.current===s?t:e}function bb(t){return t=K_(t),t!==null?wb(t):null}function wb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=wb(t);if(e!==null)return e;t=t.sibling}return null}var jb=Cs.unstable_scheduleCallback,Wg=Cs.unstable_cancelCallback,Y_=Cs.unstable_shouldYield,J_=Cs.unstable_requestPaint,yt=Cs.unstable_now,X_=Cs.unstable_getCurrentPriorityLevel,Hp=Cs.unstable_ImmediatePriority,Nb=Cs.unstable_UserBlockingPriority,au=Cs.unstable_NormalPriority,Z_=Cs.unstable_LowPriority,_b=Cs.unstable_IdlePriority,Xu=null,gr=null;function eE(t){if(gr&&typeof gr.onCommitFiberRoot=="function")try{gr.onCommitFiberRoot(Xu,t,void 0,(t.current.flags&128)===128)}catch{}}var Zs=Math.clz32?Math.clz32:rE,tE=Math.log,sE=Math.LN2;function rE(t){return t>>>=0,t===0?32:31-(tE(t)/sE|0)|0}var mc=64,pc=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ou(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?n=bo(l):(a&=o,a!==0&&(n=bo(a)))}else o=s&~i,o!==0?n=bo(o):a!==0&&(n=bo(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Zs(e),i=1<<s,n|=t[s],e&=~i;return n}function nE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iE(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Zs(a),l=1<<o,u=i[o];u===-1?(!(l&s)||l&n)&&(i[o]=nE(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function _m(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Eb(){var t=mc;return mc<<=1,!(mc&4194240)&&(mc=64),t}function dh(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Sl(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zs(e),t[e]=s}function aE(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-Zs(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function Qp(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Zs(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var Be=0;function kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sb,Kp,Cb,Tb,Ab,Em=!1,fc=[],jn=null,Nn=null,_n=null,Ho=new Map,Qo=new Map,mn=[],oE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hg(t,e){switch(t){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Ho.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(e.pointerId)}}function co(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Tl(e),e!==null&&Kp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lE(t,e,s,n,i){switch(e){case"focusin":return jn=co(jn,t,e,s,n,i),!0;case"dragenter":return Nn=co(Nn,t,e,s,n,i),!0;case"mouseover":return _n=co(_n,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return Ho.set(a,co(Ho.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Qo.set(a,co(Qo.get(a)||null,t,e,s,n,i)),!0}return!1}function Ib(t){var e=ii(t.target);if(e!==null){var s=Di(e);if(s!==null){if(e=s.tag,e===13){if(e=vb(s),e!==null){t.blockedOn=e,Ab(t.priority,function(){Cb(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=km(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);bm=n,s.target.dispatchEvent(n),bm=null}else return e=Tl(s),e!==null&&Kp(e),t.blockedOn=s,!1;e.shift()}return!0}function Qg(t,e,s){Lc(t)&&s.delete(e)}function cE(){Em=!1,jn!==null&&Lc(jn)&&(jn=null),Nn!==null&&Lc(Nn)&&(Nn=null),_n!==null&&Lc(_n)&&(_n=null),Ho.forEach(Qg),Qo.forEach(Qg)}function uo(t,e){t.blockedOn===e&&(t.blockedOn=null,Em||(Em=!0,Cs.unstable_scheduleCallback(Cs.unstable_NormalPriority,cE)))}function Ko(t){function e(i){return uo(i,t)}if(0<fc.length){uo(fc[0],t);for(var s=1;s<fc.length;s++){var n=fc[s];n.blockedOn===t&&(n.blockedOn=null)}}for(jn!==null&&uo(jn,t),Nn!==null&&uo(Nn,t),_n!==null&&uo(_n,t),Ho.forEach(e),Qo.forEach(e),s=0;s<mn.length;s++)n=mn[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<mn.length&&(s=mn[0],s.blockedOn===null);)Ib(s),s.blockedOn===null&&mn.shift()}var xa=Zr.ReactCurrentBatchConfig,lu=!0;function uE(t,e,s,n){var i=Be,a=xa.transition;xa.transition=null;try{Be=1,Yp(t,e,s,n)}finally{Be=i,xa.transition=a}}function dE(t,e,s,n){var i=Be,a=xa.transition;xa.transition=null;try{Be=4,Yp(t,e,s,n)}finally{Be=i,xa.transition=a}}function Yp(t,e,s,n){if(lu){var i=km(t,e,s,n);if(i===null)wh(t,e,n,cu,s),Hg(t,n);else if(lE(i,t,e,s,n))n.stopPropagation();else if(Hg(t,n),e&4&&-1<oE.indexOf(t)){for(;i!==null;){var a=Tl(i);if(a!==null&&Sb(a),a=km(t,e,s,n),a===null&&wh(t,e,n,cu,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else wh(t,e,n,null,s)}}var cu=null;function km(t,e,s,n){if(cu=null,t=Wp(n),t=ii(t),t!==null)if(e=Di(t),e===null)t=null;else if(s=e.tag,s===13){if(t=vb(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cu=t,null}function Pb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X_()){case Hp:return 1;case Nb:return 4;case au:case Z_:return 16;case _b:return 536870912;default:return 16}default:return 16}}var gn=null,Jp=null,Mc=null;function Rb(){if(Mc)return Mc;var t,e=Jp,s=e.length,n,i="value"in gn?gn.value:gn.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===i[a-n];n++);return Mc=i.slice(t,1<n?1-n:void 0)}function Vc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xc(){return!0}function Kg(){return!1}function Is(t){function e(s,n,i,a,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?xc:Kg,this.isPropagationStopped=Kg,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){},isPersistent:xc}),e}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=Is(Oa),Cl=dt({},Oa,{view:0,detail:0}),hE=Is(Cl),hh,mh,ho,Zu=dt({},Cl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ho&&(ho&&t.type==="mousemove"?(hh=t.screenX-ho.screenX,mh=t.screenY-ho.screenY):mh=hh=0,ho=t),hh)},movementY:function(t){return"movementY"in t?t.movementY:mh}}),Yg=Is(Zu),mE=dt({},Zu,{dataTransfer:0}),pE=Is(mE),fE=dt({},Cl,{relatedTarget:0}),ph=Is(fE),xE=dt({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),gE=Is(xE),yE=dt({},Oa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vE=Is(yE),bE=dt({},Oa,{data:0}),Jg=Is(bE),wE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _E(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NE[t])?!!e[t]:!1}function Zp(){return _E}var EE=dt({},Cl,{key:function(t){if(t.key){var e=wE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(t){return t.type==="keypress"?Vc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kE=Is(EE),SE=dt({},Zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xg=Is(SE),CE=dt({},Cl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),TE=Is(CE),AE=dt({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),IE=Is(AE),PE=dt({},Zu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RE=Is(PE),DE=[9,13,27,32],ef=$r&&"CompositionEvent"in window,To=null;$r&&"documentMode"in document&&(To=document.documentMode);var LE=$r&&"TextEvent"in window&&!To,Db=$r&&(!ef||To&&8<To&&11>=To),Zg=" ",e0=!1;function Lb(t,e){switch(t){case"keyup":return DE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sa=!1;function ME(t,e){switch(t){case"compositionend":return Mb(e);case"keypress":return e.which!==32?null:(e0=!0,Zg);case"textInput":return t=e.data,t===Zg&&e0?null:t;default:return null}}function VE(t,e){if(sa)return t==="compositionend"||!ef&&Lb(t,e)?(t=Rb(),Mc=Jp=gn=null,sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Db&&e.locale!=="ko"?null:e.data;default:return null}}var FE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FE[t.type]:e==="textarea"}function Vb(t,e,s,n){pb(n),e=uu(e,"onChange"),0<e.length&&(s=new Xp("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Ao=null,Yo=null;function OE(t){Qb(t,0)}function ed(t){var e=ia(t);if(ob(e))return t}function qE(t,e){if(t==="change")return e}var Fb=!1;if($r){var fh;if($r){var xh="oninput"in document;if(!xh){var s0=document.createElement("div");s0.setAttribute("oninput","return;"),xh=typeof s0.oninput=="function"}fh=xh}else fh=!1;Fb=fh&&(!document.documentMode||9<document.documentMode)}function r0(){Ao&&(Ao.detachEvent("onpropertychange",Ob),Yo=Ao=null)}function Ob(t){if(t.propertyName==="value"&&ed(Yo)){var e=[];Vb(e,Yo,t,Wp(t)),yb(OE,e)}}function UE(t,e,s){t==="focusin"?(r0(),Ao=e,Yo=s,Ao.attachEvent("onpropertychange",Ob)):t==="focusout"&&r0()}function zE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ed(Yo)}function BE(t,e){if(t==="click")return ed(e)}function $E(t,e){if(t==="input"||t==="change")return ed(e)}function GE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:GE;function Jo(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!lm.call(e,i)||!nr(t[i],e[i]))return!1}return!0}function n0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i0(t,e){var s=n0(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=n0(s)}}function qb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ub(){for(var t=window,e=ru();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ru(t.document)}return e}function tf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WE(t){var e=Ub(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&qb(s.ownerDocument.documentElement,s)){if(n!==null&&tf(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=i0(s,a);var o=i0(s,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HE=$r&&"documentMode"in document&&11>=document.documentMode,ra=null,Sm=null,Io=null,Cm=!1;function a0(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cm||ra==null||ra!==ru(n)||(n=ra,"selectionStart"in n&&tf(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Io&&Jo(Io,n)||(Io=n,n=uu(Sm,"onSelect"),0<n.length&&(e=new Xp("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=ra)))}function gc(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var na={animationend:gc("Animation","AnimationEnd"),animationiteration:gc("Animation","AnimationIteration"),animationstart:gc("Animation","AnimationStart"),transitionend:gc("Transition","TransitionEnd")},gh={},zb={};$r&&(zb=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function td(t){if(gh[t])return gh[t];if(!na[t])return t;var e=na[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in zb)return gh[t]=e[s];return t}var Bb=td("animationend"),$b=td("animationiteration"),Gb=td("animationstart"),Wb=td("transitionend"),Hb=new Map,o0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,e){Hb.set(t,e),Ri(e,[t])}for(var yh=0;yh<o0.length;yh++){var vh=o0[yh],QE=vh.toLowerCase(),KE=vh[0].toUpperCase()+vh.slice(1);Un(QE,"on"+KE)}Un(Bb,"onAnimationEnd");Un($b,"onAnimationIteration");Un(Gb,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Wb,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YE=new Set("cancel close invalid load scroll toggle".split(" ").concat(wo));function l0(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,Q_(n,e,void 0,t),t.currentTarget=null}function Qb(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&i.isPropagationStopped())break e;l0(i,l,d),a=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&i.isPropagationStopped())break e;l0(i,l,d),a=u}}}if(iu)throw t=Nm,iu=!1,Nm=null,t}function tt(t,e){var s=e[Rm];s===void 0&&(s=e[Rm]=new Set);var n=t+"__bubble";s.has(n)||(Kb(e,t,2,!1),s.add(n))}function bh(t,e,s){var n=0;e&&(n|=4),Kb(s,t,n,e)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Xo(t){if(!t[yc]){t[yc]=!0,sb.forEach(function(s){s!=="selectionchange"&&(YE.has(s)||bh(s,!1,t),bh(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[yc]||(e[yc]=!0,bh("selectionchange",!1,e))}}function Kb(t,e,s,n){switch(Pb(e)){case 1:var i=uE;break;case 4:i=dE;break;default:i=Yp}s=i.bind(null,e,s,t),i=void 0,!jm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function wh(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ii(l),o===null)return;if(u=o.tag,u===5||u===6){n=a=o;continue e}l=l.parentNode}}n=n.return}yb(function(){var d=a,h=Wp(s),p=[];e:{var x=Hb.get(t);if(x!==void 0){var j=Xp,C=t;switch(t){case"keypress":if(Vc(s)===0)break e;case"keydown":case"keyup":j=kE;break;case"focusin":C="focus",j=ph;break;case"focusout":C="blur",j=ph;break;case"beforeblur":case"afterblur":j=ph;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Yg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=pE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=TE;break;case Bb:case $b:case Gb:j=gE;break;case Wb:j=IE;break;case"scroll":j=hE;break;case"wheel":j=RE;break;case"copy":case"cut":case"paste":j=vE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Xg}var R=(e&4)!==0,S=!R&&t==="scroll",y=R?x!==null?x+"Capture":null:x;R=[];for(var v=d,_;v!==null;){_=v;var P=_.stateNode;if(_.tag===5&&P!==null&&(_=P,y!==null&&(P=Wo(v,y),P!=null&&R.push(Zo(v,P,_)))),S)break;v=v.return}0<R.length&&(x=new j(x,C,null,s,h),p.push({event:x,listeners:R}))}}if(!(e&7)){e:{if(x=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",x&&s!==bm&&(C=s.relatedTarget||s.fromElement)&&(ii(C)||C[Gr]))break e;if((j||x)&&(x=h.window===h?h:(x=h.ownerDocument)?x.defaultView||x.parentWindow:window,j?(C=s.relatedTarget||s.toElement,j=d,C=C?ii(C):null,C!==null&&(S=Di(C),C!==S||C.tag!==5&&C.tag!==6)&&(C=null)):(j=null,C=d),j!==C)){if(R=Yg,P="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(R=Xg,P="onPointerLeave",y="onPointerEnter",v="pointer"),S=j==null?x:ia(j),_=C==null?x:ia(C),x=new R(P,v+"leave",j,s,h),x.target=S,x.relatedTarget=_,P=null,ii(h)===d&&(R=new R(y,v+"enter",C,s,h),R.target=_,R.relatedTarget=S,P=R),S=P,j&&C)t:{for(R=j,y=C,v=0,_=R;_;_=Yi(_))v++;for(_=0,P=y;P;P=Yi(P))_++;for(;0<v-_;)R=Yi(R),v--;for(;0<_-v;)y=Yi(y),_--;for(;v--;){if(R===y||y!==null&&R===y.alternate)break t;R=Yi(R),y=Yi(y)}R=null}else R=null;j!==null&&c0(p,x,j,R,!1),C!==null&&S!==null&&c0(p,S,C,R,!0)}}e:{if(x=d?ia(d):window,j=x.nodeName&&x.nodeName.toLowerCase(),j==="select"||j==="input"&&x.type==="file")var L=qE;else if(t0(x))if(Fb)L=$E;else{L=zE;var M=UE}else(j=x.nodeName)&&j.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(L=BE);if(L&&(L=L(t,d))){Vb(p,L,s,h);break e}M&&M(t,x,d),t==="focusout"&&(M=x._wrapperState)&&M.controlled&&x.type==="number"&&fm(x,"number",x.value)}switch(M=d?ia(d):window,t){case"focusin":(t0(M)||M.contentEditable==="true")&&(ra=M,Sm=d,Io=null);break;case"focusout":Io=Sm=ra=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,a0(p,s,h);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":a0(p,s,h)}var N;if(ef)e:{switch(t){case"compositionstart":var f="onCompositionStart";break e;case"compositionend":f="onCompositionEnd";break e;case"compositionupdate":f="onCompositionUpdate";break e}f=void 0}else sa?Lb(t,s)&&(f="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(f="onCompositionStart");f&&(Db&&s.locale!=="ko"&&(sa||f!=="onCompositionStart"?f==="onCompositionEnd"&&sa&&(N=Rb()):(gn=h,Jp="value"in gn?gn.value:gn.textContent,sa=!0)),M=uu(d,f),0<M.length&&(f=new Jg(f,t,null,s,h),p.push({event:f,listeners:M}),N?f.data=N:(N=Mb(s),N!==null&&(f.data=N)))),(N=LE?ME(t,s):VE(t,s))&&(d=uu(d,"onBeforeInput"),0<d.length&&(h=new Jg("onBeforeInput","beforeinput",null,s,h),p.push({event:h,listeners:d}),h.data=N))}Qb(p,e)})}function Zo(t,e,s){return{instance:t,listener:e,currentTarget:s}}function uu(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Wo(t,s),a!=null&&n.unshift(Zo(t,a,i)),a=Wo(t,e),a!=null&&n.push(Zo(t,a,i))),t=t.return}return n}function Yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c0(t,e,s,n,i){for(var a=e._reactName,o=[];s!==null&&s!==n;){var l=s,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,i?(u=Wo(s,a),u!=null&&o.unshift(Zo(s,u,l))):i||(u=Wo(s,a),u!=null&&o.push(Zo(s,u,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var JE=/\r\n?/g,XE=/\u0000|\uFFFD/g;function u0(t){return(typeof t=="string"?t:""+t).replace(JE,`
`).replace(XE,"")}function vc(t,e,s){if(e=u0(e),u0(t)!==e&&s)throw Error(se(425))}function du(){}var Tm=null,Am=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,ZE=typeof clearTimeout=="function"?clearTimeout:void 0,d0=typeof Promise=="function"?Promise:void 0,ek=typeof queueMicrotask=="function"?queueMicrotask:typeof d0<"u"?function(t){return d0.resolve(null).then(t).catch(tk)}:Pm;function tk(t){setTimeout(function(){throw t})}function jh(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),Ko(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);Ko(e)}function En(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),xr="__reactFiber$"+qa,el="__reactProps$"+qa,Gr="__reactContainer$"+qa,Rm="__reactEvents$"+qa,sk="__reactListeners$"+qa,rk="__reactHandles$"+qa;function ii(t){var e=t[xr];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Gr]||s[xr]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=h0(t);t!==null;){if(s=t[xr])return s;t=h0(t)}return e}t=s,s=t.parentNode}return null}function Tl(t){return t=t[xr]||t[Gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ia(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function sd(t){return t[el]||null}var Dm=[],aa=-1;function zn(t){return{current:t}}function rt(t){0>aa||(t.current=Dm[aa],Dm[aa]=null,aa--)}function Je(t,e){aa++,Dm[aa]=t.current,t.current=e}var Mn={},ss=zn(Mn),fs=zn(!1),gi=Mn;function Ea(t,e){var s=t.type.contextTypes;if(!s)return Mn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xs(t){return t=t.childContextTypes,t!=null}function hu(){rt(fs),rt(ss)}function m0(t,e,s){if(ss.current!==Mn)throw Error(se(168));Je(ss,e),Je(fs,s)}function Yb(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(se(108,U_(t)||"Unknown",i));return dt({},s,n)}function mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mn,gi=ss.current,Je(ss,t),Je(fs,fs.current),!0}function p0(t,e,s){var n=t.stateNode;if(!n)throw Error(se(169));s?(t=Yb(t,e,gi),n.__reactInternalMemoizedMergedChildContext=t,rt(fs),rt(ss),Je(ss,t)):rt(fs),Je(fs,s)}var Ar=null,rd=!1,Nh=!1;function Jb(t){Ar===null?Ar=[t]:Ar.push(t)}function nk(t){rd=!0,Jb(t)}function Bn(){if(!Nh&&Ar!==null){Nh=!0;var t=0,e=Be;try{var s=Ar;for(Be=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ar=null,rd=!1}catch(i){throw Ar!==null&&(Ar=Ar.slice(t+1)),jb(Hp,Bn),i}finally{Be=e,Nh=!1}}return null}var oa=[],la=0,pu=null,fu=0,Rs=[],Ds=0,yi=null,Rr=1,Dr="";function ti(t,e){oa[la++]=fu,oa[la++]=pu,pu=t,fu=e}function Xb(t,e,s){Rs[Ds++]=Rr,Rs[Ds++]=Dr,Rs[Ds++]=yi,yi=t;var n=Rr;t=Dr;var i=32-Zs(n)-1;n&=~(1<<i),s+=1;var a=32-Zs(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Rr=1<<32-Zs(e)+i|s<<i|n,Dr=a+t}else Rr=1<<a|s<<i|n,Dr=t}function sf(t){t.return!==null&&(ti(t,1),Xb(t,1,0))}function rf(t){for(;t===pu;)pu=oa[--la],oa[la]=null,fu=oa[--la],oa[la]=null;for(;t===yi;)yi=Rs[--Ds],Rs[Ds]=null,Dr=Rs[--Ds],Rs[Ds]=null,Rr=Rs[--Ds],Rs[Ds]=null}var ks=null,_s=null,at=!1,Ks=null;function Zb(t,e){var s=Ls(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function f0(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ks=t,_s=En(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ks=t,_s=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=yi!==null?{id:Rr,overflow:Dr}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Ls(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,ks=t,_s=null,!0):!1;default:return!1}}function Lm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(at){var e=_s;if(e){var s=e;if(!f0(t,e)){if(Lm(t))throw Error(se(418));e=En(s.nextSibling);var n=ks;e&&f0(t,e)?Zb(n,s):(t.flags=t.flags&-4097|2,at=!1,ks=t)}}else{if(Lm(t))throw Error(se(418));t.flags=t.flags&-4097|2,at=!1,ks=t}}}function x0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ks=t}function bc(t){if(t!==ks)return!1;if(!at)return x0(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=_s)){if(Lm(t))throw ew(),Error(se(418));for(;e;)Zb(t,e),e=En(e.nextSibling)}if(x0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){_s=En(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}_s=null}}else _s=ks?En(t.stateNode.nextSibling):null;return!0}function ew(){for(var t=_s;t;)t=En(t.nextSibling)}function ka(){_s=ks=null,at=!1}function nf(t){Ks===null?Ks=[t]:Ks.push(t)}var ik=Zr.ReactCurrentBatchConfig;function mo(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(se(309));var n=s.stateNode}if(!n)throw Error(se(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(se(284));if(!s._owner)throw Error(se(290,t))}return t}function wc(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function g0(t){var e=t._init;return e(t._payload)}function tw(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function s(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function n(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=Tn(y,v),y.index=0,y.sibling=null,y}function a(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=2,v):_):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,_,P){return v===null||v.tag!==6?(v=Ah(_,y.mode,P),v.return=y,v):(v=i(v,_),v.return=y,v)}function u(y,v,_,P){var L=_.type;return L===ta?h(y,v,_.props.children,P,_.key):v!==null&&(v.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dn&&g0(L)===v.type)?(P=i(v,_.props),P.ref=mo(y,v,_),P.return=y,P):(P=$c(_.type,_.key,_.props,null,y.mode,P),P.ref=mo(y,v,_),P.return=y,P)}function d(y,v,_,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Ih(_,y.mode,P),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function h(y,v,_,P,L){return v===null||v.tag!==7?(v=hi(_,y.mode,P,L),v.return=y,v):(v=i(v,_),v.return=y,v)}function p(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ah(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case uc:return _=$c(v.type,v.key,v.props,null,y.mode,_),_.ref=mo(y,null,v),_.return=y,_;case ea:return v=Ih(v,y.mode,_),v.return=y,v;case dn:var P=v._init;return p(y,P(v._payload),_)}if(vo(v)||oo(v))return v=hi(v,y.mode,_,null),v.return=y,v;wc(y,v)}return null}function x(y,v,_,P){var L=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:l(y,v,""+_,P);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case uc:return _.key===L?u(y,v,_,P):null;case ea:return _.key===L?d(y,v,_,P):null;case dn:return L=_._init,x(y,v,L(_._payload),P)}if(vo(_)||oo(_))return L!==null?null:h(y,v,_,P,null);wc(y,_)}return null}function j(y,v,_,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return y=y.get(_)||null,l(v,y,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case uc:return y=y.get(P.key===null?_:P.key)||null,u(v,y,P,L);case ea:return y=y.get(P.key===null?_:P.key)||null,d(v,y,P,L);case dn:var M=P._init;return j(y,v,_,M(P._payload),L)}if(vo(P)||oo(P))return y=y.get(_)||null,h(v,y,P,L,null);wc(v,P)}return null}function C(y,v,_,P){for(var L=null,M=null,N=v,f=v=0,w=null;N!==null&&f<_.length;f++){N.index>f?(w=N,N=null):w=N.sibling;var E=x(y,N,_[f],P);if(E===null){N===null&&(N=w);break}t&&N&&E.alternate===null&&e(y,N),v=a(E,v,f),M===null?L=E:M.sibling=E,M=E,N=w}if(f===_.length)return s(y,N),at&&ti(y,f),L;if(N===null){for(;f<_.length;f++)N=p(y,_[f],P),N!==null&&(v=a(N,v,f),M===null?L=N:M.sibling=N,M=N);return at&&ti(y,f),L}for(N=n(y,N);f<_.length;f++)w=j(N,y,f,_[f],P),w!==null&&(t&&w.alternate!==null&&N.delete(w.key===null?f:w.key),v=a(w,v,f),M===null?L=w:M.sibling=w,M=w);return t&&N.forEach(function(A){return e(y,A)}),at&&ti(y,f),L}function R(y,v,_,P){var L=oo(_);if(typeof L!="function")throw Error(se(150));if(_=L.call(_),_==null)throw Error(se(151));for(var M=L=null,N=v,f=v=0,w=null,E=_.next();N!==null&&!E.done;f++,E=_.next()){N.index>f?(w=N,N=null):w=N.sibling;var A=x(y,N,E.value,P);if(A===null){N===null&&(N=w);break}t&&N&&A.alternate===null&&e(y,N),v=a(A,v,f),M===null?L=A:M.sibling=A,M=A,N=w}if(E.done)return s(y,N),at&&ti(y,f),L;if(N===null){for(;!E.done;f++,E=_.next())E=p(y,E.value,P),E!==null&&(v=a(E,v,f),M===null?L=E:M.sibling=E,M=E);return at&&ti(y,f),L}for(N=n(y,N);!E.done;f++,E=_.next())E=j(N,y,f,E.value,P),E!==null&&(t&&E.alternate!==null&&N.delete(E.key===null?f:E.key),v=a(E,v,f),M===null?L=E:M.sibling=E,M=E);return t&&N.forEach(function(I){return e(y,I)}),at&&ti(y,f),L}function S(y,v,_,P){if(typeof _=="object"&&_!==null&&_.type===ta&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case uc:e:{for(var L=_.key,M=v;M!==null;){if(M.key===L){if(L=_.type,L===ta){if(M.tag===7){s(y,M.sibling),v=i(M,_.props.children),v.return=y,y=v;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===dn&&g0(L)===M.type){s(y,M.sibling),v=i(M,_.props),v.ref=mo(y,M,_),v.return=y,y=v;break e}s(y,M);break}else e(y,M);M=M.sibling}_.type===ta?(v=hi(_.props.children,y.mode,P,_.key),v.return=y,y=v):(P=$c(_.type,_.key,_.props,null,y.mode,P),P.ref=mo(y,v,_),P.return=y,y=P)}return o(y);case ea:e:{for(M=_.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){s(y,v.sibling),v=i(v,_.children||[]),v.return=y,y=v;break e}else{s(y,v);break}else e(y,v);v=v.sibling}v=Ih(_,y.mode,P),v.return=y,y=v}return o(y);case dn:return M=_._init,S(y,v,M(_._payload),P)}if(vo(_))return C(y,v,_,P);if(oo(_))return R(y,v,_,P);wc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(s(y,v.sibling),v=i(v,_),v.return=y,y=v):(s(y,v),v=Ah(_,y.mode,P),v.return=y,y=v),o(y)):s(y,v)}return S}var Sa=tw(!0),sw=tw(!1),xu=zn(null),gu=null,ca=null,af=null;function of(){af=ca=gu=null}function lf(t){var e=xu.current;rt(xu),t._currentValue=e}function Vm(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function ga(t,e){gu=t,af=ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ms=!0),t.firstContext=null)}function qs(t){var e=t._currentValue;if(af!==t)if(t={context:t,memoizedValue:e,next:null},ca===null){if(gu===null)throw Error(se(308));ca=t,gu.dependencies={lanes:0,firstContext:t}}else ca=ca.next=t;return e}var ai=null;function cf(t){ai===null?ai=[t]:ai.push(t)}function rw(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,cf(e)):(s.next=i.next,i.next=s),e.interleaved=s,Wr(t,n)}function Wr(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var hn=!1;function uf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Wr(t,s)}return i=n.interleaved,i===null?(e.next=e,cf(n)):(e.next=i.next,i.next=e),n.interleaved=e,Wr(t,s)}function Fc(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Qp(t,s)}}function y0(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function yu(t,e,s,n){var i=t.updateQueue;hn=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var p=i.baseState;o=0,h=d=u=null,l=a;do{var x=l.lane,j=l.eventTime;if((n&x)===x){h!==null&&(h=h.next={eventTime:j,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=t,R=l;switch(x=e,j=s,R.tag){case 1:if(C=R.payload,typeof C=="function"){p=C.call(j,p,x);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,x=typeof C=="function"?C.call(j,p,x):C,x==null)break e;p=dt({},p,x);break e;case 2:hn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,x=i.effects,x===null?i.effects=[l]:x.push(l))}else j={eventTime:j,lane:x,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=j,u=p):h=h.next=j,o|=x;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;x=l,l=x.next,x.next=null,i.lastBaseUpdate=x,i.shared.pending=null}}while(!0);if(h===null&&(u=p),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);bi|=o,t.lanes=o,t.memoizedState=p}}function v0(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(se(191,i));i.call(n)}}}var Al={},yr=zn(Al),tl=zn(Al),sl=zn(Al);function oi(t){if(t===Al)throw Error(se(174));return t}function df(t,e){switch(Je(sl,e),Je(tl,t),Je(yr,Al),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gm(e,t)}rt(yr),Je(yr,e)}function Ca(){rt(yr),rt(tl),rt(sl)}function iw(t){oi(sl.current);var e=oi(yr.current),s=gm(e,t.type);e!==s&&(Je(tl,t),Je(yr,s))}function hf(t){tl.current===t&&(rt(yr),rt(tl))}var lt=zn(0);function vu(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _h=[];function mf(){for(var t=0;t<_h.length;t++)_h[t]._workInProgressVersionPrimary=null;_h.length=0}var Oc=Zr.ReactCurrentDispatcher,Eh=Zr.ReactCurrentBatchConfig,vi=0,ut=null,_t=null,At=null,bu=!1,Po=!1,rl=0,ak=0;function Qt(){throw Error(se(321))}function pf(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!nr(t[s],e[s]))return!1;return!0}function ff(t,e,s,n,i,a){if(vi=a,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oc.current=t===null||t.memoizedState===null?uk:dk,t=s(n,i),Po){a=0;do{if(Po=!1,rl=0,25<=a)throw Error(se(301));a+=1,At=_t=null,e.updateQueue=null,Oc.current=hk,t=s(n,i)}while(Po)}if(Oc.current=wu,e=_t!==null&&_t.next!==null,vi=0,At=_t=ut=null,bu=!1,e)throw Error(se(300));return t}function xf(){var t=rl!==0;return rl=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ut.memoizedState=At=t:At=At.next=t,At}function Us(){if(_t===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=At===null?ut.memoizedState:At.next;if(e!==null)At=e,_t=t;else{if(t===null)throw Error(se(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?ut.memoizedState=At=t:At=At.next=t}return At}function nl(t,e){return typeof e=="function"?e(t):e}function kh(t){var e=Us(),s=e.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=t;var n=_t,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((vi&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=n):u=u.next=p,ut.lanes|=h,bi|=h}d=d.next}while(d!==null&&d!==a);u===null?o=n:u.next=l,nr(n,e.memoizedState)||(ms=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,ut.lanes|=a,bi|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Sh(t){var e=Us(),s=e.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);nr(a,e.memoizedState)||(ms=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function aw(){}function ow(t,e){var s=ut,n=Us(),i=e(),a=!nr(n.memoizedState,i);if(a&&(n.memoizedState=i,ms=!0),n=n.queue,gf(uw.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||At!==null&&At.memoizedState.tag&1){if(s.flags|=2048,il(9,cw.bind(null,s,n,i,e),void 0,null),Dt===null)throw Error(se(349));vi&30||lw(s,e,i)}return i}function lw(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function cw(t,e,s,n){e.value=s,e.getSnapshot=n,dw(e)&&hw(t)}function uw(t,e,s){return s(function(){dw(e)&&hw(t)})}function dw(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!nr(t,s)}catch{return!0}}function hw(t){var e=Wr(t,1);e!==null&&er(e,t,1,-1)}function b0(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:t},e.queue=t,t=t.dispatch=ck.bind(null,ut,t),[e.memoizedState,t]}function il(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function mw(){return Us().memoizedState}function qc(t,e,s,n){var i=fr();ut.flags|=t,i.memoizedState=il(1|e,s,void 0,n===void 0?null:n)}function nd(t,e,s,n){var i=Us();n=n===void 0?null:n;var a=void 0;if(_t!==null){var o=_t.memoizedState;if(a=o.destroy,n!==null&&pf(n,o.deps)){i.memoizedState=il(e,s,a,n);return}}ut.flags|=t,i.memoizedState=il(1|e,s,a,n)}function w0(t,e){return qc(8390656,8,t,e)}function gf(t,e){return nd(2048,8,t,e)}function pw(t,e){return nd(4,2,t,e)}function fw(t,e){return nd(4,4,t,e)}function xw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gw(t,e,s){return s=s!=null?s.concat([t]):null,nd(4,4,xw.bind(null,e,t),s)}function yf(){}function yw(t,e){var s=Us();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&pf(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function vw(t,e){var s=Us();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&pf(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function bw(t,e,s){return vi&21?(nr(s,e)||(s=Eb(),ut.lanes|=s,bi|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ms=!0),t.memoizedState=s)}function ok(t,e){var s=Be;Be=s!==0&&4>s?s:4,t(!0);var n=Eh.transition;Eh.transition={};try{t(!1),e()}finally{Be=s,Eh.transition=n}}function ww(){return Us().memoizedState}function lk(t,e,s){var n=Cn(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},jw(t))Nw(e,s);else if(s=rw(t,e,s,n),s!==null){var i=os();er(s,t,n,i),_w(s,e,n)}}function ck(t,e,s){var n=Cn(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(jw(t))Nw(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,nr(l,o)){var u=e.interleaved;u===null?(i.next=i,cf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}s=rw(t,e,i,n),s!==null&&(i=os(),er(s,t,n,i),_w(s,e,n))}}function jw(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function Nw(t,e){Po=bu=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function _w(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Qp(t,s)}}var wu={readContext:qs,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},uk={readContext:qs,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:qs,useEffect:w0,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,qc(4194308,4,xw.bind(null,e,t),s)},useLayoutEffect:function(t,e){return qc(4194308,4,t,e)},useInsertionEffect:function(t,e){return qc(4,2,t,e)},useMemo:function(t,e){var s=fr();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=fr();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=lk.bind(null,ut,t),[n.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:b0,useDebugValue:yf,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=b0(!1),e=t[0];return t=ok.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=ut,i=fr();if(at){if(s===void 0)throw Error(se(407));s=s()}else{if(s=e(),Dt===null)throw Error(se(349));vi&30||lw(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,w0(uw.bind(null,n,a,t),[t]),n.flags|=2048,il(9,cw.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=fr(),e=Dt.identifierPrefix;if(at){var s=Dr,n=Rr;s=(n&~(1<<32-Zs(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=rl++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=ak++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dk={readContext:qs,useCallback:yw,useContext:qs,useEffect:gf,useImperativeHandle:gw,useInsertionEffect:pw,useLayoutEffect:fw,useMemo:vw,useReducer:kh,useRef:mw,useState:function(){return kh(nl)},useDebugValue:yf,useDeferredValue:function(t){var e=Us();return bw(e,_t.memoizedState,t)},useTransition:function(){var t=kh(nl)[0],e=Us().memoizedState;return[t,e]},useMutableSource:aw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1},hk={readContext:qs,useCallback:yw,useContext:qs,useEffect:gf,useImperativeHandle:gw,useInsertionEffect:pw,useLayoutEffect:fw,useMemo:vw,useReducer:Sh,useRef:mw,useState:function(){return Sh(nl)},useDebugValue:yf,useDeferredValue:function(t){var e=Us();return _t===null?e.memoizedState=t:bw(e,_t.memoizedState,t)},useTransition:function(){var t=Sh(nl)[0],e=Us().memoizedState;return[t,e]},useMutableSource:aw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1};function Hs(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function Fm(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:dt({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var id={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=os(),i=Cn(t),a=Fr(n,i);a.payload=e,s!=null&&(a.callback=s),e=kn(t,a,i),e!==null&&(er(e,t,i,n),Fc(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=os(),i=Cn(t),a=Fr(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=kn(t,a,i),e!==null&&(er(e,t,i,n),Fc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=os(),n=Cn(t),i=Fr(s,n);i.tag=2,e!=null&&(i.callback=e),e=kn(t,i,n),e!==null&&(er(e,t,n,s),Fc(e,t,n))}};function j0(t,e,s,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Jo(s,n)||!Jo(i,a):!0}function Ew(t,e,s){var n=!1,i=Mn,a=e.contextType;return typeof a=="object"&&a!==null?a=qs(a):(i=xs(e)?gi:ss.current,n=e.contextTypes,a=(n=n!=null)?Ea(t,i):Mn),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=id,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function N0(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&id.enqueueReplaceState(e,e.state,null)}function Om(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},uf(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=qs(a):(a=xs(e)?gi:ss.current,i.context=Ea(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Fm(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&id.enqueueReplaceState(i,i.state,null),yu(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ta(t,e){try{var s="",n=e;do s+=q_(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Ch(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var mk=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,s){s=Fr(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Nu||(Nu=!0,Ym=n),qm(t,e)},s}function Sw(t,e,s){s=Fr(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){qm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){qm(t,e),typeof n!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function _0(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new mk;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=Sk.bind(null,t,e,s),e.then(t,t))}function E0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k0(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Fr(-1,1),e.tag=2,kn(s,e,1))),s.lanes|=1),t)}var pk=Zr.ReactCurrentOwner,ms=!1;function ns(t,e,s,n){e.child=t===null?sw(e,null,s,n):Sa(e,t.child,s,n)}function S0(t,e,s,n,i){s=s.render;var a=e.ref;return ga(e,i),n=ff(t,e,s,n,a,i),s=xf(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(at&&s&&sf(e),e.flags|=1,ns(t,e,n,i),e.child)}function C0(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!kf(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,Cw(t,e,a,n,i)):(t=$c(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:Jo,s(o,n)&&t.ref===e.ref)return Hr(t,e,i)}return e.flags|=1,t=Tn(a,n),t.ref=e.ref,t.return=e,e.child=t}function Cw(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(Jo(a,n)&&t.ref===e.ref)if(ms=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(ms=!0);else return e.lanes=t.lanes,Hr(t,e,i)}return Um(t,e,s,n,i)}function Tw(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(da,js),js|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(da,js),js|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Je(da,js),js|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Je(da,js),js|=n;return ns(t,e,i,s),e.child}function Aw(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Um(t,e,s,n,i){var a=xs(s)?gi:ss.current;return a=Ea(e,a),ga(e,i),s=ff(t,e,s,n,a,i),n=xf(),t!==null&&!ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Hr(t,e,i)):(at&&n&&sf(e),e.flags|=1,ns(t,e,s,i),e.child)}function T0(t,e,s,n,i){if(xs(s)){var a=!0;mu(e)}else a=!1;if(ga(e,i),e.stateNode===null)Uc(t,e),Ew(e,s,n),Om(e,s,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=qs(d):(d=xs(s)?gi:ss.current,d=Ea(e,d));var h=s.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==d)&&N0(e,o,n,d),hn=!1;var x=e.memoizedState;o.state=x,yu(e,n,o,i),u=e.memoizedState,l!==n||x!==u||fs.current||hn?(typeof h=="function"&&(Fm(e,s,h,n),u=e.memoizedState),(l=hn||j0(e,s,l,n,x,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,nw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Hs(e.type,l),o.props=d,p=e.pendingProps,x=o.context,u=s.contextType,typeof u=="object"&&u!==null?u=qs(u):(u=xs(s)?gi:ss.current,u=Ea(e,u));var j=s.getDerivedStateFromProps;(h=typeof j=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||x!==u)&&N0(e,o,n,u),hn=!1,x=e.memoizedState,o.state=x,yu(e,n,o,i);var C=e.memoizedState;l!==p||x!==C||fs.current||hn?(typeof j=="function"&&(Fm(e,s,j,n),C=e.memoizedState),(d=hn||j0(e,s,d,n,x,C,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,C,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,C,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=C),o.props=n,o.state=C,o.context=u,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&x===t.memoizedState||(e.flags|=1024),n=!1)}return zm(t,e,s,n,a,i)}function zm(t,e,s,n,i,a){Aw(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&p0(e,s,!1),Hr(t,e,a);n=e.stateNode,pk.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Sa(e,t.child,null,a),e.child=Sa(e,null,l,a)):ns(t,e,l,a),e.memoizedState=n.state,i&&p0(e,s,!0),e.child}function Iw(t){var e=t.stateNode;e.pendingContext?m0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m0(t,e.context,!1),df(t,e.containerInfo)}function A0(t,e,s,n,i){return ka(),nf(i),e.flags|=256,ns(t,e,s,n),e.child}var Bm={dehydrated:null,treeContext:null,retryLane:0};function $m(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pw(t,e,s){var n=e.pendingProps,i=lt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(lt,i&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ld(o,n,0,null),t=hi(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=$m(s),e.memoizedState=Bm,t):vf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fk(t,e,o,n,l,i,s);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=Tn(i,u),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Tn(l,a):(a=hi(a,o,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?$m(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=Bm,n}return a=t.child,t=a.sibling,n=Tn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function vf(t,e){return e=ld({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,s,n){return n!==null&&nf(n),Sa(e,t.child,null,s),t=vf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fk(t,e,s,n,i,a,o){if(s)return e.flags&256?(e.flags&=-257,n=Ch(Error(se(422))),jc(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=ld({mode:"visible",children:n.children},i,0,null),a=hi(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Sa(e,t.child,null,o),e.child.memoizedState=$m(o),e.memoizedState=Bm,a);if(!(e.mode&1))return jc(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(se(419)),n=Ch(a,n,void 0),jc(t,e,o,n)}if(l=(o&t.childLanes)!==0,ms||l){if(n=Dt,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Wr(t,i),er(n,t,i,-1))}return Ef(),n=Ch(Error(se(421))),jc(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ck.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,_s=En(i.nextSibling),ks=e,at=!0,Ks=null,t!==null&&(Rs[Ds++]=Rr,Rs[Ds++]=Dr,Rs[Ds++]=yi,Rr=t.id,Dr=t.overflow,yi=e),e=vf(e,n.children),e.flags|=4096,e)}function I0(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Vm(t.return,e,s)}function Th(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function Rw(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(ns(t,e,n.children,s),n=lt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&I0(t,s,e);else if(t.tag===19)I0(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Je(lt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&vu(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Th(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vu(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Th(e,!0,s,null,a);break;case"together":Th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Uc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Hr(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),bi|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,s=Tn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Tn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function xk(t,e,s){switch(e.tag){case 3:Iw(e),ka();break;case 5:iw(e);break;case 1:xs(e.type)&&mu(e);break;case 4:df(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Je(xu,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Je(lt,lt.current&1),e.flags|=128,null):s&e.child.childLanes?Pw(t,e,s):(Je(lt,lt.current&1),t=Hr(t,e,s),t!==null?t.sibling:null);Je(lt,lt.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Rw(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(lt,lt.current),n)break;return null;case 22:case 23:return e.lanes=0,Tw(t,e,s)}return Hr(t,e,s)}var Dw,Gm,Lw,Mw;Dw=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Gm=function(){};Lw=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,oi(yr.current);var a=null;switch(s){case"input":i=mm(t,i),n=mm(t,n),a=[];break;case"select":i=dt({},i,{value:void 0}),n=dt({},n,{value:void 0}),a=[];break;case"textarea":i=xm(t,i),n=xm(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=du)}ym(s,n);var o;s=null;for(d in i)if(!n.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&($o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var u=n[d];if(l=i!=null?i[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(s||(s={}),s[o]=u[o])}else s||(a||(a=[]),a.push(d,s)),s=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&($o.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&tt("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Mw=function(t,e,s,n){s!==n&&(e.flags|=4)};function po(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function gk(t,e,s){var n=e.pendingProps;switch(rf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return xs(e.type)&&hu(),Kt(e),null;case 3:return n=e.stateNode,Ca(),rt(fs),rt(ss),mf(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ks!==null&&(Zm(Ks),Ks=null))),Gm(t,e),Kt(e),null;case 5:hf(e);var i=oi(sl.current);if(s=e.type,t!==null&&e.stateNode!=null)Lw(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(se(166));return Kt(e),null}if(t=oi(yr.current),bc(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[xr]=e,n[el]=a,t=(e.mode&1)!==0,s){case"dialog":tt("cancel",n),tt("close",n);break;case"iframe":case"object":case"embed":tt("load",n);break;case"video":case"audio":for(i=0;i<wo.length;i++)tt(wo[i],n);break;case"source":tt("error",n);break;case"img":case"image":case"link":tt("error",n),tt("load",n);break;case"details":tt("toggle",n);break;case"input":qg(n,a),tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},tt("invalid",n);break;case"textarea":zg(n,a),tt("invalid",n)}ym(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&vc(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&vc(n.textContent,l,t),i=["children",""+l]):$o.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",n)}switch(s){case"input":dc(n),Ug(n,a,!0);break;case"textarea":dc(n),Bg(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=du)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ub(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[xr]=e,t[el]=n,Dw(t,e,!1,!1),e.stateNode=t;e:{switch(o=vm(s,n),s){case"dialog":tt("cancel",t),tt("close",t),i=n;break;case"iframe":case"object":case"embed":tt("load",t),i=n;break;case"video":case"audio":for(i=0;i<wo.length;i++)tt(wo[i],t);i=n;break;case"source":tt("error",t),i=n;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=n;break;case"details":tt("toggle",t),i=n;break;case"input":qg(t,n),i=mm(t,n),tt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=dt({},n,{value:void 0}),tt("invalid",t);break;case"textarea":zg(t,n),i=xm(t,n),tt("invalid",t);break;default:i=n}ym(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?mb(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&db(t,u)):a==="children"?typeof u=="string"?(s!=="textarea"||u!=="")&&Go(t,u):typeof u=="number"&&Go(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&($o.hasOwnProperty(a)?u!=null&&a==="onScroll"&&tt("scroll",t):u!=null&&zp(t,a,u,o))}switch(s){case"input":dc(t),Ug(t,n,!1);break;case"textarea":dc(t),Bg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ln(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?ma(t,!!n.multiple,a,!1):n.defaultValue!=null&&ma(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=du)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)Mw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(se(166));if(s=oi(sl.current),oi(yr.current),bc(e)){if(n=e.stateNode,s=e.memoizedProps,n[xr]=e,(a=n.nodeValue!==s)&&(t=ks,t!==null))switch(t.tag){case 3:vc(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&vc(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[xr]=e,e.stateNode=n}return Kt(e),null;case 13:if(rt(lt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&_s!==null&&e.mode&1&&!(e.flags&128))ew(),ka(),e.flags|=98560,a=!1;else if(a=bc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(se(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(se(317));a[xr]=e}else ka(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),a=!1}else Ks!==null&&(Zm(Ks),Ks=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Et===0&&(Et=3):Ef())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return Ca(),Gm(t,e),t===null&&Xo(e.stateNode.containerInfo),Kt(e),null;case 10:return lf(e.type._context),Kt(e),null;case 17:return xs(e.type)&&hu(),Kt(e),null;case 19:if(rt(lt),a=e.memoizedState,a===null)return Kt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)po(a,!1);else{if(Et!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=vu(t),o!==null){for(e.flags|=128,po(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Je(lt,lt.current&1|2),e.child}t=t.sibling}a.tail!==null&&yt()>Aa&&(e.flags|=128,n=!0,po(a,!1),e.lanes=4194304)}else{if(!n)if(t=vu(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),po(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!at)return Kt(e),null}else 2*yt()-a.renderingStartTime>Aa&&s!==1073741824&&(e.flags|=128,n=!0,po(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=yt(),e.sibling=null,s=lt.current,Je(lt,n?s&1|2:s&1),e):(Kt(e),null);case 22:case 23:return _f(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?js&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function yk(t,e){switch(rf(e),e.tag){case 1:return xs(e.type)&&hu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ca(),rt(fs),rt(ss),mf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hf(e),null;case 13:if(rt(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));ka()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(lt),null;case 4:return Ca(),null;case 10:return lf(e.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var Nc=!1,Xt=!1,vk=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ua(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){ft(t,e,n)}else s.current=null}function Wm(t,e,s){try{s()}catch(n){ft(t,e,n)}}var P0=!1;function bk(t,e){if(Tm=lu,t=Ub(),tf(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,u=-1,d=0,h=0,p=t,x=null;t:for(;;){for(var j;p!==s||i!==0&&p.nodeType!==3||(l=o+i),p!==a||n!==0&&p.nodeType!==3||(u=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(j=p.firstChild)!==null;)x=p,p=j;for(;;){if(p===t)break t;if(x===s&&++d===i&&(l=o),x===a&&++h===n&&(u=o),(j=p.nextSibling)!==null)break;p=x,x=p.parentNode}p=j}s=l===-1||u===-1?null:{start:l,end:u}}else s=null}s=s||{start:0,end:0}}else s=null;for(Am={focusedElem:t,selectionRange:s},lu=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,S=C.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?R:Hs(e.type,R),S);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(P){ft(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return C=P0,P0=!1,C}function Ro(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Wm(e,s,a)}i=i.next}while(i!==n)}}function ad(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Hm(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Vw(t){var e=t.alternate;e!==null&&(t.alternate=null,Vw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xr],delete e[el],delete e[Rm],delete e[sk],delete e[rk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Fw(t){return t.tag===5||t.tag===3||t.tag===4}function R0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Fw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qm(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=du));else if(n!==4&&(t=t.child,t!==null))for(Qm(t,e,s),t=t.sibling;t!==null;)Qm(t,e,s),t=t.sibling}function Km(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Km(t,e,s),t=t.sibling;t!==null;)Km(t,e,s),t=t.sibling}var Vt=null,Qs=!1;function cn(t,e,s){for(s=s.child;s!==null;)Ow(t,e,s),s=s.sibling}function Ow(t,e,s){if(gr&&typeof gr.onCommitFiberUnmount=="function")try{gr.onCommitFiberUnmount(Xu,s)}catch{}switch(s.tag){case 5:Xt||ua(s,e);case 6:var n=Vt,i=Qs;Vt=null,cn(t,e,s),Vt=n,Qs=i,Vt!==null&&(Qs?(t=Vt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Vt.removeChild(s.stateNode));break;case 18:Vt!==null&&(Qs?(t=Vt,s=s.stateNode,t.nodeType===8?jh(t.parentNode,s):t.nodeType===1&&jh(t,s),Ko(t)):jh(Vt,s.stateNode));break;case 4:n=Vt,i=Qs,Vt=s.stateNode.containerInfo,Qs=!0,cn(t,e,s),Vt=n,Qs=i;break;case 0:case 11:case 14:case 15:if(!Xt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Wm(s,e,o),i=i.next}while(i!==n)}cn(t,e,s);break;case 1:if(!Xt&&(ua(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){ft(s,e,l)}cn(t,e,s);break;case 21:cn(t,e,s);break;case 22:s.mode&1?(Xt=(n=Xt)||s.memoizedState!==null,cn(t,e,s),Xt=n):cn(t,e,s);break;default:cn(t,e,s)}}function D0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new vk),e.forEach(function(n){var i=Tk.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function Ws(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,Qs=!1;break e;case 3:Vt=l.stateNode.containerInfo,Qs=!0;break e;case 4:Vt=l.stateNode.containerInfo,Qs=!0;break e}l=l.return}if(Vt===null)throw Error(se(160));Ow(a,o,i),Vt=null,Qs=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){ft(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qw(e,t),e=e.sibling}function qw(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ws(e,t),mr(t),n&4){try{Ro(3,t,t.return),ad(3,t)}catch(R){ft(t,t.return,R)}try{Ro(5,t,t.return)}catch(R){ft(t,t.return,R)}}break;case 1:Ws(e,t),mr(t),n&512&&s!==null&&ua(s,s.return);break;case 5:if(Ws(e,t),mr(t),n&512&&s!==null&&ua(s,s.return),t.flags&32){var i=t.stateNode;try{Go(i,"")}catch(R){ft(t,t.return,R)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lb(i,a),vm(l,o);var d=vm(l,a);for(o=0;o<u.length;o+=2){var h=u[o],p=u[o+1];h==="style"?mb(i,p):h==="dangerouslySetInnerHTML"?db(i,p):h==="children"?Go(i,p):zp(i,h,p,d)}switch(l){case"input":pm(i,a);break;case"textarea":cb(i,a);break;case"select":var x=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var j=a.value;j!=null?ma(i,!!a.multiple,j,!1):x!==!!a.multiple&&(a.defaultValue!=null?ma(i,!!a.multiple,a.defaultValue,!0):ma(i,!!a.multiple,a.multiple?[]:"",!1))}i[el]=a}catch(R){ft(t,t.return,R)}}break;case 6:if(Ws(e,t),mr(t),n&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(R){ft(t,t.return,R)}}break;case 3:if(Ws(e,t),mr(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ko(e.containerInfo)}catch(R){ft(t,t.return,R)}break;case 4:Ws(e,t),mr(t);break;case 13:Ws(e,t),mr(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(jf=yt())),n&4&&D0(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Xt=(d=Xt)||h,Ws(e,t),Xt=d):Ws(e,t),mr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ue=t,h=t.child;h!==null;){for(p=ue=h;ue!==null;){switch(x=ue,j=x.child,x.tag){case 0:case 11:case 14:case 15:Ro(4,x,x.return);break;case 1:ua(x,x.return);var C=x.stateNode;if(typeof C.componentWillUnmount=="function"){n=x,s=x.return;try{e=n,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){ft(n,s,R)}}break;case 5:ua(x,x.return);break;case 22:if(x.memoizedState!==null){M0(p);continue}}j!==null?(j.return=x,ue=j):M0(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=hb("display",o))}catch(R){ft(t,t.return,R)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){ft(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ws(e,t),mr(t),n&4&&D0(t);break;case 21:break;default:Ws(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Fw(s)){var n=s;break e}s=s.return}throw Error(se(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Go(i,""),n.flags&=-33);var a=R0(t);Km(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=R0(t);Qm(t,l,o);break;default:throw Error(se(161))}}catch(u){ft(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wk(t,e,s){ue=t,Uw(t)}function Uw(t,e,s){for(var n=(t.mode&1)!==0;ue!==null;){var i=ue,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Nc;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Xt;l=Nc;var d=Xt;if(Nc=o,(Xt=u)&&!d)for(ue=i;ue!==null;)o=ue,u=o.child,o.tag===22&&o.memoizedState!==null?V0(i):u!==null?(u.return=o,ue=u):V0(i);for(;a!==null;)ue=a,Uw(a),a=a.sibling;ue=i,Nc=l,Xt=d}L0(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ue=a):L0(t)}}function L0(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||ad(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xt)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:Hs(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&v0(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}v0(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&s.focus();break;case"img":u.src&&(s.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Ko(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Xt||e.flags&512&&Hm(e)}catch(x){ft(e,e.return,x)}}if(e===t){ue=null;break}if(s=e.sibling,s!==null){s.return=e.return,ue=s;break}ue=e.return}}function M0(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ue=s;break}ue=e.return}}function V0(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{ad(4,e)}catch(u){ft(e,s,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){ft(e,i,u)}}var a=e.return;try{Hm(e)}catch(u){ft(e,a,u)}break;case 5:var o=e.return;try{Hm(e)}catch(u){ft(e,o,u)}}}catch(u){ft(e,e.return,u)}if(e===t){ue=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ue=l;break}ue=e.return}}var jk=Math.ceil,ju=Zr.ReactCurrentDispatcher,bf=Zr.ReactCurrentOwner,Ms=Zr.ReactCurrentBatchConfig,Oe=0,Dt=null,wt=null,zt=0,js=0,da=zn(0),Et=0,al=null,bi=0,od=0,wf=0,Do=null,ds=null,jf=0,Aa=1/0,Tr=null,Nu=!1,Ym=null,Sn=null,_c=!1,yn=null,_u=0,Lo=0,Jm=null,zc=-1,Bc=0;function os(){return Oe&6?yt():zc!==-1?zc:zc=yt()}function Cn(t){return t.mode&1?Oe&2&&zt!==0?zt&-zt:ik.transition!==null?(Bc===0&&(Bc=Eb()),Bc):(t=Be,t!==0||(t=window.event,t=t===void 0?16:Pb(t.type)),t):1}function er(t,e,s,n){if(50<Lo)throw Lo=0,Jm=null,Error(se(185));Sl(t,s,n),(!(Oe&2)||t!==Dt)&&(t===Dt&&(!(Oe&2)&&(od|=s),Et===4&&pn(t,zt)),gs(t,n),s===1&&Oe===0&&!(e.mode&1)&&(Aa=yt()+500,rd&&Bn()))}function gs(t,e){var s=t.callbackNode;iE(t,e);var n=ou(t,t===Dt?zt:0);if(n===0)s!==null&&Wg(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Wg(s),e===1)t.tag===0?nk(F0.bind(null,t)):Jb(F0.bind(null,t)),ek(function(){!(Oe&6)&&Bn()}),s=null;else{switch(kb(n)){case 1:s=Hp;break;case 4:s=Nb;break;case 16:s=au;break;case 536870912:s=_b;break;default:s=au}s=Kw(s,zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function zw(t,e){if(zc=-1,Bc=0,Oe&6)throw Error(se(327));var s=t.callbackNode;if(ya()&&t.callbackNode!==s)return null;var n=ou(t,t===Dt?zt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Eu(t,n);else{e=n;var i=Oe;Oe|=2;var a=$w();(Dt!==t||zt!==e)&&(Tr=null,Aa=yt()+500,di(t,e));do try{Ek();break}catch(l){Bw(t,l)}while(!0);of(),ju.current=a,Oe=i,wt!==null?e=0:(Dt=null,zt=0,e=Et)}if(e!==0){if(e===2&&(i=_m(t),i!==0&&(n=i,e=Xm(t,i))),e===1)throw s=al,di(t,0),pn(t,n),gs(t,yt()),s;if(e===6)pn(t,n);else{if(i=t.current.alternate,!(n&30)&&!Nk(i)&&(e=Eu(t,n),e===2&&(a=_m(t),a!==0&&(n=a,e=Xm(t,a))),e===1))throw s=al,di(t,0),pn(t,n),gs(t,yt()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(se(345));case 2:si(t,ds,Tr);break;case 3:if(pn(t,n),(n&130023424)===n&&(e=jf+500-yt(),10<e)){if(ou(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){os(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pm(si.bind(null,t,ds,Tr),e);break}si(t,ds,Tr);break;case 4:if(pn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Zs(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=yt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*jk(n/1960))-n,10<n){t.timeoutHandle=Pm(si.bind(null,t,ds,Tr),n);break}si(t,ds,Tr);break;case 5:si(t,ds,Tr);break;default:throw Error(se(329))}}}return gs(t,yt()),t.callbackNode===s?zw.bind(null,t):null}function Xm(t,e){var s=Do;return t.current.memoizedState.isDehydrated&&(di(t,e).flags|=256),t=Eu(t,e),t!==2&&(e=ds,ds=s,e!==null&&Zm(e)),t}function Zm(t){ds===null?ds=t:ds.push.apply(ds,t)}function Nk(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!nr(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function pn(t,e){for(e&=~wf,e&=~od,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Zs(e),n=1<<s;t[s]=-1,e&=~n}}function F0(t){if(Oe&6)throw Error(se(327));ya();var e=ou(t,0);if(!(e&1))return gs(t,yt()),null;var s=Eu(t,e);if(t.tag!==0&&s===2){var n=_m(t);n!==0&&(e=n,s=Xm(t,n))}if(s===1)throw s=al,di(t,0),pn(t,e),gs(t,yt()),s;if(s===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,ds,Tr),gs(t,yt()),null}function Nf(t,e){var s=Oe;Oe|=1;try{return t(e)}finally{Oe=s,Oe===0&&(Aa=yt()+500,rd&&Bn())}}function wi(t){yn!==null&&yn.tag===0&&!(Oe&6)&&ya();var e=Oe;Oe|=1;var s=Ms.transition,n=Be;try{if(Ms.transition=null,Be=1,t)return t()}finally{Be=n,Ms.transition=s,Oe=e,!(Oe&6)&&Bn()}}function _f(){js=da.current,rt(da)}function di(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,ZE(s)),wt!==null)for(s=wt.return;s!==null;){var n=s;switch(rf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hu();break;case 3:Ca(),rt(fs),rt(ss),mf();break;case 5:hf(n);break;case 4:Ca();break;case 13:rt(lt);break;case 19:rt(lt);break;case 10:lf(n.type._context);break;case 22:case 23:_f()}s=s.return}if(Dt=t,wt=t=Tn(t.current,null),zt=js=e,Et=0,al=null,wf=od=bi=0,ds=Do=null,ai!==null){for(e=0;e<ai.length;e++)if(s=ai[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}s.pending=n}ai=null}return t}function Bw(t,e){do{var s=wt;try{if(of(),Oc.current=wu,bu){for(var n=ut.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}bu=!1}if(vi=0,At=_t=ut=null,Po=!1,rl=0,bf.current=null,s===null||s.return===null){Et=1,al=e,wt=null;break}e:{var a=t,o=s.return,l=s,u=e;if(e=zt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var x=h.alternate;x?(h.updateQueue=x.updateQueue,h.memoizedState=x.memoizedState,h.lanes=x.lanes):(h.updateQueue=null,h.memoizedState=null)}var j=E0(o);if(j!==null){j.flags&=-257,k0(j,o,l,a,e),j.mode&1&&_0(a,d,e),e=j,u=d;var C=e.updateQueue;if(C===null){var R=new Set;R.add(u),e.updateQueue=R}else C.add(u);break e}else{if(!(e&1)){_0(a,d,e),Ef();break e}u=Error(se(426))}}else if(at&&l.mode&1){var S=E0(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),k0(S,o,l,a,e),nf(Ta(u,l));break e}}a=u=Ta(u,l),Et!==4&&(Et=2),Do===null?Do=[a]:Do.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var y=kw(a,u,e);y0(a,y);break e;case 1:l=u;var v=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Sn===null||!Sn.has(_)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=Sw(a,l,e);y0(a,P);break e}}a=a.return}while(a!==null)}Ww(s)}catch(L){e=L,wt===s&&s!==null&&(wt=s=s.return);continue}break}while(!0)}function $w(){var t=ju.current;return ju.current=wu,t===null?wu:t}function Ef(){(Et===0||Et===3||Et===2)&&(Et=4),Dt===null||!(bi&268435455)&&!(od&268435455)||pn(Dt,zt)}function Eu(t,e){var s=Oe;Oe|=2;var n=$w();(Dt!==t||zt!==e)&&(Tr=null,di(t,e));do try{_k();break}catch(i){Bw(t,i)}while(!0);if(of(),Oe=s,ju.current=n,wt!==null)throw Error(se(261));return Dt=null,zt=0,Et}function _k(){for(;wt!==null;)Gw(wt)}function Ek(){for(;wt!==null&&!Y_();)Gw(wt)}function Gw(t){var e=Qw(t.alternate,t,js);t.memoizedProps=t.pendingProps,e===null?Ww(t):wt=e,bf.current=null}function Ww(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=yk(s,e),s!==null){s.flags&=32767,wt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Et=6,wt=null;return}}else if(s=gk(s,e,js),s!==null){wt=s;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);Et===0&&(Et=5)}function si(t,e,s){var n=Be,i=Ms.transition;try{Ms.transition=null,Be=1,kk(t,e,s,n)}finally{Ms.transition=i,Be=n}return null}function kk(t,e,s,n){do ya();while(yn!==null);if(Oe&6)throw Error(se(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(aE(t,a),t===Dt&&(wt=Dt=null,zt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||_c||(_c=!0,Kw(au,function(){return ya(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ms.transition,Ms.transition=null;var o=Be;Be=1;var l=Oe;Oe|=4,bf.current=null,bk(t,s),qw(s,t),WE(Am),lu=!!Tm,Am=Tm=null,t.current=s,wk(s),J_(),Oe=l,Be=o,Ms.transition=a}else t.current=s;if(_c&&(_c=!1,yn=t,_u=i),a=t.pendingLanes,a===0&&(Sn=null),eE(s.stateNode),gs(t,yt()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nu)throw Nu=!1,t=Ym,Ym=null,t;return _u&1&&t.tag!==0&&ya(),a=t.pendingLanes,a&1?t===Jm?Lo++:(Lo=0,Jm=t):Lo=0,Bn(),null}function ya(){if(yn!==null){var t=kb(_u),e=Ms.transition,s=Be;try{if(Ms.transition=null,Be=16>t?16:t,yn===null)var n=!1;else{if(t=yn,yn=null,_u=0,Oe&6)throw Error(se(331));var i=Oe;for(Oe|=4,ue=t.current;ue!==null;){var a=ue,o=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ue=d;ue!==null;){var h=ue;switch(h.tag){case 0:case 11:case 15:Ro(8,h,a)}var p=h.child;if(p!==null)p.return=h,ue=p;else for(;ue!==null;){h=ue;var x=h.sibling,j=h.return;if(Vw(h),h===d){ue=null;break}if(x!==null){x.return=j,ue=x;break}ue=j}}}var C=a.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var S=R.sibling;R.sibling=null,R=S}while(R!==null)}}ue=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ue=o;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ro(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,ue=y;break e}ue=a.return}}var v=t.current;for(ue=v;ue!==null;){o=ue;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,ue=_;else e:for(o=v;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ad(9,l)}}catch(L){ft(l,l.return,L)}if(l===o){ue=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ue=P;break e}ue=l.return}}if(Oe=i,Bn(),gr&&typeof gr.onPostCommitFiberRoot=="function")try{gr.onPostCommitFiberRoot(Xu,t)}catch{}n=!0}return n}finally{Be=s,Ms.transition=e}}return!1}function O0(t,e,s){e=Ta(s,e),e=kw(t,e,1),t=kn(t,e,1),e=os(),t!==null&&(Sl(t,1,e),gs(t,e))}function ft(t,e,s){if(t.tag===3)O0(t,t,s);else for(;e!==null;){if(e.tag===3){O0(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sn===null||!Sn.has(n))){t=Ta(s,t),t=Sw(e,t,1),e=kn(e,t,1),t=os(),e!==null&&(Sl(e,1,t),gs(e,t));break}}e=e.return}}function Sk(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=os(),t.pingedLanes|=t.suspendedLanes&s,Dt===t&&(zt&s)===s&&(Et===4||Et===3&&(zt&130023424)===zt&&500>yt()-jf?di(t,0):wf|=s),gs(t,e)}function Hw(t,e){e===0&&(t.mode&1?(e=pc,pc<<=1,!(pc&130023424)&&(pc=4194304)):e=1);var s=os();t=Wr(t,e),t!==null&&(Sl(t,e,s),gs(t,s))}function Ck(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),Hw(t,s)}function Tk(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(e),Hw(t,s)}var Qw;Qw=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||fs.current)ms=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return ms=!1,xk(t,e,s);ms=!!(t.flags&131072)}else ms=!1,at&&e.flags&1048576&&Xb(e,fu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Uc(t,e),t=e.pendingProps;var i=Ea(e,ss.current);ga(e,s),i=ff(null,e,n,t,i,s);var a=xf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xs(n)?(a=!0,mu(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uf(e),i.updater=id,e.stateNode=i,i._reactInternals=e,Om(e,n,t,s),e=zm(null,e,n,!0,a,s)):(e.tag=0,at&&a&&sf(e),ns(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Uc(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Ik(n),t=Hs(n,t),i){case 0:e=Um(null,e,n,t,s);break e;case 1:e=T0(null,e,n,t,s);break e;case 11:e=S0(null,e,n,t,s);break e;case 14:e=C0(null,e,n,Hs(n.type,t),s);break e}throw Error(se(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hs(n,i),Um(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hs(n,i),T0(t,e,n,i,s);case 3:e:{if(Iw(e),t===null)throw Error(se(387));n=e.pendingProps,a=e.memoizedState,i=a.element,nw(t,e),yu(e,n,null,s);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=Ta(Error(se(423)),e),e=A0(t,e,n,s,i);break e}else if(n!==i){i=Ta(Error(se(424)),e),e=A0(t,e,n,s,i);break e}else for(_s=En(e.stateNode.containerInfo.firstChild),ks=e,at=!0,Ks=null,s=sw(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ka(),n===i){e=Hr(t,e,s);break e}ns(t,e,n,s)}e=e.child}return e;case 5:return iw(e),t===null&&Mm(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Im(n,i)?o=null:a!==null&&Im(n,a)&&(e.flags|=32),Aw(t,e),ns(t,e,o,s),e.child;case 6:return t===null&&Mm(e),null;case 13:return Pw(t,e,s);case 4:return df(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sa(e,null,n,s):ns(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hs(n,i),S0(t,e,n,i,s);case 7:return ns(t,e,e.pendingProps,s),e.child;case 8:return ns(t,e,e.pendingProps.children,s),e.child;case 12:return ns(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Je(xu,n._currentValue),n._currentValue=o,a!==null)if(nr(a.value,o)){if(a.children===i.children&&!fs.current){e=Hr(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(a.tag===1){u=Fr(-1,s&-s),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=s,u=a.alternate,u!==null&&(u.lanes|=s),Vm(a.return,s,e),l.lanes|=s;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(se(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Vm(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}ns(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,ga(e,s),i=qs(i),n=n(i),e.flags|=1,ns(t,e,n,s),e.child;case 14:return n=e.type,i=Hs(n,e.pendingProps),i=Hs(n.type,i),C0(t,e,n,i,s);case 15:return Cw(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Hs(n,i),Uc(t,e),e.tag=1,xs(n)?(t=!0,mu(e)):t=!1,ga(e,s),Ew(e,n,i),Om(e,n,i,s),zm(null,e,n,!0,t,s);case 19:return Rw(t,e,s);case 22:return Tw(t,e,s)}throw Error(se(156,e.tag))};function Kw(t,e){return jb(t,e)}function Ak(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(t,e,s,n){return new Ak(t,e,s,n)}function kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ik(t){if(typeof t=="function")return kf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$p)return 11;if(t===Gp)return 14}return 2}function Tn(t,e){var s=t.alternate;return s===null?(s=Ls(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function $c(t,e,s,n,i,a){var o=2;if(n=t,typeof t=="function")kf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ta:return hi(s.children,i,a,e);case Bp:o=8,i|=8;break;case cm:return t=Ls(12,s,e,i|2),t.elementType=cm,t.lanes=a,t;case um:return t=Ls(13,s,e,i),t.elementType=um,t.lanes=a,t;case dm:return t=Ls(19,s,e,i),t.elementType=dm,t.lanes=a,t;case ib:return ld(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rb:o=10;break e;case nb:o=9;break e;case $p:o=11;break e;case Gp:o=14;break e;case dn:o=16,n=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Ls(o,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function hi(t,e,s,n){return t=Ls(7,t,n,e),t.lanes=s,t}function ld(t,e,s,n){return t=Ls(22,t,n,e),t.elementType=ib,t.lanes=s,t.stateNode={isHidden:!1},t}function Ah(t,e,s){return t=Ls(6,t,null,e),t.lanes=s,t}function Ih(t,e,s){return e=Ls(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pk(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dh(0),this.expirationTimes=dh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Sf(t,e,s,n,i,a,o,l,u){return t=new Pk(t,e,s,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Ls(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},uf(a),t}function Rk(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function Yw(t){if(!t)return Mn;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var s=t.type;if(xs(s))return Yb(t,s,e)}return e}function Jw(t,e,s,n,i,a,o,l,u){return t=Sf(s,n,!0,t,i,a,o,l,u),t.context=Yw(null),s=t.current,n=os(),i=Cn(s),a=Fr(n,i),a.callback=e??null,kn(s,a,i),t.current.lanes=i,Sl(t,i,n),gs(t,n),t}function cd(t,e,s,n){var i=e.current,a=os(),o=Cn(i);return s=Yw(s),e.context===null?e.context=s:e.pendingContext=s,e=Fr(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=kn(i,e,o),t!==null&&(er(t,i,o,a),Fc(t,i,o)),o}function ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Cf(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function Dk(){return null}var Xw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tf(t){this._internalRoot=t}ud.prototype.render=Tf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));cd(t,e,null,null)};ud.prototype.unmount=Tf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;wi(function(){cd(null,t,null,null)}),e[Gr]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var e=Tb();t={blockedOn:null,target:t,priority:e};for(var s=0;s<mn.length&&e!==0&&e<mn[s].priority;s++);mn.splice(s,0,t),s===0&&Ib(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U0(){}function Lk(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var d=ku(o);a.call(d)}}var o=Jw(e,n,t,0,null,!1,!1,"",U0);return t._reactRootContainer=o,t[Gr]=o.current,Xo(t.nodeType===8?t.parentNode:t),wi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var d=ku(u);l.call(d)}}var u=Sf(t,0,!1,null,null,!1,!1,"",U0);return t._reactRootContainer=u,t[Gr]=u.current,Xo(t.nodeType===8?t.parentNode:t),wi(function(){cd(e,u,s,n)}),u}function hd(t,e,s,n,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var u=ku(o);l.call(u)}}cd(e,o,t,i)}else o=Lk(s,e,t,i,n);return ku(o)}Sb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=bo(e.pendingLanes);s!==0&&(Qp(e,s|1),gs(e,yt()),!(Oe&6)&&(Aa=yt()+500,Bn()))}break;case 13:wi(function(){var n=Wr(t,1);if(n!==null){var i=os();er(n,t,1,i)}}),Cf(t,1)}};Kp=function(t){if(t.tag===13){var e=Wr(t,134217728);if(e!==null){var s=os();er(e,t,134217728,s)}Cf(t,134217728)}};Cb=function(t){if(t.tag===13){var e=Cn(t),s=Wr(t,e);if(s!==null){var n=os();er(s,t,e,n)}Cf(t,e)}};Tb=function(){return Be};Ab=function(t,e){var s=Be;try{return Be=t,e()}finally{Be=s}};wm=function(t,e,s){switch(e){case"input":if(pm(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=sd(n);if(!i)throw Error(se(90));ob(n),pm(n,i)}}}break;case"textarea":cb(t,s);break;case"select":e=s.value,e!=null&&ma(t,!!s.multiple,e,!1)}};xb=Nf;gb=wi;var Mk={usingClientEntryPoint:!1,Events:[Tl,ia,sd,pb,fb,Nf]},fo={findFiberByHostInstance:ii,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vk={bundleType:fo.bundleType,version:fo.version,rendererPackageName:fo.rendererPackageName,rendererConfig:fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bb(t),t===null?null:t.stateNode},findFiberByHostInstance:fo.findFiberByHostInstance||Dk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{Xu=Ec.inject(Vk),gr=Ec}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mk;As.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(se(200));return Rk(t,e,null,s)};As.createRoot=function(t,e){if(!Af(t))throw Error(se(299));var s=!1,n="",i=Xw;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Sf(t,1,!1,null,null,s,!1,n,i),t[Gr]=e.current,Xo(t.nodeType===8?t.parentNode:t),new Tf(e)};As.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=bb(e),t=t===null?null:t.stateNode,t};As.flushSync=function(t){return wi(t)};As.hydrate=function(t,e,s){if(!dd(e))throw Error(se(200));return hd(null,t,e,!0,s)};As.hydrateRoot=function(t,e,s){if(!Af(t))throw Error(se(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",o=Xw;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=Jw(e,null,t,1,s??null,i,!1,a,o),t[Gr]=e.current,Xo(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new ud(e)};As.render=function(t,e,s){if(!dd(e))throw Error(se(200));return hd(null,t,e,!1,s)};As.unmountComponentAtNode=function(t){if(!dd(t))throw Error(se(40));return t._reactRootContainer?(wi(function(){hd(null,null,t,!1,function(){t._reactRootContainer=null,t[Gr]=null})}),!0):!1};As.unstable_batchedUpdates=Nf;As.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!dd(s))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return hd(t,e,s,!1,n)};As.version="18.3.1-next-f1338f8080-20240426";function Zw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zw)}catch(t){console.error(t)}}Zw(),Zv.exports=As;var Fk=Zv.exports,z0=Fk;om.createRoot=z0.createRoot,om.hydrateRoot=z0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ol.apply(this,arguments)}var vn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(vn||(vn={}));const B0="popstate";function Ok(t){t===void 0&&(t={});function e(i,a){let{pathname:o="/",search:l="",hash:u=""}=Li(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ep("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof a=="string"?a:Su(a))}function n(i,a){If(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return Uk(e,s,n,t)}function vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function If(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qk(){return Math.random().toString(36).substr(2,8)}function $0(t,e){return{usr:t.state,key:t.key,idx:e}}function ep(t,e,s,n){return s===void 0&&(s=null),ol({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Li(e):e,{state:s,key:e&&e.key||n||qk()})}function Su(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Li(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function Uk(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=vn.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(ol({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=vn.Pop;let S=h(),y=S==null?null:S-d;d=S,u&&u({action:l,location:R.location,delta:y})}function x(S,y){l=vn.Push;let v=ep(R.location,S,y);s&&s(v,S),d=h()+1;let _=$0(v,d),P=R.createHref(v);try{o.pushState(_,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;i.location.assign(P)}a&&u&&u({action:l,location:R.location,delta:1})}function j(S,y){l=vn.Replace;let v=ep(R.location,S,y);s&&s(v,S),d=h();let _=$0(v,d),P=R.createHref(v);o.replaceState(_,"",P),a&&u&&u({action:l,location:R.location,delta:0})}function C(S){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof S=="string"?S:Su(S);return v=v.replace(/ $/,"%20"),vt(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let R={get action(){return l},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(B0,p),u=S,()=>{i.removeEventListener(B0,p),u=null}},createHref(S){return e(i,S)},createURL:C,encodeLocation(S){let y=C(S);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:x,replace:j,go(S){return o.go(S)}};return R}var G0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(G0||(G0={}));function zk(t,e,s){return s===void 0&&(s="/"),Bk(t,e,s,!1)}function Bk(t,e,s,n){let i=typeof e=="string"?Li(e):e,a=Pf(i.pathname||"/",s);if(a==null)return null;let o=ej(t);$k(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=tS(a);l=Zk(o[u],d,n)}return l}function ej(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(vt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=An([n,u.relativePath]),h=s.concat(u);a.children&&a.children.length>0&&(vt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ej(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:Jk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let u of tj(a.path))i(a,o,u)}),e}function tj(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=tj(n.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function $k(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:Xk(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Gk=/^:[\w-]+$/,Wk=3,Hk=2,Qk=1,Kk=10,Yk=-2,W0=t=>t==="*";function Jk(t,e){let s=t.split("/"),n=s.length;return s.some(W0)&&(n+=Yk),e&&(n+=Hk),s.filter(i=>!W0(i)).reduce((i,a)=>i+(Gk.test(a)?Wk:a===""?Qk:Kk),n)}function Xk(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function Zk(t,e,s){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=H0({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),x=u.route;if(!p&&d&&s&&!n[n.length-1].route.index&&(p=H0({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:An([a,p.pathname]),pathnameBase:iS(An([a,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(a=An([a,p.pathnameBase]))}return o}function H0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=eS(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((d,h,p)=>{let{paramName:x,isOptional:j}=h;if(x==="*"){let R=l[p]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const C=l[p];return j&&!C?d[x]=void 0:d[x]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function eS(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),If(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function tS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return If(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Pf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function sS(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Li(t):t;return{pathname:s?s.startsWith("/")?s:rS(s,e):e,search:aS(n),hash:oS(i)}}function rS(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Ph(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nS(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Rf(t,e){let s=nS(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Df(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Li(t):(i=ol({},t),vt(!i.pathname||!i.pathname.includes("?"),Ph("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),Ph("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),Ph("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=s;else{let p=e.length-1;if(!n&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),p-=1;i.pathname=x.join("/")}l=p>=0?e[p]:"/"}let u=sS(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&s.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const An=t=>t.join("/").replace(/\/\/+/g,"/"),iS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sj=["post","put","patch","delete"];new Set(sj);const cS=["get",...sj];new Set(cS);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},ll.apply(this,arguments)}const Lf=b.createContext(null),uS=b.createContext(null),$n=b.createContext(null),md=b.createContext(null),en=b.createContext({outlet:null,matches:[],isDataRoute:!1}),rj=b.createContext(null);function dS(t,e){let{relative:s}=e===void 0?{}:e;Ua()||vt(!1);let{basename:n,navigator:i}=b.useContext($n),{hash:a,pathname:o,search:l}=ij(t,{relative:s}),u=o;return n!=="/"&&(u=o==="/"?n:An([n,o])),i.createHref({pathname:u,search:l,hash:a})}function Ua(){return b.useContext(md)!=null}function ur(){return Ua()||vt(!1),b.useContext(md).location}function nj(t){b.useContext($n).static||b.useLayoutEffect(t)}function it(){let{isDataRoute:t}=b.useContext(en);return t?_S():hS()}function hS(){Ua()||vt(!1);let t=b.useContext(Lf),{basename:e,future:s,navigator:n}=b.useContext($n),{matches:i}=b.useContext(en),{pathname:a}=ur(),o=JSON.stringify(Rf(i,s.v7_relativeSplatPath)),l=b.useRef(!1);return nj(()=>{l.current=!0}),b.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let p=Df(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:An([e,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[e,n,o,a,t])}function pd(){let{matches:t}=b.useContext(en),e=t[t.length-1];return e?e.params:{}}function ij(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=b.useContext($n),{matches:i}=b.useContext(en),{pathname:a}=ur(),o=JSON.stringify(Rf(i,n.v7_relativeSplatPath));return b.useMemo(()=>Df(t,JSON.parse(o),a,s==="path"),[t,o,a,s])}function mS(t,e){return pS(t,e)}function pS(t,e,s,n){Ua()||vt(!1);let{navigator:i,static:a}=b.useContext($n),{matches:o}=b.useContext(en),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let h=ur(),p;if(e){var x;let y=typeof e=="string"?Li(e):e;d==="/"||(x=y.pathname)!=null&&x.startsWith(d)||vt(!1),p=y}else p=h;let j=p.pathname||"/",C=j;if(d!=="/"){let y=d.replace(/^\//,"").split("/");C="/"+j.replace(/^\//,"").split("/").slice(y.length).join("/")}let R=!a&&s&&s.matches&&s.matches.length>0?s.matches:zk(t,{pathname:C}),S=vS(R&&R.map(y=>Object.assign({},y,{params:Object.assign({},u,y.params),pathname:An([d,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:An([d,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,s,n);return e&&S?b.createElement(md.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:vn.Pop}},S):S}function fS(){let t=NS(),e=lS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),s?b.createElement("pre",{style:i},s):null,null)}const xS=b.createElement(fS,null);class gS extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?b.createElement(en.Provider,{value:this.props.routeContext},b.createElement(rj.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yS(t){let{routeContext:e,match:s,children:n}=t,i=b.useContext(Lf);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(en.Provider,{value:e},n)}function vS(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var a;if(!s)return null;if(s.errors)t=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=(i=s)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||vt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:x,errors:j}=s,C=p.route.loader&&x[p.route.id]===void 0&&(!j||j[p.route.id]===void 0);if(p.route.lazy||C){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,x)=>{let j,C=!1,R=null,S=null;s&&(j=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||xS,u&&(d<0&&x===0?(C=!0,S=null):d===x&&(C=!0,S=p.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,x+1)),v=()=>{let _;return j?_=R:C?_=S:p.route.Component?_=b.createElement(p.route.Component,null):p.route.element?_=p.route.element:_=h,b.createElement(yS,{match:p,routeContext:{outlet:h,matches:y,isDataRoute:s!=null},children:_})};return s&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?b.createElement(gS,{location:s.location,revalidation:s.revalidation,component:R,error:j,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var aj=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aj||{}),Cu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Cu||{});function bS(t){let e=b.useContext(Lf);return e||vt(!1),e}function wS(t){let e=b.useContext(uS);return e||vt(!1),e}function jS(t){let e=b.useContext(en);return e||vt(!1),e}function oj(t){let e=jS(),s=e.matches[e.matches.length-1];return s.route.id||vt(!1),s.route.id}function NS(){var t;let e=b.useContext(rj),s=wS(Cu.UseRouteError),n=oj(Cu.UseRouteError);return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function _S(){let{router:t}=bS(aj.UseNavigateStable),e=oj(Cu.UseNavigateStable),s=b.useRef(!1);return nj(()=>{s.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ll({fromRouteId:e},a)))},[t,e])}function ES(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cl(t){let{to:e,replace:s,state:n,relative:i}=t;Ua()||vt(!1);let{future:a,static:o}=b.useContext($n),{matches:l}=b.useContext(en),{pathname:u}=ur(),d=it(),h=Df(e,Rf(l,a.v7_relativeSplatPath),u,i==="path"),p=JSON.stringify(h);return b.useEffect(()=>d(JSON.parse(p),{replace:s,state:n,relative:i}),[d,p,i,s,n]),null}function xe(t){vt(!1)}function kS(t){let{basename:e="/",children:s=null,location:n,navigationType:i=vn.Pop,navigator:a,static:o=!1,future:l}=t;Ua()&&vt(!1);let u=e.replace(/^\/*/,"/"),d=b.useMemo(()=>({basename:u,navigator:a,static:o,future:ll({v7_relativeSplatPath:!1},l)}),[u,l,a,o]);typeof n=="string"&&(n=Li(n));let{pathname:h="/",search:p="",hash:x="",state:j=null,key:C="default"}=n,R=b.useMemo(()=>{let S=Pf(h,u);return S==null?null:{location:{pathname:S,search:p,hash:x,state:j,key:C},navigationType:i}},[u,h,p,x,j,C,i]);return R==null?null:b.createElement($n.Provider,{value:d},b.createElement(md.Provider,{children:s,value:R}))}function SS(t){let{children:e,location:s}=t;return mS(tp(e),s)}new Promise(()=>{});function tp(t,e){e===void 0&&(e=[]);let s=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let a=[...e,i];if(n.type===b.Fragment){s.push.apply(s,tp(n.props.children,a));return}n.type!==xe&&vt(!1),!n.props.index||!n.props.children||vt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=tp(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sp(){return sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},sp.apply(this,arguments)}function CS(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function TS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AS(t,e){return t.button===0&&(!e||e==="_self")&&!TS(t)}function rp(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function IS(t,e){let s=rp(t);return e&&e.forEach((n,i)=>{s.has(i)||e.getAll(i).forEach(a=>{s.append(i,a)})}),s}const PS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],RS="6";try{window.__reactRouterVersion=RS}catch{}const DS="startTransition",Q0=S_[DS];function LS(t){let{basename:e,children:s,future:n,window:i}=t,a=b.useRef();a.current==null&&(a.current=Ok({window:i,v5Compat:!0}));let o=a.current,[l,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},h=b.useCallback(p=>{d&&Q0?Q0(()=>u(p)):u(p)},[u,d]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>ES(n),[n]),b.createElement(kS,{basename:e,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const MS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Y=b.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:p}=e,x=CS(e,PS),{basename:j}=b.useContext($n),C,R=!1;if(typeof d=="string"&&VS.test(d)&&(C=d,MS))try{let _=new URL(window.location.href),P=d.startsWith("//")?new URL(_.protocol+d):new URL(d),L=Pf(P.pathname,j);P.origin===_.origin&&L!=null?d=L+P.search+P.hash:R=!0}catch{}let S=dS(d,{relative:i}),y=FS(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:p});function v(_){n&&n(_),_.defaultPrevented||y(_)}return b.createElement("a",sp({},x,{href:C||S,onClick:R||a?n:v,ref:s,target:u}))});var K0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(K0||(K0={}));var Y0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Y0||(Y0={}));function FS(t,e){let{target:s,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,u=it(),d=ur(),h=ij(t,{relative:o});return b.useCallback(p=>{if(AS(p,s)){p.preventDefault();let x=n!==void 0?n:Su(d)===Su(h);u(t,{replace:x,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[d,u,h,n,i,s,t,a,o,l])}function lj(t){let e=b.useRef(rp(t)),s=b.useRef(!1),n=ur(),i=b.useMemo(()=>IS(n.search,s.current?null:e.current),[n.search]),a=it(),o=b.useCallback((l,u)=>{const d=rp(typeof l=="function"?l(i):l);s.current=!0,a("?"+d,u)},[a,i]);return[i,o]}var J0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},OS=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const i=t[s++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],o=t[s++],l=t[s++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const a=t[s++],o=t[s++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},uj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=a>>2,p=(a&3)<<4|l>>4;let x=(l&15)<<2|d>>6,j=d&63;u||(j=64,o||(x=64)),n.push(s[h],s[p],s[x],s[j])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):OS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],l=i<t.length?s[t.charAt(i)]:0;++i;const d=i<t.length?s[t.charAt(i)]:64;++i;const p=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||l==null||d==null||p==null)throw new qS;const x=a<<2|l>>4;if(n.push(x),d!==64){const j=l<<4&240|d>>2;if(n.push(j),p!==64){const C=d<<6&192|p;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const US=function(t){const e=cj(t);return uj.encodeByteArray(e,!0)},Tu=function(t){return US(t).replace(/\./g,"")},dj=function(t){try{return uj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=()=>zS().__FIREBASE_DEFAULTS__,$S=()=>{if(typeof process>"u"||typeof J0>"u")return;const t=J0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&dj(t[1]);return e&&JSON.parse(e)},fd=()=>{try{return BS()||$S()||GS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hj=t=>{var e,s;return(s=(e=fd())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},WS=t=>{const e=hj(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},mj=()=>{var t;return(t=fd())===null||t===void 0?void 0:t.config},pj=t=>{var e;return(e=fd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Tu(JSON.stringify(s)),Tu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rs())}function YS(){var t;const e=(t=fd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mf(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XS(){const t=rs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ZS(){return!YS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vf(){try{return typeof indexedDB=="object"}catch{return!1}}function Ff(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}function fj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4="FirebaseError";class dr extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=e4,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mi.prototype.create)}}class Mi{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?t4(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new dr(i,l,n)}}function t4(t,e){return t.replace(s4,(s,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const s4=/\{\$([^}]+)}/g;function r4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ul(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const i of s){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(X0(a)&&X0(o)){if(!ul(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!s.includes(i))return!1;return!0}function X0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){const e=[];for(const[s,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function No(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function n4(t,e){const s=new i4(t,e);return s.subscribe.bind(s)}class i4{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,n){let i;if(e===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");a4(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:n},i.next===void 0&&(i.next=Rh),i.error===void 0&&(i.error=Rh),i.complete===void 0&&(i.complete=Rh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a4(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function Rh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4=1e3,l4=2,c4=4*60*60*1e3,u4=.5;function Z0(t,e=o4,s=l4){const n=e*Math.pow(s,t),i=Math.round(u4*n*(Math.random()-.5)*2);return Math.min(c4,n+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new HS;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m4(e))try{this.getOrInitializeService({instanceIdentifier:ri})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ri){return this.instances.has(e)}getOptions(e=ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,s){var n;const i=this.normalizeInstanceIdentifier(s),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const i of n)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:h4(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ri){return this.component?this.component.multipleInstances?e:ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h4(t){return t===ri?void 0:t}function m4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new d4(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const f4={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},x4=Le.INFO,g4={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},y4=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=g4[e];if(i)console[i](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xd{constructor(e){this.name=e,this._logLevel=x4,this._logHandler=y4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?f4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const v4=(t,e)=>e.some(s=>t instanceof s);let ey,ty;function b4(){return ey||(ey=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function w4(){return ty||(ty=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xj=new WeakMap,np=new WeakMap,gj=new WeakMap,Dh=new WeakMap,Of=new WeakMap;function j4(t){const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{s(In(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&xj.set(s,t)}).catch(()=>{}),Of.set(e,t),e}function N4(t){if(np.has(t))return;const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{s(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});np.set(t,e)}let ip={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gj.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return In(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _4(t){ip=t(ip)}function E4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Lh(this),e,...s);return gj.set(n,e.sort?e.sort():[e]),In(n)}:w4().includes(t)?function(...e){return t.apply(Lh(this),e),In(xj.get(this))}:function(...e){return In(t.apply(Lh(this),e))}}function k4(t){return typeof t=="function"?E4(t):(t instanceof IDBTransaction&&N4(t),v4(t,b4())?new Proxy(t,ip):t)}function In(t){if(t instanceof IDBRequest)return j4(t);if(Dh.has(t))return Dh.get(t);const e=k4(t);return e!==t&&(Dh.set(t,e),Of.set(e,t)),e}const Lh=t=>Of.get(t);function yj(t,e,{blocked:s,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=In(o);return n&&o.addEventListener("upgradeneeded",u=>{n(In(o.result),u.oldVersion,u.newVersion,In(o.transaction),u)}),s&&o.addEventListener("blocked",u=>s(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const S4=["get","getKey","getAll","getAllKeys","count"],C4=["put","add","delete","clear"],Mh=new Map;function sy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Mh.get(e))return Mh.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=C4.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||S4.includes(s)))return;const a=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[s](...l),i&&u.done]))[0]};return Mh.set(e,a),a}_4(t=>({...t,get:(e,s,n)=>sy(e,s)||t.get(e,s,n),has:(e,s)=>!!sy(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(A4(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function A4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ap="@firebase/app",ry="0.10.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=new xd("@firebase/app"),I4="@firebase/app-compat",P4="@firebase/analytics-compat",R4="@firebase/analytics",D4="@firebase/app-check-compat",L4="@firebase/app-check",M4="@firebase/auth",V4="@firebase/auth-compat",F4="@firebase/database",O4="@firebase/database-compat",q4="@firebase/functions",U4="@firebase/functions-compat",z4="@firebase/installations",B4="@firebase/installations-compat",$4="@firebase/messaging",G4="@firebase/messaging-compat",W4="@firebase/performance",H4="@firebase/performance-compat",Q4="@firebase/remote-config",K4="@firebase/remote-config-compat",Y4="@firebase/storage",J4="@firebase/storage-compat",X4="@firebase/firestore",Z4="@firebase/vertexai-preview",eC="@firebase/firestore-compat",tC="firebase",sC="10.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="[DEFAULT]",rC={[ap]:"fire-core",[I4]:"fire-core-compat",[R4]:"fire-analytics",[P4]:"fire-analytics-compat",[L4]:"fire-app-check",[D4]:"fire-app-check-compat",[M4]:"fire-auth",[V4]:"fire-auth-compat",[F4]:"fire-rtdb",[O4]:"fire-rtdb-compat",[q4]:"fire-fn",[U4]:"fire-fn-compat",[z4]:"fire-iid",[B4]:"fire-iid-compat",[$4]:"fire-fcm",[G4]:"fire-fcm-compat",[W4]:"fire-perf",[H4]:"fire-perf-compat",[Q4]:"fire-rc",[K4]:"fire-rc-compat",[Y4]:"fire-gcs",[J4]:"fire-gcs-compat",[X4]:"fire-fst",[eC]:"fire-fst-compat",[Z4]:"fire-vertex","fire-js":"fire-js",[tC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Map,nC=new Map,lp=new Map;function ny(t,e){try{t.container.addComponent(e)}catch(s){Qr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function jr(t){const e=t.name;if(lp.has(e))return Qr.debug(`There were multiple attempts to register component ${e}.`),!1;lp.set(e,t);for(const s of Au.values())ny(s,t);for(const s of nC.values())ny(s,t);return!0}function Vi(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function Js(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new Mi("app","Firebase",iC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=sC;function vj(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:op,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Pn.create("bad-app-name",{appName:String(i)});if(s||(s=mj()),!s)throw Pn.create("no-options");const a=Au.get(i);if(a){if(ul(s,a.options)&&ul(n,a.config))return a;throw Pn.create("duplicate-app",{appName:i})}const o=new p4(i);for(const u of lp.values())o.addComponent(u);const l=new aC(s,n,o);return Au.set(i,l),l}function qf(t=op){const e=Au.get(t);if(!e&&t===op&&mj())return vj();if(!e)throw Pn.create("no-app",{appName:t});return e}function Vs(t,e,s){var n;let i=(n=rC[t])!==null&&n!==void 0?n:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qr.warn(l.join(" "));return}jr(new ir(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="firebase-heartbeat-database",lC=1,dl="firebase-heartbeat-store";let Vh=null;function bj(){return Vh||(Vh=yj(oC,lC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dl)}catch(s){console.warn(s)}}}}).catch(t=>{throw Pn.create("idb-open",{originalErrorMessage:t.message})})),Vh}async function cC(t){try{const s=(await bj()).transaction(dl),n=await s.objectStore(dl).get(wj(t));return await s.done,n}catch(e){if(e instanceof dr)Qr.warn(e.message);else{const s=Pn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Qr.warn(s.message)}}}async function iy(t,e){try{const n=(await bj()).transaction(dl,"readwrite");await n.objectStore(dl).put(e,wj(t)),await n.done}catch(s){if(s instanceof dr)Qr.warn(s.message);else{const n=Pn.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Qr.warn(n.message)}}}function wj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=1024,dC=30*24*60*60*1e3;class hC{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new pC(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ay();return console.log("heartbeats",(e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats),((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const u=new Date(l.date).valueOf();return Date.now()-u<=dC}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Qr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=ay(),{heartbeatsToSend:n,unsentEntries:i}=mC(this._heartbeatsCache.heartbeats),a=Tu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return Qr.warn(s),""}}}function ay(){return new Date().toISOString().substring(0,10)}function mC(t,e=uC){const s=[];let n=t.slice();for(const i of t){const a=s.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),oy(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),oy(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class pC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vf()?Ff().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await cC(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return iy(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function oy(t){return Tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){jr(new ir("platform-logger",e=>new T4(e),"PRIVATE")),jr(new ir("heartbeat",e=>new hC(e),"PRIVATE")),Vs(ap,ry,t),Vs(ap,ry,"esm2017"),Vs("fire-js","")}fC("");function Uf(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function jj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xC=jj,Nj=new Mi("auth","Firebase",jj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new xd("@firebase/auth");function gC(t,...e){Iu.logLevel<=Le.WARN&&Iu.warn(`Auth (${za}): ${t}`,...e)}function Gc(t,...e){Iu.logLevel<=Le.ERROR&&Iu.error(`Auth (${za}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(t,...e){throw Bf(t,...e)}function tr(t,...e){return Bf(t,...e)}function zf(t,e,s){const n=Object.assign(Object.assign({},xC()),{[e]:s});return new Mi("auth","Firebase",n).create(e,{appName:t.name})}function Or(t){return zf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yC(t,e,s){const n=s;if(!(e instanceof n))throw n.name!==e.constructor.name&&zs(t,"argument-error"),zf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bf(t,...e){if(typeof t!="string"){const s=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(s,...n)}return Nj.create(t,...e)}function ve(t,e,...s){if(!t)throw Bf(e,...s)}function Lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gc(e),new Error(e)}function Kr(t,e){t||Lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vC(){return ly()==="http:"||ly()==="https:"}function ly(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vC()||Mf()||"connection"in navigator)?navigator.onLine:!0}function wC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,s){this.shortDelay=e,this.longDelay=s,Kr(s>e,"Short delay should be less than long delay!"),this.isMobile=KS()||JS()}get(){return bC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){Kr(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{static initialize(e,s,n){this.fetchImpl=e,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=new Pl(3e4,6e4);function tn(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hr(t,e,s,n,i={}){return Ej(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=Il(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),_j.fetch()(kj(t,t.config.apiHost,s,l),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},a))})}async function Ej(t,e,s){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},jC),e);try{const i=new EC(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw kc(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw kc(t,"user-disabled",o);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw zf(t,h,d);zs(t,h)}}catch(i){if(i instanceof dr)throw i;zs(t,"network-request-failed",{message:String(i)})}}async function Rl(t,e,s,n,i={}){const a=await hr(t,e,s,n,i);return"mfaPendingCredential"in a&&zs(t,"multi-factor-auth-required",{_serverResponse:a}),a}function kj(t,e,s,n){const i=`${e}${s}?${n}`;return t.config.emulator?$f(t.config,i):`${t.config.apiScheme}://${i}`}function _C(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(tr(this.auth,"network-request-failed")),NC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kc(t,e,s){const n={appName:t.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const i=tr(t,e,n);return i.customData._tokenResponse=s,i}function cy(t){return t!==void 0&&t.enterprise!==void 0}class kC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return _C(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function SC(t,e){return hr(t,"GET","/v2/recaptchaConfig",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t,e){return hr(t,"POST","/v1/accounts:delete",e)}async function Sj(t,e){return hr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(t,e=!1){return nt(t).getIdToken(e)}async function AC(t,e=!1){const s=nt(t),n=await s.getIdToken(e),i=Gf(n);ve(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Mo(Fh(i.auth_time)),issuedAtTime:Mo(Fh(i.iat)),expirationTime:Mo(Fh(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Fh(t){return Number(t)*1e3}function Gf(t){const[e,s,n]=t.split(".");if(e===void 0||s===void 0||n===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const i=dj(s);return i?JSON.parse(i):(Gc("Failed to decode base64 JWT payload"),null)}catch(i){return Gc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function uy(t){const e=Gf(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ji(t,e,s=!1){if(s)return e;try{return await e}catch(n){throw n instanceof dr&&IC(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function IC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mo(this.lastLoginAt),this.creationTime=Mo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pu(t){var e;const s=t.auth,n=await t.getIdToken(),i=await ji(t,Sj(s,{idToken:n}));ve(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Cj(a.providerUserInfo):[],l=DC(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new up(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function RC(t){const e=nt(t);await Pu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DC(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function Cj(t){return t.map(e=>{var{providerId:s}=e,n=Uf(e,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(t,e){const s=await Ej(t,{},async()=>{const n=Il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=kj(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",_j.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function MC(t,e){return hr(t,"POST","/v2/accounts:revokeToken",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const s=uy(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:n,refreshToken:i,expiresIn:a}=await LC(e,s);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,s,n){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,s){const{refreshToken:n,accessToken:i,expirationTime:a}=s,o=new va;return n&&(ve(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(ve(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(ve(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new va,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mr{constructor(e){var{uid:s,auth:n,stsTokenManager:i}=e,a=Uf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new up(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await ji(this,this.stsTokenManager.getToken(this.auth,e));return ve(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return AC(this,e)}reload(){return RC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Mr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),s&&await Pu(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Js(this.auth.app))return Promise.reject(Or(this.auth));const e=await this.getIdToken();return await ji(this,CC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var n,i,a,o,l,u,d,h;const p=(n=s.displayName)!==null&&n!==void 0?n:void 0,x=(i=s.email)!==null&&i!==void 0?i:void 0,j=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,C=(o=s.photoURL)!==null&&o!==void 0?o:void 0,R=(l=s.tenantId)!==null&&l!==void 0?l:void 0,S=(u=s._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=s.createdAt)!==null&&d!==void 0?d:void 0,v=(h=s.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:P,isAnonymous:L,providerData:M,stsTokenManager:N}=s;ve(_&&N,e,"internal-error");const f=va.fromJSON(this.name,N);ve(typeof _=="string",e,"internal-error"),un(p,e.name),un(x,e.name),ve(typeof P=="boolean",e,"internal-error"),ve(typeof L=="boolean",e,"internal-error"),un(j,e.name),un(C,e.name),un(R,e.name),un(S,e.name),un(y,e.name),un(v,e.name);const w=new Mr({uid:_,auth:e,email:x,emailVerified:P,displayName:p,isAnonymous:L,photoURL:C,phoneNumber:j,tenantId:R,stsTokenManager:f,createdAt:y,lastLoginAt:v});return M&&Array.isArray(M)&&(w.providerData=M.map(E=>Object.assign({},E))),S&&(w._redirectEventId=S),w}static async _fromIdTokenResponse(e,s,n=!1){const i=new va;i.updateFromServerResponse(s);const a=new Mr({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Pu(a),a}static async _fromGetAccountInfoResponse(e,s,n){const i=s.users[0];ve(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?Cj(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new va;l.updateFromIdToken(n);const u=new Mr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new up(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy=new Map;function Vr(t){Kr(t instanceof Function,"Expected a class definition");let e=dy.get(t);return e?(Kr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}Tj.type="NONE";const hy=Tj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(t,e,s){return`firebase:${t}:${e}:${s}`}class ba{constructor(e,s,n){this.persistence=e,this.auth=s,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Wc(this.userKey,i.apiKey,a),this.fullPersistenceKey=Wc("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,n="authUser"){if(!s.length)return new ba(Vr(hy),e,n);const i=(await Promise.all(s.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=i[0]||Vr(hy);const o=Wc(n,e.config.apiKey,e.name);let l=null;for(const d of s)try{const h=await d._get(o);if(h){const p=Mr._fromJSON(e,h);d!==a&&(l=p),a=d;break}}catch{}const u=i.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ba(a,e,n):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(s.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new ba(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Rj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Aj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lj(e))return"Blackberry";if(Mj(e))return"Webos";if(Ij(e))return"Safari";if((e.includes("chrome/")||Pj(e))&&!e.includes("edge/"))return"Chrome";if(Dj(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Aj(t=rs()){return/firefox\//i.test(t)}function Ij(t=rs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pj(t=rs()){return/crios\//i.test(t)}function Rj(t=rs()){return/iemobile/i.test(t)}function Dj(t=rs()){return/android/i.test(t)}function Lj(t=rs()){return/blackberry/i.test(t)}function Mj(t=rs()){return/webos/i.test(t)}function Wf(t=rs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function VC(t=rs()){var e;return Wf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FC(){return XS()&&document.documentMode===10}function Vj(t=rs()){return Wf(t)||Dj(t)||Mj(t)||Lj(t)||/windows phone/i.test(t)||Rj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(t,e=[]){let s;switch(t){case"Browser":s=my(rs());break;case"Worker":s=`${my(rs())}-${t}`;break;default:s=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${za}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const n=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});n.onAbort=s,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const n of this.queue)await n(e),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(t,e={}){return hr(t,"GET","/v2/passwordPolicy",tn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=6;class zC{constructor(e){var s,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:UC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,n,i,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(s=u.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,s){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=e.length>=n),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,s,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,s,n,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new py(this),this.idTokenSubscription=new py(this),this.beforeStateQueue=new OC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Vr(s)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await Sj(this,{idToken:e}),n=await Mr._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Js(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Pu(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Js(this.app))return Promise.reject(Or(this));const s=e?nt(e):null;return s&&ve(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Js(this.app)?Promise.reject(Or(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Js(this.app)?Promise.reject(Or(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qC(this),s=new zC(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Mi("auth","Firebase",e())}onAuthStateChanged(e,s,n){return this.registerStateListener(this.authStateSubscription,e,s,n)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,n){return this.registerStateListener(this.idTokenSubscription,e,s,n)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await MC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const n=await this.getOrInitRedirectPersistenceManager(s);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Vr(e)||this._popupRedirectResolver;ve(s,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[Vr(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,n,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof s=="function"){const u=e.addObserver(s,n,i);return()=>{o=!0,u()}}else{const u=e.addObserver(s);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(s["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&gC(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function sn(t){return nt(t)}class py{constructor(e){this.auth=e,this.observer=null,this.addObserver=n4(s=>this.observer=s)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $C(t){gd=t}function Oj(t){return gd.loadJS(t)}function GC(){return gd.recaptchaEnterpriseScript}function WC(){return gd.gapiScript}function HC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const QC="recaptcha-enterprise",KC="NO_RECAPTCHA";class YC{constructor(e){this.type=QC,this.auth=sn(e)}async verify(e="verify",s=!1){async function n(a){if(!s){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{SC(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new kC(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function i(a,o,l){const u=window.grecaptcha;cy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(KC)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!s&&cy(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=GC();u.length!==0&&(u+=l),Oj(u).then(()=>{i(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function fy(t,e,s,n=!1){const i=new YC(t);let a;try{a=await i.verify(s)}catch{a=await i.verify(s,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ru(t,e,s,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await fy(t,e,s,s==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await fy(t,e,s,s==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){const s=Vi(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(ul(a,e??{}))return i;zs(i,"already-initialized")}return s.initialize({options:e})}function XC(t,e){const s=(e==null?void 0:e.persistence)||[],n=(Array.isArray(s)?s:[s]).map(Vr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function ZC(t,e,s){const n=sn(t);ve(n._canInitEmulator,n,"emulator-config-failed"),ve(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=qj(e),{host:o,port:l}=eT(e),u=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${u}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),tT()}function qj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function eT(t){const e=qj(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:xy(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:xy(o)}}}function xy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function tT(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,s){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}async function sT(t,e){return hr(t,"POST","/v1/accounts:update",e)}async function rT(t,e){return hr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nT(t,e){return Rl(t,"POST","/v1/accounts:signInWithPassword",tn(t,e))}async function Uj(t,e){return hr(t,"POST","/v1/accounts:sendOobCode",tn(t,e))}async function iT(t,e){return Uj(t,e)}async function aT(t,e){return Uj(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}async function lT(t,e){return Rl(t,"POST","/v1/accounts:signInWithEmailLink",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Hf{constructor(e,s,n,i=null){super("password",n),this._email=e,this._password=s,this._tenantId=i}static _fromEmailAndPassword(e,s){return new hl(e,s,"password")}static _fromEmailAndCode(e,s,n=null){return new hl(e,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ru(e,s,"signInWithPassword",nT);case"emailLink":return oT(e,{email:this._email,oobCode:this._password});default:zs(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const n={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ru(e,n,"signUpPassword",rT);case"emailLink":return lT(e,{idToken:s,email:this._email,oobCode:this._password});default:zs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wa(t,e){return Rl(t,"POST","/v1/accounts:signInWithIdp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="http://localhost";class Ni extends Hf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Ni(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):zs("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=s,a=Uf(s,["providerId","signInMethod"]);if(!n||!i)return null;const o=new Ni(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return wa(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,wa(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,wa(e,s)}buildRequest(){const e={requestUri:cT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=Il(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dT(t){const e=jo(No(t)).link,s=e?jo(No(e)).deep_link_id:null,n=jo(No(t)).deep_link_id;return(n?jo(No(n)).link:null)||n||s||e||t}class Qf{constructor(e){var s,n,i,a,o,l;const u=jo(No(e)),d=(s=u.apiKey)!==null&&s!==void 0?s:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,p=uT((i=u.mode)!==null&&i!==void 0?i:null);ve(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const s=dT(e);try{return new Qf(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(){this.providerId=Fi.PROVIDER_ID}static credential(e,s){return hl._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const n=Qf.parseLink(s);return ve(n,"argument-error"),hl._fromEmailAndCode(e,n.code,n.tenantId)}}Fi.PROVIDER_ID="password";Fi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl extends Kf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn extends Dl{constructor(){super("facebook.com")}static credential(e){return Ni._fromParams({providerId:fn.PROVIDER_ID,signInMethod:fn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fn.credentialFromTaggedObject(e)}static credentialFromError(e){return fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fn.credential(e.oauthAccessToken)}catch{return null}}}fn.FACEBOOK_SIGN_IN_METHOD="facebook.com";fn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Dl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Ni._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n}=e;if(!s&&!n)return null;try{return Ir.credential(s,n)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Dl{constructor(){super("github.com")}static credential(e){return Ni._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Dl{constructor(){super("twitter.com")}static credential(e,s){return Ni._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=e;if(!s||!n)return null;try{return xn.credential(s,n)}catch{return null}}}xn.TWITTER_SIGN_IN_METHOD="twitter.com";xn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(t,e){return Rl(t,"POST","/v1/accounts:signUp",tn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,n,i=!1){const a=await Mr._fromIdTokenResponse(e,n,i),o=gy(n);return new _i({user:a,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(e,s,n){await e._updateTokensIfNecessary(n,!0);const i=gy(n);return new _i({user:e,providerId:i,_tokenResponse:n,operationType:s})}}function gy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends dr{constructor(e,s,n,i){var a;super(s.code,s.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Du.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,s,n,i){return new Du(e,s,n,i)}}function zj(t,e,s,n){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Du._fromErrorAndOperation(t,a,e,n):a})}async function mT(t,e,s=!1){const n=await ji(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return _i._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bj(t,e,s=!1){const{auth:n}=t;if(Js(n.app))return Promise.reject(Or(n));const i="reauthenticate";try{const a=await ji(t,zj(n,i,e,t),s);ve(a.idToken,n,"internal-error");const o=Gf(a.idToken);ve(o,n,"internal-error");const{sub:l}=o;return ve(t.uid===l,n,"user-mismatch"),_i._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&zs(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $j(t,e,s=!1){if(Js(t.app))return Promise.reject(Or(t));const n="signIn",i=await zj(t,n,e),a=await _i._fromIdTokenResponse(t,n,i);return s||await t._updateCurrentUser(a.user),a}async function pT(t,e){return $j(sn(t),e)}async function fT(t,e){return Bj(nt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gj(t){const e=sn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dp(t,e,s){const n=sn(t);await Ru(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",aT)}async function Wj(t,e,s){if(Js(t.app))return Promise.reject(Or(t));const n=sn(t),o=await Ru(n,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hT).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Gj(t),u}),l=await _i._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function Hj(t,e,s){return Js(t.app)?Promise.reject(Or(t)):pT(nt(t),Fi.credential(e,s)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Gj(t),n})}async function yy(t,e){const s=nt(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await iT(s.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,e){return hr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const n=nt(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},o=await ji(n,xT(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function gT(t,e){return yT(nt(t),null,e)}async function yT(t,e,s){const{auth:n}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(a.password=s);const o=await ji(t,sT(n,a));await t._updateTokensIfNecessary(o,!0)}function vT(t,e,s,n){return nt(t).onIdTokenChanged(e,s,n)}function bT(t,e,s){return nt(t).beforeAuthStateChanged(e,s)}function wT(t,e,s,n){return nt(t).onAuthStateChanged(e,s,n)}function jT(t){return nt(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=1e3,_T=10;class Yj extends Kj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),i=this.localCache[s];n!==i&&e(s,i,n)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const n=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);FC()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,_T):i()}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n}),!0)})},NT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yj.type="LOCAL";const ET=Yj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj extends Kj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}Jj.type="SESSION";const Xj=Jj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const n=new yd(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:n,eventType:i,data:a}=s.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async d=>d(s.origin,a)),u=await kT(l);s.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:u})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t="",e=10){let s="";for(let n=0;n<e;n++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Yf("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(p){const x=p;if(x.data.eventId===d)switch(x.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(x.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:s},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function CT(t){vr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function TT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AT(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IT(){return Zj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="firebaseLocalStorageDb",PT=1,Mu="firebaseLocalStorage",t1="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function vd(t,e){return t.transaction([Mu],e?"readwrite":"readonly").objectStore(Mu)}function RT(){const t=indexedDB.deleteDatabase(e1);return new Ll(t).toPromise()}function hp(){const t=indexedDB.open(e1,PT);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Mu,{keyPath:t1})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Mu)?e(n):(n.close(),await RT(),e(await hp()))})})}async function vy(t,e,s){const n=vd(t,!0).put({[t1]:e,value:s});return new Ll(n).toPromise()}async function DT(t,e){const s=vd(t,!1).get(e),n=await new Ll(s).toPromise();return n===void 0?null:n.value}function by(t,e){const s=vd(t,!0).delete(e);return new Ll(s).toPromise()}const LT=800,MT=3;class s1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hp(),this.db)}async _withRetries(e){let s=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(s++>MT)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(IT()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await TT(),!this.activeServiceWorker)return;this.sender=new ST(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hp();return await vy(e,Lu,"1"),await by(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>vy(n,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(n=>DT(n,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>by(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=vd(i,!1).getAll();return new Ll(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}s1.type="LOCAL";const VT=s1;new Pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1(t,e){return e?Vr(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Hf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wa(e,this._buildIdpRequest())}_linkToIdToken(e,s){return wa(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return wa(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function FT(t){return $j(t.auth,new Jf(t),t.bypassAuthState)}function OT(t){const{auth:e,user:s}=t;return ve(s,e,"internal-error"),Bj(s,new Jf(t),t.bypassAuthState)}async function qT(t){const{auth:e,user:s}=t;return ve(s,e,"internal-error"),mT(s,new Jf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,s,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:s,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FT;case"linkViaPopup":case"linkViaRedirect":return qT;case"reauthViaPopup":case"reauthViaRedirect":return OT;default:zs(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Pl(2e3,1e4);async function wy(t,e,s){if(Js(t.app))return Promise.reject(tr(t,"operation-not-supported-in-this-environment"));const n=sn(t);yC(t,e,Kf);const i=r1(n,s);return new li(n,"signInViaPopup",e,i).executeNotNull()}class li extends n1{constructor(e,s,n,i,a){super(e,s,i,a),this.provider=n,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UT.get())};e()}}li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT="pendingRedirect",Hc=new Map;class BT extends n1{constructor(e,s,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let e=Hc.get(this.auth._key());if(!e){try{const n=await $T(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(s){e=()=>Promise.reject(s)}Hc.set(this.auth._key(),e)}return this.bypassAuthState||Hc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $T(t,e){const s=HT(e),n=WT(t);if(!await n._isAvailable())return!1;const i=await n._get(s)==="true";return await n._remove(s),i}function GT(t,e){Hc.set(t._key(),e)}function WT(t){return Vr(t._redirectPersistence)}function HT(t){return Wc(zT,t.config.apiKey,t.name)}async function QT(t,e,s=!1){if(Js(t.app))return Promise.reject(Or(t));const n=sn(t),i=r1(n,e),o=await new BT(n,i,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=10*60*1e3;class YT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(s=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JT(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var n;if(e.error&&!i1(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(tr(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const n=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KT&&this.cachedEventUids.clear(),this.cachedEventUids.has(jy(e))}saveEventToCache(e){this.cachedEventUids.add(jy(e)),this.lastProcessedEventTime=Date.now()}}function jy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XT(t,e={}){return hr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eA=/^https?/;async function tA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await XT(t);for(const s of e)try{if(sA(s))return}catch{}zs(t,"unauthorized-domain")}function sA(t){const e=cp(),{protocol:s,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!eA.test(s))return!1;if(ZT.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA=new Pl(3e4,6e4);function Ny(){const t=vr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function nA(t){return new Promise((e,s)=>{var n,i,a;function o(){Ny(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ny(),s(tr(t,"network-request-failed"))},timeout:rA.get()})}if(!((i=(n=vr().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=vr().gapi)===null||a===void 0)&&a.load)o();else{const l=HC("iframefcb");return vr()[l]=()=>{gapi.load?o():s(tr(t,"network-request-failed"))},Oj(`${WC()}?onload=${l}`).catch(u=>s(u))}}).catch(e=>{throw Qc=null,e})}let Qc=null;function iA(t){return Qc=Qc||nA(t),Qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=new Pl(5e3,15e3),oA="__/auth/iframe",lA="emulator/auth/iframe",cA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dA(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?$f(e,lA):`https://${t.config.authDomain}/${oA}`,n={apiKey:e.apiKey,appName:t.name,v:za},i=uA.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${s}?${Il(n).slice(1)}`}async function hA(t){const e=await iA(t),s=vr().gapi;return ve(s,t,"internal-error"),e.open({where:document.body,url:dA(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cA,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=tr(t,"network-request-failed"),l=vr().setTimeout(()=>{a(o)},aA.get());function u(){vr().clearTimeout(l),i(n)}n.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pA=500,fA=600,xA="_blank",gA="http://localhost";class _y{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yA(t,e,s,n=pA,i=fA){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},mA),{width:n.toString(),height:i.toString(),top:a,left:o}),d=rs().toLowerCase();s&&(l=Pj(d)?xA:s),Aj(d)&&(e=e||gA,u.scrollbars="yes");const h=Object.entries(u).reduce((x,[j,C])=>`${x}${j}=${C},`,"");if(VC(d)&&l!=="_self")return vA(e||"",l),new _y(null);const p=window.open(e||"",l,h);ve(p,t,"popup-blocked");try{p.focus()}catch{}return new _y(p)}function vA(t,e){const s=document.createElement("a");s.href=t,s.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="__/auth/handler",wA="emulator/auth/handler",jA=encodeURIComponent("fac");async function Ey(t,e,s,n,i,a){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:n,v:za,eventId:i};if(e instanceof Kf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",r4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Dl){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${jA}=${encodeURIComponent(u)}`:"";return`${NA(t)}?${Il(l).slice(1)}${d}`}function NA({config:t}){return t.emulator?$f(t,wA):`https://${t.authDomain}/${bA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="webStorageSupport";class _A{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xj,this._completeRedirectFn=QT,this._overrideRedirectResult=GT}async _openPopup(e,s,n,i){var a;Kr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Ey(e,s,n,cp(),i);return yA(e,o,Yf())}async _openRedirect(e,s,n,i){await this._originValidation(e);const a=await Ey(e,s,n,cp(),i);return CT(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(Kr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(e){const s=await hA(e),n=new YT(e);return s.register("authEvent",i=>(ve(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=s,n}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(Oh,{type:Oh},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[Oh];o!==void 0&&s(!!o),zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=tA(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return Vj()||Ij()||Wf()}}const EA=_A;var ky="@firebase/auth",Sy="1.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CA(t){jr(new ir("auth",(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fj(t)},d=new BC(n,i,a,u);return XC(d,s),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,n)=>{e.getProvider("auth-internal").initialize()})),jr(new ir("auth-internal",e=>{const s=sn(e.getProvider("auth").getImmediate());return(n=>new kA(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vs(ky,Sy,SA(t)),Vs(ky,Sy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=5*60,AA=pj("authIdTokenMaxAge")||TA;let Cy=null;const IA=t=>async e=>{const s=e&&await e.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>AA)return;const i=s==null?void 0:s.token;Cy!==i&&(Cy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function PA(t=qf()){const e=Vi(t,"auth");if(e.isInitialized())return e.getImmediate();const s=JC(t,{popupRedirectResolver:EA,persistence:[VT,ET,Xj]}),n=pj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=IA(a.toString());bT(s,o,()=>o(s.currentUser)),vT(s,l=>o(l))}}const i=hj("auth");return i&&ZC(s,`http://${i}`),s}function RA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$C({loadJS(t){return new Promise((e,s)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=tr("internal-error");a.customData=i,s(a)},n.type="text/javascript",n.charset="UTF-8",RA().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CA("Browser");var DA="firebase",LA="10.13.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vs(DA,LA,"app");var Ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mi,a1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,f){function w(){}w.prototype=f.prototype,N.D=f.prototype,N.prototype=new w,N.prototype.constructor=N,N.C=function(E,A,I){for(var k=Array(arguments.length-2),B=2;B<arguments.length;B++)k[B-2]=arguments[B];return f.prototype[A].apply(E,k)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,f,w){w||(w=0);var E=Array(16);if(typeof f=="string")for(var A=0;16>A;++A)E[A]=f.charCodeAt(w++)|f.charCodeAt(w++)<<8|f.charCodeAt(w++)<<16|f.charCodeAt(w++)<<24;else for(A=0;16>A;++A)E[A]=f[w++]|f[w++]<<8|f[w++]<<16|f[w++]<<24;f=N.g[0],w=N.g[1],A=N.g[2];var I=N.g[3],k=f+(I^w&(A^I))+E[0]+3614090360&4294967295;f=w+(k<<7&4294967295|k>>>25),k=I+(A^f&(w^A))+E[1]+3905402710&4294967295,I=f+(k<<12&4294967295|k>>>20),k=A+(w^I&(f^w))+E[2]+606105819&4294967295,A=I+(k<<17&4294967295|k>>>15),k=w+(f^A&(I^f))+E[3]+3250441966&4294967295,w=A+(k<<22&4294967295|k>>>10),k=f+(I^w&(A^I))+E[4]+4118548399&4294967295,f=w+(k<<7&4294967295|k>>>25),k=I+(A^f&(w^A))+E[5]+1200080426&4294967295,I=f+(k<<12&4294967295|k>>>20),k=A+(w^I&(f^w))+E[6]+2821735955&4294967295,A=I+(k<<17&4294967295|k>>>15),k=w+(f^A&(I^f))+E[7]+4249261313&4294967295,w=A+(k<<22&4294967295|k>>>10),k=f+(I^w&(A^I))+E[8]+1770035416&4294967295,f=w+(k<<7&4294967295|k>>>25),k=I+(A^f&(w^A))+E[9]+2336552879&4294967295,I=f+(k<<12&4294967295|k>>>20),k=A+(w^I&(f^w))+E[10]+4294925233&4294967295,A=I+(k<<17&4294967295|k>>>15),k=w+(f^A&(I^f))+E[11]+2304563134&4294967295,w=A+(k<<22&4294967295|k>>>10),k=f+(I^w&(A^I))+E[12]+1804603682&4294967295,f=w+(k<<7&4294967295|k>>>25),k=I+(A^f&(w^A))+E[13]+4254626195&4294967295,I=f+(k<<12&4294967295|k>>>20),k=A+(w^I&(f^w))+E[14]+2792965006&4294967295,A=I+(k<<17&4294967295|k>>>15),k=w+(f^A&(I^f))+E[15]+1236535329&4294967295,w=A+(k<<22&4294967295|k>>>10),k=f+(A^I&(w^A))+E[1]+4129170786&4294967295,f=w+(k<<5&4294967295|k>>>27),k=I+(w^A&(f^w))+E[6]+3225465664&4294967295,I=f+(k<<9&4294967295|k>>>23),k=A+(f^w&(I^f))+E[11]+643717713&4294967295,A=I+(k<<14&4294967295|k>>>18),k=w+(I^f&(A^I))+E[0]+3921069994&4294967295,w=A+(k<<20&4294967295|k>>>12),k=f+(A^I&(w^A))+E[5]+3593408605&4294967295,f=w+(k<<5&4294967295|k>>>27),k=I+(w^A&(f^w))+E[10]+38016083&4294967295,I=f+(k<<9&4294967295|k>>>23),k=A+(f^w&(I^f))+E[15]+3634488961&4294967295,A=I+(k<<14&4294967295|k>>>18),k=w+(I^f&(A^I))+E[4]+3889429448&4294967295,w=A+(k<<20&4294967295|k>>>12),k=f+(A^I&(w^A))+E[9]+568446438&4294967295,f=w+(k<<5&4294967295|k>>>27),k=I+(w^A&(f^w))+E[14]+3275163606&4294967295,I=f+(k<<9&4294967295|k>>>23),k=A+(f^w&(I^f))+E[3]+4107603335&4294967295,A=I+(k<<14&4294967295|k>>>18),k=w+(I^f&(A^I))+E[8]+1163531501&4294967295,w=A+(k<<20&4294967295|k>>>12),k=f+(A^I&(w^A))+E[13]+2850285829&4294967295,f=w+(k<<5&4294967295|k>>>27),k=I+(w^A&(f^w))+E[2]+4243563512&4294967295,I=f+(k<<9&4294967295|k>>>23),k=A+(f^w&(I^f))+E[7]+1735328473&4294967295,A=I+(k<<14&4294967295|k>>>18),k=w+(I^f&(A^I))+E[12]+2368359562&4294967295,w=A+(k<<20&4294967295|k>>>12),k=f+(w^A^I)+E[5]+4294588738&4294967295,f=w+(k<<4&4294967295|k>>>28),k=I+(f^w^A)+E[8]+2272392833&4294967295,I=f+(k<<11&4294967295|k>>>21),k=A+(I^f^w)+E[11]+1839030562&4294967295,A=I+(k<<16&4294967295|k>>>16),k=w+(A^I^f)+E[14]+4259657740&4294967295,w=A+(k<<23&4294967295|k>>>9),k=f+(w^A^I)+E[1]+2763975236&4294967295,f=w+(k<<4&4294967295|k>>>28),k=I+(f^w^A)+E[4]+1272893353&4294967295,I=f+(k<<11&4294967295|k>>>21),k=A+(I^f^w)+E[7]+4139469664&4294967295,A=I+(k<<16&4294967295|k>>>16),k=w+(A^I^f)+E[10]+3200236656&4294967295,w=A+(k<<23&4294967295|k>>>9),k=f+(w^A^I)+E[13]+681279174&4294967295,f=w+(k<<4&4294967295|k>>>28),k=I+(f^w^A)+E[0]+3936430074&4294967295,I=f+(k<<11&4294967295|k>>>21),k=A+(I^f^w)+E[3]+3572445317&4294967295,A=I+(k<<16&4294967295|k>>>16),k=w+(A^I^f)+E[6]+76029189&4294967295,w=A+(k<<23&4294967295|k>>>9),k=f+(w^A^I)+E[9]+3654602809&4294967295,f=w+(k<<4&4294967295|k>>>28),k=I+(f^w^A)+E[12]+3873151461&4294967295,I=f+(k<<11&4294967295|k>>>21),k=A+(I^f^w)+E[15]+530742520&4294967295,A=I+(k<<16&4294967295|k>>>16),k=w+(A^I^f)+E[2]+3299628645&4294967295,w=A+(k<<23&4294967295|k>>>9),k=f+(A^(w|~I))+E[0]+4096336452&4294967295,f=w+(k<<6&4294967295|k>>>26),k=I+(w^(f|~A))+E[7]+1126891415&4294967295,I=f+(k<<10&4294967295|k>>>22),k=A+(f^(I|~w))+E[14]+2878612391&4294967295,A=I+(k<<15&4294967295|k>>>17),k=w+(I^(A|~f))+E[5]+4237533241&4294967295,w=A+(k<<21&4294967295|k>>>11),k=f+(A^(w|~I))+E[12]+1700485571&4294967295,f=w+(k<<6&4294967295|k>>>26),k=I+(w^(f|~A))+E[3]+2399980690&4294967295,I=f+(k<<10&4294967295|k>>>22),k=A+(f^(I|~w))+E[10]+4293915773&4294967295,A=I+(k<<15&4294967295|k>>>17),k=w+(I^(A|~f))+E[1]+2240044497&4294967295,w=A+(k<<21&4294967295|k>>>11),k=f+(A^(w|~I))+E[8]+1873313359&4294967295,f=w+(k<<6&4294967295|k>>>26),k=I+(w^(f|~A))+E[15]+4264355552&4294967295,I=f+(k<<10&4294967295|k>>>22),k=A+(f^(I|~w))+E[6]+2734768916&4294967295,A=I+(k<<15&4294967295|k>>>17),k=w+(I^(A|~f))+E[13]+1309151649&4294967295,w=A+(k<<21&4294967295|k>>>11),k=f+(A^(w|~I))+E[4]+4149444226&4294967295,f=w+(k<<6&4294967295|k>>>26),k=I+(w^(f|~A))+E[11]+3174756917&4294967295,I=f+(k<<10&4294967295|k>>>22),k=A+(f^(I|~w))+E[2]+718787259&4294967295,A=I+(k<<15&4294967295|k>>>17),k=w+(I^(A|~f))+E[9]+3951481745&4294967295,N.g[0]=N.g[0]+f&4294967295,N.g[1]=N.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,N.g[2]=N.g[2]+A&4294967295,N.g[3]=N.g[3]+I&4294967295}n.prototype.u=function(N,f){f===void 0&&(f=N.length);for(var w=f-this.blockSize,E=this.B,A=this.h,I=0;I<f;){if(A==0)for(;I<=w;)i(this,N,I),I+=this.blockSize;if(typeof N=="string"){for(;I<f;)if(E[A++]=N.charCodeAt(I++),A==this.blockSize){i(this,E),A=0;break}}else for(;I<f;)if(E[A++]=N[I++],A==this.blockSize){i(this,E),A=0;break}}this.h=A,this.o+=f},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var f=1;f<N.length-8;++f)N[f]=0;var w=8*this.o;for(f=N.length-8;f<N.length;++f)N[f]=w&255,w/=256;for(this.u(N),N=Array(16),f=w=0;4>f;++f)for(var E=0;32>E;E+=8)N[w++]=this.g[f]>>>E&255;return N};function a(N,f){var w=l;return Object.prototype.hasOwnProperty.call(w,N)?w[N]:w[N]=f(N)}function o(N,f){this.h=f;for(var w=[],E=!0,A=N.length-1;0<=A;A--){var I=N[A]|0;E&&I==f||(w[A]=I,E=!1)}this.g=w}var l={};function u(N){return-128<=N&&128>N?a(N,function(f){return new o([f|0],0>f?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return S(d(-N));for(var f=[],w=1,E=0;N>=w;E++)f[E]=N/w|0,w*=4294967296;return new o(f,0)}function h(N,f){if(N.length==0)throw Error("number format error: empty string");if(f=f||10,2>f||36<f)throw Error("radix out of range: "+f);if(N.charAt(0)=="-")return S(h(N.substring(1),f));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=d(Math.pow(f,8)),E=p,A=0;A<N.length;A+=8){var I=Math.min(8,N.length-A),k=parseInt(N.substring(A,A+I),f);8>I?(I=d(Math.pow(f,I)),E=E.j(I).add(d(k))):(E=E.j(w),E=E.add(d(k)))}return E}var p=u(0),x=u(1),j=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var N=0,f=1,w=0;w<this.g.length;w++){var E=this.i(w);N+=(0<=E?E:4294967296+E)*f,f*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(C(this))return"0";if(R(this))return"-"+S(this).toString(N);for(var f=d(Math.pow(N,6)),w=this,E="";;){var A=P(w,f).g;w=y(w,A.j(f));var I=((0<w.g.length?w.g[0]:w.h)>>>0).toString(N);if(w=A,C(w))return I+E;for(;6>I.length;)I="0"+I;E=I+E}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function C(N){if(N.h!=0)return!1;for(var f=0;f<N.g.length;f++)if(N.g[f]!=0)return!1;return!0}function R(N){return N.h==-1}t.l=function(N){return N=y(this,N),R(N)?-1:C(N)?0:1};function S(N){for(var f=N.g.length,w=[],E=0;E<f;E++)w[E]=~N.g[E];return new o(w,~N.h).add(x)}t.abs=function(){return R(this)?S(this):this},t.add=function(N){for(var f=Math.max(this.g.length,N.g.length),w=[],E=0,A=0;A<=f;A++){var I=E+(this.i(A)&65535)+(N.i(A)&65535),k=(I>>>16)+(this.i(A)>>>16)+(N.i(A)>>>16);E=k>>>16,I&=65535,k&=65535,w[A]=k<<16|I}return new o(w,w[w.length-1]&-2147483648?-1:0)};function y(N,f){return N.add(S(f))}t.j=function(N){if(C(this)||C(N))return p;if(R(this))return R(N)?S(this).j(S(N)):S(S(this).j(N));if(R(N))return S(this.j(S(N)));if(0>this.l(j)&&0>N.l(j))return d(this.m()*N.m());for(var f=this.g.length+N.g.length,w=[],E=0;E<2*f;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var A=0;A<N.g.length;A++){var I=this.i(E)>>>16,k=this.i(E)&65535,B=N.i(A)>>>16,$=N.i(A)&65535;w[2*E+2*A]+=k*$,v(w,2*E+2*A),w[2*E+2*A+1]+=I*$,v(w,2*E+2*A+1),w[2*E+2*A+1]+=k*B,v(w,2*E+2*A+1),w[2*E+2*A+2]+=I*B,v(w,2*E+2*A+2)}for(E=0;E<f;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=f;E<2*f;E++)w[E]=0;return new o(w,0)};function v(N,f){for(;(N[f]&65535)!=N[f];)N[f+1]+=N[f]>>>16,N[f]&=65535,f++}function _(N,f){this.g=N,this.h=f}function P(N,f){if(C(f))throw Error("division by zero");if(C(N))return new _(p,p);if(R(N))return f=P(S(N),f),new _(S(f.g),S(f.h));if(R(f))return f=P(N,S(f)),new _(S(f.g),f.h);if(30<N.g.length){if(R(N)||R(f))throw Error("slowDivide_ only works with positive integers.");for(var w=x,E=f;0>=E.l(N);)w=L(w),E=L(E);var A=M(w,1),I=M(E,1);for(E=M(E,2),w=M(w,2);!C(E);){var k=I.add(E);0>=k.l(N)&&(A=A.add(w),I=k),E=M(E,1),w=M(w,1)}return f=y(N,A.j(f)),new _(A,f)}for(A=p;0<=N.l(f);){for(w=Math.max(1,Math.floor(N.m()/f.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),I=d(w),k=I.j(f);R(k)||0<k.l(N);)w-=E,I=d(w),k=I.j(f);C(I)&&(I=x),A=A.add(I),N=y(N,k)}return new _(A,N)}t.A=function(N){return P(this,N).h},t.and=function(N){for(var f=Math.max(this.g.length,N.g.length),w=[],E=0;E<f;E++)w[E]=this.i(E)&N.i(E);return new o(w,this.h&N.h)},t.or=function(N){for(var f=Math.max(this.g.length,N.g.length),w=[],E=0;E<f;E++)w[E]=this.i(E)|N.i(E);return new o(w,this.h|N.h)},t.xor=function(N){for(var f=Math.max(this.g.length,N.g.length),w=[],E=0;E<f;E++)w[E]=this.i(E)^N.i(E);return new o(w,this.h^N.h)};function L(N){for(var f=N.g.length+1,w=[],E=0;E<f;E++)w[E]=N.i(E)<<1|N.i(E-1)>>>31;return new o(w,N.h)}function M(N,f){var w=f>>5;f%=32;for(var E=N.g.length-w,A=[],I=0;I<E;I++)A[I]=0<f?N.i(I+w)>>>f|N.i(I+w+1)<<32-f:N.i(I+w);return new o(A,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,a1=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,mi=o}).apply(typeof Ty<"u"?Ty:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var o1,l1,_o,c1,Kc,mp,u1,d1,h1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,g){return c==Array.prototype||c==Object.prototype||(c[m]=g.value),c};function s(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var m=0;m<c.length;++m){var g=c[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var n=s(this);function i(c,m){if(m)e:{var g=n;c=c.split(".");for(var T=0;T<c.length-1;T++){var q=c[T];if(!(q in g))break e;g=g[q]}c=c[c.length-1],T=g[c],m=m(T),m!=T&&m!=null&&e(g,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var g=0,T=!1,q={next:function(){if(!T&&g<c.length){var G=g++;return{value:m(G,c[G]),done:!1}}return T=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(c){return c||function(){return a(this,function(m,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function d(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,g){return c.call.apply(c.bind,arguments)}function p(c,m,g){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,T),c.apply(m,q)}}return function(){return c.apply(m,arguments)}}function x(c,m,g){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,x.apply(null,arguments)}function j(c,m){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function C(c,m){function g(){}g.prototype=m.prototype,c.aa=m.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(T,q,G){for(var ie=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)ie[Ge-2]=arguments[Ge];return m.prototype[q].apply(T,ie)}}function R(c){const m=c.length;if(0<m){const g=Array(m);for(let T=0;T<m;T++)g[T]=c[T];return g}return[]}function S(c,m){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(u(T)){const q=c.length||0,G=T.length||0;c.length=q+G;for(let ie=0;ie<G;ie++)c[q+ie]=T[ie]}else c.push(T)}}class y{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function v(c){return/^[\s\xa0]*$/.test(c)}function _(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var L=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(c,m,g){for(const T in c)m.call(g,c[T],T,c)}function N(c,m){for(const g in c)m.call(void 0,c[g],g,c)}function f(c){const m={};for(const g in c)m[g]=c[g];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,m){let g,T;for(let q=1;q<arguments.length;q++){T=arguments[q];for(g in T)c[g]=T[g];for(let G=0;G<w.length;G++)g=w[G],Object.prototype.hasOwnProperty.call(T,g)&&(c[g]=T[g])}}function A(c){var m=1;c=c.split(":");const g=[];for(;0<m&&c.length;)g.push(c.shift()),m--;return c.length&&g.push(c.join(":")),g}function I(c){l.setTimeout(()=>{throw c},0)}function k(){var c=re;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class B{constructor(){this.h=this.g=null}add(m,g){const T=$.get();T.set(m,g),this.h?this.h.next=T:this.g=T,this.h=T}}var $=new y(()=>new H,c=>c.reset());class H{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,F=!1,re=new B,V=()=>{const c=l.Promise.resolve(void 0);O=()=>{c.then(U)}};var U=()=>{for(var c;c=k();){try{c.h.call(c.g)}catch(g){I(g)}var m=$;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}F=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};l.addEventListener("test",g,m),l.removeEventListener("test",g,m)}catch{}return c}();function _e(c,m){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(L){e:{try{P(m.nodeName);var q=!0;break e}catch{}q=!1}q||(m=null)}}else g=="mouseover"?m=c.fromElement:g=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ee[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&_e.aa.h.call(this)}}C(_e,oe);var ee={2:"touch",3:"pen",4:"mouse"};_e.prototype.h=function(){_e.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var J="closure_listenable_"+(1e6*Math.random()|0),ae=0;function Ee(c,m,g,T,q){this.listener=c,this.proxy=null,this.src=m,this.type=g,this.capture=!!T,this.ha=q,this.key=++ae,this.da=this.fa=!1}function Ae(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function De(c){this.src=c,this.g={},this.h=0}De.prototype.add=function(c,m,g,T,q){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var ie=Fe(c,m,T,q);return-1<ie?(m=c[ie],g||(m.fa=!1)):(m=new Ee(m,this.src,G,!!T,q),m.fa=g,c.push(m)),m};function ke(c,m){var g=m.type;if(g in c.g){var T=c.g[g],q=Array.prototype.indexOf.call(T,m,void 0),G;(G=0<=q)&&Array.prototype.splice.call(T,q,1),G&&(Ae(m),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Fe(c,m,g,T){for(var q=0;q<c.length;++q){var G=c[q];if(!G.da&&G.listener==m&&G.capture==!!g&&G.ha==T)return q}return-1}var Gt="closure_lm_"+(1e6*Math.random()|0),Z={};function mt(c,m,g,T,q){if(Array.isArray(m)){for(var G=0;G<m.length;G++)mt(c,m[G],g,T,q);return null}return g=ye(g),c&&c[J]?c.K(m,g,d(T)?!!T.capture:!!T,q):$e(c,m,g,!1,T,q)}function $e(c,m,g,T,q,G){if(!m)throw Error("Invalid event type");var ie=d(q)?!!q.capture:!!q,Ge=Me(c);if(Ge||(c[Gt]=Ge=new De(c)),g=Ge.add(m,g,T,ie,G),g.proxy)return g;if(T=Ct(),g.proxy=T,T.src=c,T.listener=g,c.addEventListener)me||(q=ie),q===void 0&&(q=!1),c.addEventListener(m.toString(),T,q);else if(c.attachEvent)c.attachEvent(fe(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Ct(){function c(g){return m.call(c.src,c.listener,g)}const m=Ie;return c}function Qe(c,m,g,T,q){if(Array.isArray(m))for(var G=0;G<m.length;G++)Qe(c,m[G],g,T,q);else T=d(T)?!!T.capture:!!T,g=ye(g),c&&c[J]?(c=c.i,m=String(m).toString(),m in c.g&&(G=c.g[m],g=Fe(G,g,T,q),-1<g&&(Ae(G[g]),Array.prototype.splice.call(G,g,1),G.length==0&&(delete c.g[m],c.h--)))):c&&(c=Me(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Fe(m,g,T,q)),(g=-1<c?m[c]:null)&&W(g))}function W(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[J])ke(m.i,c);else{var g=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(g,T,c.capture):m.detachEvent?m.detachEvent(fe(g),T):m.addListener&&m.removeListener&&m.removeListener(T),(g=Me(m))?(ke(g,c),g.h==0&&(g.src=null,m[Gt]=null)):Ae(c)}}}function fe(c){return c in Z?Z[c]:Z[c]="on"+c}function Ie(c,m){if(c.da)c=!0;else{m=new _e(m,this);var g=c.listener,T=c.ha||c.src;c.fa&&W(c),c=g.call(T,m)}return c}function Me(c){return c=c[Gt],c instanceof De?c:null}var Ke="__closure_events_fn_"+(1e9*Math.random()>>>0);function ye(c){return typeof c=="function"?c:(c[Ke]||(c[Ke]=function(m){return c.handleEvent(m)}),c[Ke])}function de(){X.call(this),this.i=new De(this),this.M=this,this.F=null}C(de,X),de.prototype[J]=!0,de.prototype.removeEventListener=function(c,m,g,T){Qe(this,c,m,g,T)};function Ze(c,m){var g,T=c.F;if(T)for(g=[];T;T=T.F)g.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new oe(m,c);else if(m instanceof oe)m.target=m.target||c;else{var q=m;m=new oe(T,c),E(m,q)}if(q=!0,g)for(var G=g.length-1;0<=G;G--){var ie=m.g=g[G];q=_r(ie,T,!0,m)&&q}if(ie=m.g=c,q=_r(ie,T,!0,m)&&q,q=_r(ie,T,!1,m)&&q,g)for(G=0;G<g.length;G++)ie=m.g=g[G],q=_r(ie,T,!1,m)&&q}de.prototype.N=function(){if(de.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var g=c.g[m],T=0;T<g.length;T++)Ae(g[T]);delete c.g[m],c.h--}}this.F=null},de.prototype.K=function(c,m,g,T){return this.i.add(String(c),m,!1,g,T)},de.prototype.L=function(c,m,g,T){return this.i.add(String(c),m,!0,g,T)};function _r(c,m,g,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var q=!0,G=0;G<m.length;++G){var ie=m[G];if(ie&&!ie.da&&ie.capture==g){var Ge=ie.listener,Mt=ie.ha||ie.src;ie.fa&&ke(c.i,ie),q=Ge.call(Mt,T)!==!1&&q}}return q&&!T.defaultPrevented}function Qn(c,m,g){if(typeof c=="function")g&&(c=x(c,g));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(c,m||0)}function Er(c){c.g=Qn(()=>{c.g=null,c.i&&(c.i=!1,Er(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class zi extends X{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(c){X.call(this),this.h=c,this.g={}}C(Kn,X);var Hl=[];function Qa(c){M(c.g,function(m,g){this.g.hasOwnProperty(g)&&W(m)},c),c.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),Qa(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bi=l.JSON.stringify,Wd=l.JSON.parse,Hd=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function $i(){}$i.prototype.h=null;function Gi(c){return c.h||(c.h=c.i())}function Ql(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ka(){oe.call(this,"d")}C(Ka,oe);function Ya(){oe.call(this,"c")}C(Ya,oe);var kr={},Kl=null;function nn(){return Kl=Kl||new de}kr.La="serverreachability";function Ps(c){oe.call(this,kr.La,c)}C(Ps,oe);function z(c){const m=nn();Ze(m,new Ps(m))}kr.STAT_EVENT="statevent";function ce(c,m){oe.call(this,kr.STAT_EVENT,c),this.stat=m}C(ce,oe);function ge(c){const m=nn();Ze(m,new ce(m,c))}kr.Ma="timingevent";function Nt(c,m){oe.call(this,kr.Ma,c),this.size=m}C(Nt,oe);function $s(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},m)}function Ja(){this.g=!0}Ja.prototype.xa=function(){this.g=!1};function q2(c,m,g,T,q,G){c.info(function(){if(c.g)if(G)for(var ie="",Ge=G.split("&"),Mt=0;Mt<Ge.length;Mt++){var qe=Ge[Mt].split("=");if(1<qe.length){var Wt=qe[0];qe=qe[1];var Ht=Wt.split("_");ie=2<=Ht.length&&Ht[1]=="type"?ie+(Wt+"="+qe+"&"):ie+(Wt+"=redacted&")}}else ie=null;else ie=G;return"XMLHTTP REQ ("+T+") [attempt "+q+"]: "+m+`
`+g+`
`+ie})}function U2(c,m,g,T,q,G,ie){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+q+"]: "+m+`
`+g+`
`+G+" "+ie})}function Wi(c,m,g,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+B2(c,g)+(T?" "+T:"")})}function z2(c,m){c.info(function(){return"TIMEOUT: "+m})}Ja.prototype.info=function(){};function B2(c,m){if(!c.g)return m;if(!m)return null;try{var g=JSON.parse(m);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var T=g[c];if(!(2>T.length)){var q=T[1];if(Array.isArray(q)&&!(1>q.length)){var G=q[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ie=1;ie<q.length;ie++)q[ie]=""}}}}return Bi(g)}catch{return m}}var Yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kx={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qd;function Jl(){}C(Jl,$i),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Qd=new Jl;function an(c,m,g,T){this.j=c,this.i=m,this.l=g,this.R=T||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yx}function Yx(){this.i=null,this.g="",this.h=!1}var Jx={},Kd={};function Yd(c,m,g){c.L=1,c.v=tc(Sr(m)),c.m=g,c.P=!0,Xx(c,null)}function Xx(c,m){c.F=Date.now(),Xl(c),c.A=Sr(c.v);var g=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),hg(g.i,"t",T),c.C=0,g=c.j.J,c.h=new Yx,c.g=Ag(c.j,g?m:null,!c.m),0<c.O&&(c.M=new zi(x(c.Y,c,c.g),c.O)),m=c.U,g=c.g,T=c.ca;var q="readystatechange";Array.isArray(q)||(q&&(Hl[0]=q.toString()),q=Hl);for(var G=0;G<q.length;G++){var ie=mt(g,q[G],T||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=c.H?f(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),z(),q2(c.i,c.u,c.A,c.l,c.R,c.m)}an.prototype.ca=function(c){c=c.target;const m=this.M;m&&Cr(c)==3?m.j():this.Y(c)},an.prototype.Y=function(c){try{if(c==this.g)e:{const Ht=Cr(this.g);var m=this.g.Ba();const Ki=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||vg(this.g)))){this.J||Ht!=4||m==7||(m==8||0>=Ki?z(3):z(2)),Jd(this);var g=this.g.Z();this.X=g;t:if(Zx(this)){var T=vg(this.g);c="";var q=T.length,G=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),Xa(this);var ie="";break t}this.h.i=new l.TextDecoder}for(m=0;m<q;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(G&&m==q-1)});T.length=0,this.h.g+=c,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=g==200,U2(this.i,this.u,this.A,this.l,this.R,Ht,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Mt=this.g;if((Ge=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ge)){var qe=Ge;break t}}qe=null}if(g=qe)Wi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xd(this,g);else{this.o=!1,this.s=3,ge(12),Jn(this),Xa(this);break e}}if(this.P){g=!0;let Gs;for(;!this.J&&this.C<ie.length;)if(Gs=$2(this,ie),Gs==Kd){Ht==4&&(this.s=4,ge(14),g=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Gs==Jx){this.s=4,ge(15),Wi(this.i,this.l,ie,"[Invalid Chunk]"),g=!1;break}else Wi(this.i,this.l,Gs,null),Xd(this,Gs);if(Zx(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||ie.length!=0||this.h.h||(this.s=1,ge(16),g=!1),this.o=this.o&&g,!g)Wi(this.i,this.l,ie,"[Invalid Chunked Response]"),Jn(this),Xa(this);else if(0<ie.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),nh(Wt),Wt.M=!0,ge(11))}}else Wi(this.i,this.l,ie,null),Xd(this,ie);Ht==4&&Jn(this),this.o&&!this.J&&(Ht==4?kg(this.j,this):(this.o=!1,Xl(this)))}else o_(this.g),g==400&&0<ie.indexOf("Unknown SID")?(this.s=3,ge(12)):(this.s=0,ge(13)),Jn(this),Xa(this)}}}catch{}finally{}};function Zx(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function $2(c,m){var g=c.C,T=m.indexOf(`
`,g);return T==-1?Kd:(g=Number(m.substring(g,T)),isNaN(g)?Jx:(T+=1,T+g>m.length?Kd:(m=m.slice(T,T+g),c.C=T+g,m)))}an.prototype.cancel=function(){this.J=!0,Jn(this)};function Xl(c){c.S=Date.now()+c.I,eg(c,c.I)}function eg(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=$s(x(c.ba,c),m)}function Jd(c){c.B&&(l.clearTimeout(c.B),c.B=null)}an.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(z2(this.i,this.A),this.L!=2&&(z(),ge(17)),Jn(this),this.s=2,Xa(this)):eg(this,this.S-c)};function Xa(c){c.j.G==0||c.J||kg(c.j,c)}function Jn(c){Jd(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Qa(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function Xd(c,m){try{var g=c.j;if(g.G!=0&&(g.g==c||Zd(g.h,c))){if(!c.K&&Zd(g.h,c)&&g.G==3){try{var T=g.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var q=T;if(q[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)ac(g),nc(g);else break e;rh(g),ge(18)}}else g.za=q[1],0<g.za-g.T&&37500>q[2]&&g.F&&g.v==0&&!g.C&&(g.C=$s(x(g.Za,g),6e3));if(1>=rg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Zn(g,11)}else if((c.K||g.g==c)&&ac(g),!v(m))for(q=g.Da.g.parse(m),m=0;m<q.length;m++){let qe=q[m];if(g.T=qe[0],qe=qe[1],g.G==2)if(qe[0]=="c"){g.K=qe[1],g.ia=qe[2];const Wt=qe[3];Wt!=null&&(g.la=Wt,g.j.info("VER="+g.la));const Ht=qe[4];Ht!=null&&(g.Aa=Ht,g.j.info("SVER="+g.Aa));const Ki=qe[5];Ki!=null&&typeof Ki=="number"&&0<Ki&&(T=1.5*Ki,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const Gs=c.g;if(Gs){const lc=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lc){var G=T.h;G.g||lc.indexOf("spdy")==-1&&lc.indexOf("quic")==-1&&lc.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(eh(G,G.h),G.h=null))}if(T.D){const ih=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;ih&&(T.ya=ih,et(T.I,T.D,ih))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var ie=c;if(T.qa=Tg(T,T.J?T.ia:null,T.W),ie.K){ng(T.h,ie);var Ge=ie,Mt=T.L;Mt&&(Ge.I=Mt),Ge.B&&(Jd(Ge),Xl(Ge)),T.g=ie}else _g(T);0<g.i.length&&ic(g)}else qe[0]!="stop"&&qe[0]!="close"||Zn(g,7);else g.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Zn(g,7):sh(g):qe[0]!="noop"&&g.l&&g.l.ta(qe),g.v=0)}}z(4)}catch{}}var G2=class{constructor(c,m){this.g=c,this.map=m}};function tg(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sg(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function rg(c){return c.h?1:c.g?c.g.size:0}function Zd(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function eh(c,m){c.g?c.g.add(m):c.h=m}function ng(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}tg.prototype.cancel=function(){if(this.i=ig(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ig(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const g of c.g.values())m=m.concat(g.D);return m}return R(c.i)}function W2(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var m=[],g=c.length,T=0;T<g;T++)m.push(c[T]);return m}m=[],g=0;for(T in c)m[g++]=c[T];return m}function H2(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var m=[];c=c.length;for(var g=0;g<c;g++)m.push(g);return m}m=[],g=0;for(const T in c)m[g++]=T;return m}}}function ag(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var g=H2(c),T=W2(c),q=T.length,G=0;G<q;G++)m.call(void 0,T[G],g&&g[G],c)}var og=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Q2(c,m){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var T=c[g].indexOf("="),q=null;if(0<=T){var G=c[g].substring(0,T);q=c[g].substring(T+1)}else G=c[g];m(G,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Xn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xn){this.h=c.h,Zl(this,c.j),this.o=c.o,this.g=c.g,ec(this,c.s),this.l=c.l;var m=c.i,g=new to;g.i=m.i,m.g&&(g.g=new Map(m.g),g.h=m.h),lg(this,g),this.m=c.m}else c&&(m=String(c).match(og))?(this.h=!1,Zl(this,m[1]||"",!0),this.o=Za(m[2]||""),this.g=Za(m[3]||"",!0),ec(this,m[4]),this.l=Za(m[5]||"",!0),lg(this,m[6]||"",!0),this.m=Za(m[7]||"")):(this.h=!1,this.i=new to(null,this.h))}Xn.prototype.toString=function(){var c=[],m=this.j;m&&c.push(eo(m,cg,!0),":");var g=this.g;return(g||m=="file")&&(c.push("//"),(m=this.o)&&c.push(eo(m,cg,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(eo(g,g.charAt(0)=="/"?J2:Y2,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",eo(g,Z2)),c.join("")};function Sr(c){return new Xn(c)}function Zl(c,m,g){c.j=g?Za(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ec(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function lg(c,m,g){m instanceof to?(c.i=m,e_(c.i,c.h)):(g||(m=eo(m,X2)),c.i=new to(m,c.h))}function et(c,m,g){c.i.set(m,g)}function tc(c){return et(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Za(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function eo(c,m,g){return typeof c=="string"?(c=encodeURI(c).replace(m,K2),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function K2(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var cg=/[#\/\?@]/g,Y2=/[#\?:]/g,J2=/[#\?]/g,X2=/[#\?@]/g,Z2=/#/g;function to(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function on(c){c.g||(c.g=new Map,c.h=0,c.i&&Q2(c.i,function(m,g){c.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=to.prototype,t.add=function(c,m){on(this),this.i=null,c=Hi(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(m),this.h+=1,this};function ug(c,m){on(c),m=Hi(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function dg(c,m){return on(c),m=Hi(c,m),c.g.has(m)}t.forEach=function(c,m){on(this),this.g.forEach(function(g,T){g.forEach(function(q){c.call(m,q,T,this)},this)},this)},t.na=function(){on(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),g=[];for(let T=0;T<m.length;T++){const q=c[T];for(let G=0;G<q.length;G++)g.push(m[T])}return g},t.V=function(c){on(this);let m=[];if(typeof c=="string")dg(this,c)&&(m=m.concat(this.g.get(Hi(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)m=m.concat(c[g])}return m},t.set=function(c,m){return on(this),this.i=null,c=Hi(this,c),dg(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function hg(c,m,g){ug(c,m),0<g.length&&(c.i=null,c.g.set(Hi(c,m),R(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var g=0;g<m.length;g++){var T=m[g];const G=encodeURIComponent(String(T)),ie=this.V(T);for(T=0;T<ie.length;T++){var q=G;ie[T]!==""&&(q+="="+encodeURIComponent(String(ie[T]))),c.push(q)}}return this.i=c.join("&")};function Hi(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function e_(c,m){m&&!c.j&&(on(c),c.i=null,c.g.forEach(function(g,T){var q=T.toLowerCase();T!=q&&(ug(this,T),hg(this,q,g))},c)),c.j=m}function t_(c,m){const g=new Ja;if(l.Image){const T=new Image;T.onload=j(ln,g,"TestLoadImage: loaded",!0,m,T),T.onerror=j(ln,g,"TestLoadImage: error",!1,m,T),T.onabort=j(ln,g,"TestLoadImage: abort",!1,m,T),T.ontimeout=j(ln,g,"TestLoadImage: timeout",!1,m,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function s_(c,m){const g=new Ja,T=new AbortController,q=setTimeout(()=>{T.abort(),ln(g,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(G=>{clearTimeout(q),G.ok?ln(g,"TestPingServer: ok",!0,m):ln(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(q),ln(g,"TestPingServer: error",!1,m)})}function ln(c,m,g,T,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),T(g)}catch{}}function r_(){this.g=new Hd}function n_(c,m,g){const T=g||"";try{ag(c,function(q,G){let ie=q;d(q)&&(ie=Bi(q)),m.push(T+G+"="+encodeURIComponent(ie))})}catch(q){throw m.push(T+"type="+encodeURIComponent("_badmap")),q}}function so(c){this.l=c.Ub||null,this.j=c.eb||!1}C(so,$i),so.prototype.g=function(){return new sc(this.l,this.j)},so.prototype.i=function(c){return function(){return c}}({});function sc(c,m){de.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(sc,de),t=sc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,no(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ro(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,no(this)),this.g&&(this.readyState=3,no(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mg(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function mg(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?ro(this):no(this),this.readyState==3&&mg(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ro(this))},t.Qa=function(c){this.g&&(this.response=c,ro(this))},t.ga=function(){this.g&&ro(this)};function ro(c){c.readyState=4,c.l=null,c.j=null,c.v=null,no(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=m.next();return c.join(`\r
`)};function no(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pg(c){let m="";return M(c,function(g,T){m+=T,m+=":",m+=g,m+=`\r
`}),m}function th(c,m,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=pg(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):et(c,m,g))}function pt(c){de.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(pt,de);var i_=/^https?$/i,a_=["POST","PUT"];t=pt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qd.g(),this.v=this.o?Gi(this.o):Gi(Qd),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(G){fg(this,G);return}if(c=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var q in T)g.set(q,T[q]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const G of T.keys())g.set(G,T.get(G));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(G=>G.toLowerCase()=="content-type"),q=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(a_,m,void 0))||T||q||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ie]of g)this.g.setRequestHeader(G,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yg(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){fg(this,G)}};function fg(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,xg(c),rc(c)}function xg(c){c.A||(c.A=!0,Ze(c,"complete"),Ze(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ze(this,"complete"),Ze(this,"abort"),rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rc(this,!0)),pt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gg(this):this.bb())},t.bb=function(){gg(this)};function gg(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Cr(c)!=4||c.Z()!=2)){if(c.u&&Cr(c)==4)Qn(c.Ea,0,c);else if(Ze(c,"readystatechange"),Cr(c)==4){c.h=!1;try{const ie=c.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var T;if(T=ie===0){var q=String(c.D).match(og)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),T=!i_.test(q?q.toLowerCase():"")}g=T}if(g)Ze(c,"complete"),Ze(c,"success");else{c.m=6;try{var G=2<Cr(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",xg(c)}}finally{rc(c)}}}}function rc(c,m){if(c.g){yg(c);const g=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Ze(c,"ready");try{g.onreadystatechange=T}catch{}}}function yg(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Cr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Wd(m)}};function vg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function o_(c){const m={};c=(c.g&&2<=Cr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(v(c[T]))continue;var g=A(c[T]);const q=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const G=m[q]||[];m[q]=G,G.push(g)}N(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function io(c,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||m}function bg(c){this.Aa=0,this.i=[],this.j=new Ja,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=io("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=io("baseRetryDelayMs",5e3,c),this.cb=io("retryDelaySeedMs",1e4,c),this.Wa=io("forwardChannelMaxRetries",2,c),this.wa=io("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tg(c&&c.concurrentRequestLimit),this.Da=new r_,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bg.prototype,t.la=8,t.G=1,t.connect=function(c,m,g,T){ge(0),this.W=c,this.H=m||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Tg(this,null,this.W),ic(this)};function sh(c){if(wg(c),c.G==3){var m=c.U++,g=Sr(c.I);if(et(g,"SID",c.K),et(g,"RID",m),et(g,"TYPE","terminate"),ao(c,g),m=new an(c,c.j,m),m.L=2,m.v=tc(Sr(g)),g=!1,l.navigator&&l.navigator.sendBeacon)try{g=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!g&&l.Image&&(new Image().src=m.v,g=!0),g||(m.g=Ag(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Xl(m)}Cg(c)}function nc(c){c.g&&(nh(c),c.g.cancel(),c.g=null)}function wg(c){nc(c),c.u&&(l.clearTimeout(c.u),c.u=null),ac(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function ic(c){if(!sg(c.h)&&!c.s){c.s=!0;var m=c.Ga;O||V(),F||(O(),F=!0),re.add(m,c),c.B=0}}function l_(c,m){return rg(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=$s(x(c.Ga,c,m),Sg(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const q=new an(this,this.j,c);let G=this.o;if(this.S&&(G?(G=f(G),E(G,this.S)):G=this.S),this.m!==null||this.O||(q.H=G,G=null),this.P)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=Ng(this,q,m),g=Sr(this.I),et(g,"RID",c),et(g,"CVER",22),this.D&&et(g,"X-HTTP-Session-Id",this.D),ao(this,g),G&&(this.O?m="headers="+encodeURIComponent(String(pg(G)))+"&"+m:this.m&&th(g,this.m,G)),eh(this.h,q),this.Ua&&et(g,"TYPE","init"),this.P?(et(g,"$req",m),et(g,"SID","null"),q.T=!0,Yd(q,g,null)):Yd(q,g,m),this.G=2}}else this.G==3&&(c?jg(this,c):this.i.length==0||sg(this.h)||jg(this))};function jg(c,m){var g;m?g=m.l:g=c.U++;const T=Sr(c.I);et(T,"SID",c.K),et(T,"RID",g),et(T,"AID",c.T),ao(c,T),c.m&&c.o&&th(T,c.m,c.o),g=new an(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),m&&(c.i=m.D.concat(c.i)),m=Ng(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),eh(c.h,g),Yd(g,T,m)}function ao(c,m){c.H&&M(c.H,function(g,T){et(m,T,g)}),c.l&&ag({},function(g,T){et(m,T,g)})}function Ng(c,m,g){g=Math.min(c.i.length,g);var T=c.l?x(c.l.Na,c.l,c):null;e:{var q=c.i;let G=-1;for(;;){const ie=["count="+g];G==-1?0<g?(G=q[0].g,ie.push("ofs="+G)):G=0:ie.push("ofs="+G);let Ge=!0;for(let Mt=0;Mt<g;Mt++){let qe=q[Mt].g;const Wt=q[Mt].map;if(qe-=G,0>qe)G=Math.max(0,q[Mt].g-100),Ge=!1;else try{n_(Wt,ie,"req"+qe+"_")}catch{T&&T(Wt)}}if(Ge){T=ie.join("&");break e}}}return c=c.i.splice(0,g),m.D=c,T}function _g(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;O||V(),F||(O(),F=!0),re.add(m,c),c.v=0}}function rh(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=$s(x(c.Fa,c),Sg(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Eg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=$s(x(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ge(10),nc(this),Eg(this))};function nh(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Eg(c){c.g=new an(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=Sr(c.qa);et(m,"RID","rpc"),et(m,"SID",c.K),et(m,"AID",c.T),et(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&et(m,"TO",c.ja),et(m,"TYPE","xmlhttp"),ao(c,m),c.m&&c.o&&th(m,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=tc(Sr(m)),g.m=null,g.P=!0,Xx(g,c)}t.Za=function(){this.C!=null&&(this.C=null,nc(this),rh(this),ge(19))};function ac(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function kg(c,m){var g=null;if(c.g==m){ac(c),nh(c),c.g=null;var T=2}else if(Zd(c.h,m))g=m.D,ng(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){g=m.m?m.m.length:0,m=Date.now()-m.F;var q=c.B;T=nn(),Ze(T,new Nt(T,g)),ic(c)}else _g(c);else if(q=m.s,q==3||q==0&&0<m.X||!(T==1&&l_(c,m)||T==2&&rh(c)))switch(g&&0<g.length&&(m=c.h,m.i=m.i.concat(g)),q){case 1:Zn(c,5);break;case 4:Zn(c,10);break;case 3:Zn(c,6);break;default:Zn(c,2)}}}function Sg(c,m){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*m}function Zn(c,m){if(c.j.info("Error code "+m),m==2){var g=x(c.fb,c),T=c.Xa;const q=!T;T=new Xn(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Zl(T,"https"),tc(T),q?t_(T.toString(),g):s_(T.toString(),g)}else ge(2);c.G=0,c.l&&c.l.sa(m),Cg(c),wg(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ge(2)):(this.j.info("Failed to ping google.com"),ge(1))};function Cg(c){if(c.G=0,c.ka=[],c.l){const m=ig(c.h);(m.length!=0||c.i.length!=0)&&(S(c.ka,m),S(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function Tg(c,m,g){var T=g instanceof Xn?Sr(g):new Xn(g);if(T.g!="")m&&(T.g=m+"."+T.g),ec(T,T.s);else{var q=l.location;T=q.protocol,m=m?m+"."+q.hostname:q.hostname,q=+q.port;var G=new Xn(null);T&&Zl(G,T),m&&(G.g=m),q&&ec(G,q),g&&(G.l=g),T=G}return g=c.D,m=c.ya,g&&m&&et(T,g,m),et(T,"VER",c.la),ao(c,T),T}function Ag(c,m,g){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new pt(new so({eb:g})):new pt(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ig(){}t=Ig.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oc(){}oc.prototype.g=function(c,m){return new bs(c,m)};function bs(c,m){de.call(this),this.g=new bg(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!v(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!v(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Qi(this)}C(bs,de),bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){sh(this.g)},bs.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Bi(c),c=g);m.i.push(new G2(m.Ya++,c)),m.G==3&&ic(m)},bs.prototype.N=function(){this.g.l=null,delete this.j,sh(this.g),delete this.g,bs.aa.N.call(this)};function Pg(c){Ka.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const g in m){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}C(Pg,Ka);function Rg(){Ya.call(this),this.status=1}C(Rg,Ya);function Qi(c){this.g=c}C(Qi,Ig),Qi.prototype.ua=function(){Ze(this.g,"a")},Qi.prototype.ta=function(c){Ze(this.g,new Pg(c))},Qi.prototype.sa=function(c){Ze(this.g,new Rg)},Qi.prototype.ra=function(){Ze(this.g,"b")},oc.prototype.createWebChannel=oc.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,h1=function(){return new oc},d1=function(){return nn()},u1=kr,mp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,Kc=Yl,Kx.COMPLETE="complete",c1=Kx,Ql.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",de.prototype.listen=de.prototype.K,_o=Ql,l1=so,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,o1=pt}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const Ay="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba="10.13.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new xd("@firebase/firestore");function xo(){return Ei.logLevel}function he(t,...e){if(Ei.logLevel<=Le.DEBUG){const s=e.map(Xf);Ei.debug(`Firestore (${Ba}): ${t}`,...s)}}function Yr(t,...e){if(Ei.logLevel<=Le.ERROR){const s=e.map(Xf);Ei.error(`Firestore (${Ba}): ${t}`,...s)}}function ki(t,...e){if(Ei.logLevel<=Le.WARN){const s=e.map(Xf);Ei.warn(`Firestore (${Ba}): ${t}`,...s)}}function Xf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t="Unexpected state"){const e=`FIRESTORE (${Ba}) INTERNAL ASSERTION FAILED: `+t;throw Yr(e),new Error(e)}function He(t,e){t||we()}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends dr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Jt.UNAUTHENTICATED))}shutdown(){}}class MA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class VA{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){let n=this.i;const i=u=>this.i!==n?(n=this.i,s(u)):Promise.resolve();let a=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qr)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(He(typeof n.accessToken=="string"),new m1(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Jt(e)}}class FA{constructor(e,s,n){this.l=e,this.h=s,this.P=n,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class OA{constructor(e,s,n){this.l=e,this.h=s,this.P=n}getToken(){return Promise.resolve(new FA(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){const n=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(He(typeof s.token=="string"),this.R=s.token,new qA(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=zA(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<s&&(n+=e.charAt(i[a]%e.length))}return n}}function Ue(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,s){return t.length===e.length&&t.every((n,i)=>s(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*s));return new Xe(s,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new Xe(0,0))}static max(){return new je(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,s,n){s===void 0?s=0:s>e.length&&we(),n===void 0?n=e.length-s:n>e.length-s&&we(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return ml.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let i=0;i<n;i++){const a=e.get(i),o=s.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class st extends ml{construct(e,s,n){return new st(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new le(Q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(i=>i.length>0))}return new st(s)}static emptyPath(){return new st([])}}const BA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Rt extends ml{construct(e,s,n){return new Rt(e,s,n)}static isValidIdentifier(e){return BA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Rt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Rt(["__name__"])}static fromServerFormat(e){const s=[];let n="",i=0;const a=()=>{if(n.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new le(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new le(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new le(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Rt(s)}static emptyPath(){return new Rt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(st.fromString(e))}static fromName(e){return new pe(st.fromString(e).popFirst(5))}static empty(){return new pe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return st.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new st(e.slice()))}}function $A(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=je.fromTimestamp(n===1e9?new Xe(s+1,0):new Xe(s,n));return new Vn(i,pe.empty(),e)}function GA(t){return new Vn(t.readTime,t.key,-1)}class Vn{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new Vn(je.min(),pe.empty(),-1)}static max(){return new Vn(je.max(),pe.empty(),-1)}}function WA(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=pe.comparator(t.documentKey,e.documentKey),s!==0?s:Ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==HA)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new te((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(n,i)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof te?s:te.resolve(s)}catch(s){return te.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):te.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):te.reject(s)}static resolve(e){return new te((s,n)=>{s(e)})}static reject(e){return new te((s,n)=>{n(e)})}static waitFor(e){return new te((s,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&s()},u=>n(u))}),o=!0,a===i&&s()})}static or(e){let s=te.resolve(!1);for(const n of e)s=s.next(i=>i?te.resolve(i):n());return s}static forEach(e,s){const n=[];return e.forEach((i,a)=>{n.push(s.call(this,i,a))}),this.waitFor(n)}static mapArray(e,s){return new te((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;s(e[d]).next(h=>{o[d]=h,++l,l===a&&n(o)},h=>i(h))}})}static doWhile(e,s){return new te((n,i)=>{const a=()=>{e()===!0?s().next(()=>{a()},i):n()};a()})}}function KA(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Vl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.ie(n),this.se=n=>s.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ex.oe=-1;function bd(t){return t==null}function Vu(t){return t===0&&1/t==-1/0}function YA(t){return typeof t=="number"&&Number.isInteger(t)&&!Vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Oi(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function f1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,s){this.comparator=e,this.root=s||Ft.EMPTY}insert(e,s){return new ht(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return s+n.left.size;i<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cc(this.root,e,this.comparator,!0)}}class Cc{constructor(e,s,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?n(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,s,n,i,a){this.key=e,this.value=s,this.color=n??Ft.RED,this.left=i??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,i,a){return new Ft(e??this.key,s??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,n),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return Ft.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,s,n,i,a){return this}insert(e,s,n){return new Ft(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new Bt(this.comparator);return s.data=e,s}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.fields=e,e.sort(Rt.comparator)}static empty(){return new Es([])}unionWith(e){let s=new Bt(Rt.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new Es(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new x1("Invalid base64 string: "+a):a}}(e);return new Lt(s)}static fromUint8Array(e){const s=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Lt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lt.EMPTY_BYTE_STRING=new Lt("");const JA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fn(t){if(He(!!t),typeof t=="string"){let e=0;const s=JA.exec(t);if(He(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Si(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function sx(t){const e=t.mapValue.fields.__previous_value__;return tx(e)?sx(e):e}function pl(t){const e=Fn(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,s,n,i,a,o,l,u,d){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Pa{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tx(t)?4:eI(t)?9007199254740991:ZA(t)?10:11:we()}function Nr(t,e){if(t===e)return!0;const s=Ci(t);if(s!==Ci(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pl(t).isEqual(pl(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=Fn(i.timestampValue),l=Fn(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return Si(i.bytesValue).isEqual(Si(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return gt(i.geoPointValue.latitude)===gt(a.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return gt(i.integerValue)===gt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=gt(i.doubleValue),l=gt(a.doubleValue);return o===l?Vu(o)===Vu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Iy(o)!==Iy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Nr(o[u],l[u])))return!1;return!0}(t,e);default:return we()}}function fl(t,e){return(t.values||[]).find(s=>Nr(s,e))!==void 0}function Ra(t,e){if(t===e)return 0;const s=Ci(t),n=Ci(e);if(s!==n)return Ue(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ue(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=gt(a.integerValue||a.doubleValue),u=gt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ry(t.timestampValue,e.timestampValue);case 4:return Ry(pl(t),pl(e));case 5:return Ue(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Si(a),u=Si(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=Ue(l[d],u[d]);if(h!==0)return h}return Ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Ue(gt(a.latitude),gt(o.latitude));return l!==0?l:Ue(gt(a.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Dy(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const p=a.fields||{},x=o.fields||{},j=(l=p.value)===null||l===void 0?void 0:l.arrayValue,C=(u=x.value)===null||u===void 0?void 0:u.arrayValue,R=Ue(((d=j==null?void 0:j.values)===null||d===void 0?void 0:d.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:Dy(j,C)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Tc.mapValue&&o===Tc.mapValue)return 0;if(a===Tc.mapValue)return 1;if(o===Tc.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const x=Ue(u[p],h[p]);if(x!==0)return x;const j=Ra(l[u[p]],d[h[p]]);if(j!==0)return j}return Ue(u.length,h.length)}(t.mapValue,e.mapValue);default:throw we()}}function Ry(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ue(t,e);const s=Fn(t),n=Fn(e),i=Ue(s.seconds,n.seconds);return i!==0?i:Ue(s.nanos,n.nanos)}function Dy(t,e){const s=t.values||[],n=e.values||[];for(let i=0;i<s.length&&i<n.length;++i){const a=Ra(s[i],n[i]);if(a)return a}return Ue(s.length,n.length)}function Da(t){return pp(t)}function pp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=Fn(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Si(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return pe.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",i=!0;for(const a of s.values||[])i?i=!1:n+=",",n+=pp(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${pp(s.fields[o])}`;return i+"}"}(t.mapValue):we()}function Ly(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fp(t){return!!t&&"integerValue"in t}function rx(t){return!!t&&"arrayValue"in t}function My(t){return!!t&&"nullValue"in t}function Vy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yc(t){return!!t&&"mapValue"in t}function ZA(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Oi(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=Vo(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Vo(t.arrayValue.values[s]);return e}return Object.assign({},t)}function eI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.value=e}static empty(){return new hs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!Yc(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vo(s)}setAll(e){let s=Rt.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!s.isImmediateParentOf(l)){const u=this.getFieldsMap(s);this.applyChanges(u,n,i),n={},i=[],s=l.popLast()}o?n[l.lastSegment()]=Vo(o):i.push(l.lastSegment())});const a=this.getFieldsMap(s);this.applyChanges(a,n,i)}delete(e){const s=this.field(e.popLast());Yc(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=s.mapValue.fields[e.get(n)];Yc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,n){Oi(s,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new hs(Vo(this.value))}}function g1(t){const e=[];return Oi(t.fields,(s,n)=>{const i=new Rt([s]);if(Yc(n)){const a=g1(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Es(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,s,n,i,a,o,l){this.key=e,this.documentType=s,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,je.min(),je.min(),je.min(),hs.empty(),0)}static newFoundDocument(e,s,n,i){return new Zt(e,1,s,je.min(),n,i,0)}static newNoDocument(e,s){return new Zt(e,2,s,je.min(),je.min(),hs.empty(),0)}static newUnknownDocument(e,s){return new Zt(e,3,s,je.min(),je.min(),hs.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,s){this.position=e,this.inclusive=s}}function Fy(t,e,s){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=pe.comparator(pe.fromName(o.referenceValue),s.key):n=Ra(o,s.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function Oy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Nr(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,s="asc"){this.field=e,this.dir=s}}function tI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y1=class{};class jt extends y1{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new rI(e,s,n):s==="array-contains"?new aI(e,n):s==="in"?new oI(e,n):s==="not-in"?new lI(e,n):s==="array-contains-any"?new cI(e,n):new jt(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new nI(e,n):new iI(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(Ra(s,this.value)):s!==null&&Ci(this.value)===Ci(s)&&this.matchesComparison(Ra(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends y1{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new ar(e,s)}matches(e){return v1(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function v1(t){return t.op==="and"}function b1(t){return sI(t)&&v1(t)}function sI(t){for(const e of t.filters)if(e instanceof ar)return!1;return!0}function xp(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+Da(t.value);if(b1(t))return t.filters.map(e=>xp(e)).join(",");{const e=t.filters.map(s=>xp(s)).join(",");return`${t.op}(${e})`}}function w1(t,e){return t instanceof jt?function(n,i){return i instanceof jt&&n.op===i.op&&n.field.isEqual(i.field)&&Nr(n.value,i.value)}(t,e):t instanceof ar?function(n,i){return i instanceof ar&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&w1(o,i.filters[l]),!0):!1}(t,e):void we()}function j1(t){return t instanceof jt?function(s){return`${s.field.canonicalString()} ${s.op} ${Da(s.value)}`}(t):t instanceof ar?function(s){return s.op.toString()+" {"+s.getFilters().map(j1).join(" ,")+"}"}(t):"Filter"}class rI extends jt{constructor(e,s,n){super(e,s,n),this.key=pe.fromName(n.referenceValue)}matches(e){const s=pe.comparator(e.key,this.key);return this.matchesComparison(s)}}class nI extends jt{constructor(e,s){super(e,"in",s),this.keys=N1("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class iI extends jt{constructor(e,s){super(e,"not-in",s),this.keys=N1("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function N1(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>pe.fromName(n.referenceValue))}class aI extends jt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return rx(s)&&fl(s.arrayValue,this.value)}}class oI extends jt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&fl(this.value.arrayValue,s)}}class lI extends jt{constructor(e,s){super(e,"not-in",s)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!fl(this.value.arrayValue,s)}}class cI extends jt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!rx(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>fl(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e,s=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function qy(t,e=null,s=[],n=[],i=null,a=null,o=null){return new uI(t,e,s,n,i,a,o)}function nx(t){const e=Ne(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>xp(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),bd(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>Da(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>Da(n)).join(",")),e.ue=s}return e.ue}function ix(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!tI(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!w1(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Oy(t.startAt,e.startAt)&&Oy(t.endAt,e.endAt)}function gp(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,s=null,n=[],i=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function dI(t,e,s,n,i,a,o,l){return new $a(t,e,s,n,i,a,o,l)}function ax(t){return new $a(t)}function Uy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _1(t){return t.collectionGroup!==null}function Fo(t){const e=Ne(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Bt(Rt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new xl(a,n))}),s.has(Rt.keyField().canonicalString())||e.ce.push(new xl(Rt.keyField(),n))}return e.ce}function br(t){const e=Ne(t);return e.le||(e.le=hI(e,Fo(t))),e.le}function hI(t,e){if(t.limitType==="F")return qy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new xl(i.field,a)});const s=t.endAt?new Fu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Fu(t.startAt.position,t.startAt.inclusive):null;return qy(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function yp(t,e){const s=t.filters.concat([e]);return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Ou(t,e,s){return new $a(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function wd(t,e){return ix(br(t),br(e))&&t.limitType===e.limitType}function E1(t){return`${nx(br(t))}|lt:${t.limitType}`}function Ji(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(i=>j1(i)).join(", ")}]`),bd(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(i=>Da(i)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(i=>Da(i)).join(",")),`Target(${n})`}(br(t))}; limitType=${t.limitType})`}function jd(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):pe.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of Fo(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,u){const d=Fy(o,l,u);return o.inclusive?d<=0:d<0}(n.startAt,Fo(n),i)||n.endAt&&!function(o,l,u){const d=Fy(o,l,u);return o.inclusive?d>=0:d>0}(n.endAt,Fo(n),i))}(t,e)}function mI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function k1(t){return(e,s)=>{let n=!1;for(const i of Fo(t)){const a=pI(i,e,s);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function pI(t,e,s){const n=t.field.isKeyField()?pe.comparator(e.key,s.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?Ra(u,d):we()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[s]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oi(this.inner,(s,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return f1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new ht(pe.comparator);function Jr(){return fI}const S1=new ht(pe.comparator);function Eo(...t){let e=S1;for(const s of t)e=e.insert(s.key,s);return e}function C1(t){let e=S1;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function ci(){return Oo()}function T1(){return Oo()}function Oo(){return new Ga(t=>t.toString(),(t,e)=>t.isEqual(e))}const xI=new ht(pe.comparator),gI=new Bt(pe.comparator);function Re(...t){let e=gI;for(const s of t)e=e.add(s);return e}const yI=new Bt(Ue);function vI(){return yI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function A1(t){return{integerValue:""+t}}function I1(t,e){return YA(e)?A1(e):ox(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function bI(t,e,s){return t instanceof gl?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&tx(a)&&(a=sx(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(s,e):t instanceof yl?R1(t,e):t instanceof vl?D1(t,e):function(i,a){const o=P1(i,a),l=zy(o)+zy(i.Pe);return fp(o)&&fp(i.Pe)?A1(l):ox(i.serializer,l)}(t,e)}function wI(t,e,s){return t instanceof yl?R1(t,e):t instanceof vl?D1(t,e):s}function P1(t,e){return t instanceof bl?function(n){return fp(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class gl extends Nd{}class yl extends Nd{constructor(e){super(),this.elements=e}}function R1(t,e){const s=L1(e);for(const n of t.elements)s.some(i=>Nr(i,n))||s.push(n);return{arrayValue:{values:s}}}class vl extends Nd{constructor(e){super(),this.elements=e}}function D1(t,e){let s=L1(e);for(const n of t.elements)s=s.filter(i=>!Nr(i,n));return{arrayValue:{values:s}}}class bl extends Nd{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function zy(t){return gt(t.integerValue||t.doubleValue)}function L1(t){return rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,s){this.field=e,this.transform=s}}function jI(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof yl&&i instanceof yl||n instanceof vl&&i instanceof vl?Ia(n.elements,i.elements,Nr):n instanceof bl&&i instanceof bl?Nr(n.Pe,i.Pe):n instanceof gl&&i instanceof gl}(t.transform,e.transform)}class NI{constructor(e,s){this.version=e,this.transformResults=s}}class Fs{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Fs}static exists(e){return new Fs(void 0,e)}static updateTime(e){return new Fs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class _d{}function V1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lx(t.key,Fs.none()):new Fl(t.key,t.data,Fs.none());{const s=t.data,n=hs.empty();let i=new Bt(Rt.comparator);for(let a of e.fields)if(!i.has(a)){let o=s.field(a);o===null&&a.length>1&&(a=a.popLast(),o=s.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new Gn(t.key,n,new Es(i.toArray()),Fs.none())}}function _I(t,e,s){t instanceof Fl?function(i,a,o){const l=i.value.clone(),u=$y(i.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,s):t instanceof Gn?function(i,a,o){if(!Jc(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=$y(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(F1(i)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,s):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,s)}function qo(t,e,s,n){return t instanceof Fl?function(a,o,l,u){if(!Jc(a.precondition,o))return l;const d=a.value.clone(),h=Gy(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,s,n):t instanceof Gn?function(a,o,l,u){if(!Jc(a.precondition,o))return l;const d=Gy(a.fieldTransforms,u,o),h=o.data;return h.setAll(F1(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,s,n):function(a,o,l){return Jc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,s)}function EI(t,e){let s=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=P1(n.transform,i||null);a!=null&&(s===null&&(s=hs.empty()),s.set(n.field,a))}return s||null}function By(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ia(n,i,(a,o)=>jI(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fl extends _d{constructor(e,s,n,i=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Gn extends _d{constructor(e,s,n,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function F1(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function $y(t,e,s){const n=new Map;He(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,wI(o,l,s[i]))}return n}function Gy(t,e,s){const n=new Map;for(const i of t){const a=i.transform,o=s.data.field(i.field);n.set(i.field,bI(a,o,e))}return n}class lx extends _d{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kI extends _d{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,s,n,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&_I(a,e,n[i])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=qo(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=qo(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=T1();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=s.has(i.key)?null:l;const u=V1(o,l);u!==null&&n.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(je.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(s,n)=>By(s,n))&&Ia(this.baseMutations,e.baseMutations,(s,n)=>By(s,n))}}class cx{constructor(e,s,n,i){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=i}static from(e,s,n){He(e.mutations.length===n.length);let i=function(){return xI}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new cx(e,s,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Ve;function AI(t){switch(t){default:return we();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function O1(t){if(t===void 0)return Yr("GRPC error has no .code"),Q.UNKNOWN;switch(t){case bt.OK:return Q.OK;case bt.CANCELLED:return Q.CANCELLED;case bt.UNKNOWN:return Q.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Q.INTERNAL;case bt.UNAVAILABLE:return Q.UNAVAILABLE;case bt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case bt.NOT_FOUND:return Q.NOT_FOUND;case bt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case bt.ABORTED:return Q.ABORTED;case bt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case bt.DATA_LOSS:return Q.DATA_LOSS;default:return we()}}(Ve=bt||(bt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new mi([4294967295,4294967295],0);function Wy(t){const e=II().encode(t),s=new a1;return s.update(e),new Uint8Array(s.digest())}function Hy(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mi([s,n],0),new mi([i,a],0)]}class ux{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new ko(`Invalid padding: ${s}`);if(n<0)throw new ko(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new ko(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=mi.fromNumber(this.Ie)}Ee(e,s,n){let i=e.add(s.multiply(mi.fromNumber(n)));return i.compare(PI)===1&&(i=new mi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=Wy(e),[n,i]=Hy(s);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,s,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ux(a,i,s);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const s=Wy(e),[n,i]=Hy(s);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,s,n,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new Ed(je.min(),i,new ht(Ue),Jr(),Re())}}class Ol{constructor(e,s,n,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new Ol(n,s,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,s,n,i){this.Re=e,this.removedTargetIds=s,this.key=n,this.Ve=i}}class q1{constructor(e,s){this.targetId=e,this.me=s}}class U1{constructor(e,s,n=Lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=i}}class Qy{constructor(){this.fe=0,this.ge=Yy(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),s=Re(),n=Re();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:n=n.add(i);break;default:we()}}),new Ol(this.pe,this.ye,e,s,n)}Ce(){this.we=!1,this.ge=Yy()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RI{constructor(e){this.Le=e,this.Be=new Map,this.ke=Jr(),this.qe=Ky(),this.Qe=new ht(Ue)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const n=this.Ge(s);switch(e.state){case 0:this.ze(s)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),n.De(e.resumeToken));break;default:we()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((n,i)=>{this.ze(i)&&s(i)})}He(e){const s=e.targetId,n=e.me.count,i=this.Je(s);if(i){const a=i.target;if(gp(a))if(n===0){const o=new pe(a.path);this.Ue(s,o,Zt.newNoDocument(o,je.min()))}else He(n===1);else{const o=this.Ye(s);if(o!==n){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(s);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,d)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=s;let o,l;try{o=Si(n).toUint8Array()}catch(u){if(u instanceof x1)return ki("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new ux(o,i,a)}catch(u){return ki(u instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,s,n){return s.me.count===n-this.nt(e,s.targetId)?0:2}nt(e,s){const n=this.Le.getRemoteKeysForTarget(s);let i=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(s,a,null),i++)}),i}rt(e){const s=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&gp(l.target)){const u=new pe(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Zt.newNoDocument(u,e))}a.be&&(s.set(o,a.ve()),a.Ce())}});let n=Re();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Ed(e,s,this.Qe,this.ke,n);return this.ke=Jr(),this.qe=Ky(),this.Qe=new ht(Ue),i}$e(e,s){if(!this.ze(e))return;const n=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,n),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),n&&(this.ke=this.ke.insert(s,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new Qy,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new Bt(Ue),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||he("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Qy),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function Ky(){return new ht(pe.comparator)}function Yy(){return new ht(pe.comparator)}const DI={asc:"ASCENDING",desc:"DESCENDING"},LI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MI={and:"AND",or:"OR"};class VI{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function vp(t,e){return t.useProto3Json||bd(e)?e:{value:e}}function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FI(t,e){return qu(t,e.toTimestamp())}function wr(t){return He(!!t),je.fromTimestamp(function(s){const n=Fn(s);return new Xe(n.seconds,n.nanos)}(t))}function dx(t,e){return bp(t,e).canonicalString()}function bp(t,e){const s=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?s:s.child(e)}function B1(t){const e=st.fromString(t);return He(Q1(e)),e}function wp(t,e){return dx(t.databaseId,e.path)}function qh(t,e){const s=B1(e);if(s.get(1)!==t.databaseId.projectId)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new pe(G1(s))}function $1(t,e){return dx(t.databaseId,e)}function OI(t){const e=B1(t);return e.length===4?st.emptyPath():G1(e)}function jp(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G1(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Jy(t,e,s){return{name:wp(t,e),fields:s.value.mapValue.fields}}function qI(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(He(h===void 0||typeof h=="string"),Lt.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?Q.UNKNOWN:O1(d.code);return new le(h,d.message||"")}(o);s=new U1(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=qh(t,n.document.name),a=wr(n.document.updateTime),o=n.document.createTime?wr(n.document.createTime):je.min(),l=new hs({mapValue:{fields:n.document.fields}}),u=Zt.newFoundDocument(i,a,o,l),d=n.targetIds||[],h=n.removedTargetIds||[];s=new Xc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=qh(t,n.document),a=n.readTime?wr(n.readTime):je.min(),o=Zt.newNoDocument(i,a),l=n.removedTargetIds||[];s=new Xc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=qh(t,n.document),a=n.removedTargetIds||[];s=new Xc([],a,i,null)}else{if(!("filter"in e))return we();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new TI(i,a),l=n.targetId;s=new q1(l,o)}}return s}function UI(t,e){let s;if(e instanceof Fl)s={update:Jy(t,e.key,e.value)};else if(e instanceof lx)s={delete:wp(t,e.key)};else if(e instanceof Gn)s={update:Jy(t,e.key,e.data),updateMask:YI(e.fieldMask)};else{if(!(e instanceof kI))return we();s={verify:wp(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof gl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof vl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw we()}(0,n))),e.precondition.isNone||(s.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:FI(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:we()}(t,e.precondition)),s}function zI(t,e){return t&&t.length>0?(He(e!==void 0),t.map(s=>function(i,a){let o=i.updateTime?wr(i.updateTime):wr(a);return o.isEqual(je.min())&&(o=wr(a)),new NI(o,i.transformResults||[])}(s,e))):[]}function BI(t,e){return{documents:[$1(t,e.path)]}}function $I(t,e){const s={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=$1(t,i);const a=function(d){if(d.length!==0)return H1(ar.create(d,"and"))}(e.filters);a&&(s.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(x){return{field:Xi(x.field),direction:HI(x.dir)}}(h))}(e.orderBy);o&&(s.structuredQuery.orderBy=o);const l=vp(t,e.limit);return l!==null&&(s.structuredQuery.limit=l),e.startAt&&(s.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:s,parent:i}}function GI(t){let e=OI(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let i=null;if(n>0){He(n===1);const h=s.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];s.where&&(a=function(p){const x=W1(p);return x instanceof ar&&b1(x)?x.getFilters():[x]}(s.where));let o=[];s.orderBy&&(o=function(p){return p.map(x=>function(C){return new xl(Zi(C.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(x))}(s.orderBy));let l=null;s.limit&&(l=function(p){let x;return x=typeof p=="object"?p.value:p,bd(x)?null:x}(s.limit));let u=null;s.startAt&&(u=function(p){const x=!!p.before,j=p.values||[];return new Fu(j,x)}(s.startAt));let d=null;return s.endAt&&(d=function(p){const x=!p.before,j=p.values||[];return new Fu(j,x)}(s.endAt)),dI(e,i,o,a,l,"F",u,d)}function WI(t,e){const s=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function W1(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=Zi(s.unaryFilter.field);return jt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(s.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Zi(s.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zi(s.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(t):t.fieldFilter!==void 0?function(s){return jt.create(Zi(s.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return ar.create(s.compositeFilter.filters.map(n=>W1(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we()}}(s.compositeFilter.op))}(t):we()}function HI(t){return DI[t]}function QI(t){return LI[t]}function KI(t){return MI[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function Zi(t){return Rt.fromServerFormat(t.fieldPath)}function H1(t){return t instanceof jt?function(s){if(s.op==="=="){if(Vy(s.value))return{unaryFilter:{field:Xi(s.field),op:"IS_NAN"}};if(My(s.value))return{unaryFilter:{field:Xi(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Vy(s.value))return{unaryFilter:{field:Xi(s.field),op:"IS_NOT_NAN"}};if(My(s.value))return{unaryFilter:{field:Xi(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(s.field),op:QI(s.op),value:s.value}}}(t):t instanceof ar?function(s){const n=s.getFilters().map(i=>H1(i));return n.length===1?n[0]:{compositeFilter:{op:KI(s.op),filters:n}}}(t):we()}function YI(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function Q1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,s,n,i,a=je.min(),o=je.min(),l=Lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new bn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.ct=e}}function XI(t){const e=GI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ou(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(){this.un=new e5}addToCollectionParentIndex(e,s){return this.un.add(s),te.resolve()}getCollectionParents(e,s){return te.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return te.resolve()}deleteFieldIndex(e,s){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,s){return te.resolve()}getDocumentsMatchingTarget(e,s){return te.resolve(null)}getIndexType(e,s){return te.resolve(0)}getFieldIndexes(e,s){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,s){return te.resolve(Vn.min())}getMinOffsetFromCollectionGroup(e,s){return te.resolve(Vn.min())}updateCollectionGroup(e,s,n){return te.resolve()}updateIndexEntries(e,s){return te.resolve()}}class e5{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s]||new Bt(st.comparator),a=!i.has(n);return this.index[s]=i.add(n),a}has(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Bt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new La(0)}static kn(){return new La(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(){this.changes=new Ga(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?te.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,s,n,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,s))).next(i=>(n!==null&&qo(n.mutation,i,Es.empty(),Xe.now()),i))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Re()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Re()){const i=ci();return this.populateOverlays(e,i,s).next(()=>this.computeViews(e,s,i,n).next(a=>{let o=Eo();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const n=ci();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Re()))}populateOverlays(e,s,n){const i=[];return n.forEach(a=>{s.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{s.set(o,l)})})}computeViews(e,s,n,i){let a=Jr();const o=Oo(),l=function(){return Oo()}();return s.forEach((u,d)=>{const h=n.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Gn)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),qo(h.mutation,d,h.mutation.getFieldMask(),Xe.now())):o.set(d.key,Es.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),s.forEach((d,h)=>{var p;return l.set(d,new s5(h,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,s){const n=Oo();let i=new ht((o,l)=>o-l),a=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=s.get(u);if(d===null)return;let h=n.get(u)||Es.empty();h=l.applyToLocalView(d,h),n.set(u,h);const p=(i.get(l.batchId)||Re()).add(u);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=T1();h.forEach(x=>{if(!a.has(x)){const j=V1(s.get(x),n.get(x));j!==null&&p.set(x,j),a=a.add(x)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return te.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,i){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):_1(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,i):this.getDocumentsMatchingCollectionQuery(e,s,n,i)}getNextDocuments(e,s,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,i-a.size):te.resolve(ci());let l=-1,u=a;return o.next(d=>te.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),a.get(h)?te.resolve():this.remoteDocumentCache.getEntry(e,h).next(x=>{u=u.insert(h,x)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Re())).next(h=>({batchId:l,changes:C1(h)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new pe(s)).next(n=>{let i=Eo();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,s,n,i){const a=s.collectionGroup;let o=Eo();return this.indexManager.getCollectionParents(e,a).next(l=>te.forEach(l,u=>{const d=function(p,x){return new $a(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(s,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next(h=>{h.forEach((p,x)=>{o=o.insert(p,x)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,s,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,a,i))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let l=Eo();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&qo(h.mutation,d,Es.empty(),Xe.now()),jd(s,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return te.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(i){return{id:i.id,version:i.version,createTime:wr(i.createTime)}}(s)),te.resolve()}getNamedQuery(e,s){return te.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(i){return{name:i.name,query:XI(i.bundledQuery),readTime:wr(i.readTime)}}(s)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(){this.overlays=new ht(pe.comparator),this.Ir=new Map}getOverlay(e,s){return te.resolve(this.overlays.get(s))}getOverlays(e,s){const n=ci();return te.forEach(s,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((i,a)=>{this.ht(e,s,a)}),te.resolve()}removeOverlaysForBatchId(e,s,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),te.resolve()}getOverlaysForCollection(e,s,n){const i=ci(),a=s.length+1,o=new pe(s.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!s.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>n&&i.set(u.getKey(),u)}return te.resolve(i)}getOverlaysForCollectionGroup(e,s,n,i){let a=new ht((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===s&&d.largestBatchId>n){let h=a.get(d.largestBatchId);h===null&&(h=ci(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ci(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return te.resolve(l)}ht(e,s,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new CI(s,n));let a=this.Ir.get(s);a===void 0&&(a=Re(),this.Ir.set(s,a)),this.Ir.set(s,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(){this.sessionToken=Lt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Tr=new Bt(Tt.Er),this.dr=new Bt(Tt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const n=new Tt(e,s);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.Vr(new Tt(e,s))}mr(e,s){e.forEach(n=>this.removeReference(n,s))}gr(e){const s=new pe(new st([])),n=new Tt(s,e),i=new Tt(s,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new pe(new st([])),n=new Tt(s,e),i=new Tt(s,e+1);let a=Re();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const s=new Tt(e,0),n=this.Tr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class Tt{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return pe.comparator(e.key,s.key)||Ue(e.wr,s.wr)}static Ar(e,s){return Ue(e.wr,s.wr)||pe.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new Bt(Tt.Er)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SI(a,s,n,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Tt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,s){return te.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,i=this.vr(n),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new Tt(s,0),i=new Tt(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const l=this.Dr(o.wr);a.push(l)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new Bt(Ue);return s.forEach(i=>{const a=new Tt(i,0),o=new Tt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),te.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,i=n.length+1;let a=n;pe.isDocumentKey(a)||(a=a.child(""));const o=new Tt(new pe(a),0);let l=new Bt(Ue);return this.br.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.wr)),!0)},o),te.resolve(this.Cr(l))}Cr(e){const s=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&s.push(i)}),s}removeMutationBatch(e,s){He(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return te.forEach(s.mutations,i=>{const a=new Tt(i.key,s.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,s){const n=new Tt(s,0),i=this.br.firstAfterOrEqual(n);return te.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l5{constructor(e){this.Mr=e,this.docs=function(){return new ht(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return te.resolve(n?n.document.mutableCopy():Zt.newInvalidDocument(s))}getEntries(e,s){let n=Jr();return s.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Zt.newInvalidDocument(i))}),te.resolve(n)}getDocumentsMatchingQuery(e,s,n,i){let a=Jr();const o=s.path,l=new pe(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||WA(GA(h),n)<=0||(i.has(h.key)||jd(s,h))&&(a=a.insert(h.key,h.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,s,n,i){we()}Or(e,s){return te.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new c5(this)}getSize(e){return te.resolve(this.size)}}class c5 extends t5{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),te.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this.persistence=e,this.Nr=new Ga(s=>nx(s),ix),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hx,this.targetCount=0,this.kr=La.Bn()}forEachTarget(e,s){return this.Nr.forEach((n,i)=>s(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.Lr&&(this.Lr=s),te.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new La(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,te.resolve()}updateTargetData(e,s){return this.Kn(s),te.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,s,n){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=s&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,s){const n=this.Nr.get(s)||null;return te.resolve(n)}addMatchingKeys(e,s,n){return this.Br.Rr(s,n),te.resolve()}removeMatchingKeys(e,s,n){this.Br.mr(s,n);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),te.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Br.yr(s);return te.resolve(n)}containsKey(e,s){return te.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,s){this.qr={},this.overlays={},this.Qr=new ex(0),this.Kr=!1,this.Kr=!0,this.$r=new a5,this.referenceDelegate=e(this),this.Ur=new u5(this),this.indexManager=new ZI,this.remoteDocumentCache=function(i){return new l5(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new JI(s),this.Gr=new n5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new i5,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.qr[e.toKey()];return n||(n=new o5(s,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,n){he("MemoryPersistence","Starting transaction:",e);const i=new h5(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,s){return te.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,s)))}}class h5 extends QA{constructor(e){super(),this.currentSequenceNumber=e}}class mx{constructor(e){this.persistence=e,this.Jr=new hx,this.Yr=null}static Zr(e){return new mx(e)}get Xr(){if(this.Yr)return this.Yr;throw we()}addReference(e,s,n){return this.Jr.addReference(n,s),this.Xr.delete(n.toString()),te.resolve()}removeReference(e,s,n){return this.Jr.removeReference(n,s),this.Xr.add(n.toString()),te.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),te.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Xr,n=>{const i=pe.fromPath(n);return this.ei(e,i).next(a=>{a||s.removeEntry(i,je.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(n=>{n?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return te.or([()=>te.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,s,n,i){this.targetId=e,this.fromCache=s,this.$i=n,this.Ui=i}static Wi(e,s){let n=Re(),i=Re();for(const a of s.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new px(e,s.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ZS()?8:KA(rs())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,n,i){const a={result:null};return this.Yi(e,s).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,s,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new m5;return this.Xi(e,s,o).next(l=>{if(a.result=l,this.zi)return this.es(e,s,o,l.size)})}).next(()=>a.result)}es(e,s,n,i){return n.documentReadCount<this.ji?(xo()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ji(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),te.resolve()):(xo()<=Le.DEBUG&&he("QueryEngine","Query:",Ji(s),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(xo()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ji(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(s))):te.resolve())}Yi(e,s){if(Uy(s))return te.resolve(null);let n=br(s);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(s.limit!==null&&i===1&&(s=Ou(s,null,"F"),n=br(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=Re(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.ts(s,l);return this.ns(s,d,o,u.readTime)?this.Yi(e,Ou(s,null,"F")):this.rs(e,d,s,u)}))})))}Zi(e,s,n,i){return Uy(s)||i.isEqual(je.min())?te.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(s,a);return this.ns(s,o,n,i)?te.resolve(null):(xo()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ji(s)),this.rs(e,o,s,$A(i,-1)).next(l=>l))})}ts(e,s){let n=new Bt(k1(e));return s.forEach((i,a)=>{jd(e,a)&&(n=n.add(a))}),n}ns(e,s,n,i){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,n){return xo()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ji(s)),this.Ji.getDocumentsMatchingQuery(e,s,Vn.min(),n)}rs(e,s,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(s.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,s,n,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new ht(Ue),this._s=new Ga(a=>nx(a),ix),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new r5(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function x5(t,e,s,n){return new f5(t,e,s,n)}async function K1(t,e){const s=Ne(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let i;return s.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let u=Re();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return s.localDocuments.getDocuments(n,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function g5(t,e){const s=Ne(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const p=d.batch,x=p.keys();let j=te.resolve();return x.forEach(C=>{j=j.next(()=>h.getEntry(u,C)).next(R=>{const S=d.docVersions.get(C);He(S!==null),R.version.compareTo(S)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),h.addEntry(R)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(s,n,e,a).next(()=>a.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=Re();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>s.localDocuments.getDocuments(n,i))})}function Y1(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function y5(t,e){const s=Ne(t),n=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const l=[];e.targetChanges.forEach((h,p)=>{const x=i.get(p);if(!x)return;l.push(s.Ur.removeMatchingKeys(a,h.removedDocuments,p).next(()=>s.Ur.addMatchingKeys(a,h.addedDocuments,p)));let j=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?j=j.withResumeToken(Lt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):h.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(h.resumeToken,n)),i=i.insert(p,j),function(R,S,y){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(x,j,h)&&l.push(s.Ur.updateTargetData(a,j))});let u=Jr(),d=Re();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(s.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(v5(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!n.isEqual(je.min())){const h=s.Ur.getLastRemoteSnapshotVersion(a).next(p=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(h)}return te.waitFor(l).next(()=>o.apply(a)).next(()=>s.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(s.os=i,a))}function v5(t,e,s){let n=Re(),i=Re();return s.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=Jr();return s.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(je.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):he("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function b5(t,e){const s=Ne(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function w5(t,e){const s=Ne(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return s.Ur.getTargetData(n,e).next(a=>a?(i=a,te.resolve(i)):s.Ur.allocateTargetId(n).next(o=>(i=new bn(e,o,"TargetPurposeListen",n.currentSequenceNumber),s.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=s.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(n.targetId,n),s._s.set(e,n.targetId)),n})}async function Np(t,e,s){const n=Ne(t),i=n.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Vl(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function Xy(t,e,s){const n=Ne(t);let i=je.min(),a=Re();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const p=Ne(u),x=p._s.get(h);return x!==void 0?te.resolve(p.os.get(x)):p.Ur.getTargetData(d,h)}(n,o,br(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,s?i:je.min(),s?a:Re())).next(l=>(j5(n,mI(e),l),{documents:l,Ts:a})))}function j5(t,e,s){let n=t.us.get(e)||je.min();s.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class Zy{constructor(){this.activeTargetIds=vI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N5{constructor(){this.so=new Zy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,n){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Zy,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ac=null;function Uh(){return Ac===null?Ac=function(){return 268435456+Math.round(2147483648*Math.random())}():Ac++,"0x"+Ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class S5 extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const n=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,n,i,a,o){const l=Uh(),u=this.xo(s,n.toUriEncodedString());he("RestConnection",`Sending RPC '${s}' ${l}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(s,u,d,i).then(h=>(he("RestConnection",`Received RPC '${s}' ${l}: `,h),h),h=>{throw ki("RestConnection",`RPC '${s}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(s,n,i,a,o,l){return this.Mo(s,n,i,a,o)}Oo(s,n,i){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ba}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>s[o]=a),i&&i.headers.forEach((a,o)=>s[o]=a)}xo(s,n){const i=E5[s];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,n,i){const a=Uh();return new Promise((o,l)=>{const u=new o1;u.setWithCredentials(!0),u.listenOnce(c1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Kc.NO_ERROR:const h=u.getResponseJson();he(Yt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Kc.TIMEOUT:he(Yt,`RPC '${e}' ${a} timed out`),l(new le(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const p=u.getStatus();if(he(Yt,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const j=x==null?void 0:x.error;if(j&&j.status&&j.message){const C=function(S){const y=S.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(y)>=0?y:Q.UNKNOWN}(j.status);l(new le(C,j.message))}else l(new le(Q.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new le(Q.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{he(Yt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(i);he(Yt,`RPC '${e}' ${a} sending request:`,i),u.send(s,"POST",d,n,15)})}Bo(e,s,n){const i=Uh(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=h1(),l=d1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new l1({})),this.Oo(u.initMessageHeaders,s,n),u.encodeInitMessageHeaders=!0;const h=a.join("");he(Yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const p=o.createWebChannel(h,u);let x=!1,j=!1;const C=new k5({Io:S=>{j?he(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(he(Yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),x=!0),he(Yt,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},To:()=>p.close()}),R=(S,y,v)=>{S.listen(y,_=>{try{v(_)}catch(P){setTimeout(()=>{throw P},0)}})};return R(p,_o.EventType.OPEN,()=>{j||(he(Yt,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),R(p,_o.EventType.CLOSE,()=>{j||(j=!0,he(Yt,`RPC '${e}' stream ${i} transport closed`),C.So())}),R(p,_o.EventType.ERROR,S=>{j||(j=!0,ki(Yt,`RPC '${e}' stream ${i} transport errored:`,S),C.So(new le(Q.UNAVAILABLE,"The operation could not be completed")))}),R(p,_o.EventType.MESSAGE,S=>{var y;if(!j){const v=S.data[0];He(!!v);const _=v,P=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(P){he(Yt,`RPC '${e}' stream ${i} received error:`,P);const L=P.status;let M=function(w){const E=bt[w];if(E!==void 0)return O1(E)}(L),N=P.message;M===void 0&&(M=Q.INTERNAL,N="Unknown error status: "+L+" with message "+P.message),j=!0,C.So(new le(M,N)),p.close()}else he(Yt,`RPC '${e}' stream ${i} received:`,v),C.bo(v)}}),R(l,u1.STAT_EVENT,S=>{S.stat===mp.PROXY?he(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===mp.NOPROXY&&he(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function zh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t){return new VI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,s,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-n);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,s,n,i,a,o,l,u){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new J1(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===Q.RESOURCE_EXHAUSTED?(Yr(s.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===s&&this.P_(n,i)},n=>{e(()=>{const i=new le(Q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,s){const n=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return he("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class C5 extends X1{constructor(e,s,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,i,o),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=qI(this.serializer,e),n=function(a){if(!("targetChange"in a))return je.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?je.min():o.readTime?wr(o.readTime):je.min()}(e);return this.listener.d_(s,n)}A_(e){const s={};s.database=jp(this.serializer),s.addTarget=function(a,o){let l;const u=o.target;if(l=gp(u)?{documents:BI(a,u)}:{query:$I(a,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=z1(a,o.resumeToken);const d=vp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(je.min())>0){l.readTime=qu(a,o.snapshotVersion.toTimestamp());const d=vp(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=WI(this.serializer,e);n&&(s.labels=n),this.a_(s)}R_(e){const s={};s.database=jp(this.serializer),s.removeTarget=e,this.a_(s)}}class T5 extends X1{constructor(e,s,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=zI(e.writeResults,e.commitTime),n=wr(e.commitTime);return this.listener.g_(n,s)}p_(){const e={};e.database=jp(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>UI(this.serializer,n))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5 extends class{}{constructor(e,s,n,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,bp(s,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Q.UNKNOWN,a.toString())})}Lo(e,s,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,bp(s,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(Q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class I5{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yr(s),this.D_=!1):he("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,s,n,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{qi(this)&&(he("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Ne(u);d.L_.add(4),await ql(d),d.q_.set("Unknown"),d.L_.delete(4),await Sd(d)}(this))})}),this.q_=new I5(n,i)}}async function Sd(t){if(qi(t))for(const e of t.B_)await e(!0)}async function ql(t){for(const e of t.B_)await e(!1)}function Z1(t,e){const s=Ne(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),yx(s)?gx(s):Wa(s).r_()&&xx(s,e))}function fx(t,e){const s=Ne(t),n=Wa(s);s.N_.delete(e),n.r_()&&eN(s,e),s.N_.size===0&&(n.r_()?n.o_():qi(s)&&s.q_.set("Unknown"))}function xx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Wa(t).A_(e)}function eN(t,e){t.Q_.xe(e),Wa(t).R_(e)}function gx(t){t.Q_=new RI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Wa(t).start(),t.q_.v_()}function yx(t){return qi(t)&&!Wa(t).n_()&&t.N_.size>0}function qi(t){return Ne(t).L_.size===0}function tN(t){t.Q_=void 0}async function R5(t){t.q_.set("Online")}async function D5(t){t.N_.forEach((e,s)=>{xx(t,e)})}async function L5(t,e){tN(t),yx(t)?(t.q_.M_(e),gx(t)):t.q_.set("Unknown")}async function M5(t,e,s){if(t.q_.set("Online"),e instanceof U1&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(n){he("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Uu(t,n)}else if(e instanceof Xc?t.Q_.Ke(e):e instanceof q1?t.Q_.He(e):t.Q_.We(e),!s.isEqual(je.min()))try{const n=await Y1(t.localStore);s.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),eN(a,u);const p=new bn(h.target,u,d,h.sequenceNumber);xx(a,p)}),a.remoteSyncer.applyRemoteEvent(l)}(t,s)}catch(n){he("RemoteStore","Failed to raise snapshot:",n),await Uu(t,n)}}async function Uu(t,e,s){if(!Vl(e))throw e;t.L_.add(1),await ql(t),t.q_.set("Offline"),s||(s=()=>Y1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await Sd(t)})}function sN(t,e){return e().catch(s=>Uu(t,s,e))}async function Cd(t){const e=Ne(t),s=On(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;V5(e);)try{const i=await b5(e.localStore,n);if(i===null){e.O_.length===0&&s.o_();break}n=i.batchId,F5(e,i)}catch(i){await Uu(e,i)}rN(e)&&nN(e)}function V5(t){return qi(t)&&t.O_.length<10}function F5(t,e){t.O_.push(e);const s=On(t);s.r_()&&s.V_&&s.m_(e.mutations)}function rN(t){return qi(t)&&!On(t).n_()&&t.O_.length>0}function nN(t){On(t).start()}async function O5(t){On(t).p_()}async function q5(t){const e=On(t);for(const s of t.O_)e.m_(s.mutations)}async function U5(t,e,s){const n=t.O_.shift(),i=cx.from(n,e,s);await sN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Cd(t)}async function z5(t,e){e&&On(t).V_&&await async function(n,i){if(function(o){return AI(o)&&o!==Q.ABORTED}(i.code)){const a=n.O_.shift();On(n).s_(),await sN(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Cd(n)}}(t,e),rN(t)&&nN(t)}async function tv(t,e){const s=Ne(t);s.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");const n=qi(s);s.L_.add(3),await ql(s),n&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await Sd(s)}async function B5(t,e){const s=Ne(t);e?(s.L_.delete(2),await Sd(s)):e||(s.L_.add(2),await ql(s),s.q_.set("Unknown"))}function Wa(t){return t.K_||(t.K_=function(s,n,i){const a=Ne(s);return a.w_(),new C5(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:R5.bind(null,t),Ro:D5.bind(null,t),mo:L5.bind(null,t),d_:M5.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yx(t)?gx(t):t.q_.set("Unknown")):(await t.K_.stop(),tN(t))})),t.K_}function On(t){return t.U_||(t.U_=function(s,n,i){const a=Ne(s);return a.w_(),new T5(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:O5.bind(null,t),mo:z5.bind(null,t),f_:q5.bind(null,t),g_:U5.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cd(t)):(await t.U_.stop(),t.O_.length>0&&(he("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,s,n,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,i,a){const o=Date.now()+n,l=new vx(e,s,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bx(t,e){if(Yr("AsyncQueue",`${e}: ${t}`),Vl(t))return new le(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.comparator=e?(s,n)=>e(s,n)||pe.comparator(s.key,n.key):(s,n)=>pe.comparator(s.key,n.key),this.keyedMap=Eo(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new ja(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof ja)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new ja;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.W_=new ht(pe.comparator)}track(e){const s=e.doc.key,n=this.W_.get(s);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(s,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(s):e.type===1&&n.type===2?this.W_=this.W_.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):we():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,n)=>{e.push(n)}),e}}class Ma{constructor(e,s,n,i,a,o,l,u,d){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,s,n,i,a){const o=[];return s.forEach(l=>{o.push({type:0,doc:l})}),new Ma(e,s,ja.emptySet(s),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==n[i].type||!s[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class G5{constructor(){this.queries=rv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,n){const i=Ne(s),a=i.queries;i.queries=rv(),a.forEach((o,l)=>{for(const u of l.j_)u.onError(n)})})(this,new le(Q.ABORTED,"Firestore shutting down"))}}function rv(){return new Ga(t=>E1(t),wd)}async function iN(t,e){const s=Ne(t);let n=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new $5,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(o){const l=bx(o,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(l)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&wx(s)}async function aN(t,e){const s=Ne(t),n=e.query;let i=3;const a=s.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function W5(t,e){const s=Ne(t);let n=!1;for(const i of e){const a=i.query,o=s.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(n=!0);o.z_=i}}n&&wx(s)}function H5(t,e,s){const n=Ne(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(s);n.queries.delete(e)}function wx(t){t.Y_.forEach(e=>{e.next()})}var _p,nv;(nv=_p||(_p={})).ea="default",nv.Cache="cache";class oN{constructor(e,s,n){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Ma(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const n=s!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=Ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_p.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class Q5{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=k1(e),this.Ra=new ja(this.Aa)}get Va(){return this.Ta}ma(e,s){const n=s?s.fa:new sv,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const x=i.get(h),j=jd(this.query,p)?p:null,C=!!x&&this.mutatedKeys.has(x.key),R=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let S=!1;x&&j?x.data.isEqual(j.data)?C!==R&&(n.track({type:3,doc:j}),S=!0):this.ga(x,j)||(n.track({type:2,doc:j}),S=!0,(u&&this.Aa(j,u)>0||d&&this.Aa(j,d)<0)&&(l=!0)):!x&&j?(n.track({type:0,doc:j}),S=!0):x&&!j&&(n.track({type:1,doc:x}),S=!0,(u||d)&&(l=!0)),S&&(j?(o=o.add(j),a=R?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),n.track({type:1,doc:h})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(j,C){const R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return R(j)-R(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(n),i=i!=null&&i;const l=s&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ma(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const s=[];return e.forEach(n=>{this.da.has(n)||s.push(new cN(n))}),this.da.forEach(n=>{e.has(n)||s.push(new lN(n))}),s}ba(e){this.Ta=e.Ts,this.da=Re();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return Ma.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class K5{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class Y5{constructor(e){this.key=e,this.va=!1}}class J5{constructor(e,s,n,i,a,o){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ga(l=>E1(l),wd),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(pe.comparator),this.Na=new Map,this.La=new hx,this.Ba={},this.ka=new Map,this.qa=La.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function X5(t,e,s=!0){const n=fN(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await uN(n,e,s,!0),i}async function Z5(t,e){const s=fN(t);await uN(s,e,!0,!1)}async function uN(t,e,s,n){const i=await w5(t.localStore,br(e)),a=i.targetId,o=s?t.sharedClientState.addLocalQueryTarget(a):"not-current";let l;return n&&(l=await eP(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&s&&Z1(t.remoteStore,i),l}async function eP(t,e,s,n,i){t.Ka=(p,x,j)=>async function(R,S,y,v){let _=S.view.ma(y);_.ns&&(_=await Xy(R.localStore,S.query,!1).then(({documents:N})=>S.view.ma(N,_)));const P=v&&v.targetChanges.get(S.targetId),L=v&&v.targetMismatches.get(S.targetId)!=null,M=S.view.applyChanges(_,R.isPrimaryClient,P,L);return av(R,S.targetId,M.wa),M.snapshot}(t,p,x,j);const a=await Xy(t.localStore,e,!0),o=new Q5(e,a.Ts),l=o.ma(a.documents),u=Ol.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);av(t,s,d.wa);const h=new K5(e,s,o);return t.Fa.set(e,h),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),d.snapshot}async function tP(t,e,s){const n=Ne(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!wd(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Np(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),s&&fx(n.remoteStore,i.targetId),Ep(n,i.targetId)}).catch(Ml)):(Ep(n,i.targetId),await Np(n.localStore,i.targetId,!0))}async function sP(t,e){const s=Ne(t),n=s.Fa.get(e),i=s.Ma.get(n.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),fx(s.remoteStore,n.targetId))}async function rP(t,e,s){const n=uP(t);try{const i=await function(o,l){const u=Ne(o),d=Xe.now(),h=l.reduce((j,C)=>j.add(C.key),Re());let p,x;return u.persistence.runTransaction("Locally write mutations","readwrite",j=>{let C=Jr(),R=Re();return u.cs.getEntries(j,h).next(S=>{C=S,C.forEach((y,v)=>{v.isValidDocument()||(R=R.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(j,C)).next(S=>{p=S;const y=[];for(const v of l){const _=EI(v,p.get(v.key).overlayedDocument);_!=null&&y.push(new Gn(v.key,_,g1(_.value.mapValue),Fs.exists(!0)))}return u.mutationQueue.addMutationBatch(j,d,y,l)}).next(S=>{x=S;const y=S.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(j,S.batchId,y)})}).then(()=>({batchId:x.batchId,changes:C1(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new ht(Ue)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(n,i.batchId,s),await Ul(n,i.changes),await Cd(n.remoteStore)}catch(i){const a=bx(i,"Failed to persist write");s.reject(a)}}async function dN(t,e){const s=Ne(t);try{const n=await y5(s.localStore,e);e.targetChanges.forEach((i,a)=>{const o=s.Na.get(a);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?He(o.va):i.removedDocuments.size>0&&(He(o.va),o.va=!1))}),await Ul(s,n,e)}catch(n){await Ml(n)}}function iv(t,e,s){const n=Ne(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const i=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=Ne(o);u.onlineState=l;let d=!1;u.queries.forEach((h,p)=>{for(const x of p.j_)x.Z_(l)&&(d=!0)}),d&&wx(u)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function nP(t,e,s){const n=Ne(t);n.sharedClientState.updateQueryState(e,"rejected",s);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new ht(pe.comparator);o=o.insert(a,Zt.newNoDocument(a,je.min()));const l=Re().add(a),u=new Ed(je.min(),new Map,new ht(Ue),o,l);await dN(n,u),n.Oa=n.Oa.remove(a),n.Na.delete(e),jx(n)}else await Np(n.localStore,e,!1).then(()=>Ep(n,e,s)).catch(Ml)}async function iP(t,e){const s=Ne(t),n=e.batch.batchId;try{const i=await g5(s.localStore,e);mN(s,n,null),hN(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await Ul(s,i)}catch(i){await Ml(i)}}async function aP(t,e,s){const n=Ne(t);try{const i=await function(o,l){const u=Ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(He(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);mN(n,e,s),hN(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await Ul(n,i)}catch(i){await Ml(i)}}function hN(t,e){(t.ka.get(e)||[]).forEach(s=>{s.resolve()}),t.ka.delete(e)}function mN(t,e,s){const n=Ne(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Ep(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),s&&t.Ca.$a(n,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||pN(t,n)})}function pN(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(fx(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),jx(t))}function av(t,e,s){for(const n of s)n instanceof lN?(t.La.addReference(n.key,e),oP(t,n)):n instanceof cN?(he("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||pN(t,n.key)):we()}function oP(t,e){const s=e.key,n=s.path.canonicalString();t.Oa.get(s)||t.xa.has(n)||(he("SyncEngine","New document in limbo: "+s),t.xa.add(n),jx(t))}function jx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new pe(st.fromString(e)),n=t.qa.next();t.Na.set(n,new Y5(s)),t.Oa=t.Oa.insert(s,n),Z1(t.remoteStore,new bn(br(ax(s.path)),n,"TargetPurposeLimboResolution",ex.oe))}}async function Ul(t,e,s){const n=Ne(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,u)=>{o.push(n.Ka(u,e,s).then(d=>{var h;if((d||s)&&n.isPrimaryClient){const p=d?!d.fromCache:(h=s==null?void 0:s.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){i.push(d);const p=px.Wi(u.targetId,d);a.push(p)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(u,d){const h=Ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>te.forEach(d,x=>te.forEach(x.$i,j=>h.persistence.referenceDelegate.addReference(p,x.targetId,j)).next(()=>te.forEach(x.Ui,j=>h.persistence.referenceDelegate.removeReference(p,x.targetId,j)))))}catch(p){if(!Vl(p))throw p;he("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const x=p.targetId;if(!p.fromCache){const j=h.os.get(x),C=j.snapshotVersion,R=j.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(x,R)}}}(n.localStore,a))}async function lP(t,e){const s=Ne(t);if(!s.currentUser.isEqual(e)){he("SyncEngine","User change. New user:",e.toKey());const n=await K1(s.localStore,e);s.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(u=>{u.reject(new le(Q.CANCELLED,o))})}),a.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ul(s,n.hs)}}function cP(t,e){const s=Ne(t),n=s.Na.get(e);if(n&&n.va)return Re().add(n.key);{let i=Re();const a=s.Ma.get(e);if(!a)return i;for(const o of a){const l=s.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function fN(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nP.bind(null,e),e.Ca.d_=W5.bind(null,e.eventManager),e.Ca.$a=H5.bind(null,e.eventManager),e}function uP(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,e),e}class ov{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=kd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,s){return null}createIndexBackfillerScheduler(e,s){return null}createLocalStore(e){return x5(this.persistence,new p5,e.initialUser,this.serializer)}createPersistence(e){return new d5(mx.Zr,this.serializer)}createSharedClientState(e){return new N5}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dP{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>iv(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lP.bind(null,this.syncEngine),await B5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new G5}()}createDatastore(e){const s=kd(e.databaseInfo.databaseId),n=function(a){return new S5(a)}(e.databaseInfo);return function(a,o,l,u){return new A5(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,i,a,o,l){return new P5(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,s=>iv(this.syncEngine,s,0),function(){return ev.D()?new ev:new _5}())}createSyncEngine(e,s){return function(i,a,o,l,u,d,h){const p=new J5(i,a,o,l,u,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(i){const a=Ne(i);he("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await ql(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,s){this.muted||setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,s,n,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=Zf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async a=>{he("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(he("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=bx(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Bh(t,e){t.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await K1(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lv(t,e){t.asyncQueue.verifyOperationInProgress();const s=await pP(t);he("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>tv(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>tv(e.remoteStore,i)),t._onlineComponents=e}function mP(t){return t.name==="FirebaseError"?t.code===Q.FAILED_PRECONDITION||t.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function pP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bh(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!mP(s))throw s;ki("Error using user provided cache. Falling back to memory cache: "+s),await Bh(t,new ov)}}else he("FirestoreClient","Using default OfflineComponentProvider"),await Bh(t,new ov);return t._offlineComponents}async function gN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),await lv(t,t._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),await lv(t,new dP))),t._onlineComponents}function fP(t){return gN(t).then(e=>e.syncEngine)}async function yN(t){const e=await gN(t),s=e.eventManager;return s.onListen=X5.bind(null,e.syncEngine),s.onUnlisten=tP.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=Z5.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=sP.bind(null,e.syncEngine),s}function xP(t,e,s={}){const n=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new xN({next:x=>{o.enqueueAndForget(()=>aN(a,p));const j=x.docs.has(l);!j&&x.fromCache?d.reject(new le(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&x.fromCache&&u&&u.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(x)},error:x=>d.reject(x)}),p=new oN(ax(l.path),h,{includeMetadataChanges:!0,_a:!0});return iN(a,p)}(await yN(t),t.asyncQueue,e,s,n)),n.promise}function gP(t,e,s={}){const n=new qr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new xN({next:x=>{o.enqueueAndForget(()=>aN(a,p)),x.fromCache&&u.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(x)},error:x=>d.reject(x)}),p=new oN(l,h,{includeMetadataChanges:!0,_a:!0});return iN(a,p)}(await yN(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t,e,s){if(!s)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function wN(t,e,s,n){if(e===!0&&n===!0)throw new le(Q.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function uv(t){if(!pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dv(t){if(pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Td(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we()}function Bs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Td(t);throw new le(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}function yP(t,e){if(e<=0)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vN((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,s,n,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new le(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new le(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hv(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new p1;switch(n.type){case"firstParty":return new OA(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=cv.get(s);n&&(he("ComponentProvider","Removing Datastore"),cv.delete(s),n.terminate())}(this),Promise.resolve()}}function jN(t,e,s,n={}){var i;const a=(t=Bs(t,Ad))._getSettings(),o=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&ki("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=Jt.MOCK_USER;else{l=QS(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new le(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Jt(d)}t._authCredentials=new MA(new m1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rn(this.firestore,e,this._query)}}class es{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class Ur extends rn{constructor(e,s,n){super(e,s,ax(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new pe(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function Se(t,e,...s){if(t=nt(t),bN("collection","path",e),t instanceof Ad){const n=st.fromString(e,...s);return dv(n),new Ur(t,null,n)}{if(!(t instanceof es||t instanceof Ur))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(st.fromString(e,...s));return dv(n),new Ur(t.firestore,null,n)}}function be(t,e,...s){if(t=nt(t),arguments.length===1&&(e=Zf.newId()),bN("doc","path",e),t instanceof Ad){const n=st.fromString(e,...s);return uv(n),new es(t,null,new pe(n))}{if(!(t instanceof es||t instanceof Ur))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(st.fromString(e,...s));return uv(n),new es(t.firestore,t instanceof Ur?t.converter:null,new pe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new J1(this,"async_queue_retry"),this.Eu=()=>{const s=zh();s&&he("AsyncQueue","Visibility state changed to "+s.visibilityState),this.t_.jo()};const e=zh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const s=zh();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const s=new qr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Vl(e))throw e;he("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const s=this.au.then(()=>(this.Pu=!0,e().catch(n=>{this.hu=n,this.Pu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Yr("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.Pu=!1,n))));return this.au=s,s}enqueueAfterDelay(e,s,n){this.du(),this.Tu.indexOf(e)>-1&&(s=0);const i=vx.createAndSchedule(this,e,s,n,a=>this.Vu(a));return this.lu.push(i),i}du(){this.hu&&we()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const s of this.lu)if(s.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.lu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const s=this.lu.indexOf(e);this.lu.splice(s,1)}}class Wn extends Ad{constructor(e,s,n,i){super(e,s,n,i),this.type="firestore",this._queue=function(){return new vP}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||_N(this),this._firestoreClient.terminate()}}function NN(t,e){const s=typeof t=="object"?t:qf(),n=typeof t=="string"?t:"(default)",i=Vi(s,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=WS("firestore");a&&jN(i,...a)}return i}function Id(t){return t._firestoreClient||_N(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function _N(t){var e,s,n;const i=t._freezeSettings(),a=function(l,u,d,h){return new XA(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vN(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new hP(t._authCredentials,t._appCheckCredentials,t._queue,a),!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ti(Lt.fromBase64String(e))}catch(s){throw new le(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Ti(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new le(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Rt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new le(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new le(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^__.*__$/;class wP{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new Gn(e,this.data,this.fieldMask,s,this.fieldTransforms):new Fl(e,this.data,s,this.fieldTransforms)}}class EN{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new Gn(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function kN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Nx{constructor(e,s,n,i,a,o){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.yu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Nx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Su({path:n,Du:!1});return i.vu(e),i}Cu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Su({path:n,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return zu(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(kN(this.wu)&&bP.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class jP{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||kd(e)}Nu(e,s,n,i=!1){return new Nx({wu:e,methodName:s,Ou:n,path:Rt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dd(t){const e=t._freezeSettings(),s=kd(t._databaseId);return new jP(t._databaseId,!!e.ignoreUndefinedProperties,s)}function SN(t,e,s,n,i,a={}){const o=t.Nu(a.merge||a.mergeFields?2:0,e,s,i);kx("Data must be an object, but it was:",o,n);const l=CN(n,o);let u,d;if(a.merge)u=new Es(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const x=kp(e,p,s);if(!o.contains(x))throw new le(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);AN(h,x)||h.push(x)}u=new Es(h),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new wP(new hs(l),u,d)}class Ld extends Ha{_toFieldTransform(e){if(e.wu!==2)throw e.wu===1?e.Mu(`${this._methodName}() can only appear at the top level of your update data`):e.Mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}class _x extends Ha{_toFieldTransform(e){return new M1(e.path,new gl)}isEqual(e){return e instanceof _x}}class Ex extends Ha{constructor(e,s){super(e),this.Bu=s}_toFieldTransform(e){const s=new bl(e.serializer,I1(e.serializer,this.Bu));return new M1(e.path,s)}isEqual(e){return e instanceof Ex&&this.Bu===e.Bu}}function NP(t,e,s,n){const i=t.Nu(1,e,s);kx("Data must be an object, but it was:",i,n);const a=[],o=hs.empty();Oi(n,(u,d)=>{const h=Sx(e,u,s);d=nt(d);const p=i.Cu(h);if(d instanceof Ld)a.push(h);else{const x=Bl(d,p);x!=null&&(a.push(h),o.set(h,x))}});const l=new Es(a);return new EN(o,l,i.fieldTransforms)}function _P(t,e,s,n,i,a){const o=t.Nu(1,e,s),l=[kp(e,n,s)],u=[i];if(a.length%2!=0)throw new le(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)l.push(kp(e,a[x])),u.push(a[x+1]);const d=[],h=hs.empty();for(let x=l.length-1;x>=0;--x)if(!AN(d,l[x])){const j=l[x];let C=u[x];C=nt(C);const R=o.Cu(j);if(C instanceof Ld)d.push(j);else{const S=Bl(C,R);S!=null&&(d.push(j),h.set(j,S))}}const p=new Es(d);return new EN(h,p,o.fieldTransforms)}function EP(t,e,s,n=!1){return Bl(s,t.Nu(n?4:3,e))}function Bl(t,e){if(TN(t=nt(t)))return kx("Unsupported field value:",e,t),CN(t,e);if(t instanceof Ha)return function(n,i){if(!kN(i.wu))throw i.Mu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let u=Bl(l,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=nt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return I1(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=Xe.fromDate(n);return{timestampValue:qu(i.serializer,a)}}if(n instanceof Xe){const a=new Xe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:qu(i.serializer,a)}}if(n instanceof Pd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ti)return{bytesValue:z1(i.serializer,n._byteString)};if(n instanceof es){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:dx(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof Rd)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Mu("VectorValues must only contain numeric values.");return ox(l.serializer,u)})}}}}}}(n,i);throw i.Mu(`Unsupported field value: ${Td(n)}`)}(t,e)}function CN(t,e){const s={};return f1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oi(t,(n,i)=>{const a=Bl(i,e.bu(n));a!=null&&(s[n]=a)}),{mapValue:{fields:s}}}function TN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Pd||t instanceof Ti||t instanceof es||t instanceof Ha||t instanceof Rd)}function kx(t,e,s){if(!TN(s)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(s)){const n=Td(s);throw n==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+n)}}function kp(t,e,s){if((e=nt(e))instanceof zl)return e._internalPath;if(typeof e=="string")return Sx(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,s)}const kP=new RegExp("[~\\*/\\[\\]]");function Sx(t,e,s){if(e.search(kP)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new zl(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function zu(t,e,s,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;s&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${n}`),o&&(u+=` in document ${i}`),u+=")"),new le(Q.INVALID_ARGUMENT,l+t+u)}function AN(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,s,n,i,a){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Md("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class SP extends IN{data(){return super.data()}}function Md(t,e){return typeof e=="string"?Sx(t,e):e instanceof zl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Cx{}class Vd extends Cx{}function kt(t,e,...s){let n=[];e instanceof Cx&&n.push(e),n=n.concat(s),function(a){const o=a.filter(u=>u instanceof Fd).length,l=a.filter(u=>u instanceof $l).length;if(o>1||o>0&&l>0)throw new le(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class $l extends Vd{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new $l(e,s,n)}_apply(e){const s=this._parse(e);return PN(e._query,s),new rn(e.firestore,e.converter,yp(e._query,s))}_parse(e){const s=Dd(e.firestore);return function(a,o,l,u,d,h,p){let x;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){pv(p,h);const j=[];for(const C of p)j.push(mv(u,a,C));x={arrayValue:{values:j}}}else x=mv(u,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||pv(p,h),x=EP(l,o,p,h==="in"||h==="not-in");return jt.create(d,h,x)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function or(t,e,s){const n=e,i=Md("where",t);return $l._create(i,n,s)}class Fd extends Cx{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Fd(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:ar.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const u of l)PN(o,u),o=yp(o,u)}(e._query,s),new rn(e.firestore,e.converter,yp(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Od extends Vd{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Od(e,s)}_apply(e){const s=function(i,a,o){if(i.startAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(a,o)}(e._query,this._field,this._direction);return new rn(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new $a(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,s))}}function Hn(t,e="asc"){const s=e,n=Md("orderBy",t);return Od._create(n,s)}class qd extends Vd{constructor(e,s,n){super(),this.type=e,this._limit=s,this._limitType=n}static _create(e,s,n){return new qd(e,s,n)}_apply(e){return new rn(e.firestore,e.converter,Ou(e._query,this._limit,this._limitType))}}function Bu(t){return yP("limit",t),qd._create("limit",t,"F")}function mv(t,e,s){if(typeof(s=nt(s))=="string"){if(s==="")throw new le(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_1(e)&&s.indexOf("/")!==-1)throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(st.fromString(s));if(!pe.isDocumentKey(n))throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Ly(t,new pe(n))}if(s instanceof es)return Ly(t,s._key);throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(s)}.`)}function pv(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PN(t,e){const s=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class RN{convertValue(e,s="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Oi(e,(i,a)=>{n[i]=this.convertValue(a,s)}),n}convertVectorValue(e){var s,n,i;const a=(i=(n=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>gt(o.doubleValue));return new Rd(a)}convertGeoPoint(e){return new Pd(gt(e.latitude),gt(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=sx(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(pl(e));default:return null}}convertTimestamp(e){const s=Fn(e);return new Xe(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=st.fromString(e);He(Q1(n));const i=new Pa(n.get(1),n.get(3)),a=new pe(n.popFirst(5));return i.isEqual(s)||Yr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e,s){let n;return n=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Tx extends IN{constructor(e,s,n,i,a,o){super(e,s,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Uo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(Md("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class Uo extends Tx{data(e={}){return super.data(e)}}class LN{constructor(e,s,n,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new ha(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new Uo(this._firestore,this._userDataWriter,n.key,n,new ha(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new le(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Uo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ha(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Uo(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ha(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:TP(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function TP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){t=Bs(t,es);const e=Bs(t.firestore,Wn);return xP(Id(e),t._key).then(s=>AP(e,t,s))}class MN extends RN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ti(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,s)}}function Ye(t){t=Bs(t,rn);const e=Bs(t.firestore,Wn),s=Id(e),n=new MN(e);return CP(t._query),gP(s,t._query).then(i=>new LN(e,n,t,i))}function Ns(t,e,s){t=Bs(t,es);const n=Bs(t.firestore,Wn),i=DN(t.converter,e,s);return Gl(n,[SN(Dd(n),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,Fs.none())])}function ts(t,e,s,...n){t=Bs(t,es);const i=Bs(t.firestore,Wn),a=Dd(i);let o;return o=typeof(e=nt(e))=="string"||e instanceof zl?_P(a,"updateDoc",t._key,e,s,n):NP(a,"updateDoc",t._key,e),Gl(i,[o.toMutation(t._key,Fs.exists(!0))])}function Rn(t){return Gl(Bs(t.firestore,Wn),[new lx(t._key,Fs.none())])}function Ut(t,e){const s=Bs(t.firestore,Wn),n=be(t),i=DN(t.converter,e);return Gl(s,[SN(Dd(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Fs.exists(!1))]).then(()=>n)}function Gl(t,e){return function(n,i){const a=new qr;return n.asyncQueue.enqueueAndForget(async()=>rP(await fP(n),i,a)),a.promise}(Id(t),e)}function AP(t,e,s){const n=s.docs.get(e._key),i=new MN(t);return new Tx(t,i,e._key,n,new ha(s.hasPendingWrites,s.fromCache),e.converter)}function is(){return new _x("serverTimestamp")}function VN(t){return new Ex("increment",t)}(function(e,s=!0){(function(i){Ba=i})(za),jr(new ir("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new Wn(new VA(n.getProvider("auth-internal")),new UA(n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(d.options.projectId,h)}(o,i),o);return a=Object.assign({useFetchStreams:s},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Vs(Ay,"4.7.0",e),Vs(Ay,"4.7.0","esm2017")})();const FN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:RN,Bytes:Ti,CollectionReference:Ur,DocumentReference:es,DocumentSnapshot:Tx,FieldPath:zl,FieldValue:Ha,Firestore:Wn,FirestoreError:le,GeoPoint:Pd,Query:rn,QueryCompositeFilterConstraint:Fd,QueryConstraint:Vd,QueryDocumentSnapshot:Uo,QueryFieldFilterConstraint:$l,QueryLimitConstraint:qd,QueryOrderByConstraint:Od,QuerySnapshot:LN,SnapshotMetadata:ha,Timestamp:Xe,VectorValue:Rd,_AutoId:Zf,_ByteString:Lt,_DatabaseId:Pa,_DocumentKey:pe,_EmptyAuthCredentialsProvider:p1,_FieldPath:Rt,_cast:Bs,_logWarn:ki,_validateIsNotUsedTogether:wN,addDoc:Ut,collection:Se,connectFirestoreEmulator:jN,deleteDoc:Rn,doc:be,ensureFirestoreConfigured:Id,executeWrite:Gl,getDoc:xt,getDocs:Ye,getFirestore:NN,increment:VN,limit:Bu,orderBy:Hn,query:kt,serverTimestamp:is,setDoc:Ns,updateDoc:ts,where:or},Symbol.toStringTag,{value:"Module"})),ON="@firebase/installations",Ax="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=1e4,UN=`w:${Ax}`,zN="FIS_v2",IP="https://firebaseinstallations.googleapis.com/v1",PP=60*60*1e3,RP="installations",DP="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ai=new Mi(RP,DP,LP);function BN(t){return t instanceof dr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N({projectId:t}){return`${IP}/projects/${t}/installations`}function GN(t){return{token:t.token,requestStatus:2,expiresIn:VP(t.expiresIn),creationTime:Date.now()}}async function WN(t,e){const n=(await e.json()).error;return Ai.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function HN({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function MP(t,{refreshToken:e}){const s=HN(t);return s.append("Authorization",FP(e)),s}async function QN(t){const e=await t();return e.status>=500&&e.status<600?t():e}function VP(t){return Number(t.replace("s","000"))}function FP(t){return`${zN} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const n=$N(t),i=HN(t),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:s,authVersion:zN,appId:t.appId,sdkVersion:UN},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await QN(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||s,registrationStatus:2,refreshToken:d.refreshToken,authToken:GN(d.authToken)}}else throw await WN("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=/^[cdef][\w-]{21}$/,Sp="";function zP(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=BP(t);return UP.test(s)?s:Sp}catch{return Sp}}function BP(t){return qP(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ud(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YN=new Map;function JN(t,e){const s=Ud(t);XN(s,e),$P(s,e)}function XN(t,e){const s=YN.get(t);if(s)for(const n of s)n(e)}function $P(t,e){const s=GP();s&&s.postMessage({key:t,fid:e}),WP()}let ui=null;function GP(){return!ui&&"BroadcastChannel"in self&&(ui=new BroadcastChannel("[Firebase] FID Change"),ui.onmessage=t=>{XN(t.data.key,t.data.fid)}),ui}function WP(){YN.size===0&&ui&&(ui.close(),ui=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="firebase-installations-database",QP=1,Ii="firebase-installations-store";let $h=null;function Ix(){return $h||($h=yj(HP,QP,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ii)}}})),$h}async function $u(t,e){const s=Ud(t),i=(await Ix()).transaction(Ii,"readwrite"),a=i.objectStore(Ii),o=await a.get(s);return await a.put(e,s),await i.done,(!o||o.fid!==e.fid)&&JN(t,e.fid),e}async function ZN(t){const e=Ud(t),n=(await Ix()).transaction(Ii,"readwrite");await n.objectStore(Ii).delete(e),await n.done}async function zd(t,e){const s=Ud(t),i=(await Ix()).transaction(Ii,"readwrite"),a=i.objectStore(Ii),o=await a.get(s),l=e(o);return l===void 0?await a.delete(s):await a.put(l,s),await i.done,l&&(!o||o.fid!==l.fid)&&JN(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(t){let e;const s=await zd(t.appConfig,n=>{const i=KP(n),a=YP(t,i);return e=a.registrationPromise,a.installationEntry});return s.fid===Sp?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function KP(t){const e=t||{fid:zP(),registrationStatus:0};return e2(e)}function YP(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ai.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=JP(t,s);return{installationEntry:s,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XP(t)}:{installationEntry:e}}async function JP(t,e){try{const s=await OP(t,e);return $u(t.appConfig,s)}catch(s){throw BN(s)&&s.customData.serverCode===409?await ZN(t.appConfig):await $u(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function XP(t){let e=await fv(t.appConfig);for(;e.registrationStatus===1;)await KN(100),e=await fv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await Px(t);return n||s}return e}function fv(t){return zd(t,e=>{if(!e)throw Ai.create("installation-not-found");return e2(e)})}function e2(t){return ZP(t)?{fid:t.fid,registrationStatus:0}:t}function ZP(t){return t.registrationStatus===1&&t.registrationTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e3({appConfig:t,heartbeatServiceProvider:e},s){const n=t3(t,s),i=MP(t,s),a=e.getImmediate({optional:!0});if(a){const d=await a.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:UN,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await QN(()=>fetch(n,l));if(u.ok){const d=await u.json();return GN(d)}else throw await WN("Generate Auth Token",u)}function t3(t,{fid:e}){return`${$N(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rx(t,e=!1){let s;const n=await zd(t.appConfig,a=>{if(!t2(a))throw Ai.create("not-registered");const o=a.authToken;if(!e&&n3(o))return a;if(o.requestStatus===1)return s=s3(t,e),a;{if(!navigator.onLine)throw Ai.create("app-offline");const l=a3(a);return s=r3(t,l),l}});return s?await s:n.authToken}async function s3(t,e){let s=await xv(t.appConfig);for(;s.authToken.requestStatus===1;)await KN(100),s=await xv(t.appConfig);const n=s.authToken;return n.requestStatus===0?Rx(t,e):n}function xv(t){return zd(t,e=>{if(!t2(e))throw Ai.create("not-registered");const s=e.authToken;return o3(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function r3(t,e){try{const s=await e3(t,e),n=Object.assign(Object.assign({},e),{authToken:s});return await $u(t.appConfig,n),s}catch(s){if(BN(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await ZN(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $u(t.appConfig,n)}throw s}}function t2(t){return t!==void 0&&t.registrationStatus===2}function n3(t){return t.requestStatus===2&&!i3(t)}function i3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+PP}function a3(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function o3(t){return t.requestStatus===1&&t.requestTime+qN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(t){const e=t,{installationEntry:s,registrationPromise:n}=await Px(e);return n?n.catch(console.error):Rx(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c3(t,e=!1){const s=t;return await u3(s),(await Rx(s,e)).token}async function u3(t){const{registrationPromise:e}=await Px(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(t){if(!t||!t.options)throw Gh("App Configuration");if(!t.name)throw Gh("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw Gh(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Gh(t){return Ai.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="installations",h3="installations-internal",m3=t=>{const e=t.getProvider("app").getImmediate(),s=d3(e),n=Vi(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},p3=t=>{const e=t.getProvider("app").getImmediate(),s=Vi(e,s2).getImmediate();return{getId:()=>l3(s),getToken:i=>c3(s,i)}};function f3(){jr(new ir(s2,m3,"PUBLIC")),jr(new ir(h3,p3,"PRIVATE"))}f3();Vs(ON,Ax);Vs(ON,Ax,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gu="analytics",x3="firebase_id",g3="origin",y3=60*1e3,v3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Dx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new xd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ss=new Mi("analytics","Analytics",b3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){if(!t.startsWith(Dx)){const e=Ss.create("invalid-gtag-resource",{gtagURL:t});return ys.warn(e.message),""}return t}function r2(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function j3(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function N3(t,e){const s=j3("firebase-js-sdk-policy",{createScriptURL:w3}),n=document.createElement("script"),i=`${Dx}?l=${t}&id=${e}`;n.src=s?s==null?void 0:s.createScriptURL(i):i,n.async=!0,document.head.appendChild(n)}function _3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function E3(t,e,s,n,i,a){const o=n[i];try{if(o)await e[o];else{const u=(await r2(s)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(l){ys.error(l)}t("config",i,a)}async function k3(t,e,s,n,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await r2(s);for(const u of o){const d=l.find(p=>p.measurementId===u),h=d&&e[d.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",n,i||{})}catch(a){ys.error(a)}}function S3(t,e,s,n){async function i(a,...o){try{if(a==="event"){const[l,u]=o;await k3(t,e,s,l,u)}else if(a==="config"){const[l,u]=o;await E3(t,e,s,n,l,u)}else if(a==="consent"){const[l,u]=o;t("consent",l,u)}else if(a==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){ys.error(l)}}return i}function C3(t,e,s,n,i){let a=function(...o){window[n].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=S3(a,t,e,s),{gtagCore:a,wrappedGtag:window[i]}}function T3(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(Dx)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=30,I3=1e3;class P3{constructor(e={},s=I3){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const n2=new P3;function R3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function D3(t){var e;const{appId:s,apiKey:n}=t,i={method:"GET",headers:R3(n)},a=v3.replace("{app-id}",s),o=await fetch(a,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw Ss.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function L3(t,e=n2,s){const{appId:n,apiKey:i,measurementId:a}=t.options;if(!n)throw Ss.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:n};throw Ss.create("no-api-key")}const o=e.getThrottleMetadata(n)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new F3;return setTimeout(async()=>{l.abort()},y3),i2({appId:n,apiKey:i,measurementId:a},o,l,e)}async function i2(t,{throttleEndTimeMillis:e,backoffCount:s},n,i=n2){var a;const{appId:o,measurementId:l}=t;try{await M3(n,e)}catch(u){if(l)return ys.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await D3(t);return i.deleteThrottleMetadata(o),u}catch(u){const d=u;if(!V3(d)){if(i.deleteThrottleMetadata(o),l)return ys.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw u}const h=Number((a=d==null?void 0:d.customData)===null||a===void 0?void 0:a.httpStatus)===503?Z0(s,i.intervalMillis,A3):Z0(s,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:s+1};return i.setThrottleMetadata(o,p),ys.debug(`Calling attemptFetch again in ${h} millis`),i2(t,p,n,i)}}function M3(t,e){return new Promise((s,n)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(s,i);t.addEventListener(()=>{clearTimeout(a),n(Ss.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function V3(t){if(!(t instanceof dr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class F3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function O3(t,e,s,n,i){if(i&&i.global){t("event",s,n);return}else{const a=await e,o=Object.assign(Object.assign({},n),{send_to:a});t("event",s,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q3(){if(Vf())try{await Ff()}catch(t){return ys.warn(Ss.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return ys.warn(Ss.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function U3(t,e,s,n,i,a,o){var l;const u=L3(t);u.then(j=>{s[j.measurementId]=j.appId,t.options.measurementId&&j.measurementId!==t.options.measurementId&&ys.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${j.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(j=>ys.error(j)),e.push(u);const d=q3().then(j=>{if(j)return n.getId()}),[h,p]=await Promise.all([u,d]);T3(a)||N3(a,h.measurementId),i("js",new Date);const x=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return x[g3]="firebase",x.update=!0,p!=null&&(x[x3]=p),i("config",h.measurementId,x),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.app=e}_delete(){return delete zo[this.app.options.appId],Promise.resolve()}}let zo={},gv=[];const yv={};let Wh="dataLayer",B3="gtag",vv,a2,bv=!1;function $3(){const t=[];if(Mf()&&t.push("This is a browser extension environment."),fj()||t.push("Cookies are not available."),t.length>0){const e=t.map((n,i)=>`(${i+1}) ${n}`).join(" "),s=Ss.create("invalid-analytics-context",{errorInfo:e});ys.warn(s.message)}}function G3(t,e,s){$3();const n=t.options.appId;if(!n)throw Ss.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ys.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ss.create("no-api-key");if(zo[n]!=null)throw Ss.create("already-exists",{id:n});if(!bv){_3(Wh);const{wrappedGtag:a,gtagCore:o}=C3(zo,gv,yv,Wh,B3);a2=a,vv=o,bv=!0}return zo[n]=U3(t,gv,yv,e,vv,Wh,s),new z3(t)}function W3(t=qf()){t=nt(t);const e=Vi(t,Gu);return e.isInitialized()?e.getImmediate():H3(t)}function H3(t,e={}){const s=Vi(t,Gu);if(s.isInitialized()){const i=s.getImmediate();if(ul(e,s.getOptions()))return i;throw Ss.create("already-initialized")}return s.initialize({options:e})}async function Q3(){if(Mf()||!fj()||!Vf())return!1;try{return await Ff()}catch{return!1}}function K3(t,e,s,n){t=nt(t),O3(a2,zo[t.app.options.appId],e,s,n).catch(i=>ys.error(i))}const wv="@firebase/analytics",jv="0.10.7";function Y3(){jr(new ir(Gu,(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return G3(n,i,s)},"PUBLIC")),jr(new ir("analytics-internal",t,"PRIVATE")),Vs(wv,jv),Vs(wv,jv,"esm2017");function t(e){try{const s=e.getProvider(Gu).getImmediate();return{logEvent:(n,i,a)=>K3(s,n,i,a)}}catch(s){throw Ss.create("interop-component-reg-failed",{reason:s})}}}Y3();const J3={apiKey:"AIzaSyAnMqL96i6YKjuOoOqeQk6RFqCotqShr7I",authDomain:"esig-prep-guide.firebaseapp.com",projectId:"esig-prep-guide",storageBucket:"esig-prep-guide.firebasestorage.app",messagingSenderId:"306261551267",appId:"1:306261551267:web:3fcad22f06bb934e78b716",measurementId:"G-7YK88B1NH4"},Lx=vj(J3),ne=NN(Lx),It=PA(Lx);typeof window<"u"&&Q3().then(t=>{t&&W3(Lx)});const o2=b.createContext(void 0),Te=()=>{const t=b.useContext(o2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Hh=async t=>{var n,i;if(!t)return null;const s=(await xt(be(ne,"users",t.uid))).data();return{uid:t.uid,email:t.email||"",displayName:t.displayName||(s==null?void 0:s.displayName)||((n=t.email)==null?void 0:n.split("@")[0])||"Utilisateur",emailVerified:t.emailVerified,isAdmin:(s==null?void 0:s.isAdmin)||!1,isSuperAdmin:(s==null?void 0:s.isSuperAdmin)||!1,isEditor:(s==null?void 0:s.isEditor)||!1,photoURL:t.photoURL||(s==null?void 0:s.photoURL),createdAt:(i=s==null?void 0:s.createdAt)==null?void 0:i.toDate()}},X3=({children:t})=>{const[e,s]=b.useState(null),[n,i]=b.useState(!0);b.useEffect(()=>{const R=wT(It,async S=>{if(S){const y=be(ne,"users",S.uid);if(!(await xt(y)).exists()){const P={uid:S.uid,email:S.email||"",emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),...S.displayName?{displayName:S.displayName}:{},...S.photoURL?{photoURL:S.photoURL}:{}};await Ns(y,P)}const _=await Hh(S);s(_)}else s(null);i(!1)});return()=>R()},[]);const C={currentUser:e,loading:n,register:async(R,S,y)=>{try{const v=await Wj(It,R,S),{user:_}=v;await Qj(_,{displayName:y}),await yy(_);const P={uid:_.uid,email:_.email||"",emailVerified:_.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),updatedAt:is(),...y?{displayName:y}:{},..._.photoURL?{photoURL:_.photoURL}:{}};await Ns(be(ne,"users",_.uid),P);const L=await Hh(_);return s(L),_}catch(v){throw console.error("Erreur lors de l'inscription:",v),v}},login:async(R,S)=>{try{const v=(await Hj(It,R,S)).user,_=be(ne,"users",v.uid);(await xt(_)).exists()||await Ns(_,{uid:v.uid,email:v.email,displayName:v.displayName,emailVerified:v.emailVerified,isAdmin:!1,createdAt:is(),photoURL:v.photoURL??void 0});const L=await Hh(v);return s(L),L}catch(y){throw console.error("Erreur de connexion:",y),y}},loginWithGoogle:async()=>{var y,v;const R=new Ir;let S=null;try{S=(await wy(It,R)).user,console.log("[Google] Utilisateur connect:",S);const P=be(ne,"users",S.uid);let L;try{if(L=await xt(P),console.log("[Google] Document utilisateur existe:",L.exists()),!L.exists())try{await Ns(P,{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),photoURL:S.photoURL??void 0}),console.log("[Google] Document utilisateur cr dans Firestore")}catch(N){console.error("[Google] Erreur lors de la cration du document utilisateur:",N)}}catch(N){console.error("[Google] Erreur lors de la vrification du document utilisateur:",N),L={exists:()=>!1,data:()=>({isAdmin:!1,isEditor:!1})}}const M={uid:S.uid,email:S.email||"",displayName:S.displayName||"",emailVerified:S.emailVerified,isAdmin:L.exists()?((y=L.data())==null?void 0:y.isAdmin)??!1:!1,isEditor:L.exists()?((v=L.data())==null?void 0:v.isEditor)??!1:!1,createdAt:S.metadata.creationTime?new Date(S.metadata.creationTime):void 0,photoURL:S.photoURL??void 0};return console.log("[Google] AppUser retourn:",M),M}catch(_){throw console.error("[Google] Erreur dans loginWithGoogle:",_,S),_}},loginWithGithub:async()=>{var y,v;const R=new Pr;let S=null;try{S=(await wy(It,R)).user,console.log("[GitHub] Utilisateur connect:",S);const P=be(ne,"users",S.uid);let L;try{if(L=await xt(P),console.log("[GitHub] Document utilisateur existe:",L.exists()),!L.exists())try{await Ns(P,{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,isAdmin:!1,isEditor:!1,createdAt:is(),photoURL:S.photoURL??void 0}),console.log("[GitHub] Document utilisateur cr dans Firestore")}catch(N){console.error("[GitHub] Erreur lors de la cration du document utilisateur:",N)}}catch(N){console.error("[GitHub] Erreur lors de la vrification du document utilisateur:",N),L={exists:()=>!1,data:()=>({isAdmin:!1,isEditor:!1})}}const M={uid:S.uid,email:S.email||"",displayName:S.displayName||"",emailVerified:S.emailVerified,isAdmin:L.exists()?((y=L.data())==null?void 0:y.isAdmin)??!1:!1,isEditor:L.exists()?((v=L.data())==null?void 0:v.isEditor)??!1:!1,createdAt:S.metadata.creationTime?new Date(S.metadata.creationTime):void 0,photoURL:S.photoURL??void 0};return console.log("[GitHub] AppUser retourn:",M),M}catch(_){throw console.error("[GitHub] Erreur dans loginWithGithub:",_,S),_}},logout:async()=>{try{await jT(It),s(null)}catch(R){throw console.error("Erreur lors de la dconnexion:",R),R}},isAdmin:()=>!!(e&&e.isAdmin),isEditor:()=>!!(e&&e.isEditor),isSuperAdmin:async()=>{if(!e)return!1;try{const R=be(ne,"users",e.uid),S=await xt(R);return S.exists()&&S.data().isSuperAdmin||!1}catch(R){return console.error("Erreur lors de la vrification du statut superadmin:",R),!1}},sendVerificationEmail:async()=>{if(It.currentUser)try{await yy(It.currentUser)}catch(R){throw console.error("Erreur lors de l'envoi de l'email de vrification:",R),R}}};return r.jsx(o2.Provider,{value:C,children:t})},l2=b.createContext(void 0),Ui=()=>{const t=b.useContext(l2);if(t===void 0)throw new Error("useContent must be used within a ContentProvider");return t},Z3=({children:t})=>{const[e,s]=b.useState([]),[n,i]=b.useState([]),[a,o]=b.useState([]),[l,u]=b.useState(!0);b.useEffect(()=>{(async()=>{u(!0);const w=await Ye(Se(ne,"guideSections"));i(w.docs.map(I=>({id:I.id,...I.data()})));const E=await Ye(Se(ne,"resources"));s(E.docs.map(I=>({id:I.id,...I.data()})));const A=await Ye(Se(ne,"faq"));o(A.docs.map(I=>({id:I.id,...I.data()}))),u(!1)})()},[]);const d=async()=>{const f=await Ye(Se(ne,"guideSections"));i(f.docs.map(A=>({id:A.id,...A.data()})));const w=await Ye(Se(ne,"resources"));s(w.docs.map(A=>({id:A.id,...A.data()})));const E=await Ye(Se(ne,"faq"));o(E.docs.map(A=>({id:A.id,...A.data()})))},N={resources:e,guideSections:n,faqItems:a,addResource:async f=>{await Ut(Se(ne,"resources"),f),await d()},updateResource:async(f,w)=>{await ts(be(ne,"resources",f),w),await d()},deleteResource:async f=>{await Rn(be(ne,"resources",f)),await d()},addGuideSection:async f=>{const w={...f};(!f.subSections||f.subSections.length===0)&&delete w.subSections,await Ut(Se(ne,"guideSections"),w),await d()},updateGuideSection:async(f,w)=>{const E={...w};"subSections"in E&&(!E.subSections||E.subSections.length===0)&&delete E.subSections,await ts(be(ne,"guideSections",f),E),await d()},deleteGuideSection:async f=>{await Rn(be(ne,"guideSections",f)),await d()},addFAQItem:async f=>{await Ut(Se(ne,"faq"),f),await d()},updateFAQItem:async(f,w)=>{await ts(be(ne,"faq",f),w),await d()},deleteFAQItem:async f=>{await Rn(be(ne,"faq",f)),await d()},getResourcesByPhase:f=>e.filter(w=>w.phase===f),getGuideSectionsByPhase:f=>n.filter(w=>w.phase===f).sort((w,E)=>w.order-E.order),getFAQItemsByPhase:f=>a.filter(w=>w.phase===f),searchResources:f=>{const w=f.toLowerCase();return e.filter(E=>E.title.toLowerCase().includes(w)||E.description.toLowerCase().includes(w)||E.category.toLowerCase().includes(w))}};return l?r.jsx("div",{className:"p-8 text-center",children:"Chargement du contenu..."}):r.jsx(l2.Provider,{value:N,children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const s=b.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:u,...d},h)=>b.createElement("svg",{ref:h,...eR,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${tR(t)}`,l].join(" "),...d},[...e.map(([p,x])=>b.createElement(p,x)),...Array.isArray(u)?u:[u]]));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=K("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=K("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sR=K("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nR=K("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=K("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aR=K("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=K("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M8 7h6",key:"1f0q6e"}],["path",{d:"M8 11h8",key:"vwpz6n"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=K("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=K("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=K("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=K("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=K("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=K("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=K("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=K("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=K("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hR=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bo=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m2=K("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=K("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=K("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pR=K("Copyright",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M14.83 14.83a4 4 0 1 1 0-5.66",key:"1i56pz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=K("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=K("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=K("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=K("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=K("FilePen",[["path",{d:"M12 22h6a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v10",key:"x7tsz2"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10.4 12.6a2 2 0 1 1 3 3L8 21l-4 1 1-4Z",key:"o3xyfb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=K("FileQuestion",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M10 10.3c.2-.4.5-.8.9-1a2.1 2.1 0 0 1 2.6.4c.3.4.5.8.5 1.3 0 1.3-2 2-2 2",key:"1umxtm"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=K("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=K("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x2=K("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ap=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=K("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=K("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qh=K("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=K("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=K("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=K("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=K("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=K("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=K("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=K("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=K("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g2=K("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=K("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=K("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kh=K("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=K("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ip=K("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=K("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=K("MoveVertical",[["polyline",{points:"8 18 12 22 16 18",key:"1uutw3"}],["polyline",{points:"8 6 12 2 16 6",key:"d60sxy"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=K("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=K("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=K("Podcast",[["circle",{cx:"12",cy:"11",r:"1",key:"1gvufo"}],["path",{d:"M11 17a1 1 0 0 1 2 0c0 .5-.34 3-.5 4.5a.5.5 0 0 1-1 0c-.16-1.5-.5-4-.5-4.5Z",key:"1n5fvv"}],["path",{d:"M8 14a5 5 0 1 1 8 0",key:"fc81rn"}],["path",{d:"M17 18.5a9 9 0 1 0-10 0",key:"jqtxkf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=K("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=K("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=K("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=K("ServerCrash",[["path",{d:"M6 10H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-2",key:"4b9dqc"}],["path",{d:"M6 14H4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2h-2",key:"22nnkd"}],["path",{d:"M6 6h.01",key:"1utrut"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"m13 6-4 6h6l-4 6",key:"14hqih"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=K("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=K("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=K("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=K("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=K("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y2=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=K("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=K("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=K("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v2=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=K("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b2=K("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w2=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=K("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=K("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Rp=({children:t,fallback:e=null})=>{const{currentUser:s,isAdmin:n}=Te(),[i,a]=b.useState(!1),[o,l]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(!s||!n()){a(!1),l(!1);return}try{const d=be(ne,"users",s.uid),h=await xt(d);h.exists()&&h.data().isSuperAdmin?a(!0):a(!1)}catch(d){console.error("Erreur lors de la vrification du statut superadmin:",d),a(!1)}finally{l(!1)}})()},[s,n]),o?null:i?r.jsx(r.Fragment,{children:t}):r.jsx(r.Fragment,{children:e})},zR=()=>{var x,j;const{currentUser:t,logout:e,isAdmin:s,isEditor:n}=Te(),[i,a]=b.useState(!1),[o,l]=b.useState(!1),[u,d]=b.useState(!1),h=ur();b.useEffect(()=>{const C=()=>{d(window.scrollY>10)};return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[]),b.useEffect(()=>{a(!1),l(!1)},[h]);const p=async()=>{try{await e()}catch(C){console.error("Logout failed",C)}};return r.jsx("header",{className:`sticky top-0 z-50 transition-all duration-300 ${u?"bg-white shadow-md":"bg-gradient-to-r from-blue-900 to-blue-800"}`,children:r.jsxs("div",{className:"container mx-auto px-4 py-3",children:[r.jsxs("div",{className:"flex justify-between items-center space-x-6",children:[r.jsx(Y,{to:"/",className:"flex items-center",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center shadow-sm",children:r.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),r.jsx("div",{className:`font-bold text-xl transition-colors duration-300 ${u?"text-blue-900":"text-white"}`,children:"ESIGELEC Prep Guide"})]})}),r.jsx("nav",{className:"hidden md:flex items-center md:space-x-4 lg:space-x-8",children:t&&r.jsxs(r.Fragment,{children:[r.jsxs(Y,{to:"/dashboard",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(Hu,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"md:hidden lg:inline",children:"Tableau de bord"}),r.jsx("span",{className:"md:inline lg:hidden",children:"Accueil"})]}),r.jsxs(Y,{to:"/applications",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(Nv,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Applications"})]}),r.jsxs(Y,{to:"/resources",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(We,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Ressources"})]}),r.jsxs(Y,{to:"/faq",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(ot,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"FAQ"})]}),r.jsxs(Y,{to:"/tutorial",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(Cp,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Tutoriel"})]}),r.jsxs(Y,{to:"/help",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(cr,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Aide"})]}),r.jsx(Rp,{children:r.jsxs(Y,{to:"/chat-ai",className:`transition-colors duration-300 hover:text-blue-400 flex items-center text-sm lg:text-base ${u?"text-blue-800":"text-white"}`,children:[r.jsx(wl,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Assistant IA"})]})}),s()&&r.jsxs(Y,{to:"/admin",className:`flex items-center text-white bg-blue-700 hover:bg-blue-600 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 shadow-sm ${h.pathname.startsWith("/admin")?"bg-blue-600":""}`,children:[r.jsx(Ot,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Admin"})]}),n()&&!s()&&r.jsxs(Y,{to:"/editor",className:`flex items-center text-white bg-green-700 hover:bg-green-600 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 shadow-sm ${h.pathname.startsWith("/editor")?"bg-green-600":""}`,children:[r.jsx(Br,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"dition"})]})]})}),r.jsx("div",{className:"hidden md:flex items-center",children:t?r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>l(!o),className:`flex items-center space-x-2 transition-colors duration-300 border border-blue-200 bg-white/60 rounded-lg px-2 py-1 shadow-sm ${u?"text-blue-800":"text-white"}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-700 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-medium text-sm",children:(t.displayName||t.email||"Utilisateur").charAt(0).toUpperCase()})}),r.jsx("span",{children:t.displayName||t.email||"Utilisateur"}),r.jsx(Dn,{className:"w-4 h-4"})]}),o&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10",children:[r.jsxs(Y,{to:"/profile",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Profil"})]}),s()&&r.jsxs(Y,{to:"/admin",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[r.jsx(Qu,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Administration"})]}),n()&&!s()&&r.jsxs(Y,{to:"/editor",className:"flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100",children:[r.jsx(Br,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Edition"})]}),r.jsxs("button",{onClick:p,className:"flex items-center w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100",children:[r.jsx(_v,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Dconnexion"})]})]})]}):r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(Y,{to:"/login",className:`font-medium transition-colors duration-300 ${u?"text-blue-800":"text-white"}`,children:"Connexion"}),r.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200",children:"Inscription"})]})}),r.jsx("button",{className:"md:hidden",onClick:()=>a(!i),children:i?r.jsx(St,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`}):r.jsx(IR,{className:`w-6 h-6 ${u?"text-blue-800":"text-white"}`})})]}),i&&r.jsx("div",{className:"md:hidden absolute top-full left-0 right-0 bg-gradient-to-r from-blue-900 to-blue-800 shadow-lg pb-4",children:r.jsx("div",{className:"container mx-auto px-4 py-2",children:t?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"py-3 px-2 mb-3 flex items-center border-b border-blue-700",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:r.jsx("span",{className:"text-blue-800 font-medium text-sm",children:((x=t.displayName)==null?void 0:x.charAt(0))||((j=t.email)==null?void 0:j.charAt(0))||"U"})}),r.jsx("span",{className:"text-white font-medium",children:t.displayName||t.email||"Utilisateur"})]}),r.jsxs(Y,{to:"/profile",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Profil"]}),r.jsxs(Y,{to:"/dashboard",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(Hu,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Tableau de bord"})]}),r.jsxs(Y,{to:"/applications",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(Nv,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Applications"})]}),r.jsxs(Y,{to:"/resources",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(We,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Ressources"})]}),r.jsxs(Y,{to:"/faq",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(ot,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"FAQ"})]}),r.jsxs(Y,{to:"/tutorial",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(Cp,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Tutoriel"})]}),r.jsxs(Y,{to:"/help",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(cr,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Aide"})]}),r.jsx(Rp,{children:r.jsxs(Y,{to:"/chat-ai",className:"flex items-center py-2 text-white",onClick:()=>a(!1),children:[r.jsx(wl,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Assistant IA"})]})}),s()&&r.jsxs(Y,{to:"/admin",className:"flex items-center px-3 py-1.5 my-2 rounded-full bg-blue-700 hover:bg-blue-600 text-white transition-colors shadow-md",onClick:()=>a(!1),children:[r.jsx(Ot,{className:"w-4 h-4 mr-1.5"}),r.jsx("span",{children:"Administration"})]}),n()&&!s()&&r.jsxs(Y,{to:"/editor",className:"flex items-center px-3 py-1.5 my-2 rounded-full bg-green-700 hover:bg-green-600 text-white transition-colors shadow-md",onClick:()=>a(!1),children:[r.jsx(Br,{className:"w-4 h-4 mr-1.5"}),r.jsx("span",{children:"Edition"})]}),r.jsxs("button",{onClick:p,className:"flex items-center py-2 text-white",children:[r.jsx(_v,{className:"w-4 h-4 mr-2"}),r.jsx("span",{children:"Dconnexion"})]})]}):r.jsxs("div",{className:"flex flex-col space-y-4",children:[r.jsx(Y,{to:"/login",className:"font-medium text-white",onClick:()=>a(!1),children:"Connexion"}),r.jsx(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-4 py-2 rounded-md font-medium transition-colors duration-200 text-center",onClick:()=>a(!1),children:"Inscription"})]})})})]})})},BR=()=>r.jsx("div",{className:"bg-gray-100 py-3 border-t border-gray-200",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex flex-wrap justify-center text-xs text-gray-500 gap-4",children:[r.jsx(Y,{to:"/legal/cgu",className:"hover:text-gray-700 hover:underline",children:"Conditions Gnrales d'Utilisation"}),r.jsx(Y,{to:"/legal/privacy-policy",className:"hover:text-gray-700 hover:underline",children:"Politique de Confidentialit"}),r.jsx(Y,{to:"/legal/legal-notice",className:"hover:text-gray-700 hover:underline",children:"Mentions Lgales"}),r.jsx(Y,{to:"/legal/moderation-charter",className:"hover:text-gray-700 hover:underline",children:"Charte de Modration"}),r.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),localStorage.removeItem("cookieConsent"),window.location.reload()},className:"hover:text-gray-700 hover:underline cursor-pointer",children:"Paramtres des cookies"})]})})}),$R=()=>{const t=new Date().getFullYear();return r.jsxs("footer",{className:"bg-blue-900 text-white",children:[r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"col-span-1 md:col-span-1",children:[r.jsxs(Y,{to:"/",className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center mr-2",children:r.jsx("div",{className:"text-blue-900 font-bold text-lg",children:"E"})}),r.jsx("div",{className:"font-bold text-xl text-white",children:"ESIGELEC Prep Guide"})]}),r.jsx("p",{className:"mt-4 text-blue-200",children:"Votre guide pour faciliter votre transition de CPS vers l'ESIGELEC"})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liens rapides"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(Y,{to:"/dashboard",className:"text-blue-200 hover:text-white transition-colors",children:"Tableau de bord"})}),r.jsx("li",{children:r.jsx(Y,{to:"/resources",className:"text-blue-200 hover:text-white transition-colors",children:"Ressources"})}),r.jsx("li",{children:r.jsx(Y,{to:"/faq",className:"text-blue-200 hover:text-white transition-colors",children:"FAQ"})}),r.jsx("li",{children:r.jsx(Y,{to:"/feedback",className:"text-blue-200 hover:text-white transition-colors",children:"Feedback"})})]})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Phases"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx(Y,{to:"/resources?phase=post-cps",className:"text-blue-200 hover:text-white transition-colors",children:"Post-CPS"})}),r.jsx("li",{children:r.jsx(Y,{to:"/resources?phase=during-process",className:"text-blue-200 hover:text-white transition-colors",children:"Pendant les dmarches"})}),r.jsx("li",{children:r.jsx(Y,{to:"/resources?phase=pre-arrival",className:"text-blue-200 hover:text-white transition-colors",children:"Pr-arrive en France"})})]})]}),r.jsxs("div",{className:"col-span-1",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact"}),r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(zr,{className:"w-4 h-4 mr-2"}),r.jsx("a",{href:"mailto:contact@esiguide.com",className:"text-blue-200 hover:text-white transition-colors",children:"abdoul.diouf2@groupe-esigelec.org"})]}),r.jsxs("div",{className:"flex space-x-4 mt-4",children:[r.jsx("a",{href:"https://www.linkedin.com/in/abdoul-ahad-mback%C3%A9-diouf-5b04b4213/",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(TR,{className:"w-5 h-5"})}),r.jsx("a",{href:"https://github.com/AbdoulDiouf2",className:"text-blue-200 hover:text-white transition-colors",children:r.jsx(NR,{className:"w-5 h-5"})})]})]})]}),r.jsxs("div",{className:"border-t border-blue-800 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[r.jsxs("p",{className:"text-sm text-blue-200",children:[" ",t," ESIGELEC Prep Guide. Tous droits rservs."]}),r.jsxs("p",{className:"text-sm text-blue-200 mt-2 md:mt-0 flex items-center",children:["Dvelopp avec ",r.jsx(_R,{className:"w-4 h-4 mx-1 text-red-400"})," par Abdoul Ahad Mback DIOUF - PROMO CPS 2020/2022"]})]})]}),r.jsx(BR,{})]})},ws=({children:t})=>{const{currentUser:e,loading:s,isAdmin:n}=Te();return s?r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-900"})}):e?n()?r.jsx(r.Fragment,{children:t}):r.jsx(cl,{to:"/dashboard"}):r.jsx(cl,{to:"/login"})},go=({children:t})=>{const{currentUser:e,isAdmin:s}=Te(),[n,i]=b.useState(null),[a,o]=b.useState(!0);return b.useEffect(()=>{(async()=>{if(!e||!s()){i(!1),o(!1);return}try{const u=be(ne,"users",e.uid),d=await xt(u);d.exists()&&d.data().isSuperAdmin?i(!0):i(!1)}catch(u){console.error("Erreur lors de la vrification du statut superadmin:",u),i(!1)}finally{o(!1)}})()},[e,s]),a?r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700 mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Vrification des autorisations..."})]}):n?r.jsx(r.Fragment,{children:t}):r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen",children:[r.jsx(Ot,{className:"w-16 h-16 text-red-500 mb-4"}),r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Accs refus"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Cette page est rserve aux super administrateurs."}),r.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retour"})]})},pr=({children:t})=>{const{currentUser:e,loading:s,isEditor:n,isAdmin:i}=Te();return s?r.jsx("div",{className:"flex justify-center items-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?!n()&&!i()?r.jsx(cl,{to:"/"}):r.jsx(r.Fragment,{children:t}):r.jsx(cl,{to:"/login"})},GR=()=>{const[t,e]=b.useState({essential:!0,analytics:!1,marketing:!1,acceptedAt:null}),[s,n]=b.useState(!1),[i,a]=b.useState(!1);b.useEffect(()=>{const p=localStorage.getItem("cookieConsent");if(p)try{const x=JSON.parse(p);e({...x,acceptedAt:x.acceptedAt?new Date(x.acceptedAt):null}),n(!1)}catch(x){console.error("Erreur lors de la lecture du consentement:",x),n(!0)}else n(!0)},[]);const o=p=>{e(x=>({...x,[p]:!x[p]}))},l=()=>{const p={essential:!0,analytics:!0,marketing:!0,acceptedAt:new Date};e(p),h(p),n(!1),a(!1)},u=()=>{const p={essential:!0,analytics:!1,marketing:!1,acceptedAt:new Date};e(p),h(p),n(!1),a(!1)},d=()=>{const p={...t,acceptedAt:new Date};e(p),h(p),n(!1),a(!1)},h=p=>{localStorage.setItem("cookieConsent",JSON.stringify(p)),p.analytics&&console.log("Analytics activ"),p.marketing&&console.log("Marketing activ")};return!s&&!i?null:r.jsxs(r.Fragment,{children:[i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40"}),s&&!i&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-40",children:r.jsx("div",{className:"container mx-auto",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[r.jsxs("div",{className:"flex-grow",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Votre vie prive"}),r.jsx("p",{className:"text-gray-600 text-sm md:text-base",children:"Nous utilisons des cookies pour amliorer votre exprience sur notre site, personnaliser le contenu et analyser notre trafic. Vous pouvez choisir d'accepter tous les cookies ou personnaliser vos prfrences."}),r.jsx("div",{className:"mt-1",children:r.jsx(Y,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline text-sm",target:"_blank",children:"En savoir plus sur notre politique de confidentialit"})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[r.jsx("button",{onClick:()=>a(!0),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Personnaliser"}),r.jsx("button",{onClick:u,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Refuser"}),r.jsx("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Tout accepter"})]})]})})}),i&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4 md:p-6 z-50 max-h-[80vh] overflow-y-auto",children:r.jsxs("div",{className:"container mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Paramtres de confidentialit"}),r.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(St,{size:24})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies essentiels"}),r.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[r.jsx("input",{type:"checkbox",checked:!0,disabled:!0,className:"absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-not-allowed right-0 z-10 border-gray-300 transition-all duration-300"}),r.jsx("label",{className:"block overflow-hidden h-6 rounded-full bg-gray-300 cursor-not-allowed transition-all duration-300"})]})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies sont ncessaires au fonctionnement du site et ne peuvent pas tre dsactivs. Ils sont gnralement dfinis en rponse  des actions que vous effectuez, comme dfinir vos prfrences de confidentialit, vous connecter ou remplir des formulaires."})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies d'analyse"}),r.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[r.jsx("input",{type:"checkbox",checked:t.analytics,onChange:()=>o("analytics"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.analytics?"border-white":"border-gray-300"}`}),r.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.analytics?"bg-blue-600":"bg-gray-300"}`})]})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies nous permettent de compter les visites et les sources de trafic afin de mesurer et d'amliorer les performances de notre site. Ils nous aident  savoir quelles pages sont les plus et les moins populaires, et  voir comment les visiteurs se dplacent sur le site."})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Cookies marketing"}),r.jsxs("div",{className:"relative inline-block w-10 mr-2 align-middle select-none",children:[r.jsx("input",{type:"checkbox",checked:t.marketing,onChange:()=>o("marketing"),className:`absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0 z-10 transition-all duration-300 ${t.marketing?"border-white":"border-gray-300"}`}),r.jsx("label",{className:`block overflow-hidden h-6 rounded-full cursor-pointer transition-all duration-300 ${t.marketing?"bg-blue-600":"bg-gray-300"}`})]})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Ces cookies peuvent tre dfinis via notre site par nos partenaires publicitaires. Ils peuvent tre utiliss pour tablir un profil de vos intrts et vous proposer des publicits pertinentes sur d'autres sites."})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[r.jsx("button",{onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Enregistrer mes prfrences"})]})]})})]})},WR=()=>{const[t,e]=b.useState(!1),s=()=>{window.pageYOffset>300?e(!0):e(!1)},n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return b.useEffect(()=>(window.addEventListener("scroll",s),()=>window.removeEventListener("scroll",s)),[]),r.jsx(r.Fragment,{children:t&&r.jsx("button",{onClick:n,className:"fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg z-50 transition-all duration-300 ease-in-out transform hover:scale-110 focus:outline-none","aria-label":"Retour en haut",title:"Retour en haut",children:r.jsx(rR,{size:20})})})},Bx=[{value:"cps",label:"tudiant au CPS",description:"Actuellement en prparation au CPS de Dakar",iconName:"MapPin",iconColor:"text-blue-500"},{value:"esigelec",label:"tudiant  l'ESIGELEC",description:"Actuellement tudiant  l'ESIGELEC en France",iconName:"GraduationCap",iconColor:"text-green-500"},{value:"alumni",label:"Alumni",description:"Ancien tudiant de l'ESIGELEC",iconName:"User",iconColor:"text-purple-500"},{value:"other",label:"Autre",description:"Autre statut",iconName:"User",iconColor:"text-gray-500"}],HR=t=>{if(!t)return"Non dfini";const e=Bx.find(s=>s.value===t);return e?e.label:"Non dfini"};function QR(){const{currentUser:t}=Te(),[e,s]=b.useState(!1),[n,i]=b.useState(!0);b.useEffect(()=>{t&&(async()=>{if(!t){console.log("Pas d'utilisateur connect"),i(!1);return}try{console.log("Vrification du statut pour",t.uid);const l=be(ne,"users",t.uid),u=await xt(l);if(!u.exists())console.log('Document utilisateur inexistant, cration avec statut "none"'),await Ns(l,{uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,status:"none",createdAt:new Date}),s(!0);else{const d=u.data();console.log("Donnes utilisateur:",d),d.status===void 0?(console.log('Champ statut inexistant, initialisation  "none"'),await ts(l,{status:"none"}),s(!0)):d.status==="none"?(console.log('Statut "none", affichage du modal'),s(!0)):console.log("Statut dj dfini:",d.status)}}catch(l){console.error("Erreur lors de la vrification du statut:",l)}finally{i(!1)}})()},[t]);const a=async o=>{if(t)try{i(!0),console.log(`Mise  jour du statut: "${o}" pour l'utilisateur`,t.uid);const l=be(ne,"users",t.uid);await ts(l,{status:o,updatedAt:new Date}),console.log("Statut mis  jour avec succs"),s(!1)}catch(l){console.error("Erreur lors de la mise  jour du statut:",l)}finally{i(!1)}};return console.log("Rendu du composant UserStatusModal",{isLoading:n,showModal:e,currentUser:!!t}),n?(console.log("Chargement en cours..."),null):e?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6 relative",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Quel est votre statut ?"}),r.jsx("button",{onClick:()=>s(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(St,{className:"w-6 h-6"})})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Pour mieux vous accompagner, veuillez nous indiquer votre situation actuelle."}),r.jsx("div",{className:"space-y-3",children:Bx.map(o=>r.jsxs("button",{onClick:()=>a(o.value),disabled:n,className:"w-full flex items-start p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"mr-3 mt-0.5",children:[o.iconName==="User"&&r.jsx(Ts,{className:`w-6 h-6 ${o.iconColor}`}),o.iconName==="GraduationCap"&&r.jsx(Fx,{className:`w-6 h-6 ${o.iconColor}`}),o.iconName==="MapPin"&&r.jsx(Bd,{className:`w-6 h-6 ${o.iconColor}`})]}),r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"font-medium text-gray-900",children:o.label}),r.jsx("p",{className:"text-sm text-gray-500",children:o.description})]})]},o.value))}),n&&r.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:"Enregistrement en cours..."})]})}):(console.log("Modal non affich car showModal est false"),null)}const kv=[{id:1,name:"ESIGELEC",logoUrl:"https://www.francemobilites.fr/sites/frenchmobility/files/images/2021/06/esigelec-rouen-2baselines_0.png",alt:"Logo ESIGELEC"},{id:2,name:"CPS Dakar",logoUrl:"https://www.linkedin.com/dms/prv/image/v2/D5606AQElmOjZWkdvVQ/messaging-image-720/B56ZbuZEzhHgAg-/0/1747756287373?m=AQKVAjHWySZCJgAAAZbuZodpjb5LvuiQx9ZVPlT0orYGHXGSu06cbQo20w&ne=1&v=beta&t=aV_zWSMv5x9jCsPpEsc7DAEo1kBvCNvQWpufEYl-iEo",alt:"Logo CPS Dakar"},{id:3,name:"ESMT",logoUrl:"https://burkina24.com/wp-content/uploads/2023/05/ESMT-logo.png",alt:"Logo ESMT"},{id:4,name:"College Sacr Coeur",logoUrl:"https://www.courssacrecoeur.info/images/logo.gif",alt:"Logo Collge Sacr Coeur"}],KR=()=>{const t=[...kv,...kv];return r.jsx("div",{className:"bg-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-8",children:"Les coles partenaires"}),r.jsx("div",{className:"infinite-logo-container",children:r.jsx("div",{className:"infinite-logo-scroll",children:t.map((e,s)=>r.jsx("div",{className:"logo-item",children:r.jsx("div",{className:"flex items-center justify-center h-40 bg-white rounded-lg shadow-sm p-4",children:r.jsx("img",{src:e.logoUrl,alt:e.alt,className:"max-h50 max-w-full object-contain"})})},`${e.id}-${s}`))})})]})})},YR=()=>{const{currentUser:t}=Te(),[e,s]=xi.useState(!1);return xi.useEffect(()=>{s(!0)},[]),r.jsxs("div",{className:"flex flex-col min-h-screen",children:[r.jsx("section",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-16 md:py-24",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center",children:[r.jsxs("div",{className:"md:w-1/2 mb-8 md:mb-0",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:"Votre guide pour passer de CPS  l'ESIGELEC"}),r.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8",children:"Trouvez toutes les ressources et l'accompagnement ncessaires pour russir votre transition des Classes Prparatoires Scientifiques de Dakar vers l'ESIGELEC  Rouen."}),r.jsx("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:t?r.jsxs(Y,{to:"/dashboard",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Accdez  votre tableau de bord",r.jsx(Wu,{className:"ml-2 w-5 h-5"})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Y,{to:"/register",className:"bg-white text-blue-900 hover:bg-blue-50 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:["Commencer maintenant",r.jsx(Wu,{className:"ml-2 w-5 h-5"})]}),r.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-6 py-3 rounded-md font-medium transition-colors duration-200 flex items-center justify-center",children:"J'ai dj un compte"})]})})]}),r.jsx("div",{className:"md:w-1/2 flex justify-center md:pl-8 mt-6 md:mt-0",children:r.jsx("img",{src:"https://welcome-esigelec.fr/wp-content/uploads/2023/01/J8A1391hd-800x800.jpg",alt:"Campus universitaire",className:`rounded-lg shadow-lg w-full max-w-[320px] md:max-w-[380px] lg:max-w-[420px] h-auto object-cover transition-opacity duration-700 ease-out ${e?"opacity-100":"opacity-0"}`})})]})})}),r.jsx("section",{className:"py-16 bg-white",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Tout ce dont vous avez besoin pour russir votre transition"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme vous guide  travers chaque tape du processus, du post-CPS jusqu' votre arrive en France."})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[r.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(qR,{className:"w-7 h-7 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guides tape par tape"}),r.jsx("p",{className:"text-gray-600",children:"Des guides dtaills pour chaque phase de votre parcours, de la fin des CPS jusqu' votre installation  Rouen."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[r.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(Cp,{className:"w-7 h-7 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Ressources documentaires"}),r.jsx("p",{className:"text-gray-600",children:"Accdez  tous les documents ncessaires pour vos dmarches Campus France, visa, logement et plus encore."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[r.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(Ox,{className:"w-7 h-7 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Guide de la vie en France"}),r.jsx("p",{className:"text-gray-600",children:"Dcouvrez tout ce que vous devez savoir sur la vie  Rouen, les transports, le logement et la vie tudiante."})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-8 shadow-sm hover:shadow-md transition-shadow duration-300",children:[r.jsx("div",{className:"w-14 h-14 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:r.jsx(ct,{className:"w-7 h-7 text-blue-900"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Communaut d'entraide"}),r.jsx("p",{className:"text-gray-600",children:"Posez vos questions et bnficiez de l'exprience des anciens tudiants qui ont suivi le mme parcours."})]})]})]})}),r.jsx("section",{className:"py-16 bg-gray-50",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Les trois phases de votre parcours"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Notre plateforme couvre l'intgralit de votre parcours en trois grandes phases."})]}),r.jsxs("div",{className:"flex flex-col space-y-6",children:[r.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:r.jsxs("div",{className:"flex flex-col md:flex-row",children:[r.jsxs("div",{className:"md:w-1/3 bg-blue-800 text-white p-6 flex flex-col justify-center",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Post-CPS"}),r.jsx("p",{className:"text-blue-100",children:"Prparation des dossiers et candidatures aprs la fin des classes prparatoires."})]}),r.jsx("div",{className:"md:w-2/3 p-6",children:r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),r.jsx("span",{children:"Prparation dossier Campus France"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),r.jsx("span",{children:"Candidature ESIGELEC"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-800"})}),r.jsx("span",{children:"Validation des acquis et prrequis"})]})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:r.jsxs("div",{className:"flex flex-col md:flex-row",children:[r.jsxs("div",{className:"md:w-1/3 bg-blue-700 text-white p-6 flex flex-col justify-center",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pendant les dmarches"}),r.jsx("p",{className:"text-blue-100",children:"Gestion des procdures administratives et prparation pratique."})]}),r.jsx("div",{className:"md:w-2/3 p-6",children:r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),r.jsx("span",{children:"Demande de visa tudiant"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),r.jsx("span",{children:"Recherche de logement"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-700"})}),r.jsx("span",{children:"Prparation financire et budgtaire"})]})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow duration-300",children:r.jsxs("div",{className:"flex flex-col md:flex-row",children:[r.jsxs("div",{className:"md:w-1/3 bg-blue-600 text-white p-6 flex flex-col justify-center",children:[r.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Pr-arrive en France"}),r.jsx("p",{className:"text-blue-100",children:"Derniers prparatifs et informations sur l'arrive et l'installation."})]}),r.jsx("div",{className:"md:w-2/3 p-6",children:r.jsxs("ul",{className:"space-y-2",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),r.jsx("span",{children:"Transport vers la France"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),r.jsx("span",{children:"Installation et dmarches  l'arrive"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-100 flex items-center justify-center mr-2 mt-1",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-600"})}),r.jsx("span",{children:"Intgration  l'ESIGELEC et vie tudiante"})]})]})})]})})]})]})}),r.jsx("section",{className:"py-12 bg-blue-50",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8 flex flex-col items-center text-center border border-blue-100",children:[r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-blue-900 mb-3",children:"Votre avis compte !"}),r.jsx("p",{className:"text-blue-800 mb-6",children:"Aidez-nous  amliorer la plateforme en partageant vos suggestions, remarques ou critiques constructives. Nous lisons chaque retour avec attention."}),r.jsx(Y,{to:"/feedback",className:"inline-block px-6 py-3 bg-blue-700 text-white font-semibold rounded-lg shadow hover:bg-blue-800 transition-colors text-lg",children:"Donner mon avis"})]})})}),r.jsx("section",{className:"py-16 bg-gradient-to-r from-green-800 to-green-700 text-white",children:r.jsxs("div",{className:"container mx-auto px-4 text-center",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Prt  commencer votre parcours vers l'ESIGELEC ?"}),r.jsx("p",{className:"text-xl text-green-100 mb-8 max-w-3xl mx-auto",children:"Rejoignez notre communaut d'tudiants CPS et bnficiez de toutes les ressources dont vous avez besoin pour russir votre transition."}),r.jsx("div",{className:"flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:t?r.jsx(Y,{to:"/dashboard",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Accder  mon tableau de bord"}):r.jsxs(r.Fragment,{children:[r.jsx(Y,{to:"/register",className:"bg-white text-green-900 hover:bg-green-50 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"S'inscrire gratuitement"}),r.jsx(Y,{to:"/login",className:"border border-white text-white hover:bg-white hover:bg-opacity-10 px-8 py-3 rounded-md font-medium transition-colors duration-200",children:"Se connecter"})]})})]})}),r.jsx(KR,{})]})},JR=()=>{const[t,e]=b.useState(""),[s,n]=b.useState(""),[i,a]=b.useState(!1),[o,l]=b.useState(""),[u,d]=b.useState(!1),[h,p]=b.useState(!1),[x,j]=b.useState(!1),C=it(),{login:R,loginWithGoogle:S,loginWithGithub:y}=Te();xi.useEffect(()=>{localStorage.getItem("user_admin@example.com")||localStorage.setItem("user_admin@example.com","adminpassword")},[]);const v=async L=>{L.preventDefault();try{l(""),d(!0),await R(t,s),C("/dashboard")}catch(M){l("Identifiants invalides. Veuillez ressayer."),console.error(M)}finally{d(!1)}},_=async()=>{l(""),p(!0);try{await S(),C("/dashboard")}catch(L){let M="Erreur lors de la connexion avec Google.";L&&typeof L=="object"&&"message"in L&&(M+=`
${L.message}`),l(M),console.error(L)}finally{p(!1)}},P=async()=>{l(""),j(!0);try{await y(),C("/dashboard")}catch(L){let M="Erreur lors de la connexion avec GitHub.";L&&typeof L=="object"&&"message"in L&&(M+=`
${L.message}`),l(M),console.error(L)}finally{j(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:r.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Connectez-vous  votre compte"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",r.jsx(Y,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"crez un nouveau compte"})]})]}),r.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:r.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[o&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:r.jsx("div",{className:"flex",children:r.jsx("div",{children:r.jsx("p",{className:"text-sm text-red-700",children:o})})})}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("button",{type:"button",onClick:_,disabled:h,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${h?"opacity-70 cursor-not-allowed":""}`,children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:r.jsxs("g",{children:[r.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),r.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),r.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),r.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),h?"Connexion Google...":"Se connecter avec Google"]}),r.jsxs("button",{type:"button",onClick:P,disabled:x,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 ${x?"opacity-70 cursor-not-allowed":""}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),x?"Connexion GitHub...":"Se connecter avec GitHub"]})]}),r.jsxs("form",{className:"space-y-6",onSubmit:v,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:L=>e(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),r.jsx("div",{className:"mt-1",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:L=>n(L.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),r.jsx("button",{type:"button",tabIndex:-1,onClick:()=>a(L=>!L),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":i?"Masquer le mot de passe":"Afficher le mot de passe",children:i?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"text-sm",children:r.jsx(Y,{to:"/reset-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Mot de passe oubli ?"})})}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:u,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${u?"opacity-70 cursor-not-allowed":""}`,children:u?"Connexion en cours...":"Se connecter"})})]})]})})]})},XR=()=>{const[t,e]=b.useState(""),[s,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(""),[u,d]=b.useState(!1),[h,p]=b.useState(!1),[x,j]=b.useState(""),[C,R]=b.useState(!1),[S,y]=b.useState(!1),[v,_]=b.useState(!1),P=it(),{register:L,loginWithGoogle:M,loginWithGithub:N}=Te(),f=async()=>{j(""),y(!0);try{await M(),P("/dashboard")}catch(A){j("Erreur lors de l'inscription avec Google"),console.error(A)}finally{y(!1)}},w=async()=>{j(""),_(!0);try{await N(),P("/dashboard")}catch(A){j("Erreur lors de l'inscription avec GitHub"),console.error(A)}finally{_(!1)}},E=async A=>{if(A.preventDefault(),i!==o)return j("Les mots de passe ne correspondent pas");try{j(""),R(!0),await L(s,i,t),P("/dashboard")}catch{j("Erreur lors de la cration du compte"),console.error()}finally{R(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:r.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crez votre compte"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ou"," ",r.jsx(Y,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"connectez-vous avec un compte existant"})]})]}),r.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:r.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[x&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6",children:r.jsx("div",{className:"flex",children:r.jsx("div",{children:r.jsx("p",{className:"text-sm text-red-700",children:x})})})}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("button",{type:"button",onClick:f,disabled:S,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${S?"opacity-70 cursor-not-allowed":""}`,children:[r.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:r.jsxs("g",{children:[r.jsx("path",{fill:"#4285F4",d:"M43.6 20.5h-1.9V20H24v8h11.3c-1.3 3.4-4.6 5.9-8.3 5.9-5 0-9-4-9-9s4-9 9-9c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6 12.9 6 4 14.9 4 26s8.9 20 20 20c11.1 0 20-8.9 20-20 0-1.3-.1-2.5-.4-3.7z"}),r.jsx("path",{fill:"#34A853",d:"M6.3 14.7l6.6 4.8C15.5 16.4 19.5 14 24 14c2.2 0 4.2.8 5.8 2.1l6.6-6.6C36.3 8.1 30.5 6 24 6c-7.5 0-13.9 4.1-17.7 10.7z"}),r.jsx("path",{fill:"#FBBC05",d:"M24 44c6.5 0 12.1-2.1 16.1-5.8l-7.4-6c-2.1 1.4-4.7 2.2-7.7 2.2-3.7 0-7-2.5-8.3-5.9H6.3C10.1 39.9 16.5 44 24 44z"}),r.jsx("path",{fill:"#EA4335",d:"M43.6 20.5h-1.9V20H24v8h11.3c-.5 1.4-1.3 2.7-2.4 3.7l7.4 6C41.7 40.2 44 33.7 44 26c0-1.3-.1-2.5-.4-3.7z"})]})}),S?"Inscription Google en cours...":"S'inscrire avec Google"]}),r.jsxs("button",{type:"button",onClick:w,disabled:v,className:`w-full flex items-center justify-center gap-2 py-2 px-4 border border-gray-300 rounded-md shadow-sm bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${v?"opacity-70 cursor-not-allowed":""}`,children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),v?"Inscription GitHub en cours...":"S'inscrire avec GitHub"]})]}),r.jsxs("form",{className:"space-y-6",onSubmit:E,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom complet"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:t,onChange:A=>e(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:A=>n(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mot de passe"}),r.jsx("div",{className:"mt-1",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"new-password",required:!0,value:i,onChange:A=>a(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),r.jsx("button",{type:"button",tabIndex:-1,onClick:()=>d(A=>!A),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":u?"Masquer le mot de passe":"Afficher le mot de passe",children:u?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125 4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirmez le mot de passe"}),r.jsx("div",{className:"mt-1",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:h?"text":"password",autoComplete:"new-password",required:!0,value:o,onChange:A=>l(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm pr-10"}),r.jsx("button",{type:"button",tabIndex:-1,onClick:()=>p(A=>!A),className:"absolute inset-y-0 right-0 flex items-center px-3 text-gray-400 hover:text-blue-700 focus:outline-none","aria-label":h?"Masquer le mot de passe":"Afficher le mot de passe",children:h?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}):r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575m-2.53 2.53A9.956 9.956 0 0112 21c-5.523 0-10-4.477-10-10 0-1.657.402-3.216 1.125-4.575m2.53-2.53A9.956 9.956 0 0112 3c5.523 0 10 4.477 10 10 0 1.657-.402 3.216-1.125-4.575"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["J'accepte les"," ",r.jsx(Y,{to:"/legal/CGU",className:"font-medium text-blue-600 hover:text-blue-500",children:"conditions d'utilisation"})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:C,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${C?"opacity-70 cursor-not-allowed":""}`,children:C?"Cration en cours...":"Crer un compte"})})]})]})})]})};async function ZR(t){const e=be(ne,"progressions",t),s=await xt(e);return s.exists()?s.data().completedSections||[]:[]}async function Sv(t,e){const s=be(ne,"progressions",t);try{await Ns(s,{completedSections:e},{merge:!0}),console.log("Progression enregistre sur Firestore:",t,e)}catch(n){console.error("Erreur Firestore progression:",n)}}const Gd="userSubsectionData",Va=async t=>{try{const e=be(ne,Gd,t),s=await xt(e);if(s.exists()){const n=s.data();return{checkItems:n.checkItems||{},inputValues:n.inputValues||{}}}else return{checkItems:{},inputValues:{}}}catch(e){return console.error("Erreur lors de la rcupration des donnes de sous-section:",e),{checkItems:{},inputValues:{}}}},e6=async(t,e)=>{try{const s=await Va(t),n=be(ne,Gd,t);await Ns(n,{checkItems:e,inputValues:s.inputValues},{merge:!0})}catch(s){throw console.error("Erreur lors de l'enregistrement des cases  cocher:",s),s}},Cv=async(t,e)=>{try{const s=await Va(t),n=be(ne,Gd,t);await Ns(n,{checkItems:s.checkItems,inputValues:e},{merge:!0})}catch(s){throw console.error("Erreur lors de l'enregistrement des champs de saisie:",s),s}},t6=async(t,e)=>{try{const s=await Va(t),n={},i={};Object.keys(s.checkItems).forEach(o=>{e.includes(o)&&(n[o]=s.checkItems[o])}),Object.keys(s.inputValues).forEach(o=>{e.includes(o)&&(i[o]=s.inputValues[o])});const a=be(ne,Gd,t);await Ns(a,{checkItems:n,inputValues:i}),console.log(`Donnes de sous-section nettoyes pour l'utilisateur ${t}`)}catch(s){throw console.error("Erreur lors du nettoyage des donnes de sous-section:",s),s}},s6=()=>{const{currentUser:t}=Te(),{guideSections:e,resources:s,getGuideSectionsByPhase:n,faqItems:i}=Ui(),a=b.useRef(null),[o,l]=b.useState("post-cps"),[u,d]=b.useState([]),[h,p]=b.useState({}),[x,j]=b.useState({}),[C,R]=b.useState(!0),[S,y]=b.useState(!1),[v,_]=b.useState(!0);b.useEffect(()=>{const $=H=>{a.current&&!a.current.contains(H.target)&&S&&y(!1)};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[S]),b.useEffect(()=>{t!=null&&t.uid&&(_(!0),ZR(t.uid).then($=>d($)).finally(()=>_(!1)))},[t==null?void 0:t.uid]),b.useEffect(()=>{t!=null&&t.uid&&(R(!0),Va(t.uid).then($=>{p($.checkItems||{}),j($.inputValues||{})}).finally(()=>R(!1)))},[t==null?void 0:t.uid]);const P=b.useCallback(()=>{const $=[];return e.forEach(H=>{H.subSections&&H.subSections.forEach(O=>{O.items.forEach(F=>{$.push(F.id)})})}),$},[e]);b.useEffect(()=>{if(t!=null&&t.uid&&e.length>0&&!C){const $=P();t6(t.uid,$).then(()=>Va(t.uid)).then(H=>{p(H.checkItems||{}),j(H.inputValues||{})}).catch(H=>{console.error("Erreur lors du nettoyage des donnes de sous-section:",H)})}},[t==null?void 0:t.uid,e,P,C]);const L=async $=>{let H;u.includes($)?H=u.filter(O=>O!==$):H=[...u,$],d(H),t!=null&&t.uid&&await Sv(t.uid,H)},M=b.useCallback(($,H,O)=>{if(u.includes($))return!1;const F=e.find(U=>U.id===$);if(!F||!F.subSections||F.subSections.length===0)return!1;let re=0,V=0;return F.subSections.forEach(U=>{(U.type==="checkList"||U.type==="inputField")&&U.items.forEach(X=>{re++,(U.type==="checkList"&&H[X.id]||U.type==="inputField"&&O[X.id]&&O[X.id].trim()!=="")&&V++})}),re>0&&V===re},[e,u]),N=b.useCallback(async $=>{if(!u.includes($)){const H=[...u,$];if(d(H),t!=null&&t.uid)try{await Sv(t.uid,H)}catch(O){console.error("Erreur lors de la mise  jour des sections compltes:",O)}}},[u,t==null?void 0:t.uid]);b.useEffect(()=>{t!=null&&t.uid&&!v&&!C&&e.forEach($=>{M($.id,h,x)&&N($.id)})},[h,x,e,t==null?void 0:t.uid,v,C,M,N]);const f=b.useCallback(async $=>{const H=!h[$],O={...h,[$]:H};if(p(O),t!=null&&t.uid)try{await e6(t.uid,O)}catch(F){console.error("Erreur lors de la sauvegarde de la case  cocher:",F)}},[h,t==null?void 0:t.uid]),w=b.useCallback(($,H)=>{const O={...x,[$]:H};j(O)},[x]),E=b.useCallback(async $=>{if(t!=null&&t.uid)try{await Cv(t.uid,x);const H=document.getElementById(`input-${$}`);H&&(H.classList.add("bg-green-50"),setTimeout(()=>{H.classList.remove("bg-green-50")},500))}catch(H){console.error("Erreur lors de la validation du champ de saisie:",H)}},[x,t==null?void 0:t.uid]),A=b.useCallback(async $=>{const H={...x,[$]:""};if(j(H),t!=null&&t.uid)try{await Cv(t.uid,H)}catch(O){console.error("Erreur lors de l'effacement du champ de saisie:",O)}},[x,t==null?void 0:t.uid]),I=n?n(o):[],k=$=>{const H=n?n($):[];if(!H||H.length===0)return 0;let O=0,F=0;return H.forEach(re=>{O++,u.includes(re.id)&&F++,re.subSections&&re.subSections.length>0&&re.subSections.forEach(V=>{if(V.type==="checkList"||V.type==="inputField"){const U=V.items.length;O+=U,V.type==="checkList"?V.items.forEach(X=>{h[X.id]&&F++}):V.type==="inputField"&&V.items.forEach(X=>{x[X.id]&&x[X.id].trim()!==""&&F++})}})}),O>0?Math.round(F/O*100):0},B=()=>{if(!e||e.length===0)return 0;let $=0,H=0;return e.forEach(O=>{$++,u.includes(O.id)&&H++,O.subSections&&O.subSections.length>0&&O.subSections.forEach(F=>{if(F.type==="checkList"||F.type==="inputField"){const re=F.items.length;$+=re,F.type==="checkList"?F.items.forEach(V=>{h[V.id]&&H++}):F.type==="inputField"&&F.items.forEach(V=>{x[V.id]&&x[V.id].trim()!==""&&H++})}})}),$>0?Math.round(H/$*100):0};return!s||!i||!e||v||C?r.jsx("div",{className:"p-8 text-center",children:"Chargement du tableau de bord..."}):r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Tableau de bord"}),r.jsxs("p",{className:"text-blue-100",children:["Bienvenue, ",r.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," !"]})," Suivez votre progression et accdez  vos ressources."]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8 relative",children:[r.jsxs("div",{className:"fixed bottom-6 left-6 z-50",children:[r.jsx("button",{ref:a,onClick:()=>y(!S),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-3 shadow-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-50","aria-label":"Aide",title:"Comment a fonctionne ?",children:r.jsx(g2,{className:"w-6 h-6"})}),S&&r.jsxs("div",{className:"absolute bottom-16 left-0 w-72 bg-white rounded-lg shadow-xl p-4 text-sm animate-fade-in",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:"Comment a fonctionne ?"}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Fermer",children:r.jsx(St,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"space-y-3 text-gray-700",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Progression"}),r.jsx("p",{children:"Cocher toutes les cases et remplir tous les champs d'une section la marque automatiquement comme complte."})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-1",children:"Sections"}),r.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[r.jsx("li",{children:"Naviguez entre les phases avec les onglets en haut"}),r.jsx("li",{children:"Les sous-sections peuvent tre des listes, cases  cocher ou champs"}),r.jsx("li",{children:"Vos rponses sont automatiquement sauvegardes"})]})]}),r.jsx("div",{className:"text-xs text-gray-500 mt-2 pt-2 border-t border-gray-100",children:r.jsxs("p",{children:["Cliquez sur ",r.jsx("span",{className:"inline-flex items-center",children:r.jsx(Pi,{className:"w-3 h-3 text-green-500 mr-1"})})," pour valider vos rponses"]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"mb-4 lg:col-span-2",children:r.jsx(Rp,{fallback:r.jsxs("div",{className:"flex items-center justify-between bg-gray-50 border border-gray-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-gray-400 rounded-full p-2",children:r.jsx(ct,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-800",children:"Forum des tudiants"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Bientt disponible"})]})]}),r.jsx("span",{className:"bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded",children:"Nouveaut"})]}),children:r.jsx("div",{className:"space-y-3",children:r.jsxs(Y,{to:"/forum",className:"flex items-center justify-between bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg p-3 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-blue-600 rounded-full p-2",children:r.jsx(ct,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-blue-800",children:"Forum des tudiants"}),r.jsx("p",{className:"text-xs text-blue-600",children:"Discussions entre tudiants"})]})]}),r.jsx("span",{className:"text-blue-600 text-sm font-medium",children:"Accder "})]})})})}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsx("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:r.jsxs("div",{className:"flex flex-wrap",children:[r.jsx("button",{onClick:()=>l("post-cps"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="post-cps"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Post-CPS"}),r.jsx("button",{onClick:()=>l("during-process"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="during-process"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pendant les dmarches"}),r.jsx("button",{onClick:()=>l("pre-arrival"),className:`flex-1 py-4 px-4 text-center font-medium transition-colors duration-200 ${o==="pre-arrival"?"bg-blue-800 text-white":"text-gray-700 hover:bg-gray-50"}`,children:"Pr-arrive"})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"border-b border-gray-200 p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[o==="post-cps"&&"Aprs votre CPS",o==="during-process"&&"Pendant vos dmarches administratives",o==="pre-arrival"&&"Aprs votre arrive en France"]}),r.jsxs("p",{className:"text-gray-600",children:[o==="post-cps"&&"Les tapes essentielles aprs la fin de votre classe prparatoire",o==="during-process"&&"Les dmarches  effectuer pour prparer votre dpart",o==="pre-arrival"&&"Prparez votre arrive et votre installation en France"]})]}),r.jsx("div",{className:"divide-y divide-gray-200",children:I&&I.length>0?I.map($=>r.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors duration-200",children:r.jsxs("div",{className:"flex flex-wrap md:flex-nowrap items-start",children:[r.jsx("div",{className:"md:flex-shrink-0 mb-4 md:mb-0 md:mr-4",children:r.jsx("button",{onClick:()=>L($.id),className:`w-6 h-6 rounded-full flex items-center justify-center ${u.includes($.id)?"bg-green-100 text-green-700":"bg-gray-100 text-gray-400"}`,children:r.jsx(vs,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:$.title}),r.jsx("p",{className:"text-gray-600 mb-4",children:$.content}),$.subSections&&$.subSections.length>0&&r.jsx("div",{className:"mt-4 space-y-4",children:$.subSections.map(H=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[r.jsxs("h4",{className:"text-md font-medium text-gray-800 mb-2 flex items-center",children:[H.type==="bulletList"&&r.jsx(Ip,{className:"w-4 h-4 text-blue-500 mr-2"}),H.type==="checkList"&&r.jsx(Zc,{className:"w-4 h-4 text-green-500 mr-2"}),H.type==="inputField"&&r.jsx(eu,{className:"w-4 h-4 text-purple-500 mr-2"}),H.title]}),r.jsxs("div",{className:"ml-1",children:[H.type==="bulletList"&&r.jsx("ul",{className:"list-disc pl-5 space-y-1",children:H.items.map(O=>r.jsx("li",{className:"text-sm text-gray-700",children:O.content},O.id))}),H.type==="checkList"&&r.jsx("div",{className:"space-y-2",children:H.items.map(O=>r.jsxs("div",{className:"flex items-start",children:[r.jsx("input",{type:"checkbox",id:`check-${O.id}`,className:"mt-1 h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:h[O.id]||!1,onChange:()=>f(O.id)}),r.jsx("label",{htmlFor:`check-${O.id}`,className:"ml-2 block text-sm text-gray-700",children:O.content})]},O.id))}),H.type==="inputField"&&r.jsx("div",{className:"space-y-2",children:H.items.map(O=>r.jsx("div",{className:"group relative",children:r.jsxs("div",{className:"flex items-center bg-white overflow-hidden rounded-lg border border-gray-200 focus-within:border-blue-500 focus-within:ring-1 focus-within:ring-blue-500 transition-all shadow-sm hover:shadow",children:[r.jsx("label",{htmlFor:`input-${O.id}`,className:"flex-shrink-0 px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50 border-r border-gray-200 select-none",children:O.content}),r.jsx("input",{type:"text",id:`input-${O.id}`,className:"block w-full flex-1 px-3 py-2 border-0 focus:ring-0 focus:outline-none text-sm text-gray-700 placeholder-gray-400 transition-colors duration-300",placeholder:"Entrez votre information",value:x[O.id]||"",onChange:F=>w(O.id,F.target.value)}),r.jsx("div",{className:"flex",children:x[O.id]&&r.jsxs(r.Fragment,{children:[r.jsx("button",{className:"p-2 text-green-500 hover:text-green-700 focus:outline-none",onClick:()=>E(O.id),type:"button","aria-label":"Valider",title:"Valider",children:r.jsx(Pi,{className:"h-3.5 w-3.5"})}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 focus:outline-none",onClick:()=>A(O.id),type:"button","aria-label":"Effacer",title:"Effacer",children:r.jsx(St,{className:"h-3.5 w-3.5"})})]})})]})},O.id))})]})]},H.id))}),Array.isArray($.resources)&&$.resources.length>0&&r.jsxs("div",{className:"mt-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ressources associes:"}),r.jsx("div",{className:"space-y-2",children:$.resources.map(H=>{const O=s.find(F=>F.id===H);return O?r.jsxs("a",{href:O.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:[r.jsx(We,{className:"w-4 h-4 mr-2"}),O.title]},O.id):null})})]})]})]})},$.id)):r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucune section disponible pour cette phase actuellement."})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Votre progression"}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-bold text-gray-700",children:"Progression globale"}),r.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[B(),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-blue-900 h-3 rounded-full transition-all duration-500",style:{width:`${B()}%`}})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Post-CPS"}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[k("post-cps"),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${k("post-cps")}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pendant les dmarches"}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[k("during-process"),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${k("during-process")}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Pr-arrive"}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[k("pre-arrival"),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-800 h-2.5 rounded-full",style:{width:`${k("pre-arrival")}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources rcentes"}),r.jsx(Y,{to:"/resources",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),r.jsx("div",{className:"space-y-3",children:(s||[]).slice(0,3).map($=>r.jsxs("a",{href:$.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-start p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-md flex items-center justify-center",children:r.jsx(We,{className:"w-5 h-5 text-blue-700"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:$.title}),r.jsx("p",{className:"text-xs text-gray-500",children:$.phase})]})]},$.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions frquentes"}),r.jsx(Y,{to:"/faq",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir tout"})]}),r.jsx("div",{className:"space-y-3",children:(i||[]).slice(0,2).map($=>r.jsxs("div",{className:"p-3 hover:bg-gray-50 rounded-md transition-colors duration-200",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:$.question}),r.jsx("p",{className:"text-xs text-gray-700",children:$.answer&&$.answer.length>100?`${$.answer.substring(0,100)}...`:$.answer})]},$.id))})]})]})]})]})]})},r6=()=>{const{resources:t}=Ui(),[e,s]=b.useState(""),[n,i]=b.useState("all"),[a,o]=b.useState("all"),[l,u]=b.useState(!1),[d,h]=b.useState(!1),[p,x]=b.useState("all"),[j,C]=b.useState(null),[R,S]=b.useState(!1),y=[...new Set(t.map(f=>f.category))],v=f=>{if(f.includes("dropbox.com")){let w=f.replace("www.dropbox.com","dl.dropboxusercontent.com");return w.includes("?dl=0")?w=w.replace("?dl=0","?raw=1"):w.includes("?")?w+="&raw=1":w+="?raw=1",w}return f},_=f=>{let w=f;try{const E=new URL(f);if(E.hostname.includes("youtube.com")||E.hostname.includes("youtu.be")){const A=E.hostname.includes("youtu.be")?E.pathname.substring(1).split("?")[0]:E.searchParams.get("v");A&&(w=`https://www.youtube.com/embed/${A}`)}else if(E.hostname.includes("vimeo.com")){const I=E.pathname.split("/").find(k=>/^\d+$/.test(k));I&&(w=`https://player.vimeo.com/video/${I}`)}}catch(E){console.error("Error parsing video URL for embedding:",E)}return f.includes("dropbox.com")&&w===f?v(f):w},P=f=>`https://docs.google.com/viewer?url=${encodeURIComponent(f)}&embedded=true`,L=f=>{f.preventDefault()},M=t.filter(f=>p==="videos"&&f.fileType!=="video"||n!=="all"&&f.phase!==n||a!=="all"&&f.category!==a?!1:e?f.title.toLowerCase().includes(e.toLowerCase())||f.description.toLowerCase().includes(e.toLowerCase()):!0),N=f=>{switch(f){case"pdf":return r.jsx(x2,{className:"w-6 h-6 text-red-500"});case"image":return r.jsx(kR,{className:"w-6 h-6 text-green-500"});case"video":return r.jsx(Os,{className:"w-6 h-6 text-purple-500"});case"archive":return r.jsx(sR,{className:"w-6 h-6 text-yellow-500"});case"doc":case"docx":case"txt":default:return r.jsx(We,{className:"w-6 h-6 text-blue-500"})}};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bibliothque de ressources"}),r.jsx("p",{className:"text-blue-100",children:"Trouvez tous les documents et guides dont vous avez besoin pour votre parcours."})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow mb-8",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 flex border-b border-gray-200",children:[r.jsx("button",{className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 focus:outline-none ${p==="all"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>x("all"),children:"Toutes les ressources"}),r.jsx("button",{className:`px-4 py-2 font-medium text-sm -mb-px border-b-2 focus:outline-none ${p==="videos"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>x("videos"),children:"Vidos"})]}),r.jsx("form",{onSubmit:L,children:r.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[r.jsx("div",{className:"flex-grow",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une ressource...",value:e,onChange:f=>s(f.target.value)})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>u(!l),children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ap,{className:"mr-2 h-4 w-4"}),n==="all"?"Toutes les phases":n==="post-cps"?"Post-CPS":n==="during-process"?"Pendant les dmarches":"Pr-arrive"]}),r.jsx(Dn,{className:"h-4 w-4"})]}),l&&r.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("all"),u(!1)},children:"Toutes les phases"}),r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="post-cps"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("post-cps"),u(!1)},children:"Post-CPS"}),r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="during-process"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("during-process"),u(!1)},children:"Pendant les dmarches"}),r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${n==="pre-arrival"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{i("pre-arrival"),u(!1)},children:"Pr-arrive"})]})})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{type:"button",className:"inline-flex justify-between w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-blue-500",onClick:()=>h(!d),children:[r.jsxs("span",{className:"flex items-center",children:[r.jsx(Ap,{className:"mr-2 h-4 w-4"}),a==="all"?"Toutes les catgories":a]}),r.jsx(Dn,{className:"h-4 w-4"})]}),d&&r.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",role:"menu","aria-orientation":"vertical",children:[r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${a==="all"?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o("all"),h(!1)},children:"Toutes les catgories"}),y.map(f=>r.jsx("button",{type:"button",className:`block w-full text-left px-4 py-2 text-sm ${a===f?"bg-gray-100 text-gray-900":"text-gray-700"}`,onClick:()=>{o(f),h(!1)},children:f},f))]})})]})]})]})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.length>0?M.map(f=>r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow duration-300 cursor-pointer",onClick:()=>{C(f),S(!0)},children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-md bg-blue-50 flex items-center justify-center",children:N(f.fileType)}),r.jsx("div",{className:"ml-4",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.title})})]}),r.jsx("p",{className:"text-gray-600 mb-4",children:f.description}),r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:f.phase==="post-cps"?"Post-CPS":f.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:f.category}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.fileType==="pdf"?"bg-red-100 text-red-800":f.fileType==="doc"||f.fileType==="docx"||f.fileType==="txt"?"bg-blue-100 text-blue-800":f.fileType==="xls"||f.fileType==="xlsx"?"bg-green-100 text-green-800":f.fileType==="ppt"||f.fileType==="pptx"?"bg-orange-100 text-orange-800":f.fileType==="image"?"bg-purple-100 text-purple-800":f.fileType==="video"?"bg-pink-100 text-pink-800":f.fileType==="audio"?"bg-indigo-100 text-indigo-800":f.fileType==="zip"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:f.fileType.toUpperCase()})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[r.jsxs("span",{children:["Mis  jour le ",f.updatedDate]}),r.jsxs("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center text-blue-600 hover:text-blue-800",onClick:w=>w.stopPropagation(),children:[r.jsx(qn,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Tlcharger"})]})]})]})},f.id)):r.jsxs("div",{className:"col-span-full text-center py-12",children:[r.jsx("div",{className:"mx-auto w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mb-4",children:r.jsx(Xr,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune ressource trouve"}),r.jsx("p",{className:"text-gray-500",children:"Essayez de modifier vos filtres ou votre recherche."})]})})]}),R&&j&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-in-out",onClick:()=>S(!1),children:r.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl w-full max-w-5xl h-auto max-h-[90vh] flex flex-col overflow-hidden relative",onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:j.title}),r.jsx("p",{className:"text-sm text-slate-300",children:j.category})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full sm:w-auto items-center",children:[r.jsxs("a",{href:j.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center w-full sm:w-auto bg-blue-500 hover:bg-blue-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[r.jsx(Ys,{className:"w-4 h-4 mr-1.5"}),"Ouvrir"]}),r.jsxs("a",{href:j.fileUrl,download:!0,className:"flex items-center justify-center w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white px-3 py-1.5 rounded-md text-sm font-medium transition-colors",children:[r.jsx(qn,{className:"w-4 h-4 mr-1.5"}),"Tlcharger"]}),r.jsx("button",{onClick:()=>S(!1),className:"p-1.5 ml-0 sm:ml-2 rounded-md hover:bg-slate-700 transition-colors text-slate-400 hover:text-slate-200","aria-label":"Fermer",children:r.jsx(St,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex-grow overflow-auto",children:j.fileType==="video"?r.jsxs("div",{className:"p-1 sm:p-2 md:p-4 w-full",children:[" ",r.jsxs("div",{className:"relative w-full bg-black rounded-md",style:{paddingTop:"56.25%"},children:[" ",r.jsx("iframe",{src:_(j.fileUrl),className:"absolute top-0 left-0 w-full h-full border-0 rounded-md",title:j.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})]})]}):j.fileType==="pdf"?r.jsxs("div",{className:"flex flex-col h-full bg-white",children:[" ",r.jsxs("div",{className:"flex-grow p-4",children:[" ",r.jsx("object",{data:v(j.fileUrl),type:"application/pdf",className:"w-full h-full rounded-md",children:r.jsx("iframe",{src:P(j.fileUrl),className:"w-full h-full border-0 rounded-md",title:`${j.title} (Google Viewer)`,allowFullScreen:!0})})]}),r.jsxs("div",{className:"p-2 text-center text-sm text-gray-500 border-t border-gray-200",children:[" ","Si le document ne s'affiche pas correctement, essayez de le",r.jsx("a",{href:j.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 mx-1 font-medium",onClick:f=>f.stopPropagation(),children:"tlcharger"}),"ou l'",r.jsx("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(j.fileUrl)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 mx-1 font-medium",onClick:f=>f.stopPropagation(),children:"ouvrir avec Google Docs"})]})]}):r.jsxs("div",{className:"h-full bg-white",children:[" ",r.jsx("iframe",{src:v(j.fileUrl),className:"w-full h-full border-0 rounded-md",title:j.title,allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups"})]})})]})})]})},n6=()=>{const{faqItems:t,addFAQItem:e}=Ui(),{currentUser:s}=Te(),[n,i]=b.useState(""),[a,o]=b.useState("all"),[l,u]=b.useState(null),[d,h]=b.useState(!1),[p,x]=b.useState(!1),[j,C]=b.useState(!1),[R,S]=b.useState(""),[y,v]=b.useState("post-cps"),[_,P]=b.useState(""),[L,M]=b.useState("phase"),[N,f,w]=t.reduce((I,k)=>(s&&(k.userId===s.uid||k.userEmail===s.email)&&(k.isAnswered?I[0].push(k):I[1].push(k)),k.isApproved&&k.isAnswered&&(a==="all"&&(k.questionType==="general"||k.questionType==="site"||k.questionType==="phase")||a==="general"&&k.questionType==="general"||a==="site"&&k.questionType==="site"||["post-cps","during-process","pre-arrival"].includes(a)&&k.questionType==="phase"&&k.phase===a)&&(!n||k.question.toLowerCase().includes(n.toLowerCase())||k.answer.toLowerCase().includes(n.toLowerCase())||k.category.toLowerCase().includes(n.toLowerCase()))&&I[2].push(k),I),[[],[],[]]),E=I=>{u(l===I?null:I)},A=I=>{I.preventDefault(),R.trim()&&(e({question:R,answer:"Cette question est en attente de rponse par notre quipe.",category:_||"gnral",phase:L==="phase"?y:void 0,questionType:L,isApproved:!1,isAnswered:!1,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0],userId:s==null?void 0:s.uid,userEmail:s==null?void 0:s.email}),S(""),P(""),x(!0),setTimeout(()=>{x(!1),h(!1)},5e3))};return b.useEffect(()=>{d||x(!1)},[d]),r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Questions frquemment poses"}),r.jsx("p",{className:"text-blue-100",children:"Trouvez les rponses  vos questions ou posez-en de nouvelles."})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 mb-8",children:[r.jsx("div",{className:"flex-grow",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher une question...",value:n,onChange:I=>i(I.target.value)})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2",children:[r.jsxs("select",{value:a,onChange:I=>o(I.target.value),className:"block w-full rounded-md border border-gray-300 shadow-sm py-2 px-3 bg-white focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:j,children:[r.jsx("option",{value:"all",children:"Toutes les questions"}),r.jsx("option",{value:"post-cps",children:"Phase : Post-CPS"}),r.jsx("option",{value:"during-process",children:"Phase : Pendant les dmarches"}),r.jsx("option",{value:"pre-arrival",children:"Phase : Pr-arrive"}),r.jsx("option",{value:"site",children:"Fonctionnement du site"}),r.jsx("option",{value:"general",children:"Question gnrale"})]}),r.jsxs("div",{className:"flex flex-row space-x-2",children:[s&&r.jsx("button",{type:"button",onClick:()=>C(!j),className:`flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${j?"bg-blue-700 text-white":"bg-blue-100 text-blue-800"}`,children:r.jsx("span",{className:"whitespace-nowrap",children:j?"Toutes les questions":"Mes questions"})}),r.jsxs("button",{type:"button",onClick:()=>h(!0),className:"flex-1 sm:flex-initial inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(as,{className:"-ml-1 mr-2 h-5 w-5"})," Question"]})]})]})]}),d&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-2xl p-8 max-w-xl mx-auto mb-8 animate-fade-in",children:[r.jsxs("h2",{className:"text-2xl font-bold text-blue-900 mb-2 flex items-center gap-2",children:[r.jsx(ot,{className:"w-6 h-6 text-blue-500"}),"Poser une nouvelle question"]}),r.jsx("p",{className:"text-blue-700 text-sm mb-6",children:"Votre question sera transmise  lquipe, qui y rpondra rapidement."}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Poser une nouvelle question"}),r.jsx("form",{onSubmit:A,className:"space-y-7",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Votre question"}),r.jsx("textarea",{id:"question",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Posez votre question ici...",value:R,onChange:I=>S(I.target.value),required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),r.jsxs("select",{id:"questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:L,onChange:I=>M(I.target.value),required:!0,children:[r.jsx("option",{value:"phase",children:"En lien avec une phase"}),r.jsx("option",{value:"site",children:"Fonctionnement du site"}),r.jsx("option",{value:"general",children:"Question gnrale"})]})]}),L==="phase"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase concerne"}),r.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:y,onChange:I=>v(I.target.value),required:L==="phase",children:[r.jsx("option",{value:"post-cps",children:"Post-CPS"}),r.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),r.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),r.jsx("input",{type:"text",id:"category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Ex: visa, logement, transport...",value:_,onChange:I=>P(I.target.value)})]})]}),p?r.jsxs("div",{className:"mt-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(vs,{className:"h-5 w-5 text-green-500 mr-2"}),r.jsx("span",{className:"text-green-700 font-medium",children:"Votre question a bien t envoye !"})]}),r.jsx("p",{className:"mt-2 text-sm text-green-600",children:"Vous recevrez la rponse de l'administrateur par email et elle apparatra galement sur la plateforme en tant que question anonyme."})]}):r.jsxs("div",{className:"flex justify-end",children:[r.jsx("button",{type:"button",onClick:()=>h(!1),className:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),r.jsx("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:"Soumettre la question"})]})]})})]}),j?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions rpondues",r.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:N.length})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:N.length>0?N.map(I=>r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:()=>E(I.id),className:"flex justify-between items-start w-full text-left",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:r.jsx(ot,{className:"h-4 w-4 text-green-700"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:I.question}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),I.category&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category})]})]})]}),l===I.id?r.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):r.jsx(Dn,{className:"h-5 w-5 text-gray-500"})]}),l===I.id&&r.jsxs("div",{className:"mt-4 ml-11",children:[r.jsx("p",{className:"text-gray-700",children:I.answer}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise  jour le ",I.updatedDate]})]})]},I.id)):r.jsx("div",{className:"p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas encore de questions rpondues."})})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Questions en attente",r.jsx("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:f.length})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:f.length>0?f.map(I=>r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:()=>E(I.id),className:"flex justify-between items-start w-full text-left",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:r.jsx(ot,{className:"h-4 w-4 text-yellow-700"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[I.question,r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),I.category&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category}),r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["Pose le ",I.createdDate]})]})]})]}),l===I.id?r.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):r.jsx(Dn,{className:"h-5 w-5 text-gray-500"})]}),l===I.id&&r.jsx("div",{className:"mt-4 ml-11",children:r.jsx("p",{className:"text-gray-700 italic",children:I.answer})})]},I.id)):r.jsx("div",{className:"p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Vous n'avez pas de questions en attente de rponse."})})})]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Questions et rponses"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:w.length>0?w.map(I=>r.jsxs("div",{className:"p-6",children:[r.jsxs("button",{onClick:()=>E(I.id),className:"flex justify-between items-start w-full text-left",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:r.jsx(ot,{className:"h-4 w-4 text-blue-700"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[I.question,j&&!I.isApproved&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:I.phase==="post-cps"?"Post-CPS":I.phase==="during-process"?"Pendant les dmarches":"Pr-arrive"}),I.category&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:I.category})]})]})]}),l===I.id?r.jsx(Bo,{className:"h-5 w-5 text-gray-500"}):r.jsx(Dn,{className:"h-5 w-5 text-gray-500"})]}),l===I.id&&r.jsxs("div",{className:"mt-4 ml-11",children:[r.jsx("p",{className:"text-gray-700",children:I.answer}),r.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Mise  jour le ",I.updatedDate]})]})]},I.id)):r.jsx("div",{className:"p-6 text-center",children:r.jsx("p",{className:"text-gray-500",children:"Aucune question ne correspond  votre recherche."})})})]})]})]})},j2="forumCategories",Nl="forumThreads",N2="forumPosts",$x=async()=>{try{const t=kt(Se(ne,j2),Hn("order","asc"));return(await Ye(t)).docs.map(s=>({id:s.id,...s.data()}))}catch(t){throw console.error("Erreur lors de la rcupration des catgories du forum:",t),t}},i6=async t=>{try{return(await Ut(Se(ne,j2),t)).id}catch(e){throw console.error("Erreur lors de la cration d'une catgorie:",e),e}},a6=async t=>{try{let e;if(t){const n=kt(Se(ne,Nl),or("categoryId","==",t));e=await Ye(n)}else e=await Ye(Se(ne,Nl));return e.docs.map(n=>{const i=n.data();return{id:n.id,...i,createdAt:i.createdAt instanceof Xe?i.createdAt.toMillis():Date.now(),updatedAt:i.updatedAt instanceof Xe?i.updatedAt.toMillis():Date.now(),lastReplyAt:i.lastReplyAt instanceof Xe?i.lastReplyAt.toMillis():void 0}}).sort((n,i)=>n.isPinned&&!i.isPinned?-1:!n.isPinned&&i.isPinned?1:i.updatedAt-n.updatedAt)}catch(e){throw console.error("Erreur lors de la rcupration des discussions:",e),e}},o6=async t=>{try{const e=await xt(be(ne,Nl,t));if(!e.exists())return null;const s=e.data();return{id:e.id,...s,createdAt:s.createdAt.toMillis(),updatedAt:s.updatedAt.toMillis(),lastReplyAt:s.lastReplyAt?s.lastReplyAt.toMillis():void 0}}catch(e){throw console.error("Erreur lors de la rcupration de la discussion:",e),e}},l6=async t=>{try{const e=is(),s={...t,createdAt:e,updatedAt:e,repliesCount:0};return(await Ut(Se(ne,Nl),s)).id}catch(e){throw console.error("Erreur lors de la cration d'une discussion:",e),e}},Tv=async t=>{try{const e=kt(Se(ne,N2),or("threadId","==",t),Hn("createdAt","asc"));return(await Ye(e)).docs.map(n=>({id:n.id,...n.data(),createdAt:n.data().createdAt.toMillis(),updatedAt:n.data().updatedAt?n.data().updatedAt.toMillis():void 0}))}catch(e){throw console.error("Erreur lors de la rcupration des messages:",e),e}},c6=async t=>{try{const e=is(),s={...t,createdAt:e,isEdited:!1},n=await Ut(Se(ne,N2),s),i=be(ne,Nl,t.threadId),a=await xt(i);return a.exists()&&await ts(i,{repliesCount:(a.data().repliesCount||0)+1,lastReplyAt:e,lastReplyAuthor:t.authorName,updatedAt:e}),n.id}catch(e){throw console.error("Erreur lors de l'ajout d'un message:",e),e}},u6=async()=>{const t=[{name:"Gnral",description:"Discussions gnrales sur l'ESIG, les tudes et la vie  Genve",order:1},{name:"Logement",description:"Recherche de logement, colocation, conseils pour s'installer",order:2},{name:"Cours et tudes",description:"Questions sur les cours, examens, projets et formation  l'ESIG",order:3},{name:"Vie tudiante",description:"vnements, activits, associations et vie sociale",order:4},{name:"Administratif",description:"Dmarches administratives, visa, assurances, finances",order:5}];try{const e=await $x(),s=t.filter(n=>!e.some(i=>i.name===n.name));if(s.length>0){for(const n of s)await i6(n);console.log(`${s.length} catgorie(s) ajoute(s) avec succs`)}else console.log("Aucune nouvelle catgorie  ajouter")}catch(e){throw console.error("Erreur lors de l'initialisation des catgories par dfaut:",e),e}},Jh=()=>{const{currentUser:t}=Te(),e=it(),{categoryId:s}=pd(),[n,i]=b.useState([]),[a,o]=b.useState([]),[l,u]=b.useState(!0),[d,h]=b.useState(null),[p,x]=b.useState(null);b.useEffect(()=>{(async()=>{try{u(!0),await u6();const v=await $x();if(i(v),s){const _=v.find(P=>P.id===s);_&&x(_)}}catch(v){console.error("Erreur lors du chargement des catgories:",v),h("Impossible de charger les catgories du forum. Veuillez ressayer plus tard.")}finally{u(!1)}})()},[s]),b.useEffect(()=>{(async()=>{if(p)try{u(!0);const v=await a6(p.id);o(v)}catch(v){console.error("Erreur lors du chargement des discussions:",v),h("Impossible de charger les discussions. Veuillez ressayer plus tard.")}finally{u(!1)}else o([])})()},[p]);const j=y=>{x(y),e(`/forum/category/${y.id}`)},C=y=>{e(`/forum/thread/${y.id}`)},R=()=>{if(!t){e("/login",{state:{from:`/forum/category/${p==null?void 0:p.id}`}});return}e(`/forum/new-thread${p?`?categoryId=${p.id}`:""}`)},S=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return d?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r.jsx("p",{children:d})})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Forum ESIG"}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[r.jsx("div",{className:"w-full md:w-1/4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Catgories"}),l&&n.length===0?r.jsx("div",{className:"animate-pulse space-y-2",children:[...Array(5)].map((y,v)=>r.jsx("div",{className:"h-10 bg-gray-200 rounded"},v))}):r.jsx("ul",{className:"space-y-2",children:n.map(y=>r.jsx("li",{children:r.jsx("button",{onClick:()=>j(y),className:`w-full text-left px-3 py-2 rounded transition-colors ${(p==null?void 0:p.id)===y.id?"bg-blue-100 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:y.name}),r.jsx(hR,{className:"w-4 h-4"})]})})},y.id))})]})}),r.jsx("div",{className:"w-full md:w-3/4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:p?p.name:"Toutes les discussions"}),r.jsxs("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:!p,children:[r.jsx(as,{className:"w-4 h-4"}),r.jsx("span",{children:"Nouvelle discussion"})]})]}),p&&r.jsx("div",{className:"p-4 bg-gray-50 border-b",children:r.jsx("p",{className:"text-gray-600",children:p.description})}),l&&a.length===0?r.jsx("div",{className:"p-4 animate-pulse space-y-4",children:[...Array(5)].map((y,v)=>r.jsxs("div",{className:"border-b pb-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},v))}):p?a.length>0?r.jsx("div",{className:"divide-y divide-gray-200",children:a.map(y=>r.jsxs("div",{onClick:()=>C(y),className:"p-4 hover:bg-gray-50 cursor-pointer transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900 mb-1 flex items-center gap-2",children:[y.isPinned&&r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded",children:"pingl"}),y.isLocked&&r.jsx("span",{className:"text-xs bg-gray-100 text-gray-800 px-2 py-0.5 rounded",children:"Verrouill"}),y.title]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["par ",y.authorName,"  ",S(y.createdAt)]})]}),r.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[r.jsx(ot,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:y.repliesCount})]})]}),y.lastReplyAt&&r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Dernire rponse par ",y.lastReplyAuthor,"  ",S(y.lastReplyAt)]})]},y.id))}):r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{className:"mb-4",children:"Aucune discussion dans cette catgorie pour le moment."}),r.jsxs("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 mx-auto transition-colors",children:[r.jsx(as,{className:"w-4 h-4"}),r.jsx("span",{children:"Crer la premire discussion"})]})]}):r.jsx("div",{className:"p-8 text-center text-gray-500",children:r.jsx("p",{children:"Slectionnez une catgorie pour voir les discussions"})})]})})]})]})},d6=()=>{const{threadId:t}=pd(),{currentUser:e}=Te(),s=it(),[n,i]=b.useState(null),[a,o]=b.useState([]),[l,u]=b.useState(!0),[d,h]=b.useState(null),[p,x]=b.useState(""),[j,C]=b.useState(!1);b.useEffect(()=>{(async()=>{if(t)try{u(!0);const v=await o6(t);if(!v){h("Cette discussion n'existe pas ou a t supprime."),u(!1);return}i(v);const _=await Tv(t);o(_)}catch(v){console.error("Erreur lors du chargement de la discussion:",v),h("Impossible de charger la discussion. Veuillez ressayer plus tard.")}finally{u(!1)}})()},[t]);const R=async y=>{if(y.preventDefault(),!(!e||!n||!t||!p.trim()))try{C(!0);const v={threadId:t,content:p,authorId:e.uid,authorName:e.displayName||"Utilisateur",authorEmail:e.email||void 0};await c6(v);const _=await Tv(t);o(_),x("")}catch(v){console.error("Erreur lors de l'envoi de la rponse:",v),alert("Impossible d'envoyer votre rponse. Veuillez ressayer.")}finally{C(!1)}},S=y=>new Date(y).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return l?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"space-y-2",children:[...Array(3)].map((y,v)=>r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-20 bg-gray-200 rounded w-full"})]},v))})]})}):d||!n?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:r.jsx("p",{children:d||"Discussion introuvable"})}),r.jsx("div",{className:"mt-4",children:r.jsxs(Y,{to:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r.jsx(ze,{className:"w-4 h-4"})," Retour au forum"]})})]}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-4",children:r.jsxs(Y,{to:n.categoryId?`/forum/category/${n.categoryId}`:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r.jsx(ze,{className:"w-4 h-4"})," Retour aux discussions"]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow mb-6 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:n.title}),r.jsxs("div",{className:"flex items-center text-gray-500 text-sm",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"mr-4",children:n.authorName}),r.jsx(lr,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:S(n.createdAt)})]})]}),r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"prose max-w-none",children:n.content.split(`
`).map((y,v)=>r.jsx("p",{children:y},v))})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[r.jsx(ot,{className:"w-5 h-5"}),r.jsx("span",{children:"Rponses"}),a.length>0&&r.jsxs("span",{className:"text-gray-500 text-sm",children:["(",a.length,")"]})]}),a.length>0?r.jsx("div",{className:"space-y-4",children:a.map(y=>r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsxs("div",{className:"p-4 bg-gray-50 border-b flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center text-gray-700",children:[r.jsx(Ts,{className:"w-4 h-4 mr-1"}),r.jsx("span",{className:"font-medium",children:y.authorName})]}),r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(lr,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:S(y.createdAt)}),y.isEdited&&r.jsx("span",{className:"ml-2 text-xs",children:"(modifi)"})]})]}),r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"prose max-w-none",children:y.content.split(`
`).map((v,_)=>r.jsx("p",{children:v},_))})})]},y.id))}):r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500",children:[r.jsx(ot,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Aucune rponse pour le moment. Soyez le premier  rpondre !"})]})]}),n.isLocked?r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 text-center text-gray-700",children:r.jsx("p",{children:"Cette discussion est verrouille et n'accepte plus de nouvelles rponses."})}):e?r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"p-4 bg-gray-50 border-b",children:r.jsx("h3",{className:"font-medium text-gray-800",children:"Votre rponse"})}),r.jsxs("form",{onSubmit:R,className:"p-4",children:[r.jsx("div",{className:"mb-4",children:r.jsx("textarea",{className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:6,placeholder:"Rdigez votre rponse ici...",value:p,onChange:y=>x(y.target.value),required:!0,disabled:j})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:j||!p.trim(),children:j?"Envoi en cours...":r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"w-4 h-4"}),r.jsx("span",{children:"Envoyer"})]})})})]})]}):r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[r.jsx("p",{className:"text-blue-800 mb-2",children:"Vous devez tre connect pour rpondre  cette discussion."}),r.jsx("button",{onClick:()=>s("/login",{state:{from:`/forum/thread/${t}`}}),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors",children:"Se connecter"})]})]})},h6=()=>{const{currentUser:t}=Te(),e=it(),s=ur(),i=new URLSearchParams(s.search).get("categoryId"),[a,o]=b.useState([]),[l,u]=b.useState(!0),[d,h]=b.useState(null),[p,x]=b.useState(!1),[j,C]=b.useState(""),[R,S]=b.useState(""),[y,v]=b.useState(i||"");b.useEffect(()=>{t||e("/login",{state:{from:"/forum/new-thread"}})},[t,e]),b.useEffect(()=>{(async()=>{try{u(!0);const L=await $x();o(L),!y&&L.length>0&&!i&&v(L[0].id)}catch(L){console.error("Erreur lors du chargement des catgories:",L),h("Impossible de charger les catgories. Veuillez ressayer plus tard.")}finally{u(!1)}})()},[y,i]);const _=async P=>{if(P.preventDefault(),!(!t||!j.trim()||!R.trim()||!y))try{x(!0);const L={categoryId:y,title:j.trim(),content:R.trim(),authorId:t.uid,authorName:t.displayName||"Utilisateur",authorEmail:t.email||void 0,isPinned:!1,isLocked:!1},M=await l6(L);e(`/forum/thread/${M}`)}catch(L){console.error("Erreur lors de la cration de la discussion:",L),h("Impossible de crer la discussion. Veuillez ressayer plus tard."),x(!1)}};return t?r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"mb-4",children:r.jsxs(Y,{to:y?`/forum/category/${y}`:"/forum",className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[r.jsx(ze,{className:"w-4 h-4"})," Retour au forum"]})}),r.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Nouvelle discussion"}),d&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:r.jsx("p",{children:d})}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsxs("form",{onSubmit:_,className:"p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie"}),r.jsxs("select",{id:"category",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",value:y,onChange:P=>v(P.target.value),required:!0,disabled:l||p,children:[r.jsx("option",{value:"",children:"Slectionner une catgorie"}),a.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre"}),r.jsx("input",{type:"text",id:"title",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Titre de votre discussion",value:j,onChange:P=>C(P.target.value),required:!0,disabled:p,maxLength:100})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenu"}),r.jsx("textarea",{id:"content",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:10,placeholder:"Rdigez votre message ici...",value:R,onChange:P=>S(P.target.value),required:!0,disabled:p})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:p||!j.trim()||!R.trim()||!y,children:p?"Cration en cours...":r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"w-4 h-4"}),r.jsx("span",{children:"Crer la discussion"})]})})})]})})]}):null},m6="modulepreload",p6=function(t){return"/Esig-prep-guide/"+t},Av={},_2=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(s.map(u=>{if(u=p6(u),u in Av)return;Av[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":m6,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((x,j)=>{p.addEventListener("load",x),p.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};async function E2(){const t=await Ye(Se(ne,"progressions")),e=[];return t.forEach(s=>{e.push({userId:s.id,completedSections:s.data().completedSections||[]})}),e}function f6(t=20){const[e,s]=b.useState([]),[n,i]=b.useState(!0);return b.useEffect(()=>{(async()=>{i(!0);try{const o=kt(Se(ne,"adminActivityLog"),Hn("date","desc"),Bu(t)),l=await Ye(o);s(l.docs.map(u=>({id:u.id,...u.data()})))}catch{s([])}i(!1)})()},[t]),{recentActivity:e,loading:n}}function x6(t,e=[]){const s={Ajout:"a ajout",Suppression:"a supprim",Modification:"a modifi"},n={Section:"une section",Ressource:"une ressource",FAQ:"une question FAQ"};let i="Admin";if(t.user){const l=e.find(u=>u.uid===t.user);l&&(i=l.displayName||l.email||t.user)}const a=s[t.type]||t.type.toLowerCase(),o=n[t.target]||t.target.toLowerCase();return`${i} ${a} ${o}`}const Iv=()=>{const{currentUser:t}=Te(),{resources:e,guideSections:s,faqItems:n}=Ui(),{recentActivity:i,loading:a}=f6(),[o,l]=b.useState([]),[u,d]=b.useState([]),[h,p]=b.useState(!0);b.useEffect(()=>{(async()=>{p(!0);const[C,R]=await Promise.all([E2(),_2(async()=>{const{collection:y,getDocs:v}=await Promise.resolve().then(()=>FN);return{collection:y,getDocs:v}},void 0).then(({collection:y,getDocs:v})=>v(y(ne,"users")))]),S=[];R.forEach(y=>{S.push({...y.data(),uid:y.id})}),l(C),d(S),p(!1)})()},[]);const x=j=>!s||s.length===0?0:Math.round(j.length/s.length*100);return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-2 gap-2 md:gap-0",children:[r.jsxs("div",{className:"order-1 md:order-none",children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Tableau de bord administrateur"}),r.jsxs("p",{className:"text-blue-100 mt-1",children:["Bienvenue, ",r.jsxs("strong",{children:[(t==null?void 0:t.displayName)||(t==null?void 0:t.email)," ! "]})," Grez le contenu et les ressources de la plateforme."]})]}),r.jsxs("div",{className:"order-2 md:order-none flex flex-col gap-2 sm:flex-row sm:space-x-2 sm:gap-0 w-full md:w-auto mt-2 md:mt-0",children:[r.jsxs(Y,{to:"/admin/feedbacks",className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-white/80 hover:bg-white text-blue-900 border border-blue-200 shadow transition-colors",children:[r.jsx(ot,{className:"w-4 h-4 mr-1.5"}),"Feedbacks"]}),r.jsxs(Y,{to:"/admin/future-features",className:"inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium bg-white/80 hover:bg-white text-blue-900 border border-blue-200 shadow transition-colors",children:[r.jsx(y2,{className:"w-4 h-4 mr-1.5"}),"Fonctionnalits  venir"]}),r.jsxs(Y,{to:"/admin/tutorial",className:"flex items-center justify-center px-3 py-2 bg-blue-700 hover:bg-blue-600 text-white text-sm rounded transition-colors w-full sm:w-auto",title:"Consulter le guide d'administration",children:[r.jsx(cr,{className:"h-4 w-4 mr-1"})," Tutoriel"]})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex flex-wrap gap-4 mb-8",children:[r.jsxs(Y,{to:"/admin/progressions",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[r.jsx(ct,{className:"-ml-1 mr-2 h-5 w-5"}),"Progression des utilisateurs"]}),r.jsxs(Y,{to:"/admin/content",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Br,{className:"-ml-1 mr-2 h-5 w-5"}),"diter le contenu"]}),r.jsxs(Y,{to:"/admin/resources",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(We,{className:"-ml-1 mr-2 h-5 w-5"}),"Grer les ressources"]}),r.jsxs(Y,{to:"/admin/dropbox",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(p2,{className:"-ml-1 mr-2 h-5 w-5"}),"Gestionnaire Dropbox"]}),r.jsxs(Y,{to:"/admin/users",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(ct,{className:"-ml-1 mr-2 h-5 w-5"}),"Grer les utilisateurs"]}),r.jsxs(Y,{to:"/admin/activity",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[r.jsx(m2,{className:"-ml-1 mr-2 h-5 w-5"}),"Journal d'activit dtaill"]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[r.jsx(ct,{className:"w-5 h-5 mr-2 text-blue-700"})," Statistiques de progression des tudiants CPS"]}),h?r.jsx("div",{className:"text-center text-gray-500",children:"Chargement des statistiques..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-800 mb-1",children:u.filter(j=>j.status==="cps").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"tudiants CPS inscrits"})]}),r.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[r.jsxs("div",{className:"text-3xl font-bold text-green-800 mb-1",children:[(()=>{const j=u.filter(y=>y.status==="cps"),C=j.length;if(C===0)return 0;const R=j.map(y=>y.uid),S=o.filter(y=>R.includes(y.userId)&&x(y.completedSections)===100).length;return Math.round(S/C*100)})(),"%"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"ont termin toutes les sections"})]}),r.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[r.jsxs("div",{className:"text-3xl font-bold text-yellow-800 mb-1",children:[(()=>{const j=u.filter(S=>S.status==="cps");if(j.length===0)return 0;const C=o.filter(S=>j.some(y=>y.uid===S.userId));if(C.length===0)return 0;const R=C.reduce((S,y)=>S+x(y.completedSections),0);return Math.round(R/C.length)})(),"%"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Progression moyenne"})]}),r.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[r.jsx("div",{className:"text-3xl font-bold text-purple-800 mb-1",children:o.filter(j=>x(j.completedSections)>=50).length}),r.jsx("div",{className:"text-sm text-gray-600",children:"utilisateurs  plus de 50%"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:["pre-arrival","during-process","post-cps"].map(j=>{const C=s.filter(_=>_.phase===j),R=j==="pre-arrival"?"Pr-arrive":j==="during-process"?"Pendant le processus":"Post-CPS",S=j==="pre-arrival"?"blue":j==="during-process"?"green":"purple",y=o.length===0||C.length===0?0:Math.round(o.reduce((_,P)=>_+Math.round(P.completedSections.filter(L=>C.some(M=>M.id===L)).length/C.length*100),0)/o.length),v=o.length===0||C.length===0?0:Math.round(o.filter(_=>C.every(P=>_.completedSections.includes(P.id))).length/o.length*100);return r.jsxs("div",{className:`p-4 bg-${S}-50 rounded-lg`,children:[r.jsxs("div",{className:`text-3xl font-bold text-${S}-800 mb-1`,children:[y,"%"]}),r.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Progression moyenne ",R]}),r.jsxs("div",{className:`text-lg font-bold text-${S}-800 mb-1`,children:[v,"%"]}),r.jsxs("div",{className:"text-sm text-gray-600",children:["ont termin ",R]})]},j)})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:r.jsx(We,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Ressources"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(e)?e.length:0})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:r.jsx(Br,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Sections de guide"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(s)?s.length:0})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-3 rounded-full bg-blue-100 text-blue-800",children:r.jsx(ot,{className:"h-6 w-6"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Questions FAQ"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:Array.isArray(n)?n.length:0})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-1 gap-6 mb-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[r.jsx("span",{className:"h-3 w-3 rounded-full bg-green-500 mr-2"}),"Questions rpondues"]}),Array.isArray(n)&&n.filter(j=>j.isAnswered).length>5&&r.jsx("span",{className:"text-xs text-gray-500",children:"Dfilez pour voir plus"})]}),r.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(j=>j.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(j=>j.isAnswered).length>0?n.filter(j=>j.isAnswered).map(j=>r.jsxs("li",{className:"flex items-center justify-between py-2",children:[r.jsxs("div",{className:"flex-grow pr-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-gray-800 line-clamp-1",children:j.question}),j.isApproved?r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:"Public"}):r.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-600 rounded-full",children:"Non publi"})]}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"text-xs text-gray-500",children:j.phase==="post-cps"?"Post-CPS":j.phase==="during-process"?"Dmarches":"Pr-arrive"}),j.userEmail&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[" ",j.userEmail]})]})]}),r.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:r.jsx(Y,{to:`/admin/content?edit=${j.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-blue-100 text-blue-800 hover:bg-blue-200 text-xs font-medium",children:"Modifier"})})]},j.id)):r.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question rpondue pour le moment."})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h2",{className:"text-lg font-bold text-gray-900 flex items-center",children:[r.jsx("span",{className:"h-3 w-3 rounded-full bg-yellow-500 mr-2"}),"Questions en attente",Array.isArray(n)&&r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold bg-yellow-100 text-yellow-800 rounded-full",children:n.filter(j=>!j.isAnswered).length})]}),Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>5&&r.jsx("span",{className:"text-xs text-gray-500",children:"Dfilez pour voir plus"})]}),r.jsx("ul",{className:`divide-y divide-gray-200 flex-grow ${Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>5?"max-h-80 overflow-y-auto pr-2":""}`,children:Array.isArray(n)&&n.filter(j=>!j.isAnswered).length>0?n.filter(j=>!j.isAnswered).map(j=>r.jsxs("li",{className:"flex items-center justify-between py-2",children:[r.jsxs("div",{className:"flex-grow pr-2",children:[r.jsx("span",{className:"text-gray-800 line-clamp-1",children:j.question}),r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"text-xs text-gray-500",children:j.phase==="post-cps"?"Post-CPS":j.phase==="during-process"?"Dmarches":"Pr-arrive"}),j.userEmail&&r.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[" ",j.userEmail]})]})]}),r.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:r.jsx(Y,{to:`/admin/content?edit=${j.id}`,className:"inline-flex items-center px-3 py-1 rounded bg-green-100 text-green-800 hover:bg-green-200 text-xs font-medium",children:"Rpondre"})})]},j.id)):r.jsx("li",{className:"text-gray-400 p-4",children:"Aucune question en attente de rponse."})})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 h-full flex flex-col",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actions rapides"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs(Y,{to:"/admin/content",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:r.jsx(Br,{className:"h-5 w-5"})}),r.jsx("span",{children:"Grer le contenu"})]}),r.jsxs(Y,{to:"/admin/resources",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:r.jsx(We,{className:"h-5 w-5"})}),r.jsx("span",{children:"Grer les ressources"})]}),r.jsxs(Y,{to:"/admin/content?faq=moderate",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:r.jsx(ot,{className:"h-5 w-5"})}),r.jsx("span",{children:"Modrer la FAQ"})]}),r.jsxs(Y,{to:"/admin/users",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:r.jsx(ct,{className:"h-5 w-5"})}),r.jsx("span",{children:"Grer les utilisateurs"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full col-span-full",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Ajouter du contenu"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 w-full",children:[r.jsxs(Y,{to:"/admin/content?new=section",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:r.jsx(as,{className:"h-5 w-5"})}),r.jsx("span",{children:"Ajouter une section de guide"})]}),r.jsxs(Y,{to:"/admin/resources?new=resource",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:r.jsx(as,{className:"h-5 w-5"})}),r.jsx("span",{children:"Ajouter une ressource"})]}),r.jsxs(Y,{to:"/admin/content?new=faq",className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"p-2 rounded-md bg-green-100 text-green-800 mr-3",children:r.jsx(as,{className:"h-5 w-5"})}),r.jsx("span",{children:"Ajouter une question FAQ"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden mb-6",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activit rcente"})}),r.jsx("div",{className:`divide-y divide-gray-200 ${i.length>5?"max-h-80 overflow-y-auto":""}`,children:a?r.jsx("div",{className:"p-4 text-gray-400",children:"Chargement..."}):i.length===0?r.jsx("div",{className:"p-4 text-gray-400",children:"Aucune activit rcente."}):i.map(j=>{var C;return r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 rounded-md bg-blue-100 text-blue-800 mr-3",children:r.jsx(We,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-800",children:x6(j,u)}),r.jsx("div",{className:"text-xs text-gray-500",children:new Date(j.date).toLocaleString()}),typeof((C=j.details)==null?void 0:C.title)=="string"&&r.jsxs("div",{className:"text-sm text-gray-600",children:["Titre : ",j.details.title]})]})]})},j.id)})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4",children:"Vue d'ensemble par phase"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(j=>j.phase==="post-cps").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="post-cps").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="post-cps").length:0})]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(j=>j.phase==="during-process").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="during-process").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="during-process").length:0})]})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Sections"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(s)?s.filter(j=>j.phase==="pre-arrival").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Ressources"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(e)?e.filter(j=>j.phase==="pre-arrival").length:0})]})}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Questions FAQ"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:Array.isArray(n)?n.filter(j=>j.phase==="pre-arrival").length:0})]})})]})]})]})]}),r.jsx("div",{className:"container mx-auto px-4 py-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Gestion du contenu avanc"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsx(Y,{to:"/admin/webinars",className:"block p-4 bg-white border border-gray-200 rounded-lg hover:bg-blue-50 transition-colors",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-4",children:r.jsx(Os,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Gestion des webinaires"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Crer, modifier et supprimer des webinaires"})]})]})}),r.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-4",children:r.jsx(sr,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Cours en ligne"}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des cours en ligne et e-learning"})]})]})}),r.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-4",children:r.jsx(RR,{className:"w-6 h-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Podcasts"}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des podcasts et contenus audio"})]})]})}),r.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-lg mr-4",children:r.jsx(rr,{className:"w-6 h-6 text-red-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"vnements"}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des vnements physiques et virtuels"})]})]})}),r.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-4",children:r.jsx(nR,{className:"w-6 h-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Certificats"}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gestion des certificats et badges de comptence"})]})]})}),r.jsx("div",{className:"block p-4 bg-white border border-gray-200 rounded-lg opacity-60 cursor-not-allowed",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg mr-4",children:r.jsx(aR,{className:"w-6 h-6 text-indigo-600"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900",children:"Statistiques avances"}),r.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Analyse approfondie des donnes utilisateurs"})]})]})})]})]})})]})]})};async function Pt({type:t,target:e,targetId:s,user:n,details:i}){try{await Ut(Se(ne,"adminActivityLog"),{type:t,target:e,targetId:s||null,user:n||null,date:new Date().toISOString(),details:i||null}),console.log("Activit administrative enregistre avec succs")}catch(a){console.error("Erreur lors de l'enregistrement de l'activit administrative:",a)}}const Gx=({isOpen:t,onClose:e,onConfirm:s,title:n,message:i,confirmButtonText:a="Confirmer",cancelButtonText:o="Annuler",type:l="danger"})=>{if(!t)return null;const d=(()=>{switch(l){case"danger":return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"};case"warning":return{icon:"text-yellow-500",confirmButton:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500",header:"border-yellow-200 text-yellow-800"};case"info":return{icon:"text-blue-500",confirmButton:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500",header:"border-blue-200 text-blue-800"};default:return{icon:"text-red-500",confirmButton:"bg-red-600 hover:bg-red-700 focus:ring-red-500",header:"border-red-200 text-red-800"}}})(),h=p=>{p.target===p.currentTarget&&l!=="danger"&&e()};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:h,children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full overflow-hidden transition-all transform animate-modal",children:[r.jsxs("div",{className:`px-6 py-4 border-b ${d.header} flex items-center`,children:[r.jsx(ls,{className:`mr-2 h-5 w-5 ${d.icon}`}),r.jsx("h3",{className:"text-lg font-medium",children:n})]}),r.jsx("div",{className:"px-6 py-4",children:r.jsx("p",{className:"text-gray-700",children:i})}),r.jsxs("div",{className:"px-6 py-3 bg-gray-50 flex justify-end space-x-3",children:[r.jsx("button",{className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition-colors",onClick:e,children:o}),r.jsx("button",{className:`px-4 py-2 rounded-md text-white focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors ${d.confirmButton}`,onClick:()=>{s(),e()},autoFocus:!0,children:a})]})]})})};class Wl{constructor(e=0,s="Network Error"){this.status=e,this.text=s}}const g6=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},qt={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:g6()},Wx=t=>t?typeof t=="string"?{publicKey:t}:t.toString()==="[object Object]"?t:{}:{},y6=(t,e="https://api.emailjs.com")=>{if(!t)return;const s=Wx(t);qt.publicKey=s.publicKey,qt.blockHeadless=s.blockHeadless,qt.storageProvider=s.storageProvider,qt.blockList=s.blockList,qt.limitRate=s.limitRate,qt.origin=s.origin||e},k2=async(t,e,s={})=>{const n=await fetch(qt.origin+t,{method:"POST",headers:s,body:e}),i=await n.text(),a=new Wl(n.status,i);if(n.ok)return a;throw a},S2=(t,e,s)=>{if(!t||typeof t!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},v6=t=>{if(t&&t.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},C2=t=>t.webdriver||!t.languages||t.languages.length===0,T2=()=>new Wl(451,"Unavailable For Headless Browser"),b6=(t,e)=>{if(!Array.isArray(t))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},w6=t=>{var e;return!((e=t.list)!=null&&e.length)||!t.watchVariable},j6=(t,e)=>t instanceof FormData?t.get(e):t[e],A2=(t,e)=>{if(w6(t))return!1;b6(t.list,t.watchVariable);const s=j6(e,t.watchVariable);return typeof s!="string"?!1:t.list.includes(s)},I2=()=>new Wl(403,"Forbidden"),N6=(t,e)=>{if(typeof t!="number"||t<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},_6=async(t,e,s)=>{const n=Number(await s.get(t)||0);return e-Date.now()+n},P2=async(t,e,s)=>{if(!e.throttle||!s)return!1;N6(e.throttle,e.id);const n=e.id||t;return await _6(n,e.throttle,s)>0?!0:(await s.set(n,Date.now().toString()),!1)},R2=()=>new Wl(429,"Too Many Requests"),E6=async(t,e,s,n)=>{const i=Wx(n),a=i.publicKey||qt.publicKey,o=i.blockHeadless||qt.blockHeadless,l=i.storageProvider||qt.storageProvider,u={...qt.blockList,...i.blockList},d={...qt.limitRate,...i.limitRate};return o&&C2(navigator)?Promise.reject(T2()):(S2(a,t,e),v6(s),s&&A2(u,s)?Promise.reject(I2()):await P2(location.pathname,d,l)?Promise.reject(R2()):k2("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:a,service_id:t,template_id:e,template_params:s}),{"Content-type":"application/json"}))},k6=t=>{if(!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},S6=t=>typeof t=="string"?document.querySelector(t):t,C6=async(t,e,s,n)=>{const i=Wx(n),a=i.publicKey||qt.publicKey,o=i.blockHeadless||qt.blockHeadless,l=qt.storageProvider||i.storageProvider,u={...qt.blockList,...i.blockList},d={...qt.limitRate,...i.limitRate};if(o&&C2(navigator))return Promise.reject(T2());const h=S6(s);S2(a,t,e),k6(h);const p=new FormData(h);return A2(u,p)?Promise.reject(I2()):await P2(location.pathname,d,l)?Promise.reject(R2()):(p.append("lib_version","4.4.1"),p.append("service_id",t),p.append("template_id",e),p.append("user_id",a),k2("/api/v1.0/email/send-form",p))},Hx={init:y6,send:E6,sendForm:C6,EmailJSResponseStatus:Wl},T6={async sendFaqAnswerNotification(t,e,s){try{const n=be(ne,"faq",t),i=await xt(n);if(!i.exists())return console.error(`FAQ item not found (ID: ${t}) dans la collection 'faq'. Vrifiez le nom de collection.`),!1;const a=i.data();if(!a.userEmail)return console.log("No user email associated with this FAQ item"),!1;const o=Se(ne,"users"),l=kt(o,or("email","==",a.userEmail)),u=await Ye(l);let d="Utilisateur";u.empty||(d=u.docs[0].data().displayName||"Utilisateur");const h={to_email:a.userEmail,to_name:d,question:e,answer:s,app_name:"ESIG-prep-guide",faq_url:`${window.location.origin}/Esig-prep-guide/faq`};return await A6(h)}catch(n){return console.error("Error sending FAQ answer notification:",n),!1}}},Na={SERVICE_ID:"service_vhvuugn",TEMPLATE_ID:"template_93nn8cu",PUBLIC_KEY:"l4eGBb6GgLVODJBOf"},A6=async t=>{console.log("Prparation de l'envoi d'email avec les donnes:",t);try{const e={to_email:t.to_email,to_name:t.to_name||"Utilisateur",question:t.question,answer:t.answer,app_name:t.app_name,faq_url:t.faq_url},s=await Hx.send(Na.SERVICE_ID,Na.TEMPLATE_ID,e,Na.PUBLIC_KEY);return console.log("Rsultat de l'envoi d'email:",s.status,s.text),s.status===200}catch(e){return console.error("Erreur lors de l'envoi d'email:",e),!1}},I6=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(null),[i,a]=b.useState(null);return{isSending:t,sendSuccess:s,errorMessage:i,sendFaqAnswerNotification:async(l,u,d)=>{e(!0),n(null),a(null);try{const h=await T6.sendFaqAnswerNotification(l,u,d);return n(h),h}catch(h){const p=h instanceof Error?h.message:"Une erreur est survenue lors de l'envoi de la notification";return a(p),console.error("Failed to send FAQ answer notification:",h),!1}finally{e(!1)}}}},Xh=()=>{const[t]=lj(),e=it(),{currentUser:s,isAdmin:n,isEditor:i}=Te(),a=window.location.href.includes("/admin/"),o=a?n():!1;b.useEffect(()=>{if(a&&!n()&&i()){const z=window.location.search;e(`/editor/content${z}`)}},[a,n,i,e]);const{sendFaqAnswerNotification:l}=I6(),u=(z,ce)=>`${o?"/admin":"/editor"}/content?edit=${z}${ce==="faq"?"&mode=faq":""}`,{guideSections:d,addGuideSection:h,updateGuideSection:p,deleteGuideSection:x,resources:j,faqItems:C,addFAQItem:R,updateFAQItem:S,deleteFAQItem:y}=Ui(),v=t.get("new")==="section",_=t.get("new")==="faq",P=v?null:t.get("edit")&&d.some(z=>z.id===t.get("edit"))?t.get("edit"):null,L=_?null:t.get("edit")&&C.some(z=>z.id===t.get("edit"))?t.get("edit"):null,[M,N]=b.useState(""),[f,w]=b.useState("post-cps"),[E,A]=b.useState(""),[I,k]=b.useState(1),[B,$]=b.useState([]),[H,O]=b.useState([]),[F,re]=b.useState(!1),[V,U]=b.useState(null),[X,oe]=b.useState(""),[me,_e]=b.useState("bulletList"),[ee,J]=b.useState([]),[ae,Ee]=b.useState(""),[Ae,De]=b.useState(""),[ke,Fe]=b.useState(""),[Gt,Z]=b.useState(""),[mt,$e]=b.useState("post-cps"),[Ct,Qe]=b.useState("phase"),[W,fe]=b.useState(!0),[Ie,Me]=b.useState(!1),[Ke,ye]=b.useState(!1),[de,Ze]=b.useState("section"),[_r,Qn]=b.useState(!1),[Er,zi]=b.useState(null);b.useEffect(()=>{if(P){const z=d.find(ce=>ce.id===P);z&&(N(z.title),w(z.phase),A(z.content),k(z.order),$(Array.isArray(z.resources)?z.resources:[]),O(z.subSections||[]))}else if(v){N(""),w("post-cps"),A("");const z=d.filter(ce=>ce.phase==="post-cps");k(z.length>0?Math.max(...z.map(ce=>ce.order))+1:1),$([]),O([])}if(L){const z=C.find(ce=>ce.id===L);z&&(De(z.question),Fe(z.answer),Z(z.category||""),$e(z.phase||"post-cps"),Qe(z.questionType||"phase"),fe(!!z.isApproved),Me(!!z.isAnswered))}else _&&(De(""),Fe(""),Z(""),$e("post-cps"),Qe("phase"),fe(!0),Me(!1))},[P,v,d,L,_,C]);const Kn=()=>{Fe(""),Me(!1)},Hl=z=>{const ce=z.trim()!==""&&z!=="Cette question est en attente de rponse par notre quipe.";Me(ce)},Qa=z=>{if(z.preventDefault(),_||L)if(L){const ce=ke.trim()!==""&&ke!=="Cette question est en attente de rponse par notre quipe.";Me(ce);const ge=C.find($s=>$s.id===L),Nt=(ge==null?void 0:ge.isAnswered)||!1;S(L,{question:Ae,answer:ke,category:Gt,phase:Ct==="phase"?mt:void 0,questionType:Ct,isApproved:W,isAnswered:ce}),ce&&!Nt&&L&&(Qn(!0),zi(null),l(L,Ae,ke).then($s=>{$s?(console.log("Email de notification envoy avec succs"),zi("success"),setTimeout(()=>{Qn(!1)},5e3)):(console.error("chec de l'envoi de l'email de notification"),zi("error"),setTimeout(()=>{Qn(!1)},5e3))}).catch($s=>{console.error("Erreur lors de l'envoi de l'email de notification:",$s),zi("error"),setTimeout(()=>{Qn(!1)},5e3)})),Pt({type:"Modification",target:"FAQ",targetId:L,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{question:Ae}})}else{const ce=ke.trim()!==""&&ke!=="Cette question est en attente de rponse par notre quipe.";Me(ce),R({question:Ae,answer:ke,category:Gt,phase:Ct==="phase"?mt:void 0,questionType:Ct,isApproved:W,isAnswered:ce,createdDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Pt({type:"Ajout",target:"FAQ",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{question:Ae}})}else P?(p(P,{title:M,phase:f,content:E,order:I,resources:B,subSections:H.length>0?H:void 0}),Pt({type:"Modification",target:"Section",targetId:P,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:M}})):(h({title:M,phase:f,content:E,order:I,resources:B,subSections:H.length>0?H:void 0}),Pt({type:"Ajout",target:"Section",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:M}}));if(_||v){if(_)De(""),Fe(""),Z(""),$e("post-cps"),Qe("phase"),fe(!0),Me(!1);else if(v){N(""),A("");const ce=d.filter(ge=>ge.phase===f);k(ce.length>0?Math.max(...ce.map(ge=>ge.order))+1:1),$([])}}},Bi=z=>{Ze(z),ye(!0)},Wd=()=>{de==="section"&&P?(x(P),Pt({type:"Suppression",target:"Section",targetId:P,user:s==null?void 0:s.uid,details:{title:M}}),e("/admin/content")):de==="faq"&&L&&(y(L),Pt({type:"Suppression",target:"FAQ",targetId:L,user:s==null?void 0:s.uid,details:{question:Ae}})),ye(!1)},Hd=z=>{B.includes(z)?$(B.filter(ce=>ce!==z)):$([...B,z])},$i=z=>{z?(U(z),oe(z.title),_e(z.type),J([...z.items])):(U(null),oe(""),_e("bulletList"),J([])),re(!0)},Gi=()=>{re(!1),oe(""),Ee("")},Ql=()=>{if(ae.trim()==="")return;const z={id:Date.now().toString(),content:ae,checked:!1,value:""};J([...ee,z]),Ee("")},Yn=z=>{J(ee.filter(ce=>ce.id!==z))},Ka=async()=>{if(X.trim()===""||ee.length===0){alert("Veuillez ajouter un titre et au moins un lment");return}const z={id:V?V.id:Date.now().toString(),title:X,type:me,items:ee};let ce;if(V?ce=H.map(ge=>ge.id===V.id?z:ge):ce=[...H,z],O(ce),P)try{d.find(Nt=>Nt.id===P)&&(await p(P,{subSections:ce}),Pt({type:"Modification",target:"Sous-section",targetId:P,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{action:V?"Modification de sous-section":"Ajout de sous-section",sectionTitle:M}}))}catch(ge){console.error("Erreur lors de la sauvegarde de la sous-section:",ge),alert("Erreur lors de la sauvegarde. Veuillez ressayer.")}Gi()},Ya=async z=>{if(window.confirm("tes-vous sr de vouloir supprimer cette sous-section?")){const ce=H.filter(ge=>ge.id!==z);if(O(ce),P)try{d.find(Nt=>Nt.id===P)&&(await p(P,{subSections:ce.length>0?ce:[]}),Pt({type:"Modification",target:"Sous-section",targetId:P,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{action:"Suppression de sous-section",sectionTitle:M}}))}catch(ge){console.error("Erreur lors de la suppression de la sous-section:",ge),alert("Erreur lors de la suppression. Veuillez ressayer."),O(H)}}},kr=z=>{if(z===0)return;const ce=[...H];[ce[z],ce[z-1]]=[ce[z-1],ce[z]],O(ce)},Kl=z=>{if(z===H.length-1)return;const ce=[...H];[ce[z],ce[z+1]]=[ce[z+1],ce[z]],O(ce)},nn=j.filter(z=>z.phase===f),Ps={"post-cps":d.filter(z=>z.phase==="post-cps").sort((z,ce)=>z.order-ce.order),"during-process":d.filter(z=>z.phase==="during-process").sort((z,ce)=>z.order-ce.order),"pre-arrival":d.filter(z=>z.phase==="pre-arrival").sort((z,ce)=>z.order-ce.order)};return r.jsxs("div",{className:"bg-gray-50 min-h-screen relative",children:[_r&&r.jsxs("div",{className:`fixed top-6 right-6 p-4 rounded-md shadow-md z-50 flex items-center transition-all duration-300 ease-in-out ${Er==="success"?"bg-green-100 border-l-4 border-green-500":Er==="error"?"bg-red-100 border-l-4 border-red-500":"bg-blue-100 border-l-4 border-blue-500"}`,children:[Er==="success"?r.jsx(Pi,{className:"w-5 h-5 text-green-600 mr-3"}):Er==="error"?r.jsx(u2,{className:"w-5 h-5 text-red-600 mr-3"}):r.jsx(zr,{className:"w-5 h-5 text-blue-600 mr-3 animate-pulse"}),r.jsx("div",{children:Er==="success"?r.jsx("p",{className:"text-green-800 font-medium",children:"Email de notification envoy avec succs!"}):Er==="error"?r.jsx("p",{className:"text-red-800 font-medium",children:"chec de l'envoi de l'email de notification."}):r.jsx("p",{className:"text-blue-800 font-medium",children:"Envoi de la notification par email..."})})]}),r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:v?"Ajouter une nouvelle section":_?"Ajouter une question FAQ":L?"Modifier la FAQ":P?"Modifier la section":"dition"}),r.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:_||L?r.jsx("form",{onSubmit:Qa,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"faq-question",className:"block text-sm font-medium text-gray-700",children:"Question"}),r.jsx("input",{type:"text",id:"faq-question",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Ae,onChange:z=>De(z.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{htmlFor:"faq-answer",className:"block text-sm font-medium text-gray-700",children:"Rponse"}),L&&r.jsx("button",{type:"button",onClick:Kn,className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Vider et rpondre"})]}),r.jsx("textarea",{id:"faq-answer",rows:6,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:ke,onChange:z=>{Fe(z.target.value),Hl(z.target.value)},required:!0}),r.jsxs("div",{className:"mt-2 flex items-center text-sm",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${Ie?"bg-green-500":"bg-yellow-500"} mr-2`}),r.jsx("span",{className:"text-gray-600",children:Ie?"Cette question est marque comme rpondue":"Cette question est en attente de rponse"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"faq-questionType",className:"block text-sm font-medium text-gray-700",children:"Type de question"}),r.jsxs("select",{id:"faq-questionType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Ct,onChange:z=>Qe(z.target.value),required:!0,children:[r.jsx("option",{value:"phase",children:"En lien avec une phase"}),r.jsx("option",{value:"site",children:"Fonctionnement du site"}),r.jsx("option",{value:"general",children:"Question gnrale"})]})]}),Ct==="phase"&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"faq-phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),r.jsxs("select",{id:"faq-phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:mt,onChange:z=>$e(z.target.value),required:Ct==="phase",children:[r.jsx("option",{value:"post-cps",children:"Post-CPS"}),r.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),r.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"faq-category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),r.jsx("input",{type:"text",id:"faq-category",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:Gt,onChange:z=>Z(z.target.value),required:!0})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"faq-approved",className:"h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500",checked:W,onChange:z=>fe(z.target.checked)}),r.jsx("label",{htmlFor:"faq-approved",className:"ml-2 block text-sm text-gray-700",children:"Approuve (visible publiquement)"})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[r.jsx("div",{children:L&&r.jsxs("button",{type:"button",onClick:()=>Bi("faq"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(pi,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[r.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),r.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[r.jsx(Pp,{className:"mr-2 h-4 w-4"}),_?"Ajouter":"Enregistrer"]})]})]})]})}):r.jsx("form",{onSubmit:Qa,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la section"}),r.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:M,onChange:z=>N(z.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),r.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:z=>{const ce=z.target.value;w(ce);const ge=d.filter(Nt=>Nt.phase===ce);k(ge.length>0?Math.max(...ge.map(Nt=>Nt.order))+1:1),$([])},required:!0,children:[r.jsx("option",{value:"post-cps",children:"Post-CPS"}),r.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),r.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"order",className:"block text-sm font-medium text-gray-700",children:"Ordre d'affichage"}),r.jsx("input",{type:"number",id:"order",min:"1",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:I,onChange:z=>k(parseInt(z.target.value)),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700",children:"Contenu de la section"}),r.jsx("textarea",{id:"content",rows:8,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:E,onChange:z=>A(z.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sous-sections"}),r.jsxs("button",{type:"button",onClick:()=>$i(),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[r.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter une sous-section"]})]}),H.length>0?r.jsx("div",{className:"mt-2 space-y-3 border border-gray-200 rounded-lg p-4 bg-gray-50",children:H.map((z,ce)=>r.jsxs("div",{className:"bg-white p-3 rounded-md border border-gray-200 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center",children:[z.type==="bulletList"&&r.jsx(Ip,{className:"w-4 h-4 text-blue-500 mr-2"}),z.type==="checkList"&&r.jsx(Zc,{className:"w-4 h-4 text-green-500 mr-2"}),z.type==="inputField"&&r.jsx(eu,{className:"w-4 h-4 text-purple-500 mr-2"}),r.jsx("h4",{className:"text-md font-medium text-gray-800",children:z.title})]}),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{type:"button",onClick:()=>kr(ce),className:"text-gray-400 hover:text-gray-600 p-1 rounded",disabled:ce===0,title:"Monter",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})}),r.jsx("button",{type:"button",onClick:()=>Kl(ce),className:"text-gray-400 hover:text-gray-600 p-1 rounded",disabled:ce===H.length-1,title:"Descendre",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),r.jsx("button",{type:"button",onClick:()=>$i(z),className:"text-blue-500 hover:text-blue-700 p-1 rounded",title:"Modifier",children:r.jsx(yR,{className:"h-4 w-4"})}),r.jsx("button",{type:"button",onClick:()=>Ya(z.id),className:"text-red-500 hover:text-red-700 p-1 rounded",title:"Supprimer",children:r.jsx(pi,{className:"h-4 w-4"})})]})]}),r.jsx("ul",{className:"pl-5 mt-1 space-y-1",children:z.items.map(ge=>r.jsxs("li",{className:"text-sm text-gray-700",children:[z.type==="bulletList"&&r.jsxs("span",{children:[" ",ge.content]}),z.type==="checkList"&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-4 w-4 text-gray-400 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("span",{children:ge.content})]}),z.type==="inputField"&&r.jsxs("div",{className:"flex items-center",children:[r.jsxs("span",{children:[ge.content,":"]}),r.jsx("span",{className:"ml-2 text-gray-400 italic",children:"champ de saisie"})]})]},ge.id))})]},z.id))}):r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucune sous-section ajoute. Ajoutez des sous-sections pour organiser votre contenu."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ressources associes"}),Array.isArray(nn)&&nn.length>0?r.jsx("div",{className:"mt-1 border border-gray-300 rounded-md divide-y",children:nn.map(z=>r.jsxs("div",{className:"flex items-center p-3 hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",id:`resource-${z.id}`,className:"h-4 w-4 text-blue-600 rounded",checked:B.includes(z.id),onChange:()=>Hd(z.id)}),r.jsx("label",{htmlFor:`resource-${z.id}`,className:"ml-3 block text-sm text-gray-700",children:z.title})]},z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible pour cette phase. Ajoutez d'abord des ressources."})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between space-y-4 sm:space-y-0",children:[r.jsx("div",{children:P&&r.jsxs("button",{type:"button",onClick:()=>Bi("section"),className:"inline-flex items-center justify-center w-full sm:w-auto px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx(pi,{className:"mr-2 -ml-0.5 h-4 w-4"})," Supprimer"]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[r.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),r.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center w-full sm:w-auto px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[r.jsx(Pp,{className:"mr-2 h-4 w-4"}),v?"Ajouter":"Enregistrer"]})]})]})]})})})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sections existantes"}),r.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/content?new=section`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[r.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Ps["post-cps"])&&Ps["post-cps"].length>0?r.jsx("ul",{className:"space-y-2",children:Ps["post-cps"].map(z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),r.jsx("span",{className:"flex-grow",children:z.title}),r.jsx(Yh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(Ps["during-process"])&&Ps["during-process"].length>0?r.jsx("ul",{className:"space-y-2",children:Ps["during-process"].map(z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),r.jsx("span",{className:"flex-grow",children:z.title}),r.jsx(Yh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(Ps["pre-arrival"])&&Ps["pre-arrival"].length>0?r.jsx("ul",{className:"space-y-2",children:Ps["pre-arrival"].map(z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(u(z.id,"section")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${P===z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-6 text-center mr-2 text-gray-500",children:z.order}),r.jsx("span",{className:"flex-grow",children:z.title}),r.jsx(Yh,{className:"w-4 h-4 text-gray-400"})]})},z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune section disponible"})]}),r.jsxs("div",{className:"mt-8 border-t pt-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Questions frquentes"}),r.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/content?new=faq&mode=faq`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[r.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),(()=>{const z={};return C.forEach(ce=>{const ge=ce.category||"Non catgoris";z[ge]||(z[ge]=[]),z[ge].push(ce)}),Object.entries(z).map(([ce,ge])=>r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:ce}),ge.length>0?r.jsx("ul",{className:"space-y-2",children:ge.map(Nt=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(u(Nt.id,"faq")),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${L===Nt.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("span",{className:"flex-grow",children:Nt.question}),!Nt.isAnswered&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800 mr-2",children:"En attente"}),Nt.isApproved?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:"Approuve"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 mr-2",children:"Non approuve"})]})},Nt.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune question disponible"})]},ce))})()]})]})]})})]})}),r.jsx(Gx,{isOpen:Ke,onClose:()=>ye(!1),onConfirm:Wd,title:`Confirmer la suppression de ${de==="section"?"la section":"la question FAQ"}`,message:de==="section"?`tes-vous sr de vouloir supprimer la section "${M}" ? Cette action est irrversible.`:`tes-vous sr de vouloir supprimer la question "${Ae}" ? Cette action est irrversible.`,confirmButtonText:"Supprimer",type:"danger"}),F&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:r.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:V?"Modifier la sous-section":"Ajouter une sous-section"}),r.jsx("button",{onClick:Gi,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:r.jsx(St,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"subSectionTitle",className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de la sous-section"}),r.jsx("input",{type:"text",id:"subSectionTitle",className:"block w-full rounded-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:X,onChange:z=>oe(z.target.value),placeholder:"Ex: Documents ncessaires"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de sous-section"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${me==="bulletList"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("bulletList"),children:[r.jsx(Ip,{className:"w-4 h-4 mr-2"}),"Liste  puces"]}),r.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${me==="checkList"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("checkList"),children:[r.jsx(Zc,{className:"w-4 h-4 mr-2"}),"Cases  cocher"]}),r.jsxs("button",{type:"button",className:`flex items-center justify-center px-4 py-2 border rounded-md ${me==="inputField"?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:()=>_e("inputField"),children:[r.jsx(eu,{className:"w-4 h-4 mr-2"}),"Champs  remplir"]})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"flex justify-between items-center mb-1",children:r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:me==="bulletList"?"lments de la liste":me==="checkList"?"lments  cocher":"Champs  remplir"})}),r.jsxs("div",{className:"mb-4 flex",children:[r.jsx("input",{type:"text",className:"block w-full rounded-l-lg border border-gray-300 px-3 py-2 focus:border-blue-500 focus:ring-blue-500",value:ae,onChange:z=>Ee(z.target.value),placeholder:me==="bulletList"?"Nouvel lment de liste":me==="checkList"?"Nouvelle case  cocher":"Libell du champ"}),r.jsx("button",{type:"button",onClick:Ql,className:"inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-r-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r.jsx(as,{className:"w-4 h-4"})})]}),ee.length>0?r.jsx("ul",{className:"bg-gray-50 rounded-md border border-gray-200 p-3 space-y-2 max-h-60 overflow-y-auto",children:ee.map(z=>r.jsxs("li",{className:"flex items-center justify-between group p-2 hover:bg-gray-100 rounded-md",children:[r.jsxs("div",{className:"flex items-center",children:[me==="bulletList"&&r.jsx("span",{className:"mr-2",children:""}),me==="checkList"&&r.jsx(Zc,{className:"w-4 h-4 mr-2 text-gray-400"}),me==="inputField"&&r.jsx(eu,{className:"w-4 h-4 mr-2 text-gray-400"}),r.jsx("span",{children:z.content})]}),r.jsx("button",{type:"button",onClick:()=>Yn(z.id),className:"text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(St,{className:"w-4 h-4"})})]},z.id))}):r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Aucun lment ajout. Ajoutez au moins un lment pour continuer."})]})]}),r.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:Gi,className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),r.jsx("button",{type:"button",onClick:Ka,className:"px-4 py-2 bg-blue-600 border border-transparent rounded-md text-sm font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:V?"Mettre  jour":"Ajouter"})]})]})})]})};var P6="rpc",R6="upload",D6="download",Zh="app",em="user",tm="team",L6="noauth",M6="cookie",Ku="dropboxapi.com",Pv="dropbox.com",Dp={api:"api",notify:"bolt",content:"api-content"},D={};D.accountSetProfilePhoto=function(t){return this.request("account/set_profile_photo",t,"user","api","rpc","account_info.write")};D.authTokenFromOauth1=function(t){return this.request("auth/token/from_oauth1",t,"app","api","rpc",null)};D.authTokenRevoke=function(){return this.request("auth/token/revoke",null,"user","api","rpc",null)};D.checkApp=function(t){return this.request("check/app",t,"app","api","rpc",null)};D.checkUser=function(t){return this.request("check/user",t,"user","api","rpc","account_info.read")};D.contactsDeleteManualContacts=function(){return this.request("contacts/delete_manual_contacts",null,"user","api","rpc","contacts.write")};D.contactsDeleteManualContactsBatch=function(t){return this.request("contacts/delete_manual_contacts_batch",t,"user","api","rpc","contacts.write")};D.filePropertiesPropertiesAdd=function(t){return this.request("file_properties/properties/add",t,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesOverwrite=function(t){return this.request("file_properties/properties/overwrite",t,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesRemove=function(t){return this.request("file_properties/properties/remove",t,"user","api","rpc","files.metadata.write")};D.filePropertiesPropertiesSearch=function(t){return this.request("file_properties/properties/search",t,"user","api","rpc","files.metadata.read")};D.filePropertiesPropertiesSearchContinue=function(t){return this.request("file_properties/properties/search/continue",t,"user","api","rpc","files.metadata.read")};D.filePropertiesPropertiesUpdate=function(t){return this.request("file_properties/properties/update",t,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesAddForTeam=function(t){return this.request("file_properties/templates/add_for_team",t,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesAddForUser=function(t){return this.request("file_properties/templates/add_for_user",t,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesGetForTeam=function(t){return this.request("file_properties/templates/get_for_team",t,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesGetForUser=function(t){return this.request("file_properties/templates/get_for_user",t,"user","api","rpc","files.metadata.read")};D.filePropertiesTemplatesListForTeam=function(){return this.request("file_properties/templates/list_for_team",null,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesListForUser=function(){return this.request("file_properties/templates/list_for_user",null,"user","api","rpc","files.metadata.read")};D.filePropertiesTemplatesRemoveForTeam=function(t){return this.request("file_properties/templates/remove_for_team",t,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesRemoveForUser=function(t){return this.request("file_properties/templates/remove_for_user",t,"user","api","rpc","files.metadata.write")};D.filePropertiesTemplatesUpdateForTeam=function(t){return this.request("file_properties/templates/update_for_team",t,"team","api","rpc","files.team_metadata.write")};D.filePropertiesTemplatesUpdateForUser=function(t){return this.request("file_properties/templates/update_for_user",t,"user","api","rpc","files.metadata.write")};D.fileRequestsCount=function(){return this.request("file_requests/count",null,"user","api","rpc","file_requests.read")};D.fileRequestsCreate=function(t){return this.request("file_requests/create",t,"user","api","rpc","file_requests.write")};D.fileRequestsDelete=function(t){return this.request("file_requests/delete",t,"user","api","rpc","file_requests.write")};D.fileRequestsDeleteAllClosed=function(){return this.request("file_requests/delete_all_closed",null,"user","api","rpc","file_requests.write")};D.fileRequestsGet=function(t){return this.request("file_requests/get",t,"user","api","rpc","file_requests.read")};D.fileRequestsListV2=function(t){return this.request("file_requests/list_v2",t,"user","api","rpc","file_requests.read")};D.fileRequestsList=function(){return this.request("file_requests/list",null,"user","api","rpc","file_requests.read")};D.fileRequestsListContinue=function(t){return this.request("file_requests/list/continue",t,"user","api","rpc","file_requests.read")};D.fileRequestsUpdate=function(t){return this.request("file_requests/update",t,"user","api","rpc","file_requests.write")};D.filesAlphaGetMetadata=function(t){return this.request("files/alpha/get_metadata",t,"user","api","rpc","files.metadata.read")};D.filesAlphaUpload=function(t){return this.request("files/alpha/upload",t,"user","content","upload","files.content.write")};D.filesCopyV2=function(t){return this.request("files/copy_v2",t,"user","api","rpc","files.content.write")};D.filesCopy=function(t){return this.request("files/copy",t,"user","api","rpc","files.content.write")};D.filesCopyBatchV2=function(t){return this.request("files/copy_batch_v2",t,"user","api","rpc","files.content.write")};D.filesCopyBatch=function(t){return this.request("files/copy_batch",t,"user","api","rpc","files.content.write")};D.filesCopyBatchCheckV2=function(t){return this.request("files/copy_batch/check_v2",t,"user","api","rpc","files.content.write")};D.filesCopyBatchCheck=function(t){return this.request("files/copy_batch/check",t,"user","api","rpc","files.content.write")};D.filesCopyReferenceGet=function(t){return this.request("files/copy_reference/get",t,"user","api","rpc","files.content.write")};D.filesCopyReferenceSave=function(t){return this.request("files/copy_reference/save",t,"user","api","rpc","files.content.write")};D.filesCreateFolderV2=function(t){return this.request("files/create_folder_v2",t,"user","api","rpc","files.content.write")};D.filesCreateFolder=function(t){return this.request("files/create_folder",t,"user","api","rpc","files.content.write")};D.filesCreateFolderBatch=function(t){return this.request("files/create_folder_batch",t,"user","api","rpc","files.content.write")};D.filesCreateFolderBatchCheck=function(t){return this.request("files/create_folder_batch/check",t,"user","api","rpc","files.content.write")};D.filesDeleteV2=function(t){return this.request("files/delete_v2",t,"user","api","rpc","files.content.write")};D.filesDelete=function(t){return this.request("files/delete",t,"user","api","rpc","files.content.write")};D.filesDeleteBatch=function(t){return this.request("files/delete_batch",t,"user","api","rpc","files.content.write")};D.filesDeleteBatchCheck=function(t){return this.request("files/delete_batch/check",t,"user","api","rpc","files.content.write")};D.filesDownload=function(t){return this.request("files/download",t,"user","content","download","files.content.read")};D.filesDownloadZip=function(t){return this.request("files/download_zip",t,"user","content","download","files.content.read")};D.filesExport=function(t){return this.request("files/export",t,"user","content","download","files.content.read")};D.filesGetFileLockBatch=function(t){return this.request("files/get_file_lock_batch",t,"user","api","rpc","files.content.read")};D.filesGetMetadata=function(t){return this.request("files/get_metadata",t,"user","api","rpc","files.metadata.read")};D.filesGetPreview=function(t){return this.request("files/get_preview",t,"user","content","download","files.content.read")};D.filesGetTemporaryLink=function(t){return this.request("files/get_temporary_link",t,"user","api","rpc","files.content.read")};D.filesGetTemporaryUploadLink=function(t){return this.request("files/get_temporary_upload_link",t,"user","api","rpc","files.content.write")};D.filesGetThumbnail=function(t){return this.request("files/get_thumbnail",t,"user","content","download","files.content.read")};D.filesGetThumbnailV2=function(t){return this.request("files/get_thumbnail_v2",t,"app, user","content","download","files.content.read")};D.filesGetThumbnailBatch=function(t){return this.request("files/get_thumbnail_batch",t,"user","content","rpc","files.content.read")};D.filesListFolder=function(t){return this.request("files/list_folder",t,"app, user","api","rpc","files.metadata.read")};D.filesListFolderContinue=function(t){return this.request("files/list_folder/continue",t,"app, user","api","rpc","files.metadata.read")};D.filesListFolderGetLatestCursor=function(t){return this.request("files/list_folder/get_latest_cursor",t,"user","api","rpc","files.metadata.read")};D.filesListFolderLongpoll=function(t){return this.request("files/list_folder/longpoll",t,"noauth","notify","rpc","files.metadata.read")};D.filesListRevisions=function(t){return this.request("files/list_revisions",t,"user","api","rpc","files.metadata.read")};D.filesLockFileBatch=function(t){return this.request("files/lock_file_batch",t,"user","api","rpc","files.content.write")};D.filesMoveV2=function(t){return this.request("files/move_v2",t,"user","api","rpc","files.content.write")};D.filesMove=function(t){return this.request("files/move",t,"user","api","rpc","files.content.write")};D.filesMoveBatchV2=function(t){return this.request("files/move_batch_v2",t,"user","api","rpc","files.content.write")};D.filesMoveBatch=function(t){return this.request("files/move_batch",t,"user","api","rpc","files.content.write")};D.filesMoveBatchCheckV2=function(t){return this.request("files/move_batch/check_v2",t,"user","api","rpc","files.content.write")};D.filesMoveBatchCheck=function(t){return this.request("files/move_batch/check",t,"user","api","rpc","files.content.write")};D.filesPaperCreate=function(t){return this.request("files/paper/create",t,"user","api","upload","files.content.write")};D.filesPaperUpdate=function(t){return this.request("files/paper/update",t,"user","api","upload","files.content.write")};D.filesPermanentlyDelete=function(t){return this.request("files/permanently_delete",t,"user","api","rpc","files.permanent_delete")};D.filesPropertiesAdd=function(t){return this.request("files/properties/add",t,"user","api","rpc","files.metadata.write")};D.filesPropertiesOverwrite=function(t){return this.request("files/properties/overwrite",t,"user","api","rpc","files.metadata.write")};D.filesPropertiesRemove=function(t){return this.request("files/properties/remove",t,"user","api","rpc","files.metadata.write")};D.filesPropertiesTemplateGet=function(t){return this.request("files/properties/template/get",t,"user","api","rpc","files.metadata.read")};D.filesPropertiesTemplateList=function(){return this.request("files/properties/template/list",null,"user","api","rpc","files.metadata.read")};D.filesPropertiesUpdate=function(t){return this.request("files/properties/update",t,"user","api","rpc","files.metadata.write")};D.filesRestore=function(t){return this.request("files/restore",t,"user","api","rpc","files.content.write")};D.filesSaveUrl=function(t){return this.request("files/save_url",t,"user","api","rpc","files.content.write")};D.filesSaveUrlCheckJobStatus=function(t){return this.request("files/save_url/check_job_status",t,"user","api","rpc","files.content.write")};D.filesSearch=function(t){return this.request("files/search",t,"user","api","rpc","files.metadata.read")};D.filesSearchV2=function(t){return this.request("files/search_v2",t,"user","api","rpc","files.metadata.read")};D.filesSearchContinueV2=function(t){return this.request("files/search/continue_v2",t,"user","api","rpc","files.metadata.read")};D.filesTagsAdd=function(t){return this.request("files/tags/add",t,"user","api","rpc","files.metadata.write")};D.filesTagsGet=function(t){return this.request("files/tags/get",t,"user","api","rpc","files.metadata.read")};D.filesTagsRemove=function(t){return this.request("files/tags/remove",t,"user","api","rpc","files.metadata.write")};D.filesUnlockFileBatch=function(t){return this.request("files/unlock_file_batch",t,"user","api","rpc","files.content.write")};D.filesUpload=function(t){return this.request("files/upload",t,"user","content","upload","files.content.write")};D.filesUploadSessionAppendV2=function(t){return this.request("files/upload_session/append_v2",t,"user","content","upload","files.content.write")};D.filesUploadSessionAppend=function(t){return this.request("files/upload_session/append",t,"user","content","upload","files.content.write")};D.filesUploadSessionFinish=function(t){return this.request("files/upload_session/finish",t,"user","content","upload","files.content.write")};D.filesUploadSessionFinishBatch=function(t){return this.request("files/upload_session/finish_batch",t,"user","api","rpc","files.content.write")};D.filesUploadSessionFinishBatchV2=function(t){return this.request("files/upload_session/finish_batch_v2",t,"user","api","rpc","files.content.write")};D.filesUploadSessionFinishBatchCheck=function(t){return this.request("files/upload_session/finish_batch/check",t,"user","api","rpc","files.content.write")};D.filesUploadSessionStart=function(t){return this.request("files/upload_session/start",t,"user","content","upload","files.content.write")};D.filesUploadSessionStartBatch=function(t){return this.request("files/upload_session/start_batch",t,"user","api","rpc","files.content.write")};D.openidUserinfo=function(t){return this.request("openid/userinfo",t,"user","api","rpc","openid")};D.paperDocsArchive=function(t){return this.request("paper/docs/archive",t,"user","api","rpc","files.content.write")};D.paperDocsCreate=function(t){return this.request("paper/docs/create",t,"user","api","upload","files.content.write")};D.paperDocsDownload=function(t){return this.request("paper/docs/download",t,"user","api","download","files.content.read")};D.paperDocsFolderUsersList=function(t){return this.request("paper/docs/folder_users/list",t,"user","api","rpc","sharing.read")};D.paperDocsFolderUsersListContinue=function(t){return this.request("paper/docs/folder_users/list/continue",t,"user","api","rpc","sharing.read")};D.paperDocsGetFolderInfo=function(t){return this.request("paper/docs/get_folder_info",t,"user","api","rpc","sharing.read")};D.paperDocsList=function(t){return this.request("paper/docs/list",t,"user","api","rpc","files.metadata.read")};D.paperDocsListContinue=function(t){return this.request("paper/docs/list/continue",t,"user","api","rpc","files.metadata.read")};D.paperDocsPermanentlyDelete=function(t){return this.request("paper/docs/permanently_delete",t,"user","api","rpc","files.permanent_delete")};D.paperDocsSharingPolicyGet=function(t){return this.request("paper/docs/sharing_policy/get",t,"user","api","rpc","sharing.read")};D.paperDocsSharingPolicySet=function(t){return this.request("paper/docs/sharing_policy/set",t,"user","api","rpc","sharing.write")};D.paperDocsUpdate=function(t){return this.request("paper/docs/update",t,"user","api","upload","files.content.write")};D.paperDocsUsersAdd=function(t){return this.request("paper/docs/users/add",t,"user","api","rpc","sharing.write")};D.paperDocsUsersList=function(t){return this.request("paper/docs/users/list",t,"user","api","rpc","sharing.read")};D.paperDocsUsersListContinue=function(t){return this.request("paper/docs/users/list/continue",t,"user","api","rpc","sharing.read")};D.paperDocsUsersRemove=function(t){return this.request("paper/docs/users/remove",t,"user","api","rpc","sharing.write")};D.paperFoldersCreate=function(t){return this.request("paper/folders/create",t,"user","api","rpc","files.content.write")};D.sharingAddFileMember=function(t){return this.request("sharing/add_file_member",t,"user","api","rpc","sharing.write")};D.sharingAddFolderMember=function(t){return this.request("sharing/add_folder_member",t,"user","api","rpc","sharing.write")};D.sharingCheckJobStatus=function(t){return this.request("sharing/check_job_status",t,"user","api","rpc","sharing.write")};D.sharingCheckRemoveMemberJobStatus=function(t){return this.request("sharing/check_remove_member_job_status",t,"user","api","rpc","sharing.write")};D.sharingCheckShareJobStatus=function(t){return this.request("sharing/check_share_job_status",t,"user","api","rpc","sharing.write")};D.sharingCreateSharedLink=function(t){return this.request("sharing/create_shared_link",t,"user","api","rpc","sharing.write")};D.sharingCreateSharedLinkWithSettings=function(t){return this.request("sharing/create_shared_link_with_settings",t,"user","api","rpc","sharing.write")};D.sharingGetFileMetadata=function(t){return this.request("sharing/get_file_metadata",t,"user","api","rpc","sharing.read")};D.sharingGetFileMetadataBatch=function(t){return this.request("sharing/get_file_metadata/batch",t,"user","api","rpc","sharing.read")};D.sharingGetFolderMetadata=function(t){return this.request("sharing/get_folder_metadata",t,"user","api","rpc","sharing.read")};D.sharingGetSharedLinkFile=function(t){return this.request("sharing/get_shared_link_file",t,"user","content","download","sharing.read")};D.sharingGetSharedLinkMetadata=function(t){return this.request("sharing/get_shared_link_metadata",t,"app, user","api","rpc","sharing.read")};D.sharingGetSharedLinks=function(t){return this.request("sharing/get_shared_links",t,"user","api","rpc","sharing.read")};D.sharingListFileMembers=function(t){return this.request("sharing/list_file_members",t,"user","api","rpc","sharing.read")};D.sharingListFileMembersBatch=function(t){return this.request("sharing/list_file_members/batch",t,"user","api","rpc","sharing.read")};D.sharingListFileMembersContinue=function(t){return this.request("sharing/list_file_members/continue",t,"user","api","rpc","sharing.read")};D.sharingListFolderMembers=function(t){return this.request("sharing/list_folder_members",t,"user","api","rpc","sharing.read")};D.sharingListFolderMembersContinue=function(t){return this.request("sharing/list_folder_members/continue",t,"user","api","rpc","sharing.read")};D.sharingListFolders=function(t){return this.request("sharing/list_folders",t,"user","api","rpc","sharing.read")};D.sharingListFoldersContinue=function(t){return this.request("sharing/list_folders/continue",t,"user","api","rpc","sharing.read")};D.sharingListMountableFolders=function(t){return this.request("sharing/list_mountable_folders",t,"user","api","rpc","sharing.read")};D.sharingListMountableFoldersContinue=function(t){return this.request("sharing/list_mountable_folders/continue",t,"user","api","rpc","sharing.read")};D.sharingListReceivedFiles=function(t){return this.request("sharing/list_received_files",t,"user","api","rpc","sharing.read")};D.sharingListReceivedFilesContinue=function(t){return this.request("sharing/list_received_files/continue",t,"user","api","rpc","sharing.read")};D.sharingListSharedLinks=function(t){return this.request("sharing/list_shared_links",t,"user","api","rpc","sharing.read")};D.sharingModifySharedLinkSettings=function(t){return this.request("sharing/modify_shared_link_settings",t,"user","api","rpc","sharing.write")};D.sharingMountFolder=function(t){return this.request("sharing/mount_folder",t,"user","api","rpc","sharing.write")};D.sharingRelinquishFileMembership=function(t){return this.request("sharing/relinquish_file_membership",t,"user","api","rpc","sharing.write")};D.sharingRelinquishFolderMembership=function(t){return this.request("sharing/relinquish_folder_membership",t,"user","api","rpc","sharing.write")};D.sharingRemoveFileMember=function(t){return this.request("sharing/remove_file_member",t,"user","api","rpc","sharing.write")};D.sharingRemoveFileMember2=function(t){return this.request("sharing/remove_file_member_2",t,"user","api","rpc","sharing.write")};D.sharingRemoveFolderMember=function(t){return this.request("sharing/remove_folder_member",t,"user","api","rpc","sharing.write")};D.sharingRevokeSharedLink=function(t){return this.request("sharing/revoke_shared_link",t,"user","api","rpc","sharing.write")};D.sharingSetAccessInheritance=function(t){return this.request("sharing/set_access_inheritance",t,"user","api","rpc","sharing.write")};D.sharingShareFolder=function(t){return this.request("sharing/share_folder",t,"user","api","rpc","sharing.write")};D.sharingTransferFolder=function(t){return this.request("sharing/transfer_folder",t,"user","api","rpc","sharing.write")};D.sharingUnmountFolder=function(t){return this.request("sharing/unmount_folder",t,"user","api","rpc","sharing.write")};D.sharingUnshareFile=function(t){return this.request("sharing/unshare_file",t,"user","api","rpc","sharing.write")};D.sharingUnshareFolder=function(t){return this.request("sharing/unshare_folder",t,"user","api","rpc","sharing.write")};D.sharingUpdateFileMember=function(t){return this.request("sharing/update_file_member",t,"user","api","rpc","sharing.write")};D.sharingUpdateFolderMember=function(t){return this.request("sharing/update_folder_member",t,"user","api","rpc","sharing.write")};D.sharingUpdateFolderPolicy=function(t){return this.request("sharing/update_folder_policy",t,"user","api","rpc","sharing.write")};D.teamDevicesListMemberDevices=function(t){return this.request("team/devices/list_member_devices",t,"team","api","rpc","sessions.list")};D.teamDevicesListMembersDevices=function(t){return this.request("team/devices/list_members_devices",t,"team","api","rpc","sessions.list")};D.teamDevicesListTeamDevices=function(t){return this.request("team/devices/list_team_devices",t,"team","api","rpc","sessions.list")};D.teamDevicesRevokeDeviceSession=function(t){return this.request("team/devices/revoke_device_session",t,"team","api","rpc","sessions.modify")};D.teamDevicesRevokeDeviceSessionBatch=function(t){return this.request("team/devices/revoke_device_session_batch",t,"team","api","rpc","sessions.modify")};D.teamFeaturesGetValues=function(t){return this.request("team/features/get_values",t,"team","api","rpc","team_info.read")};D.teamGetInfo=function(){return this.request("team/get_info",null,"team","api","rpc","team_info.read")};D.teamGroupsCreate=function(t){return this.request("team/groups/create",t,"team","api","rpc","groups.write")};D.teamGroupsDelete=function(t){return this.request("team/groups/delete",t,"team","api","rpc","groups.write")};D.teamGroupsGetInfo=function(t){return this.request("team/groups/get_info",t,"team","api","rpc","groups.read")};D.teamGroupsJobStatusGet=function(t){return this.request("team/groups/job_status/get",t,"team","api","rpc","groups.write")};D.teamGroupsList=function(t){return this.request("team/groups/list",t,"team","api","rpc","groups.read")};D.teamGroupsListContinue=function(t){return this.request("team/groups/list/continue",t,"team","api","rpc","groups.read")};D.teamGroupsMembersAdd=function(t){return this.request("team/groups/members/add",t,"team","api","rpc","groups.write")};D.teamGroupsMembersList=function(t){return this.request("team/groups/members/list",t,"team","api","rpc","groups.read")};D.teamGroupsMembersListContinue=function(t){return this.request("team/groups/members/list/continue",t,"team","api","rpc","groups.read")};D.teamGroupsMembersRemove=function(t){return this.request("team/groups/members/remove",t,"team","api","rpc","groups.write")};D.teamGroupsMembersSetAccessType=function(t){return this.request("team/groups/members/set_access_type",t,"team","api","rpc","groups.write")};D.teamGroupsUpdate=function(t){return this.request("team/groups/update",t,"team","api","rpc","groups.write")};D.teamLegalHoldsCreatePolicy=function(t){return this.request("team/legal_holds/create_policy",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsGetPolicy=function(t){return this.request("team/legal_holds/get_policy",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListHeldRevisions=function(t){return this.request("team/legal_holds/list_held_revisions",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListHeldRevisionsContinue=function(t){return this.request("team/legal_holds/list_held_revisions_continue",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsListPolicies=function(t){return this.request("team/legal_holds/list_policies",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsReleasePolicy=function(t){return this.request("team/legal_holds/release_policy",t,"team","api","rpc","team_data.governance.write")};D.teamLegalHoldsUpdatePolicy=function(t){return this.request("team/legal_holds/update_policy",t,"team","api","rpc","team_data.governance.write")};D.teamLinkedAppsListMemberLinkedApps=function(t){return this.request("team/linked_apps/list_member_linked_apps",t,"team","api","rpc","sessions.list")};D.teamLinkedAppsListMembersLinkedApps=function(t){return this.request("team/linked_apps/list_members_linked_apps",t,"team","api","rpc","sessions.list")};D.teamLinkedAppsListTeamLinkedApps=function(t){return this.request("team/linked_apps/list_team_linked_apps",t,"team","api","rpc","sessions.list")};D.teamLinkedAppsRevokeLinkedApp=function(t){return this.request("team/linked_apps/revoke_linked_app",t,"team","api","rpc","sessions.modify")};D.teamLinkedAppsRevokeLinkedAppBatch=function(t){return this.request("team/linked_apps/revoke_linked_app_batch",t,"team","api","rpc","sessions.modify")};D.teamMemberSpaceLimitsExcludedUsersAdd=function(t){return this.request("team/member_space_limits/excluded_users/add",t,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsExcludedUsersList=function(t){return this.request("team/member_space_limits/excluded_users/list",t,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsExcludedUsersListContinue=function(t){return this.request("team/member_space_limits/excluded_users/list/continue",t,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsExcludedUsersRemove=function(t){return this.request("team/member_space_limits/excluded_users/remove",t,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsGetCustomQuota=function(t){return this.request("team/member_space_limits/get_custom_quota",t,"team","api","rpc","members.read")};D.teamMemberSpaceLimitsRemoveCustomQuota=function(t){return this.request("team/member_space_limits/remove_custom_quota",t,"team","api","rpc","members.write")};D.teamMemberSpaceLimitsSetCustomQuota=function(t){return this.request("team/member_space_limits/set_custom_quota",t,"team","api","rpc","members.read")};D.teamMembersAddV2=function(t){return this.request("team/members/add_v2",t,"team","api","rpc","members.write")};D.teamMembersAdd=function(t){return this.request("team/members/add",t,"team","api","rpc","members.write")};D.teamMembersAddJobStatusGetV2=function(t){return this.request("team/members/add/job_status/get_v2",t,"team","api","rpc","members.write")};D.teamMembersAddJobStatusGet=function(t){return this.request("team/members/add/job_status/get",t,"team","api","rpc","members.write")};D.teamMembersDeleteProfilePhotoV2=function(t){return this.request("team/members/delete_profile_photo_v2",t,"team","api","rpc","members.write")};D.teamMembersDeleteProfilePhoto=function(t){return this.request("team/members/delete_profile_photo",t,"team","api","rpc","members.write")};D.teamMembersGetAvailableTeamMemberRoles=function(){return this.request("team/members/get_available_team_member_roles",null,"team","api","rpc","members.read")};D.teamMembersGetInfoV2=function(t){return this.request("team/members/get_info_v2",t,"team","api","rpc","members.read")};D.teamMembersGetInfo=function(t){return this.request("team/members/get_info",t,"team","api","rpc","members.read")};D.teamMembersListV2=function(t){return this.request("team/members/list_v2",t,"team","api","rpc","members.read")};D.teamMembersList=function(t){return this.request("team/members/list",t,"team","api","rpc","members.read")};D.teamMembersListContinueV2=function(t){return this.request("team/members/list/continue_v2",t,"team","api","rpc","members.read")};D.teamMembersListContinue=function(t){return this.request("team/members/list/continue",t,"team","api","rpc","members.read")};D.teamMembersMoveFormerMemberFiles=function(t){return this.request("team/members/move_former_member_files",t,"team","api","rpc","members.write")};D.teamMembersMoveFormerMemberFilesJobStatusCheck=function(t){return this.request("team/members/move_former_member_files/job_status/check",t,"team","api","rpc","members.write")};D.teamMembersRecover=function(t){return this.request("team/members/recover",t,"team","api","rpc","members.delete")};D.teamMembersRemove=function(t){return this.request("team/members/remove",t,"team","api","rpc","members.delete")};D.teamMembersRemoveJobStatusGet=function(t){return this.request("team/members/remove/job_status/get",t,"team","api","rpc","members.delete")};D.teamMembersSecondaryEmailsAdd=function(t){return this.request("team/members/secondary_emails/add",t,"team","api","rpc","members.write")};D.teamMembersSecondaryEmailsDelete=function(t){return this.request("team/members/secondary_emails/delete",t,"team","api","rpc","members.write")};D.teamMembersSecondaryEmailsResendVerificationEmails=function(t){return this.request("team/members/secondary_emails/resend_verification_emails",t,"team","api","rpc","members.write")};D.teamMembersSendWelcomeEmail=function(t){return this.request("team/members/send_welcome_email",t,"team","api","rpc","members.write")};D.teamMembersSetAdminPermissionsV2=function(t){return this.request("team/members/set_admin_permissions_v2",t,"team","api","rpc","members.write")};D.teamMembersSetAdminPermissions=function(t){return this.request("team/members/set_admin_permissions",t,"team","api","rpc","members.write")};D.teamMembersSetProfileV2=function(t){return this.request("team/members/set_profile_v2",t,"team","api","rpc","members.write")};D.teamMembersSetProfile=function(t){return this.request("team/members/set_profile",t,"team","api","rpc","members.write")};D.teamMembersSetProfilePhotoV2=function(t){return this.request("team/members/set_profile_photo_v2",t,"team","api","rpc","members.write")};D.teamMembersSetProfilePhoto=function(t){return this.request("team/members/set_profile_photo",t,"team","api","rpc","members.write")};D.teamMembersSuspend=function(t){return this.request("team/members/suspend",t,"team","api","rpc","members.write")};D.teamMembersUnsuspend=function(t){return this.request("team/members/unsuspend",t,"team","api","rpc","members.write")};D.teamNamespacesList=function(t){return this.request("team/namespaces/list",t,"team","api","rpc","team_data.member")};D.teamNamespacesListContinue=function(t){return this.request("team/namespaces/list/continue",t,"team","api","rpc","team_data.member")};D.teamPropertiesTemplateAdd=function(t){return this.request("team/properties/template/add",t,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateGet=function(t){return this.request("team/properties/template/get",t,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateList=function(){return this.request("team/properties/template/list",null,"team","api","rpc","files.team_metadata.write")};D.teamPropertiesTemplateUpdate=function(t){return this.request("team/properties/template/update",t,"team","api","rpc","files.team_metadata.write")};D.teamReportsGetActivity=function(t){return this.request("team/reports/get_activity",t,"team","api","rpc","team_info.read")};D.teamReportsGetDevices=function(t){return this.request("team/reports/get_devices",t,"team","api","rpc","team_info.read")};D.teamReportsGetMembership=function(t){return this.request("team/reports/get_membership",t,"team","api","rpc","team_info.read")};D.teamReportsGetStorage=function(t){return this.request("team/reports/get_storage",t,"team","api","rpc","team_info.read")};D.teamSharingAllowlistAdd=function(t){return this.request("team/sharing_allowlist/add",t,"team","api","rpc","team_info.write")};D.teamSharingAllowlistList=function(t){return this.request("team/sharing_allowlist/list",t,"team","api","rpc","team_info.read")};D.teamSharingAllowlistListContinue=function(t){return this.request("team/sharing_allowlist/list/continue",t,"team","api","rpc","team_info.read")};D.teamSharingAllowlistRemove=function(t){return this.request("team/sharing_allowlist/remove",t,"team","api","rpc","team_info.write")};D.teamTeamFolderActivate=function(t){return this.request("team/team_folder/activate",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderArchive=function(t){return this.request("team/team_folder/archive",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderArchiveCheck=function(t){return this.request("team/team_folder/archive/check",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderCreate=function(t){return this.request("team/team_folder/create",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderGetInfo=function(t){return this.request("team/team_folder/get_info",t,"team","api","rpc","team_data.content.read")};D.teamTeamFolderList=function(t){return this.request("team/team_folder/list",t,"team","api","rpc","team_data.content.read")};D.teamTeamFolderListContinue=function(t){return this.request("team/team_folder/list/continue",t,"team","api","rpc","team_data.content.read")};D.teamTeamFolderPermanentlyDelete=function(t){return this.request("team/team_folder/permanently_delete",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderRename=function(t){return this.request("team/team_folder/rename",t,"team","api","rpc","team_data.content.write")};D.teamTeamFolderUpdateSyncSettings=function(t){return this.request("team/team_folder/update_sync_settings",t,"team","api","rpc","team_data.content.write")};D.teamTokenGetAuthenticatedAdmin=function(){return this.request("team/token/get_authenticated_admin",null,"team","api","rpc","team_info.read")};D.teamLogGetEvents=function(t){return this.request("team_log/get_events",t,"team","api","rpc","events.read")};D.teamLogGetEventsContinue=function(t){return this.request("team_log/get_events/continue",t,"team","api","rpc","events.read")};D.usersFeaturesGetValues=function(t){return this.request("users/features/get_values",t,"user","api","rpc","account_info.read")};D.usersGetAccount=function(t){return this.request("users/get_account",t,"user","api","rpc","sharing.read")};D.usersGetAccountBatch=function(t){return this.request("users/get_account_batch",t,"user","api","rpc","sharing.read")};D.usersGetCurrentAccount=function(){return this.request("users/get_current_account",null,"user","api","rpc","account_info.read")};D.usersGetSpaceUsage=function(){return this.request("users/get_space_usage",null,"user","api","rpc","account_info.read")};function V6(t){var e="000".concat(t.charCodeAt(0).toString(16)).slice(-4);return"\\u".concat(e)}var sm=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ku,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";return n?(s!==Ku&&Dp[e]!==void 0&&(e=Dp[e],n="-"),"https://".concat(e).concat(n).concat(s,"/2/")):"https://".concat(s,"/2/")},F6=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pv;return e!==Pv&&(e="meta-".concat(e)),"https://".concat(e,"/oauth2/authorize")},Rv=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ku,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:".",n="api";return e!==Ku&&(n=Dp[n],s="-"),"https://".concat(n).concat(s).concat(e,"/oauth2/token")};function Dv(t){return JSON.stringify(t).replace(/[\u007f-\uffff]/g,V6)}function O6(t){return new Date(Date.now()+t*1e3)}function Lv(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope||typeof O2>"u"||typeof window<"u"}function rm(){return typeof window<"u"}function nm(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function Ic(t){var e=t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return e}function tu(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tu=function(s){return typeof s}:tu=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tu(t)}function q6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U6(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_l(t,e)}function z6(t){var e=D2();return function(){var n=El(t),i;if(e){var a=El(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return B6(this,i)}}function B6(t,e){return e&&(tu(e)==="object"||typeof e=="function")?e:$6(t)}function $6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lp(t){var e=typeof Map=="function"?new Map:void 0;return Lp=function(n){if(n===null||!G6(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,i)}function i(){return su(n,arguments,El(this).constructor)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),_l(i,n)},Lp(t)}function su(t,e,s){return D2()?su=Reflect.construct:su=function(i,a,o){var l=[null];l.push.apply(l,a);var u=Function.bind.apply(i,l),d=new u;return o&&_l(d,o.prototype),d},su.apply(null,arguments)}function D2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function G6(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function _l(t,e){return _l=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},_l(t,e)}function El(t){return El=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},El(t)}var W6=function(t){U6(s,t);var e=z6(s);function s(n,i,a){var o;return q6(this,s),o=e.call(this,"Response failed with a ".concat(n," code")),o.name="DropboxResponseError",o.status=n,o.headers=i,o.error=a,o}return s}(Lp(Error));function H6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var L2=function t(e,s,n){H6(this,t),this.status=e,this.headers=s,this.result=n};function M2(t){return t.text().then(function(e){var s;try{s=JSON.parse(e)}catch{s=e}throw new W6(t.status,t.headers,s)})}function Yu(t){return t.ok?t.text().then(function(e){var s;try{s=JSON.parse(e)}catch{s=e}return new L2(t.status,t.headers,s)}):M2(t)}function Q6(t){return t.ok?new Promise(function(e){Lv()?t.blob().then(function(s){return e(s)}):t.buffer().then(function(s){return e(s)})}).then(function(e){var s=JSON.parse(t.headers.get("dropbox-api-result"));return Lv()?s.fileBlob=e:s.fileBinary=e,new L2(t.status,t.headers,s)}):M2(t)}function K6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Y6(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function J6(t,e,s){return e&&Y6(t.prototype,e),t}var Pc,ei,im,X6=300*1e3,Mv=128,Z6=["legacy","offline","online"],eD=["code","token"],tD=["none","user","team"],sD=function(){function t(e){K6(this,t),e=e||{},rm()?(Pc=window.fetch.bind(window),ei=window.crypto||window.msCrypto):nm()?(Pc=self.fetch.bind(self),ei=self.crypto):(Pc=require("node-fetch"),ei=require("crypto")),typeof TextEncoder>"u"?im=require("util").TextEncoder:im=TextEncoder,this.fetch=e.fetch||Pc,this.accessToken=e.accessToken,this.accessTokenExpiresAt=e.accessTokenExpiresAt,this.refreshToken=e.refreshToken,this.clientId=e.clientId,this.clientSecret=e.clientSecret,this.domain=e.domain,this.domainDelimiter=e.domainDelimiter,this.customHeaders=e.customHeaders,this.dataOnBody=e.dataOnBody}return J6(t,[{key:"setAccessToken",value:function(s){this.accessToken=s}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(s){this.clientId=s}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(s){this.clientSecret=s}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getRefreshToken",value:function(){return this.refreshToken}},{key:"setRefreshToken",value:function(s){this.refreshToken=s}},{key:"getAccessTokenExpiresAt",value:function(){return this.accessTokenExpiresAt}},{key:"setAccessTokenExpiresAt",value:function(s){this.accessTokenExpiresAt=s}},{key:"setCodeVerifier",value:function(s){this.codeVerifier=s}},{key:"getCodeVerifier",value:function(){return this.codeVerifier}},{key:"generateCodeChallenge",value:function(){var s=this,n=new im,i=n.encode(this.codeVerifier),a;if(rm()||nm())return ei.subtle.digest("SHA-256",i).then(function(l){var u=btoa(String.fromCharCode.apply(null,new Uint8Array(l)));a=Ic(u).substr(0,128),s.codeChallenge=a});var o=ei.createHash("sha256").update(i).digest();return a=Ic(o),this.codeChallenge=a,Promise.resolve()}},{key:"generatePKCECodes",value:function(){var s;if(rm()||nm()){var n=new Uint8Array(Mv),i=ei.getRandomValues(n),a=btoa(i);s=Ic(a).substr(0,128)}else{var o=ei.randomBytes(Mv);s=Ic(o).substr(0,128)}return this.codeVerifier=s,this.generateCodeChallenge()}},{key:"getAuthenticationUrl",value:function(s,n){var i=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"token",o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"none",d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1,h=this.getClientId(),p=F6(this.domain);if(!h)throw new Error("A client id is required. You can set the client id using .setClientId().");if(a!=="code"&&!s)throw new Error("A redirect uri is required.");if(!eD.includes(a))throw new Error("Authorization type must be code or token");if(o&&!Z6.includes(o))throw new Error("Token Access Type must be legacy, offline, or online");if(l&&!(l instanceof Array))throw new Error("Scope must be an array of strings");if(!tD.includes(u))throw new Error("includeGrantedScopes must be none, user, or team");var x;return a==="code"?x="".concat(p,"?response_type=code&client_id=").concat(h):x="".concat(p,"?response_type=token&client_id=").concat(h),s&&(x+="&redirect_uri=".concat(s)),n&&(x+="&state=".concat(n)),o&&(x+="&token_access_type=".concat(o)),l&&(x+="&scope=".concat(l.join(" "))),u!=="none"&&(x+="&include_granted_scopes=".concat(u)),d?this.generatePKCECodes().then(function(){return x+="&code_challenge_method=S256",x+="&code_challenge=".concat(i.codeChallenge),x}):Promise.resolve(x)}},{key:"getAccessTokenFromCode",value:function(s,n){var i=this.getClientId(),a=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");var o=Rv(this.domain,this.domainDelimiter);if(o+="?grant_type=authorization_code",o+="&code=".concat(n),o+="&client_id=".concat(i),a)o+="&client_secret=".concat(a);else{if(!this.codeVerifier)throw new Error("You must use PKCE when generating the authorization URL to not include a client secret");o+="&code_verifier=".concat(this.codeVerifier)}s&&(o+="&redirect_uri=".concat(s));var l={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}};return this.fetch(o,l).then(function(u){return Yu(u)})}},{key:"checkAndRefreshAccessToken",value:function(){var s=this.getRefreshToken()&&this.getClientId(),n=!this.getAccessTokenExpiresAt()||new Date(Date.now()+X6)>=this.getAccessTokenExpiresAt(),i=!this.getAccessToken();return(n||i)&&s?this.refreshAccessToken():Promise.resolve()}},{key:"refreshAccessToken",value:function(){var s=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.getClientId(),a=this.getClientSecret();if(!i)throw new Error("A client id is required. You can set the client id using .setClientId().");if(n&&!(n instanceof Array))throw new Error("Scope must be an array of strings");var o=Rv(this.domain,this.domainDelimiter),l={headers:{"Content-Type":"application/json"},method:"POST"};if(this.dataOnBody){var u={grant_type:"refresh_token",client_id:i,refresh_token:this.getRefreshToken()};a&&(u.client_secret=a),n&&(u.scope=n.join(" ")),l.body=u}else o+="?grant_type=refresh_token&refresh_token=".concat(this.getRefreshToken()),o+="&client_id=".concat(i),a&&(o+="&client_secret=".concat(a)),n&&(o+="&scope=".concat(n.join(" ")));return this.fetch(o,l).then(function(d){return Yu(d)}).then(function(d){s.setAccessToken(d.result.access_token),s.setAccessTokenExpiresAt(O6(d.result.expires_in))})}}]),t}();function rD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nD(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iD(t,e,s){return e&&nD(t.prototype,e),t}var aD=typeof btoa>"u"?function(t){return Buffer.from(t).toString("base64")}:btoa,Xs=function(){function t(e){rD(this,t),e=e||{},e.auth?this.auth=e.auth:this.auth=new sD(e),this.fetch=e.fetch||this.auth.fetch,this.selectUser=e.selectUser,this.selectAdmin=e.selectAdmin,this.pathRoot=e.pathRoot,this.domain=e.domain||this.auth.domain,this.domainDelimiter=e.domainDelimiter||this.auth.domainDelimiter,this.customHeaders=e.customHeaders||this.auth.customHeaders,Object.assign(this,D)}return iD(t,[{key:"request",value:function(s,n,i,a,o){switch(o){case P6:return this.rpcRequest(s,n,i,a);case D6:return this.downloadRequest(s,n,i,a);case R6:return this.uploadRequest(s,n,i,a);default:throw new Error("Invalid request style: ".concat(o))}}},{key:"rpcRequest",value:function(s,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l={method:"POST",body:n?JSON.stringify(n):null,headers:{}};return n&&(l.headers["Content-Type"]="application/json"),o.setAuthHeaders(i,l),o.setCommonHeaders(l),l}).then(function(l){return o.fetch(sm(a,o.domain,o.domainDelimiter)+s,l)}).then(function(l){return Yu(l)})}},{key:"downloadRequest",value:function(s,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l={method:"POST",headers:{"Dropbox-API-Arg":Dv(n)}};return o.setAuthHeaders(i,l),o.setCommonHeaders(l),l}).then(function(l){return o.fetch(sm(a,o.domain,o.domainDelimiter)+s,l)}).then(function(l){return Q6(l)})}},{key:"uploadRequest",value:function(s,n,i,a){var o=this;return this.auth.checkAndRefreshAccessToken().then(function(){var l=n.contents;delete n.contents;var u={body:l,method:"POST",headers:{"Content-Type":"application/octet-stream","Dropbox-API-Arg":Dv(n)}};return o.setAuthHeaders(i,u),o.setCommonHeaders(u),u}).then(function(l){return o.fetch(sm(a,o.domain,o.domainDelimiter)+s,l)}).then(function(l){return Yu(l)})}},{key:"setAuthHeaders",value:function(s,n){if(s.split(",").length>1){var i=s.replace(" ","").split(",");i.includes(em)&&this.auth.getAccessToken()?s=em:i.includes(tm)&&this.auth.getAccessToken()?s=tm:i.includes(Zh)&&(s=Zh)}switch(s){case Zh:if(this.auth.clientId&&this.auth.clientSecret){var a=aD("".concat(this.auth.clientId,":").concat(this.auth.clientSecret));n.headers.Authorization="Basic ".concat(a)}break;case tm:case em:this.auth.getAccessToken()&&(n.headers.Authorization="Bearer ".concat(this.auth.getAccessToken()));break;case L6:case M6:break;default:throw new Error("Unhandled auth type: ".concat(s))}}},{key:"setCommonHeaders",value:function(s){var n=this;if(this.selectUser&&(s.headers["Dropbox-API-Select-User"]=this.selectUser),this.selectAdmin&&(s.headers["Dropbox-API-Select-Admin"]=this.selectAdmin),this.pathRoot&&(s.headers["Dropbox-API-Path-Root"]=this.pathRoot),this.customHeaders){var i=Object.keys(this.customHeaders);i.forEach(function(a){s.headers[a]=n.customHeaders[a]})}}}]),t}();async function wn(){try{let t;window.location.hostname.includes("netlify.app")?t="/.netlify/functions/dropbox-token":t="https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token",console.log(`Rcupration du token Dropbox depuis: ${t}`);const e=await fetch(t);if(!e.ok)throw new Error(`Erreur: ${e.status}`);return(await e.json()).access_token}catch(t){throw console.error("Erreur lors de la rcupration du token Dropbox:",t),t}}function Qx({onSuccess:t,buttonText:e="Uploader sur Dropbox",compact:s=!1}){const[n,i]=b.useState(null),[a,o]=b.useState(!1),[l,u]=b.useState(null),[d,h]=b.useState({isOpen:!1,type:null,title:"",message:""}),p=C=>{C.target.files&&C.target.files.length>0&&i(C.target.files[0])},x=()=>{h(C=>({...C,isOpen:!1}))},j=async()=>{if(!n)return;o(!0);const C=new Xs({accessToken:await wn()});let R=!1,S="";try{const y=await C.filesUpload({path:"/"+encodeURIComponent(n.name),contents:n,autorename:!0});R=!0,S=y.result.path_display||y.result.path_lower||"/"+n.name,console.log("Upload russi!",y);try{const _=(await C.sharingCreateSharedLinkWithSettings({path:S})).result.url.replace("?dl=0","?raw=1");u(_),t&&t(_),h({isOpen:!0,type:"success",title:"Upload russi !",message:"Votre fichier a t tlcharg avec succs sur Dropbox et est prt  tre utilis.",fileName:n.name,url:_})}catch(v){console.error("Erreur lors de la cration du lien partageable:",v),h({isOpen:!0,type:"warning",title:"Upload russi avec avertissement",message:"Le fichier a t upload avec succs, mais la cration du lien a chou. Vous ne pourrez pas y accder directement.",fileName:n.name})}}catch(y){console.error("Erreur lors de l'upload:",y),h({isOpen:!0,type:"error",title:"chec de l'upload",message:y instanceof Error?`${y.message} (${y.constructor.name})`:String(y),fileName:n.name})}o(!1),R&&!d.isOpen&&h({isOpen:!0,type:"success",title:"Upload russi !",message:"Votre fichier a t tlcharg avec succs sur Dropbox.",fileName:n.name})};return r.jsxs("div",{className:s?"flex items-center":"space-y-3",children:[r.jsx("div",{className:s?"flex-grow mr-2":"mb-2",children:r.jsx("input",{type:"file",onChange:p,className:`block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4
          file:rounded-lg file:border-0 file:text-sm file:font-medium
          file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100`})}),r.jsx("button",{onClick:j,disabled:!n||a,className:`${s?"":"w-full"} bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center`,children:a?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Envoi..."]}):r.jsxs(r.Fragment,{children:[r.jsx(v2,{className:"w-4 h-4 mr-2"}),e]})}),l&&!s&&r.jsx("div",{className:"mt-2 text-sm text-gray-600",children:r.jsxs("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 font-medium flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Fichier upload avec succs"]})}),d.isOpen&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto overflow-hidden",children:[r.jsxs("div",{className:`py-4 px-5 flex items-center ${d.type==="success"?"bg-green-50":d.type==="error"?"bg-red-50":"bg-yellow-50"}`,children:[r.jsxs("div",{className:"flex-shrink-0 mr-3",children:[d.type==="success"&&r.jsx(vs,{className:"h-6 w-6 text-green-500"}),d.type==="error"&&r.jsx(ps,{className:"h-6 w-6 text-red-500"}),d.type==="warning"&&r.jsx(ls,{className:"h-6 w-6 text-yellow-500"})]}),r.jsx("h3",{className:`text-lg font-medium ${d.type==="success"?"text-green-800":d.type==="error"?"text-red-800":"text-yellow-800"}`,children:d.title}),r.jsx("button",{onClick:x,className:"ml-auto bg-transparent text-gray-400 hover:text-gray-600",children:r.jsx(St,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"p-5",children:[r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-gray-700",children:d.message})}),d.fileName&&r.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-md mb-4",children:[r.jsx(We,{className:"h-5 w-5 text-gray-500 mr-2"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 truncate",title:d.fileName,children:d.fileName})]}),d.url&&r.jsx("div",{className:"mb-4",children:r.jsxs("a",{href:d.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-100 rounded-md hover:bg-blue-100 transition-colors",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Accder au fichier"]})}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-800 text-sm font-medium rounded-md transition-colors",children:"Fermer"})})]})]})})]})}function oD({onSelect:t,showTitle:e=!0}){const[s,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(null),[u,d]=b.useState(""),[h,p]=b.useState([]),[x,j]=b.useState(""),C=b.useCallback(N=>{var w;const f=((w=N.split(".").pop())==null?void 0:w.toLowerCase())||"";return["pdf"].includes(f)?"pdf":["doc","docx"].includes(f)?"docx":["xls","xlsx"].includes(f)?"xlsx":["ppt","pptx"].includes(f)?"pptx":["txt"].includes(f)?"txt":["jpg","jpeg","png","gif","svg","webp"].includes(f)?"image":["mp4","webm","mkv","avi","mov"].includes(f)?"video":["mp3","wav","ogg"].includes(f)?"audio":["zip","rar","7z","tar","gz"].includes(f)?"zip":"link"},[]),R=N=>{if(N===0)return"0 Bytes";const f=1024,w=["Bytes","KB","MB","GB","TB"],E=Math.floor(Math.log(N)/Math.log(f));return parseFloat((N/Math.pow(f,E)).toFixed(2))+" "+w[E]},S=async()=>{try{const N=await wn();return new Xs({accessToken:N})}catch(N){return console.error("chec de la cration du client Dropbox:",N),l("Impossible de se connecter  Dropbox. Vrifiez votre connexion et les permissions."),null}},y=b.useCallback(async(N="")=>{a(!0),l(null);try{const f=await S();if(!f){a(!1);return}const w=await f.filesListFolder({path:N,include_deleted:!1}),E=[];for(const A of w.result.entries)if(A[".tag"]==="file"||A[".tag"]==="folder"){const I=A[".tag"]==="folder",k={id:A.id||A.path_lower||"",name:A.name,path:A.path_lower||"",fileType:I?"folder":C(A.name),size:I?0:A.size||0,isFolder:I};E.push(k)}E.sort((A,I)=>A.isFolder&&!I.isFolder?-1:!A.isFolder&&I.isFolder?1:A.name.localeCompare(I.name)),n(E),d(N)}catch(f){console.error("Erreur lors du chargement des fichiers Dropbox:",f),l("Impossible de charger les fichiers depuis Dropbox. Veuillez ressayer.")}finally{a(!1)}},[n,d,a,l,C]),v=async N=>{var f;if(N.url)return N.url;try{const w=await S();if(!w)return null;let E;try{E=await w.sharingCreateSharedLinkWithSettings({path:N.path})}catch(I){const k=I;if(k.status===409&&((f=k.error)!=null&&f.shared_link_already_exists))try{const B=await w.sharingListSharedLinks({path:N.path,direct_only:!0});if(B.result.links&&B.result.links.length>0)E={result:B.result.links[0]};else throw new Error("Aucun lien partag trouv")}catch(B){throw console.error("Erreur lors de la rcupration des liens existants:",B),B}else throw k}const A=E.result.url.replace("?dl=0","?raw=1");return n(I=>I.map(k=>k.id===N.id?{...k,url:A}:k)),A}catch(w){return console.error("Erreur lors de la cration du lien partageable:",w),l("Impossible de crer un lien pour ce fichier. Vrifiez les permissions dans Dropbox."),null}},_=N=>{p([...h,u]),y(N.path)},P=async N=>{if(N.isFolder){_(N);return}const f=await v(N);f&&t(f,N.name,N.fileType)},L=()=>{if(h.length>0){const N=h[h.length-1];p(h.slice(0,-1)),y(N)}},M=x?s.filter(N=>N.name.toLowerCase().includes(x.toLowerCase())):s;return b.useEffect(()=>{y()},[y]),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e&&r.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Fichiers Dropbox"})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-center mb-4 space-x-2",children:[r.jsx("button",{onClick:L,disabled:h.length===0,className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100 disabled:opacity-50",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r.jsx("input",{type:"text",placeholder:"Rechercher des fichiers...",value:x,onChange:N=>j(N.target.value),className:"flex-grow px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{onClick:()=>y(u),className:"p-2 text-gray-500 rounded-lg hover:bg-gray-100",title:"Actualiser",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})})]}),r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:u?`Dossier: ${u}`:"Dossier racine"}),o&&r.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg mb-4",children:[r.jsx("p",{children:o}),r.jsx("p",{className:"text-sm mt-1",children:"Assurez-vous que le token d'accs Dropbox est configur correctement dans vos variables d'environnement."}),r.jsx("button",{onClick:()=>y(u),className:"mt-2 px-3 py-1 bg-red-100 hover:bg-red-200 text-red-800 rounded-md text-sm font-medium transition-colors",children:"Ressayer"})]}),i?r.jsx("div",{className:"flex justify-center items-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):M.length>0?r.jsx("div",{className:"max-h-80 overflow-y-auto",children:r.jsx("ul",{className:"space-y-1",children:M.map(N=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>P(N),className:"w-full flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[r.jsx("div",{className:"w-10 h-10 flex items-center justify-center mr-3",children:N.isFolder?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}):N.fileType==="pdf"?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}):N.fileType==="image"?r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.name}),!N.isFolder&&r.jsx("div",{className:"text-xs text-gray-500",children:R(N.size)})]})]})},N.id))})}):r.jsx("div",{className:"py-4 text-center text-gray-500",children:"Aucun fichier trouv."})]})]})}const Vv=()=>{const[t]=lj(),e=it(),{currentUser:s,isAdmin:n,isEditor:i}=Te(),a=window.location.href.includes("/admin/"),o=a?n():!1;b.useEffect(()=>{if(a&&!n()&&i()){const Z=window.location.search;e(`/editor/resources${Z}`)}},[a,n,i,e]);const l=Z=>`${o?"/admin":"/editor"}/resources?edit=${Z}`,{resources:u,addResource:d,updateResource:h,deleteResource:p}=Ui(),x=t.get("new")==="resource",j=t.get("edit"),[C,R]=b.useState(""),[S,y]=b.useState(""),[v,_]=b.useState("post-cps"),[P,L]=b.useState(""),[M,N]=b.useState(""),[f,w]=b.useState("link"),[E,A]=b.useState(!1),[I,k]=b.useState(!1),[B,$]=b.useState(""),[H,O]=b.useState([]),[F,re]=b.useState(!1),[V,U]=b.useState(null),[X,oe]=b.useState(""),[me,_e]=b.useState(!1),ee=["visa","logement","inscription","documents-administratifs","assurance","transport","finances","sant","cours-prparatoires","vie-tudiante","culture-franaise","emploi-stage","outils-informatiques","bourses","calendrier-acadmique","restauration","bibliothque","sport","associations-tudiantes","procdures-campus-france"],J=[...new Set([...ee,...u.map(Z=>Z.category).filter(Boolean)])],ae=async()=>{re(!0),oe("");try{const Ct=(await new Xs({accessToken:await wn()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(Qe=>Qe[".tag"]==="file").map(Qe=>({id:Qe.id,name:Qe.name,path_lower:Qe.path_lower||"",path_display:Qe.path_display||Qe.name,size:"size"in Qe?Qe.size:void 0,client_modified:"client_modified"in Qe?Qe.client_modified:void 0,is_downloadable:!0}));O(Ct)}catch(Z){console.error("Erreur lors de la rcupration des fichiers:",Z),Z instanceof Error?oe(`Erreur lors de la rcupration des fichiers: ${Z.message}`):oe(`Erreur lors de la rcupration des fichiers: ${String(Z)}`)}finally{re(!1)}},Ee=async Z=>{var mt;try{const $e=new Xs({accessToken:await wn()});let Ct="";try{Ct=(await $e.sharingCreateSharedLinkWithSettings({path:Z.path_lower})).result.url}catch(fe){const Ie=fe;if(Ie.status===409||Ie.error&&Ie.error.shared_link_already_exists){console.log("Lien de partage dj existant, rcupration...");const Me=await $e.sharingListSharedLinks({path:Z.path_lower,direct_only:!0});if(Me.result.links&&Me.result.links.length>0)Ct=Me.result.links[0].url;else throw new Error("Impossible de rcuprer le lien existant")}else throw fe}const Qe=Ct.replace("?dl=0","?raw=1");U({...Z,shared_link:{url:Qe}}),N(Qe),$(Z.name),oe("");const W=((mt=Z.name.split(".").pop())==null?void 0:mt.toLowerCase())||"";return W==="pdf"?w("pdf"):["doc","docx"].includes(W)?w("docx"):["xls","xlsx"].includes(W)?w("xlsx"):["ppt","pptx"].includes(W)?w("pptx"):W==="txt"?w("txt"):["jpg","jpeg","png","gif","webp","svg"].includes(W)?w("image"):["mp4","webm","avi","mov"].includes(W)?w("video"):["mp3","wav","ogg"].includes(W)?w("audio"):["zip","rar","tar","gz"].includes(W)?w("zip"):w("link"),Qe}catch($e){console.error("Erreur lors de la cration du lien de partage:",$e),$e instanceof Error?oe(`Erreur lors de la cration du lien de partage: ${$e.message}`):oe(`Erreur lors de la cration du lien de partage: ${String($e)}`)}};b.useEffect(()=>{if(j){const Z=u.find(mt=>mt.id===j);Z&&(R(Z.title),y(Z.description),_(Z.phase),L(Z.category),N(Z.fileUrl),w(Z.fileType))}else x&&(R(""),y(""),_("post-cps"),L(""),N(""),w("link"),ae())},[j,x,u]);const Ae=Z=>{Z.preventDefault(),j?(h(j,{title:C,description:S,phase:v,category:P,fileUrl:M,fileType:f}),Pt({type:"Modification",target:"Ressource",targetId:j,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:C}})):(d({title:C,description:S,phase:v,category:P,fileUrl:M,fileType:f,uploadDate:new Date().toISOString().split("T")[0],updatedDate:new Date().toISOString().split("T")[0]}),Pt({type:"Ajout",target:"Ressource",user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:C}}))},De=()=>{A(!0)},ke=()=>{j&&(p(j),Pt({type:"Suppression",target:"Ressource",targetId:j,user:typeof s=="object"&&(s!=null&&s.displayName)?s.displayName:void 0,details:{title:C}}))},Fe={"post-cps":u.filter(Z=>Z.phase==="post-cps"),"during-process":u.filter(Z=>Z.phase==="during-process"),"pre-arrival":u.filter(Z=>Z.phase==="pre-arrival")},Gt=Z=>{switch(Z){case"pdf":case"doc":case"docx":case"txt":return r.jsx(We,{className:"w-5 h-5 text-blue-600"});case"image":return r.jsx(gR,{className:"w-5 h-5 text-green-600"});case"link":return r.jsx(Kh,{className:"w-5 h-5 text-purple-600"});default:return r.jsx(vR,{className:"w-5 h-5 text-gray-600"})}};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:x?"Ajouter une nouvelle ressource":"Modifier la ressource"}),r.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})]})}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsx("form",{onSubmit:Ae,className:"space-y-7",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Titre de la ressource"}),r.jsx("input",{type:"text",id:"title",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:C,onChange:Z=>R(Z.target.value),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),r.jsx("textarea",{id:"description",rows:3,className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:S,onChange:Z=>y(Z.target.value),required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phase",className:"block text-sm font-medium text-gray-700",children:"Phase"}),r.jsxs("select",{id:"phase",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:v,onChange:Z=>_(Z.target.value),required:!0,children:[r.jsx("option",{value:"post-cps",children:"Post-CPS"}),r.jsx("option",{value:"during-process",children:"Pendant les dmarches"}),r.jsx("option",{value:"pre-arrival",children:"Pr-arrive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Catgorie"}),r.jsx("input",{type:"text",id:"category",list:"categories",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:P,onChange:Z=>L(Z.target.value),required:!0}),r.jsx("datalist",{id:"categories",children:J.map((Z,mt)=>r.jsx("option",{value:Z},mt))})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fileType",className:"block text-sm font-medium text-gray-700",children:"Type de fichier"}),r.jsxs("select",{id:"fileType",className:"mt-2 block w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",value:f,onChange:Z=>w(Z.target.value),required:!0,children:[r.jsxs("optgroup",{label:"Documents",children:[r.jsx("option",{value:"pdf",children:"PDF"}),r.jsx("option",{value:"doc",children:"Word (.doc)"}),r.jsx("option",{value:"docx",children:"Word (.docx)"}),r.jsx("option",{value:"txt",children:"Texte (.txt)"})]}),r.jsxs("optgroup",{label:"Tableurs",children:[r.jsx("option",{value:"xls",children:"Excel (.xls)"}),r.jsx("option",{value:"xlsx",children:"Excel (.xlsx)"})]}),r.jsxs("optgroup",{label:"Prsentations",children:[r.jsx("option",{value:"ppt",children:"PowerPoint (.ppt)"}),r.jsx("option",{value:"pptx",children:"PowerPoint (.pptx)"})]}),r.jsxs("optgroup",{label:"Mdias",children:[r.jsx("option",{value:"image",children:"Image (.jpg, .png, etc.)"}),r.jsx("option",{value:"video",children:"Vido (.mp4, etc.)"}),r.jsx("option",{value:"audio",children:"Audio (.mp3, etc.)"})]}),r.jsxs("optgroup",{label:"Autres",children:[r.jsx("option",{value:"zip",children:"Archive (.zip, .rar)"}),r.jsx("option",{value:"link",children:"Lien externe"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"fileUrl",className:"block text-sm font-medium text-gray-700",children:f==="link"?"URL du lien":"URL du fichier"}),f!=="link"&&r.jsxs("div",{className:"rounded-md bg-blue-50 p-4 mb-4",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(OR,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Upload direct vers Dropbox"})]}),r.jsx("div",{className:"mt-2 text-sm text-blue-700 mb-3",children:"Uploadez directement votre fichier vers Dropbox et le lien sera automatiquement ajout ci-dessous."}),r.jsx(Qx,{onSuccess:Z=>{N(Z),$(Z.split("/").pop()||"")},buttonText:"Uploader le fichier vers Dropbox"})]}),f==="link"&&r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex flex-col space-y-4 mb-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(x2,{className:"w-4 h-4 text-blue-600 mr-2"}),"Fichiers Dropbox"]}),r.jsx("button",{type:"button",onClick:()=>{_e(!me),me||ae()},className:"text-xs text-blue-600 hover:text-blue-800 flex items-center",children:me?r.jsxs(r.Fragment,{children:[r.jsx(St,{className:"w-3 h-3 mr-1"}),"Masquer"]}):r.jsxs(r.Fragment,{children:[r.jsx(Qh,{className:"w-3 h-3 mr-1"}),"Explorer"]})})]}),me&&r.jsxs("div",{className:"mt-2 border rounded-md",children:[r.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 border-b",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Fichiers disponibles"}),r.jsx("div",{className:"flex space-x-2",children:r.jsxs("button",{type:"button",onClick:ae,className:"inline-flex items-center p-1 text-xs text-blue-700 bg-blue-50 rounded hover:bg-blue-100",disabled:F,children:[F?r.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"}):r.jsx(Ux,{className:"w-3 h-3"}),r.jsx("span",{className:"ml-1",children:"Actualiser"})]})})]}),X&&r.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(mR,{className:"w-4 h-4 mt-0.5 mr-2 flex-shrink-0"}),r.jsx("span",{children:X})]})}),F?r.jsx("div",{className:"flex justify-center items-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):H.length>0?r.jsx("div",{className:"max-h-60 overflow-y-auto",children:r.jsx("ul",{className:"divide-y",children:H.map(Z=>r.jsx("li",{children:r.jsxs("div",{className:`flex items-center justify-between p-3 hover:bg-blue-50 cursor-pointer ${(V==null?void 0:V.id)===Z.id?"bg-blue-50":""}`,onClick:()=>U(Z),children:[r.jsxs("div",{className:"flex items-center flex-grow pr-3 truncate",children:[r.jsx(We,{className:"w-4 h-4 text-blue-600 mr-2 flex-shrink-0"}),r.jsxs("div",{className:"truncate",children:[r.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:Z.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:[Z.size?`${Math.round(Z.size/1024)} Ko`:"",Z.client_modified?`  ${new Date(Z.client_modified).toLocaleDateString()}`:""]})]})]}),r.jsxs("button",{type:"button",className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded flex items-center",onClick:mt=>{mt.stopPropagation(),Ee(Z)},children:[r.jsx(Ys,{className:"w-3 h-3 mr-1"}),"Utiliser"]})]})},Z.id))})}):r.jsx("div",{className:"py-8 text-center",children:r.jsx("p",{className:"text-sm text-gray-500",children:H.length===0&&!X?"Cliquez sur Actualiser pour afficher vos fichiers.":"Aucun fichier trouv."})})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs("button",{type:"button",onClick:()=>k(!0),className:"flex-1 flex items-center justify-center gap-2 p-2 border border-blue-200 rounded-md bg-blue-50 hover:bg-blue-100 text-blue-700 text-sm transition-colors",children:[r.jsx(Qh,{className:"w-4 h-4 text-blue-600"}),"Parcourir Dropbox"]})}),V&&V.shared_link&&r.jsxs("div",{className:"mt-2 p-3 bg-green-50 border border-green-100 rounded-md",children:[r.jsxs("div",{className:"flex items-center text-sm text-green-800 mb-2",children:[r.jsx(vs,{className:"w-4 h-4 mr-2 text-green-600"}),"Fichier slectionn : ",V.name]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"text",readOnly:!0,value:V.shared_link.url,className:"flex-1 text-xs py-1 px-2 bg-white border rounded-l-md focus:outline-none"}),r.jsx("button",{type:"button",className:"bg-blue-600 text-white py-1 px-2 rounded-r-md text-xs",onClick:()=>{navigator.clipboard.writeText(V.shared_link.url)},children:r.jsx(qn,{className:"w-3 h-3"})})]})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:r.jsx(Kh,{className:"w-5 h-5 text-gray-500"})}),r.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (Dropbox/Google Drive/etc.)",value:M,onChange:Z=>N(Z.target.value),required:!0}),B&&r.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier slectionn: ",B]})]})]}),f!=="link"&&r.jsxs("div",{className:"mt-2",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("div",{className:"flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none",children:r.jsx(Kh,{className:"w-5 h-5 text-gray-500"})}),r.jsx("input",{type:"url",id:"fileUrl",className:"block w-full pl-10 p-2.5 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"URL du fichier (gnre automatiquement)",value:M,onChange:Z=>N(Z.target.value),required:!0})]}),r.jsx("button",{type:"button",onClick:()=>k(!0),className:"ml-2 p-2.5 bg-blue-100 text-blue-700 hover:bg-blue-200 rounded-md transition-colors",title:"Parcourir les fichiers existants",children:r.jsx(Qh,{className:"w-5 h-5"})})]}),B&&r.jsxs("div",{className:"mt-1 text-xs text-blue-600",children:["Fichier slectionn: ",B]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{children:j&&r.jsxs("button",{type:"button",onClick:De,className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-red-600 to-red-400 hover:from-red-700 hover:to-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400 transition-all gap-2",children:[r.jsx(pi,{className:"mr-2 h-4 w-4"}),"Supprimer"]})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>e("/admin"),className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-blue-700 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 border border-blue-200 transition-all gap-2",children:"Annuler"}),r.jsxs("button",{type:"submit",className:"inline-flex items-center px-5 py-2.5 rounded-xl shadow-md text-base font-bold text-white bg-gradient-to-r from-blue-700 to-blue-500 hover:from-blue-800 hover:to-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-400 transition-all gap-2",children:[r.jsx(Pp,{className:"mr-2 h-4 w-4"}),x?"Ajouter":"Enregistrer"]})]})]})]})})})}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Ressources"}),r.jsxs("button",{onClick:()=>e(`${o?"/admin":"/editor"}/resources?new=resource`),className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-800",children:[r.jsx(as,{className:"w-4 h-4 mr-1"}),"Ajouter"]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Post-CPS"}),Array.isArray(Fe["post-cps"])&&Fe["post-cps"].length>0?r.jsx("ul",{className:"space-y-2",children:Fe["post-cps"].map(Z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(l(Z.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===Z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Gt(Z.fileType)}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("span",{className:"block text-sm font-medium",children:Z.title}),r.jsx("span",{className:"block text-xs text-gray-500",children:Z.category})]})]})},Z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pendant les dmarches"}),Array.isArray(Fe["during-process"])&&Fe["during-process"].length>0?r.jsx("ul",{className:"space-y-2",children:Fe["during-process"].map(Z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(l(Z.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===Z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Gt(Z.fileType)}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("span",{className:"block text-sm font-medium",children:Z.title}),r.jsx("span",{className:"block text-xs text-gray-500",children:Z.category})]})]})},Z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-2",children:"Pr-arrive"}),Array.isArray(Fe["pre-arrival"])&&Fe["pre-arrival"].length>0?r.jsx("ul",{className:"space-y-2",children:Fe["pre-arrival"].map(Z=>r.jsx("li",{children:r.jsxs("button",{onClick:()=>e(l(Z.id)),className:`flex items-center w-full p-2 rounded-md text-left hover:bg-gray-50 transition-colors ${j===Z.id?"bg-blue-50 border border-blue-200":""}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-md bg-blue-100 flex items-center justify-center mr-3",children:Gt(Z.fileType)}),r.jsxs("div",{className:"flex-grow",children:[r.jsx("span",{className:"block text-sm font-medium",children:Z.title}),r.jsx("span",{className:"block text-xs text-gray-500",children:Z.category})]})]})},Z.id))}):r.jsx("p",{className:"text-sm text-gray-500",children:"Aucune ressource disponible"})]})]})]})})]})}),r.jsx(Gx,{isOpen:E,onClose:()=>A(!1),onConfirm:ke,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer la ressource "${C}" ? Cette action est irrversible.`,confirmButtonText:"Supprimer",type:"danger"}),I&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 px-4 py-6 overflow-y-auto",children:r.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Slectionner un fichier Dropbox"}),r.jsx("button",{onClick:()=>k(!1),className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"flex-grow overflow-y-auto",children:r.jsx(oD,{onSelect:(Z,mt,$e)=>{N(Z),$(mt),w($e==="pdf"?"pdf":$e==="docx"?"docx":$e==="xlsx"?"xlsx":$e==="pptx"?"pptx":$e==="txt"?"txt":$e==="image"?"image":$e==="video"?"video":$e==="audio"?"audio":$e==="zip"?"zip":"link"),k(!1)},showTitle:!1})}),r.jsx("div",{className:"px-4 py-3 border-t border-gray-200 flex justify-end",children:r.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium rounded-md transition-colors",children:"Annuler"})})]})})]})},V2=({open:t,onClose:e,onSubmit:s,loading:n=!1,error:i})=>{const[a,o]=b.useState(""),l=u=>{u.preventDefault(),s(a)};return xi.useEffect(()=>{t||o("")},[t]),t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[r.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:""}),r.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:"Mot de passe requis"}),r.jsxs("form",{onSubmit:l,className:"flex flex-col gap-3",children:[r.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Mot de passe admin...",value:a,onChange:u=>o(u.target.value),disabled:n,autoFocus:!0}),i&&r.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),r.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||a==="",children:"Valider"})]})]})}):null};var F2={};async function lD(t){let e=[],s;do{const i=await(await fetch(`https://identitytoolkit.googleapis.com/v1/projects/${F2.REACT_APP_FIREBASE_PROJECT_ID}/accounts:batchGet?key=${t}`+(s?`&nextPageToken=${s}`:""),{method:"GET"})).json();i&&i.users&&(e=e.concat(i.users)),s=i.nextPageToken}while(s);return e}const cD=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(!1),[i,a]=b.useState(null),[o,l]=b.useState(null),[u,d]=b.useState([]),[h,p]=b.useState(!0),[x,j]=b.useState(null),[C,R]=b.useState([]),[S,y]=b.useState(!1),[v,_]=b.useState([]),{currentUser:P}=Te(),[L,M]=b.useState(!1),N=it(),f=F2.REACT_APP_FIREBASE_API_KEY||"",w=async()=>{p(!0),j(null);try{const B=await Ye(Se(ne,"users")),$=[];B.forEach(H=>{$.push(H.data())}),d($)}catch{j("Erreur lors du chargement des utilisateurs.")}finally{p(!1)}};b.useEffect(()=>{w()},[]),b.useEffect(()=>{(async()=>{y(!0);try{if(!f)return;const $=await lD(f);R($)}catch{}finally{y(!1)}})()},[f]),b.useEffect(()=>{if(C.length&&u.length){const B=C.filter($=>!u.some(H=>H.uid===$.localId));_(B)}},[C,u]),b.useEffect(()=>{if(P&&u.length>0){const B=u.find($=>$.uid===P.uid);M(!!(B!=null&&B.isSuperAdmin))}},[P,u]);const E=async B=>{e(!0),l({uid:B,action:"toggleAdmin"}),a(null)},A=async B=>{e(!0),l({uid:B,action:"toggleEditor"}),a(null)},I=async B=>{if(!o)return;if(n(!0),a(null),B!=="ngiryallahrek"){a("Mot de passe incorrect."),n(!1);return}const $=u.find(H=>H.uid===o.uid);if($!=null&&$.isSuperAdmin&&$.uid!==(P==null?void 0:P.uid)&&!L){a("Impossible de modifier le rle d'un admin principal."),n(!1);return}try{if(o.action==="toggleAdmin"){const H=!($!=null&&$.isAdmin);await ts(be(ne,"users",o.uid),{isAdmin:H}),d(O=>O.map(F=>F.uid===o.uid?{...F,isAdmin:H}:F)),await Pt({type:H?"Ajout":"Suppression",target:"Utilisateur",targetId:o.uid,user:typeof P=="object"&&(P!=null&&P.displayName)?P.displayName:void 0,details:{action:"Changement de rle administrateur",userId:o.uid,newStatus:H?"Administrateur":"Utilisateur standard"}})}else if(o.action==="toggleEditor"){const H=!($!=null&&$.isEditor);await ts(be(ne,"users",o.uid),{isEditor:H}),d(O=>O.map(F=>F.uid===o.uid?{...F,isEditor:H}:F)),await Pt({type:H?"Ajout":"Suppression",target:"Utilisateur",targetId:o.uid,user:typeof P=="object"&&(P!=null&&P.displayName)?P.displayName:void 0,details:{action:"Changement de rle diteur",userId:o.uid,newStatus:H?"diteur":"Utilisateur standard"}})}e(!1),l(null)}catch(H){console.error("Erreur lors de la mise  jour:",H),a("Erreur lors de la mise  jour du statut utilisateur.")}finally{n(!1)}},k=async B=>{try{await Ns(be(ne,"users",B.localId),{uid:B.localId,email:B.email,displayName:B.displayName||"",isAdmin:!1,isEditor:!1,emailVerified:B.emailVerified||!1,photoURL:B.photoUrl||""}),await Pt({type:"Ajout",target:"Utilisateur",targetId:B.localId,user:typeof P=="object"&&(P!=null&&P.displayName)?P.displayName:void 0,details:{action:"Cration de profil Firestore",userId:B.localId,email:B.email}}),w()}catch($){console.error("Erreur lors de la cration du profil Firestore:",$),alert("Erreur lors de la cration du profil Firestore : "+$.message)}};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[r.jsxs("button",{onClick:()=>N("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour admin"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Gestion des utilisateurs"})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[S?r.jsxs("div",{className:"mb-6 flex items-center text-yellow-600",children:[r.jsx(ls,{className:"w-5 h-5 mr-2"})," Chargement des utilisateurs Firebase Auth..."]}):v.length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:[r.jsxs("div",{className:"font-bold text-yellow-800 mb-2 flex items-center",children:[r.jsx(ls,{className:"w-5 h-5 mr-2"})," Utilisateurs sans profil Firestore"]}),r.jsx("ul",{className:"mb-2 text-sm",children:v.map(B=>r.jsxs("li",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-mono text-gray-700",children:B.email}),r.jsx("button",{onClick:()=>k(B),className:"ml-2 px-2 py-1 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",children:"Crer le profil Firestore"})]},B.localId))}),r.jsxs("div",{className:"text-xs text-yellow-700",children:["Ces utilisateurs existent dans lauthentification Firebase mais nont pas encore de document dans la collection ",r.jsx("b",{children:"users"}),"."]})]}),h?r.jsx("div",{children:"Chargement..."}):x?r.jsx("div",{className:"text-red-600",children:x}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(B=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-4 py-2 flex items-center cursor-pointer hover:bg-gray-50",onClick:()=>N(`/admin/users/${B.uid}`),children:[B.photoURL?r.jsx("img",{src:B.photoURL,alt:B.displayName||B.email,className:"w-8 h-8 rounded-full mr-2 object-cover bg-gray-200"}):r.jsx("span",{className:"w-8 h-8 rounded-full mr-2 bg-gray-200 flex items-center justify-center",children:r.jsxs("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),B.displayName||B.email,B.isSuperAdmin&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"}),B.uid===(P==null?void 0:P.uid)&&r.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Moi)"})]}),r.jsx("td",{className:"px-4 py-2",children:B.email}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[B.isAdmin?r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[r.jsx(Ot,{className:"w-4 h-4 mr-1"})," Admin"]}):r.jsx("span",{className:"text-gray-500 text-xs",children:"Standard"}),B.isEditor&&r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(Br,{className:"w-4 h-4 mr-1"})," diteur"]}),B.isSuperAdmin&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-yellow-100 text-yellow-800 border border-yellow-300",children:"Admin principal"})]})}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[B.uid!==(P==null?void 0:P.uid)&&(!B.isSuperAdmin||B.isSuperAdmin&&L)&&r.jsx("button",{onClick:()=>E(B.uid),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${B.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:B.isAdmin?r.jsxs(r.Fragment,{children:[r.jsx(b2,{className:"w-4 h-4 mr-1"})," Retirer admin"]}):r.jsxs(r.Fragment,{children:[r.jsx(w2,{className:"w-4 h-4 mr-1"})," Promouvoir admin"]})}),B.uid!==(P==null?void 0:P.uid)&&(!B.isSuperAdmin||B.isSuperAdmin&&L)&&r.jsx("button",{onClick:()=>A(B.uid),className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium transition-colors duration-200 ${B.isEditor?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:B.isEditor?r.jsxs(r.Fragment,{children:[r.jsx(St,{className:"w-4 h-4 mr-1"})," Retirer diteur"]}):r.jsxs(r.Fragment,{children:[r.jsx(Br,{className:"w-4 h-4 mr-1"})," Promouvoir diteur"]})}),B.uid!==(P==null?void 0:P.uid)&&B.isSuperAdmin&&!L&&r.jsx("button",{className:"ml-2 px-2 py-1 rounded bg-gray-100 text-gray-700 hover:bg-gray-200 transition disabled:opacity-50",disabled:!0,title:"Impossible de modifier le rle d'un admin principal",children:"Impossible de modifier"})]})})]},B.uid))})]})})]}),r.jsx(V2,{open:t,onClose:()=>{e(!1),l(null),a(null)},onSubmit:I,loading:s,error:i})]})},uD=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(!1),[i,a]=b.useState(null),[o,l]=b.useState(!1),{uid:u}=pd(),d=it(),{currentUser:h}=Te(),[p,x]=b.useState(null),[j,C]=b.useState(!0),[R,S]=b.useState(null),[y,v]=b.useState(!1),[_,P]=b.useState(!1);b.useEffect(()=>{u&&(async()=>{C(!0),S(null);try{const I=be(ne,"users",u),k=await xt(I);k.exists()?x(k.data()):S("Utilisateur introuvable.")}catch{S("Erreur lors du chargement du profil utilisateur.")}finally{C(!1)}})()},[u]),b.useEffect(()=>{(async()=>{if(h)try{const I=be(ne,"users",h.uid),k=await xt(I);if(k.exists()){const B=k.data();P(!!B.isSuperAdmin)}}catch{P(!1)}})()},[h]);const L=async()=>{e(!0),a(null)},M=async A=>{if(p){if(n(!0),a(null),A!=="ngiryallahrek"){a("Mot de passe incorrect."),n(!1);return}if(p.isSuperAdmin&&p.uid!==(h==null?void 0:h.uid)&&!_){a("Impossible de modifier le rle d'un admin principal."),n(!1);return}v(!0);try{await ts(be(ne,"users",p.uid),{isAdmin:!p.isAdmin}),x({...p,isAdmin:!p.isAdmin}),e(!1)}catch(I){console.error("Erreur lors de la mise  jour:",I),a("Erreur lors de la mise  jour du statut administrateur.")}finally{v(!1),n(!1)}}},N=()=>{if(p){if(p.uid===(h==null?void 0:h.uid)){alert("Vous ne pouvez pas supprimer votre propre compte administrateur.");return}if(p.isSuperAdmin&&!_){alert("Impossible de supprimer un admin principal.");return}l(!0)}},f=async()=>{if(p){v(!0);try{const A="https://deleteuser-4t2yrgzbgq-uc.a.run.app";if(!It.currentUser)throw new Error("Vous devez tre connect pour effectuer cette action");const I=await TC(It.currentUser),k=await fetch(A,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I}`},body:JSON.stringify({uid:p.uid})});if(!k.ok)throw new Error(`Erreur lors de la suppression de l'utilisateur de l'authentification: ${k.statusText}`);await Rn(be(ne,"users",p.uid)),d("/admin/users")}catch(A){console.error("Erreur lors de la suppression:",A),alert("Erreur lors de la suppression de l'utilisateur.")}finally{v(!1)}}},w=A=>{p&&x({...p,[A.target.name]:A.target.value})},E=async()=>{if(p){v(!0);try{await ts(be(ne,"users",p.uid),{displayName:p.displayName,photoURL:p.photoURL}),alert("Profil mis  jour !")}catch{alert("Erreur lors de la mise  jour du profil.")}finally{v(!1)}}};return j?r.jsx("div",{className:"p-8",children:"Chargement..."}):R?r.jsx("div",{className:"p-8 text-red-600",children:R}):p?r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[r.jsxs("button",{onClick:()=>d("/admin/users"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"})," Retour utilisateurs"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Profil utilisateur"})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12 max-w-xl flex justify-center items-center min-h-[70vh]",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full",children:[r.jsx("div",{className:"relative mb-6",children:p.photoURL?r.jsx("img",{src:p.photoURL,alt:p.displayName||p.email,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200"}):r.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center shadow-lg border-4 border-blue-100",children:r.jsxs("svg",{className:"w-20 h-20 text-gray-400",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A9 9 0 1112 21a8.963 8.963 0 01-6.879-3.196z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),r.jsx("input",{type:"text",name:"displayName",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-2 w-full text-center text-lg font-semibold focus:border-blue-400 transition",value:(p==null?void 0:p.displayName)||"",onChange:w,disabled:y||(p==null?void 0:p.isSuperAdmin)&&!_&&(p==null?void 0:p.uid)!==(h==null?void 0:h.uid)}),(p==null?void 0:p.isSuperAdmin)&&r.jsx("div",{className:"mb-2 text-yellow-800 font-bold text-xs inline-flex items-center px-2 py-0.5 rounded bg-yellow-100 border border-yellow-300",children:"Admin principal"}),r.jsx("input",{type:"text",name:"photoURL",className:"border-2 border-blue-100 rounded-lg px-4 py-2 mb-4 w-full text-center text-base focus:border-blue-400 transition",value:(p==null?void 0:p.photoURL)||"",onChange:w,disabled:y}),r.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"Email :"})," ",p.email]}),r.jsxs("div",{className:"mb-1 w-full text-center text-gray-600",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"Vrifi :"})," ",p.emailVerified?"Oui":"Non"]}),r.jsxs("div",{className:"mb-6 w-full text-center",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:"Statut :"})," ",p.isAdmin?r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 ml-2",children:[r.jsx(Ot,{className:"w-5 h-5 mr-1"})," Admin"]}):r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800 ml-2",children:"Standard"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full mt-2",children:[p.uid!==(h==null?void 0:h.uid)&&r.jsx("button",{onClick:L,className:`flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow transition-colors duration-200 ${p.isAdmin?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,disabled:y||(p==null?void 0:p.isSuperAdmin)&&!_&&(p==null?void 0:p.uid)!==(h==null?void 0:h.uid),children:p.isAdmin?r.jsxs(r.Fragment,{children:[r.jsx(b2,{className:"w-5 h-5 mr-2"})," Retirer admin"]}):r.jsxs(r.Fragment,{children:[r.jsx(w2,{className:"w-5 h-5 mr-2"})," Promouvoir admin"]})}),p.uid!==(h==null?void 0:h.uid)&&r.jsxs("button",{onClick:N,className:"flex-1 inline-flex items-center justify-center px-4 py-2 rounded-lg text-base font-medium shadow bg-red-600 text-white hover:bg-red-700",disabled:y||(p==null?void 0:p.isSuperAdmin)&&!_&&(p==null?void 0:p.uid)!==(h==null?void 0:h.uid),children:[r.jsx(pi,{className:"w-5 h-5 mr-2"})," Supprimer utilisateur"]}),r.jsx("button",{className:"mt-4 bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50",onClick:E,disabled:y||(p==null?void 0:p.isSuperAdmin)&&!_&&(p==null?void 0:p.uid)!==(h==null?void 0:h.uid),title:p!=null&&p.isSuperAdmin&&!_&&(p==null?void 0:p.uid)!==(h==null?void 0:h.uid)?"Impossible de modifier un admin principal":void 0,children:"Enregistrer les modifications"})]})]})}),r.jsx(V2,{open:t,onClose:()=>{e(!1),a(null)},onSubmit:M,loading:s,error:i}),r.jsx(Gx,{isOpen:o,onClose:()=>l(!1),onConfirm:f,title:"Confirmer la suppression",message:`tes-vous sr de vouloir supprimer l'utilisateur ${(p==null?void 0:p.displayName)||(p==null?void 0:p.email)} ? Cette action est irrversible.`,confirmButtonText:"Supprimer dfinitivement",type:"danger"})]}):null},dD=()=>{const[t,e]=b.useState([]),[s,n]=b.useState(!0),[i,a]=b.useState(""),[o,l]=b.useState("all"),[u,d]=b.useState("all"),[h,p]=b.useState("all"),[x,j]=b.useState(!1),[C,R]=b.useState(null),[S,y]=b.useState(!0),v=20,_=f=>{const w=new Date(f);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(w)},P=()=>{const f=new Date;let w=null;switch(h){case"today":w=new Date(f.setHours(0,0,0,0));break;case"week":w=new Date,w.setDate(f.getDate()-7);break;case"month":w=new Date,w.setMonth(f.getMonth()-1);break;default:w=null}return w},L=async(f=!0)=>{try{f?(n(!0),R(null)):j(!0);let w=kt(Se(ne,"adminActivityLog"),Hn("date","desc"));const E=P();E&&(w=kt(w,or("date",">=",E.toISOString()))),w=kt(w,Bu(v));const A=await Ye(w);y(A.docs.length===v),A.docs.length>0?R(A.docs[A.docs.length-1]):(R(null),y(!1));let k=A.docs.map(B=>({id:B.id,...B.data()}));if(o!=="all"&&(k=k.filter(B=>B.type===o)),u!=="all"&&(k=k.filter(B=>B.target===u)),i){const B=i.toLowerCase();k=k.filter($=>{var H;return((H=$.user)==null?void 0:H.toLowerCase().includes(B))||$.target.toLowerCase().includes(B)||$.type.toLowerCase().includes(B)||$.details&&JSON.stringify($.details).toLowerCase().includes(B)})}e(f?k:B=>[...B,...k])}catch(w){console.error("Error fetching activities:",w)}finally{n(!1),j(!1)}};b.useEffect(()=>{L()},[]),b.useEffect(()=>{L()},[o,u,h]);const M=f=>{let w="bg-blue-100 text-blue-800";switch(f.toLowerCase()){case"ajout":w="bg-green-100 text-green-800";break;case"suppression":w="bg-red-100 text-red-800";break;case"modification":w="bg-yellow-100 text-yellow-800";break}return r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w}`,children:f})},N=f=>{let w="bg-gray-100 text-gray-800";const E={ressource:"bg-purple-100 text-purple-800",section:"bg-indigo-100 text-indigo-800","sous-section":"bg-indigo-50 text-indigo-700",faq:"bg-blue-100 text-blue-800",utilisateur:"bg-pink-100 text-pink-800",webinaire:"bg-teal-100 text-teal-800",forum:"bg-amber-100 text-amber-800",profil:"bg-cyan-100 text-cyan-800",paramtre:"bg-gray-200 text-gray-800",document:"bg-emerald-100 text-emerald-800",catgorie:"bg-fuchsia-100 text-fuchsia-800"},A=f.toLowerCase();return E[A]&&(w=E[A]),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w}`,children:f})};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsx("div",{className:"container mx-auto px-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Y,{to:"/admin",className:"p-2 rounded-full hover:bg-blue-800 transition mr-2",children:r.jsx(ze,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Journal d'activit"}),r.jsx("p",{className:"text-blue-100",children:"Historique dtaill des activits administratives"})]})]})})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Rechercher dans les activits...",value:i,onChange:f=>a(f.target.value)})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("div",{className:"relative flex-1",children:r.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:o,onChange:f=>l(f.target.value),children:[r.jsx("option",{value:"all",children:"Toutes les actions"}),r.jsx("option",{value:"Ajout",children:"Ajout"}),r.jsx("option",{value:"Modification",children:"Modification"}),r.jsx("option",{value:"Suppression",children:"Suppression"})]})}),r.jsx("div",{className:"relative flex-1",children:r.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:u,onChange:f=>d(f.target.value),children:[r.jsx("option",{value:"all",children:"Toutes les cibles"}),r.jsx("option",{value:"Ressource",children:"Ressources"}),r.jsx("option",{value:"Section",children:"Sections"}),r.jsx("option",{value:"Sous-section",children:"Sous-sections"}),r.jsx("option",{value:"FAQ",children:"FAQ"}),r.jsx("option",{value:"Utilisateur",children:"Utilisateurs"}),r.jsx("option",{value:"Webinaire",children:"Webinaires"}),r.jsx("option",{value:"Forum",children:"Forums"}),r.jsx("option",{value:"Profil",children:"Profils"}),r.jsx("option",{value:"Paramtre",children:"Paramtres"}),r.jsx("option",{value:"Document",children:"Documents"}),r.jsx("option",{value:"Catgorie",children:"Catgories"})]})})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("div",{className:"relative flex-1",children:r.jsxs("select",{className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:h,onChange:f=>p(f.target.value),children:[r.jsx("option",{value:"all",children:"Toute priode"}),r.jsx("option",{value:"today",children:"Aujourd'hui"}),r.jsx("option",{value:"week",children:"7 derniers jours"}),r.jsx("option",{value:"month",children:"30 derniers jours"})]})}),r.jsx("button",{onClick:()=>L(),className:"inline-flex items-center p-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r.jsx(Ux,{className:"h-5 w-5"})})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Activits rcentes"})}),s?r.jsx("div",{className:"p-8 flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-500"})}):t.length===0?r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Aucune activit  afficher. Ajustez les filtres ou effectuez des actions administratives."}):r.jsx("div",{className:"divide-y divide-gray-200",children:t.map(f=>r.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2",children:[r.jsxs("div",{className:"flex items-center mb-2 sm:mb-0",children:[M(f.type),r.jsx("span",{className:"mx-2",children:""}),N(f.target)]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(lr,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:_(f.date)})]})]}),r.jsx("div",{className:"flex items-start",children:f.user&&r.jsxs("div",{className:"text-sm text-gray-500 flex items-center mr-4",children:[r.jsx(Ts,{className:"h-4 w-4 mr-1"}),r.jsx("span",{children:f.user})]})}),f.details&&r.jsxs("div",{className:"mt-2 bg-gray-50 p-3 rounded text-sm",children:[r.jsx("h4",{className:"font-medium mb-1",children:"Dtails"}),r.jsx("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2",children:Object.entries(f.details).map(([w,E])=>r.jsxs("div",{className:"flex",children:[r.jsxs("dt",{className:"font-medium text-gray-500 mr-2",children:[w,":"]}),r.jsx("dd",{className:"text-gray-900",children:typeof E=="object"?JSON.stringify(E):String(E)})]},w))})]}),f.targetId&&r.jsxs("div",{className:"mt-1 text-sm",children:[r.jsx("span",{className:"font-medium text-gray-500",children:"ID:"})," ",f.targetId]})]},f.id))}),S&&!s&&r.jsx("div",{className:"p-4 border-t border-gray-200 text-center",children:r.jsx("button",{onClick:()=>L(!1),disabled:x,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:x?r.jsxs("span",{className:"flex items-center",children:[r.jsx("span",{className:"animate-spin h-4 w-4 mr-2 border-b-2 border-blue-500 rounded-full"}),"Chargement..."]}):"Charger plus d'activits"})})]})]})]})},hD=()=>{const t=it(),{currentUser:e}=Te();return r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[r.jsxs("button",{onClick:()=>t("/admin"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'administration"})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold text-blue-800 mb-4",children:"Bienvenue dans l'interface d'administration d'ESIG-prep-guide"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Ce guide vous aidera  comprendre les diffrentes fonctionnalits de l'interface d'administration et comment les utiliser efficacement. En tant qu'administrateur, vous avez la responsabilit de grer le contenu du guide, les ressources, les questions FAQ et les utilisateurs."}),e&&r.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:r.jsxs("p",{className:"text-blue-800",children:[r.jsx("span",{className:"font-bold",children:"Connect en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Sommaire"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx("a",{href:"#dashboard",className:"text-blue-600 hover:underline",children:"1. Tableau de bord"})}),r.jsx("li",{children:r.jsx("a",{href:"#content",className:"text-blue-600 hover:underline",children:"2. Gestion du contenu du guide"})}),r.jsx("li",{children:r.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Gestion des FAQ"})}),r.jsx("li",{children:r.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"4. Gestion des ressources"})}),r.jsx("li",{children:r.jsx("a",{href:"#dropbox",className:"text-blue-600 hover:underline",children:"5. Gestionnaire Dropbox"})}),r.jsx("li",{children:r.jsx("a",{href:"#users",className:"text-blue-600 hover:underline",children:"6. Gestion des utilisateurs"})}),r.jsx("li",{children:r.jsx("a",{href:"#activity",className:"text-blue-600 hover:underline",children:"7. Journal d'activit"})}),r.jsx("li",{children:r.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"8. Conseils et bonnes pratiques"})})]})]}),r.jsxs("div",{id:"dashboard",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(PR,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"1. Tableau de bord"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"Le tableau de bord est votre point d'entre principal dans l'administration. Il vous offre une vue d'ensemble de l'activit et des statistiques cls de la plateforme."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Statistiques disponibles:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Nombre total d'utilisateurs inscrits"}),r.jsx("li",{children:"Utilisateurs actifs (ayant utilis la plateforme dans les 7 derniers jours)"}),r.jsx("li",{children:"Nombre de sections du guide"}),r.jsx("li",{children:"Nombre de questions FAQ"}),r.jsx("li",{children:"Nombre de ressources disponibles"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Activits rcentes:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:`Le tableau de bord affiche galement les 10 dernires activits enregistres sur la plateforme, comme les connexions, les inscriptions, les modifications de contenu, etc. Pour voir l'ensemble des activits, cliquez sur "Voir toutes les activits".`}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Astuce:"})," Consultez le tableau de bord rgulirement pour surveiller l'activit et l'engagement des utilisateurs sur la plateforme."]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),r.jsx("p",{className:"text-gray-700",children:"Depuis le tableau de bord, vous pouvez accder  toutes les autres sections de l'administration en cliquant sur les cartes statistiques ou en utilisant le menu latral."})]})]}),r.jsxs("div",{id:"content",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(sr,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"2. Gestion du contenu du guide"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"L'diteur de contenu vous permet de crer, modifier et organiser les sections du guide ESIG-prep. Chaque section appartient  une phase spcifique du processus d'immigration."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Phases disponibles:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Post-CPS:"})," Pour les dmarches aprs l'obtention du CPS"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pendant les dmarches:"})," Pour les informations utiles pendant le processus"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Pr-arrive:"})," Pour les prparatifs avant l'arrive en Suisse"]})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Cration d'une section:"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:'Cliquez sur le bouton "Ajouter une section"'}),r.jsx("li",{children:"Remplissez le formulaire avec le titre, la phase et le contenu"}),r.jsx("li",{children:"Dfinissez l'ordre d'apparition de la section dans sa phase"}),r.jsx("li",{children:"Associez des ressources  la section si ncessaire"}),r.jsx("li",{children:'Cliquez sur "Enregistrer" pour crer la section'})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Modification d'une section:"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Slectionnez la section  modifier dans la liste"}),r.jsx("li",{children:"Modifiez les informations dans le formulaire"}),r.jsx("li",{children:'Cliquez sur "Enregistrer" pour sauvegarder les modifications'})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Suppression d'une section:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:'Pour supprimer une section, cliquez sur le bouton "Supprimer" lorsque vous tes en mode dition. Une confirmation vous sera demande avant la suppression dfinitive.'}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Important:"})," L'ordre des sections dtermine leur position d'affichage dans le guide. Assurez-vous que les sections suivent une progression logique."]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour le contenu:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Utilisez des titres clairs et descriptifs"}),r.jsx("li",{children:"Structurez le contenu avec des sous-titres et des listes"}),r.jsx("li",{children:"Incluez des informations pratiques et des conseils"}),r.jsx("li",{children:"Associez des ressources pertinentes  chaque section"}),r.jsx("li",{children:"Mettez rgulirement  jour le contenu pour maintenir sa pertinence"})]})]})]}),r.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(cr,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"3. Gestion des FAQ"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"La section FAQ est essentielle pour aider les utilisateurs  trouver rapidement des rponses  leurs questions. En tant qu'administrateur, vous pouvez grer les questions existantes, ajouter de nouvelles questions et rponses, et approuver les questions soumises par les utilisateurs."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Processus de gestion des FAQ:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700 mb-4",children:[r.jsx("li",{children:"Consultation des questions en attente (non rpondues)"}),r.jsx("li",{children:"Rdaction de rponses prcises et informatives"}),r.jsx("li",{children:"Approbation des questions pour publication"}),r.jsx("li",{children:"Catgorisation par phase et par thmatique"}),r.jsx("li",{children:"Mise  jour des rponses existantes si ncessaire"})]}),r.jsxs("p",{className:"text-gray-700 mb-4",children:[r.jsx("strong",{children:"Important:"})," Lorsqu'un utilisateur soumet une question, le systme enregistre automatiquement son identifiant (uid) et son email. Ces informations vous permettent d'identifier la source de la question et de contacter l'utilisateur si ncessaire pour des prcisions."]}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Astuce:"})," Rpondez aux questions des utilisateurs dans un dlai raisonnable pour maintenir leur engagement. Les questions sans rponse peuvent dcourager la participation."]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques pour les FAQ:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Rpondez de manire claire et concise"}),r.jsx("li",{children:"Incluez des liens vers des ressources ou sections pertinentes"}),r.jsx("li",{children:"Organisez logiquement par catgories pour faciliter la recherche"}),r.jsx("li",{children:"Mettez  jour les rponses lorsque les informations changent"}),r.jsx("li",{children:"Considrez les questions frquentes comme une indication des sections du guide  amliorer"})]})]})]}),r.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(We,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"4. Gestion des ressources"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"La section Gestion des ressources vous permet d'ajouter, de modifier et de supprimer des ressources utiles pour les utilisateurs. Ces ressources peuvent tre des documents PDF, des liens vers des sites externes, ou d'autres types de supports informatifs. Une organisation efficace par phase est essentielle pour l'exprience utilisateur."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Organisation par phase:"}),r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[r.jsx("h5",{className:"font-medium text-blue-700 mb-1",children:"Phase Post-CPS"}),r.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources concernant les tapes  suivre aprs avoir reu une rponse positive du CPS (Concours Passerelle Spcial). Exemples: procdures d'inscription, documents  fournir, prparation acadmique."})]}),r.jsxs("div",{className:"bg-indigo-50 p-3 rounded-md",children:[r.jsx("h5",{className:"font-medium text-indigo-700 mb-1",children:"Phase During-Process"}),r.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources lies aux dmarches administratives en cours (visa, logement, assurances). Exemples: guides pour les dmarches consulaires, check-lists pour les documents de visa, options de logement."})]}),r.jsxs("div",{className:"bg-purple-50 p-3 rounded-md",children:[r.jsx("h5",{className:"font-medium text-purple-700 mb-1",children:"Phase Pre-Arrival"}),r.jsx("p",{className:"text-gray-700 text-sm",children:"Ressources pour prparer l'arrive en France et  l'ESIG. Exemples: guides d'orientation du campus, informations sur les transports locaux, conseils pour l'installation."})]})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalits principales:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Ajouter de nouvelles ressources (fichiers PDF, liens, etc.)"}),r.jsx("li",{children:"Catgoriser les ressources par thme et par phase"}),r.jsx("li",{children:"Modifier les informations des ressources existantes"}),r.jsx("li",{children:"Supprimer les ressources obsoltes"}),r.jsx("li",{children:"Prvisualiser les ressources avant publication"}),r.jsx("li",{children:"Explorer et slectionner des fichiers Dropbox pour vos ressources"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Structure des donnes de ressources:"}),r.jsx("div",{className:"bg-gray-50 p-3 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-700 text-sm font-mono",children:["id: string",r.jsx("br",{}),"title: string",r.jsx("br",{}),"description: string",r.jsx("br",{}),"phase: GuidePhase ('post-cps' | 'during-process' | 'pre-arrival')",r.jsx("br",{}),"category: string",r.jsx("br",{}),"fileUrl: string",r.jsx("br",{}),"fileType: 'pdf' | 'doc' | ... | 'link'",r.jsx("br",{}),"uploadDate: string",r.jsx("br",{}),"updatedDate: string"]})}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Utilisez des noms de fichiers clairs et descriptifs"}),r.jsx("li",{children:"Ajoutez toujours une description concise mais informative"}),r.jsx("li",{children:"Vrifiez que les liens externes fonctionnent correctement"}),r.jsx("li",{children:"Organisez les ressources par catgories logiques et cohrentes"}),r.jsx("li",{children:"Mettez rgulirement  jour les ressources pour garantir leur pertinence"}),r.jsx("li",{children:"Supprimez les ressources obsoltes pour viter la confusion"}),r.jsx("li",{children:"Liez les ressources aux sections de guide appropries"})]})]})]}),r.jsxs("div",{id:"dropbox",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(p2,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"5. Gestionnaire Dropbox"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"Le Gestionnaire Dropbox vous permet d'interagir directement avec votre compte Dropbox pour grer vos fichiers, tester la connectivit, crer des liens de partage et uploader de nouveaux documents. Cette fonctionnalit facilite l'intgration de ressources stockes sur Dropbox dans votre guide."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Procdure de configuration:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 mb-4 text-gray-700",children:[r.jsx("li",{children:"Accdez  la page Gestionnaire Dropbox dans le panneau d'administration"}),r.jsx("li",{children:'Connectez votre compte Dropbox en utilisant le bouton "Connecter  Dropbox"'}),r.jsx("li",{children:"Autorisez l'application  accder  votre Dropbox lorsque demand"}),r.jsx("li",{children:"Une fois connect, l'interface affichera vos fichiers et dossiers"}),r.jsx("li",{children:"Le systme conserve votre jeton d'accs de manire scurise pour les futures connexions"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalits principales:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Tester la connectivit avec votre compte Dropbox"}),r.jsx("li",{children:"Lister tous les fichiers prsents dans votre compte Dropbox"}),r.jsx("li",{children:"Naviguer dans la structure de dossiers"}),r.jsx("li",{children:"Rechercher des fichiers spcifiques par nom ou type"}),r.jsx("li",{children:"Uploader de nouveaux fichiers directement depuis l'interface"}),r.jsx("li",{children:"Gnrer des liens de partage publics pour vos fichiers"}),r.jsx("li",{children:"Copier les liens facilement pour les intgrer dans les ressources"}),r.jsx("li",{children:"Supprimer des fichiers inutiliss depuis l'interface"}),r.jsx("li",{children:"Voir les mtadonnes des fichiers (taille, date de modification, etc.)"})]}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation avec le gestionnaire de ressources:"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Le Gestionnaire Dropbox est particulirement utile pour crer et grer les ressources du guide:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-gray-700",children:[r.jsx("li",{children:"Uploader un fichier dans Dropbox via l'interface"}),r.jsx("li",{children:"Gnrer un lien de partage pour ce fichier"}),r.jsx("li",{children:"Copier ce lien lors de la cration d'une nouvelle ressource dans le gestionnaire de ressources"}),r.jsx("li",{children:"Associer la ressource  la phase approprie et aux sections du guide"})]})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"tapes pour utiliser le Gestionnaire Dropbox:"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Accdez au Gestionnaire Dropbox depuis le tableau de bord"}),r.jsx("li",{children:"Vrifiez le statut de connexion  votre compte Dropbox"}),r.jsx("li",{children:'Si ncessaire, testez la connectivit en cliquant sur le bouton "Tester la connexion"'}),r.jsx("li",{children:"Parcourez la liste des fichiers disponibles ou utilisez la recherche pour trouver un fichier spcifique"}),r.jsx("li",{children:"Pour uploader un nouveau fichier, utilisez la section d'upload ddie"}),r.jsx("li",{children:"Pour gnrer un lien de partage, cliquez sur l'icne de lien  ct du fichier souhait"}),r.jsx("li",{children:"Pour supprimer un fichier, cliquez sur l'icne de corbeille et confirmez votre action"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Intgration avec la Gestion des ressources:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Une fois que vous avez gnr un lien de partage pour un fichier Dropbox, vous pouvez l'utiliser dans la Gestion des ressources:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Copiez le lien gnr depuis le Gestionnaire Dropbox"}),r.jsx("li",{children:'Dans la Gestion des ressources, crez une nouvelle ressource de type "Lien externe"'}),r.jsx("li",{children:"Collez le lien Dropbox dans le champ URL de la ressource"}),r.jsx("li",{children:"Compltez les autres informations (titre, description, catgorie, etc.)"}),r.jsx("li",{children:"Enregistrez la ressource pour la rendre disponible aux utilisateurs"})]}),r.jsxs("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:[r.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Astuce:"}),r.jsx("p",{className:"text-blue-800",children:`Vous pouvez galement parcourir et slectionner directement vos fichiers Dropbox lors de la cration d'une ressource en utilisant la fonction "Explorer Dropbox" dans le gestionnaire de ressources.`})]}),r.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:[r.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Attention:"}),r.jsx("p",{className:"text-yellow-800",children:"La suppression d'un fichier Dropbox est dfinitive. Assurez-vous qu'aucune ressource n'utilise ce fichier avant de le supprimer. Si un fichier est supprim, les liens pointant vers ce fichier ne fonctionneront plus."})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Navigation:"}),r.jsxs("p",{className:"text-gray-700",children:['Accdez au Gestionnaire Dropbox en cliquant sur "Gestionnaire Dropbox" dans le tableau de bord administrateur ou en naviguant directement vers ',r.jsx("span",{className:"text-blue-600",children:"/admin/dropbox"}),"."]})]})]}),r.jsxs("div",{id:"users",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"6. Gestion des utilisateurs"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"Le gestionnaire d'utilisateurs vous permet de consulter la liste des utilisateurs inscrits, de modifier leurs informations et de grer leurs droits d'accs."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Fonctionnalits principales:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Visualisation de tous les utilisateurs inscrits"}),r.jsx("li",{children:"Consultation des profils utilisateurs"}),r.jsx("li",{children:"Attribution/retrait des droits d'administration"}),r.jsx("li",{children:"Suppression de comptes utilisateurs"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Types d'utilisateurs:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Utilisateurs standard:"})," Accs en lecture seule au guide et aux ressources"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Administrateurs:"})," Accs complet au panneau d'administration"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Admin principal (SuperAdmin):"})," Droits tendus, ne peut tre modifi que par lui-mme"]})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion des droits d'administration:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Pour promouvoir un utilisateur au rang d'administrateur ou lui retirer ce privilge:"}),r.jsxs("ol",{className:"list-decimal list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Localisez l'utilisateur dans la liste"}),r.jsx("li",{children:'Cliquez sur "Promouvoir admin" ou "Retirer admin"'}),r.jsx("li",{children:"Entrez le mot de passe administrateur  l'invite"}),r.jsx("li",{children:"Confirmez l'action"})]}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Scurit:"}),` La modification des droits d'administration ncessite un mot de passe spcial pour viter les changements accidentels. Les comptes "Admin principal" sont protgs contre les modifications par d'autres administrateurs.`]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Recommandations importantes:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Limitez le nombre d'administrateurs au minimum ncessaire"}),r.jsx("li",{children:"Rvisez rgulirement la liste des administrateurs"}),r.jsx("li",{children:"Retirez les privilges aux utilisateurs qui n'en ont plus besoin"}),r.jsx("li",{children:"Soyez vigilant lors de la suppression de comptes utilisateurs (cette action est irrversible)"}),r.jsx("li",{children:"Ne partagez jamais le mot de passe administrateur avec des personnes non autorises"})]})]})]}),r.jsxs("div",{id:"activity",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(c2,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Journal d'activit"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activit enregistre toutes les actions importantes effectues sur la plateforme, tant par les utilisateurs que par les administrateurs. C'est un outil essentiel pour la supervision et la scurit."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Actions enregistres:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Connexions et inscriptions"}),r.jsx("li",{children:"Cration, modification et suppression de contenu"}),r.jsx("li",{children:"Ajout et modification de ressources"}),r.jsx("li",{children:"Gestion des FAQ"}),r.jsx("li",{children:"Modifications des droits utilisateurs"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Filtrage des activits:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Vous pouvez filtrer le journal par:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Type d'activit"}),r.jsx("li",{children:"Utilisateur (email)"}),r.jsx("li",{children:"Priode (date de dbut et date de fin)"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Utilisation du journal:"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Le journal d'activit est utile pour:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Suivre les modifications apportes au contenu"}),r.jsx("li",{children:"Identifier les auteurs de modifications spcifiques"}),r.jsx("li",{children:"Dtecter les problmes de scurit potentiels"}),r.jsx("li",{children:"Analyser les tendances d'utilisation"})]}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Astuce:"})," Consultez rgulirement le journal d'activit pour vous tenir inform des changements apports  la plateforme, surtout si vous partagez les responsabilits d'administration avec d'autres personnes."]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Bonnes pratiques:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Vrifiez le journal aprs des modifications importantes"}),r.jsx("li",{children:"Utilisez les filtres pour cibler des informations spcifiques"}),r.jsx("li",{children:"Surveillez les activits inhabituelles qui pourraient indiquer un problme"}),r.jsx("li",{children:"Analysez priodiquement les tendances d'utilisation pour amliorer la plateforme"})]})]})]}),r.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(Qu,{className:"w-6 h-6 text-blue-700 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"7. Conseils et bonnes pratiques"})]}),r.jsxs("div",{className:"border-l-4 border-blue-200 pl-4 mb-6",children:[r.jsx("p",{className:"text-gray-700 mb-4",children:"Voici quelques conseils gnraux pour une administration efficace de la plateforme ESIG-prep-guide."}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Gestion du contenu:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Mettez  jour rgulirement le contenu pour reflter les changements dans les procdures"}),r.jsx("li",{children:"Utilisez un langage clair et accessible pour tous les niveaux de comprhension"}),r.jsx("li",{children:"Structurez le contenu de manire logique et progressive"}),r.jsx("li",{children:"Intgrez des exemples concrets et des cas pratiques"}),r.jsx("li",{children:"Compltez le texte avec des ressources visuelles quand c'est possible"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Interaction avec les utilisateurs:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Rpondez aux questions des utilisateurs dans un dlai raisonnable"}),r.jsx("li",{children:"Prenez en compte les retours d'exprience pour amliorer le guide"}),r.jsx("li",{children:"Soyez attentif aux questions rcurrentes qui pourraient indiquer des lacunes dans le contenu"}),r.jsx("li",{children:"Encouragez les utilisateurs  contribuer en posant des questions et en partageant leur exprience"})]}),r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Scurit et confidentialit:"}),r.jsxs("ul",{className:"list-disc list-inside mb-4 text-gray-700",children:[r.jsx("li",{children:"Ne partagez jamais vos identifiants d'administration"}),r.jsx("li",{children:"Dconnectez-vous aprs chaque session, surtout sur des ordinateurs partags"}),r.jsx("li",{children:"Respectez la confidentialit des donnes utilisateurs"}),r.jsx("li",{children:"Vrifiez rgulirement le journal d'activit pour dtecter toute activit suspecte"}),r.jsx("li",{children:"Utilisez des mots de passe forts et uniques"})]}),r.jsx("div",{className:"bg-gray-100 p-4 rounded-md mb-4",children:r.jsxs("p",{className:"text-gray-800 italic text-sm",children:[r.jsx("strong",{children:"Rappel important:"})," En tant qu'administrateur, vous avez la responsabilit de maintenir la qualit et l'exactitude des informations fournies aux utilisateurs. Veillez  ce que le contenu soit toujours  jour et pertinent."]})})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-2",children:"Calendrier de maintenance suggr:"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Quotidiennement:"})," Vrifier les nouvelles questions FAQ et y rpondre"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Hebdomadairement:"})," Consulter le journal d'activit et les statistiques"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Mensuellement:"})," Vrifier et mettre  jour le contenu du guide"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Trimestriellement:"})," Rviser l'organisation des ressources et les droits des utilisateurs"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Annuellement:"})," Effectuer une rvision complte de tous les contenus"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"Conclusion"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant des connaissances ncessaires pour administrer efficacement la plateforme ESIG-prep-guide. N'hsitez pas  revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Si vous avez des questions ou rencontrez des difficults, contactez l'administrateur principal du systme."}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},mD=()=>{const{guideSections:t}=Ui(),[e,s]=b.useState([]),[n,i]=b.useState([]),[a,o]=b.useState(!0),[l,u]=b.useState("progressions"),[d,h]=b.useState({}),p=b.useCallback((y,v)=>{const _=v.find(M=>M.userId===y);if(!_)return null;const P=t.find(M=>{var N;return(N=M.title)==null?void 0:N.toLowerCase().includes("vous avez obtenu votre visa")}),L=t.find(M=>{var N;return(N=M.title)==null?void 0:N.toLowerCase().includes("en cas de refus de visa")});return P&&_.completedSections.includes(P.id)?"obtained":L&&_.completedSections.includes(L.id)?"refused":null},[t]);b.useEffect(()=>{const y=async()=>{o(!0);const[_,P]=await Promise.all([E2(),_2(async()=>{const{collection:N,getDocs:f}=await Promise.resolve().then(()=>FN);return{collection:N,getDocs:f}},void 0).then(({collection:N,getDocs:f})=>f(N(ne,"users")))]),L=[];P.forEach(N=>{L.push({...N.data(),uid:N.id})});const M=_.map(N=>({userId:N.userId,completedSections:N.completedSections.filter(f=>t.some(w=>w.id===f))}));s(M),i(L),o(!1),v(L,M)},v=async(_,P)=>{const L={},M=_.filter(N=>N.status==="cps"&&p(N.uid,P)==="obtained");for(const N of M)try{const f=await Va(N.uid);if(f&&f.inputValues){console.log("Donnes de sous-section pour",N.displayName||N.uid),console.log("Valeurs disponibles:",f.inputValues);const w=f.inputValues,E=Object.keys(w),A={hasTicket:!1,arrivalDate:"",arrivalTime:"",airport:"",hasOwnTransportation:!1,wantGroupTransport:!1};E.find(O=>w[O]==="Oui"&&O.includes("ticket")||w[O]==="yes"&&O.includes("ticket")||w[O]==="Oui")&&(A.hasTicket=!0);const k=E.find(O=>{const F=w[O];return typeof F=="string"&&(F.includes("2025")||F.includes("Septembre")||F.includes("/")||F.match(/\d{2}:\d{2}/))});if(k){const O=w[k];if(typeof O=="string"){const F=O.split("  ");F.length>1?(A.arrivalDate=F[0],A.arrivalTime=F[1]):A.arrivalDate=O}}const B=E.find(O=>{const F=w[O];return typeof F=="string"&&(F==="CDG"||F==="ORY"||F.includes("Charles")||F.includes("Orly")||F.includes("airport"))});B&&(A.airport=w[B]),E.find(O=>(w[O]==="Oui"||w[O]==="yes")&&(O.includes("own")||O.includes("personnel")))&&(A.hasOwnTransportation=!0),E.find(O=>(w[O]==="Oui"||w[O]==="yes")&&(O.includes("group")||O.includes("commun")))&&(A.wantGroupTransport=!0),L[N.uid]=A,console.log("Donnes d'arrive extraites:",L[N.uid])}}catch(f){console.error(`Erreur lors de la rcupration des donnes d'arrive pour ${N.uid}:`,f)}h(L)};y()},[t]);const x=y=>{if(!t||t.length===0)return 0;const v=y.filter(_=>t.some(P=>P.id===_));return Math.round(v.length/t.length*100)},j=(y,v)=>{const _=t.filter(L=>L.phase===v);if(_.length===0)return 0;const P=y.filter(L=>_.some(M=>M.id===L));return Math.round(P.length/_.length*100)},C=n.filter(y=>y.status==="cps"),R=C,S=C.filter(y=>{const v=p(y.uid,e);return v==="obtained"||v==="refused"});return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[r.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour au dashboard"]}),r.jsxs("span",{className:"flex items-center text-xl font-bold",children:[r.jsx(ct,{className:"w-6 h-6 mr-2 text-white"})," Gestion des tudiants CPS"]})]})}),r.jsxs("div",{className:"flex border-b border-gray-200 mb-4 bg-white shadow-sm",children:[r.jsxs("button",{onClick:()=>u("progressions"),className:`flex-1 py-4 px-6 text-center font-medium ${l==="progressions"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(ct,{className:"inline-block w-5 h-5 mr-2 -mt-1"}),"Progressions actuelles"]}),r.jsxs("button",{onClick:()=>u("visa"),className:`flex-1 py-4 px-6 text-center font-medium ${l==="visa"?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(jl,{className:"inline-block w-5 h-5 mr-2 -mt-1"}),"Statut visa & Arrive"]})]}),r.jsx("div",{className:"w-full mx-auto p-4",children:a?r.jsx("div",{className:"text-center text-gray-500",children:"Chargement des progressions..."}):l==="progressions"?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full divide-y divide-gray-200 text-xs",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Nom"}),r.jsx("th",{className:"px-2 py-2 text-left font-medium text-gray-500 uppercase whitespace-nowrap",children:"Email"}),r.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Progression globale"}),r.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pr-arrive"}),r.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Pendant le processus"}),r.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Post-CPS"}),r.jsx("th",{className:"px-2 py-2 text-center font-medium text-gray-500 uppercase whitespace-nowrap",children:"Sections valides"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.filter(y=>!y.isAdmin&&y.status==="cps").map(y=>{const v=e.find(w=>w.userId===y.uid),_=v?v.completedSections.filter(w=>t.some(E=>E.id===w)):[],P=_.length,L=v?x(v.completedSections):0,M=v?j(v.completedSections,"pre-arrival"):0,N=v?j(v.completedSections,"during-process"):0,f=v?j(v.completedSections,"post-cps"):0;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-900",children:y.displayName||"-"}),r.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-gray-600",children:y.email}),r.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:[r.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle",children:r.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${L}%`}})}),r.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[L,"%"]})]}),r.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[r.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:r.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${M}%`}})}),r.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[M,"%"]}),r.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(w=>w.phase==="pre-arrival").map(w=>r.jsxs("li",{className:"flex items-center gap-1",children:[v&&_.includes(w.id)?r.jsx("span",{className:"text-green-600 font-bold",children:""}):r.jsx("span",{className:"text-red-500 font-bold",children:""}),r.jsx("span",{children:w.title})]},w.id))})]}),r.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[r.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:r.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${N}%`}})}),r.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[N,"%"]}),r.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(w=>w.phase==="during-process").map(w=>r.jsxs("li",{className:"flex items-center gap-1",children:[v&&_.includes(w.id)?r.jsx("span",{className:"text-green-600 font-bold",children:""}):r.jsx("span",{className:"text-red-500 font-bold",children:""}),r.jsx("span",{children:w.title})]},w.id))})]}),r.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center align-top",children:[r.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2.5 inline-block align-middle mb-1",children:r.jsx("div",{className:"bg-blue-700 h-2.5 rounded-full",style:{width:`${f}%`}})}),r.jsxs("span",{className:"ml-2 text-xs font-semibold text-blue-800",children:[f,"%"]}),r.jsx("ul",{className:"mt-2 text-xs text-left",children:t.filter(w=>w.phase==="post-cps").map(w=>r.jsxs("li",{className:"flex items-center gap-1",children:[v&&_.includes(w.id)?r.jsx("span",{className:"text-green-600 font-bold",children:""}):r.jsx("span",{className:"text-red-500 font-bold",children:""}),r.jsx("span",{children:w.title})]},w.id))})]}),r.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm",children:[P," / ",t.length]})]},y.uid)})})]})}):r.jsxs("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:[r.jsx("div",{className:"p-4 bg-blue-50 border-b border-blue-100 flex items-center justify-between",children:r.jsxs("h3",{className:"text-lg font-semibold text-blue-800 flex items-center",children:[r.jsx(jl,{className:"w-5 h-5 mr-2"})," Statut visa & Informations d'arrive"]})}),S.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Aucun tudiant n'a encore obtenu ou s'est vu refuser son visa."}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut visa"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'arrive"}),r.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aroport"}),r.jsx("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Transport group"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(y=>{var v,_,P,L,M;return r.jsxs("tr",{children:[r.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[y.photoURL?r.jsx("img",{className:"h-8 w-8 rounded-full mr-2",src:y.photoURL,alt:""}):r.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:r.jsx(ct,{className:"h-4 w-4 text-blue-500"})}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.displayName||"Sans nom"})]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:y.email}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center",children:p(y.uid,e)==="obtained"?r.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:[r.jsx(Pi,{className:"h-4 w-4 mr-1"})," Obtenu"]}):r.jsxs("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:[r.jsx(St,{className:"h-4 w-4 mr-1"})," Refus"]})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:(v=d[y.uid])!=null&&v.hasTicket?r.jsxs("div",{children:[r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 mb-1",children:"Billet achet"}),(_=d[y.uid])!=null&&_.arrivalDate?r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx(rr,{className:"h-4 w-4 mr-1 text-blue-500"}),d[y.uid].arrivalDate,d[y.uid].arrivalTime&&r.jsxs("span",{className:"ml-2 text-gray-700",children:[" ",d[y.uid].arrivalTime]})]}):"Date non renseigne"]}):r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pas encore de billet"})}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-gray-500",children:(P=d[y.uid])!=null&&P.airport?r.jsxs("div",{className:"flex items-center",children:[r.jsx(Bd,{className:"h-4 w-4 mr-1 text-blue-500"}),d[y.uid].airport]}):"Non renseign"}),r.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-center",children:p(y.uid,e)==="obtained"&&r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx("div",{children:(L=d[y.uid])!=null&&L.hasOwnTransportation?r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:"Transport personnel"}):r.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Sans transport"})}),r.jsx("div",{children:(M=d[y.uid])!=null&&M.wantGroupTransport?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(uR,{className:"h-4 w-4 mr-1 text-green-600"}),r.jsx("span",{className:"text-xs font-medium text-green-600",children:"Prise en charge commune"})]}):r.jsx("span",{className:"text-xs text-gray-500",children:"Pas de prise en charge"})})]})})]},y.uid)})})]})})]})})]})},Fv=()=>{const t=it(),{currentUser:e}=Te(),[s,n]=b.useState("idle"),[i,a]=b.useState([]),[o,l]=b.useState(!1),[u,d]=b.useState(null),[h,p]=b.useState(""),[x,j]=b.useState(""),[C,R]=b.useState(!1),[S,y]=b.useState(null),[v,_]=b.useState(1),[P]=b.useState(10);b.useEffect(()=>{e!=null&&e.uid||t("/login")},[e,t]);const L=b.useCallback(async()=>{n("loading"),p("");try{const F=await new Xs({accessToken:await wn()}).usersGetCurrentAccount();F&&F.status===200?(n("success"),M()):(n("error"),p("Erreur lors de la connexion  Dropbox"))}catch(O){console.error("Erreur lors de la connexion  Dropbox:",O),n("error"),O instanceof Error?p(`Erreur lors de la connexion  Dropbox: ${O.message}`):p(`Erreur lors de la connexion  Dropbox: ${String(O)}`)}},[]),M=b.useCallback(async()=>{l(!0),p("");try{const V=(await new Xs({accessToken:await wn()}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(U=>U[".tag"]==="file").map(U=>({id:U.id,name:U.name,path_lower:U.path_lower||"",path_display:U.path_display||U.name,size:"size"in U?U.size:void 0,client_modified:"client_modified"in U?U.client_modified:void 0,is_downloadable:!0}));a(V)}catch(O){console.error("Erreur lors de la rcupration des fichiers:",O),O instanceof Error?p(`Erreur lors de la rcupration des fichiers: ${O.message}`):p(`Erreur lors de la rcupration des fichiers: ${String(O)}`)}finally{l(!1)}},[]),N=b.useCallback(async O=>{try{const F=new Xs({accessToken:await wn()});let re="";try{re=(await F.sharingCreateSharedLinkWithSettings({path:O.path_lower})).result.url}catch(U){const X=U;if(X.status===409||X.error&&X.error.shared_link_already_exists){console.log("Lien de partage dj existant, rcupration...");const oe=await F.sharingListSharedLinks({path:O.path_lower,direct_only:!0});if(oe.result.links&&oe.result.links.length>0)re=oe.result.links[0].url;else throw new Error("Impossible de rcuprer le lien existant")}else throw U}const V=re.replace("?dl=0","?raw=1");return d({...O,shared_link:{url:V}}),a(U=>U.map(X=>X.id===O.id?{...X,shared_link:{url:V}}:X)),p(""),V}catch(F){console.error("Erreur lors de la cration du lien de partage:",F),F instanceof Error?p(`Erreur lors de la cration du lien de partage: ${F.message}`):p(`Erreur lors de la cration du lien de partage: ${String(F)}`)}},[]),f=b.useCallback(async O=>{try{await new Xs({accessToken:await wn()}).filesDeleteV2({path:O}),a(re=>re.filter(V=>V.path_lower!==O)),u&&u.path_lower===O&&d(null),y(null)}catch(F){console.error("Erreur lors de la suppression du fichier:",F),F instanceof Error?p(`Erreur lors de la suppression du fichier: ${F.message}`):p(`Erreur lors de la suppression du fichier: ${String(F)}`)}},[u]),w=O=>{if(O===void 0||O===0)return"0 Bytes";const F=1024,re=["Bytes","KB","MB","GB","TB"],V=Math.floor(Math.log(O)/Math.log(F));return parseFloat((O/Math.pow(F,V)).toFixed(2))+" "+re[V]},E=x?i.filter(O=>O.name.toLowerCase().includes(x.toLowerCase())):i,A=v*P,I=A-P,k=E.slice(I,A),B=Math.ceil(E.length/P);b.useEffect(()=>{L()},[L]);const $=b.useCallback(()=>{R(!0),setTimeout(()=>{R(!1)},3e3),M()},[M]),H=O=>_(O);return r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-8",children:r.jsxs("div",{children:[r.jsxs(Y,{to:"/admin",className:"flex items-center text-blue-600 mb-4 hover:text-blue-800 transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Gestionnaire Dropbox"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Grez vos fichiers Dropbox, testez la connectivit et gnrez des liens de partage."})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Statut de connexion"}),r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("div",{className:`w-3 h-3 rounded-full mr-2 ${s==="success"?"bg-green-500":s==="error"?"bg-red-500":s==="loading"?"bg-yellow-500":"bg-gray-400"}`}),r.jsx("span",{className:"text-sm",children:s==="success"?"Connect  Dropbox":s==="error"?"Erreur de connexion":s==="loading"?"Vrification de la connexion...":"Statut inconnu"})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:L,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:s==="loading",children:s==="loading"?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Test en cours..."]}):r.jsxs(r.Fragment,{children:[r.jsx(vs,{className:"w-4 h-4 mr-2"}),"Tester la connexion"]})}),r.jsx("button",{onClick:M,className:"bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-md transition-colors flex items-center",disabled:o,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-gray-600 border-t-transparent rounded-full animate-spin mr-2"}),"Actualisation..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ux,{className:"w-4 h-4 mr-2"}),"Rafrachir la liste"]})})]}),h&&r.jsxs("div",{className:"mt-4 bg-red-50 text-red-700 p-3 rounded-md flex items-start",children:[r.jsx(ls,{className:"w-5 h-5 mr-2 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Erreur"}),r.jsx("p",{className:"text-sm",children:h})]})]}),C&&r.jsxs("div",{className:"mt-4 bg-green-50 text-green-700 p-3 rounded-md flex items-center",children:[r.jsx(vs,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:"Fichier upload avec succs! La liste des fichiers a t actualise."})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Upload un nouveau fichier"}),r.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mb-4",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(v2,{className:"w-5 h-5 text-blue-600 mr-2"}),r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Slectionnez un fichier  uploader sur Dropbox"})]}),r.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Le fichier sera upload directement sur votre compte Dropbox et apparaitra dans la liste ci-dessous."}),r.jsx(Qx,{onSuccess:$,buttonText:"Slectionner un fichier"})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Fichiers disponibles"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-4 w-4 text-gray-400"})}),r.jsx("input",{type:"text",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64",placeholder:"Rechercher un fichier...",value:x,onChange:O=>j(O.target.value)})]})]}),o?r.jsx("div",{className:"flex justify-center items-center py-16",children:r.jsx("div",{className:"w-10 h-10 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):E.length>0?r.jsxs("div",{className:"overflow-x-auto",children:[r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom du fichier"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taille"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de modification"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(O=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(We,{className:"flex-shrink-0 h-5 w-5 text-blue-600 mr-2"}),r.jsx("div",{className:"text-sm text-gray-900 font-medium truncate max-w-xs",children:O.name})]})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:w(O.size)})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-500",children:O.client_modified?new Date(O.client_modified).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>N(O),className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-50 transition-colors",title:"Gnrer un lien de partage",children:r.jsx(Ys,{className:"h-4 w-4"})}),S===O.id?r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("button",{onClick:()=>f(O.path_lower),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Confirmer la suppression",children:r.jsx(vs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>y(null),className:"text-gray-600 hover:text-gray-800 p-1 rounded-full hover:bg-gray-50 transition-colors",title:"Annuler",children:r.jsx(St,{className:"h-4 w-4"})})]}):r.jsx("button",{onClick:()=>y(O.id),className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Supprimer le fichier",children:r.jsx(pi,{className:"h-4 w-4"})})]})})]},O.id))})]}),B>1&&r.jsxs("div",{className:"flex justify-center items-center mt-4 space-x-2",children:[r.jsx("button",{onClick:()=>H(Math.max(1,v-1)),disabled:v===1,className:`px-3 py-1 rounded-md ${v===1?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Prcdent"}),Array.from({length:B},(O,F)=>F+1).map(O=>r.jsx("button",{onClick:()=>H(O),className:`w-8 h-8 rounded-md ${v===O?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:O},O)),r.jsx("button",{onClick:()=>H(Math.min(B,v+1)),disabled:v===B,className:`px-3 py-1 rounded-md ${v===B?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Suivant"})]})]}):r.jsxs("div",{className:"py-16 text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(We,{className:"h-12 w-12 text-gray-400"})}),r.jsx("p",{className:"text-gray-600 mb-2",children:"Aucun fichier trouv"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Uploadez un fichier ou vrifiez vos paramtres de connexion Dropbox."})]}),u&&u.shared_link&&r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"text-md font-medium text-blue-800",children:"Lien de partage gnr"}),r.jsx("button",{onClick:()=>d(null),className:"text-blue-700 hover:text-blue-900",children:r.jsx(St,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx(We,{className:"h-5 w-5 text-blue-600 mr-2"}),r.jsx("p",{className:"text-blue-700",children:u.name})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"text",readOnly:!0,value:u.shared_link.url,className:"flex-grow p-2 border border-blue-300 rounded-l-md bg-white text-sm focus:outline-none"}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(u.shared_link.url),alert("Lien copi dans le presse-papier!")},className:"p-2 bg-blue-600 text-white rounded-r-md hover:bg-blue-700 transition-colors",children:r.jsx(qn,{className:"h-5 w-5"})})]}),r.jsx("p",{className:"mt-2 text-xs text-blue-700",children:"Ce lien peut tre utilis pour ajouter ce fichier comme ressource."})]})]})]})},pD=()=>{const[t,e]=b.useState(""),[s,n]=b.useState(null),[i,a]=b.useState(!0),[o,l]=b.useState(""),[u,d]=b.useState("test1234"),[h,p]=b.useState("idle"),[x,j]=b.useState(""),[C,R]=b.useState([]),[S,y]=b.useState(!1),[v,_]=b.useState(null),[P,L]=b.useState("idle"),[M,N]=b.useState(""),[f,w]=b.useState(""),[E,A]=b.useState("Test EmailJS depuis ESIG-prep-guide"),[I,k]=b.useState("Ceci est un email de test pour vrifier la configuration d'EmailJS."),[B,$]=b.useState("idle"),[H,O]=b.useState(""),[F,re]=b.useState(""),V=async()=>{$("loading"),O(""),re("");try{const J=["https://esig-prep-guide.netlify.app/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token","http://localhost:8888/.netlify/functions/dropbox-token.cjs",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token":"/Esig-prep-guide/.netlify/functions/dropbox-token",window.location.hostname.includes("netlify.app")?"/.netlify/functions/dropbox-token.cjs":"/Esig-prep-guide/.netlify/functions/dropbox-token.cjs"];console.log("Environnement :",{hostname:window.location.hostname,pathname:window.location.pathname,protocol:window.location.protocol,urls:J});let ae=!1,Ee="";for(const Ae of J)try{const De=await fetch(Ae);if(console.log(`Test ${Ae} - Status:`,De.status),De.ok){const ke=De.headers.get("content-type");if(ke&&ke.includes("application/json"))try{const Fe=await De.json();if(console.log(`Test ${Ae} - Data:`,Fe),Fe.access_token){O(Fe.access_token),$("success"),ae=!0;break}else Ee=`Rponse reue de ${Ae} mais pas d'access_token trouv: ${JSON.stringify(Fe)}`}catch(Fe){const Z=(await De.clone().text()).substring(0,100)+"...";Ee=`Erreur de parsing JSON pour ${Ae}: ${Z}`,console.error("Erreur de parsing JSON:",Fe),console.log("Contenu de la rponse (dbut):",Z)}else{const Fe=await De.text(),Gt=Fe.substring(0,150)+"...";Ee=`Rponse reue de ${Ae} mais pas au format JSON (${ke}): ${Gt}`,console.log("Rponse complte:",Fe)}}else{const ke=await De.text(),Fe=ke.length>150?ke.substring(0,150)+"...":ke;Ee=`Erreur HTTP ${De.status} pour ${Ae}: ${Fe}`}}catch(De){const ke=De instanceof Error?De.message:String(De);Ee=`Exception lors de l'appel  ${Ae}: ${ke}`}ae||(re(Ee),$("error"))}catch(J){console.error("Erreur lors du test de rcupration de token:",J);const ae=J instanceof Error?J.message:String(J);re(`Erreur gnrale: ${ae}`),$("error")}},U=async()=>{try{(await Ye(Se(ne,"test"))).empty?(await Ut(Se(ne,"test"),{message:"Connexion  Firestore russie!",timestamp:new Date().toISOString()}),e("Document cr avec succs!")):e("Connexion  Firestore russie!")}catch(J){const ae=J;console.error("Erreur Firestore:",ae),e(`Erreur Firestore: ${ae.message}`)}},X=async()=>{const J="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";p("loading"),j("");try{const Ee=await new Xs({accessToken:J}).usersGetCurrentAccount();p("success"),e(Ae=>Ae+`

Connexion Dropbox russie! Compte: `+Ee.result.name.display_name+" (Email: "+Ee.result.email+")"),await oe()}catch(ae){console.error("Erreur de connexion Dropbox:",ae),p("error"),ae instanceof Error?(j(`Erreur de connexion Dropbox: ${ae.message}`),e(Ee=>Ee+`

Erreur de connexion Dropbox: `+ae.message)):(j(`Erreur de connexion Dropbox: ${String(ae)}`),e(Ee=>Ee+`

Erreur de connexion Dropbox: `+String(ae)))}},oe=async()=>{const J="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";y(!0),e(ae=>ae+`

Chargement des fichiers Dropbox...`);try{const De=(await new Xs({accessToken:J}).filesListFolder({path:"",include_media_info:!0,include_deleted:!1,include_has_explicit_shared_members:!1})).result.entries.filter(ke=>ke[".tag"]==="file").map(ke=>({id:ke.id,name:ke.name,path_lower:ke.path_lower||"",path_display:ke.path_display||ke.name,size:"size"in ke?ke.size:void 0,client_modified:"client_modified"in ke?ke.client_modified:void 0,is_downloadable:!0}));R(De),e(ke=>ke+`

${De.length} fichiers trouvs dans Dropbox.`)}catch(ae){console.error("Erreur lors de la rcupration des fichiers:",ae),ae instanceof Error?e(Ee=>Ee+`

Erreur lors de la rcupration des fichiers: `+ae.message):e(Ee=>Ee+`

Erreur lors de la rcupration des fichiers: `+String(ae))}finally{y(!1)}},me=async J=>{const ae="sl.u.AFu43uZuukV1WEKitYkj0F1YTGKLKfCUU4FQvQ08FpMUeHeaI6YmkLFWBsijnpoCy1U59DhLL9HIY6lt7eXpjJfryR2S_7q2V9GoL-doM-0V-pzAwiawPVCT0KEALbzl8HLr6zKWC2ojPXnLC1YZezG0HdZdVgsKWI_9pKtPU9aUUbdIJ-xA69MNBOaAiVE0iLaPvnPHFg4fdJTd5qqBipj-pkhC64mggi9V3J_5EeHG7PgtOmSCC0BGg1oUdPUaoFSu0a1jSroOCbb-A5m8uZrX_Husd5RO1dmNyuDZDH_7cr3ji8amNlc6nlCf-hrvPCV0ksP3sgQ7D6aX4dM9PP2JxDanVynF35d5rwETjLvUYgn1GEWWL6Z0E68O4Jq_BnwBV0a_i1zr1z-LQpDIoQDux0QoKF5IbwE4PuEBrxxox1rGL4C0XSOjNwwZA_jF4LVPecqgiWIg50-iDzKtzy2EPDYICxN-Z9R-7OPK5USXUy7M_Gblwj9129HMzWvhsyud9Da_89fN9f2ZSI8dbqhgc2viYdY-uR5gvY3K35xgdivsLE1BqIJuOQ-rFD6B41oXGSPF-vmT-ZS6q6CJI7q9ueqezC_WG-CZL25GSUE9W9coaPW7N0pYda1A40jKousUWDUUiYR9Nk8MqDyJF-YiakXEoyahDfcureupoG3Uh_ehdXubuHQNybZtfu81gtKg2rc2efaf7q4YKat02J6-Y-WI51N1amVVtc_3ZDn3t5YcCx1X1wK2aqIsNdBW8x1Nw423Vj2R2IoFDN_MP_IU4JqN_6RKCvj_833vAq0PuhRDevIShEMHBpNKClulXjHv3OzuCqWI0yLRSSFRdh77csVTH8DLgC2JkU48hYxVBf0-uS2DgP3nM5AR5Tkb5QYnknMFHcVgRTjk5H8Ap31Lud6EFpb-7UtwVdx1TpfXcQDb82mLTX8-WqMVbaLQB0rCZ3cembmnqYcDqCzaMW3WBiaBqqXiwuXm9Ofo7DJyizbqN8YcpNKcqRquO6oE5h6IJavV5t19-15bjIAUT9OiSELpQLGJM67qOeFmkWCylcxxybIqxJdH8s9Lu85ASazVxlSRhgPQwP_GxFMiXQ2NpMjTWjpnWJb6D09EjqT9luQ3b9PliSRTZWuCDVkM3uTs4SXbano3SOZBLDRBjppK2OB1s6pn2b9EeWvMN9WOPlyZ3Ckr-fIdwBAAnL8udx5RsOBTJa9_JBeCNCr_Y92UrISeNtgBCbo5o_FvALqBN2rwLYhs7he599ORVSHKh-dgrcUFrRQHx9lN4j2le-hL3yi_Ou364ykOHs6J3SaM2QQi2akn-jtFbfTmUr971J268FcVqvCFKj5cDBT0aM0HgxsHRrWRhX-QyHIOgqcPUwY_cZe35KX-oDOVMc6b_aWry5VIqTq9BWH_YdgOchbhBoQzACBq1q1XU9q0FzkFbaS76R7sajDURFJrTAODIOs";e(Ee=>Ee+`

Cration d'un lien de partage pour ${J.name}...`);try{const De=(await new Xs({accessToken:ae}).sharingCreateSharedLinkWithSettings({path:J.path_lower})).result.url.replace("?dl=0","?raw=1");return e(ke=>ke+`

Lien de partage cr avec succs: ${De}`),_({...J,shared_link:{url:De}}),De}catch(Ee){console.error("Erreur lors de la cration du lien de partage:",Ee),Ee instanceof Error?e(Ae=>Ae+`

Erreur lors de la cration du lien de partage: `+Ee.message):e(Ae=>Ae+`

Erreur lors de la cration du lien de partage: `+String(Ee))}},_e=async()=>{try{if(o)try{const J=await Wj(It,o,u);n(J.user),e(ae=>ae+`

Cration de l'utilisateur russie! UID: ${J.user.uid}`)}catch(J){console.log("Erreur lors de la cration, tentative de connexion...",J);try{const ae=await Hj(It,o,u);n(ae.user),e(Ee=>Ee+`

Connexion russie! UID: ${ae.user.uid}`)}catch(ae){const Ee=ae;console.error("Erreur d'authentification:",Ee),e(Ae=>Ae+`

Erreur d'authentification: ${Ee.message}`)}}else e(J=>J+`

Erreur: Veuillez entrer une adresse email.`)}catch(J){console.error("Erreur inattendue:",J),J instanceof Error?e(ae=>ae+`

Erreur inattendue: ${J.message}`):e(ae=>ae+`

Erreur inattendue: ${String(J)}`)}},ee=async()=>{if(!f){N("Veuillez entrer une adresse email de destination");return}L("loading"),N(""),e(J=>J+`

Envoi d'email en cours...`);try{const J={to_email:f,to_name:"Utilisateur de test",subject:E,message:I,app_name:"ESIG-prep-guide",faq_url:window.location.origin+"/faq"},ae=await Hx.send(Na.SERVICE_ID,Na.TEMPLATE_ID,J,Na.PUBLIC_KEY);console.log("Email envoy avec succs!",ae),L("success"),e(Ee=>Ee+`

Email envoy avec succs! ID: ${ae.status}`)}catch(J){console.error("Erreur lors de l'envoi d'email:",J),L("error"),J instanceof Error?(N(`Erreur lors de l'envoi d'email: ${J.message}`),e(ae=>ae+`

Erreur lors de l'envoi d'email: ${J.message}`)):(N(`Erreur lors de l'envoi d'email: ${String(J)}`),e(ae=>ae+`

Erreur lors de l'envoi d'email: ${String(J)}`))}};return b.useEffect(()=>{const J=It.onAuthStateChanged(ae=>{n(ae),ae&&l(ae.email||""),a(!1)});return()=>J()},[]),i?r.jsx("div",{className:"p-4",children:"Chargement..."}):r.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Test d'intgration Firebase"}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Statut de connexion"}),r.jsxs("p",{children:["Utilisateur: ",s?s.email:"Non connect"]}),r.jsxs("p",{children:["UID: ",(s==null?void 0:s.uid)||"N/A"]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Firestore"}),r.jsx("button",{onClick:U,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",children:"Tester Firestore"}),r.jsx("button",{onClick:async()=>{e("Initialisation en cours...");try{await Ut(Se(ne,"guideSections"),{title:"Prparer son dossier Campus France",content:"Voici comment prparer...",phase:"pre-cps",order:1}),await Ut(Se(ne,"guideSections"),{title:"Demander son visa",content:"Procdure dtaille...",phase:"post-cps",order:2}),await Ut(Se(ne,"resources"),{title:"Formulaire Visa",description:"Document officiel pour la demande de visa.",phase:"post-cps",category:"visa",fileUrl:"https://...",createdAt:new Date().toISOString()}),await Ut(Se(ne,"faq"),{question:"Comment obtenir un logement ?",answer:"Contactez le service logement de l'ESIGELEC...",phase:"arrive",createdAt:new Date().toISOString()}),e("Base initialise avec succs !")}catch(J){e("Erreur lors de l'initialisation : "+J.message)}},className:"bg-purple-600 hover:bg-purple-800 text-white font-bold py-2 px-4 rounded",children:"Initialiser la base"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'authentification"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-2",children:"Email:"}),r.jsx("input",{type:"email",value:o,onChange:J=>l(J.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-2",children:"Mot de passe (test):"}),r.jsx("input",{type:"password",value:u,onChange:J=>d(J.target.value),className:"border p-2 w-full max-w-md"})]}),r.jsx("button",{onClick:_e,className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",disabled:!o||!u,children:s?"Se connecter":"Crer un compte"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test d'envoi d'email"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-2",children:"Adresse email de destination:"}),r.jsx("input",{type:"email",value:f,onChange:J=>w(J.target.value),className:"border p-2 w-full max-w-md",placeholder:"email@example.com"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-2",children:"Sujet:"}),r.jsx("input",{type:"text",value:E,onChange:J=>A(J.target.value),className:"border p-2 w-full max-w-md"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-2",children:"Message:"}),r.jsx("textarea",{value:I,onChange:J=>k(J.target.value),className:"border p-2 w-full max-w-md"})]}),r.jsx("button",{onClick:ee,className:"bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded",disabled:!f,children:"Envoyer l'email"}),P==="error"&&r.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:[" ",M]}),P==="success"&&r.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:" Email envoy avec succs!"})]}),r.jsxs("div",{className:"mt-8 p-4 bg-gray-100 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Rsultats des tests"}),r.jsx("pre",{className:"bg-white p-4 rounded overflow-auto",children:t||"Aucun test effectu"})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Test Dropbox"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"1. Tester l'endpoint Netlify Function pour Dropbox Token"}),r.jsx("button",{onClick:V,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-4",disabled:B==="loading",children:B==="loading"?"Chargement...":"Tester l'endpoint Dropbox Token"}),B==="error"&&r.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:[r.jsx("h4",{className:"font-semibold mb-1",children:" Erreur lors de la rcupration du token"}),r.jsx("p",{className:"text-sm",children:F})]}),B==="success"&&r.jsxs("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:[r.jsx("h4",{className:"font-semibold mb-1",children:" Access token rcupr avec succs !"}),r.jsxs("p",{className:"text-sm break-all",children:["Token: ",H.substring(0,20),"...",H.substring(H.length-10)]})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"2. Tester la connectivit Dropbox"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Vrifiez d'abord si vos identifiants Dropbox sont correctement configurs et si la connexion fonctionne."}),r.jsx("button",{onClick:X,className:`flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors ${h==="loading"?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,disabled:h==="loading",children:h==="loading"?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Vrification en cours..."]}):"Tester la connectivit Dropbox"}),h==="success"&&r.jsx("div",{className:"mt-3 p-3 bg-green-50 text-green-800 rounded-md border border-green-200",children:" Connexion Dropbox tablie avec succs!"}),h==="error"&&r.jsxs("div",{className:"mt-3 p-3 bg-red-50 text-red-800 rounded-md border border-red-200",children:[" ",x]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[r.jsx("h3",{className:"font-medium mb-2",children:"2. Explorer les fichiers Dropbox"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Afficher la liste des fichiers disponibles dans votre compte Dropbox et crer des liens partageables."}),r.jsx("button",{onClick:oe,className:"flex items-center justify-center py-2 px-4 rounded-md font-medium text-white transition-colors bg-blue-600 hover:bg-blue-700 mb-4",disabled:S||h!=="success",children:S?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Chargement des fichiers..."]}):"Lister les fichiers Dropbox"}),C.length>0&&r.jsxs("div",{className:"border rounded-md overflow-hidden",children:[r.jsxs("div",{className:"bg-gray-100 px-4 py-2 font-medium text-sm text-gray-700 border-b",children:["Fichiers disponibles dans Dropbox (",C.length,")"]}),r.jsx("div",{className:"divide-y max-h-60 overflow-auto",children:C.map(J=>r.jsxs("div",{className:`px-4 py-3 flex items-center justify-between hover:bg-blue-50 cursor-pointer ${(v==null?void 0:v.id)===J.id?"bg-blue-50":""}`,onClick:()=>_(J),children:[r.jsxs("div",{className:"flex-1 mr-4 truncate",children:[r.jsx("div",{className:"font-medium text-gray-800",children:J.name}),r.jsxs("div",{className:"text-xs text-gray-500",children:[J.size?`${Math.round(J.size/1024)} Ko`:"",J.client_modified?`  Modifi le ${new Date(J.client_modified).toLocaleDateString()}`:""]})]}),r.jsx("button",{className:"px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-md text-xs",onClick:ae=>{ae.stopPropagation(),me(J)},children:"Crer un lien"})]},J.id))})]}),v&&r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-md border border-blue-200",children:[r.jsxs("h4",{className:"font-medium text-blue-900 mb-2",children:["Fichier slectionn : ",v.name]}),v.shared_link?r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"text",readOnly:!0,value:v.shared_link.url,className:"flex-1 py-2 px-3 bg-white border rounded-l-md focus:outline-none text-sm"}),r.jsx("button",{className:"bg-blue-600 text-white py-2 px-3 rounded-r-md text-sm",onClick:()=>{navigator.clipboard.writeText(v.shared_link.url),e(J=>J+`

Lien copi dans le presse-papier!`)},children:"Copier"})]}):r.jsx("button",{className:"w-full py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm font-medium",onClick:()=>me(v),children:"Gnrer un lien partageable"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium mb-2",children:"3. Tester l'upload de fichiers"}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Uploadez un nouveau fichier vers votre compte Dropbox."}),r.jsx(Qx,{buttonText:"Uploader un fichier test",onSuccess:J=>{e(ae=>ae+`

Fichier upload avec succs! URL: ${J}`),oe()}})]})]})]})},Ov=()=>{const[t,e]=b.useState([]),[s,n]=b.useState(!0);return b.useEffect(()=>{(async()=>{n(!0);const a=kt(Se(ne,"feedback"),Hn("createdAt","desc")),l=(await Ye(a)).docs.map(u=>({id:u.id,...u.data()}));e(l),n(!1)})()},[]),r.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:r.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow p-3 md:p-4 border border-blue-100 relative",children:[r.jsxs(Y,{to:"/admin",className:"absolute left-3 top-3 flex items-center text-blue-700 hover:text-blue-900 font-medium text-xs",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"})," Retour admin"]}),r.jsx("h1",{className:"text-xl md:text-2xl font-bold text-blue-900 mb-4 text-center mt-4",children:"Feedbacks utilisateurs"}),s?r.jsx("div",{className:"text-center py-8 text-blue-700 font-semibold text-sm",children:"Chargement..."}):t.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Aucun feedback pour le moment."}):r.jsx("div",{className:"flex flex-col gap-2",children:t.map(i=>r.jsxs("div",{className:"flex flex-col border border-blue-100 bg-blue-50/60 rounded-md px-3 py-2 hover:bg-blue-100 transition group",title:i.message,children:[r.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[r.jsx("span",{className:"text-xs text-gray-500",children:i.createdAt&&new Date(i.createdAt.seconds*1e3).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}),r.jsx("span",{className:"text-xs",children:i.email&&i.email.trim()!==""?r.jsxs("a",{href:`mailto:${i.email}`,className:"flex items-center text-blue-700 hover:underline",children:[r.jsx(zr,{className:"w-3 h-3 mr-1"})," ",i.email]}):r.jsx("span",{className:"italic text-gray-500",children:"Utilisateur Anonyme"})})]}),r.jsx("div",{className:"text-xs text-gray-900 font-medium max-w-full whitespace-pre-line",children:i.message})]},i.id))})]})})},qv=()=>{var mt,$e,Ct,Qe;const t=it(),{currentUser:e}=Te(),[s,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(""),[u,d]=b.useState(!1),[h,p]=b.useState(null),[x,j]=b.useState(""),[C,R]=b.useState(!1),[S,y]=b.useState(!1),[v,_]=b.useState(!1),[P,L]=b.useState(""),[M,N]=b.useState(null),[f,w]=b.useState(!1),[E,A]=b.useState([]),[I,k]=b.useState(!1),[B,$]=b.useState(""),[H,O]=b.useState("upcoming");b.useEffect(()=>{F()},[]);const F=async()=>{a(!0),j("");try{const W=Se(ne,"webinars"),fe=kt(W),Ie=await Ye(fe),Me=[];Ie.forEach(Ke=>{var Ze;const ye=Ke.data(),de={id:Ke.id,title:ye.title,description:ye.description,date:((Ze=ye.date)==null?void 0:Ze.toDate())||new Date,duration:ye.duration,maxParticipants:ye.maxParticipants,currentParticipants:ye.currentParticipants,category:ye.category,customCategory:ye.customCategory,level:ye.level,imageUrl:ye.imageUrl,speaker:ye.speaker,meetingLink:ye.meetingLink,isLive:ye.isLive,isUpcoming:ye.isUpcoming,isCompleted:ye.isCompleted,tags:ye.tags||[],createdBy:ye.createdBy,createdAt:ye.createdAt,updatedAt:ye.updatedAt};Me.push(de)}),n(Me),a(!1)}catch(W){console.error("Erreur lors de la rcupration des webinaires:",W),j("Erreur lors de la rcupration des webinaires. Veuillez ressayer."),a(!1)}},re=s.filter(W=>!(H==="upcoming"&&!W.isUpcoming||H==="live"&&!W.isLive||H==="completed"&&!W.isCompleted||o&&!W.title.toLowerCase().includes(o.toLowerCase())&&!W.description.toLowerCase().includes(o.toLowerCase())&&!W.tags.some(fe=>fe.toLowerCase().includes(o.toLowerCase())))),V=()=>{J({title:"",description:"",date:new Date,duration:60,maxParticipants:50,currentParticipants:0,category:"",level:"beginner",speaker:{name:"",title:"",avatar:""},meetingLink:"",isLive:!1,isUpcoming:!0,isCompleted:!1,tags:[]}),p(null),d(!0)};b.useEffect(()=>{h&&u&&J({title:h.title,description:h.description,date:h.date,duration:h.duration,maxParticipants:h.maxParticipants,currentParticipants:h.currentParticipants,category:h.category,customCategory:h.customCategory,level:h.level,imageUrl:h.imageUrl,speaker:{name:h.speaker.name,title:h.speaker.title,avatar:h.speaker.avatar||""},meetingLink:h.meetingLink||"",isLive:h.isLive,isUpcoming:h.isUpcoming,isCompleted:h.isCompleted,tags:h.tags||[]})},[h,u]);const U=W=>{J({title:W.title,description:W.description,date:W.date,duration:W.duration,maxParticipants:W.maxParticipants,currentParticipants:W.currentParticipants,category:W.category,customCategory:W.customCategory,level:W.level,imageUrl:W.imageUrl,speaker:{name:W.speaker.name,title:W.speaker.title,avatar:W.speaker.avatar},meetingLink:W.meetingLink,isLive:W.isLive,isUpcoming:W.isUpcoming,isCompleted:W.isCompleted,tags:W.tags}),p(W),d(!0)},X=async W=>{N(W),L("tes-vous sr de vouloir supprimer ce webinaire ? Cette action est irrversible."),R(!0)},oe=async()=>{if(M)try{j("");const W=s.find(fe=>fe.id===M);await Rn(be(ne,"webinars",M)),n(fe=>fe.filter(Ie=>Ie.id!==M)),W&&await Pt({type:"Suppression",target:"Webinaire",targetId:M,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:W.title,action:"Suppression du webinaire",date:W.date}}),L("Webinaire supprim avec succs."),y(!0),N(null),R(!1)}catch(W){console.error("Erreur lors de la suppression du webinaire:",W),j("Erreur lors de la suppression du webinaire. Veuillez ressayer."),L("Erreur lors de la suppression du webinaire. Veuillez ressayer."),_(!0),N(null),R(!1)}},me=async W=>{var fe;try{if(!e){L("Vous devez tre connect pour effectuer cette action"),_(!0);return}const Me={...Object.entries(W).reduce((Ke,[ye,de])=>(de!==void 0&&(Ke[ye]=de),Ke),{}),date:Xe.fromDate(W.date),updatedAt:is()};if(h){const Ke=be(ne,"webinars",h.id);await ts(Ke,Me);const ye=s.map(de=>de.id===h.id?{...de,...W}:de);n(ye),await Pt({type:"Modification",target:"Webinaire",targetId:h.id,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:W.title||h.title,action:"Mise  jour du webinaire",changes:Object.keys(Me).filter(de=>de!=="updatedAt")}}),L("Webinaire mis  jour avec succs"),y(!0)}else{const Ke={...Me,createdAt:is(),createdBy:e.uid,currentParticipants:0},ye=await Ut(Se(ne,"webinars"),Ke),de={id:ye.id,...W,currentParticipants:0,createdBy:e.uid};n([...s,de]),await Pt({type:"Ajout",target:"Webinaire",targetId:ye.id,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:de.title,action:"Cration du webinaire",date:de.date,speaker:(fe=de.speaker)==null?void 0:fe.name}}),L("Webinaire cr avec succs"),y(!0)}d(!1),p(null)}catch(Ie){console.error("Erreur lors de la sauvegarde du webinaire:",Ie),L("Erreur lors de la sauvegarde du webinaire. Veuillez ressayer."),_(!0)}},_e=W=>{t(`/webinars/${W}`)},[ee,J]=b.useState({title:"",description:"",date:new Date,duration:60,maxParticipants:50,currentParticipants:0,category:"",level:"beginner",speaker:{name:"",title:"",avatar:""},meetingLink:"",isLive:!1,isUpcoming:!0,isCompleted:!1,tags:[]}),ae=W=>{const{name:fe,value:Ie}=W.target;J(fe==="category"&&Ie!=="autre"?{...ee,[fe]:Ie,customCategory:""}:{...ee,[fe]:Ie})},Ee=W=>{J({...ee,date:new Date(W.target.value)})},Ae=W=>{var Ke,ye,de;const fe=W.target.name,Ie=W.target.value;let Me="";fe==="speakerName"?Me="name":fe==="speakerTitle"?Me="title":fe==="speakerAvatar"&&(Me="avatar"),J({...ee,speaker:{name:((Ke=ee.speaker)==null?void 0:Ke.name)||"",title:((ye=ee.speaker)==null?void 0:ye.title)||"",avatar:(de=ee.speaker)==null?void 0:de.avatar,[Me]:Ie}})},De=W=>{const{name:fe,checked:Ie}=W.target;fe==="isLive"||fe==="isUpcoming"||fe==="isCompleted"?Ie?J({...ee,isLive:fe==="isLive",isUpcoming:fe==="isUpcoming",isCompleted:fe==="isCompleted"}):!ee.isLive&&!ee.isUpcoming&&!ee.isCompleted||fe==="isUpcoming"&&ee.isUpcoming?J({...ee,isUpcoming:!0,isLive:!1,isCompleted:!1}):J({...ee,[fe]:Ie}):J({...ee,[fe]:Ie})},ke=W=>{const fe=W.target.value.split(",").map(Ie=>Ie.trim());J({...ee,tags:fe})},Fe=W=>{const fe=W.getFullYear(),Ie=String(W.getMonth()+1).padStart(2,"0"),Me=String(W.getDate()).padStart(2,"0"),Ke=String(W.getHours()).padStart(2,"0"),ye=String(W.getMinutes()).padStart(2,"0");return`${fe}-${Ie}-${Me}T${Ke}:${ye}`},Gt=async(W,fe)=>{k(!0),$(fe),A([]),w(!0);try{await Pt({type:"Consultation",target:"Webinaire",targetId:W,user:typeof e=="object"&&(e!=null&&e.displayName)?e.displayName:void 0,details:{title:fe,action:"Consultation des inscriptions",timestamp:new Date().toISOString()}});const Ie=kt(Se(ne,"webinarRegistrations"),or("webinarId","==",W)),Me=await Ye(Ie),Ke=[];Me.forEach(ye=>{var Ze,_r;const de=ye.data();Ke.push({id:ye.id,webinarId:de.webinarId,webinarTitle:de.webinarTitle,userId:de.userId,userName:de.userName,userEmail:de.userEmail,userPhone:de.userPhone||"Non renseign",question:de.question||"Aucune question",receiveUpdates:de.receiveUpdates,status:de.status,registeredAt:((Ze=de.registeredAt)==null?void 0:Ze.toDate())||new Date,webinarDate:((_r=de.webinarDate)==null?void 0:_r.toDate())||new Date})}),Ke.sort((ye,de)=>de.registeredAt.getTime()-ye.registeredAt.getTime()),A(Ke)}catch(Ie){console.error("Erreur lors de la rcupration des inscriptions:",Ie),L("Erreur lors de la rcupration des inscriptions. Veuillez ressayer."),_(!0)}finally{k(!1)}},Z=()=>{if(E.length===0)return;const Ie=[["Nom","Email","Tlphone","Question","Statut","Date d'inscription","Recevoir des mises  jour"].join(","),...E.map(de=>{const Ze=new Date(de.registeredAt).toLocaleString("fr-FR");return[`"${de.userName.replace(/"/g,'""')}"`,`"${de.userEmail.replace(/"/g,'""')}"`,`"${de.userPhone.replace(/"/g,'""')}"`,`"${de.question.replace(/"/g,'""')}"`,`"${de.status}"`,`"${Ze}"`,de.receiveUpdates?"Oui":"Non"].join(",")})].join(`
`),Me=new Blob([Ie],{type:"text/csv;charset=utf-8;"}),Ke=URL.createObjectURL(Me),ye=document.createElement("a");ye.setAttribute("href",Ke),ye.setAttribute("download",`inscriptions_${B.replace(/\s+/g,"_")}_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mb-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour"]}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Gestion des Webinaires"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Crez, modifiez et supprimez les webinaires proposs aux tudiants"})]}),r.jsxs("div",{className:"mt-4 md:mt-0 flex items-center space-x-3",children:[r.jsxs("button",{onClick:V,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(as,{className:"w-4 h-4 mr-2"}),"Crer un webinaire"]}),r.jsxs(Y,{to:e!=null&&e.isAdmin?"/admin/workshop-proposals":"/editor/workshop-proposals",className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(rr,{className:"w-4 h-4 mr-2"}),"Propositions d'ateliers"]})]})]})]}),r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs("button",{onClick:()=>O("upcoming"),className:`px-3 py-1.5 rounded-full flex items-center ${H==="upcoming"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[r.jsx(rr,{className:"w-4 h-4 mr-1"})," venir"]}),r.jsxs("button",{onClick:()=>O("live"),className:`px-3 py-1.5 rounded-full flex items-center ${H==="live"?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[r.jsx(Os,{className:"w-4 h-4 mr-1"}),"En direct"]}),r.jsxs("button",{onClick:()=>O("completed"),className:`px-3 py-1.5 rounded-full flex items-center ${H==="completed"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[r.jsx(vs,{className:"w-4 h-4 mr-1"}),"Termins"]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Rechercher un webinaire...",value:o,onChange:W=>l(W.target.value),className:"pl-10 pr-4 py-2 rounded-md border border-gray-300 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx(Xr,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"})]})]}),x&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ps,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:x})]})}),i?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):re.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[r.jsx(Os,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Aucun webinaire trouv"}),r.jsx("p",{className:"text-gray-500 mb-4",children:o?"Aucun rsultat pour votre recherche":"Aucun webinaire n'est disponible dans cette catgorie"}),r.jsxs("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors inline-flex items-center",children:[r.jsx(as,{className:"w-4 h-4 mr-2"}),"Crer un webinaire"]})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:re.map(W=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"h-40 bg-gray-200 relative",children:[W.imageUrl?r.jsx("img",{src:W.imageUrl,alt:W.title,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-blue-50",children:r.jsx(Os,{className:"w-16 h-16 text-blue-300"})}),r.jsxs("div",{className:"absolute top-2 right-2",children:[W.isLive&&r.jsxs("span",{className:"bg-red-600 text-white px-2 py-1 rounded-full text-xs font-medium inline-flex items-center",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-white mr-1 animate-pulse"}),"En direct"]}),W.isUpcoming&&!W.isLive&&r.jsx("span",{className:"bg-blue-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:" venir"}),W.isCompleted&&r.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded-full text-xs font-medium",children:"Termin"})]})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 line-clamp-2",children:W.title}),r.jsxs("div",{className:"flex items-start mb-3",children:[r.jsx(rr,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[W.date.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),r.jsx("span",{className:"mx-1",children:""}),W.date.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})]})]}),r.jsxs("div",{className:"flex items-start mb-3",children:[r.jsx(ct,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[W.currentParticipants,"/",W.maxParticipants," participants"]})]}),r.jsxs("div",{className:"flex items-start mb-4",children:[r.jsx(FR,{className:"w-4 h-4 text-gray-500 mt-0.5 mr-2 flex-shrink-0"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[W.tags.slice(0,3).map((fe,Ie)=>r.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded",children:fe},Ie)),W.tags.length>3&&r.jsxs("span",{className:"text-xs text-gray-500",children:["+",W.tags.length-3]})]})]}),r.jsxs("div",{className:"flex border-t pt-3 mt-2",children:[r.jsxs("button",{onClick:()=>_e(W.id),className:"flex-1 flex items-center justify-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(f2,{className:"w-4 h-4 mr-1"}),"Voir"]}),r.jsxs("button",{onClick:()=>U(W),className:"flex-1 flex items-center justify-center text-yellow-600 hover:text-yellow-800 transition-colors",children:[r.jsx(Br,{className:"w-4 h-4 mr-1"}),"Modifier"]}),r.jsxs("button",{onClick:()=>X(W.id),className:"flex-1 flex items-center justify-center text-red-600 hover:text-red-800 transition-colors",children:[r.jsx(pi,{className:"w-4 h-4 mr-1"}),"Supprimer"]}),r.jsxs("button",{onClick:()=>Gt(W.id,W.title),className:"flex-1 flex items-center justify-center text-green-600 hover:text-green-800 transition-colors",children:[r.jsx(fi,{className:"w-4 h-4 mr-1"}),"Voir les inscriptions"]})]})]})]},W.id))}),u&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:h?"Modifier le webinaire":"Crer un nouveau webinaire"}),r.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx(ps,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:h?"Modifiez les informations du webinaire existant.":"Veuillez remplir tous les champs obligatoires pour crer un nouveau webinaire."}),r.jsx("div",{className:"bg-blue-50 text-blue-800 p-3 rounded-md",children:r.jsx("p",{className:"text-sm font-medium",children:"Note: Cette interface est un prototype. La fonctionnalit de sauvegarde dans Firestore sera implmente ultrieurement."})})]}),r.jsxs("form",{className:"space-y-6",onSubmit:W=>{W.preventDefault(),me(h?{...h,...ee}:{...ee})},children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"col-span-full",children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Titre du webinaire ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"title",name:"title",value:ee.title,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"col-span-full",children:[r.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{id:"description",name:"description",rows:4,value:ee.description,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:["Date et heure ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"datetime-local",id:"date",name:"date",value:Fe(ee.date||new Date),onChange:Ee,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"duration",className:"block text-sm font-medium text-gray-700",children:["Dure (minutes) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"duration",name:"duration",min:"15",step:"5",value:ee.duration,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"maxParticipants",className:"block text-sm font-medium text-gray-700",children:["Nombre maximum de participants ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",id:"maxParticipants",name:"maxParticipants",min:"1",value:ee.maxParticipants,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"currentParticipants",className:"block text-sm font-medium text-gray-700",children:"Participants actuels"}),r.jsx("input",{type:"number",id:"currentParticipants",name:"currentParticipants",min:"0",value:ee.currentParticipants,onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:["Catgorie ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"category",name:"category",value:ee.category,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Slectionnez une catgorie"}),r.jsx("option",{value:"workshop",children:"Atelier"}),r.jsx("option",{value:"coaching",children:"Coaching"}),r.jsx("option",{value:"info",children:"Information"}),r.jsx("option",{value:"campus-france",children:"Campus France"}),r.jsx("option",{value:"acadmique",children:"Acadmique"}),r.jsx("option",{value:"installation",children:"Installation"}),r.jsx("option",{value:"autre",children:"Autre"})]})]}),ee.category==="autre"&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"customCategory",className:"block text-sm font-medium text-gray-700",children:["Prcisez la catgorie ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"customCategory",name:"customCategory",value:ee.customCategory||"",onChange:ae,required:!0,placeholder:"Entrez votre catgorie personnalise",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700",children:["Niveau ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{id:"level",name:"level",value:ee.level,onChange:ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Slectionnez un niveau"}),r.jsx("option",{value:"beginner",children:"Dbutant"}),r.jsx("option",{value:"intermediate",children:"Intermdiaire"}),r.jsx("option",{value:"advanced",children:"Avanc"})]})]}),r.jsxs("div",{className:"col-span-full",children:[r.jsx("label",{htmlFor:"imageUrl",className:"block text-sm font-medium text-gray-700",children:"URL de l'image"}),r.jsx("input",{type:"text",id:"imageUrl",name:"imageUrl",value:ee.imageUrl||"",onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),ee.imageUrl&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:ee.imageUrl,alt:"Aperu",className:"h-24 w-auto object-cover rounded",onError:W=>{W.currentTarget.src="https://via.placeholder.com/400x200?text=Image+non+disponible"}})})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"speakerName",className:"block text-sm font-medium text-gray-700",children:["Nom de l'intervenant ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"speakerName",name:"speakerName",value:((mt=ee.speaker)==null?void 0:mt.name)||"",onChange:Ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"speakerTitle",className:"block text-sm font-medium text-gray-700",children:["Titre de l'intervenant ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",id:"speakerTitle",name:"speakerTitle",value:(($e=ee.speaker)==null?void 0:$e.title)||"",onChange:Ae,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"speakerAvatar",className:"block text-sm font-medium text-gray-700",children:"Avatar de l'intervenant (URL)"}),r.jsx("input",{type:"text",id:"speakerAvatar",name:"speakerAvatar",value:((Ct=ee.speaker)==null?void 0:Ct.avatar)||"",onChange:Ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),((Qe=ee.speaker)==null?void 0:Qe.avatar)&&r.jsx("div",{className:"mt-2",children:r.jsx("img",{src:ee.speaker.avatar,alt:"Avatar",className:"h-10 w-10 rounded-full object-cover",onError:W=>{W.currentTarget.src="https://via.placeholder.com/100?text=Avatar"}})})]}),r.jsxs("div",{className:"col-span-full",children:[r.jsx("label",{htmlFor:"meetingLink",className:"block text-sm font-medium text-gray-700",children:"Lien de la runion"}),r.jsx("input",{type:"url",id:"meetingLink",name:"meetingLink",value:ee.meetingLink||"",onChange:ae,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("div",{className:"col-span-full",children:r.jsxs("fieldset",{children:[r.jsx("legend",{className:"text-sm font-medium text-gray-700",children:"Statut"}),r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"isLive",name:"isLive",type:"checkbox",checked:ee.isLive,onChange:De,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"isLive",className:"ml-2 block text-sm text-gray-700",children:"En direct"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"isUpcoming",name:"isUpcoming",type:"checkbox",checked:ee.isUpcoming,onChange:De,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"isUpcoming",className:"ml-2 block text-sm text-gray-700",children:" venir"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"isCompleted",name:"isCompleted",type:"checkbox",checked:ee.isCompleted,onChange:De,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"isCompleted",className:"ml-2 block text-sm text-gray-700",children:"Termin"})]})]})]})}),r.jsxs("div",{className:"col-span-full",children:[r.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700",children:"Tags (spars par des virgules)"}),r.jsx("input",{type:"text",id:"tags",name:"tags",value:(ee.tags||[]).join(", "),onChange:ke,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(ee.tags||[]).map((W,fe)=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:W},fe))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-5 border-t",children:[r.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Annuler"}),r.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h?"Enregistrer les modifications":"Crer le webinaire"})]})]})]})})}),C&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmation"}),r.jsx("p",{className:"text-gray-600 mb-6",children:P}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Annuler"}),r.jsx("button",{onClick:oe,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Supprimer"})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(vs,{className:"text-green-500 mr-2",size:24}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Succs"})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:P}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Fermer"})})]})}),v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(ps,{className:"text-red-500 mr-2",size:24}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Erreur"})]}),r.jsx("p",{className:"text-gray-600 mb-6",children:P}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Fermer"})})]})}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Inscriptions pour : ",B]}),r.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-500",children:r.jsx(ps,{className:"w-6 h-6"})})]}),I?r.jsxs("div",{className:"text-center py-10",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Chargement des inscriptions..."})]}):E.length>0?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[r.jsxs("p",{className:"text-sm text-gray-600",children:[E.length," inscription(s) au total"]}),r.jsxs("button",{onClick:Z,className:"px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 inline-flex items-center text-sm",children:[r.jsx(qn,{className:"w-4 h-4 mr-1"}),"Tlcharger CSV"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nom"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tlphone"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Question"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date d'inscription"}),r.jsx("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(W=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:W.userName}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:W.userEmail}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:W.userPhone}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:r.jsx("div",{className:"max-w-xs truncate",title:W.question,children:W.question})}),r.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:[W.registeredAt.toLocaleDateString()," ",W.registeredAt.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                              ${W.status==="confirmed"?"bg-green-100 text-green-800":W.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:W.status==="confirmed"?"Confirm":W.status==="cancelled"?"Annul":W.status==="attended"?"Prsent":W.status})})]},W.id))})]})})]}):r.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-lg",children:[r.jsx(ct,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune inscription"}),r.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Ce webinaire n'a pas encore d'inscriptions."})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Fermer"})})]})})]})},Uv=()=>{const{currentUser:t}=Te(),e=it(),[s,n]=b.useState([]),[i,a]=b.useState([]),[o,l]=b.useState(!0),[u,d]=b.useState(""),[h,p]=b.useState("all"),[x,j]=b.useState(""),[C,R]=b.useState([]),[S,y]=b.useState(null),[v,_]=b.useState(!1),[P,L]=b.useState(""),[M,N]=b.useState(""),[f,w]=b.useState(null);b.useEffect(()=>{(async()=>{try{l(!0);const U=kt(Se(ne,"workshopProposals"),Hn("createdAt","desc")),X=await Ye(U),oe=[];X.forEach(me=>{const _e=me.data();oe.push({id:me.id,..._e})}),n(oe),a(oe),l(!1)}catch(U){console.error("Erreur lors de la rcupration des propositions:",U),d("Une erreur est survenue lors de la rcupration des propositions."),l(!1)}})()},[]),b.useEffect(()=>{let V=s;if(h!=="all"&&(V=V.filter(U=>U.status===h)),x){const U=x.toLowerCase();V=V.filter(X=>X.title.toLowerCase().includes(U)||X.description.toLowerCase().includes(U)||X.userName.toLowerCase().includes(U)||X.userEmail.toLowerCase().includes(U)||X.topics&&X.topics.some(oe=>oe.toLowerCase().includes(U)))}a(V)},[h,x,s]);const E=V=>{R(U=>U.includes(V)?U.filter(X=>X!==V):[...U,V])},A=async(V,U)=>{if(t)try{y(V);const X=be(ne,"workshopProposals",V);await ts(X,{status:U,updatedAt:Xe.now(),updatedBy:t.uid}),n(oe=>oe.map(me=>me.id===V?{...me,status:U}:me)),y(null)}catch(X){console.error("Erreur lors de la mise  jour du statut:",X),d("Une erreur est survenue lors de la mise  jour du statut."),y(null)}},I=(V,U)=>{const X=s.find(_e=>_e.id===V);if(!X)return;let oe="",me="";U==="approved"?(oe="Approuver la proposition",me=`tes-vous sr de vouloir approuver la proposition "${X.title}" ? L'auteur pourrait tre notifi de cette dcision.`,w({type:"approve",id:V})):U==="rejected"?(oe="Rejeter la proposition",me=`tes-vous sr de vouloir rejeter la proposition "${X.title}" ? L'auteur pourrait tre notifi de cette dcision.`,w({type:"reject",id:V})):(oe="Remettre en attente",me=`tes-vous sr de vouloir remettre la proposition "${X.title}" en attente ?`,w({type:"pending",id:V})),L(oe),N(me),_(!0)},k=async V=>{try{y(V),await Rn(be(ne,"workshopProposals",V)),n(U=>U.filter(X=>X.id!==V)),y(null)}catch(U){console.error("Erreur lors de la suppression:",U),d("Une erreur est survenue lors de la suppression de la proposition."),y(null)}},B=V=>{const U=s.find(X=>X.id===V);U&&(L("Supprimer la proposition"),N(`tes-vous sr de vouloir supprimer dfinitivement la proposition "${U.title}" ? Cette action est irrversible.`),w({type:"delete",id:V}),_(!0))},$=()=>{if(f){if(f.type==="delete")k(f.id);else{const V=f.type;A(f.id,V)}_(!1),w(null)}},H=()=>{_(!1),w(null)},O=()=>{if(i.length===0)return;const V=["Titre","Description","Dure (min)","Sujets","Public cible","Date prfre","Email","Nom","Status","Date de cration"],U=i.map(ee=>[`"${ee.title.replace(/"/g,'""')}"`,`"${ee.description.replace(/"/g,'""')}"`,ee.expectedDuration,`"${ee.topics?ee.topics.join(", "):""}"`,`"${ee.targetAudience||""}"`,ee.preferredDate||"",ee.contactEmail,`"${ee.userName}"`,ee.status,ee.createdAt?new Date(ee.createdAt.toDate()).toLocaleString():""]),X=[V.join(","),...U.map(ee=>ee.join(","))].join(`
`),oe=new Blob([X],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(oe),_e=document.createElement("a");_e.setAttribute("href",me),_e.setAttribute("download",`propositions-ateliers-${new Date().toISOString().slice(0,10)}.csv`),_e.style.visibility="hidden",document.body.appendChild(_e),_e.click(),document.body.removeChild(_e)},F=V=>{switch(V){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},re=V=>{switch(V){case"pending":return"En attente";case"approved":return"Approuv";case"rejected":return"Rejet";default:return V}};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Propositions d'ateliers"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Grez les propositions d'ateliers soumises par les utilisateurs."})]}),u&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ls,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:u})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),r.jsxs("select",{id:"status-filter",value:h,onChange:V=>p(V.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[r.jsx("option",{value:"all",children:"Tous les statuts"}),r.jsx("option",{value:"pending",children:"En attente"}),r.jsx("option",{value:"approved",children:"Approuvs"}),r.jsx("option",{value:"rejected",children:"Rejets"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rechercher"}),r.jsx("input",{type:"text",id:"search",value:x,onChange:V=>j(V.target.value),placeholder:"Rechercher par titre, sujet...",className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]}),r.jsx("div",{children:r.jsxs("button",{onClick:O,disabled:i.length===0,className:`flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${i.length===0?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,children:[r.jsx(qn,{className:"w-4 h-4 mr-2"}),"Exporter CSV"]})})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement des propositions..."})]}):i.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ot,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucune proposition"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:x||h!=="all"?"Aucune proposition ne correspond  vos critres de recherche.":"Aucune proposition d'atelier n'a t soumise pour le moment."})]}):r.jsx("div",{className:"divide-y divide-gray-200",children:i.map(V=>{var U;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start",children:[r.jsxs("div",{className:"mb-4 sm:mb-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:V.title}),r.jsx("span",{className:`ml-3 px-2.5 py-0.5 rounded-full text-xs font-medium ${F(V.status)}`,children:re(V.status)})]}),r.jsxs("div",{className:"mt-1 text-sm text-gray-500",children:["Soumis par ",V.userName,"  ",(U=V.createdAt)!=null&&U.toDate?new Date(V.createdAt.toDate()).toLocaleString():"Date inconnue"]}),r.jsx("div",{className:"mt-2",children:V.topics&&V.topics.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:V.topics.map((X,oe)=>r.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:X},oe))})})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[V.status!=="approved"&&r.jsxs("button",{onClick:()=>I(V.id,"approved"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===V.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-green-100 text-green-800 hover:bg-green-200"}`,children:[r.jsx(Pi,{className:"w-3 h-3 mr-1"}),"Approuver"]}),V.status!=="rejected"&&r.jsxs("button",{onClick:()=>I(V.id,"rejected"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===V.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-red-100 text-red-800 hover:bg-red-200"}`,children:[r.jsx(St,{className:"w-3 h-3 mr-1"}),"Rejeter"]}),V.status!=="pending"&&r.jsxs("button",{onClick:()=>I(V.id,"pending"),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===V.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"}`,children:[r.jsx(ls,{className:"w-3 h-3 mr-1"}),"En attente"]}),r.jsxs("button",{onClick:()=>B(V.id),disabled:!!S,className:`px-2 py-1 rounded text-xs flex items-center ${S===V.id?"bg-gray-300 text-gray-600 cursor-not-allowed":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:[r.jsx(St,{className:"w-3 h-3 mr-1"}),"Supprimer"]})]})]}),r.jsx("button",{onClick:()=>E(V.id),className:"mt-4 flex items-center text-sm text-blue-600 hover:text-blue-800",children:C.includes(V.id)?r.jsxs(r.Fragment,{children:[r.jsx(Bo,{className:"w-4 h-4 mr-1"}),"Masquer les dtails"]}):r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"w-4 h-4 mr-1"}),"Voir les dtails"]})}),C.includes(V.id)&&r.jsxs("div",{className:"mt-4 bg-gray-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Description"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-line mb-4",children:V.description}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start mb-2",children:[r.jsx(lr,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Dure estime"}),r.jsxs("p",{className:"text-sm text-gray-700",children:[V.expectedDuration," minutes"]})]})]}),V.targetAudience&&r.jsxs("div",{className:"flex items-start mb-2",children:[r.jsx(Ts,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Public cible"}),r.jsx("p",{className:"text-sm text-gray-700",children:V.targetAudience})]})]})]}),r.jsxs("div",{children:[V.preferredDate&&r.jsxs("div",{className:"flex items-start mb-2",children:[r.jsx(rr,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Date prfre"}),r.jsx("p",{className:"text-sm text-gray-700",children:new Date(V.preferredDate).toLocaleDateString()})]})]}),r.jsxs("div",{className:"flex items-start mb-2",children:[r.jsx(zr,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Contact"}),r.jsx("p",{className:"text-sm text-gray-700",children:r.jsxs("a",{href:`mailto:${V.contactEmail}`,className:"text-blue-600 hover:underline flex items-center",children:[V.contactEmail,r.jsx(Ys,{className:"w-3 h-3 ml-1"})]})})]})]})]})]}),V.notes&&r.jsxs("div",{className:"mt-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"Notes supplmentaires"}),r.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:V.notes})]})]})]},V.id)})})})]}),v&&r.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:P}),r.jsx("p",{className:"text-gray-600 mb-6",children:M}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors",children:"Annuler"}),r.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Confirmer"})]})]})})]})},fD=()=>r.jsx("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 to-blue-800 text-white flex flex-col items-center justify-center p-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("div",{className:"flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-white rounded-full",children:r.jsx("span",{className:"text-5xl font-bold text-blue-900",children:"404"})}),r.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Page non trouve"}),r.jsx("p",{className:"text-blue-100 mb-8",children:"La page que vous recherchez n'existe pas ou a t dplace."}),r.jsxs(Y,{to:"/",className:"inline-flex items-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-blue-900 bg-white hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-blue-800 focus:ring-white",children:[r.jsx(Hu,{className:"mr-2 h-5 w-5"}),"Retour  l'accueil"]})]})}),xD=({open:t,onClose:e,onSubmit:s,loading:n=!1,error:i,label:a})=>{const[o,l]=b.useState(""),u=d=>{d.preventDefault(),s(o)};return xi.useEffect(()=>{t||l("")},[t]),t?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-xs w-full relative animate-fadeIn",children:[r.jsx("button",{className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600",onClick:e,disabled:n,"aria-label":"Fermer",children:""}),r.jsx("h2",{className:"text-lg font-bold mb-4 text-center",children:a||"Confirmez avec votre mot de passe"}),r.jsxs("form",{onSubmit:u,className:"flex flex-col gap-3",children:[r.jsx("input",{type:"password",className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Votre mot de passe...",value:o,onChange:d=>l(d.target.value),disabled:n,autoFocus:!0}),i&&r.jsx("div",{className:"text-red-600 text-sm text-center",children:i}),r.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded px-4 py-2 font-medium hover:bg-blue-700 transition disabled:opacity-50",disabled:n||o==="",children:"Valider"})]})]})}):null},gD=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(!1),[i,a]=b.useState(null),[o,l]=b.useState(null),[u,d]=b.useState(null),[h,p]=b.useState(""),{currentUser:x}=Te(),[j,C]=b.useState((x==null?void 0:x.displayName)||""),[R,S]=b.useState((x==null?void 0:x.photoURL)||""),[y]=b.useState((x==null?void 0:x.email)||""),[v,_]=b.useState(""),[P,L]=b.useState(!1),[M,N]=b.useState(null),[f,w]=b.useState(null),[E,A]=b.useState("none"),[I,k]=b.useState(!0),[B,$]=b.useState(null);b.useEffect(()=>{(async()=>{if(x)try{const X=be(ne,"users",x.uid),oe=await xt(X);if(oe.exists()){const me=oe.data();me.status&&A(me.status)}}catch(X){console.error("Erreur lors du chargement du statut utilisateur:",X)}finally{k(!1)}})()},[x]);const H=It.currentUser,O=H==null?void 0:H.providerData.some(U=>U.providerId==="password");if(!x)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:r.jsx("div",{className:"bg-white rounded-2xl shadow-2xl p-8 flex flex-col items-center w-full max-w-md",children:r.jsx("div",{className:"text-red-600 text-center text-lg font-semibold",children:"Vous devez tre connect pour accder  votre profil."})})});const F=async U=>{if(U.preventDefault(),N(null),w(null),!O){$("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}d({displayName:j,photoURL:R}),l("profile"),e(!0)},re=async U=>{if(U.preventDefault(),N(null),w(null),!O){$("Vous avez cr votre compte avec Google. Vous ne pouvez pas modifier votre profil ou mot de passe ici.");return}p(v),l("password"),e(!0)},V=async U=>{const X=It.currentUser;if(!X)return;n(!0),a(null);const oe=Fi.credential(X.email||"",U);try{if(await fT(X,oe),o==="profile"&&u){if(await Qj(X,{displayName:u.displayName,photoURL:u.photoURL}),C(u.displayName),S(u.photoURL),x){const me=be(ne,"users",x.uid);await ts(me,{status:E})}w("Profil mis  jour !")}else o==="password"&&h&&(await gT(X,h),_(""),w("Mot de passe mis  jour !"));e(!1),l(null),d(null),p("")}catch{a("Mot de passe incorrect.")}finally{n(!1),L(!1)}};return r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-8 px-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(Y,{to:"/admin",className:"inline-flex items-center px-3 py-2 rounded-md bg-blue-700 hover:bg-blue-600 text-white font-medium text-sm focus:outline-none",children:[r.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),"Retour"]}),r.jsxs("span",{className:"flex items-center text-xl font-bold",children:[r.jsx(Ot,{className:"w-6 h-6 mr-2 text-white"})," Mon profil"]})]})}),r.jsx("div",{className:"w-full mx-auto p-4 flex justify-center",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 md:p-12 flex flex-col items-center w-full max-w-xl relative animate-fadeInUp mt-8 mb-8",children:[r.jsxs("div",{className:"relative mb-5",children:[R?r.jsx("img",{src:R,alt:j||y,className:"w-32 h-32 rounded-full object-cover shadow-lg border-4 border-blue-100 bg-gray-200 transition-all duration-300 hover:scale-105"}):r.jsx("span",{className:"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center text-5xl text-blue-400 shadow-lg border-4 border-blue-100",children:r.jsx("svg",{className:"w-16 h-16 text-blue-200",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14c4.418 0 8 1.79 8 4v2H4v-2c0-2.21 3.582-4 8-4zm0-4a4 4 0 110-8 4 4 0 010 8z"})})}),(x==null?void 0:x.emailVerified)&&r.jsx("span",{className:"absolute bottom-2 right-2 bg-green-500 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:"Vrifi"}),(x==null?void 0:x.isAdmin)&&r.jsxs("span",{className:"absolute top-2 left-2 flex items-center gap-1 bg-blue-700 text-white rounded-full px-2 py-1 text-xs font-semibold shadow",children:[r.jsx(Ot,{className:"w-4 h-4"})," Admin"]})]}),r.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2 text-center",children:j||y}),r.jsx("div",{className:"text-gray-500 text-sm mb-4 text-center",children:y}),r.jsxs("form",{onSubmit:F,className:"w-full flex flex-col gap-4 mb-8 animate-fadeInUp",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Nom affich"}),r.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:j,onChange:U=>C(U.target.value),placeholder:"Nom affich",disabled:P})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Photo (URL)"}),r.jsx("input",{type:"text",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:R,onChange:U=>S(U.target.value),placeholder:"URL de la photo",disabled:P})]}),r.jsxs("div",{className:"col-span-1 md:col-span-2",children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Votre statut"}),r.jsxs("div",{className:"relative border-2 border-blue-100 rounded-lg",children:[r.jsxs("select",{className:"appearance-none w-full px-4 py-2 bg-transparent focus:outline-none",value:E,onChange:U=>A(U.target.value),disabled:P||I,children:[r.jsx("option",{value:"none",children:"Slectionnez votre statut"}),Bx.map(U=>r.jsx("option",{value:U.value,children:U.label},U.value))]}),r.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]}),E!=="none"&&r.jsxs("div",{className:"mt-2 flex items-center",children:[r.jsx("span",{className:"mr-2",children:"Statut actuel:"}),r.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[E==="cps"&&r.jsx(Bd,{className:"w-4 h-4 text-blue-500"}),E==="esigelec"&&r.jsx(Fx,{className:"w-4 h-4 text-green-500"}),E==="alumni"&&r.jsx(Ts,{className:"w-4 h-4 text-purple-500"}),E==="other"&&r.jsx(Ts,{className:"w-4 h-4 text-gray-500"}),HR(E)]})]})]})]}),r.jsx("button",{type:"submit",className:"bg-blue-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-blue-700 transition disabled:opacity-50 mt-2",disabled:P,children:"Sauvegarder le profil"})]}),r.jsx("div",{className:"w-full border-t border-blue-100 my-6"}),O?r.jsxs(r.Fragment,{children:[r.jsxs("form",{onSubmit:re,className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[r.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Changer le mot de passe"}),r.jsx("input",{type:"password",className:"border-2 border-blue-100 rounded-lg px-4 py-2 w-full focus:border-blue-400 transition",value:v,onChange:U=>_(U.target.value),placeholder:"Nouveau mot de passe (min. 6 caractres)",disabled:P}),r.jsx("button",{type:"submit",className:"bg-green-600 text-white rounded-lg px-6 py-2 font-semibold hover:bg-green-700 transition disabled:opacity-50",disabled:P||v.length<6,children:"Mettre  jour le mot de passe"})]}),r.jsx("button",{type:"button",className:"mt-2 underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),w(null);try{await dp(It,y),w("Un email de rinitialisation a t envoy  votre adresse.")}catch{N("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}):r.jsxs("div",{className:"w-full flex flex-col gap-4 animate-fadeInUp",children:[r.jsx("div",{className:"text-orange-600 text-sm mb-2",children:"Vous avez cr votre compte avec Google. Vous ne pouvez pas dfinir ou changer de mot de passe ici."}),r.jsx("button",{type:"button",className:"underline text-blue-700 hover:text-blue-900 text-sm",onClick:async()=>{N(null),w(null);try{await dp(It,y),w("Un email de rinitialisation a t envoy  votre adresse.")}catch{N("Erreur lors de lenvoi de lemail de rinitialisation.")}},children:"Rinitialiser mon mot de passe"})]}),(M||f)&&r.jsx("div",{className:`mt-6 text-center text-sm font-medium ${M?"text-red-600":"text-green-600"}`,children:M||f}),B&&r.jsx("div",{className:"mt-6 text-center text-sm font-medium text-orange-600",children:B}),r.jsx(xD,{open:t,onClose:()=>{e(!1),a(null),l(null)},onSubmit:V,loading:s,error:i,label:o==="profile"?"Veuillez entrer VOTRE mot de passe pour confirmer la modification du profil.":"Veuillez entrer VOTRE mot de passe pour changer votre mot de passe."})]})})]})},yD=()=>{const t=it(),{currentUser:e}=Te();return r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-8",children:r.jsxs("div",{className:"container mx-auto px-4 flex items-center",children:[r.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-blue-100 hover:text-white transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]}),r.jsx("h1",{className:"text-2xl font-bold",children:"Guide d'utilisation - ESIG-prep-guide"})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold text-blue-700 mb-4",children:"Bienvenue dans votre guide ESIG-prep-guide"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Cette plateforme a t conue pour vous accompagner dans toutes les tapes de votre parcours, depuis l'admission  l'ESIG jusqu' votre arrive  Rouen. Dcouvrez comment utiliser efficacement les diffrentes fonctionnalits  votre disposition."}),e&&r.jsx("div",{className:"bg-blue-50 p-4 rounded-md mb-6",children:r.jsxs("p",{className:"text-blue-700",children:[r.jsx("span",{className:"font-bold",children:"Connect en tant que:"})," ",e.email," ",e.displayName?`(${e.displayName})`:""]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Sommaire"}),r.jsxs("ul",{className:"space-y-2",children:[r.jsx("li",{children:r.jsx("a",{href:"#navigation",className:"text-blue-600 hover:underline",children:"1. Navigation par phase"})}),r.jsx("li",{children:r.jsx("a",{href:"#resources",className:"text-blue-600 hover:underline",children:"2. Ressources documentaires"})}),r.jsx("li",{children:r.jsx("a",{href:"#faq",className:"text-blue-600 hover:underline",children:"3. Foire aux questions (FAQ)"})}),r.jsx("li",{children:r.jsx("a",{href:"#profile",className:"text-blue-600 hover:underline",children:"4. Gestion de votre profil"})}),r.jsx("li",{children:r.jsx("a",{href:"#tips",className:"text-blue-600 hover:underline",children:"5. Conseils pratiques"})})]})]}),r.jsxs("div",{id:"navigation",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(Bd,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"1. Navigation par phase"})]}),r.jsx("p",{className:"text-gray-700 mb-6",children:"Le parcours est organis en trois phases distinctes pour vous guider pas  pas. Chaque phase contient des ressources spcifiques adaptes  votre progression."}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-5",children:[r.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Phase Post-CPS"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les tudiants venant de recevoir leur admission au CPS. Vous y trouverez des informations sur les premires dmarches  effectuer."}),r.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[r.jsx("li",{children:"Procdures d'inscription"}),r.jsx("li",{children:"Documents  fournir"}),r.jsx("li",{children:"Prparation acadmique"})]})]}),r.jsxs("div",{className:"bg-indigo-50 rounded-lg p-5",children:[r.jsx("h4",{className:"font-semibold text-indigo-800 mb-2",children:"Phase During-Process"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Pour les dmarches administratives en cours (visa, logement, assurances)."}),r.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[r.jsx("li",{children:"Guides pour les dmarches consulaires"}),r.jsx("li",{children:"Check-lists pour les documents de visa"}),r.jsx("li",{children:"Options de logement"}),r.jsx("li",{children:"Assurances et finances"})]})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-5",children:[r.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Phase Pre-Arrival"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Pour prparer votre arrive en France et  l'ESIG."}),r.jsxs("ul",{className:"list-disc list-inside text-gray-600 space-y-1",children:[r.jsx("li",{children:"Guides d'orientation du campus"}),r.jsx("li",{children:"Transports locaux  Rouen"}),r.jsx("li",{children:"Conseils d'intgration"}),r.jsx("li",{children:"Dmarches  l'arrive"})]})]})]}),r.jsx("div",{className:"bg-yellow-50 p-4 rounded-md",children:r.jsxs("p",{className:"text-gray-800 flex items-center",children:[r.jsx(cr,{className:"w-5 h-5 text-yellow-600 mr-2"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Astuce :"})," Concentrez-vous d'abord sur la phase qui correspond  votre situation actuelle, mais n'hsitez pas  consulter les autres phases pour anticiper les prochaines tapes."]})]})})]}),r.jsxs("div",{id:"resources",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"2. Ressources documentaires"})]}),r.jsx("p",{className:"text-gray-700 mb-6",children:"La bibliothque de ressources contient tous les documents essentiels pour vos dmarches. Vous pouvez facilement explorer, prvisualiser et tlcharger ces ressources."}),r.jsxs("div",{className:"space-y-5 mb-6",children:[r.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[r.jsx("div",{className:"flex-shrink-0 mr-4",children:r.jsx(Xr,{className:"w-8 h-8 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Rechercher des ressources"}),r.jsx("p",{className:"text-gray-700",children:"Utilisez la barre de recherche pour trouver rapidement des documents en fonction de mots-cls. Vous pouvez galement filtrer par catgorie ou par phase."})]})]}),r.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[r.jsx("div",{className:"flex-shrink-0 mr-4",children:r.jsx(We,{className:"w-8 h-8 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Prvisualiser les documents"}),r.jsx("p",{className:"text-gray-700",children:"Cliquez sur un document pour le prvisualiser directement dans l'interface sans avoir  le tlcharger. Cela vous permet de vrifier rapidement si le document rpond  vos besoins."})]})]}),r.jsxs("div",{className:"flex border-l-4 border-blue-500 pl-4",children:[r.jsx("div",{className:"flex-shrink-0 mr-4",children:r.jsx(qn,{className:"w-8 h-8 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Tlcharger des ressources"}),r.jsx("p",{className:"text-gray-700",children:"Pour conserver un document ou l'imprimer, utilisez le bouton de tlchargement. Les documents sont disponibles dans divers formats (PDF, Word, Excel, etc.)."})]})]})]}),r.jsxs("div",{className:"bg-gray-100 p-4 rounded-md",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Types de ressources disponibles"}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Formulaires administratifs"}),r.jsx("li",{children:"Guides pratiques"}),r.jsx("li",{children:"Check-lists par tape"}),r.jsx("li",{children:"Modles de documents"})]}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700",children:[r.jsx("li",{children:"Cartes et plans"}),r.jsx("li",{children:"Calendriers acadmiques"}),r.jsx("li",{children:"Ressources d'apprentissage"}),r.jsx("li",{children:"Liens vers des sites officiels"})]})]})]})]}),r.jsxs("div",{id:"faq",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(ot,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"3. Foire aux questions (FAQ)"})]}),r.jsx("p",{className:"text-gray-700 mb-6",children:"La section FAQ rpond aux questions les plus frquentes. Si vous ne trouvez pas la rponse  votre question, vous pouvez soumettre votre propre question qui sera traite par l'quipe."}),r.jsxs("div",{className:"space-y-6 mb-6",children:[r.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Comment utiliser la FAQ ?"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:"Explorez les questions existantes filtres par catgorie ou phase"}),r.jsx("li",{children:"Utilisez la barre de recherche pour trouver rapidement une information spcifique"}),r.jsx("li",{children:"Cliquez sur une question pour afficher sa rponse complte"}),r.jsx("li",{children:"Si vous ne trouvez pas l'information recherche, posez votre propre question"})]})]}),r.jsxs("div",{className:"bg-green-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-700 mb-3",children:"Comment poser une question ?"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[r.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),r.jsx("li",{children:"Rdigez votre question de manire claire et prcise"}),r.jsx("li",{children:"Slectionnez la catgorie et la phase appropries"}),r.jsx("li",{children:"Soumettez votre question"}),r.jsx("li",{children:"Vous recevrez une confirmation que votre question a bien t enregistre"}),r.jsx("li",{children:`Une fois traite par l'quipe, vous verrez la rponse dans la section "Mes questions"`})]}),r.jsx("p",{className:"mt-3 text-gray-700 italic",children:"Note : Votre identifiant et votre email sont automatiquement enregistrs avec votre question pour permettre le suivi."})]}),r.jsxs("div",{className:"bg-indigo-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-indigo-700 mb-3",children:"Suivi de vos questions"}),r.jsx("p",{className:"text-gray-700 mb-3",children:`Vous pouvez suivre l'tat de vos questions dans l'onglet "Mes questions" de la section FAQ. Les questions y sont organises en deux catgories :`}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Questions rpondues"})," : Questions qui ont reu une rponse de l'quipe"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Questions en attente"})," : Questions soumises mais pas encore traites"]})]})]})]})]}),r.jsxs("div",{id:"profile",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(Ts,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"4. Gestion de votre profil"})]}),r.jsx("p",{className:"text-gray-700 mb-6",children:"Personnalisez votre profil pour une exprience adapte  vos besoins. Vous pouvez modifier vos informations et grer vos prfrences  tout moment."}),r.jsxs("div",{className:"space-y-5 mb-6",children:[r.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Informations personnelles"}),r.jsx("p",{className:"text-gray-700",children:"Vous pouvez personnaliser votre nom d'utilisateur et ajouter une photo de profil pour mieux vous identifier sur la plateforme."})]}),r.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Scurit du compte"}),r.jsx("p",{className:"text-gray-700",children:"Vrifiez votre adresse email pour scuriser votre compte et activer toutes les fonctionnalits. Vous pouvez galement modifier votre mot de passe depuis l'cran de profil."})]}),r.jsxs("div",{className:"border-l-4 border-blue-500 pl-4 py-2",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-1",children:"Prfrences de confidentialit"}),r.jsx("p",{className:"text-gray-700",children:"Grez vos prfrences concernant les cookies et l'utilisation de vos donnes via le panneau de prfrences de confidentialit."})]})]}),r.jsxs("div",{className:"bg-yellow-50 p-5 rounded-md",children:[r.jsx("h4",{className:"font-semibold text-yellow-700 mb-2",children:"Accder  votre profil"}),r.jsx("p",{className:"text-gray-700",children:'Pour accder  votre profil, cliquez sur votre nom ou votre avatar dans le coin suprieur droit de la page, puis slectionnez "Profil" dans le menu droulant.'})]})]}),r.jsxs("div",{id:"tips",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(sr,{className:"w-6 h-6 text-blue-600 mr-2"}),r.jsx("h3",{className:"text-lg font-bold text-blue-700",children:"5. Conseils pratiques"})]}),r.jsx("p",{className:"text-gray-700 mb-6",children:"Voici quelques conseils pour tirer le meilleur parti de la plateforme et faciliter votre parcours."}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour la prparation"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[r.jsx("li",{children:"Commencez par explorer la phase qui correspond  votre situation actuelle"}),r.jsx("li",{children:"Consultez les check-lists pour vous assurer de n'oublier aucune tape importante"}),r.jsx("li",{children:"Tlchargez et conservez les documents officiels dans un dossier ddi"}),r.jsx("li",{children:"Prparez vos questions  l'avance en notant vos incertitudes"})]})]}),r.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Pour les dmarches"}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[r.jsx("li",{children:"Respectez scrupuleusement les dlais indiqus pour chaque procdure"}),r.jsx("li",{children:"Conservez des copies numriques de tous vos documents importants"}),r.jsx("li",{children:"N'hsitez pas  poser des questions spcifiques via la FAQ"}),r.jsx("li",{children:"Consultez rgulirement la plateforme pour les mises  jour des informations"})]})]})]}),r.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-blue-700 mb-3",children:"Communaut et entraide"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous faites partie d'une communaut d'tudiants partageant le mme parcours."}),r.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-2",children:[r.jsx("li",{children:"Consultez les questions dj poses par d'autres tudiants"}),r.jsx("li",{children:"Partagez votre exprience et vos conseils quand vous avez franchi une tape"}),r.jsx("li",{children:"Entrez en contact avec les tudiants des promotions prcdentes pour des conseils personnaliss"}),r.jsx("li",{children:"N'hsitez pas  suggrer des amliorations ou de nouvelles ressources"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-700 mb-4",children:"Prt  dmarrer votre parcours"}),r.jsx("p",{className:"text-gray-700 mb-4",children:"Vous disposez maintenant de toutes les informations ncessaires pour utiliser efficacement la plateforme ESIG-prep-guide. N'hsitez pas  revenir consulter ce tutoriel chaque fois que vous en aurez besoin."}),r.jsx("p",{className:"text-gray-700 mb-6",children:"Ce guide sera rgulirement mis  jour pour reflter les volutions de la plateforme et les retours des utilisateurs."}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs(Y,{to:"/dashboard",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(ze,{className:"w-5 h-5 mr-2"}),"Retour au tableau de bord"]})})]})]})]})},vD=()=>{var u;const{currentUser:t}=Te(),[e,s]=b.useState(null),[n,i]=b.useState(""),a=d=>{s(e===d?null:d)},l=[{id:"login",question:"Je n'arrive pas  me connecter  mon compte",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"Plusieurs raisons peuvent expliquer un problme de connexion :"}),r.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[r.jsx("li",{children:"Vrifiez que votre adresse e-mail est correctement saisie"}),r.jsx("li",{children:"Assurez-vous que votre mot de passe est correct (attention aux majuscules/minuscules)"}),r.jsx("li",{children:`Si vous avez oubli votre mot de passe, utilisez l'option "Mot de passe oubli" sur la page de connexion`}),r.jsx("li",{children:"Vrifiez votre connexion internet"}),r.jsx("li",{children:"Si vous utilisez la connexion Google ou GitHub, assurez-vous d'tre connect  ces services"})]}),r.jsxs("p",{className:"mt-2",children:["Si le problme persiste, vous pouvez ",r.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline",children:"contacter l'quipe de support"}),"."]})]})},{id:"resources",question:"Comment accder aux ressources documentaires ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"Pour accder aux ressources documentaires :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[r.jsx("li",{children:"Connectez-vous  votre compte"}),r.jsx("li",{children:'Cliquez sur "Ressources" dans le menu principal'}),r.jsx("li",{children:"Utilisez les filtres pour trouver des documents par phase (Post-CPS, During-Process, Pre-Arrival) ou par catgorie"}),r.jsx("li",{children:"Cliquez sur un document pour le prvisualiser"}),r.jsx("li",{children:"Utilisez le bouton de tlchargement pour sauvegarder le document sur votre appareil"})]}),r.jsx("p",{className:"mt-2",children:"Si vous ne trouvez pas une ressource spcifique, utilisez la barre de recherche en haut de la page Ressources."})]})},{id:"faq",question:"Comment poser une question dans la FAQ ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"Pour poser une question dans la FAQ :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[r.jsx("li",{children:"Connectez-vous  votre compte"}),r.jsx("li",{children:"Accdez  la page FAQ via le menu principal"}),r.jsx("li",{children:'Cliquez sur le bouton "Poser une question"'}),r.jsx("li",{children:"Rdigez votre question de manire claire et concise"}),r.jsx("li",{children:"Slectionnez la catgorie et la phase appropries"}),r.jsx("li",{children:"Soumettez votre question"})]}),r.jsx("p",{className:"mt-2",children:"Une fois soumise, votre question sera examine par l'quipe d'administration qui y rpondra dans les meilleurs dlais. Vous recevrez une notification de confirmation immdiatement aprs la soumission."}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Note : Votre identifiant (uid) et votre email sont automatiquement enregistrs avec votre question pour faciliter le suivi."})]})},{id:"phases",question:"Quelles sont les diffrentes phases du parcours ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"Le parcours est divis en trois phases principales :"}),r.jsxs("ul",{className:"space-y-3 mt-2",children:[r.jsxs("li",{className:"p-2 bg-blue-50 rounded-md",children:[r.jsx("span",{className:"font-semibold text-blue-800",children:"Phase Post-CPS :"}),r.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne les tapes juste aprs avoir reu votre admission au CPS. Inclut les procdures d'inscription  l'ESIG, les documents  fournir, etc."})]}),r.jsxs("li",{className:"p-2 bg-indigo-50 rounded-md",children:[r.jsx("span",{className:"font-semibold text-indigo-800",children:"Phase During-Process :"}),r.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne toutes les dmarches administratives : demande de visa, recherche de logement, assurances, prparation financire."})]}),r.jsxs("li",{className:"p-2 bg-purple-50 rounded-md",children:[r.jsx("span",{className:"font-semibold text-purple-800",children:"Phase Pre-Arrival :"}),r.jsx("p",{className:"text-gray-700 text-sm mt-1",children:"Concerne la prparation  votre arrive en France et  Rouen : orientation sur le campus, transports locaux, premiers jours en France."})]})]}),r.jsx("p",{className:"mt-3",children:"Chaque phase contient des ressources, des guides et des FAQ spcifiques pour vous accompagner."})]})},{id:"profile",question:"Comment modifier mon profil utilisateur ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"Pour modifier votre profil :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1",children:[r.jsx("li",{children:"Cliquez sur votre nom ou avatar dans le coin suprieur droit"}),r.jsx("li",{children:'Slectionnez "Profil" dans le menu droulant'}),r.jsx("li",{children:"Sur la page de profil, vous pouvez :"}),r.jsxs("ul",{className:"list-disc ml-8 mt-1 space-y-1",children:[r.jsx("li",{children:"Modifier votre nom d'affichage"}),r.jsx("li",{children:"Ajouter ou changer votre photo de profil"}),r.jsx("li",{children:"Vrifier votre adresse email"}),r.jsx("li",{children:"Modifier votre mot de passe"}),r.jsx("li",{children:"Grer vos prfrences de confidentialit"})]})]}),r.jsx("p",{className:"mt-2",children:`N'oubliez pas d'enregistrer vos modifications en cliquant sur le bouton "Enregistrer les modifications".`})]})},{id:"browser",question:"Quels navigateurs sont recommands pour utiliser la plateforme ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"ESIG-prep-guide est optimis pour fonctionner sur les navigateurs modernes. Nous recommandons :"}),r.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[r.jsx("li",{children:"Google Chrome (version 90+)"}),r.jsx("li",{children:"Mozilla Firefox (version 88+)"}),r.jsx("li",{children:"Microsoft Edge (version 90+)"}),r.jsx("li",{children:"Safari (version 14+)"})]}),r.jsx("p",{className:"mt-2",children:"Pour une exprience optimale, assurez-vous que votre navigateur est  jour. La plateforme est galement responsive et s'adapte aux appareils mobiles et tablettes."}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Note : Si vous rencontrez des problmes d'affichage, essayez de vider le cache de votre navigateur ou d'utiliser un autre navigateur."})]})},{id:"cookies",question:"Comment sont utiliss les cookies sur la plateforme ?",answer:r.jsxs("div",{children:[r.jsx("p",{className:"mb-2",children:"ESIG-prep-guide utilise des cookies pour amliorer votre exprience utilisateur :"}),r.jsxs("ul",{className:"list-disc ml-5 space-y-1",children:[r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Cookies essentiels"})," : Ncessaires au fonctionnement de la plateforme (authentification, scurit)"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Cookies de prfrences"})," : Mmorisent vos prfrences pour amliorer votre navigation"]}),r.jsxs("li",{children:[r.jsx("span",{className:"font-medium",children:"Cookies d'analyse"})," : Nous aident  comprendre comment vous utilisez la plateforme pour l'amliorer"]})]}),r.jsx("p",{className:"mt-2",children:"Vous pouvez grer vos prfrences concernant les cookies via la bannire de consentement ou dans les paramtres de votre profil."}),r.jsxs("p",{className:"mt-2",children:["Pour plus d'informations, consultez notre ",r.jsx(Y,{to:"/legal/privacy-policy",className:"text-blue-600 hover:underline",children:"Politique de confidentialit"}),"."]})]})}].filter(d=>d.question.toLowerCase().includes(n.toLowerCase()));return r.jsxs("div",{className:"bg-gray-50 min-h-screen pb-12",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4 text-center",children:[r.jsx(cr,{className:"h-16 w-16 mx-auto mb-4"}),r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Centre d'aide"}),r.jsx("p",{className:"text-xl text-blue-100 max-w-2xl mx-auto",children:"Comment pouvons-nous vous aider aujourd'hui ?"}),r.jsx("div",{className:"max-w-xl mx-auto mt-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Rechercher dans l'aide...",className:"w-full px-4 py-3 rounded-full pl-12 text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500",value:n,onChange:d=>i(d.target.value)}),r.jsx(Xr,{className:"absolute left-4 top-3.5 h-5 w-5 text-gray-400"})]})}),t&&r.jsx("div",{className:"mt-4 text-blue-100",children:r.jsxs("p",{children:["Bonjour ",t.displayName||((u=t.email)==null?void 0:u.split("@")[0])||"utilisateur",", comment pouvons-nous vous aider aujourd'hui?"]})})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[r.jsx(ot,{className:"h-12 w-12 text-blue-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"FAQ"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Trouvez rapidement des rponses aux questions frquemment poses."}),r.jsx("a",{href:"#faq-section",className:"text-blue-600 hover:underline mt-auto",children:"Voir les questions frquentes"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[r.jsx(sr,{className:"h-12 w-12 text-green-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tutoriels"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Consultez nos guides dtaills pour vous aider  utiliser la plateforme."}),r.jsx(Y,{to:"/tutorial",className:"text-blue-600 hover:underline mt-auto",children:"Accder aux tutoriels"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col items-center text-center hover:shadow-lg transition-shadow",children:[r.jsx(zr,{className:"h-12 w-12 text-purple-500 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nous contacter"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Besoin d'une assistance personnalise ? Contactez notre quipe."}),r.jsx("a",{href:"#contact",className:"text-blue-600 hover:underline mt-auto",children:"Voir les options de contact"})]})]}),r.jsxs("div",{id:"faq-section",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[r.jsx(ot,{className:"h-6 w-6 text-blue-500 mr-2"}),"Questions frquemment poses"]}),r.jsx("div",{className:"divide-y divide-gray-200",children:l.length>0?l.map(d=>r.jsxs("div",{className:"py-4",children:[r.jsxs("button",{className:"flex justify-between items-center w-full text-left focus:outline-none",onClick:()=>a(d.id),children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.question}),e===d.id?r.jsx(Bo,{className:"h-5 w-5 text-blue-500"}):r.jsx(Dn,{className:"h-5 w-5 text-blue-500"})]}),e===d.id&&r.jsx("div",{className:"mt-3 text-gray-700 bg-gray-50 p-4 rounded-md",children:d.answer})]},d.id)):r.jsxs("div",{className:"py-4 text-center",children:[r.jsxs("p",{className:"text-gray-500",children:['Aucun rsultat pour "',n,'"']}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Essayez une autre recherche ou consultez les questions ci-dessous"})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[r.jsx(ls,{className:"h-6 w-6 text-yellow-500 mr-2"}),"Guide de dpannage courant"]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problmes de chargement de page"}),r.jsx("p",{className:"text-gray-700 mb-2",children:"Si une page ne se charge pas correctement ou affiche une erreur :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[r.jsx("li",{children:"Rafrachissez la page (F5 ou CTRL+R)"}),r.jsx("li",{children:"Vrifiez votre connexion internet"}),r.jsx("li",{children:"Essayez de vider le cache de votre navigateur"}),r.jsx("li",{children:"Si le problme persiste, dconnectez-vous puis reconnectez-vous"})]})]}),r.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Problmes de tlchargement de documents"}),r.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous ne parvenez pas  tlcharger un document :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[r.jsx("li",{children:"Vrifiez que vous disposez de suffisamment d'espace sur votre appareil"}),r.jsx("li",{children:"Assurez-vous que votre navigateur n'a pas bloqu le tlchargement"}),r.jsx("li",{children:"Essayez d'utiliser un autre navigateur"}),r.jsx("li",{children:"Si vous utilisez un appareil mobile, essayez depuis un ordinateur"})]})]}),r.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4 py-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Email de vrification non reu"}),r.jsx("p",{className:"text-gray-700 mb-2",children:"Si vous n'avez pas reu l'email de vrification :"}),r.jsxs("ol",{className:"list-decimal ml-5 space-y-1 text-gray-700",children:[r.jsx("li",{children:"Vrifiez votre dossier de spam ou de courrier indsirable"}),r.jsx("li",{children:"Assurez-vous que l'adresse email saisie est correcte"}),r.jsx("li",{children:`Cliquez sur "Renvoyer l'email de vrification" dans votre profil`}),r.jsx("li",{children:"Si le problme persiste aprs plusieurs tentatives, contactez le support"})]})]})]})]}),r.jsxs("div",{id:"contact",className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[r.jsx(zr,{className:"h-6 w-6 text-blue-500 mr-2"}),"Nous contacter"]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-blue-50 p-5 rounded-lg",children:[r.jsx(zr,{className:"h-8 w-8 text-blue-500 mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:"Par email"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Pour toute question ou demande d'assistance, vous pouvez nous contacter par email. Nous rpondons gnralement dans un dlai de 24  48 heures."}),r.jsxs("a",{href:"mailto:support@esig-prep-guide.com",className:"inline-flex items-center text-blue-600 hover:underline",children:["abdoul.diouf2@groupe-esigelec.org",r.jsx(Ys,{className:"h-4 w-4 ml-1"})]})]}),r.jsxs("div",{className:"bg-purple-50 p-5 rounded-lg",children:[r.jsx(qx,{className:"h-8 w-8 text-purple-500 mb-3"}),r.jsx("h3",{className:"text-lg font-medium text-purple-800 mb-2",children:"Par tlphone"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"Pour une assistance immdiate, vous pouvez nous appeler pendant nos heures d'ouverture (Lundi au Vendredi, 13h - 14h / 17h - 20h GMT+0)."}),r.jsxs("a",{href:"tel:+33749051879",className:"inline-flex items-center text-purple-600 hover:underline",children:["+33 7 49 05 18 79",r.jsx(Ys,{className:"h-4 w-4 ml-1"})]})]})]}),r.jsxs("div",{className:"mt-6 bg-gray-50 p-5 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"FAQ Interactive"}),r.jsx("p",{className:"text-gray-700 mb-3",children:"N'oubliez pas que vous pouvez galement poser vos questions directement via notre systme de FAQ. Vous recevrez une rponse personnalise de notre quipe."}),r.jsxs(Y,{to:"/faq",className:"inline-flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Accder  la FAQ",r.jsx(bD,{className:"h-4 w-4 ml-1"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[r.jsx(sr,{className:"h-6 w-6 text-green-500 mr-2"}),"Ressources additionnelles"]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsx("a",{href:"https://www.esigelec.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:r.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Site officiel ESIGELEC"}),r.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Consultez le site officiel de l'ESIGELEC pour des informations actualises sur l'cole."}),r.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter le site",r.jsx(Ys,{className:"h-4 w-4 ml-1"})]})]})}),r.jsx("a",{href:"https://www.campusfrance.org/fr",target:"_blank",rel:"noopener noreferrer",className:"group",children:r.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"Campus France"}),r.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Informations sur les tudes en France et les procdures de visa pour les tudiants internationaux."}),r.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter Campus France",r.jsx(Ys,{className:"h-4 w-4 ml-1"})]})]})}),r.jsx("a",{href:"https://france-visas.gouv.fr/",target:"_blank",rel:"noopener noreferrer",className:"group",children:r.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg hover:shadow-md transition-shadow flex flex-col h-full",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2 group-hover:text-blue-600",children:"France-Visas"}),r.jsx("p",{className:"text-gray-700 mb-3 flex-grow",children:"Site officiel des visas pour la France avec informations dtailles sur les procdures."}),r.jsxs("div",{className:"inline-flex items-center text-blue-600",children:["Visiter France-Visas",r.jsx(Ys,{className:"h-4 w-4 ml-1"})]})]})})]})]})]})]})},bD=({className:t})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:r.jsx("polyline",{points:"9 18 15 12 9 6"})}),wD=()=>{const{currentUser:t}=Te(),e=it(),[s,n]=b.useState([]),[i,a]=b.useState(""),[o,l]=b.useState(!1),u=b.useRef(null),d=b.useRef(null);b.useEffect(()=>{const S=[{id:"1",text:`Bonjour ${(t==null?void 0:t.displayName)||"cher utilisateur"} ! Je suis EsiBot, votre assistant personnel pour votre parcours vers l'ESIGELEC.`,sender:"bot",timestamp:new Date},{id:"2",text:"Je peux vous aider avec les rservations de voyage, la planification de votre dmnagement, et rpondre  vos questions sur l'cole ou les dmarches administratives.",sender:"bot",timestamp:new Date},{id:"3",text:"Comment puis-je vous aider aujourd'hui ?",sender:"bot",timestamp:new Date}];n(S)},[t]),b.useEffect(()=>{h()},[s]);const h=()=>{var S;(S=u.current)==null||S.scrollIntoView({behavior:"smooth"})},p=S=>new Promise(y=>{setTimeout(()=>{const v=S.toLowerCase();v.includes("billet")||v.includes("avion")||v.includes("vol")||v.includes("voyage")?y("Notre service de rservation de billets d'avion sera bientt disponible ! Pour l'instant, je peux vous recommander des sites comme SkyScanner, Kayak ou les sites des compagnies ariennes directes comme Air France pour les trajets vers la France. Pour les tudiants, des rductions spciales sont souvent disponibles."):v.includes("logement")||v.includes("appartement")||v.includes("loger")||v.includes("rsidence")||v.includes("hotel")?y("Pour votre logement  Rouen, plusieurs options s'offrent  vous : les rsidences tudiantes du CROUS, les rsidences prives, ou la colocation. L'ESIGELEC dispose galement d'un service d'aide au logement qui peut vous accompagner dans vos recherches. Souhaitez-vous des informations spcifiques sur l'une de ces options ?"):v.includes("planifier")||v.includes("planning")||v.includes("calendrier")||v.includes("organiser")||v.includes("plan")?y(`Pour planifier votre voyage, je vous recommande de suivre ces tapes :

1. Vrifiez les dates de rentre et d'inscription  l'ESIGELEC
2. Rservez votre billet d'avion 2-3 mois  l'avance pour de meilleurs tarifs
3. Trouvez un logement temporaire pour les premiers jours si ncessaire
4. Prparez tous vos documents administratifs requis
5. tablissez un budget pour les premiers mois

Souhaitez-vous un guide plus dtaill pour l'une de ces tapes ?`):v.includes("document")||v.includes("papier")||v.includes("visa")||v.includes("passeport")||v.includes("administratif")?y(`Pour votre arrive en France, vous aurez besoin des documents suivants :

 Passeport valide
 Visa tudiant ou titre de sjour
 Lettre d'admission de l'ESIGELEC
 Justificatif de ressources financires
 Acte de naissance avec traduction assermente
 Attestation d'assurance
 Diplmes et relevs de notes

Je peux vous dtailler la procdure pour chacun de ces documents si vous le souhaitez.`):v.includes("esigelec")||v.includes("cole")||v.includes("formation")||v.includes("cours")||v.includes("tude")?y("L'ESIGELEC est une grande cole d'ingnieurs situe  Rouen, en Normandie. Elle propose un cursus d'ingnieur en 5 ans avec 15 dominantes diffrentes dans le domaine des technologies de l'information, de l'lectronique, et des systmes embarqus. L'cole possde un campus moderne avec des laboratoires bien quips et entretient de nombreux partenariats avec des entreprises. Avez-vous des questions sur un aspect particulier de l'cole ?"):y("Je n'ai pas toutes les informations sur ce sujet prcis pour le moment, mais je continue d'apprendre ! Pourriez-vous reformuler votre question ou choisir un autre sujet comme les voyages, le logement, ou les dmarches administratives ? Vous pouvez galement contacter directement le service international de l'ESIGELEC pour des informations plus prcises.")},1500)}),x=async()=>{var y;if(i.trim()==="")return;const S={id:Date.now().toString(),text:i,sender:"user",timestamp:new Date};n(v=>[...v,S]),a(""),l(!0);try{const v=await p(i),_={id:(Date.now()+1).toString(),text:v,sender:"bot",timestamp:new Date};n(P=>[...P,_])}catch(v){console.error("Erreur lors de la gnration de la rponse:",v);const _={id:(Date.now()+1).toString(),text:"Dsol, j'ai rencontr une erreur en traitant votre demande. Veuillez ressayer.",sender:"bot",timestamp:new Date};n(P=>[...P,_])}finally{l(!1),(y=d.current)==null||y.focus()}},j=S=>{S.key==="Enter"&&x()},C=()=>[{text:"Comment rserver un billet d'avion ?",icon:r.jsx(jl,{className:"w-4 h-4"})},{text:"Options de logement  Rouen",icon:r.jsx(Hu,{className:"w-4 h-4"})},{text:"Planning de prparation",icon:r.jsx(rr,{className:"w-4 h-4"})},{text:"Documents ncessaires",icon:r.jsx(We,{className:"w-4 h-4"})},{text:" propos de l'ESIGELEC",icon:r.jsx(Ox,{className:"w-4 h-4"})}],R=S=>{a(S),setTimeout(()=>{x()},100)};return r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-800 to-blue-700 text-white py-4",children:r.jsxs("div",{className:"container mx-auto px-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs("button",{onClick:()=>e(-1),className:"mr-4 text-blue-100 hover:text-white transition-colors flex items-center",children:[r.jsx(ze,{className:"w-5 h-5 mr-1"}),r.jsx("span",{children:"Retour"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(wl,{className:"w-6 h-6 mr-2 text-blue-200"}),r.jsx("h1",{className:"text-xl font-bold",children:"EsiBot - Assistant IA"}),r.jsx("span",{className:"ml-2 bg-green-600 text-white text-xs px-2 py-0.5 rounded-full",children:"Prototype"})]})]}),r.jsxs("button",{onClick:()=>e("/help"),className:"text-blue-100 hover:text-white transition-colors flex items-center text-sm",children:[r.jsx(cr,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Aide"})]})]})}),r.jsxs("div",{className:"flex-1 flex flex-col max-w-3xl mx-auto w-full px-4 py-6",children:[r.jsx("div",{className:"flex-1 overflow-y-auto mb-4 bg-white rounded-lg shadow-md p-4",children:r.jsxs("div",{className:"space-y-4",children:[s.map(S=>r.jsx("div",{className:`flex ${S.sender==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`flex items-start max-w-[80%] ${S.sender==="user"?"flex-row-reverse":""}`,children:[r.jsx("div",{className:`flex-shrink-0 h-8 w-8 rounded-full flex items-center justify-center mr-2 ${S.sender==="user"?"bg-blue-100 ml-2 mr-0":"bg-blue-600"}`,children:S.sender==="user"?r.jsx(Ts,{className:"h-5 w-5 text-blue-600"}):r.jsx(wl,{className:"h-5 w-5 text-white"})}),r.jsxs("div",{className:`p-3 rounded-lg ${S.sender==="user"?"bg-blue-600 text-white rounded-tr-none":"bg-gray-100 text-gray-800 rounded-tl-none"}`,children:[r.jsx("p",{className:"whitespace-pre-wrap",children:S.text}),r.jsx("div",{className:`text-xs mt-1 ${S.sender==="user"?"text-blue-200":"text-gray-500"}`,children:S.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})},S.id)),o&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-100 text-gray-800 p-3 rounded-lg rounded-tl-none max-w-[80%]",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),r.jsx("div",{ref:u})]})}),r.jsx("div",{className:"mb-4 overflow-x-auto",children:r.jsx("div",{className:"flex space-x-2 pb-2",children:C().map((S,y)=>r.jsxs("button",{onClick:()=>R(S.text),className:"flex items-center whitespace-nowrap px-3 py-1.5 bg-white border border-blue-200 rounded-full text-sm text-blue-800 hover:bg-blue-50 transition-colors shadow-sm",children:[S.icon,r.jsx("span",{className:"ml-1.5",children:S.text})]},y))})}),r.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("input",{ref:d,type:"text",value:i,onChange:S=>a(S.target.value),onKeyDown:j,placeholder:"Posez votre question...",className:"flex-1 px-4 py-3 focus:outline-none",disabled:o}),r.jsx("button",{onClick:x,disabled:i.trim()===""||o,className:`p-3 ${i.trim()===""||o?"text-gray-400 bg-gray-100":"text-white bg-blue-600 hover:bg-blue-700"} transition-colors`,children:r.jsx($d,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"mt-4 text-xs text-gray-500 text-center",children:[r.jsx("p",{children:"Ce chatbot est un prototype  des fins de dmonstration uniquement."}),r.jsx("p",{children:"Les rponses sont pr-programmes et ne reprsentent pas une vritable IA."})]})]})]})},jD=()=>{const[t,e]=b.useState(""),[s,n]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState(!1),u=it(),d=async h=>{h.preventDefault(),a(""),n(""),l(!0);try{await dp(It,t),n("Un email de rinitialisation a t envoy.")}catch{a("Erreur lors de l'envoi de l'email. Vrifiez l'adresse saisie.")}finally{l(!1)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[r.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-blue-700 flex items-center justify-center shadow-sm",children:r.jsx("div",{className:"text-white font-bold text-lg",children:"E"})}),r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Rinitialiser le mot de passe"})]}),r.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:r.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&r.jsx("div",{className:"bg-green-50 border-l-4 border-green-600 p-4 mb-6 text-green-700",children:s}),i&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-600 p-4 mb-6 text-red-700",children:i}),r.jsxs("form",{className:"space-y-6",onSubmit:d,children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Adresse email"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:h=>e(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:o,className:`w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-800 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-70 cursor-not-allowed":""}`,children:o?"Envoi en cours...":"Envoyer le lien de rinitialisation"})})]}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx("button",{onClick:()=>u("/login"),className:"text-blue-600 hover:text-blue-800 text-sm",children:"Retour  la connexion"})})]})})]})},ND=()=>{const{currentUser:t}=Te(),[e,s]=b.useState(""),[n,i]=b.useState((t==null?void 0:t.email)||""),[a,o]=b.useState(!1),[l,u]=b.useState(!1),[d,h]=b.useState(null),p=async x=>{x.preventDefault(),u(!0),h(null);try{await Ut(Se(ne,"feedback"),{message:e,email:n||null,userId:(t==null?void 0:t.uid)||null,createdAt:Xe.now()}),o(!0),s("")}catch{h("Erreur lors de l'envoi du feedback. Veuillez ressayer.")}finally{u(!1)}};return a?r.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:r.jsxs("div",{className:"max-w-xl mx-auto p-8 bg-green-50 border border-green-200 rounded-xl text-center shadow relative",children:[r.jsxs(Y,{to:"/",className:"absolute left-6 top-6 flex items-center text-blue-700 hover:text-blue-900 font-medium text-sm",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"})," Retour  l'accueil"]}),r.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-green-800 mb-2 mt-6",children:"Merci pour votre retour !"}),r.jsx("p",{className:"text-green-700",children:"Votre avis a bien t transmis  l'quipe. Nous apprcions votre contribution !"}),r.jsx("button",{className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",onClick:()=>o(!1),children:"Envoyer un autre avis"})]})}):r.jsx("div",{className:"min-h-[60vh] bg-gray-50 py-12 px-2",children:r.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-xl shadow-xl p-8 md:p-10 border border-blue-100 relative",children:[r.jsxs(Y,{to:"/",className:"absolute left-6 top-6 flex items-center text-blue-700 hover:text-blue-900 font-medium text-sm",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"})," Retour  l'accueil"]}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-blue-900 mb-4 text-center mt-6",children:"Donnez votre avis"}),r.jsx("p",{className:"mb-8 text-gray-600 text-center",children:"N'hsitez pas  nous faire part de vos remarques, suggestions ou critiques constructives pour amliorer la plateforme."}),r.jsxs("form",{onSubmit:p,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Votre message *"}),r.jsx("textarea",{id:"message",required:!0,rows:5,className:"w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Votre avis, suggestion ou critique...",value:e,onChange:x=>s(x.target.value)})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email (optionnel)"}),r.jsx("input",{id:"email",type:"email",className:"w-full rounded-lg border border-blue-200 bg-blue-50/30 shadow-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-400 focus:bg-white transition-all placeholder-gray-400 text-base px-4 py-2",placeholder:"Laisser vide pour rester anonyme",value:n,onChange:x=>i(x.target.value)})]}),d&&r.jsx("div",{className:"text-red-600 text-sm text-center",children:d}),r.jsx("button",{type:"submit",disabled:l,className:"w-full py-2 px-4 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition disabled:opacity-60",children:l?"Envoi...":"Envoyer"})]})]})})},_D=()=>{const{currentUser:t}=Te(),e=it(),s=[{title:"Gestion du contenu",description:"diter les sections du guide, modifier le contenu informatif",icon:r.jsx(sr,{className:"w-8 h-8 text-blue-500"}),link:"/editor/content"},{title:"Gestion des ressources",description:"Ajouter, modifier ou supprimer des ressources",icon:r.jsx(We,{className:"w-8 h-8 text-green-500"}),link:"/editor/resources"},{title:"Gestion de la FAQ",description:"Rpondre aux questions et grer les catgories de FAQ",icon:r.jsx(cr,{className:"w-8 h-8 text-yellow-500"}),link:"/editor/faq?mode=faq"},{title:"Modration du forum",description:"Grer les catgories, pingler, verrouiller ou supprimer des discussions",icon:r.jsx(ot,{className:"w-8 h-8 text-purple-500"}),link:"/editor/forum"},{title:"Gestion des webinaires",description:"Crer, modifier et supprimer des webinaires",icon:r.jsx(Os,{className:"w-8 h-8 text-blue-600"}),link:"/editor/webinars"},{title:"Gestion de Dropbox",description:"Accder et grer les fichiers sur Dropbox",icon:r.jsx(jR,{className:"w-8 h-8 text-blue-400"}),link:"/editor/dropbox"}];return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Tableau de bord diteur"}),r.jsxs("p",{className:"text-gray-600 mt-2",children:["Bienvenue ",(t==null?void 0:t.displayName)||"diteur",", grez le contenu et les ressources de la plateforme."]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:s.map((n,i)=>r.jsxs(Y,{to:n.link,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6 flex flex-col",children:[r.jsx("div",{className:"mb-4",children:n.icon}),r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:n.title}),r.jsx("p",{className:"text-gray-600 flex-grow",children:n.description}),r.jsx("div",{className:"mt-4 text-blue-600 font-medium hover:text-blue-800",children:"Accder "})]},i))})]})},ED=()=>{const{currentUser:t,isAdmin:e,isEditor:s,isSuperAdmin:n}=Te(),i=it(),[a,o]=b.useState(!1),[l,u]=b.useState("main");b.useEffect(()=>{(async()=>{if(t)try{const R=await n();o(R)}catch(R){console.error("Erreur lors de la vrification du statut superadmin:",R)}})()},[t,n]);const d={main:{title:"Fonctionnalits principales",icon:r.jsx(y2,{className:"w-6 h-6 text-yellow-500"}),features:[{icon:r.jsx(sr,{className:"w-8 h-8 text-blue-500"}),title:"Guide de prparation",description:"Accdez au guide de prparation et au contenu informatif",link:"/dashboard",roles:["admin","editor","user"]},{icon:r.jsx(We,{className:"w-8 h-8 text-green-500"}),title:"Bibliothque de ressources",description:"Consultez les documents et ressources disponibles",link:"/resources",roles:["admin","editor","user"]},{icon:r.jsx(cr,{className:"w-8 h-8 text-yellow-500"}),title:"FAQ",description:"Consultez les questions frquentes ou posez vos questions",link:"/faq",roles:["admin","editor","user"]},{icon:r.jsx(ot,{className:"w-8 h-8 text-purple-500"}),title:"Forum",description:"Participez aux discussions avec les autres tudiants",link:"/forum",roles:["admin","editor","user"]},{icon:r.jsx(Os,{className:"w-8 h-8 text-blue-500"}),title:"Webinaires",description:"Dcouvrez et inscrivez-vous aux webinaires  venir",link:"/webinars",roles:["admin","editor","user"]}]},admin:{title:"Administration",icon:r.jsx(Ot,{className:"w-6 h-6 text-red-500"}),features:[{icon:r.jsx(Qu,{className:"w-8 h-8 text-gray-700"}),title:"Tableau de bord administrateur",description:"Accdez au panneau d'administration complet",link:"/admin",roles:["admin"]},{icon:r.jsx(sr,{className:"w-8 h-8 text-blue-600"}),title:"Gestion du contenu",description:"diter les sections du guide et le contenu informatif",link:"/admin/content",roles:["admin","editor"]},{icon:r.jsx(We,{className:"w-8 h-8 text-green-600"}),title:"Gestion des ressources",description:"Ajouter, modifier ou supprimer des ressources",link:"/admin/resources",roles:["admin","editor"]},{icon:r.jsx(ct,{className:"w-8 h-8 text-indigo-600"}),title:"Gestion des utilisateurs",description:"Grer les comptes utilisateurs et les permissions",link:"/admin/users",roles:["admin"]},{icon:r.jsx(Mx,{className:"w-8 h-8 text-blue-700"}),title:"Gestion de Dropbox",description:"Accder et grer les fichiers sur Dropbox",link:"/admin/dropbox",roles:["admin","editor"]},{icon:r.jsx(iR,{className:"w-8 h-8 text-green-700"}),title:"Suivi des progressions",description:"Visualiser la progression des tudiants",link:"/admin/progressions",roles:["admin"]},{icon:r.jsx(c2,{className:"w-8 h-8 text-red-600"}),title:"Logs d'activit",description:"Consulter les journaux d'activit du systme",link:"/admin/activity",roles:["admin"]},{icon:r.jsx(oR,{className:"w-8 h-8 text-yellow-600"}),title:"Gestion des feedbacks",description:"Consulter et grer les retours utilisateurs",link:"/admin/feedbacks",roles:["admin","editor"]}]},editor:{title:"dition",icon:r.jsx(sr,{className:"w-6 h-6 text-blue-500"}),features:[{icon:r.jsx(Qu,{className:"w-8 h-8 text-blue-600"}),title:"Tableau de bord diteur",description:"Accdez au panneau d'dition de contenu",link:"/editor",roles:["editor"]},{icon:r.jsx(cr,{className:"w-8 h-8 text-yellow-600"}),title:"Gestion de la FAQ",description:"Rpondre aux questions et grer les catgories de FAQ",link:"/editor/faq?mode=faq",roles:["editor"]},{icon:r.jsx(ot,{className:"w-8 h-8 text-purple-600"}),title:"Modration du forum",description:"Modrer les discussions et grer les catgories",link:"/editor/forum",roles:["editor"]}]},travel:{title:"Voyage et Installation",icon:r.jsx(jl,{className:"w-6 h-6 text-blue-600"}),features:[{icon:r.jsx(jl,{className:"w-8 h-8 text-blue-600"}),title:"Achat de billets d'avion",description:"Systme de recherche et d'achat de billets  tarifs prfrentiels",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:r.jsx(ER,{className:"w-8 h-8 text-indigo-600"}),title:"Rservations de logement",description:"Service de rservation de logements  Rouen",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:r.jsx(Tp,{className:"w-8 h-8 text-green-600"}),title:"Planificateur de voyage",description:"Outil de planification avec alertes et check-lists",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:r.jsx(Ox,{className:"w-8 h-8 text-yellow-600"}),title:"Itinraires personnaliss",description:"Cration d'itinraires depuis le pays d'origine jusqu' l'ESIGELEC",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]},tools:{title:"Outils et Services",icon:r.jsx(cR,{className:"w-6 h-6 text-indigo-600"}),features:[{icon:r.jsx(wl,{className:"w-8 h-8 text-indigo-500"}),title:"Assistant IA",description:"Posez vos questions  notre assistant intelligent",link:"/chat-ai",roles:["admin"],disabled:!a},{icon:r.jsx(qn,{className:"w-8 h-8 text-green-600"}),title:"Tlchargements",description:"Tlchargez des documents et outils utiles",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:r.jsx(Vx,{className:"w-8 h-8 text-blue-500"}),title:"Traduction multilingue",description:"Service de traduction pour les documents importants",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0},{icon:r.jsx(qx,{className:"w-8 h-8 text-red-600"}),title:"Assistance mobile",description:"Application mobile d'assistance et de suivi",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]},advanced:{title:"Fonctionnalits avances",icon:r.jsx(UR,{className:"w-6 h-6 text-yellow-600"}),features:[{icon:r.jsx(Os,{className:"w-8 h-8 text-red-500"}),title:"Webinaires",description:"Participez  des webinaires et sessions d'information",link:"/webinars",roles:["admin","editor","user"]},{icon:r.jsx(zx,{className:"w-8 h-8 text-purple-600"}),title:"API et intgrations",description:"Intgrez nos services  vos applications",link:"#",roles:["admin"],disabled:!0,comingSoon:!0},{icon:r.jsx(fR,{className:"w-8 h-8 text-purple-600"}),title:"Paiements scuriss",description:"Systme de paiement scuris multi-devises",link:"#",roles:["admin","editor","user"],disabled:!0,comingSoon:!0}]}},p=e()?"admin":s()?"editor":"user",x=Object.entries(d).reduce((C,[R,S])=>{const y=S.features.filter(v=>v.roles.includes(p));return y.length>0&&(C[R]={...S,features:y}),C},{}),j=Object.keys(x);return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"flex items-center mb-4",children:r.jsxs("button",{onClick:()=>i("/dashboard"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors mr-4",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour au tableau de bord"]})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Centre d'applications"}),r.jsxs("p",{className:"text-gray-600 mt-2",children:["Bienvenue ",(t==null?void 0:t.displayName)||"Utilisateur",", accdez  toutes les fonctionnalits disponibles pour votre compte."]})]}),r.jsx("div",{className:"mb-8 flex flex-wrap gap-2",children:j.map(C=>r.jsxs("button",{onClick:()=>u(C),className:`px-4 py-2 rounded-full flex items-center ${l===C?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:x[C].icon}),x[C].title]},C))}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-6 flex items-center",children:[x[l].icon,r.jsx("span",{className:"ml-2",children:x[l].title})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x[l].features.map((C,R)=>r.jsxs("div",{className:`bg-white rounded-lg shadow-md p-6 flex flex-col ${C.disabled?"opacity-70 cursor-not-allowed":"hover:shadow-lg transition-shadow cursor-pointer"}`,children:[r.jsx("div",{className:"mb-4",children:C.icon}),r.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2 flex items-center",children:[C.title,C.comingSoon&&r.jsx("span",{className:"ml-2 bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-0.5 rounded",children:"Bientt disponible"})]}),r.jsx("p",{className:"text-gray-600 flex-grow",children:C.description}),r.jsx("div",{className:"mt-4",children:C.disabled?r.jsx("span",{className:"text-gray-500 font-medium",children:C.comingSoon?"En dveloppement":"Non disponible"}):r.jsx(Y,{to:C.link,className:"text-blue-600 font-medium hover:text-blue-800",children:"Accder "})})]},R))})]}),Object.keys(x).some(C=>x[C].features.some(R=>R.comingSoon))&&r.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[r.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-3 flex items-center",children:[r.jsx(lr,{className:"w-5 h-5 mr-2"}),"Nouvelles fonctionnalits en dveloppement"]}),r.jsx("p",{className:"text-blue-700",children:'Nous travaillons continuellement  amliorer la plateforme. Les fonctionnalits marques "Bientt disponible" seront dployes progressivement au cours des prochains mois.'})]})]})},am=({webinar:t})=>{const e=u=>{switch(u.toLowerCase()){case"workshop":return r.jsx(Os,{className:"h-5 w-5 text-blue-500"});case"coaching":return r.jsx(fi,{className:"h-5 w-5 text-purple-500"});case"info":return r.jsx(g2,{className:"h-5 w-5 text-green-500"});case"campus-france":return r.jsx(Fx,{className:"h-5 w-5 text-red-500"});case"academique":return r.jsx(VR,{className:"h-5 w-5 text-yellow-500"});case"installation":return r.jsx(h2,{className:"h-5 w-5 text-indigo-500"});default:return r.jsx(vs,{className:"h-5 w-5 text-gray-500"})}},s=u=>({workshop:"Atelier",coaching:"Coaching",info:"Information","campus-france":"Campus France",academique:"Acadmique",installation:"Installation"})[u.toLowerCase()]||u,n={beginner:"bg-green-100 text-green-800",intermediate:"bg-yellow-100 text-yellow-800",advanced:"bg-red-100 text-red-800"},i={beginner:"Dbutant",intermediate:"Intermdiaire",advanced:"Avanc"},a=u=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(u),o=t.currentParticipants>=t.maxParticipants,l=t.isCompleted||o;return r.jsxs("div",{className:`flex flex-col rounded-xl shadow-sm overflow-hidden h-full transition-all duration-200 hover:shadow-md ${l?"opacity-75":"hover:-translate-y-1"}`,children:[r.jsxs("div",{className:"relative",children:[t.imageUrl?r.jsx("img",{src:t.imageUrl,alt:t.title,className:"h-48 w-full object-cover"}):r.jsx("div",{className:"h-48 w-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:r.jsx(Os,{className:"h-16 w-16 text-white opacity-20"})}),t.isLive&&r.jsx("div",{className:"absolute top-3 right-3",children:r.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full bg-red-600 text-white text-sm font-medium",children:[r.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"En direct"]})}),r.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex flex-wrap gap-2",children:[r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${n[t.level]||"bg-gray-100 text-gray-800"}`,children:i[t.level]||t.level}),r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e(t.category),r.jsx("span",{className:"ml-1",children:s(t.category)})]})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col p-6 bg-white",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-2",children:[r.jsx(rr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsx("time",{dateTime:t.date.toISOString(),children:a(t.date)})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2 line-clamp-2",children:t.title}),r.jsx("p",{className:"mt-2 text-gray-600 line-clamp-3",children:t.description}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(lr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsxs("span",{children:[t.duration," minutes"]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(ct,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsxs("span",{children:[t.currentParticipants," / ",t.maxParticipants," participants",o&&" (Complet)"]})]}),r.jsxs("div",{className:"flex items-start text-sm text-gray-500",children:[r.jsx(Ts,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:t.speaker.name}),r.jsx("p",{className:"text-gray-500",children:t.speaker.title})]})]})]}),t.tags.length>0&&r.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:t.tags.map((u,d)=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:u},d))})]}),r.jsxs("div",{className:"mt-6",children:[t.isCompleted?r.jsxs("div",{className:"text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(vs,{className:"h-5 w-5 text-green-500 mr-2"}),"Session termine"]}),t.meetingLink&&r.jsxs("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center text-blue-600 hover:text-blue-800 text-sm",children:["Voir l'enregistrement ",r.jsx(Wu,{className:"ml-1 h-4 w-4"})]})]}):o?r.jsx("div",{className:"text-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-gray-700 bg-gray-100",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx(ps,{className:"h-5 w-5 text-red-500 mr-2"}),"Complet"]})}):t.isLive?r.jsxs("a",{href:t.meetingLink||"#",target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"Rejoindre maintenant"]}):r.jsx(Y,{to:`/webinars/${t.id}`,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"S'inscrire maintenant"}),!t.isCompleted&&!o&&t.isUpcoming&&!t.isLive&&r.jsxs("div",{className:"mt-2 text-center text-xs text-gray-500",children:[r.jsx(lr,{className:"inline-block h-3 w-3 mr-1"}),(()=>{const u=new Date,h=new Date(t.date).getTime()-u.getTime(),p=Math.ceil(h/(1e3*60*60*24));return p<=0?"Inscriptions closes":p===1?"Clture des inscriptions aujourd'hui":p===2?"Clture des inscriptions demain":`Clture des inscriptions dans ${p} jours`})()]})]})]})]})},kD=()=>{const{currentUser:t}=Te(),e=it(),[s,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState(""),[u,d]=b.useState(""),[h,p]=b.useState("all"),[x,j]=b.useState("all"),[C,R]=b.useState(!1),[S,y]=b.useState(!1),[v,_]=b.useState(!1),[P,L]=b.useState(!1),[M,N]=b.useState([]),[f,w]=b.useState([]),[E,A]=b.useState(!1),[I,k]=b.useState(!1),B=b.useCallback(async()=>{if(t){A(!0);try{const U=kt(Se(ne,"webinarFavorites"),or("userId","==",t.uid)),X=await Ye(U),oe=[];X.forEach(me=>{const _e=me.data();_e.webinarId&&oe.push(_e.webinarId)}),N(oe)}catch(U){console.error("Erreur lors de la rcupration des favoris:",U)}finally{A(!1)}}},[t]),$=b.useCallback(async()=>{if(t){k(!0);try{const U=kt(Se(ne,"webinarRegistrations"),or("userId","==",t.uid)),X=await Ye(U),oe=[];X.forEach(me=>{const _e=me.data();_e.webinarId&&oe.push(_e.webinarId)}),w(oe)}catch(U){console.error("Erreur lors de la rcupration des inscriptions:",U)}finally{k(!1)}}},[t]);b.useEffect(()=>{H()},[]),b.useEffect(()=>{t?(B(),$()):(N([]),w([]))},[t,B,$]);const H=async()=>{a(!0),l("");try{const U=Se(ne,"webinars"),X=kt(U,Hn("date","asc")),oe=await Ye(X),me=[];oe.forEach(_e=>{var ae;const ee=_e.data(),J={id:_e.id,title:ee.title,description:ee.description,date:((ae=ee.date)==null?void 0:ae.toDate())||new Date,duration:ee.duration,maxParticipants:ee.maxParticipants,currentParticipants:ee.currentParticipants,category:ee.category,customCategory:ee.customCategory,level:ee.level,imageUrl:ee.imageUrl,speaker:ee.speaker,meetingLink:ee.meetingLink,isLive:ee.isLive,isUpcoming:ee.isUpcoming,isCompleted:ee.isCompleted,tags:ee.tags||[],createdBy:ee.createdBy,createdAt:ee.createdAt,updatedAt:ee.updatedAt};me.push(J)}),n(me),a(!1)}catch(U){console.error("Erreur lors de la rcupration des webinaires:",U),l("Erreur lors de la rcupration des webinaires. Veuillez ressayer ultrieurement."),a(!1)}},O=s.filter(U=>{const X=U.title.toLowerCase().includes(u.toLowerCase())||U.description.toLowerCase().includes(u.toLowerCase())||U.tags.some(ae=>ae.toLowerCase().includes(u.toLowerCase())),oe=h==="all"||U.category===h,me=x==="all"||U.level===x,_e=C||U.isUpcoming||U.isLive,ee=v?M.includes(U.id):!0,J=P?f.includes(U.id):!0;return X&&oe&&me&&_e&&ee&&J}),F=O.filter(U=>U.isUpcoming),re=O.filter(U=>U.isLive),V=C?O.filter(U=>U.isCompleted):[];return r.jsx("div",{className:"bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Webinaires & vnements"}),r.jsx("p",{className:"max-w-2xl mx-auto text-xl text-gray-500",children:"Restez inform et participez aux vnements organiss pour la communaut ESIG."}),t&&r.jsxs("div",{className:"mt-6 flex flex-wrap gap-3 justify-center",children:[r.jsxs("button",{onClick:()=>e("/proposer-atelier"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[r.jsx(as,{className:"-ml-1 mr-2 h-4 w-4"}),"Proposer un atelier"]}),r.jsxs("button",{onClick:()=>e("/mes-propositions"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(ot,{className:"-ml-1 mr-2 h-4 w-4"}),"Mes propositions"]})]})]}),o&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(ps,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:o})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4",children:[r.jsxs("div",{className:"relative flex-grow",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Xr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:u,onChange:U=>d(U.target.value),placeholder:"Rechercher un vnement...",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 pr-3 py-2 sm:text-sm border-gray-300 rounded-md"}),u&&r.jsx("button",{onClick:()=>d(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r.jsx(ps,{className:"h-5 w-5 text-gray-400 hover:text-gray-500"})})]}),r.jsxs("button",{onClick:()=>y(!S),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(Ap,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400"}),"Filtres ",S?"":""]}),t&&r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mt-4",children:[r.jsxs("button",{onClick:()=>{_(!0),L(!1)},className:`inline-flex items-center px-4 py-2 border ${v?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700"} rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,children:[r.jsx(d2,{className:`-ml-1 mr-2 h-5 w-5 ${v?"text-blue-500 fill-current":"text-gray-400"}`}),"Favoris ",E&&r.jsx("span",{className:"ml-2 animate-pulse",children:"..."})]}),r.jsxs("button",{onClick:()=>{L(!0),_(!1)},className:`inline-flex items-center px-4 py-2 border ${P?"border-green-500 bg-green-50 text-green-700":"border-gray-300 bg-white text-gray-700"} rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`,children:[r.jsx(fi,{className:`-ml-1 mr-2 h-5 w-5 ${P?"text-green-500":"text-gray-400"}`}),"Mes inscriptions ",I&&r.jsx("span",{className:"ml-2 animate-pulse",children:"..."})]}),(v||P)&&r.jsxs("button",{onClick:()=>{_(!1),L(!1)},className:"inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-gray-700 rounded-md shadow-sm text-sm font-medium hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx(ps,{className:"ml-1 mr-2 h-5 w-5 text-gray-400"}),"Tous les webinaires"]})]})]}),S&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'vnement"}),r.jsxs("select",{id:"category",value:h,onChange:U=>p(U.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[r.jsx("option",{value:"all",children:"Tous les types"}),r.jsx("option",{value:"workshop",children:"Ateliers"}),r.jsx("option",{value:"coaching",children:"Coaching"}),r.jsx("option",{value:"info",children:"Information"}),r.jsx("option",{value:"campus-france",children:"Campus France"}),r.jsx("option",{value:"academique",children:"Acadmique"}),r.jsx("option",{value:"installation",children:"Installation"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau"}),r.jsxs("select",{id:"level",value:x,onChange:U=>j(U.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[r.jsx("option",{value:"all",children:"Tous les niveaux"}),r.jsx("option",{value:"beginner",children:"Dbutant"}),r.jsx("option",{value:"intermediate",children:"Intermdiaire"}),r.jsx("option",{value:"advanced",children:"Avanc"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"showPastEvents",type:"checkbox",checked:C,onChange:()=>R(!C),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"showPastEvents",className:"ml-2 block text-sm text-gray-700",children:"Afficher les vnements passs"})]})]})})]}),re.length>0&&r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-red-500 rounded-full"}),r.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"En direct maintenant"}),r.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-red-100 text-red-800",children:[re.length," en cours"]})]}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:re.map(U=>r.jsx(am,{webinar:U},U.id))})]}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-blue-500 rounded-full"}),r.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"Prochains vnements"}),r.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[F.length,"  venir"]})]}),i?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):F.length>0?r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:F.map(U=>r.jsx(am,{webinar:U},U.id))}):r.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[r.jsx(Tp,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucun vnement  venir"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Revenez plus tard pour dcouvrir nos prochains webinaires."}),t&&(t.isAdmin||t.isEditor)&&!v&&r.jsx("div",{className:"mt-6",children:r.jsxs(Y,{to:"/admin/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow px-5 py-3 inline-flex items-center text-base font-medium text-blue-600 hover:bg-blue-50",children:[r.jsx(as,{className:"-ml-1 mr-2 h-4 w-4"}),"Crer un vnement"]})})]})]}),C&&r.jsx("div",{children:i?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-500"})}):V.length>0?r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center mb-6",children:[r.jsx("div",{className:"flex-shrink-0 h-8 w-1 bg-gray-300 rounded-full"}),r.jsx("h2",{className:"ml-3 text-2xl font-bold text-gray-900",children:"vnements passs"}),r.jsxs("span",{className:"ml-4 inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:[V.length," vnements"]})]}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:V.map(U=>r.jsx(am,{webinar:U},U.id))})]}):r.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[r.jsx(Tp,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucun vnement pass"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Les vnements passs apparatront ici."})]})}),r.jsxs("div",{className:"mt-16 bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl shadow-xl overflow-hidden lg:grid lg:grid-cols-2 lg:gap-4",children:[r.jsx("div",{className:"pt-10 pb-12 px-6 sm:pt-16 sm:px-16 lg:py-16 lg:pr-0 xl:py-20 xl:px-20",children:r.jsxs("div",{className:"lg:self-center",children:[r.jsx("h2",{className:"text-3xl font-extrabold text-white sm:text-4xl",children:r.jsx("span",{className:"block",children:"Vous proposez un atelier ?"})}),r.jsx("p",{className:"mt-4 text-lg leading-6 text-blue-100",children:"Rejoignez notre quipe d'intervenants et partagez votre expertise avec notre communaut tudiante."}),r.jsxs(Y,{to:"/proposer-un-atelier",className:"mt-8 bg-white border border-transparent rounded-md shadow px-5 py-3 inline-flex items-center text-base font-medium text-blue-600 hover:bg-blue-50",children:["Proposer un atelier ",r.jsx(Wu,{className:"ml-3 -mr-1 h-5 w-5"})]})]})}),r.jsx("div",{className:"-mt-6 aspect-w-5 aspect-h-3 md:aspect-w-2 md:aspect-h-1",children:r.jsx("img",{className:"transform translate-x-6 translate-y-6 rounded-md object-cover object-left-top sm:translate-x-16 lg:translate-y-20",src:"https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",alt:"tudiants en atelier"})})]})]})})},SD=({webinar:t,onClose:e})=>{const{currentUser:s}=Te(),[n,i]=b.useState(!1),[a,o]=b.useState(!1),[l,u]=b.useState(null),[d,h]=b.useState({name:(s==null?void 0:s.displayName)||"",email:(s==null?void 0:s.email)||"",phone:"",question:"",receiveUpdates:!0}),p=C=>{const{name:R,value:S,type:y}=C.target,v=y==="checkbox"?C.target.checked:void 0;h(_=>({..._,[R]:y==="checkbox"?v:S}))},x=async C=>{if(C.preventDefault(),u(null),!d.name.trim()||!d.email.trim()){u("Veuillez remplir tous les champs obligatoires.");return}if(!/\S+@\S+\.\S+/.test(d.email)){u("Veuillez entrer une adresse email valide.");return}if(!s){u("Vous devez tre connect pour vous inscrire  un webinaire.");return}i(!0);try{const R=be(ne,"webinars",t.id),S=await xt(R);if(!S.exists())throw new Error("Ce webinaire n'existe plus.");const y=S.data();if(y.currentParticipants>=y.maxParticipants)throw new Error("Dsol, ce webinaire est complet.");const v={webinarId:t.id,webinarTitle:t.title,userId:s.uid,userName:d.name,userEmail:d.email,userPhone:d.phone,question:d.question,receiveUpdates:d.receiveUpdates,status:"confirmed",registeredAt:is(),webinarDate:t.date},_=await Ut(Se(ne,"webinarRegistrations"),v);if(await ts(R,{currentParticipants:VN(1),updatedAt:is()}),s.uid)try{const P=be(ne,"users",s.uid),L=await xt(P);L.exists()&&await ts(P,{webinarRegistrations:[...L.data().webinarRegistrations||[],_.id],updatedAt:is()})}catch(P){console.error("Erreur lors de la mise  jour du profil utilisateur:",P)}o(!0),setTimeout(()=>{e()},3e3)}catch(R){console.error("Erreur lors de l'inscription:",R),R instanceof Error?u(R.message):u(typeof R=="string"?R:"Une erreur est survenue lors de votre inscription. Veuillez ressayer.")}finally{i(!1)}},j=C=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(C);return a?r.jsx("div",{className:"rounded-lg bg-green-50 p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(vs,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Inscription confirme !"}),r.jsx("div",{className:"mt-2 text-sm text-green-700",children:r.jsx("p",{children:"Votre inscription au webinaire a bien t enregistre. Vous recevrez bientt un email de confirmation avec les dtails de connexion."})}),t.meetingLink&&r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"-mx-2 -my-1.5 flex",children:r.jsx("a",{href:t.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"rounded-md bg-green-50 px-2 py-1.5 text-sm font-medium text-green-800 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50",children:"Accder au webinaire"})})})]})]})}):r.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:r.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"S'inscrire au webinaire"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Compltez le formulaire ci-dessous pour vous inscrire  ce webinaire."})]}),r.jsx("button",{type:"button",onClick:e,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:r.jsx(St,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"mt-6 border-t border-gray-200 pt-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-blue-800",children:t.title}),r.jsxs("div",{className:"mt-2 space-y-2 text-sm text-blue-700",children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx(rr,{className:"flex-shrink-0 h-5 w-5 mr-2"}),r.jsx("span",{children:j(t.date)})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(lr,{className:"flex-shrink-0 h-5 w-5 mr-2"}),r.jsxs("span",{children:[t.duration," minutes"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ct,{className:"flex-shrink-0 h-5 w-5 mr-2"}),r.jsxs("span",{children:[t.currentParticipants+1," / ",t.maxParticipants," participants (dont vous)"]})]})]})]}),l&&r.jsx("div",{className:"rounded-md bg-red-50 p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(u2,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),r.jsx("div",{className:"ml-3",children:r.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})]})}),r.jsxs("form",{onSubmit:x,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-4",children:"Vos informations"}),r.jsxs("div",{className:"grid grid-cols-1 gap-y-4 gap-x-4 sm:grid-cols-6",children:[r.jsxs("div",{className:"sm:col-span-3",children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["Nom complet ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(Ts,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",name:"name",id:"name",value:d.name,onChange:p,className:"block w-full pl-10 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]}),r.jsxs("div",{className:"sm:col-span-3",children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(zr,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"email",name:"email",id:"email",value:d.email,onChange:p,className:"block w-full pl-10 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]})]}),r.jsxs("div",{className:"sm:col-span-3",children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Tlphone"}),r.jsx("div",{className:"mt-1",children:r.jsx("input",{type:"tel",name:"phone",id:"phone",value:d.phone,onChange:p,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"question",className:"block text-sm font-medium text-gray-700",children:"Avez-vous des questions pour l'intervenant ?"}),r.jsx("div",{className:"mt-1",children:r.jsx("textarea",{id:"question",name:"question",rows:3,value:d.question,onChange:p,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Posez ici vos questions  l'avance..."})})]}),r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex items-center h-5",children:r.jsx("input",{id:"receiveUpdates",name:"receiveUpdates",type:"checkbox",checked:d.receiveUpdates,onChange:p,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),r.jsxs("div",{className:"ml-3 text-sm",children:[r.jsx("label",{htmlFor:"receiveUpdates",className:"font-medium text-gray-700",children:"Recevoir les mises  jour concernant ce webinaire"}),r.jsx("p",{className:"text-gray-500",children:"Vous recevrez des rappels et des informations complmentaires par email."})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:e,className:"py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),r.jsx("button",{type:"submit",disabled:n,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${n?"opacity-75 cursor-not-allowed":""}`,children:n?r.jsxs(r.Fragment,{children:[r.jsx(AR,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"Traitement..."]}):"Confirmer l'inscription"})]})})]})]})})]})})},CD=()=>{const{id:t}=pd(),{currentUser:e}=Te(),s=it(),[n,i]=b.useState(null),[a,o]=b.useState(!0),[l,u]=b.useState(null),[d,h]=b.useState(!1),[p,x]=b.useState(!1),[j,C]=b.useState(!1),[R,S]=b.useState(!1),y=b.useCallback(async f=>{if(e)try{const w=kt(Se(ne,"webinarRegistrations"),or("userId","==",e.uid),or("webinarId","==",f)),E=await Ye(w);x(!E.empty)}catch(w){console.error("Erreur lors de la vrification de l'inscription:",w),x(!1)}},[e]),v=b.useCallback(async f=>{if(e)try{const w=be(ne,"webinarFavorites",`${e.uid}_${f}`),E=await xt(w);C(E.exists())}catch(w){console.error("Erreur lors de la vrification des favoris:",w)}},[e]);b.useEffect(()=>{(async()=>{var E;if(t)try{o(!0);const A=be(ne,"webinars",t),I=await xt(A);if(I.exists()){const k=I.data(),B={id:I.id,title:k.title,description:k.description,date:((E=k.date)==null?void 0:E.toDate())||new Date,duration:k.duration,maxParticipants:k.maxParticipants,currentParticipants:k.currentParticipants,category:k.category,level:k.level,imageUrl:k.imageUrl,speaker:k.speaker,meetingLink:k.meetingLink,isLive:k.isLive,isUpcoming:k.isUpcoming,isCompleted:k.isCompleted,tags:k.tags||[],createdBy:k.createdBy,createdAt:k.createdAt,updatedAt:k.updatedAt};i(B);const $=new Date,H=B.date,O=typeof B.duration=="string"?parseInt(B.duration)||60:B.duration||60,F=new Date(H);F.setMinutes(F.getMinutes()+O);const re=$>=H&&$<=F,V=$.getFullYear()===H.getFullYear()&&$.getMonth()===H.getMonth()&&$.getDate()===H.getDate();S(V&&re),e&&(y(I.id),v(I.id)),u(null)}else u("Ce webinaire n'existe pas ou a t supprim.")}catch(A){console.error("Erreur lors du chargement du webinaire:",A),u("Impossible de charger les dtails du webinaire. Veuillez ressayer plus tard.")}finally{o(!1)}})();const w=setInterval(()=>{if(n){const E=new Date,A=n.date,I=E.getFullYear()===A.getFullYear()&&E.getMonth()===A.getMonth()&&E.getDate()===A.getDate(),k=new Date(A),B=typeof n.duration=="string"?parseInt(n.duration)||60:n.duration||60;k.setMinutes(k.getMinutes()+B);const $=E>=A&&E<=k;S(I&&$)}},6e4);return()=>clearInterval(w)},[t,e,n,v,y]);const _=()=>{if(!e){s("/login",{state:{from:`/webinars/${t}`}});return}h(!0)},P=async()=>{if(!e){s("/login",{state:{from:`/webinars/${t}`}});return}if(n)try{const f=`${e.uid}_${n.id}`,w=be(ne,"webinarFavorites",f);j?await Rn(w):await Ns(w,{userId:e.uid,webinarId:n.id,webinarTitle:n.title,addedAt:new Date}),C(!j)}catch(f){console.error("Erreur lors de la modification des favoris:",f),alert("Une erreur est survenue. Veuillez ressayer.")}},L=()=>{navigator.share?navigator.share({title:(n==null?void 0:n.title)||"Webinaire",text:`Dcouvrez ce webinaire: ${n==null?void 0:n.title}`,url:window.location.href}).catch(console.error):navigator.clipboard.writeText(window.location.href).then(()=>{alert("Lien copi dans le presse-papiers !")})},M=()=>{if(!n)return;const f=n.date,w=new Date(f);w.setMinutes(w.getMinutes()+n.duration);const E=$=>$.toISOString().replace(/[:-]/g,"").replace(/\.\d+/,""),A=["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT",`DTSTART:${E(f)}`,`DTEND:${E(w)}`,`SUMMARY:${n.title}`,`DESCRIPTION:${n.description.replace(/\n/g,"\\n")}`,`LOCATION:${n.meetingLink||"En ligne"}`,"END:VEVENT","END:VCALENDAR"].join(`
`),I=new Blob([A],{type:"text/calendar;charset=utf-8"}),k=URL.createObjectURL(I),B=document.createElement("a");B.href=k,B.download=`webinaire-${n.id}.ics`,document.body.appendChild(B),B.click(),document.body.removeChild(B)},N=f=>new Intl.DateTimeFormat("fr-FR",{weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(f);return r.jsx("div",{className:"bg-gray-50 min-h-screen py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("div",{className:"mb-6",children:r.jsxs(Y,{to:"/webinars",className:"inline-flex items-center text-blue-600 hover:text-blue-800",children:[r.jsx(ze,{className:"h-4 w-4 mr-1"})," Retour aux webinaires"]})}),a?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?r.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(ps,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:l})]}),r.jsx("div",{className:"mt-4",children:r.jsx(Y,{to:"/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Retour  la liste des webinaires"})})]}):n?r.jsxs("div",{className:"bg-white shadow-md rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.title}),r.jsxs("div",{className:"mt-1 flex flex-col sm:flex-row sm:flex-wrap sm:mt-0 sm:space-x-6",children:[r.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[r.jsx(rr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsx("time",{dateTime:n.date.toISOString(),children:N(n.date)})]}),r.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[r.jsx(lr,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsxs("span",{children:[n.duration," minutes"]})]}),r.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[r.jsx(ct,{className:"flex-shrink-0 mr-1.5 h-5 w-5 text-gray-400"}),r.jsxs("span",{children:[n.currentParticipants," / ",n.maxParticipants," participants"]})]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:P,className:`p-2 rounded-full ${j?"text-yellow-500 hover:text-yellow-600":"text-gray-400 hover:text-gray-500"} hover:bg-gray-100`,title:j?"Retirer des favoris":"Ajouter aux favoris",children:r.jsx(d2,{className:`h-5 w-5 ${j?"fill-current":""}`})}),r.jsx("button",{onClick:L,className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-full",title:"Partager",children:r.jsx(MR,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"relative h-64 bg-gray-200 overflow-hidden",children:[n.imageUrl?r.jsx("img",{src:n.imageUrl,alt:n.title,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-r from-blue-500 to-indigo-600 flex items-center justify-center",children:r.jsx(Os,{className:"h-16 w-16 text-white opacity-20"})}),(n.isLive||R)&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsxs("div",{className:"flex items-center px-3 py-1 rounded-full bg-red-600 text-white text-sm font-medium",children:[r.jsxs("span",{className:"flex h-2 w-2 mr-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-2 w-2 rounded-full bg-white opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),"En direct"]})})]}),r.jsxs("div",{className:"px-4 py-6 sm:px-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx("img",{src:n.speaker.avatar,alt:n.speaker.name,className:"h-12 w-12 rounded-full object-cover mr-4 border"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold text-gray-900",children:n.speaker.name}),r.jsx("div",{className:"text-sm text-gray-500",children:n.speaker.title})]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map(f=>r.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 rounded-full px-3 py-1 text-xs font-semibold",children:["#",f]},f))}),r.jsx("div",{className:"prose max-w-none mb-6",children:n.description.split(`
`).map((f,w)=>r.jsx("p",{children:f},w))}),r.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[n.isLive||R?p?r.jsxs("a",{href:n.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700 transition",children:[r.jsx(Ys,{className:"h-4 w-4 mr-2"})," Rejoindre le direct"]}):n.currentParticipants>=n.maxParticipants?r.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-red-300 rounded-md shadow-sm text-base font-medium text-red-700 bg-red-50",children:[r.jsx(ps,{className:"w-5 h-5 mr-2"}),"Complet"]}):r.jsxs("a",{href:n.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white font-semibold rounded hover:bg-red-700 transition",children:[r.jsx(Ys,{className:"h-4 w-4 mr-2"})," Rejoindre le direct"]}):p?r.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-green-500 rounded-md shadow-sm text-base font-medium text-green-700 bg-green-50",children:[r.jsx(fi,{className:"w-5 h-5 mr-2"}),"Dj Inscrit(e)"]}):n.currentParticipants>=n.maxParticipants?r.jsxs("div",{className:"inline-flex items-center justify-center px-6 py-3 border border-red-300 rounded-md shadow-sm text-base font-medium text-red-700 bg-red-50",children:[r.jsx(ps,{className:"w-5 h-5 mr-2"}),"Complet"]}):r.jsxs("button",{onClick:_,className:"inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-blue-600 hover:bg-blue-700",children:[r.jsx(ct,{className:"w-5 h-5 mr-2"}),"S'inscrire"]}),r.jsxs("button",{onClick:M,className:"inline-flex items-center justify-center px-6 py-3 border border-blue-600 rounded-md shadow-sm text-base font-medium text-blue-600 bg-white hover:bg-blue-50 transition",children:[r.jsx(dR,{className:"w-5 h-5 mr-2"}),"Ajouter au calendrier"]})]}),d&&r.jsx("div",{className:"mt-6",children:r.jsx(SD,{webinar:n,onClose:()=>h(!1)})})]})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Os,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Webinaire non trouv"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Ce webinaire n'existe pas ou a t supprim."}),r.jsx("div",{className:"mt-6",children:r.jsx(Y,{to:"/webinars",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700",children:"Voir tous les webinaires"})})]}),r.jsxs("div",{className:"mt-8 bg-white border border-dashed border-blue-200 rounded-lg p-6 text-center text-blue-600",children:[r.jsx(ot,{className:"inline-block h-6 w-6 mb-2 text-blue-400"}),r.jsx("div",{className:"font-semibold",children:"Section questions / commentaires  venir"}),r.jsx("div",{className:"text-sm text-blue-400 mt-1",children:"Bientt, vous pourrez poser vos questions ou interagir en direct avec l'intervenant."})]})]})})},TD=()=>{const{currentUser:t}=Te(),e=it(),[s,n]=b.useState(!1),[i,a]=b.useState(!1),[o,l]=b.useState(""),[u,d]=b.useState(""),[h,p]=b.useState({title:"",description:"",expectedDuration:"60",topics:[],targetAudience:"",preferredDate:"",contactEmail:(t==null?void 0:t.email)||"",notes:""}),x=S=>{const{name:y,value:v}=S.target;p({...h,[y]:v})},j=()=>{u.trim()&&!h.topics.includes(u.trim())&&(p({...h,topics:[...h.topics,u.trim()]}),d(""))},C=S=>{p({...h,topics:h.topics.filter(y=>y!==S)})},R=async S=>{if(S.preventDefault(),!t){l("Vous devez tre connect pour proposer un atelier");return}if(!h.title||!h.description){l("Veuillez remplir tous les champs obligatoires");return}n(!0),l("");try{await Ut(Se(ne,"workshopProposals"),{...h,userId:t.uid,userEmail:t.email,userName:t.displayName||"Utilisateur anonyme",status:"pending",createdAt:is()}),a(!0),n(!1),setTimeout(()=>{a(!1),p({title:"",description:"",expectedDuration:"60",topics:[],targetAudience:"",preferredDate:"",contactEmail:(t==null?void 0:t.email)||"",notes:""})},3e3)}catch(y){console.error("Erreur lors de la soumission de la proposition:",y),l("Une erreur est survenue lors de l'envoi de votre proposition. Veuillez ressayer."),n(!1)}};return r.jsx("div",{className:"bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-12 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("button",{onClick:()=>e("/webinars"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour aux webinaires"]})}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Proposer un atelier"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez une expertise  partager avec la communaut ESIG ? Proposez-nous un atelier ou un webinaire et notre quipe vous contactera pour en discuter. Vos contributions enrichissent notre communaut !"}),i&&r.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 text-green-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Pi,{className:"w-5 h-5 mr-2"}),r.jsx("p",{children:"Votre proposition a t soumise avec succs ! Notre quipe l'examinera et vous contactera prochainement."})]})}),o&&r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 text-red-700 p-4 mb-6 rounded shadow-sm",role:"alert",children:r.jsx("p",{children:o})}),r.jsx("form",{onSubmit:R,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:["Titre de l'atelier ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",name:"title",id:"title",required:!0,value:h.title,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: Introduction  la programmation fonctionnelle"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:["Description dtaille ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("textarea",{name:"description",id:"description",required:!0,value:h.description,onChange:x,rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Dcrivez le contenu, les objectifs et ce que les participants apprendront"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expectedDuration",className:"block text-sm font-medium text-gray-700",children:"Dure estime (minutes)"}),r.jsxs("select",{name:"expectedDuration",id:"expectedDuration",value:h.expectedDuration,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[r.jsx("option",{value:"30",children:"30 minutes"}),r.jsx("option",{value:"45",children:"45 minutes"}),r.jsx("option",{value:"60",children:"1 heure"}),r.jsx("option",{value:"90",children:"1 heure 30"}),r.jsx("option",{value:"120",children:"2 heures"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sujets abords"}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"text",value:u,onChange:S=>d(S.target.value),className:"flex-grow border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ajouter un sujet"}),r.jsx("button",{type:"button",onClick:j,className:"ml-2 inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ajouter"})]}),h.topics.length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:h.topics.map((S,y)=>r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[S,r.jsx("button",{type:"button",onClick:()=>C(S),className:"ml-1.5 inline-flex text-blue-400 hover:text-blue-600 focus:outline-none",children:""})]},y))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"targetAudience",className:"block text-sm font-medium text-gray-700",children:"Public cible"}),r.jsx("input",{type:"text",name:"targetAudience",id:"targetAudience",value:h.targetAudience,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Ex: Dbutants, tudiants en informatique, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"preferredDate",className:"block text-sm font-medium text-gray-700",children:"Date prfre (optionnel)"}),r.jsx("input",{type:"date",name:"preferredDate",id:"preferredDate",value:h.preferredDate,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contactEmail",className:"block text-sm font-medium text-gray-700",children:"Email de contact"}),r.jsx("input",{type:"email",name:"contactEmail",id:"contactEmail",value:h.contactEmail,onChange:x,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Votre email pour vous contacter"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"Notes supplmentaires"}),r.jsx("textarea",{name:"notes",id:"notes",value:h.notes,onChange:x,rows:3,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Informations complmentaires, besoins spcifiques, etc."})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:s||i,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${s||i?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,children:s?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Envoi en cours..."]}):i?r.jsxs(r.Fragment,{children:[r.jsx(Pi,{className:"mr-2 h-4 w-4"}),"Proposition envoye"]}):r.jsxs(r.Fragment,{children:[r.jsx($d,{className:"mr-2 h-4 w-4"}),"Envoyer ma proposition"]})})})]})})]})]})})},AD=()=>{const{currentUser:t}=Te(),e=it(),[s,n]=b.useState([]),[i,a]=b.useState(!0),[o,l]=b.useState("");b.useEffect(()=>{if(!t){e("/login",{state:{from:"/mes-propositions"}});return}(async()=>{try{a(!0);const h=kt(Se(ne,"workshopProposals"),or("userId","==",t.uid)),p=await Ye(h),x=[];p.forEach(j=>{const C=j.data();x.push({id:j.id,...C})}),x.sort((j,C)=>C.createdAt.toMillis()-j.createdAt.toMillis()),n(x),a(!1)}catch(h){console.error("Erreur lors de la rcupration des propositions:",h),l("Une erreur est survenue lors de la rcupration de vos propositions."),a(!1)}})()},[t,e]);const u=d=>{switch(d){case"pending":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[r.jsx(ls,{className:"w-3 h-3 mr-1"}),"En attente"]});case"approved":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[r.jsx(vs,{className:"w-3 h-3 mr-1"}),"Approuve"]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[r.jsx(ps,{className:"w-3 h-3 mr-1"}),"Rejete"]});default:return r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:d})}};return r.jsx("div",{className:"bg-gray-50 min-h-screen",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>e(-1),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[r.jsx(ze,{className:"w-4 h-4 mr-1"}),"Retour"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-4",children:"Mes propositions d'ateliers"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Consultez l'tat de vos propositions d'ateliers soumises."})]}),i?r.jsx("div",{className:"flex justify-center items-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-gray-500"})}):o?r.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mt-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ps,{className:"h-5 w-5 text-red-400"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:o})})]})}):s.length>0?r.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:r.jsx("ul",{role:"list",className:"divide-y divide-gray-200",children:s.map(d=>r.jsx("li",{children:r.jsxs("div",{className:"px-4 py-5 sm:px-6",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.title}),r.jsx("div",{className:"mt-1",children:u(d.status)})]}),r.jsx("div",{className:"text-sm text-gray-500",children:d.createdAt&&r.jsxs("p",{children:["Soumise le ",d.createdAt.toDate().toLocaleDateString()]})})]}),r.jsx("div",{className:"mt-3 text-sm text-gray-500 line-clamp-2",children:d.description}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(lr,{className:"h-4 w-4 text-gray-400 mr-2"}),r.jsxs("span",{className:"text-sm text-gray-500",children:["Dure: ",d.expectedDuration]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(rr,{className:"h-4 w-4 text-gray-400 mr-2"}),r.jsx("span",{className:"text-sm text-gray-500",children:d.preferredDate?`Date prfre: ${d.preferredDate}`:"Aucune date prfre"})]})]}),d.topics&&d.topics.length>0&&r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:d.topics.map((h,p)=>r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:h},p))}),d.status==="rejected"&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 rounded-md",children:r.jsx("p",{className:"text-sm text-red-700",children:"Votre proposition a t refuse. Si vous souhaitez proposer une version amliore, vous pouvez soumettre une nouvelle proposition."})}),d.status==="approved"&&r.jsx("div",{className:"mt-4 p-3 bg-green-50 rounded-md",children:r.jsx("p",{className:"text-sm text-green-700",children:"Flicitations ! Votre proposition a t accepte. Un membre de l'quipe vous contactera prochainement pour discuter des dtails."})}),d.status==="pending"&&r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-md",children:r.jsx("p",{className:"text-sm text-yellow-700",children:"Votre proposition est en cours d'examen. Nous vous informerons ds qu'une dcision sera prise."})})]})},d.id))})}):r.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm",children:[r.jsx(m2,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"Aucune proposition"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Vous n'avez pas encore soumis de proposition d'atelier."}),r.jsx("button",{onClick:()=>e("/proposer-atelier"),className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Proposer un atelier"})]})]})})},ID=()=>r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(sr,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Conditions Gnrales d'Utilisation"}),r.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Ce document dfinit les rgles d'utilisation de notre plateforme. Nous vous invitons  le lire attentivement."}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:r.jsxs("div",{className:"prose max-w-none",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),r.jsx("p",{children:`Les prsentes Conditions Gnrales d'Utilisation (ci-aprs dnommes "CGU") encadrent l'utilisation de la plateforme ESIG-prep-guide (ci-aprs dnomme "la Plateforme") mise  disposition par [Votre Nom/Organisation],  destination des tudiants et futurs tudiants de l'ESIGELEC.`}),r.jsx("p",{children:"En utilisant la Plateforme, vous acceptez sans rserve les prsentes CGU. Si vous n'acceptez pas ces conditions, vous ne devez pas utiliser la Plateforme."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Description du service"})]}),r.jsx("p",{children:"La Plateforme ESIG-prep-guide est un outil d'aide et d'accompagnement destin aux tudiants et futurs tudiants de l'ESIGELEC. Elle fournit des informations, des ressources et des guides pour faciliter les dmarches lies aux tudes  l'ESIGELEC."}),r.jsx("p",{children:"La Plateforme propose notamment :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Des guides d'information pour les diffrentes phases du parcours tudiant (post-admission, pendant les dmarches, pr-arrive)"}),r.jsx("li",{children:"Une bibliothque de ressources documentaires"}),r.jsx("li",{children:"Une section FAQ permettant aux utilisateurs de poser des questions et de consulter les rponses"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(fi,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Accs au service"})]}),r.jsx("p",{children:"La Plateforme est accessible gratuitement  tout utilisateur disposant d'un accs  Internet. Tous les frais lis  l'accs  la Plateforme (matriel informatique, logiciels, connexion Internet, etc.) sont  la charge de l'utilisateur."}),r.jsx("p",{children:"Certaines fonctionnalits de la Plateforme ncessitent une inscription pralable. L'utilisateur s'engage  fournir des informations exactes et  jour lors de son inscription."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Proprit intellectuelle"})]}),r.jsx("p",{children:"L'ensemble des lments constituant la Plateforme (textes, graphismes, logiciels, images, sons, plans, etc.) est la proprit exclusive de [Votre Nom/Organisation] ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, reprsentation, modification, publication, adaptation de tout ou partie des lments de la Plateforme, quel que soit le moyen ou le procd utilis, est interdite, sauf autorisation crite pralable."}),r.jsx("p",{children:"Les marques et logos prsents sur la Plateforme sont la proprit de leurs dtenteurs respectifs. Toute reproduction sans autorisation pralable est interdite."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Responsabilits"})]}),r.jsx("p",{children:"Les informations fournies sur la Plateforme le sont  titre informatif. [Votre Nom/Organisation] s'efforce d'assurer l'exactitude et la mise  jour des informations diffuses, mais ne peut garantir l'exactitude, la prcision ou l'exhaustivit des informations mises  disposition sur la Plateforme."}),r.jsx("p",{children:"[Votre Nom/Organisation] ne saurait tre tenu responsable :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Des ventuelles interruptions de la Plateforme pour des raisons de maintenance ou autres"}),r.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),r.jsx("li",{children:"Des consquences de l'utilisation de la Plateforme"}),r.jsx("li",{children:"De tout dommage rsultant d'une intrusion frauduleuse d'un tiers ayant entran une modification des informations mises  disposition sur la Plateforme"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(fi,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Obligations de l'utilisateur"})]}),r.jsx("p",{children:"En utilisant la Plateforme, l'utilisateur s'engage  :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Ne pas utiliser la Plateforme  des fins illgales ou interdites par les prsentes CGU"}),r.jsx("li",{children:"Ne pas tenter de perturber le bon fonctionnement de la Plateforme"}),r.jsx("li",{children:"Ne pas diffuser de contenu illgal, prjudiciable, menaant, injurieux, harcelant, diffamatoire, vulgaire, obscne, contraire aux bonnes murs, portant atteinte  la vie prive d'une personne ou contrevenant aux lois en vigueur"}),r.jsx("li",{children:"Ne pas collecter ou stocker des donnes personnelles concernant d'autres utilisateurs"}),r.jsx("li",{children:"Ne pas usurper l'identit d'une autre personne ou entit"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Modification des CGU"})]}),r.jsx("p",{children:"[Votre Nom/Organisation] se rserve le droit de modifier les prsentes CGU  tout moment. Les utilisateurs seront informs des modifications par tout moyen appropri. L'utilisation continue de la Plateforme aprs modification des CGU vaut acceptation des nouvelles conditions."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Droit applicable et juridiction comptente"})]}),r.jsx("p",{children:"Les prsentes CGU sont soumises au droit franais. En cas de litige non rsolu  l'amiable, les tribunaux franais seront seuls comptents."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(fi,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),r.jsx("p",{children:"Pour toute question relative aux prsentes CGU, vous pouvez contacter [Votre Nom/Organisation]  l'adresse suivante : [Votre adresse email]."}),r.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[r.jsx(Ot,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document lgal important"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Ces conditions gnrales d'utilisation constituent un contrat juridiquement contraignant entre vous et notre service. En utilisant notre plateforme, vous acceptez ces conditions."})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),PD=()=>r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(ni,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Politique de Confidentialit"}),r.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Nous accordons une grande importance  la protection de vos donnes personnelles. Ce document dtaille comment nous les collectons et les utilisons."}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:r.jsxs("div",{className:"prose max-w-none",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[r.jsx(ni,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),r.jsx("p",{children:'La prsente Politique de Confidentialit dcrit comment la plateforme ESIG-prep-guide (ci-aprs "la Plateforme") collecte, utilise et protge vos donnes personnelles lorsque vous utilisez notre service.'}),r.jsx("p",{children:"Nous respectons votre vie prive et nous nous engageons  protger vos donnes personnelles conformment au Rglement Gnral sur la Protection des Donnes (RGPD) et aux autres lois applicables en matire de protection des donnes."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Responsable du traitement"})]}),r.jsx("p",{children:"Le responsable du traitement de vos donnes personnelles est [Votre Nom/Organisation], joignable  l'adresse email suivante : [Votre adresse email]."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Mx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Quelles donnes collectons-nous ?"})]}),r.jsx("p",{children:"Nous pouvons collecter les types de donnes personnelles suivants :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Donnes d'identification"})," : nom, prnom, adresse email, identifiant utilisateur"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Donnes de connexion"})," : adresse IP, type de navigateur, systme d'exploitation, date et heure de connexion"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Donnes d'utilisation"})," : interactions avec la Plateforme, questions poses, ressources consultes"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Donnes de profil"})," : prfrences, centres d'intrt en lien avec votre utilisation de la Plateforme"]})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Comment collectons-nous vos donnes ?"})]}),r.jsx("p",{children:"Nous collectons vos donnes de diffrentes manires :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Directement auprs de vous"})," : lorsque vous crez un compte, compltez un formulaire, posez une question, ou interagissez avec notre Plateforme"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Automatiquement"})," :  travers des cookies et technologies similaires lorsque vous naviguez sur notre Plateforme"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Auprs de tiers"})," : lorsque vous vous connectez via des services tiers comme Google"]})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Pourquoi utilisons-nous vos donnes ?"})]}),r.jsx("p",{children:"Nous utilisons vos donnes personnelles pour les finalits suivantes :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Vous permettre de crer et de grer votre compte utilisateur"}),r.jsx("li",{children:"Vous fournir les services et fonctionnalits de la Plateforme"}),r.jsx("li",{children:"Rpondre  vos questions et demandes"}),r.jsx("li",{children:"Personnaliser votre exprience sur la Plateforme"}),r.jsx("li",{children:"Amliorer et dvelopper notre Plateforme"}),r.jsx("li",{children:"Assurer la scurit de la Plateforme et prvenir les fraudes"}),r.jsx("li",{children:"Respecter nos obligations lgales"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Base lgale du traitement"})]}),r.jsx("p",{children:"Nous traitons vos donnes personnelles sur les bases lgales suivantes :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Excution du contrat"})," : le traitement est ncessaire  l'excution du contrat auquel vous tes partie (les Conditions Gnrales d'Utilisation)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Consentement"})," : vous avez donn votre consentement au traitement de vos donnes  caractre personnel pour une ou plusieurs finalits spcifiques"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Intrts lgitimes"})," : le traitement est ncessaire aux fins des intrts lgitimes poursuivis par nous ou par un tiers"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Obligation lgale"})," : le traitement est ncessaire au respect d'une obligation lgale  laquelle nous sommes soumis"]})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Dure de conservation"})]}),r.jsx("p",{children:"Nous conservons vos donnes personnelles uniquement pendant la dure ncessaire  la ralisation des finalits pour lesquelles elles ont t collectes, y compris pour satisfaire aux exigences lgales, comptables ou de dclaration."}),r.jsx("p",{children:"Vos donnes de compte utilisateur sont conserves tant que votre compte est actif. En cas de suppression de votre compte, vos donnes personnelles sont supprimes ou anonymises dans un dlai raisonnable."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Partage de vos donnes"})]}),r.jsx("p",{children:"Nous pouvons partager vos donnes personnelles avec :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Nos prestataires de services"})," : qui nous aident  fournir nos services (hbergement, maintenance, analyses, etc.)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Des tiers avec votre consentement"})," : lorsque vous nous avez autoriss  le faire"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Les autorits comptentes"})," : lorsque nous sommes lgalement tenus de le faire"]})]}),r.jsx("p",{children:"Nous ne vendons pas vos donnes personnelles  des tiers."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Vx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Transfert de donnes hors UE"})]}),r.jsx("p",{children:"Certains de nos prestataires de services peuvent tre bass en dehors de l'Espace conomique Europen (EEE). Lorsque nous transfrons vos donnes personnelles en dehors de l'EEE, nous nous assurons qu'elles bnficient d'un niveau de protection similaire en mettant en uvre des garanties appropries (clauses contractuelles types, dcisions d'adquation, etc.)."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"10. Vos droits"})]}),r.jsx("p",{children:"Conformment au RGPD, vous disposez des droits suivants concernant vos donnes personnelles :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Droit d'accs"})," : vous pouvez demander une copie des donnes personnelles que nous dtenons  votre sujet"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit de rectification"})," : vous pouvez demander la correction de donnes inexactes ou incompltes"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit  l'effacement"})," : vous pouvez demander la suppression de vos donnes personnelles dans certaines circonstances"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit  la limitation du traitement"})," : vous pouvez demander la limitation du traitement de vos donnes personnelles"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit  la portabilit des donnes"})," : vous pouvez demander le transfert de vos donnes personnelles  un autre responsable du traitement"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit d'opposition"})," : vous pouvez vous opposer au traitement de vos donnes personnelles dans certaines circonstances"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Droit de retirer votre consentement"})," : lorsque le traitement est bas sur votre consentement"]})]}),r.jsx("p",{children:"Pour exercer ces droits, veuillez nous contacter  l'adresse email suivante : [Votre adresse email]."}),r.jsx("p",{children:"Si vous estimez, aprs nous avoir contacts, que vos droits ne sont pas respects, vous avez le droit d'introduire une rclamation auprs de la Commission Nationale de l'Informatique et des Liberts (CNIL)."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(SR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"11. Scurit des donnes"})]}),r.jsx("p",{children:"Nous mettons en uvre des mesures techniques et organisationnelles appropries pour protger vos donnes personnelles contre tout traitement non autoris ou illgal et contre toute perte, destruction ou dommage accidentels."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(zx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"12. Cookies et technologies similaires"})]}),r.jsx("p",{children:"Notre Plateforme utilise des cookies et des technologies similaires pour amliorer votre exprience et recueillir des informations sur l'utilisation de la Plateforme. Vous pouvez grer vos prfrences en matire de cookies via notre bannire de consentement aux cookies."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"13. Modification de la politique de confidentialit"})]}),r.jsx("p",{children:"Nous pouvons modifier cette politique de confidentialit de temps  autre. Toute modification sera publie sur cette page et, si les modifications sont importantes, nous vous fournirons une notification plus visible."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"14. Contact"})]}),r.jsx("p",{children:"Pour toute question concernant cette politique de confidentialit ou vos donnes personnelles, veuillez nous contacter  l'adresse email suivante : [Votre adresse email]."}),r.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[r.jsx(xR,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Protection de vos donnes personnelles"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformment au Rglement Gnral sur la Protection des Donnes (RGPD), vous pouvez  tout moment exercer vos droits d'accs, de rectification, d'effacement, de limitation, de portabilit et d'opposition aux donnes vous concernant."})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),RD=()=>r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(lR,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Mentions Lgales"}),r.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Informations lgales relatives  l'diteur du site et aux conditions d'hbergement."}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:r.jsxs("div",{className:"prose max-w-none",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[r.jsx(h2,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. diteur du site"})]}),r.jsx("p",{children:'Le site ESIG-prep-guide (ci-aprs "le Site") est dit par :'}),r.jsxs("p",{children:[r.jsx("strong",{children:"Nom :"})," Abdoul Ahad Mback Diouf",r.jsx("br",{}),r.jsx("strong",{children:"Adresse :"})," [Votre adresse postale]",r.jsx("br",{}),r.jsx("strong",{children:"Email :"})," [Votre adresse email]",r.jsx("br",{}),r.jsx("strong",{children:"Tlphone :"})," [Votre numro de tlphone]"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Directeur de la publication :"})," Abdoul Ahad Mback Diouf"]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(zx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Hbergement"})]}),r.jsx("p",{children:"Le Site est hberg par :"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Socit :"})," GitHub Pages (GitHub Inc.)",r.jsx("br",{}),r.jsx("strong",{children:"Adresse :"})," 88 Colin P Kelly Jr St, San Francisco, CA 94107, tats-Unis",r.jsx("br",{}),r.jsx("strong",{children:"Site web :"})," ",r.jsx("a",{href:"https://pages.github.com/",target:"_blank",rel:"noopener noreferrer",children:"https://pages.github.com/"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(pR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Proprit intellectuelle"})]}),r.jsx("p",{children:"L'ensemble des lments constituant le Site (textes, graphismes, logiciels, images, sons, plans, etc.) est la proprit exclusive d'Abdoul Ahad Mback Diouf ou fait l'objet d'une autorisation d'utilisation. Toute reproduction, reprsentation, modification, publication, adaptation de tout ou partie des lments du Site, quel que soit le moyen ou le procd utilis, est interdite, sauf autorisation crite pralable."}),r.jsx("p",{children:"Toute exploitation non autorise du Site ou de l'un quelconque des lments qu'il contient sera considre comme constitutive d'une contrefaon et poursuivie conformment aux dispositions des articles L.335-2 et suivants du Code de Proprit Intellectuelle."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Responsabilit"})]}),r.jsx("p",{children:"Les informations fournies sur le Site le sont  titre informatif. Abdoul Ahad Mback Diouf s'efforce d'assurer l'exactitude et la mise  jour des informations diffuses, mais ne peut garantir l'exactitude, la prcision ou l'exhaustivit des informations mises  disposition sur le Site."}),r.jsx("p",{children:"Abdoul Ahad Mback Diouf ne saurait tre tenu responsable :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Des ventuelles interruptions du Site pour des raisons de maintenance ou autres"}),r.jsx("li",{children:"Des erreurs, inexactitudes ou omissions dans les informations fournies"}),r.jsx("li",{children:"Des consquences de l'utilisation du Site"}),r.jsx("li",{children:"De tout dommage rsultant d'une intrusion frauduleuse d'un tiers ayant entran une modification des informations mises  disposition sur le Site"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Vx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Liens hypertextes"})]}),r.jsx("p",{children:"Le Site peut contenir des liens hypertextes vers d'autres sites internet. Abdoul Ahad Mback Diouf n'exerce aucun contrle sur ces sites et n'assume aucune responsabilit quant  leur contenu."}),r.jsx("p",{children:"La cration de liens hypertextes vers le Site est autorise sous rserve :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Que les liens ne soient pas utiliss  des fins commerciales ou publicitaires"}),r.jsx("li",{children:"Qu'ils n'induisent pas de confusion sur l'origine des services ou contenus du Site"}),r.jsx("li",{children:"Qu'ils ne portent pas atteinte aux intrts d'Abdoul Ahad Mback Diouf"})]}),r.jsx("p",{children:"Abdoul Ahad Mback Diouf se rserve le droit de demander la suppression de tout lien hypertexte pointant vers le Site qui ne respecterait pas ces conditions."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(zr,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Protection des donnes personnelles"})]}),r.jsxs("p",{children:["Conformment au Rglement Gnral sur la Protection des Donnes (RGPD) et  la loi Informatique et Liberts, vous disposez de droits concernant vos donnes personnelles. Pour en savoir plus, veuillez consulter notre ",r.jsx(Y,{to:"/legal/privacy-policy",children:"Politique de Confidentialit"}),"."]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(DR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Droit applicable et juridiction comptente"})]}),r.jsx("p",{children:"Les prsentes mentions lgales sont soumises au droit franais. En cas de litige non rsolu  l'amiable, les tribunaux franais seront seuls comptents."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(qx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Contact"})]}),r.jsx("p",{children:"Pour toute question relative aux prsentes mentions lgales, vous pouvez contacter Abdoul Ahad Mback Diouf  l'adresse suivante : [Votre adresse email]."}),r.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[r.jsx(CR,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Informations obligatoires"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformment  l'article 6 de la loi n 2004-575 du 21 juin 2004 pour la confiance dans l'conomie numrique, il est prcis aux utilisateurs du site ESIG-prep-guide l'identit des diffrents intervenants dans le cadre de sa ralisation et de son suivi."})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),DD=()=>r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(Ev,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Charte de Modration"}),r.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Rgles de bonne conduite pour les interactions sur notre plateforme ESIG-prep-guide."}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-4xl mx-auto border border-gray-100",children:r.jsxs("div",{className:"prose max-w-none",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4",children:[r.jsx(ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"1. Introduction"})]}),r.jsx("p",{children:'La prsente Charte de Modration dfinit les rgles de bonne conduite applicables aux interactions sur la plateforme ESIG-prep-guide (ci-aprs "la Plateforme"), notamment en ce qui concerne les questions poses dans la section FAQ et tout autre contenu gnr par les utilisateurs.'}),r.jsx("p",{children:"Cette charte vise  garantir un environnement respectueux et constructif pour tous les utilisateurs de la Plateforme."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(Ev,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"2. Principes gnraux"})]}),r.jsx("p",{children:"Tous les contenus publis sur la Plateforme doivent respecter les principes suivants :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Respect mutuel entre les utilisateurs"}),r.jsx("li",{children:"Pertinence par rapport aux thmatiques de la Plateforme"}),r.jsx("li",{children:"Exactitude et vracit des informations partages"}),r.jsx("li",{children:"Respect des lois et rglements en vigueur"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ls,{className:"w-6 h-6 text-yellow-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"3. Contenus prohibs"})]}),r.jsx("p",{children:"Sont formellement interdits les contenus :"}),r.jsxs("ul",{children:[r.jsx("li",{children:" caractre injurieux, diffamatoire, raciste, xnophobe, homophobe, sexiste ou discriminatoire"}),r.jsx("li",{children:"Incitant  la haine,  la violence ou au harclement envers une personne ou un groupe"}),r.jsx("li",{children:" caractre pornographique, obscne ou choquant"}),r.jsx("li",{children:"Violant les droits de proprit intellectuelle d'autrui"}),r.jsx("li",{children:"Comportant des informations personnelles d'un tiers sans son consentement"}),r.jsx("li",{children:"Faisant la promotion d'activits illgales"}),r.jsx("li",{children:"Comportant des liens vers des sites malveillants ou frauduleux"}),r.jsx("li",{children:"Consistant en du spam ou des messages rptitifs"}),r.jsx("li",{children:"Hors sujet ou sans rapport avec les thmatiques de la Plateforme"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(f2,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"4. Procdure de modration"})]}),r.jsx("p",{children:"La modration des contenus sur la Plateforme s'effectue de la manire suivante :"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Modration a priori"})," : les questions poses dans la section FAQ sont examines par l'quipe de modration avant leur publication"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Signalement"})," : les utilisateurs peuvent signaler tout contenu qu'ils jugent inappropri"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Suppression"})," : les contenus ne respectant pas la prsente charte peuvent tre supprims sans pravis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Sanctions"})," : en cas de violations rptes, des mesures peuvent tre prises  l'encontre des utilisateurs concerns (avertissement, suspension temporaire, suppression du compte)"]})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(cr,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"5. Bonnes pratiques recommandes"})]}),r.jsx("p",{children:"Pour contribuer positivement  la Plateforme, nous encourageons les utilisateurs  :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Formuler des questions claires et prcises"}),r.jsx("li",{children:"Utiliser un langage correct et respectueux"}),r.jsx("li",{children:"Vrifier que leur question n'a pas dj t pose"}),r.jsx("li",{children:"Catgoriser correctement leur question (phase, catgorie)"}),r.jsx("li",{children:"Fournir les informations ncessaires  la comprhension de leur question"}),r.jsx("li",{children:"Partager leur exprience de manire constructive"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"6. Rle des modrateurs"})]}),r.jsx("p",{children:"Les modrateurs de la Plateforme ont pour mission de :"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Veiller au respect de la prsente charte"}),r.jsx("li",{children:"Examiner les contenus signals par les utilisateurs"}),r.jsx("li",{children:"Prendre les mesures appropries en cas de non-respect des rgles"}),r.jsx("li",{children:"Rpondre aux questions des utilisateurs concernant la modration"}),r.jsx("li",{children:"Faire voluer la prsente charte si ncessaire"})]}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(wR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"7. Contestation d'une dcision de modration"})]}),r.jsx("p",{children:"Si vous contestez une dcision de modration, vous pouvez contacter l'quipe de modration  l'adresse suivante : [Votre adresse email]."}),r.jsx("p",{children:"Votre demande sera examine dans les meilleurs dlais."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(We,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"8. Modification de la charte"})]}),r.jsx("p",{children:"La prsente charte peut tre modifie  tout moment. Les utilisateurs seront informs des modifications par tout moyen appropri."}),r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-4 mt-8",children:[r.jsx(ot,{className:"w-6 h-6 text-blue-600"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 m-0",children:"9. Contact"})]}),r.jsx("p",{children:"Pour toute question concernant cette charte de modration, vous pouvez contacter l'quipe de modration  l'adresse suivante : [Votre adresse email]."}),r.jsxs("div",{className:"mt-12 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[r.jsx(lr,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Rgles de la communaut"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Cette charte de modration vise  maintenir un environnement d'changes respectueux et constructif. En utilisant notre plateforme, vous vous engagez  respecter ces rgles pour le bnfice de tous les utilisateurs."})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})})})]}),LD=()=>{const{currentUser:t,isAdmin:e}=Te();return!t||!e()?r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(ni,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Accs restreint"}),r.jsx("p",{className:"text-blue-100 text-center max-w-2xl mx-auto",children:"Cette page est rserve aux administrateurs de la plateforme."}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour  l'accueil"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-16 text-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md mx-auto border border-gray-100",children:[r.jsx("div",{className:"bg-red-50 rounded-full h-20 w-20 flex items-center justify-center mx-auto mb-6",children:r.jsx(ni,{className:"h-10 w-10 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accs administrateur requis"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Le registre RGPD est un document  usage interne destin uniquement aux administrateurs. Veuillez vous connecter avec un compte disposant des privilges administrateur pour y accder."}),r.jsx("div",{className:"flex justify-center",children:r.jsxs(Y,{to:"/login",className:"flex items-center justify-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors shadow-sm",children:[r.jsx(ni,{className:"w-4 h-4"}),"Se connecter"]})})]})})]}):r.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-800 text-white py-12",children:r.jsxs("div",{className:"container mx-auto px-4",children:[r.jsx("div",{className:"flex items-center justify-center mb-6",children:r.jsx("div",{className:"bg-white/10 p-3 rounded-full",children:r.jsx(Ot,{className:"w-8 h-8 text-white"})})}),r.jsx("h1",{className:"text-3xl font-bold mb-3 text-center",children:"Registre de Traitement RGPD"}),r.jsx("div",{className:"flex justify-center",children:r.jsxs("div",{className:"flex items-center text-red-200 bg-red-700 px-4 py-2 rounded-md inline-block mt-2 shadow-sm",children:[r.jsx(ni,{className:"w-5 h-5 mr-2"}),"Document confidentiel  usage interne uniquement"]})}),r.jsx("div",{className:"flex justify-center mt-6",children:r.jsxs(Y,{to:"/admin",className:"flex items-center text-blue-100 hover:text-white transition-colors bg-white/10 px-4 py-2 rounded-md",children:[r.jsx(ze,{className:"w-4 h-4 mr-2"}),"Retour au tableau de bord"]})})]})}),r.jsx("div",{className:"container mx-auto px-4 py-12",children:r.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 max-w-5xl mx-auto border border-gray-100",children:r.jsxs("div",{className:"prose max-w-none",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center gap-3 bg-red-50 p-4 rounded-lg border border-red-200",children:[r.jsx(ni,{className:"w-6 h-6 text-red-600 flex-shrink-0"}),r.jsx("h2",{className:"text-xl font-bold text-red-800 m-0",children:"CONFIDENTIEL - Registre des activits de traitement"})]})}),r.jsx("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mb-8",children:r.jsx("p",{className:"text-blue-800 font-medium",children:"Conformment  l'article 30 du Rglement Gnral sur la Protection des Donnes (RGPD), ce registre recense l'ensemble des traitements de donnes  caractre personnel mis en uvre par ESIG-prep-guide en tant que responsable de traitement."})}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-2 mb-6",children:[r.jsx(ct,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"1. Identit du responsable de traitement"})]}),r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-100 shadow-sm",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"flex items-start",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Nom :"}),r.jsx("span",{children:"Abdoul Ahad Mback Diouf"})]}),r.jsxs("p",{className:"flex items-start mt-3",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Adresse :"}),r.jsx("span",{children:"[Votre adresse postale]"})]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"flex items-start",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Email :"}),r.jsx("span",{children:"[Votre adresse email]"})]}),r.jsxs("p",{className:"flex items-start mt-3",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2 w-24 flex-shrink-0",children:"Tlphone :"}),r.jsx("span",{children:"[Votre numro de tlphone]"})]})]})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("p",{className:"flex items-start",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Dlgu  la protection des donnes :"}),r.jsx("span",{children:'[Nom du DPO ou "Non dsign"]'})]})})]})]}),r.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[r.jsx(Mx,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 1: Gestion des comptes utilisateurs"})]}),r.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:r.jsxs("tbody",{children:[r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalit du traitement"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des comptes utilisateurs et authentification"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalits"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Cration et gestion de compte"}),r.jsx("li",{children:"Authentification des utilisateurs"}),r.jsx("li",{children:"Rcupration de mot de passe"}),r.jsx("li",{children:"Vrification d'email"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base lgale"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Excution contractuelle (CGU) et consentement"})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de donnes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Identifiants: nom, prnom, adresse email"}),r.jsx("li",{children:"Donnes de compte: mot de passe (hash), rle"}),r.jsx("li",{children:"Donnes de connexion: timestamp, adresse IP"}),r.jsx("li",{children:"Donnes de profil: photo (facultatif)"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de personnes concernes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"En interne: administrateurs de la plateforme"}),r.jsx("li",{children:"En externe: Firebase (sous-traitant pour l'authentification)"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Dure de conservation"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Aussi longtemps que le compte est actif + 1 an aprs suppression pour des raisons techniques et lgales"})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de scurit"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Authentification scurise (Firebase Auth)"}),r.jsx("li",{children:"Mots de passe hashs"}),r.jsx("li",{children:"Accs restreint aux donnes administrateur"}),r.jsx("li",{children:"Transmission des donnes via HTTPS"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),r.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[r.jsx(sr,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 2: Gestion des questions FAQ"})]}),r.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:r.jsxs("tbody",{children:[r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalit du traitement"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion des questions poses par les utilisateurs"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalits"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Recueil des questions des utilisateurs"}),r.jsx("li",{children:"Modration et publication des questions"}),r.jsx("li",{children:"Rponse aux questions"}),r.jsx("li",{children:"Constitution d'une base de connaissances"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base lgale"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Consentement et intrt lgitime"})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de donnes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Identifiants: ID utilisateur, email"}),r.jsx("li",{children:"Contenu: question pose, catgorie, phase"}),r.jsx("li",{children:"Mtadonnes: date de soumission, statut de la question"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de personnes concernes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"En interne: administrateurs et modrateurs"}),r.jsx("li",{children:"En externe: Firebase (sous-traitant pour le stockage des donnes)"}),r.jsx("li",{children:"Public: questions approuves et rpondues"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Dure de conservation"}),r.jsxs("td",{className:"border border-gray-300 p-3",children:[r.jsx("p",{children:"Questions publies: dure de vie de la plateforme"}),r.jsx("p",{children:"Questions refuses: 1 an aprs refus"})]})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de scurit"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Accs restreint aux donnes compltes (admin uniquement)"}),r.jsx("li",{children:"Modration avant publication"}),r.jsx("li",{children:"Rgles de scurit Firebase"}),r.jsx("li",{children:"Transmission des donnes via HTTPS"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Oui (Firebase - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),r.jsxs("div",{className:"mb-12 border border-gray-200 rounded-lg p-6 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-3 border-b border-gray-200 pb-3 mb-6",children:[r.jsx(bR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Traitement 3: Gestion des ressources documentaires"})]}),r.jsx("table",{className:"min-w-full border-collapse border border-gray-300",children:r.jsxs("tbody",{children:[r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium w-1/3",children:"Finalit du traitement"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Gestion et mise  disposition des ressources documentaires"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Sous-finalits"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Publication de documents informatifs"}),r.jsx("li",{children:"Catgorisation des ressources"}),r.jsx("li",{children:"Accs contrl aux ressources"}),r.jsx("li",{children:"Suivi statistique des consultations"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Base lgale"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Excution contractuelle (CGU) et intrt lgitime"})})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de donnes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Mtadonnes des ressources: titre, description, catgorie, phase"}),r.jsx("li",{children:"Donnes d'accs: identifiant utilisateur, timestamp d'accs"}),r.jsx("li",{children:"Statistiques anonymises: nombre de consultations"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Catgories de personnes concernes"}),r.jsx("td",{className:"border border-gray-300 p-3",children:"Utilisateurs de la plateforme, administrateurs"})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Destinataires"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"En interne: administrateurs"}),r.jsx("li",{children:"En externe: Firebase (stockage des mtadonnes), Dropbox (stockage des fichiers)"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Dure de conservation"}),r.jsxs("td",{className:"border border-gray-300 p-3",children:[r.jsx("p",{children:"Mtadonnes des ressources: dure de vie de la plateforme"}),r.jsx("p",{children:"Donnes d'accs individuelles: 1 an"})]})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Mesures de scurit"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[r.jsx("li",{children:"Authentification requise pour l'accs aux ressources"}),r.jsx("li",{children:"Gestion des droits d'accs"}),r.jsx("li",{children:"Transmission scurise via HTTPS"}),r.jsx("li",{children:"Scurit des liens de tlchargement"})]})})]}),r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 p-3 font-medium",children:"Transfert hors UE"}),r.jsx("td",{className:"border border-gray-300 p-3",children:r.jsx("p",{children:"Oui (Firebase - USA, Dropbox - USA) - Garanties: clauses contractuelles types"})})]})]})})]}),r.jsxs("div",{className:"mt-12 pt-6 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(LR,{className:"w-6 h-6 text-blue-600"}),r.jsx("h3",{className:"text-xl font-bold text-gray-800 m-0",children:"Mise  jour du registre"})]}),r.jsx("p",{className:"text-gray-700",children:"Ce registre est mis  jour rgulirement pour reflter l'volution des traitements de donnes effectus."}),r.jsxs("div",{className:"mt-8 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 flex items-start",children:[r.jsx(ls,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Document obligatoire"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Conformment au RGPD, ce registre des activits de traitement doit tre conserv  jour et prsent sur demande  la CNIL. Il constitue un lment essentiel de la conformit au RGPD."})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-6 text-center",children:["Dernire mise  jour : ",new Date().toLocaleDateString("fr-FR")]})]})]})]})})})]})},MD=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(!1),{currentUser:i}=Te(),a=ur();b.useEffect(()=>{if(i){const l=localStorage.getItem(`disclaimerSeen_${i.uid}`),u=new Date().toDateString();(!l||new Date(l).toDateString()!==u)&&e(!0)}},[i,a.pathname]);const o=()=>{i&&(localStorage.setItem(`disclaimerSeen_${i.uid}`,new Date().toISOString()),n(!0),e(!1))};return!t||s?null:r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(ls,{className:"h-8 w-8 text-yellow-500 mr-2"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Information importante"})]}),r.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-500",children:r.jsx(St,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"prose prose-lg text-gray-700 space-y-4",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Bienvenue sur ESIG-prep-guide !"})," Avant de commencer, il est important de noter que :"]}),r.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[r.jsxs("li",{children:["Cette application ",r.jsx("strong",{children:"ne garantit pas"})," l'obtention d'un visa"]}),r.jsx("li",{children:"Les informations fournies sont bases sur des expriences personnelles"}),r.jsx("li",{children:"Les procdures peuvent voluer - restez inform des mises  jour officielles"}),r.jsx("li",{children:"Nous vous recommandons de toujours vrifier les informations auprs des sources officielles"})]}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(vs,{className:"h-5 w-5 text-blue-400"})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-blue-700",children:"En utilisant cette application, vous reconnaissez avoir pris connaissance de ces informations importantes."})})]})})]}),r.jsx("div",{className:"mt-8 flex justify-end",children:r.jsx("button",{onClick:o,className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"J'ai compris, continuer"})})]})})})},VD=()=>{const[t,e]=b.useState(!0),{currentUser:s}=Te(),[n,i]=b.useState(!1),a=ur();b.useEffect(()=>{i(!0),sessionStorage.getItem("bannerClosed")==="true"&&e(!1)},[a.pathname]);const o=()=>{e(!1),sessionStorage.setItem("bannerClosed","true")};return!n||!s||!t?null:r.jsx("div",{className:"fixed bottom-4 right-4 z-50 transition-all duration-300 ease-in-out",children:r.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 max-w-xs rounded-lg shadow-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(ls,{className:"h-5 w-5 text-yellow-400"})}),r.jsx("div",{className:"ml-3 flex-1",children:r.jsxs("p",{className:"text-sm text-yellow-700",children:[r.jsx("span",{className:"font-medium",children:"Rappel :"})," Cette application fournit des conseils bass sur des expriences personnelles et ne garantit pas l'obtention d'un visa."]})}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("button",{onClick:o,className:"text-yellow-500 hover:text-yellow-700 focus:outline-none","aria-label":"Fermer",children:r.jsx(St,{className:"h-4 w-4"})})})]})})})},FD=({children:t})=>r.jsxs(r.Fragment,{children:[r.jsx(MD,{}),r.jsx(QR,{}),t,r.jsx(VD,{})]}),Ce=({children:t})=>{const{currentUser:e,loading:s}=Te(),n=ur();return s?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):e?r.jsx(FD,{children:t}):r.jsx(cl,{to:"/login",state:{from:n},replace:!0})};function OD(){return r.jsx(X3,{children:r.jsx(Z3,{children:r.jsx(LS,{children:r.jsxs("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[r.jsx(zR,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(SS,{children:[r.jsx(xe,{path:"/",element:r.jsx(YR,{})}),r.jsx(xe,{path:"/login",element:r.jsx(JR,{})}),r.jsx(xe,{path:"/register",element:r.jsx(XR,{})}),r.jsx(xe,{path:"/reset-password",element:r.jsx(jD,{})}),r.jsx(xe,{path:"/test-firebase",element:r.jsx(pD,{})}),r.jsx(xe,{path:"/legal/cgu",element:r.jsx(ID,{})}),r.jsx(xe,{path:"/legal/privacy-policy",element:r.jsx(PD,{})}),r.jsx(xe,{path:"/legal/legal-notice",element:r.jsx(RD,{})}),r.jsx(xe,{path:"/legal/moderation-charter",element:r.jsx(DD,{})}),r.jsx(xe,{path:"/legal/rgpd-registry",element:r.jsx(ws,{children:r.jsx(LD,{})})}),r.jsx(xe,{path:"/dashboard",element:r.jsx(Ce,{children:r.jsx(s6,{})})}),r.jsx(xe,{path:"/applications",element:r.jsx(Ce,{children:r.jsx(ED,{})})}),r.jsx(xe,{path:"/resources",element:r.jsx(Ce,{children:r.jsx(r6,{})})}),r.jsx(xe,{path:"/faq",element:r.jsx(Ce,{children:r.jsx(n6,{})})}),r.jsx(xe,{path:"/feedback",element:r.jsx(Ce,{children:r.jsx(ND,{})})}),r.jsx(xe,{path:"/forum",element:r.jsx(Ce,{children:r.jsx(go,{children:r.jsx(Jh,{})})})}),r.jsx(xe,{path:"/forum/category/:categoryId",element:r.jsx(Ce,{children:r.jsx(go,{children:r.jsx(Jh,{})})})}),r.jsx(xe,{path:"/forum/thread/:threadId",element:r.jsx(Ce,{children:r.jsx(go,{children:r.jsx(d6,{})})})}),r.jsx(xe,{path:"/forum/new-thread",element:r.jsx(Ce,{children:r.jsx(go,{children:r.jsx(h6,{})})})}),r.jsx(xe,{path:"/profile",element:r.jsx(Ce,{children:r.jsx(gD,{})})}),r.jsx(xe,{path:"/tutorial",element:r.jsx(Ce,{children:r.jsx(yD,{})})}),r.jsx(xe,{path:"/help",element:r.jsx(Ce,{children:r.jsx(vD,{})})}),r.jsx(xe,{path:"/chat-ai",element:r.jsx(Ce,{children:r.jsx(go,{children:r.jsx(wD,{})})})}),r.jsx(xe,{path:"/admin",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Iv,{})})})}),r.jsx(xe,{path:"/admin/content",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Xh,{})})})}),r.jsx(xe,{path:"/admin/resources",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Vv,{})})})}),r.jsx(xe,{path:"/admin/users",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(cD,{})})})}),r.jsx(xe,{path:"/admin/users/:uid",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(uD,{})})})}),r.jsx(xe,{path:"/admin/activity",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(dD,{})})})}),r.jsx(xe,{path:"/admin/progressions",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(mD,{})})})}),r.jsx(xe,{path:"/admin/tutorial",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(hD,{})})})}),r.jsx(xe,{path:"/admin/dropbox",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Fv,{})})})}),r.jsx(xe,{path:"/admin/feedbacks",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Ov,{})})})}),r.jsx(xe,{path:"/admin/webinars",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(qv,{})})})}),r.jsx(xe,{path:"/admin/workshop-proposals",element:r.jsx(Ce,{children:r.jsx(ws,{children:r.jsx(Uv,{})})})}),r.jsx(xe,{path:"/editor",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(_D,{})})})}),r.jsx(xe,{path:"/editor/content",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Xh,{})})})}),r.jsx(xe,{path:"/editor/resources",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Vv,{})})})}),r.jsx(xe,{path:"/editor/faq",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Xh,{})})})}),r.jsx(xe,{path:"/editor/forum",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Jh,{})})})}),r.jsx(xe,{path:"/editor/dashboard",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Iv,{})})})}),r.jsx(xe,{path:"/editor/feedbacks",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Ov,{})})})}),r.jsx(xe,{path:"/editor/dropbox",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Fv,{})})})}),r.jsx(xe,{path:"/editor/webinars",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(qv,{})})})}),r.jsx(xe,{path:"/editor/workshop-proposals",element:r.jsx(Ce,{children:r.jsx(pr,{children:r.jsx(Uv,{})})})}),r.jsx(xe,{path:"/webinars",element:r.jsx(Ce,{children:r.jsx(kD,{})})}),r.jsx(xe,{path:"/webinars/:id",element:r.jsx(Ce,{children:r.jsx(CD,{})})}),r.jsx(xe,{path:"/proposer-atelier",element:r.jsx(Ce,{children:r.jsx(TD,{})})}),r.jsx(xe,{path:"/mes-propositions",element:r.jsx(Ce,{children:r.jsx(AD,{})})}),r.jsx(xe,{path:"*",element:r.jsx(fD,{})})]})}),r.jsx($R,{}),r.jsx(GR,{}),r.jsx(WR,{})]})})})})}Hx.init("l4eGBb6GgLVODJBOf");om.createRoot(document.getElementById("root")).render(r.jsx(xi.StrictMode,{children:r.jsx(OD,{})}))});export default qD();
